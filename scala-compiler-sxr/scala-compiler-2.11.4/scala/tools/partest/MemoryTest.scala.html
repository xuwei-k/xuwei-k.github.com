<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <title>scala/tools/partest/MemoryTest.scala</title>
        <script type="text/javascript" src="../../../jquery-all.js"></script>
        <script type="text/javascript" src="../../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../../style.css" title="Style"></link>
    </head>
    <body>
        <pre>
package scala.tools.partest

abstract class <a title="class MemoryTest extends AnyRef" id="scala.tools.partest;MemoryTest">MemoryTest</a> <a href="#scala.tools.partest;MemoryTest" title="scala.tools.partest.MemoryTest" class="delimiter">{</a>
  def <a title="=&gt; Double" id="scala.tools.partest;MemoryTest.maxDelta">maxDelta</a>: <a href="../../Double.scala.html#scala;Double" title="Double">Double</a>
  def <a title="=&gt; Int" id="scala.tools.partest;MemoryTest.calcsPerIter">calcsPerIter</a>: <a href="../../Int.scala.html#scala;Int" title="Int">Int</a>
  def <a title="()Unit" id="scala.tools.partest;MemoryTest.calc">calc</a><span class="delimiter">(</span><span class="delimiter">)</span>: <a href="../../Unit.scala.html#scala;Unit" title="Unit">Unit</a>

  def <a title="(args: Array[String])Unit" id="scala.tools.partest;MemoryTest.main">main</a><span class="delimiter">(</span><a title="Array[String]" id="scala.tools.partest;MemoryTest.main.args">args</a>: <a href="../../Array.scala.html#scala;Array" title="Array[String]">Array</a><span class="delimiter">[</span>String<span class="delimiter">]</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    val <a title="Runtime" id="scala.tools.partest;MemoryTest.main.rt">rt</a> = <span title="Runtime.type">Runtime</span>.<span title="()Runtime">getRuntime</span><span class="delimiter">(</span><span class="delimiter">)</span>
    def <a title="()Double" id="scala.tools.partest;MemoryTest.main.memUsage">memUsage</a><span class="delimiter">(</span><span class="delimiter">)</span> = <span class="delimiter">{</span>
      import java.lang.management._
      import scala.collection.<a href="../../collection/JavaConverters.scala.html#scala.collection.JavaConverters" title="scala.collection.JavaConverters.type">JavaConverters</a>._
      val <a title="scala.collection.mutable.Buffer[java.lang.management.MemoryPoolMXBean]" id="scala.tools.partest;MemoryTest.main.memUsage.pools">pools</a> = <span title="java.lang.management.ManagementFactory.type">ManagementFactory</span>.<a href="../../collection/convert/DecorateAsScala.scala.html#scala.collection.convert;DecorateAsScala.asScalaBufferConverter" title="(l: java.util.List[java.lang.management.MemoryPoolMXBean])scala.collection.convert.Decorators.AsScala[scala.collection.mutable.Buffer[java.lang.management.MemoryPoolMXBean]]">getMemoryPoolMXBeans</a>.<a href="../../collection/convert/Decorators.scala.html#scala.collection.convert;Decorators;AsScala.asScala" title="=&gt; scala.collection.mutable.Buffer[java.lang.management.MemoryPoolMXBean]">asScala</a>
      <a href="#scala.tools.partest;MemoryTest.main.memUsage.pools" title="scala.collection.mutable.Buffer[java.lang.management.MemoryPoolMXBean]">pools</a>.<a href="../../collection/TraversableLike.scala.html#scala.collection;TraversableLike.map" title="(f: java.lang.management.MemoryPoolMXBean =&gt; Long)(implicit bf: scala.collection.generic.CanBuildFrom[scala.collection.mutable.Buffer[java.lang.management.MemoryPoolMXBean],Long,scala.collection.mutable.Buffer[Long]])scala.collection.mutable.Buffer[Long]">map</a><a href="../../collection/mutable/Buffer.scala.html#scala.collection.mutable.Buffer.canBuildFrom" title="scala.collection.generic.CanBuildFrom[scala.collection.mutable.Buffer.Coll,Long,scala.collection.mutable.Buffer[Long]]" class="delimiter">(</a><a href="#scala.tools.partest;MemoryTest.main.memUsage.$anonfun.x$1" title="java.lang.management.MemoryPoolMXBean">_</a>.<span title="()java.lang.management.MemoryUsage">getUsage</span>.<span title="()Long">getUsed</span><span class="delimiter">)</span>.<a href="../../collection/TraversableOnce.scala.html#scala.collection;TraversableOnce.sum" title="(implicit num: Numeric[Long])Long">sum</a> <a href="../../Long.scala.html#scala;Long./(116fb58ef6)" title="(x: Double)Double">/</a> <span title="Double(1000000.0)" class="double">1000000d</span>
    <span class="delimiter">}</span>

    val <a title="scala.collection.mutable.ListBuffer[Double]" id="scala.tools.partest;MemoryTest.main.history">history</a> = scala.collection.mutable.<a href="../../collection/generic/GenericCompanion.scala.html#scala.collection.generic;GenericCompanion.apply" title="[A](elems: A*)scala.collection.mutable.ListBuffer[A]">ListBuffer</a><span title="(elems: Double*)scala.collection.mutable.ListBuffer[Double]" class="delimiter">[</span><a href="../../Double.scala.html#scala;Double" title="Double">Double</a><span class="delimiter">]</span><span class="delimiter">(</span><span class="delimiter">)</span>
    def <a title="()scala.collection.mutable.ListBuffer[Double]" id="scala.tools.partest;MemoryTest.main.stressTestIter">stressTestIter</a><span class="delimiter">(</span><span class="delimiter">)</span> = <span class="delimiter">{</span>
      var <a title="Int" id="scala.tools.partest;MemoryTest.main.stressTestIter.i">i</a> = <span title="Int(0)" class="int">0</span>
      while <span class="delimiter">(</span><a href="#scala.tools.partest;MemoryTest.main.stressTestIter.i" title="Int">i</a> <a href="../../Int.scala.html#scala;Int.<(5f58a84eb3)" title="(x: Int)Boolean">&lt;</a> <a href="#scala.tools.partest;MemoryTest.calcsPerIter" title="=&gt; Int">calcsPerIter</a><span class="delimiter">)</span> <a href="#scala.tools.partest;MemoryTest.main.stressTestIter.while$1" title="()Unit" class="delimiter">{</a> <a href="#scala.tools.partest;MemoryTest.calc" title="()Unit">calc</a><span class="delimiter">(</span><span class="delimiter">)</span>; <a href="#scala.tools.partest;MemoryTest.main.stressTestIter.i" title="Int">i</a> <a href="../../Int.scala.html#scala;Int.+(1409840560)" title="(x: Int)Int">+=</a> <span title="Int(1)" class="int">1</span> <span class="delimiter">}</span>
      <a href="../../Predef.scala.html#scala;LowPriorityImplicits.intWrapper" title="implicit scala.LowPriorityImplicits.intWrapper : (x: Int)scala.runtime.RichInt" class="int">1</a> <a href="../../runtime/RichInt.scala.html#scala.runtime;RichInt.to(edbf447743)" title="(end: Int)scala.collection.immutable.Range.Inclusive">to</a> <span title="Int(5)" class="int">5</span> <a href="../../collection/immutable/Range.scala.html#scala.collection.immutable;Range.foreach" title="(f: Int =&gt; Unit)Unit">foreach</a> <span class="delimiter">(</span><a title="Int" id="scala.tools.partest;MemoryTest.main.stressTestIter.$anonfun.x$2">_</a> =&gt; <a href="#scala.tools.partest;MemoryTest.main.rt" title="Runtime">rt</a>.<span title="()Unit">gc</span><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span>
      <a href="#scala.tools.partest;MemoryTest.main.history" title="scala.collection.mutable.ListBuffer[Double]">history</a> <a href="../../collection/mutable/ListBuffer.scala.html#scala.collection.mutable;ListBuffer.+=(f93df146a4)" title="(x: Double)history.type">+=</a> <a href="#scala.tools.partest;MemoryTest.main.memUsage" title="()Double">memUsage</a>
    <span class="delimiter">}</span>

    <a href="../../Predef.scala.html#scala;LowPriorityImplicits.intWrapper" title="implicit scala.LowPriorityImplicits.intWrapper : (x: Int)scala.runtime.RichInt" class="int">1</a> <a href="../../runtime/RichInt.scala.html#scala.runtime;RichInt.to(edbf447743)" title="(end: Int)scala.collection.immutable.Range.Inclusive">to</a> <span title="Int(5)" class="int">5</span> <a href="../../collection/immutable/Range.scala.html#scala.collection.immutable;Range.foreach" title="(f: Int =&gt; scala.collection.mutable.ListBuffer[Double])Unit">foreach</a> <span class="delimiter">(</span><a title="Int" id="scala.tools.partest;MemoryTest.main.$anonfun.x$3">_</a> =&gt; <a href="#scala.tools.partest;MemoryTest.main.stressTestIter" title="()scala.collection.mutable.ListBuffer[Double]">stressTestIter</a><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span>
    val <a title="Double" id="scala.tools.partest;MemoryTest.main.reference">reference</a> = <a href="#scala.tools.partest;MemoryTest.main.memUsage" title="()Double">memUsage</a><span class="delimiter">(</span><span class="delimiter">)</span>
    <a href="../../Predef.scala.html#scala;LowPriorityImplicits.intWrapper" title="implicit scala.LowPriorityImplicits.intWrapper : (x: Int)scala.runtime.RichInt" class="int">1</a> <a href="../../runtime/RichInt.scala.html#scala.runtime;RichInt.to(edbf447743)" title="(end: Int)scala.collection.immutable.Range.Inclusive">to</a> <span title="Int(5)" class="int">5</span> <a href="../../collection/immutable/Range.scala.html#scala.collection.immutable;Range.foreach" title="(f: Int =&gt; scala.collection.mutable.ListBuffer[Double])Unit">foreach</a> <span class="delimiter">(</span><a title="Int" id="scala.tools.partest;MemoryTest.main.$anonfun.x$4">_</a> =&gt; <a href="#scala.tools.partest;MemoryTest.main.stressTestIter" title="()scala.collection.mutable.ListBuffer[Double]">stressTestIter</a><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span>
    <a href="../../Predef.scala.html#scala;LowPriorityImplicits.intWrapper" title="implicit scala.LowPriorityImplicits.intWrapper : (x: Int)scala.runtime.RichInt" class="int">1</a> <a href="../../runtime/RichInt.scala.html#scala.runtime;RichInt.to(edbf447743)" title="(end: Int)scala.collection.immutable.Range.Inclusive">to</a> <span title="Int(5)" class="int">5</span> <a href="../../collection/immutable/Range.scala.html#scala.collection.immutable;Range.foreach" title="(f: Int =&gt; Unit)Unit">foreach</a> <span class="delimiter">(</span><a title="Int" id="scala.tools.partest;MemoryTest.main.$anonfun.x$5">_</a> =&gt; <a href="#scala.tools.partest;MemoryTest.main.rt" title="Runtime">rt</a>.<span title="()Unit">gc</span><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span>
    val <a title="Double" id="scala.tools.partest;MemoryTest.main.result">result</a> = <a href="#scala.tools.partest;MemoryTest.main.memUsage" title="()Double">memUsage</a><span class="delimiter">(</span><span class="delimiter">)</span>
    <a href="#scala.tools.partest;MemoryTest.main.history" title="scala.collection.mutable.ListBuffer[Double]">history</a> <a href="../../collection/mutable/ListBuffer.scala.html#scala.collection.mutable;ListBuffer.+=(f93df146a4)" title="(x: Double)history.type">+=</a> <a href="#scala.tools.partest;MemoryTest.main.result" title="Double">result</a>

    val delta = <a href="#scala.tools.partest;MemoryTest.main.result" title="Double">result</a> <a href="../../Double.scala.html#scala;Double.-(116fb58ef6)" title="Double" id="scala.tools.partest;MemoryTest.main.delta">-</a> <a href="#scala.tools.partest;MemoryTest.main.reference" title="Double">reference</a>
    if <span class="delimiter">(</span><a href="#scala.tools.partest;MemoryTest.main.delta" title="Double">delta</a> <a href="../../Double.scala.html#scala;Double.>(f1f7b5263c)" title="(x: Double)Boolean">&gt;</a> <a href="#scala.tools.partest;MemoryTest.maxDelta" title="=&gt; Double">maxDelta</a><span class="delimiter">)</span> <span class="delimiter">{</span>
      <a href="../../Predef.scala.html#scala.Predef.println(b0c81b2e65)" title="(x: Any)Unit">println</a><span class="delimiter">(</span><span title="String(&quot;FAILED&quot;)" class="string">&quot;FAILED&quot;</span><span class="delimiter">)</span>
      <a href="#scala.tools.partest;MemoryTest.main.history" title="scala.collection.mutable.ListBuffer[Double]">history</a> <a href="../../collection/generic/TraversableForwarder.scala.html#scala.collection.generic;TraversableForwarder.foreach" title="(f: Double =&gt; Unit)Unit">foreach</a> <span class="delimiter">(</span><a title="Double" id="scala.tools.partest;MemoryTest.main.$anonfun.mb">mb</a> =&gt; <a href="../../Predef.scala.html#scala.Predef.println(b0c81b2e65)" title="(x: Any)Unit">println</a><span class="delimiter">(</span><a href="#scala.tools.partest;MemoryTest.main.$anonfun.mb" title="Double">mb</a> <a href="../../Double.scala.html#scala;Double.+(2f2707259c)" title="(x: String)String">+</a> <span title="String(&quot; Mb&quot;)" class="string">&quot; Mb&quot;</span><span class="delimiter">)</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>
<span class="delimiter">}</span>

        </pre>
    </body>
</html>
