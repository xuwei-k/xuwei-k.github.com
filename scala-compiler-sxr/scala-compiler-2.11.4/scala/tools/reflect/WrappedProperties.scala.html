<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <title>scala/tools/reflect/WrappedProperties.scala</title>
        <script type="text/javascript" src="../../../jquery-all.js"></script>
        <script type="text/javascript" src="../../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../../style.css" title="Style"></link>
    </head>
    <body>
        <pre>
<span class="comment">/* NSC -- new Scala compiler
 * Copyright 2006-2013 LAMP/EPFL
 * @author  Paul Phillips
 */</span>

package scala.tools
package reflect

import scala.util.PropertiesTrait
import java.security.AccessControlException

<span class="comment">/** For placing a wrapper function around property functions.
 *  Motivated by places like google app engine throwing exceptions
 *  on property lookups.
 */</span>
trait <a title="trait WrappedProperties extends AnyRef with scala.util.PropertiesTrait" id="scala.tools.reflect;WrappedProperties">WrappedProperties</a> extends <a href="../../util/Properties.scala.html#scala.util;PropertiesTrait" title="scala.util.PropertiesTrait">PropertiesTrait</a> <span class="delimiter">{</span>
  def <a title="[T](body: =&gt; T)Option[T]" id="scala.tools.reflect;WrappedProperties.wrap">wrap</a><span class="delimiter">[</span><a title="" id="scala.tools.reflect;WrappedProperties.wrap;T">T</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="=&gt; T" id="scala.tools.reflect;WrappedProperties.wrap.body">body</a>: =&gt; T<span class="delimiter">)</span>: <a href="../../Option.scala.html#scala;Option" title="Option[T]">Option</a><span class="delimiter">[</span>T<span class="delimiter">]</span>

  protected def <a title="=&gt; String" id="scala.tools.reflect;WrappedProperties.propCategory">propCategory</a>   = <span title="String(&quot;wrapped&quot;)" class="string">&quot;wrapped&quot;</span>
  protected def <a title="=&gt; Class[_ &lt;: scala.tools.reflect.WrappedProperties]" id="scala.tools.reflect;WrappedProperties.pickJarBasedOn">pickJarBasedOn</a> = this.<span title="()Class[_]">getClass</span>

  override def <a title="(name: String)Boolean" id="scala.tools.reflect;WrappedProperties.propIsSet">propIsSet</a><span class="delimiter">(</span><a title="String" id="scala.tools.reflect;WrappedProperties.propIsSet.name">name</a>: <span title="String">String</span><span class="delimiter">)</span>               = <a href="#scala.tools.reflect;WrappedProperties.wrap" title="(body: =&gt; Boolean)Option[Boolean]">wrap</a><span class="delimiter">(</span>super.<a href="../../util/Properties.scala.html#scala.util;PropertiesTrait.propIsSet" title="(name: String)Boolean">propIsSet</a><span class="delimiter">(</span><a href="#scala.tools.reflect;WrappedProperties.propIsSet.name" title="String">name</a><span class="delimiter">)</span><span class="delimiter">)</span> <a href="../../Option.scala.html#scala;Option.exists" title="(p: Boolean =&gt; Boolean)Boolean">exists</a> <span class="delimiter">(</span><a title="Boolean" id="scala.tools.reflect;WrappedProperties.propIsSet.$anonfun.x">x</a> =&gt; <a href="#scala.tools.reflect;WrappedProperties.propIsSet.$anonfun.x" title="Boolean">x</a><span class="delimiter">)</span>
  override def <a title="(name: String, alt: String)String" id="scala.tools.reflect;WrappedProperties.propOrElse">propOrElse</a><span class="delimiter">(</span><a title="String" id="scala.tools.reflect;WrappedProperties.propOrElse.name">name</a>: <span title="String">String</span>, <a title="String" id="scala.tools.reflect;WrappedProperties.propOrElse.alt">alt</a>: <span title="String">String</span><span class="delimiter">)</span> = <a href="#scala.tools.reflect;WrappedProperties.wrap" title="(body: =&gt; String)Option[String]">wrap</a><span class="delimiter">(</span>super.<a href="../../util/Properties.scala.html#scala.util;PropertiesTrait.propOrElse" title="(name: String, alt: String)String">propOrElse</a><span class="delimiter">(</span><a href="#scala.tools.reflect;WrappedProperties.propOrElse.name" title="String">name</a>, <a href="#scala.tools.reflect;WrappedProperties.propOrElse.alt" title="String">alt</a><span class="delimiter">)</span><span class="delimiter">)</span> <a href="../../Option.scala.html#scala;Option.getOrElse" title="(default: =&gt; String)String">getOrElse</a> <a href="#scala.tools.reflect;WrappedProperties.propOrElse.alt" title="String">alt</a>
  override def <a title="(name: String, value: String)String" id="scala.tools.reflect;WrappedProperties.setProp">setProp</a><span class="delimiter">(</span><a title="String" id="scala.tools.reflect;WrappedProperties.setProp.name">name</a>: <span title="String">String</span>, <a title="String" id="scala.tools.reflect;WrappedProperties.setProp.value">value</a>: <span title="String">String</span><span class="delimiter">)</span>  = <a href="#scala.tools.reflect;WrappedProperties.wrap" title="(body: =&gt; String)Option[String]">wrap</a><span class="delimiter">(</span>super.<a href="../../util/Properties.scala.html#scala.util;PropertiesTrait.setProp" title="(name: String, value: String)String">setProp</a><span class="delimiter">(</span><a href="#scala.tools.reflect;WrappedProperties.setProp.name" title="String">name</a>, <a href="#scala.tools.reflect;WrappedProperties.setProp.value" title="String">value</a><span class="delimiter">)</span><span class="delimiter">)</span>.<a href="../../Option.scala.html#scala;Option.orNull" title="(implicit ev: &lt;:&lt;[Null,String])String">orNull</a>
  override def <a title="(name: String)String" id="scala.tools.reflect;WrappedProperties.clearProp">clearProp</a><span class="delimiter">(</span><a title="String" id="scala.tools.reflect;WrappedProperties.clearProp.name">name</a>: <span title="String">String</span><span class="delimiter">)</span>               = <a href="#scala.tools.reflect;WrappedProperties.wrap" title="(body: =&gt; String)Option[String]">wrap</a><span class="delimiter">(</span>super.<a href="../../util/Properties.scala.html#scala.util;PropertiesTrait.clearProp" title="(name: String)String">clearProp</a><span class="delimiter">(</span><a href="#scala.tools.reflect;WrappedProperties.clearProp.name" title="String">name</a><span class="delimiter">)</span><span class="delimiter">)</span>.<a href="../../Option.scala.html#scala;Option.orNull" title="(implicit ev: &lt;:&lt;[Null,String])String">orNull</a>
  override def <a title="(name: String, alt: String)String" id="scala.tools.reflect;WrappedProperties.envOrElse">envOrElse</a><span class="delimiter">(</span><a title="String" id="scala.tools.reflect;WrappedProperties.envOrElse.name">name</a>: <span title="String">String</span>, <a title="String" id="scala.tools.reflect;WrappedProperties.envOrElse.alt">alt</a>: <span title="String">String</span><span class="delimiter">)</span>  = <a href="#scala.tools.reflect;WrappedProperties.wrap" title="(body: =&gt; String)Option[String]">wrap</a><span class="delimiter">(</span>super.<a href="../../util/Properties.scala.html#scala.util;PropertiesTrait.envOrElse" title="(name: String, alt: String)String">envOrElse</a><span class="delimiter">(</span><a href="#scala.tools.reflect;WrappedProperties.envOrElse.name" title="String">name</a>, <a href="#scala.tools.reflect;WrappedProperties.envOrElse.alt" title="String">alt</a><span class="delimiter">)</span><span class="delimiter">)</span> <a href="../../Option.scala.html#scala;Option.getOrElse" title="(default: =&gt; String)String">getOrElse</a> <a href="#scala.tools.reflect;WrappedProperties.envOrElse.alt" title="String">alt</a>
  override def <a title="(name: String)Option[String]" id="scala.tools.reflect;WrappedProperties.envOrNone">envOrNone</a><span class="delimiter">(</span><a title="String" id="scala.tools.reflect;WrappedProperties.envOrNone.name">name</a>: <span title="String">String</span><span class="delimiter">)</span>               = <a href="#scala.tools.reflect;WrappedProperties.wrap" title="(body: =&gt; Option[String])Option[Option[String]]">wrap</a><span class="delimiter">(</span>super.<a href="../../util/Properties.scala.html#scala.util;PropertiesTrait.envOrNone" title="(name: String)Option[String]">envOrNone</a><span class="delimiter">(</span><a href="#scala.tools.reflect;WrappedProperties.envOrNone.name" title="String">name</a><span class="delimiter">)</span><span class="delimiter">)</span>.<a href="../../Option.scala.html#scala;Option.flatten" title="(implicit ev: &lt;:&lt;[Option[String],Option[String]])Option[String]">flatten</a>
  override def <a title="(name: String, alt: Option[String])Option[String]" id="scala.tools.reflect;WrappedProperties.envOrSome">envOrSome</a><span class="delimiter">(</span><a title="String" id="scala.tools.reflect;WrappedProperties.envOrSome.name">name</a>: <span title="String">String</span>, <a title="Option[String]" id="scala.tools.reflect;WrappedProperties.envOrSome.alt">alt</a>: <a href="../../Option.scala.html#scala;Option" title="Option[String]">Option</a><span class="delimiter">[</span>String<span class="delimiter">]</span><span class="delimiter">)</span> = <a href="#scala.tools.reflect;WrappedProperties.wrap" title="(body: =&gt; Option[String])Option[Option[String]]">wrap</a><span class="delimiter">(</span>super.<a href="../../util/Properties.scala.html#scala.util;PropertiesTrait.envOrNone" title="(name: String)Option[String]">envOrNone</a><span class="delimiter">(</span><a href="#scala.tools.reflect;WrappedProperties.envOrSome.name" title="String">name</a><span class="delimiter">)</span><span class="delimiter">)</span>.<a href="../../Option.scala.html#scala;Option.flatten" title="(implicit ev: &lt;:&lt;[Option[String],Option[String]])Option[String]">flatten</a> <a href="../../Option.scala.html#scala;Option.orElse" title="(alternative: =&gt; Option[String])Option[String]">orElse</a> <a href="#scala.tools.reflect;WrappedProperties.envOrSome.alt" title="Option[String]">alt</a>

  def <a title="=&gt; List[(String, String)]" id="scala.tools.reflect;WrappedProperties.systemProperties">systemProperties</a>: <a href="../../collection/immutable/List.scala.html#scala.collection.immutable;List" title="List[(String, String)]">List</a><span class="delimiter">[</span><span class="delimiter">(</span>String, String<span class="delimiter">)</span><span class="delimiter">]</span> = <span class="delimiter">{</span>
    import scala.collection.<a href="../../collection/JavaConverters.scala.html#scala.collection.JavaConverters" title="scala.collection.JavaConverters.type">JavaConverters</a>._
    <a href="#scala.tools.reflect;WrappedProperties.wrap" title="(body: =&gt; List[(String, String)])Option[List[(String, String)]]">wrap</a> <span class="delimiter">{</span>
      val <a title="java.util.Properties" id="scala.tools.reflect;WrappedProperties.systemProperties.props">props</a> = <span title="System.type">System</span>.<span title="()java.util.Properties">getProperties</span>
      <span class="comment">// SI-7269 Be careful to avoid `ConcurrentModificationException` if another thread modifies the properties map</span>
      <a href="#scala.tools.reflect;WrappedProperties.systemProperties.props" title="java.util.Properties">props</a>.<span title="()java.util.Set[String]">stringPropertyNames</span><a href="../../collection/convert/DecorateAsScala.scala.html#scala.collection.convert;DecorateAsScala.asScalaSetConverter" title="(s: java.util.Set[String])scala.collection.convert.Decorators.AsScala[scala.collection.mutable.Set[String]]" class="delimiter">(</a><span class="delimiter">)</span>.<a href="../../collection/convert/Decorators.scala.html#scala.collection.convert;Decorators;AsScala.asScala" title="=&gt; scala.collection.mutable.Set[String]">asScala</a>.<a href="../../collection/TraversableOnce.scala.html#scala.collection;TraversableOnce.toList" title="=&gt; List[String]">toList</a>.<a href="../../collection/immutable/List.scala.html#scala.collection.immutable;List.map" title="(f: String =&gt; (String, String))(implicit bf: scala.collection.generic.CanBuildFrom[List[String],(String, String),List[(String, String)]])List[(String, String)]">map</a><a href="../../collection/immutable/List.scala.html#scala.collection.immutable.List.canBuildFrom" title="scala.collection.generic.CanBuildFrom[scala.collection.immutable.List.Coll,(String, String),List[(String, String)]]" class="delimiter">(</a><a title="String" id="scala.tools.reflect;WrappedProperties.systemProperties.$anonfun.k">k</a> =&gt; <a href="../../Tuple2.scala.html#scala;Tuple2" title="(_1: String, _2: String)(String, String)" class="delimiter">(</a><a href="#scala.tools.reflect;WrappedProperties.systemProperties.$anonfun.k" title="String">k</a>, <a href="#scala.tools.reflect;WrappedProperties.systemProperties.props" title="java.util.Properties">props</a>.<span title="(x$1: Any)Object">get</span><span class="delimiter">(</span><a href="#scala.tools.reflect;WrappedProperties.systemProperties.$anonfun.k" title="String">k</a><span class="delimiter">)</span>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="String" class="delimiter">[</span><span title="String">String</span><span class="delimiter">]</span><span class="delimiter">)</span><span class="delimiter">)</span>
    <span class="delimiter">}</span> <a href="../../Option.scala.html#scala;Option.getOrElse" title="(default: =&gt; List[(String, String)])List[(String, String)]">getOrElse</a> <a href="../../collection/immutable/List.scala.html#scala.collection.immutable.Nil" title="scala.collection.immutable.Nil.type">Nil</a>
  <span class="delimiter">}</span>
<span class="delimiter">}</span>

object <a title="scala.tools.reflect.WrappedProperties.type" id="scala.tools.reflect.WrappedProperties">WrappedProperties</a> <a href="#scala.tools.reflect.WrappedProperties" title="scala.tools.reflect.WrappedProperties.type" class="delimiter">{</a>
  object <a title="scala.tools.reflect.WrappedProperties.AccessControl.type" id="scala.tools.reflect.WrappedProperties.AccessControl">AccessControl</a> extends <a href="#scala.tools.reflect;WrappedProperties" title="scala.tools.reflect.WrappedProperties">WrappedProperties</a> <span class="delimiter">{</span>
    def <a title="[T](body: =&gt; T)Option[T]" id="scala.tools.reflect.WrappedProperties.AccessControl.wrap">wrap</a><span class="delimiter">[</span><a title="" id="scala.tools.reflect.WrappedProperties.AccessControl.wrap;T">T</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="=&gt; T" id="scala.tools.reflect.WrappedProperties.AccessControl.wrap.body">body</a>: =&gt; T<span class="delimiter">)</span> = try <a href="../../Option.scala.html#scala;Some" title="(x: T)Some[T]">Some</a><span class="delimiter">(</span><a href="#scala.tools.reflect.WrappedProperties.AccessControl.wrap.body" title="=&gt; T">body</a><span class="delimiter">)</span> catch <span class="delimiter">{</span> case _: <span title="java.security.AccessControlException">AccessControlException</span> =&gt; <a href="../../Option.scala.html#scala.None" title="None.type">None</a> <span class="delimiter">}</span>
  <span class="delimiter">}</span>
<span class="delimiter">}</span>

        </pre>
    </body>
</html>
