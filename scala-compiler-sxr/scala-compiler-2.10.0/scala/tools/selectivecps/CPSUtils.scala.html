<?xml version="1.0" encoding="utf-8"?>
      <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <meta http-equiv="Expires" content="0" />
        <title>scala/tools/selectivecps/CPSUtils.scala</title>
        <script type="text/javascript" src="../../../jquery-all.js"></script>
        <script type="text/javascript" src="../../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../../style.css" title="Style"></link>
    </head>
    <body>
        <pre>
// $Id$

<span class="keyword">package</span> scala.tools.selectivecps

<span class="keyword">import</span> scala.tools.nsc.Global

<span class="keyword">trait</span> <a title="trait CPSUtils extends Object" id="51704">CPSUtils</a> <a href="../../Unit.scala.html#1515" title="Unit" class="delimiter">{</a>
  <span class="keyword">val</span> <a title="=&gt; scala.tools.nsc.Global" id="1211325">global</a>: <a href="../nsc/Global.scala.html#27346" title="scala.tools.nsc.Global">Global</a>
  <span class="keyword">import</span> <a href="#1211325" title="=&gt; scala.tools.nsc.Global">global</a>._
  <span class="keyword">import</span> <a href="../../reflect/internal/Definitions.scala.html#407777" title="CPSUtils.this.global.definitions.type">definitions</a>._

  <span class="keyword">var</span> <a title="Boolean" id="1211329">cpsEnabled</a> = <span title="Boolean(false)" class="keyword">false</span>
  <span class="keyword">val</span> <a title="Boolean" id="1211331">verbose</a>: <a href="../../Boolean.scala.html#1425" title="Boolean">Boolean</a> = <span title="System.type">System</span>.<span title="(x$1: String, x$2: String)String">getProperty</span><span class="delimiter">(</span><span title="String(&quot;cpsVerbose&quot;)" class="string">&quot;cpsVerbose&quot;</span>, <span title="String(&quot;false&quot;)" class="string">&quot;false&quot;</span><span class="delimiter">)</span> <span title="(x$1: AnyRef)Boolean">==</span> <span title="String(&quot;true&quot;)" class="string">&quot;true&quot;</span>
  <span class="keyword">def</span> <a title="(x: =&gt; Any)Unit" id="1211333">vprintln</a><span class="delimiter">(</span><a title="=&gt; Any" id="1211399">x</a>: =&gt;Any<span class="delimiter">)</span>: <a href="../../Unit.scala.html#1515" title="Unit">Unit</a> = <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#1211331" title="=&gt; Boolean">verbose</a><span class="delimiter">)</span> <a href="../../Predef.scala.html#7514" title="(x: Any)Unit">println</a><span class="delimiter">(</span><a href="#1211399" title="=&gt; Any">x</a><span class="delimiter">)</span>

  <span class="keyword">object</span> <a title="CPSUtils.this.cpsNames.type" id="1211334">cpsNames</a> <a href="#1211335" title="CPSUtils.this.cpsNames.type" class="delimiter">{</a>
    <span class="keyword">val</span> <a title="CPSUtils.this.global.TermName" id="1212941">catches</a>         = <a href="../../reflect/internal/Names.scala.html#406859" title="(s: String)CPSUtils.this.global.TermName">newTermName</a><span class="delimiter">(</span><span title="String(&quot;$catches&quot;)" class="string">&quot;$catches&quot;</span><span class="delimiter">)</span>
    <span class="keyword">val</span> <a title="CPSUtils.this.global.TermName" id="1212943">ex</a>              = <a href="../../reflect/internal/Names.scala.html#406859" title="(s: String)CPSUtils.this.global.TermName">newTermName</a><span class="delimiter">(</span><span title="String(&quot;$ex&quot;)" class="string">&quot;$ex&quot;</span><span class="delimiter">)</span>
    <span class="keyword">val</span> <a title="CPSUtils.this.global.TermName" id="1212945">flatMapCatch</a>    = <a href="../../reflect/internal/Names.scala.html#406859" title="(s: String)CPSUtils.this.global.TermName">newTermName</a><span class="delimiter">(</span><span title="String(&quot;flatMapCatch&quot;)" class="string">&quot;flatMapCatch&quot;</span><span class="delimiter">)</span>
    <span class="keyword">val</span> <a title="CPSUtils.this.global.TermName" id="1212947">getTrivialValue</a> = <a href="../../reflect/internal/Names.scala.html#406859" title="(s: String)CPSUtils.this.global.TermName">newTermName</a><span class="delimiter">(</span><span title="String(&quot;getTrivialValue&quot;)" class="string">&quot;getTrivialValue&quot;</span><span class="delimiter">)</span>
    <span class="keyword">val</span> <a title="CPSUtils.this.global.TermName" id="1212949">isTrivial</a>       = <a href="../../reflect/internal/Names.scala.html#406859" title="(s: String)CPSUtils.this.global.TermName">newTermName</a><span class="delimiter">(</span><span title="String(&quot;isTrivial&quot;)" class="string">&quot;isTrivial&quot;</span><span class="delimiter">)</span>
    <span class="keyword">val</span> <a title="CPSUtils.this.global.TermName" id="1212951">reify</a>           = <a href="../../reflect/internal/Names.scala.html#406859" title="(s: String)CPSUtils.this.global.TermName">newTermName</a><span class="delimiter">(</span><span title="String(&quot;reify&quot;)" class="string">&quot;reify&quot;</span><span class="delimiter">)</span>
    <span class="keyword">val</span> <a title="CPSUtils.this.global.TermName" id="1212953">reifyR</a>          = <a href="../../reflect/internal/Names.scala.html#406859" title="(s: String)CPSUtils.this.global.TermName">newTermName</a><span class="delimiter">(</span><span title="String(&quot;reifyR&quot;)" class="string">&quot;reifyR&quot;</span><span class="delimiter">)</span>
    <span class="keyword">val</span> <a title="CPSUtils.this.global.TermName" id="1212955">shift</a>           = <a href="../../reflect/internal/Names.scala.html#406859" title="(s: String)CPSUtils.this.global.TermName">newTermName</a><span class="delimiter">(</span><span title="String(&quot;shift&quot;)" class="string">&quot;shift&quot;</span><span class="delimiter">)</span>
    <span class="keyword">val</span> <a title="CPSUtils.this.global.TermName" id="1212957">shiftR</a>          = <a href="../../reflect/internal/Names.scala.html#406859" title="(s: String)CPSUtils.this.global.TermName">newTermName</a><span class="delimiter">(</span><span title="String(&quot;shiftR&quot;)" class="string">&quot;shiftR&quot;</span><span class="delimiter">)</span>
    <span class="keyword">val</span> <a title="CPSUtils.this.global.TermName" id="1212959">shiftSuffix</a>     = <a href="../../reflect/internal/Names.scala.html#406859" title="(s: String)CPSUtils.this.global.TermName">newTermName</a><span class="delimiter">(</span><span title="String(&quot;$shift&quot;)" class="string">&quot;$shift&quot;</span><span class="delimiter">)</span>
    <span class="keyword">val</span> <a title="CPSUtils.this.global.TermName" id="1212961">shiftUnit0</a>      = <a href="../../reflect/internal/Names.scala.html#406859" title="(s: String)CPSUtils.this.global.TermName">newTermName</a><span class="delimiter">(</span><span title="String(&quot;shiftUnit0&quot;)" class="string">&quot;shiftUnit0&quot;</span><span class="delimiter">)</span>
    <span class="keyword">val</span> <a title="CPSUtils.this.global.TermName" id="1212963">shiftUnit</a>       = <a href="../../reflect/internal/Names.scala.html#406859" title="(s: String)CPSUtils.this.global.TermName">newTermName</a><span class="delimiter">(</span><span title="String(&quot;shiftUnit&quot;)" class="string">&quot;shiftUnit&quot;</span><span class="delimiter">)</span>
    <span class="keyword">val</span> <a title="CPSUtils.this.global.TermName" id="1212965">shiftUnitR</a>      = <a href="../../reflect/internal/Names.scala.html#406859" title="(s: String)CPSUtils.this.global.TermName">newTermName</a><span class="delimiter">(</span><span title="String(&quot;shiftUnitR&quot;)" class="string">&quot;shiftUnitR&quot;</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="CPSUtils.this.global.ClassSymbol" id="1211337">MarkerCPSSym</a>        = <a href="../nsc/Global.scala.html#537442" title="=&gt; CPSUtils.this.global.Mirror">rootMirror</a>.<a href="../../reflect/internal/Mirrors.scala.html#412976" title="(fullname: String)CPSUtils.this.global.ClassSymbol">getRequiredClass</a><span class="delimiter">(</span><span title="String(&quot;scala.util.continuations.cpsSym&quot;)" class="string">&quot;scala.util.continuations.cpsSym&quot;</span><span class="delimiter">)</span>
  <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="CPSUtils.this.global.ClassSymbol" id="1211339">MarkerCPSTypes</a>      = <a href="../nsc/Global.scala.html#537442" title="=&gt; CPSUtils.this.global.Mirror">rootMirror</a>.<a href="../../reflect/internal/Mirrors.scala.html#412976" title="(fullname: String)CPSUtils.this.global.ClassSymbol">getRequiredClass</a><span class="delimiter">(</span><span title="String(&quot;scala.util.continuations.cpsParam&quot;)" class="string">&quot;scala.util.continuations.cpsParam&quot;</span><span class="delimiter">)</span>
  <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="CPSUtils.this.global.ClassSymbol" id="1211341">MarkerCPSSynth</a>      = <a href="../nsc/Global.scala.html#537442" title="=&gt; CPSUtils.this.global.Mirror">rootMirror</a>.<a href="../../reflect/internal/Mirrors.scala.html#412976" title="(fullname: String)CPSUtils.this.global.ClassSymbol">getRequiredClass</a><span class="delimiter">(</span><span title="String(&quot;scala.util.continuations.cpsSynth&quot;)" class="string">&quot;scala.util.continuations.cpsSynth&quot;</span><span class="delimiter">)</span>
  <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="CPSUtils.this.global.ClassSymbol" id="1211343">MarkerCPSAdaptPlus</a>  = <a href="../nsc/Global.scala.html#537442" title="=&gt; CPSUtils.this.global.Mirror">rootMirror</a>.<a href="../../reflect/internal/Mirrors.scala.html#412976" title="(fullname: String)CPSUtils.this.global.ClassSymbol">getRequiredClass</a><span class="delimiter">(</span><span title="String(&quot;scala.util.continuations.cpsPlus&quot;)" class="string">&quot;scala.util.continuations.cpsPlus&quot;</span><span class="delimiter">)</span>
  <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="CPSUtils.this.global.ClassSymbol" id="1211345">MarkerCPSAdaptMinus</a> = <a href="../nsc/Global.scala.html#537442" title="=&gt; CPSUtils.this.global.Mirror">rootMirror</a>.<a href="../../reflect/internal/Mirrors.scala.html#412976" title="(fullname: String)CPSUtils.this.global.ClassSymbol">getRequiredClass</a><span class="delimiter">(</span><span title="String(&quot;scala.util.continuations.cpsMinus&quot;)" class="string">&quot;scala.util.continuations.cpsMinus&quot;</span><span class="delimiter">)</span>

  <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="CPSUtils.this.global.ClassSymbol" id="1211347">Context</a> = <a href="../nsc/Global.scala.html#537442" title="=&gt; CPSUtils.this.global.Mirror">rootMirror</a>.<a href="../../reflect/internal/Mirrors.scala.html#412976" title="(fullname: String)CPSUtils.this.global.ClassSymbol">getRequiredClass</a><span class="delimiter">(</span><span title="String(&quot;scala.util.continuations.ControlContext&quot;)" class="string">&quot;scala.util.continuations.ControlContext&quot;</span><span class="delimiter">)</span>
  <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="CPSUtils.this.global.ModuleSymbol" id="1211349">ModCPS</a> = <a href="../nsc/Global.scala.html#537442" title="=&gt; CPSUtils.this.global.Mirror">rootMirror</a>.<a href="../../reflect/internal/Mirrors.scala.html#412995" title="(fullname: String)CPSUtils.this.global.ModuleSymbol">getRequiredPackage</a><span class="delimiter">(</span><span title="String(&quot;scala.util.continuations&quot;)" class="string">&quot;scala.util.continuations&quot;</span><span class="delimiter">)</span>

  <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="CPSUtils.this.global.Symbol" id="1211351">MethShiftUnit</a>  = <a href="../../reflect/internal/Definitions.scala.html#407777" title="CPSUtils.this.global.definitions.type">definitions</a>.<a href="../../reflect/internal/Definitions.scala.html#409262" title="(owner: CPSUtils.this.global.Symbol, name: CPSUtils.this.global.Name)CPSUtils.this.global.Symbol">getMember</a><span class="delimiter">(</span><a href="#1211348" title="=&gt; CPSUtils.this.global.ModuleSymbol">ModCPS</a>, <a href="#1211334" title="CPSUtils.this.cpsNames.type">cpsNames</a>.<a href="#1212963" title="=&gt; CPSUtils.this.global.TermName">shiftUnit</a><span class="delimiter">)</span>
  <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="CPSUtils.this.global.Symbol" id="1211353">MethShiftUnit0</a> = <a href="../../reflect/internal/Definitions.scala.html#407777" title="CPSUtils.this.global.definitions.type">definitions</a>.<a href="../../reflect/internal/Definitions.scala.html#409262" title="(owner: CPSUtils.this.global.Symbol, name: CPSUtils.this.global.Name)CPSUtils.this.global.Symbol">getMember</a><span class="delimiter">(</span><a href="#1211348" title="=&gt; CPSUtils.this.global.ModuleSymbol">ModCPS</a>, <a href="#1211334" title="CPSUtils.this.cpsNames.type">cpsNames</a>.<a href="#1212961" title="=&gt; CPSUtils.this.global.TermName">shiftUnit0</a><span class="delimiter">)</span>
  <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="CPSUtils.this.global.Symbol" id="1211355">MethShiftUnitR</a> = <a href="../../reflect/internal/Definitions.scala.html#407777" title="CPSUtils.this.global.definitions.type">definitions</a>.<a href="../../reflect/internal/Definitions.scala.html#409262" title="(owner: CPSUtils.this.global.Symbol, name: CPSUtils.this.global.Name)CPSUtils.this.global.Symbol">getMember</a><span class="delimiter">(</span><a href="#1211348" title="=&gt; CPSUtils.this.global.ModuleSymbol">ModCPS</a>, <a href="#1211334" title="CPSUtils.this.cpsNames.type">cpsNames</a>.<a href="#1212965" title="=&gt; CPSUtils.this.global.TermName">shiftUnitR</a><span class="delimiter">)</span>
  <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="CPSUtils.this.global.Symbol" id="1211357">MethShift</a>      = <a href="../../reflect/internal/Definitions.scala.html#407777" title="CPSUtils.this.global.definitions.type">definitions</a>.<a href="../../reflect/internal/Definitions.scala.html#409262" title="(owner: CPSUtils.this.global.Symbol, name: CPSUtils.this.global.Name)CPSUtils.this.global.Symbol">getMember</a><span class="delimiter">(</span><a href="#1211348" title="=&gt; CPSUtils.this.global.ModuleSymbol">ModCPS</a>, <a href="#1211334" title="CPSUtils.this.cpsNames.type">cpsNames</a>.<a href="#1212955" title="=&gt; CPSUtils.this.global.TermName">shift</a><span class="delimiter">)</span>
  <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="CPSUtils.this.global.Symbol" id="1211359">MethShiftR</a>     = <a href="../../reflect/internal/Definitions.scala.html#407777" title="CPSUtils.this.global.definitions.type">definitions</a>.<a href="../../reflect/internal/Definitions.scala.html#409262" title="(owner: CPSUtils.this.global.Symbol, name: CPSUtils.this.global.Name)CPSUtils.this.global.Symbol">getMember</a><span class="delimiter">(</span><a href="#1211348" title="=&gt; CPSUtils.this.global.ModuleSymbol">ModCPS</a>, <a href="#1211334" title="CPSUtils.this.cpsNames.type">cpsNames</a>.<a href="#1212957" title="=&gt; CPSUtils.this.global.TermName">shiftR</a><span class="delimiter">)</span>
  <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="CPSUtils.this.global.Symbol" id="1211361">MethReify</a>      = <a href="../../reflect/internal/Definitions.scala.html#407777" title="CPSUtils.this.global.definitions.type">definitions</a>.<a href="../../reflect/internal/Definitions.scala.html#409262" title="(owner: CPSUtils.this.global.Symbol, name: CPSUtils.this.global.Name)CPSUtils.this.global.Symbol">getMember</a><span class="delimiter">(</span><a href="#1211348" title="=&gt; CPSUtils.this.global.ModuleSymbol">ModCPS</a>, <a href="#1211334" title="CPSUtils.this.cpsNames.type">cpsNames</a>.<a href="#1212951" title="=&gt; CPSUtils.this.global.TermName">reify</a><span class="delimiter">)</span>
  <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="CPSUtils.this.global.Symbol" id="1211363">MethReifyR</a>     = <a href="../../reflect/internal/Definitions.scala.html#407777" title="CPSUtils.this.global.definitions.type">definitions</a>.<a href="../../reflect/internal/Definitions.scala.html#409262" title="(owner: CPSUtils.this.global.Symbol, name: CPSUtils.this.global.Name)CPSUtils.this.global.Symbol">getMember</a><span class="delimiter">(</span><a href="#1211348" title="=&gt; CPSUtils.this.global.ModuleSymbol">ModCPS</a>, <a href="#1211334" title="CPSUtils.this.cpsNames.type">cpsNames</a>.<a href="#1212953" title="=&gt; CPSUtils.this.global.TermName">reifyR</a><span class="delimiter">)</span>

  <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="List[CPSUtils.this.global.ClassSymbol]" id="1211365">allCPSAnnotations</a> = <a href="../../collection/immutable/List.scala.html#62451" title="(xs: CPSUtils.this.global.ClassSymbol*)List[CPSUtils.this.global.ClassSymbol]">List</a><span class="delimiter">(</span><a href="#1211336" title="=&gt; CPSUtils.this.global.ClassSymbol">MarkerCPSSym</a>, <a href="#1211338" title="=&gt; CPSUtils.this.global.ClassSymbol">MarkerCPSTypes</a>, <a href="#1211340" title="=&gt; CPSUtils.this.global.ClassSymbol">MarkerCPSSynth</a>,
    <a href="#1211342" title="=&gt; CPSUtils.this.global.ClassSymbol">MarkerCPSAdaptPlus</a>, <a href="#1211344" title="=&gt; CPSUtils.this.global.ClassSymbol">MarkerCPSAdaptMinus</a><span class="delimiter">)</span>

  // TODO - needed? Can these all use the same annotation info?
  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="()CPSUtils.this.global.AnnotationInfo" id="1211366">newSynthMarker</a><span class="delimiter">(</span><span class="delimiter">)</span> = <a href="#1211370" title="(sym: CPSUtils.this.global.Symbol)CPSUtils.this.global.AnnotationInfo">newMarker</a><span class="delimiter">(</span><a href="#1211340" title="=&gt; CPSUtils.this.global.ClassSymbol">MarkerCPSSynth</a><span class="delimiter">)</span>
  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="()CPSUtils.this.global.AnnotationInfo" id="1211367">newPlusMarker</a><span class="delimiter">(</span><span class="delimiter">)</span>  = <a href="#1211370" title="(sym: CPSUtils.this.global.Symbol)CPSUtils.this.global.AnnotationInfo">newMarker</a><span class="delimiter">(</span><a href="#1211342" title="=&gt; CPSUtils.this.global.ClassSymbol">MarkerCPSAdaptPlus</a><span class="delimiter">)</span>
  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="()CPSUtils.this.global.AnnotationInfo" id="1211368">newMinusMarker</a><span class="delimiter">(</span><span class="delimiter">)</span> = <a href="#1211370" title="(sym: CPSUtils.this.global.Symbol)CPSUtils.this.global.AnnotationInfo">newMarker</a><span class="delimiter">(</span><a href="#1211344" title="=&gt; CPSUtils.this.global.ClassSymbol">MarkerCPSAdaptMinus</a><span class="delimiter">)</span>
  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="(tpe: CPSUtils.this.global.Type)CPSUtils.this.global.AnnotationInfo" id="1211369">newMarker</a><span class="delimiter">(</span><a title="CPSUtils.this.global.Type" id="1211428">tpe</a>: <a href="../../reflect/internal/Types.scala.html#407270" title="CPSUtils.this.global.Type">Type</a><span class="delimiter">)</span>: <a href="../../reflect/internal/AnnotationInfos.scala.html#407923" title="CPSUtils.this.global.AnnotationInfo">AnnotationInfo</a> = <a href="../../reflect/internal/AnnotationInfos.scala.html#407918" title="CPSUtils.this.global.AnnotationInfo.type">AnnotationInfo</a> <a href="../../reflect/internal/AnnotationInfos.scala.html#411919" title="(atp: CPSUtils.this.global.Type)CPSUtils.this.global.AnnotationInfo">marker</a> <a href="#1211428" title="CPSUtils.this.global.Type">tpe</a>
  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="(sym: CPSUtils.this.global.Symbol)CPSUtils.this.global.AnnotationInfo" id="1211370">newMarker</a><span class="delimiter">(</span><a title="CPSUtils.this.global.Symbol" id="1211427">sym</a>: <a href="../../reflect/internal/Symbols.scala.html#407146" title="CPSUtils.this.global.Symbol">Symbol</a><span class="delimiter">)</span>: <a href="../../reflect/internal/AnnotationInfos.scala.html#407923" title="CPSUtils.this.global.AnnotationInfo">AnnotationInfo</a> = <a href="../../reflect/internal/AnnotationInfos.scala.html#407918" title="CPSUtils.this.global.AnnotationInfo.type">AnnotationInfo</a> <a href="../../reflect/internal/AnnotationInfos.scala.html#411919" title="(atp: CPSUtils.this.global.Type)CPSUtils.this.global.AnnotationInfo">marker</a> <a href="#1211427" title="CPSUtils.this.global.Symbol">sym</a>.<a href="../../reflect/internal/Symbols.scala.html#411365" title="=&gt; CPSUtils.this.global.Type">tpe</a>

  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="(tp1: CPSUtils.this.global.Type, tp2: CPSUtils.this.global.Type)CPSUtils.this.global.AnnotationInfo" id="1211371">newCpsParamsMarker</a><span class="delimiter">(</span><a title="CPSUtils.this.global.Type" id="1211646">tp1</a>: <a href="../../reflect/internal/Types.scala.html#407270" title="CPSUtils.this.global.Type">Type</a>, <a title="CPSUtils.this.global.Type" id="1211647">tp2</a>: <a href="../../reflect/internal/Types.scala.html#407270" title="CPSUtils.this.global.Type">Type</a><span class="delimiter">)</span> =
    <a href="#1211369" title="(tpe: CPSUtils.this.global.Type)CPSUtils.this.global.AnnotationInfo">newMarker</a><span class="delimiter">(</span><a href="../../reflect/internal/Types.scala.html#407408" title="(tycon: CPSUtils.this.global.Type, args: List[CPSUtils.this.global.Type])CPSUtils.this.global.Type">appliedType</a><span class="delimiter">(</span><a href="#1211338" title="=&gt; CPSUtils.this.global.ClassSymbol">MarkerCPSTypes</a>.<a href="../../reflect/internal/Symbols.scala.html#411559" title="=&gt; CPSUtils.this.global.Type">tpe</a>, <a href="../../collection/immutable/List.scala.html#62451" title="(xs: CPSUtils.this.global.Type*)List[CPSUtils.this.global.Type]">List</a><span class="delimiter">(</span><a href="#1211646" title="CPSUtils.this.global.Type">tp1</a>, <a href="#1211647" title="CPSUtils.this.global.Type">tp2</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>

  // annotation checker

  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="(ann: CPSUtils.this.global.AnnotationInfo)(CPSUtils.this.global.Type, CPSUtils.this.global.Type)" id="1211372">annTypes</a><span class="delimiter">(</span><a title="CPSUtils.this.global.AnnotationInfo" id="1211813">ann</a>: <a href="../../reflect/internal/AnnotationInfos.scala.html#407923" title="CPSUtils.this.global.AnnotationInfo">AnnotationInfo</a><span class="delimiter">)</span>: <a href="../../Tuple2.scala.html#783" title="(CPSUtils.this.global.Type, CPSUtils.this.global.Type)" class="delimiter">(</a>Type, Type<span class="delimiter">)</span> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a href="../../collection/immutable/List.scala.html#206583" title="CPSUtils.this.global.Type" id="1213024">tp0</a> <a href="#3381841" title="(CPSUtils.this.global.Type, CPSUtils.this.global.Type)" id="3381843">::</a> <a href="../../collection/immutable/List.scala.html#206583" title="CPSUtils.this.global.Type" id="1213025">tp1</a> <a href="../../collection/immutable/List.scala.html#206584" title="List[CPSUtils.this.global.Type]" id="3381845">::</a> <a href="../../collection/immutable/List.scala.html#206584" title="List[CPSUtils.this.global.Type]" id="3381847">Nil</a> = <a href="#1211813" title="CPSUtils.this.global.AnnotationInfo">ann</a>.<a href="../../reflect/internal/AnnotationInfos.scala.html#409727" title="=&gt; CPSUtils.this.global.Type">atp</a>.<a href="../../reflect/internal/Types.scala.html#408438" title="=&gt; CPSUtils.this.global.Type">normalize</a>.<a href="../../reflect/internal/Types.scala.html#408421" title="=&gt; List[CPSUtils.this.global.Type]">typeArgs</a>
    <span class="delimiter">(</span><a href="../../Tuple2.scala.html#62849" title="(_1: CPSUtils.this.global.Type, _2: CPSUtils.this.global.Type)(CPSUtils.this.global.Type, CPSUtils.this.global.Type)" class="delimiter">(</a><a href="#1213024" title="CPSUtils.this.global.Type">tp0</a>, <a href="#1213025" title="CPSUtils.this.global.Type">tp1</a><span class="delimiter">)</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>
  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="(tpe: CPSUtils.this.global.Type)Boolean" id="1211373">hasMinusMarker</a><span class="delimiter">(</span><a title="CPSUtils.this.global.Type" id="1211478">tpe</a>: <a href="../../reflect/internal/Types.scala.html#407270" title="CPSUtils.this.global.Type">Type</a><span class="delimiter">)</span>   = <a href="#1211478" title="CPSUtils.this.global.Type">tpe</a> <a href="../../reflect/internal/AnnotationInfos.scala.html#408615" title="(cls: CPSUtils.this.global.Symbol)Boolean">hasAnnotation</a> <a href="#1211344" title="=&gt; CPSUtils.this.global.ClassSymbol">MarkerCPSAdaptMinus</a>
  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="(tpe: CPSUtils.this.global.Type)Boolean" id="1211374">hasPlusMarker</a><span class="delimiter">(</span><a title="CPSUtils.this.global.Type" id="1211481">tpe</a>: <a href="../../reflect/internal/Types.scala.html#407270" title="CPSUtils.this.global.Type">Type</a><span class="delimiter">)</span>    = <a href="#1211481" title="CPSUtils.this.global.Type">tpe</a> <a href="../../reflect/internal/AnnotationInfos.scala.html#408615" title="(cls: CPSUtils.this.global.Symbol)Boolean">hasAnnotation</a> <a href="#1211342" title="=&gt; CPSUtils.this.global.ClassSymbol">MarkerCPSAdaptPlus</a>
  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="(tpe: CPSUtils.this.global.Type)Boolean" id="1211375">hasSynthMarker</a><span class="delimiter">(</span><a title="CPSUtils.this.global.Type" id="1212059">tpe</a>: <a href="../../reflect/internal/Types.scala.html#407270" title="CPSUtils.this.global.Type">Type</a><span class="delimiter">)</span>   = <a href="#1212059" title="CPSUtils.this.global.Type">tpe</a> <a href="../../reflect/internal/AnnotationInfos.scala.html#408615" title="(cls: CPSUtils.this.global.Symbol)Boolean">hasAnnotation</a> <a href="#1211340" title="=&gt; CPSUtils.this.global.ClassSymbol">MarkerCPSSynth</a>
  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="(tpe: CPSUtils.this.global.Type)Boolean" id="1211376">hasCpsParamTypes</a><span class="delimiter">(</span><a title="CPSUtils.this.global.Type" id="1211678">tpe</a>: <a href="../../reflect/internal/Types.scala.html#407270" title="CPSUtils.this.global.Type">Type</a><span class="delimiter">)</span> = <a href="#1211678" title="CPSUtils.this.global.Type">tpe</a> <a href="../../reflect/internal/AnnotationInfos.scala.html#408615" title="(cls: CPSUtils.this.global.Symbol)Boolean">hasAnnotation</a> <a href="#1211338" title="=&gt; CPSUtils.this.global.ClassSymbol">MarkerCPSTypes</a>
  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="(tpe: CPSUtils.this.global.Type)Option[(CPSUtils.this.global.Type, CPSUtils.this.global.Type)]" id="1211377">cpsParamTypes</a><span class="delimiter">(</span><a title="CPSUtils.this.global.Type" id="1211808">tpe</a>: <a href="../../reflect/internal/Types.scala.html#407270" title="CPSUtils.this.global.Type">Type</a><span class="delimiter">)</span>    = <a href="#1211808" title="CPSUtils.this.global.Type">tpe</a> <a href="../../reflect/internal/AnnotationInfos.scala.html#408616" title="(cls: CPSUtils.this.global.Symbol)Option[CPSUtils.this.global.AnnotationInfo]">getAnnotation</a> <a href="#1211338" title="=&gt; CPSUtils.this.global.ClassSymbol">MarkerCPSTypes</a> <a href="../../Option.scala.html#62865" title="(f: CPSUtils.this.global.AnnotationInfo =&gt; (CPSUtils.this.global.Type, CPSUtils.this.global.Type))Option[(CPSUtils.this.global.Type, CPSUtils.this.global.Type)]">map</a> <a href="#1211372" title="(ann: CPSUtils.this.global.AnnotationInfo)(CPSUtils.this.global.Type, CPSUtils.this.global.Type)">annTypes</a>

  <span class="keyword">def</span> <a title="(tpe: CPSUtils.this.global.Type, cls: CPSUtils.this.global.Symbol)List[CPSUtils.this.global.AnnotationInfo]" id="1211378">filterAttribs</a><span class="delimiter">(</span><a title="CPSUtils.this.global.Type" id="1211468">tpe</a>:<a href="../../reflect/internal/Types.scala.html#407270" title="CPSUtils.this.global.Type">Type</a>, <a title="CPSUtils.this.global.Symbol" id="1211469">cls</a>:<a href="../../reflect/internal/Symbols.scala.html#407146" title="CPSUtils.this.global.Symbol">Symbol</a><span class="delimiter">)</span> =
    <a href="#1211468" title="CPSUtils.this.global.Type">tpe</a>.<a href="../../reflect/internal/Types.scala.html#408509" title="=&gt; List[CPSUtils.this.global.AnnotationInfo]">annotations</a> <a href="../../collection/TraversableLike.scala.html#58073" title="(p: CPSUtils.this.global.AnnotationInfo =&gt; Boolean)List[CPSUtils.this.global.AnnotationInfo]">filter</a> <span class="delimiter">(</span><a href="#1211475" title="CPSUtils.this.global.AnnotationInfo">_</a> <a href="../../reflect/internal/AnnotationInfos.scala.html#409745" title="(clazz: CPSUtils.this.global.Symbol)Boolean">matches</a> <a href="#1211469" title="CPSUtils.this.global.Symbol">cls</a><span class="delimiter">)</span>

  <span class="keyword">def</span> <a title="(tpe: CPSUtils.this.global.Type, classes: CPSUtils.this.global.Symbol*)CPSUtils.this.global.Type" id="1211379">removeAttribs</a><span class="delimiter">(</span><a title="CPSUtils.this.global.Type" id="1211440">tpe</a>: <a href="../../reflect/internal/Types.scala.html#407270" title="CPSUtils.this.global.Type">Type</a>, <a title="CPSUtils.this.global.Symbol*" id="1211441">classes</a>: <span title="CPSUtils.this.global.Symbol*">Symbol</span>*<span class="delimiter">)</span> =
    <a href="#1211440" title="CPSUtils.this.global.Type">tpe</a> <a href="../../reflect/internal/Types.scala.html#408511" title="(p: CPSUtils.this.global.AnnotationInfo =&gt; Boolean)CPSUtils.this.global.Type">filterAnnotations</a> <span class="delimiter">(</span><a title="CPSUtils.this.global.AnnotationInfo" id="1211445">ann</a> =&gt; <a href="../../Boolean.scala.html#57822" title="=&gt; Boolean">!</a><span class="delimiter">(</span><a href="#1211441" title="CPSUtils.this.global.Symbol*">classes</a> <a href="../../collection/IterableLike.scala.html#58566" title="(p: CPSUtils.this.global.Symbol =&gt; Boolean)Boolean">exists</a> <span class="delimiter">(</span><a href="#1211445" title="CPSUtils.this.global.AnnotationInfo">ann</a> <a href="../../reflect/internal/AnnotationInfos.scala.html#409745" title="(clazz: CPSUtils.this.global.Symbol)Boolean">matches</a> <a href="#1211451" title="CPSUtils.this.global.Symbol">_</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>

  <span class="keyword">def</span> <a title="(tpe: CPSUtils.this.global.Type)CPSUtils.this.global.Type" id="1211380">removeAllCPSAnnotations</a><span class="delimiter">(</span><a title="CPSUtils.this.global.Type" id="1211873">tpe</a>: <a href="../../reflect/internal/Types.scala.html#407270" title="CPSUtils.this.global.Type">Type</a><span class="delimiter">)</span> = <a href="#1211379" title="(tpe: CPSUtils.this.global.Type, classes: CPSUtils.this.global.Symbol*)CPSUtils.this.global.Type">removeAttribs</a><span class="delimiter">(</span><a href="#1211873" title="CPSUtils.this.global.Type">tpe</a>, <a href="#1211364" title="=&gt; List[CPSUtils.this.global.ClassSymbol]">allCPSAnnotations</a>:_*<span class="delimiter">)</span>

  <span class="keyword">def</span> <a title="(tpe: CPSUtils.this.global.Type)List[CPSUtils.this.global.AnnotationInfo]" id="1211381">cpsParamAnnotation</a><span class="delimiter">(</span><a title="CPSUtils.this.global.Type" id="1211467">tpe</a>: <a href="../../reflect/internal/Types.scala.html#407270" title="CPSUtils.this.global.Type">Type</a><span class="delimiter">)</span> = <a href="#1211378" title="(tpe: CPSUtils.this.global.Type, cls: CPSUtils.this.global.Symbol)List[CPSUtils.this.global.AnnotationInfo]">filterAttribs</a><span class="delimiter">(</span><a href="#1211467" title="CPSUtils.this.global.Type">tpe</a>, <a href="#1211338" title="=&gt; CPSUtils.this.global.ClassSymbol">MarkerCPSTypes</a><span class="delimiter">)</span>

  <span class="keyword">def</span> <a title="(ann: List[CPSUtils.this.global.AnnotationInfo])CPSUtils.this.global.AnnotationInfo" id="1211382">linearize</a><span class="delimiter">(</span><a title="List[CPSUtils.this.global.AnnotationInfo]" id="1212004">ann</a>: <a href="../../collection/immutable/List.scala.html#11952" title="List[CPSUtils.this.global.AnnotationInfo]">List</a><span class="delimiter">[</span>AnnotationInfo<span class="delimiter">]</span><span class="delimiter">)</span>: <a href="../../reflect/internal/AnnotationInfos.scala.html#407923" title="CPSUtils.this.global.AnnotationInfo">AnnotationInfo</a> = <span class="delimiter">{</span>
    <a href="#1212004" title="List[CPSUtils.this.global.AnnotationInfo]">ann</a> <a href="../../collection/LinearSeqOptimized.scala.html#86388" title="(f: (CPSUtils.this.global.AnnotationInfo, CPSUtils.this.global.AnnotationInfo) =&gt; CPSUtils.this.global.AnnotationInfo)CPSUtils.this.global.AnnotationInfo">reduceLeft</a> <span class="delimiter">{</span> <span class="delimiter">(</span><a title="CPSUtils.this.global.AnnotationInfo" id="1213058">a</a>, <a title="CPSUtils.this.global.AnnotationInfo" id="1213059">b</a><span class="delimiter">)</span> =&gt;
      <span class="keyword">val</span> <a href="#3381858" title="(x: (CPSUtils.this.global.Type, CPSUtils.this.global.Type))(CPSUtils.this.global.Type, CPSUtils.this.global.Type)" class="delimiter">(</a><a href="../../Tuple2.scala.html#60635" title="CPSUtils.this.global.Type" id="1213061">u0</a>,<a href="../../Tuple2.scala.html#60637" title="CPSUtils.this.global.Type" id="1213062">v0</a><span class="delimiter">)</span> = <a href="#1211372" title="(ann: CPSUtils.this.global.AnnotationInfo)(CPSUtils.this.global.Type, CPSUtils.this.global.Type)">annTypes</a><a href="../../Tuple2.scala.html#783" title="(CPSUtils.this.global.Type, CPSUtils.this.global.Type) @unchecked" class="delimiter">(</a><a href="#1213058" title="CPSUtils.this.global.AnnotationInfo">a</a><span class="delimiter">)</span>
      <span class="keyword">val</span> <a href="#3381864" title="(x: (CPSUtils.this.global.Type, CPSUtils.this.global.Type))(CPSUtils.this.global.Type, CPSUtils.this.global.Type)" class="delimiter">(</a><a href="../../Tuple2.scala.html#60635" title="CPSUtils.this.global.Type" id="1213064">u1</a>,<a href="../../Tuple2.scala.html#60637" title="CPSUtils.this.global.Type" id="1213065">v1</a><span class="delimiter">)</span> = <a href="#1211372" title="(ann: CPSUtils.this.global.AnnotationInfo)(CPSUtils.this.global.Type, CPSUtils.this.global.Type)">annTypes</a><a href="../../Tuple2.scala.html#783" title="(CPSUtils.this.global.Type, CPSUtils.this.global.Type) @unchecked" class="delimiter">(</a><a href="#1213059" title="CPSUtils.this.global.AnnotationInfo">b</a><span class="delimiter">)</span>
      // vprintln(&quot;check lin &quot; + a + &quot; andThen &quot; + b)

      <span title="CPSUtils.this.global.AnnotationInfo" class="keyword">if</span> <span class="delimiter">(</span><a href="#1213065" title="CPSUtils.this.global.Type">v1</a> <a href="../../reflect/internal/Types.scala.html#408481" title="(that: CPSUtils.this.global.Type)Boolean">&lt;:&lt;</a> <a href="#1213061" title="CPSUtils.this.global.Type">u0</a><span class="delimiter">)</span>
        <a href="#1211371" title="(tp1: CPSUtils.this.global.Type, tp2: CPSUtils.this.global.Type)CPSUtils.this.global.AnnotationInfo">newCpsParamsMarker</a><span class="delimiter">(</span><a href="#1213064" title="CPSUtils.this.global.Type">u1</a>, <a href="#1213062" title="CPSUtils.this.global.Type">v0</a><span class="delimiter">)</span>
      <span class="keyword">else</span>
        <span title="Nothing" class="keyword">throw</span> <a href="../../reflect/internal/Types.scala.html#416076" title="(msg: String)CPSUtils.this.global.TypeError" class="keyword">new</a> <a href="../../reflect/internal/Types.scala.html#407625" title="CPSUtils.this.global.TypeError">TypeError</a><span class="delimiter">(</span><span title="String(&quot;illegal answer type modification: &quot;)" class="string">&quot;illegal answer type modification: &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#1213058" title="CPSUtils.this.global.AnnotationInfo">a</a> <span title="(x$1: Any)String">+</span> <span title="String(&quot; andThen &quot;)" class="string">&quot; andThen &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#1213059" title="CPSUtils.this.global.AnnotationInfo">b</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  // anf transform

  <span class="keyword">def</span> <a title="(tp: CPSUtils.this.global.Type)Option[(CPSUtils.this.global.Type, CPSUtils.this.global.Type)]" id="1211383">getExternalAnswerTypeAnn</a><span class="delimiter">(</span><a title="CPSUtils.this.global.Type" id="1213094">tp</a>: <a href="../../reflect/internal/Types.scala.html#407270" title="CPSUtils.this.global.Type">Type</a><span class="delimiter">)</span> = <span class="delimiter">{</span>
    <a href="#1211377" title="(tpe: CPSUtils.this.global.Type)Option[(CPSUtils.this.global.Type, CPSUtils.this.global.Type)]">cpsParamTypes</a><span class="delimiter">(</span><a href="#1213094" title="CPSUtils.this.global.Type">tp</a><span class="delimiter">)</span> <a href="../../Option.scala.html#62890" title="(alternative: =&gt; Option[(CPSUtils.this.global.Type, CPSUtils.this.global.Type)])Option[(CPSUtils.this.global.Type, CPSUtils.this.global.Type)]">orElse</a> <span class="delimiter">{</span>
      <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#1211374" title="(tpe: CPSUtils.this.global.Type)Boolean">hasPlusMarker</a><span class="delimiter">(</span><a href="#1213094" title="CPSUtils.this.global.Type">tp</a><span class="delimiter">)</span><span class="delimiter">)</span>
        <a href="#1211325" title="=&gt; scala.tools.nsc.Global">global</a>.<a href="../nsc/Global.scala.html#537496" title="(msg: String)Unit">warning</a><span class="delimiter">(</span><span title="String(&quot;trying to instantiate type &quot;)" class="string">&quot;trying to instantiate type &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#1213094" title="CPSUtils.this.global.Type">tp</a> <span title="(x$1: Any)String">+</span> <span title="String(&quot; to unknown cps type&quot;)" class="string">&quot; to unknown cps type&quot;</span><span class="delimiter">)</span>
      <a href="../../Option.scala.html#1585" title="None.type">None</a>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="(tp: CPSUtils.this.global.Type)Option[(CPSUtils.this.global.Type, CPSUtils.this.global.Type)]" id="1211384">getAnswerTypeAnn</a><span class="delimiter">(</span><a title="CPSUtils.this.global.Type" id="1213100">tp</a>: <a href="../../reflect/internal/Types.scala.html#407270" title="CPSUtils.this.global.Type">Type</a><span class="delimiter">)</span>: <a href="../../Option.scala.html#978" title="Option[(CPSUtils.this.global.Type, CPSUtils.this.global.Type)]">Option</a><span class="delimiter">[</span><span class="delimiter">(</span>Type, Type<span class="delimiter">)</span><span class="delimiter">]</span> =
    <a href="#1211377" title="(tpe: CPSUtils.this.global.Type)Option[(CPSUtils.this.global.Type, CPSUtils.this.global.Type)]">cpsParamTypes</a><span class="delimiter">(</span><a href="#1213100" title="CPSUtils.this.global.Type">tp</a><span class="delimiter">)</span> <a href="../../Option.scala.html#62878" title="(p: ((CPSUtils.this.global.Type, CPSUtils.this.global.Type)) =&gt; Boolean)Option[(CPSUtils.this.global.Type, CPSUtils.this.global.Type)]">filterNot</a> <span class="delimiter">(</span><a title="(CPSUtils.this.global.Type, CPSUtils.this.global.Type)" id="1213103">_</a> =&gt; <a href="#1211374" title="(tpe: CPSUtils.this.global.Type)Boolean">hasPlusMarker</a><span class="delimiter">(</span><a href="#1213100" title="CPSUtils.this.global.Type">tp</a><span class="delimiter">)</span><span class="delimiter">)</span>

  <span class="keyword">def</span> <a title="(tp: CPSUtils.this.global.Type)Boolean" id="1211385">hasAnswerTypeAnn</a><span class="delimiter">(</span><a title="CPSUtils.this.global.Type" id="1212904">tp</a>: <a href="../../reflect/internal/Types.scala.html#407270" title="CPSUtils.this.global.Type">Type</a><span class="delimiter">)</span> =
    <a href="#1211376" title="(tpe: CPSUtils.this.global.Type)Boolean">hasCpsParamTypes</a><span class="delimiter">(</span><a href="#1212904" title="CPSUtils.this.global.Type">tp</a><span class="delimiter">)</span> <a href="../../Boolean.scala.html#57826" title="(x: Boolean)Boolean">&amp;&amp;</a> <a href="../../Boolean.scala.html#57822" title="=&gt; Boolean">!</a><a href="#1211374" title="(tpe: CPSUtils.this.global.Type)Boolean">hasPlusMarker</a><span class="delimiter">(</span><a href="#1212904" title="CPSUtils.this.global.Type">tp</a><span class="delimiter">)</span>

  <span class="keyword">def</span> <a title="(tree: CPSUtils.this.global.Tree)CPSUtils.this.global.Tree" id="1211386">updateSynthFlag</a><span class="delimiter">(</span><a title="CPSUtils.this.global.Tree" id="1213104">tree</a>: <a href="../../reflect/internal/Trees.scala.html#407938" title="CPSUtils.this.global.Tree">Tree</a><span class="delimiter">)</span> = <span class="delimiter">{</span> // remove annotations if *we* added them (@synth present)
    <span title="CPSUtils.this.global.Tree" class="keyword">if</span> <span class="delimiter">(</span><a href="#1211375" title="(tpe: CPSUtils.this.global.Type)Boolean">hasSynthMarker</a><span class="delimiter">(</span><a href="#1213104" title="CPSUtils.this.global.Tree">tree</a>.<a href="../../reflect/internal/Trees.scala.html#408573" title="=&gt; CPSUtils.this.global.Type">tpe</a><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">{</span>
      <a href="../nsc/Global.scala.html#537516" title="(msg: =&gt; AnyRef)Unit">log</a><span class="delimiter">(</span><span title="String(&quot;removing annotation from &quot;)" class="string">&quot;removing annotation from &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#1213104" title="CPSUtils.this.global.Tree">tree</a><span class="delimiter">)</span>
      <a href="#1213104" title="CPSUtils.this.global.Tree">tree</a> <a href="../../reflect/internal/Trees.scala.html#408561" title="(f: CPSUtils.this.global.Type =&gt; CPSUtils.this.global.Type)CPSUtils.this.global.Tree">modifyType</a> <a href="#1211380" title="(tpe: CPSUtils.this.global.Type)CPSUtils.this.global.Type">removeAllCPSAnnotations</a>
    <span class="delimiter">}</span> <span class="keyword">else</span>
      <a href="#1213104" title="CPSUtils.this.global.Tree">tree</a>
  <span class="delimiter">}</span>

  <span class="keyword">type</span> <a title="Option[(CPSUtils.this.global.Type, CPSUtils.this.global.Type)]" id="1211387">CPSInfo</a> = <a href="../../Option.scala.html#978" title="Option[(CPSUtils.this.global.Type, CPSUtils.this.global.Type)]">Option</a><span class="delimiter">[</span><span class="delimiter">(</span>Type,Type<span class="delimiter">)</span><span class="delimiter">]</span>

  <span class="keyword">def</span> <a title="(a: CPSUtils.this.CPSInfo, b: CPSUtils.this.CPSInfo)(implicit unit: CPSUtils.this.global.CompilationUnit, implicit pos: CPSUtils.this.global.Position)CPSUtils.this.CPSInfo" id="1211388">linearize</a><span class="delimiter">(</span><a title="CPSUtils.this.CPSInfo" id="1211996">a</a>: <a href="../../Option.scala.html#978" title="CPSUtils.this.CPSInfo">CPSInfo</a>, <a title="CPSUtils.this.CPSInfo" id="1211997">b</a>: <a href="../../Option.scala.html#978" title="CPSUtils.this.CPSInfo">CPSInfo</a><span class="delimiter">)</span><span class="delimiter">(</span><span class="keyword">implicit</span> <a title="CPSUtils.this.global.CompilationUnit" id="1211998">unit</a>: <a href="../nsc/CompilationUnits.scala.html#537766" title="CPSUtils.this.global.CompilationUnit">CompilationUnit</a>, <a title="CPSUtils.this.global.Position" id="1211999">pos</a>: <a href="../../reflect/internal/util/Position.scala.html#22953" title="CPSUtils.this.global.Position">Position</a><span class="delimiter">)</span>: <a href="../../Option.scala.html#978" title="CPSUtils.this.CPSInfo">CPSInfo</a> = <span class="delimiter">{</span>
    <a href="../../Tuple2.scala.html#62849" title="(_1: CPSUtils.this.CPSInfo, _2: CPSUtils.this.CPSInfo)(CPSUtils.this.CPSInfo, CPSUtils.this.CPSInfo)" class="delimiter">(</a><a href="#1211996" title="CPSUtils.this.CPSInfo">a</a>,<a href="#1211997" title="CPSUtils.this.CPSInfo">b</a><span class="delimiter">)</span> <span class="keyword">match</span> <span class="delimiter">{</span>
      <span class="keyword">case</span> <span class="delimiter">(</span>Some<a href="../../Tuple2.scala.html#60635" title="CPSUtils.this.CPSInfo" id="3381872" class="delimiter">(</a><a href="../../Option.scala.html#63132" title="(CPSUtils.this.global.Type, CPSUtils.this.global.Type)" id="3381871" class="delimiter">(</a><a href="../../Tuple2.scala.html#60635" title="CPSUtils.this.global.Type" id="1213119">u0</a>,<a href="../../Tuple2.scala.html#60637" title="CPSUtils.this.global.Type" id="1213120">v0</a><span class="delimiter">)</span><span class="delimiter">)</span>, Some<a href="../../Tuple2.scala.html#60637" title="CPSUtils.this.CPSInfo" id="3381874" class="delimiter">(</a><a href="../../Option.scala.html#63132" title="(CPSUtils.this.global.Type, CPSUtils.this.global.Type)" id="3381873" class="delimiter">(</a><a href="../../Tuple2.scala.html#60635" title="CPSUtils.this.global.Type" id="1213124">u1</a>,<a href="../../Tuple2.scala.html#60637" title="CPSUtils.this.global.Type" id="1213125">v1</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span> =&gt;
        <a href="#1211333" title="(x: =&gt; Any)Unit">vprintln</a><span class="delimiter">(</span><span title="String(&quot;check lin &quot;)" class="string">&quot;check lin &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#1211996" title="CPSUtils.this.CPSInfo">a</a> <span title="(x$1: Any)String">+</span> <span title="String(&quot; andThen &quot;)" class="string">&quot; andThen &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#1211997" title="CPSUtils.this.CPSInfo">b</a><span class="delimiter">)</span>
        <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="../../Boolean.scala.html#57822" title="=&gt; Boolean">!</a><span class="delimiter">(</span><a href="#1213125" title="CPSUtils.this.global.Type">v1</a> <a href="../../reflect/internal/Types.scala.html#408481" title="(that: CPSUtils.this.global.Type)Boolean">&lt;:&lt;</a> <a href="#1213119" title="CPSUtils.this.global.Type">u0</a><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">{</span>
          <a href="#1211998" title="CPSUtils.this.global.CompilationUnit">unit</a>.<a href="../nsc/CompilationUnits.scala.html#539298" title="(pos: CPSUtils.this.global.Position, msg: String)Unit">error</a><span class="delimiter">(</span><a href="#1211999" title="CPSUtils.this.global.Position">pos</a>,<span class="string">&quot;cannot change answer type in composition of cps expressions &quot;</span> <span title="String(&quot;cannot change answer type in composition of cps expressions from &quot;)">+</span>
          <span class="string">&quot;from &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#1213124" title="CPSUtils.this.global.Type">u1</a> <span title="(x$1: Any)String">+</span> <span title="String(&quot; to &quot;)" class="string">&quot; to &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#1213120" title="CPSUtils.this.global.Type">v0</a> <span title="(x$1: Any)String">+</span> <span title="String(&quot; because &quot;)" class="string">&quot; because &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#1213125" title="CPSUtils.this.global.Type">v1</a> <span title="(x$1: Any)String">+</span> <span title="String(&quot; is not a subtype of &quot;)" class="string">&quot; is not a subtype of &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#1213119" title="CPSUtils.this.global.Type">u0</a> <span title="(x$1: Any)String">+</span> <span title="String(&quot;.&quot;)" class="string">&quot;.&quot;</span><span class="delimiter">)</span>
          <span title="Nothing" class="keyword">throw</span> <span title="(x$1: String)Exception" class="keyword">new</span> <a href="../../package.scala.html#55500" title="Exception">Exception</a><span class="delimiter">(</span><span title="String(&quot;check lin &quot;)" class="string">&quot;check lin &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#1211996" title="CPSUtils.this.CPSInfo">a</a> <span title="(x$1: Any)String">+</span> <span title="String(&quot; andThen &quot;)" class="string">&quot; andThen &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#1211997" title="CPSUtils.this.CPSInfo">b</a><span class="delimiter">)</span>
        <span class="delimiter">}</span>
        <a href="../../Option.scala.html#63128" title="(x: (CPSUtils.this.global.Type, CPSUtils.this.global.Type))Some[(CPSUtils.this.global.Type, CPSUtils.this.global.Type)]">Some</a><span class="delimiter">(</span><a href="../../Tuple2.scala.html#62849" title="(_1: CPSUtils.this.global.Type, _2: CPSUtils.this.global.Type)(CPSUtils.this.global.Type, CPSUtils.this.global.Type)" class="delimiter">(</a><a href="#1213124" title="CPSUtils.this.global.Type">u1</a>,<a href="#1213120" title="CPSUtils.this.global.Type">v0</a><span class="delimiter">)</span><span class="delimiter">)</span>
      <span class="keyword">case</span> <span class="delimiter">(</span>Some<a href="../../Tuple2.scala.html#60635" title="CPSUtils.this.CPSInfo" id="3381878" class="delimiter">(</a><a href="../../Option.scala.html#63132" title="(CPSUtils.this.global.Type, CPSUtils.this.global.Type)" id="3381877">_</a><span class="delimiter">)</span>, <a href="../../Tuple2.scala.html#60637" title="CPSUtils.this.CPSInfo" id="3381876">_</a><span class="delimiter">)</span> =&gt; <a href="#3381884" title="(x: CPSUtils.this.CPSInfo)CPSUtils.this.CPSInfo">a</a>
      <span class="keyword">case</span> <span class="delimiter">(</span><a href="../../Tuple2.scala.html#60635" title="CPSUtils.this.CPSInfo" id="3381879">_</a>, Some<a href="../../Tuple2.scala.html#60637" title="CPSUtils.this.CPSInfo" id="3381882" class="delimiter">(</a><a href="../../Option.scala.html#63132" title="(CPSUtils.this.global.Type, CPSUtils.this.global.Type)" id="3381881">_</a><span class="delimiter">)</span><span class="delimiter">)</span> =&gt; <a href="#3381884" title="(x: CPSUtils.this.CPSInfo)CPSUtils.this.CPSInfo">b</a>
      <span class="keyword">case</span> _ =&gt; <a href="#3381884" title="(x: CPSUtils.this.CPSInfo)CPSUtils.this.CPSInfo">None</a>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>
<span class="delimiter">}</span>

        </pre>
    </body>
</html>