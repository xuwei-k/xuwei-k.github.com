<?xml version="1.0" encoding="utf-8"?>
      <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <meta http-equiv="Expires" content="0" />
        <title>scala/tools/nsc/interactive/RefinedBuildManager.scala</title>
        <script type="text/javascript" src="../../../../jquery-all.js"></script>
        <script type="text/javascript" src="../../../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../../../style.css" title="Style"></link>
    </head>
    <body>
        <pre>
/* NSC -- new Scala compiler
 * Copyright 2009-2013 Typesafe/Scala Solutions and LAMP/EPFL
 * @author Iulian Dragos
 * @author Hubert Plocinicak
 */
<span class="keyword">package</span> scala.tools.nsc
<span class="keyword">package</span> interactive

<span class="keyword">import</span> scala.collection._
<span class="keyword">import</span> scala.tools.nsc.reporters.<span class="delimiter">{</span>Reporter, ConsoleReporter<span class="delimiter">}</span>
<span class="keyword">import</span> scala.util.control.<a href="../../../util/control/Breaks.scala.html#52267" title="scala.util.control.Breaks.type">Breaks</a>._
<span class="keyword">import</span> scala.tools.nsc.symtab.Flags

<span class="keyword">import</span> dependencies._
<span class="keyword">import</span> scala.reflect.internal.util.FakePos
<span class="keyword">import</span> util.ClassPath
<span class="keyword">import</span> io.AbstractFile
<span class="keyword">import</span> scala.tools.util.PathResolver

/** A more defined build manager, based on change sets. For each
 *  updated source file, it computes the set of changes to its
 *  definitions, then checks all dependent units to see if the
 *  changes require a compilation. It repeats this process until
 *  a fixpoint is reached.
 */
@deprecated<span class="delimiter">(</span><span class="string">&quot;Use sbt incremental compilation mechanism&quot;</span>, <span class="string">&quot;2.10.0&quot;</span><span class="delimiter">)</span>
<span class="keyword">class</span> <a title="class RefinedBuildManager extends scala.tools.nsc.dependencies.Changes with scala.tools.nsc.interactive.BuildManager" id="35871">RefinedBuildManager</a><a href="#35871" title="scala.tools.nsc.interactive.RefinedBuildManager" class="delimiter">(</a><span class="keyword">val</span> <a title="scala.tools.nsc.Settings" id="634139">settings</a>: <a href="../Settings.scala.html#27643" title="scala.tools.nsc.Settings">Settings</a><span class="delimiter">)</span> <span class="keyword">extends</span> <a href="../dependencies/Changes.scala.html#33359" title="scala.tools.nsc.dependencies.Changes">Changes</a> <span class="keyword">with</span> <a href="BuildManager.scala.html#35727" title="scala.tools.nsc.interactive.BuildManager">BuildManager</a> <span class="delimiter">{</span>

  <span class="keyword">class</span> <a title="class BuilderGlobal extends scala.tools.nsc.Global" id="634106">BuilderGlobal</a><a href="#634106" title="RefinedBuildManager.this.BuilderGlobal" class="delimiter">(</a><a title="scala.tools.nsc.Settings" id="634183">settings</a>: <a href="../Settings.scala.html#27643" title="scala.tools.nsc.Settings">Settings</a>, <a title="scala.tools.nsc.reporters.Reporter" id="634184">reporter</a> : <a href="../reporters/Reporter.scala.html#41226" title="scala.tools.nsc.reporters.Reporter">Reporter</a><span class="delimiter">)</span> <span class="keyword">extends</span> scala.tools.nsc.<a href="../Global.scala.html#27346" title="scala.tools.nsc.Global">Global</a><span class="delimiter">(</span><a href="#634183" title="scala.tools.nsc.Settings">settings</a>, <a href="#634184" title="scala.tools.nsc.reporters.Reporter">reporter</a><span class="delimiter">)</span>  <span class="delimiter">{</span>

    <span class="keyword">def</span> <a title="(settings: scala.tools.nsc.Settings)RefinedBuildManager.this.BuilderGlobal" id="634174" class="keyword">this</a><span class="delimiter">(</span><a title="scala.tools.nsc.Settings" id="634182">settings</a>: <a href="../Settings.scala.html#27643" title="scala.tools.nsc.Settings">Settings</a><span class="delimiter">)</span> =
      <a href="#634106" title="BuilderGlobal.this.type" class="keyword">this</a><span class="delimiter">(</span><a href="#634182" title="scala.tools.nsc.Settings">settings</a>, <a href="../reporters/ConsoleReporter.scala.html#601232" title="(settings: scala.tools.nsc.Settings)scala.tools.nsc.reporters.ConsoleReporter" class="keyword">new</a> <a href="../reporters/ConsoleReporter.scala.html#41214" title="scala.tools.nsc.reporters.ConsoleReporter">ConsoleReporter</a><span class="delimiter">(</span><a href="#634182" title="scala.tools.nsc.Settings">settings</a><span class="delimiter">)</span><span class="delimiter">)</span>

    <span class="keyword">override</span> <span class="keyword">def</span> <a title="()Unit" id="634175">computeInternalPhases</a><span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span>
      <a href="#634106" title="RefinedBuildManager.this.BuilderGlobal" class="keyword">super</a>.<a href="../Global.scala.html#537614" title="()Unit">computeInternalPhases</a>
      <a href="../Global.scala.html#537621" title="=&gt; scala.collection.mutable.HashSet[scala.tools.nsc.SubComponent]">phasesSet</a> <a href="../../../collection/mutable/HashSet.scala.html#125963" title="(elem: scala.tools.nsc.SubComponent)BuilderGlobal.this.phasesSet.type">+=</a> <a href="../Global.scala.html#537600" title="BuilderGlobal.this.dependencyAnalysis.type">dependencyAnalysis</a>
    <span class="delimiter">}</span>
    <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="scala.tools.nsc.util.JavaClassPath" id="634177">_classpath</a> = <span title="RefinedBuildManager.this.NoSourcePathPathResolver" class="keyword">new</span> <a href="#634107" title="RefinedBuildManager.this.NoSourcePathPathResolver">NoSourcePathPathResolver</a><span class="delimiter">(</span><a href="#634183" title="scala.tools.nsc.Settings">settings</a><span class="delimiter">)</span>.<a href="../../util/PathResolver.scala.html#618331" title="=&gt; scala.tools.nsc.util.JavaClassPath">result</a>
    <span class="keyword">override</span> <span class="keyword">def</span> <a title="=&gt; scala.tools.nsc.util.ClassPath[BuilderGlobal.this.platform.BinaryRepr]" id="634178">classPath</a> = <a href="#634176" title="=&gt; scala.tools.nsc.util.JavaClassPath">_classpath</a>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="scala.tools.nsc.util.ClassPath[BuilderGlobal.this.platform.BinaryRepr]" class="delimiter">[</span><a href="../util/ClassPath.scala.html#50227" title="scala.tools.nsc.util.ClassPath[BuilderGlobal.this.platform.BinaryRepr]">ClassPath</a><span class="delimiter">[</span>platform.BinaryRepr<span class="delimiter">]</span><span class="delimiter">]</span>
       // See discussion in JavaPlatForm for why we need a cast here.

    <span class="keyword">def</span> <a title="()BuilderGlobal.this.Run" id="634179">newRun</a><span class="delimiter">(</span><span class="delimiter">)</span> = <span title="BuilderGlobal.this.Run" class="keyword">new</span> <a href="../Global.scala.html#537750" title="BuilderGlobal.this.Run">Run</a><span class="delimiter">(</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">class</span> <a title="class NoSourcePathPathResolver extends scala.tools.util.PathResolver" id="634107">NoSourcePathPathResolver</a><a href="#634107" title="RefinedBuildManager.this.NoSourcePathPathResolver" class="delimiter">(</a><a title="scala.tools.nsc.Settings" id="857839">settings</a>: <a href="../Settings.scala.html#27643" title="scala.tools.nsc.Settings">Settings</a><span class="delimiter">)</span> <span class="keyword">extends</span> <a href="../../util/PathResolver.scala.html#51824" title="scala.tools.util.PathResolver">PathResolver</a><span class="delimiter">(</span><a href="#857839" title="scala.tools.nsc.Settings">settings</a><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span class="keyword">override</span> <span class="keyword">def</span> <a title="=&gt; List[scala.tools.nsc.util.ClassPath[scala.tools.nsc.io.AbstractFile]]" id="857838">containers</a> = <a href="../../util/PathResolver.scala.html#618328" title="NoSourcePathPathResolver.this.Calculated.type">Calculated</a>.<a href="../../util/PathResolver.scala.html#618379" title="=&gt; List[Traversable[scala.tools.nsc.util.ClassPath[scala.tools.nsc.io.AbstractFile]]]">basis</a>.<a href="../../../collection/LinearSeqOptimized.scala.html#86397" title="(n: Int)List[Traversable[scala.tools.nsc.util.ClassPath[scala.tools.nsc.io.AbstractFile]]]">dropRight</a><span class="delimiter">(</span><span title="Int(1)" class="int">1</span><span class="delimiter">)</span>.<a href="../../../collection/generic/GenericTraversableTemplate.scala.html#58488" title="(implicit asTraversable: Traversable[scala.tools.nsc.util.ClassPath[scala.tools.nsc.io.AbstractFile]] =&gt; scala.collection.GenTraversableOnce[scala.tools.nsc.util.ClassPath[scala.tools.nsc.io.AbstractFile]])List[scala.tools.nsc.util.ClassPath[scala.tools.nsc.io.AbstractFile]]">flatten</a>.<a href="../../../collection/SeqLike.scala.html#58839" title="=&gt; List[scala.tools.nsc.util.ClassPath[scala.tools.nsc.io.AbstractFile]]">distinct</a>
  <span class="delimiter">}</span>

  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="(settings: scala.tools.nsc.Settings)RefinedBuildManager.this.BuilderGlobal" id="634108">newCompiler</a><span class="delimiter">(</span><a title="scala.tools.nsc.Settings" id="634166">settings</a>: <a href="../Settings.scala.html#27643" title="scala.tools.nsc.Settings">Settings</a><span class="delimiter">)</span> = <a href="#634174" title="(settings: scala.tools.nsc.Settings)RefinedBuildManager.this.BuilderGlobal" class="keyword">new</a> <a href="#634106" title="RefinedBuildManager.this.BuilderGlobal">BuilderGlobal</a><span class="delimiter">(</span><a href="#634166" title="scala.tools.nsc.Settings">settings</a><span class="delimiter">)</span>

  <span class="keyword">val</span> <a title="RefinedBuildManager.this.BuilderGlobal" id="634109">compiler</a> = <a href="#634108" title="(settings: scala.tools.nsc.Settings)RefinedBuildManager.this.BuilderGlobal">newCompiler</a><span class="delimiter">(</span><a href="#634139" title="=&gt; scala.tools.nsc.Settings">settings</a><span class="delimiter">)</span>
  <span class="keyword">import</span> <a href="#634109" title="=&gt; RefinedBuildManager.this.BuilderGlobal">compiler</a>.<span class="delimiter">{</span> Symbol, Type, beforeErasure <span class="delimiter">}</span>
  <span class="keyword">import</span> <a href="#634109" title="=&gt; RefinedBuildManager.this.BuilderGlobal">compiler</a>.<a href="../Global.scala.html#537600" title="RefinedBuildManager.this.compiler.dependencyAnalysis.type">dependencyAnalysis</a>.Inherited

  <span class="keyword">private</span> case <span class="keyword">class</span> <a title="class SymWithHistory extends AnyRef with Product with Serializable" id="860824">SymWithHistory</a><a href="../../../Product.scala.html#186" title="Product" class="delimiter">(</a><a title="RefinedBuildManager.this.compiler.Symbol" id="860751">sym</a>: <a href="../../../reflect/internal/Symbols.scala.html#407146" title="RefinedBuildManager.this.compiler.Symbol">Symbol</a>, <a title="RefinedBuildManager.this.compiler.Type" id="860752">befErasure</a>: <a href="../../../reflect/internal/Types.scala.html#407270" title="RefinedBuildManager.this.compiler.Type">Type</a><span class="delimiter">)</span>

  /** Managed source files. */
  <span class="keyword">private</span> <span class="keyword">val</span> <a title="scala.collection.mutable.Set[scala.tools.nsc.io.AbstractFile]" id="634116">sources</a>: mutable.<a href="../../../collection/mutable/Set.scala.html#13128" title="scala.collection.mutable.Set[scala.tools.nsc.io.AbstractFile]">Set</a><span class="delimiter">[</span>AbstractFile<span class="delimiter">]</span> = <a href="../../../collection/mutable/HashSet.scala.html#125959" title="()scala.collection.mutable.HashSet[scala.tools.nsc.io.AbstractFile]" class="keyword">new</a> mutable.<a href="../../../collection/mutable/HashSet.scala.html#13053" title="scala.collection.mutable.HashSet[scala.tools.nsc.io.AbstractFile]">HashSet</a><span class="delimiter">[</span>AbstractFile<span class="delimiter">]</span>

  <span class="keyword">private</span> <span class="keyword">val</span> <a title="scala.collection.mutable.Map[scala.tools.nsc.io.AbstractFile,List[RefinedBuildManager.this.SymWithHistory]]" id="634118">definitions</a>: mutable.<a href="../../../collection/mutable/Map.scala.html#12498" title="scala.collection.mutable.Map[scala.tools.nsc.io.AbstractFile,List[RefinedBuildManager.this.SymWithHistory]]">Map</a><span class="delimiter">[</span>AbstractFile, List<span class="delimiter">[</span>SymWithHistory<span class="delimiter">]</span><span class="delimiter">]</span> =
    <a href="#857907" title="scala.collection.mutable.HashMap[scala.tools.nsc.io.AbstractFile,List[RefinedBuildManager.this.SymWithHistory]]" class="keyword">new</a> <a href="../../../collection/mutable/HashMap.scala.html#88242" title="anonymous class $anon extends scala.collection.mutable.HashMap[scala.tools.nsc.io.AbstractFile,List[RefinedBuildManager.this.SymWithHistory]]" id="857907">mutable</a>.<a href="../../../collection/mutable/HashMap.scala.html#12447" title="scala.collection.mutable.HashMap[scala.tools.nsc.io.AbstractFile,List[RefinedBuildManager.this.SymWithHistory]]">HashMap</a><span class="delimiter">[</span>AbstractFile, List<span class="delimiter">[</span>SymWithHistory<span class="delimiter">]</span><span class="delimiter">]</span> <span class="delimiter">{</span>
      <span class="keyword">override</span> <span class="keyword">def</span> <a title="(key: scala.tools.nsc.io.AbstractFile)scala.collection.immutable.Nil.type" id="857909">default</a><span class="delimiter">(</span><a title="scala.tools.nsc.io.AbstractFile" id="858351">key</a>: <a href="../../../reflect/io/AbstractFile.scala.html#23215" title="scala.tools.nsc.io.AbstractFile">AbstractFile</a><span class="delimiter">)</span> = <a href="../../../collection/immutable/List.scala.html#11188" title="scala.collection.immutable.Nil.type">Nil</a>
    <span class="delimiter">}</span>

  /** External references used by source file. */
  <span class="keyword">private</span> <span class="keyword">var</span> <a title="scala.collection.mutable.Map[scala.tools.nsc.io.AbstractFile,scala.collection.immutable.Set[String]]" id="634121">references</a>: mutable.<a href="../../../collection/mutable/Map.scala.html#12498" title="scala.collection.mutable.Map[scala.tools.nsc.io.AbstractFile,scala.collection.immutable.Set[String]]">Map</a><span class="delimiter">[</span>AbstractFile, immutable.Set<span class="delimiter">[</span>String<span class="delimiter">]</span><span class="delimiter">]</span> = _

  /** External references for inherited members */
  <span class="keyword">private</span> <span class="keyword">var</span> <a title="scala.collection.mutable.Map[scala.tools.nsc.io.AbstractFile,scala.collection.immutable.Set[RefinedBuildManager.this.compiler.dependencyAnalysis.Inherited]]" id="634124">inherited</a>: mutable.<a href="../../../collection/mutable/Map.scala.html#12498" title="scala.collection.mutable.Map[scala.tools.nsc.io.AbstractFile,scala.collection.immutable.Set[RefinedBuildManager.this.compiler.dependencyAnalysis.Inherited]]">Map</a><span class="delimiter">[</span>AbstractFile, immutable.Set<span class="delimiter">[</span>Inherited<span class="delimiter">]</span><span class="delimiter">]</span> = _

  /** Reverse of definitions, used for caching */
  <span class="keyword">private</span> <span class="keyword">var</span> <a title="scala.collection.mutable.Map[String,scala.tools.nsc.io.AbstractFile]" id="634127">classes</a>: mutable.<a href="../../../collection/mutable/Map.scala.html#12498" title="scala.collection.mutable.Map[String,scala.tools.nsc.io.AbstractFile]">Map</a><span class="delimiter">[</span>String, AbstractFile<span class="delimiter">]</span> =
    <a href="#858369" title="scala.collection.mutable.HashMap[String,scala.tools.nsc.io.AbstractFile]" class="keyword">new</a> <a href="../../../collection/mutable/HashMap.scala.html#88242" title="anonymous class $anon extends scala.collection.mutable.HashMap[String,scala.tools.nsc.io.AbstractFile]" id="858369">mutable</a>.<a href="../../../collection/mutable/HashMap.scala.html#12447" title="scala.collection.mutable.HashMap[String,scala.tools.nsc.io.AbstractFile]">HashMap</a><span class="delimiter">[</span>String, AbstractFile<span class="delimiter">]</span> <span class="delimiter">{</span>
      <span class="keyword">override</span> <span class="keyword">def</span> <a title="(key: String)Null" id="858371">default</a><span class="delimiter">(</span><a title="String" id="858813">key</a>: <span title="String">String</span><span class="delimiter">)</span> = <span title="Null(null)" class="keyword">null</span>
  <span class="delimiter">}</span>

  /** Add the given source files to the managed build process. */
  <span class="keyword">def</span> <a title="(files: scala.collection.Set[scala.tools.nsc.io.AbstractFile])Unit" id="634129">addSourceFiles</a><span class="delimiter">(</span><a title="scala.collection.Set[scala.tools.nsc.io.AbstractFile]" id="858831">files</a>: <a href="../../../collection/Set.scala.html#4394" title="scala.collection.Set[scala.tools.nsc.io.AbstractFile]">Set</a><span class="delimiter">[</span>AbstractFile<span class="delimiter">]</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    <a href="#634116" title="=&gt; scala.collection.mutable.Set[scala.tools.nsc.io.AbstractFile]">sources</a> <a href="../../../collection/generic/Growable.scala.html#60003" title="(xs: scala.collection.TraversableOnce[scala.tools.nsc.io.AbstractFile])RefinedBuildManager.this.sources.type">++=</a> <a href="#858831" title="scala.collection.Set[scala.tools.nsc.io.AbstractFile]">files</a>
    <a href="#634133" title="(files: scala.collection.Set[scala.tools.nsc.io.AbstractFile])Unit">update</a><span class="delimiter">(</span><a href="#858831" title="scala.collection.Set[scala.tools.nsc.io.AbstractFile]">files</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  /** Remove the given files from the managed build process. */
  <span class="keyword">def</span> <a title="(files: scala.collection.Set[scala.tools.nsc.io.AbstractFile])Unit" id="634130">removeFiles</a><span class="delimiter">(</span><a title="scala.collection.Set[scala.tools.nsc.io.AbstractFile]" id="859499">files</a>: <a href="../../../collection/Set.scala.html#4394" title="scala.collection.Set[scala.tools.nsc.io.AbstractFile]">Set</a><span class="delimiter">[</span>AbstractFile<span class="delimiter">]</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    <a href="#634116" title="=&gt; scala.collection.mutable.Set[scala.tools.nsc.io.AbstractFile]">sources</a> <a href="../../../collection/generic/Shrinkable.scala.html#66942" title="(xs: scala.collection.TraversableOnce[scala.tools.nsc.io.AbstractFile])RefinedBuildManager.this.sources.type">--=</a> <a href="#859499" title="scala.collection.Set[scala.tools.nsc.io.AbstractFile]">files</a>
    <a href="BuildManager.scala.html#634038" title="(sources: scala.collection.Set[scala.tools.nsc.io.AbstractFile])Unit">deleteClassfiles</a><span class="delimiter">(</span><a href="#859499" title="scala.collection.Set[scala.tools.nsc.io.AbstractFile]">files</a><span class="delimiter">)</span>
    <a href="#634133" title="(files: scala.collection.Set[scala.tools.nsc.io.AbstractFile])Unit">update</a><span class="delimiter">(</span><a href="#634131" title="(files: scala.collection.Set[scala.tools.nsc.io.AbstractFile])scala.collection.Set[scala.tools.nsc.io.AbstractFile]">invalidatedByRemove</a><span class="delimiter">(</span><a href="#859499" title="scala.collection.Set[scala.tools.nsc.io.AbstractFile]">files</a><span class="delimiter">)</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  /** Return the set of invalidated files caused by removing the given files.
   */
  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(files: scala.collection.Set[scala.tools.nsc.io.AbstractFile])scala.collection.Set[scala.tools.nsc.io.AbstractFile]" id="634131">invalidatedByRemove</a><span class="delimiter">(</span><a title="scala.collection.Set[scala.tools.nsc.io.AbstractFile]" id="859506">files</a>: <a href="../../../collection/Set.scala.html#4394" title="scala.collection.Set[scala.tools.nsc.io.AbstractFile]">Set</a><span class="delimiter">[</span>AbstractFile<span class="delimiter">]</span><span class="delimiter">)</span>: <a href="../../../collection/Set.scala.html#4394" title="scala.collection.Set[scala.tools.nsc.io.AbstractFile]">Set</a><span class="delimiter">[</span>AbstractFile<span class="delimiter">]</span> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="scala.collection.mutable.HashMap[RefinedBuildManager.this.compiler.Symbol,List[RefinedBuildManager.this.Change]]" id="859508">changes</a> = <a href="../../../collection/mutable/HashMap.scala.html#88242" title="()scala.collection.mutable.HashMap[RefinedBuildManager.this.compiler.Symbol,List[RefinedBuildManager.this.Change]]" class="keyword">new</a> mutable.<a href="../../../collection/mutable/HashMap.scala.html#12447" title="scala.collection.mutable.HashMap[RefinedBuildManager.this.compiler.Symbol,List[RefinedBuildManager.this.Change]]">HashMap</a><span class="delimiter">[</span>Symbol, List<span class="delimiter">[</span>Change<span class="delimiter">]</span><span class="delimiter">]</span>
    <span class="keyword">for</span> <span class="delimiter">(</span><a title="scala.tools.nsc.io.AbstractFile" id="859526">f</a> &lt;- <a href="../../../collection/IterableLike.scala.html#58562" title="(f: scala.tools.nsc.io.AbstractFile =&gt; Unit)Unit">files</a>; SymWithHistory<span class="delimiter">(</span><a href="#860751" title="RefinedBuildManager.this.compiler.Symbol" id="859556">sym</a>, <a href="#860752" title="RefinedBuildManager.this.compiler.Type" id="3331664">_</a><span class="delimiter">)</span> &lt;- <a href="../../../collection/MapLike.scala.html#87535" title="(key: scala.tools.nsc.io.AbstractFile)List[RefinedBuildManager.this.SymWithHistory]">definitions</a><a href="../../../collection/generic/FilterMonadic.scala.html#58171" title="(f: RefinedBuildManager.this.SymWithHistory =&gt; scala.collection.mutable.HashMap[RefinedBuildManager.this.compiler.Symbol,List[RefinedBuildManager.this.Change]])Unit" class="delimiter">(</a><a href="#859526" title="scala.tools.nsc.io.AbstractFile">f</a><span class="delimiter">)</span><span class="delimiter">)</span>
      <a href="#859508" title="scala.collection.mutable.HashMap[RefinedBuildManager.this.compiler.Symbol,List[RefinedBuildManager.this.Change]]">changes</a> <a href="#3331666" title="(x: changes.type)changes.type">+=</a> <a href="../../../Predef.scala.html#7509" title="(x: RefinedBuildManager.this.compiler.Symbol)ArrowAssoc[RefinedBuildManager.this.compiler.Symbol]">sym</a> <a href="../../../Predef.scala.html#62634" title="(y: List[RefinedBuildManager.this.Removed])(RefinedBuildManager.this.compiler.Symbol, List[RefinedBuildManager.this.Removed])">-&gt;</a> <a href="../../../collection/immutable/List.scala.html#62451" title="(xs: RefinedBuildManager.this.Removed*)List[RefinedBuildManager.this.Removed]">List</a><span class="delimiter">(</span><a href="../dependencies/Changes.scala.html#768586" title="(e: RefinedBuildManager.this.Entity)RefinedBuildManager.this.Removed">Removed</a><span class="delimiter">(</span><a href="../dependencies/Changes.scala.html#768790" title="(name: String)RefinedBuildManager.this.Class">Class</a><span class="delimiter">(</span><a href="#859556" title="RefinedBuildManager.this.compiler.Symbol">sym</a>.<a href="../../../reflect/internal/Symbols.scala.html#411334" title="=&gt; String">fullName</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
    <a href="#634135" title="(files: scala.collection.Set[scala.tools.nsc.io.AbstractFile], changesOf: scala.collection.Map[RefinedBuildManager.this.compiler.Symbol,List[RefinedBuildManager.this.Change]], processed: scala.collection.Set[scala.tools.nsc.io.AbstractFile])scala.collection.Set[scala.tools.nsc.io.AbstractFile]">invalidated</a><span class="delimiter">(</span><a href="#859506" title="scala.collection.Set[scala.tools.nsc.io.AbstractFile]">files</a>, <a href="#859508" title="scala.collection.mutable.HashMap[RefinedBuildManager.this.compiler.Symbol,List[RefinedBuildManager.this.Change]]">changes</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="(added: scala.collection.Set[scala.tools.nsc.io.AbstractFile], removed: scala.collection.Set[scala.tools.nsc.io.AbstractFile])Unit" id="634132">update</a><span class="delimiter">(</span><a title="scala.collection.Set[scala.tools.nsc.io.AbstractFile]" id="859492">added</a>: <a href="../../../collection/Set.scala.html#4394" title="scala.collection.Set[scala.tools.nsc.io.AbstractFile]">Set</a><span class="delimiter">[</span>AbstractFile<span class="delimiter">]</span>, <a title="scala.collection.Set[scala.tools.nsc.io.AbstractFile]" id="859493">removed</a>: <a href="../../../collection/Set.scala.html#4394" title="scala.collection.Set[scala.tools.nsc.io.AbstractFile]">Set</a><span class="delimiter">[</span>AbstractFile<span class="delimiter">]</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    <a href="#634116" title="=&gt; scala.collection.mutable.Set[scala.tools.nsc.io.AbstractFile]">sources</a> <a href="../../../collection/generic/Shrinkable.scala.html#66942" title="(xs: scala.collection.TraversableOnce[scala.tools.nsc.io.AbstractFile])RefinedBuildManager.this.sources.type">--=</a> <a href="#859493" title="scala.collection.Set[scala.tools.nsc.io.AbstractFile]">removed</a>
    <a href="BuildManager.scala.html#634038" title="(sources: scala.collection.Set[scala.tools.nsc.io.AbstractFile])Unit">deleteClassfiles</a><span class="delimiter">(</span><a href="#859493" title="scala.collection.Set[scala.tools.nsc.io.AbstractFile]">removed</a><span class="delimiter">)</span>
    <a href="#634133" title="(files: scala.collection.Set[scala.tools.nsc.io.AbstractFile])Unit">update</a><span class="delimiter">(</span><a href="#859492" title="scala.collection.Set[scala.tools.nsc.io.AbstractFile]">added</a> <a href="../../../collection/SetLike.scala.html#66445" title="(elems: scala.collection.GenTraversableOnce[scala.tools.nsc.io.AbstractFile])scala.collection.Set[scala.tools.nsc.io.AbstractFile]">++</a> <a href="#634131" title="(files: scala.collection.Set[scala.tools.nsc.io.AbstractFile])scala.collection.Set[scala.tools.nsc.io.AbstractFile]">invalidatedByRemove</a><span class="delimiter">(</span><a href="#859493" title="scala.collection.Set[scala.tools.nsc.io.AbstractFile]">removed</a><span class="delimiter">)</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  /** The given files have been modified by the user. Recompile
   *  them and all files that depend on them. Only files that
   *  have been previously added as source files are recompiled.
   *  Files that were already compiled are taken out from the result
   *  of the dependency analysis.
   */
  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(files: scala.collection.Set[scala.tools.nsc.io.AbstractFile])Unit" id="634133">update</a><span class="delimiter">(</span><a title="scala.collection.Set[scala.tools.nsc.io.AbstractFile]" id="858834">files</a>: <a href="../../../collection/Set.scala.html#4394" title="scala.collection.Set[scala.tools.nsc.io.AbstractFile]">Set</a><span class="delimiter">[</span>AbstractFile<span class="delimiter">]</span><span class="delimiter">)</span> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="scala.collection.mutable.Map[scala.tools.nsc.io.AbstractFile,scala.collection.immutable.Set[scala.tools.nsc.io.AbstractFile]]" id="858837">coll</a>: mutable.<a href="../../../collection/mutable/Map.scala.html#12498" title="scala.collection.mutable.Map[scala.tools.nsc.io.AbstractFile,scala.collection.immutable.Set[scala.tools.nsc.io.AbstractFile]]">Map</a><span class="delimiter">[</span>AbstractFile, immutable.Set<span class="delimiter">[</span>AbstractFile<span class="delimiter">]</span><span class="delimiter">]</span> =
        mutable.<a href="../../../collection/generic/GenMapFactory.scala.html#60744" title="[A, B](elems: (A, B)*)scala.collection.mutable.HashMap[A,B]">HashMap</a><span title="(elems: (scala.tools.nsc.io.AbstractFile, scala.collection.immutable.Set[scala.tools.nsc.io.AbstractFile])*)scala.collection.mutable.HashMap[scala.tools.nsc.io.AbstractFile,scala.collection.immutable.Set[scala.tools.nsc.io.AbstractFile]]" class="delimiter">[</span><a href="../../../reflect/io/AbstractFile.scala.html#23215" title="scala.tools.nsc.io.AbstractFile">AbstractFile</a>, immutable.<a href="../../../collection/immutable/Set.scala.html#11919" title="scala.collection.immutable.Set[scala.tools.nsc.io.AbstractFile]">Set</a><span class="delimiter">[</span>AbstractFile<span class="delimiter">]</span><span class="delimiter">]</span><span class="delimiter">(</span><span class="delimiter">)</span>
    <a href="#634109" title="=&gt; RefinedBuildManager.this.BuilderGlobal">compiler</a>.<a href="../Global.scala.html#537436" title="=&gt; scala.tools.nsc.reporters.Reporter">reporter</a>.<a href="../reporters/Reporter.scala.html#539689" title="()Unit">reset</a><span class="delimiter">(</span><span class="delimiter">)</span>

    // See if we really have corresponding symbols, not just those
    // which share the name
    <span class="keyword">def</span> <a title="(from: RefinedBuildManager.this.compiler.Symbol, to: RefinedBuildManager.this.compiler.Symbol)Boolean" id="858838">isCorrespondingSym</a><span class="delimiter">(</span><a title="RefinedBuildManager.this.compiler.Symbol" id="858842">from</a>: <a href="../../../reflect/internal/Symbols.scala.html#407146" title="RefinedBuildManager.this.compiler.Symbol">Symbol</a>, <a title="RefinedBuildManager.this.compiler.Symbol" id="858843">to</a>: <a href="../../../reflect/internal/Symbols.scala.html#407146" title="RefinedBuildManager.this.compiler.Symbol">Symbol</a><span class="delimiter">)</span>: <a href="../../../Boolean.scala.html#1425" title="Boolean">Boolean</a> =
      <span class="delimiter">(</span><a href="#858842" title="RefinedBuildManager.this.compiler.Symbol">from</a>.<a href="../../../reflect/internal/Symbols.scala.html#411234" title="(mask: Long)Boolean">hasFlag</a><span class="delimiter">(</span>Flags.<span title="Long(33554432L)">TRAIT</span><span class="delimiter">)</span> <a href="../../../Boolean.scala.html#57823" title="(x: Boolean)Boolean">==</a> <a href="#858843" title="RefinedBuildManager.this.compiler.Symbol">to</a>.<a href="../../../reflect/internal/Symbols.scala.html#411234" title="(mask: Long)Boolean">hasFlag</a><span class="delimiter">(</span>Flags.<span title="Long(33554432L)">TRAIT</span><span class="delimiter">)</span><span class="delimiter">)</span> <a href="../../../Boolean.scala.html#57826" title="(x: Boolean)Boolean">&amp;&amp;</a> // has to run in 2.8, so no hasTraitFlag
      <span class="delimiter">(</span><a href="#858842" title="RefinedBuildManager.this.compiler.Symbol">from</a>.<a href="../../../reflect/internal/Symbols.scala.html#411234" title="(mask: Long)Boolean">hasFlag</a><span class="delimiter">(</span>Flags.<span title="Long(256L)">MODULE</span><span class="delimiter">)</span> <a href="../../../Boolean.scala.html#57823" title="(x: Boolean)Boolean">==</a> <a href="#858843" title="RefinedBuildManager.this.compiler.Symbol">to</a>.<a href="../../../reflect/internal/Symbols.scala.html#411234" title="(mask: Long)Boolean">hasFlag</a><span class="delimiter">(</span>Flags.<span title="Long(256L)">MODULE</span><span class="delimiter">)</span><span class="delimiter">)</span>

    // For testing purposes only, order irrelevant for compilation
    <span class="keyword">def</span> <a title="(set: scala.collection.Set[scala.tools.nsc.io.AbstractFile])String" id="858839">toStringSet</a><span class="delimiter">(</span><a title="scala.collection.Set[scala.tools.nsc.io.AbstractFile]" id="858854">set</a>: <a href="../../../collection/Set.scala.html#4394" title="scala.collection.Set[scala.tools.nsc.io.AbstractFile]">Set</a><span class="delimiter">[</span>AbstractFile<span class="delimiter">]</span><span class="delimiter">)</span>: <span title="String">String</span> =
      <a href="#858854" title="scala.collection.Set[scala.tools.nsc.io.AbstractFile]">set</a>.<a href="../../../collection/TraversableOnce.scala.html#58263" title="=&gt; List[scala.tools.nsc.io.AbstractFile]">toList</a> <a href="../../../collection/SeqLike.scala.html#58869" title="(f: scala.tools.nsc.io.AbstractFile =&gt; String)(implicit ord: scala.math.Ordering[String])List[scala.tools.nsc.io.AbstractFile]">sortBy</a> <span class="delimiter">(</span><a href="#858861" title="scala.tools.nsc.io.AbstractFile">_</a>.<a href="../../../reflect/io/AbstractFile.scala.html#404301" title="=&gt; String">name</a><span class="delimiter">)</span> <a href="../../../collection/TraversableOnce.scala.html#58282" title="(start: String, sep: String, end: String)String">mkString</a><span class="delimiter">(</span><span title="String(&quot;Set(&quot;)" class="string">&quot;Set(&quot;</span>, <span title="String(&quot;, &quot;)" class="string">&quot;, &quot;</span>, <span title="String(&quot;)&quot;)" class="string">&quot;)&quot;</span><span class="delimiter">)</span>

    <span class="keyword">def</span> <a title="(files: scala.collection.Set[scala.tools.nsc.io.AbstractFile])Unit" id="858840">update0</a><span class="delimiter">(</span><a title="scala.collection.Set[scala.tools.nsc.io.AbstractFile]" id="858920">files</a>: <a href="../../../collection/Set.scala.html#4394" title="scala.collection.Set[scala.tools.nsc.io.AbstractFile]">Set</a><span class="delimiter">[</span>AbstractFile<span class="delimiter">]</span><span class="delimiter">)</span>: <a href="../../../Unit.scala.html#1515" title="Unit">Unit</a> = <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="../../../Boolean.scala.html#57822" title="=&gt; Boolean">!</a><a href="#858920" title="scala.collection.Set[scala.tools.nsc.io.AbstractFile]">files</a>.<a href="../../../collection/SetLike.scala.html#66447" title="=&gt; Boolean">isEmpty</a><span class="delimiter">)</span> <span class="delimiter">{</span>
      <a href="BuildManager.scala.html#634038" title="(sources: scala.collection.Set[scala.tools.nsc.io.AbstractFile])Unit">deleteClassfiles</a><span class="delimiter">(</span><a href="#858920" title="scala.collection.Set[scala.tools.nsc.io.AbstractFile]">files</a><span class="delimiter">)</span>
      <span class="keyword">val</span> <a title="RefinedBuildManager.this.compiler.Run" id="858921">run</a> = <a href="#634109" title="=&gt; RefinedBuildManager.this.BuilderGlobal">compiler</a>.<a href="#634179" title="()RefinedBuildManager.this.compiler.Run">newRun</a><span class="delimiter">(</span><span class="delimiter">)</span>
      <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#634139" title="=&gt; scala.tools.nsc.Settings">settings</a>.<a href="../settings/ScalaSettings.scala.html#540134" title="=&gt; RefinedBuildManager.this.settings.BooleanSetting">Ybuildmanagerdebug</a>.<a href="../settings/MutableSettings.scala.html#541066" title="=&gt; Boolean">value</a><span class="delimiter">)</span>
        <a href="#634109" title="=&gt; RefinedBuildManager.this.BuilderGlobal">compiler</a>.<a href="../Global.scala.html#537494" title="(msg: String)Unit">inform</a><span class="delimiter">(</span><span title="String(&quot;compiling &quot;)" class="string">&quot;compiling &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#858839" title="(set: scala.collection.Set[scala.tools.nsc.io.AbstractFile])String">toStringSet</a><span class="delimiter">(</span><a href="#858920" title="scala.collection.Set[scala.tools.nsc.io.AbstractFile]">files</a><span class="delimiter">)</span><span class="delimiter">)</span>
      <a href="BuildManager.scala.html#634034" title="(included: scala.collection.Set[scala.tools.nsc.io.AbstractFile])Unit">buildingFiles</a><span class="delimiter">(</span><a href="#858920" title="scala.collection.Set[scala.tools.nsc.io.AbstractFile]">files</a><span class="delimiter">)</span>

      <a href="#858921" title="RefinedBuildManager.this.compiler.Run">run</a>.<a href="../Global.scala.html#539433" title="(files: List[scala.tools.nsc.io.AbstractFile])Unit">compileFiles</a><span class="delimiter">(</span><a href="#858920" title="scala.collection.Set[scala.tools.nsc.io.AbstractFile]">files</a>.<a href="../../../collection/TraversableOnce.scala.html#58263" title="=&gt; List[scala.tools.nsc.io.AbstractFile]">toList</a><span class="delimiter">)</span>
      <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#634109" title="=&gt; RefinedBuildManager.this.BuilderGlobal">compiler</a>.<a href="../Global.scala.html#537436" title="=&gt; scala.tools.nsc.reporters.Reporter">reporter</a>.<a href="../reporters/Reporter.scala.html#539679" title="=&gt; Boolean">hasErrors</a><span class="delimiter">)</span> <span class="delimiter">{</span>
        <span title="Nothing" class="keyword">return</span>
      <span class="delimiter">}</span>

      // Deterministic behaviour required by partest
      <span class="keyword">val</span> <a title="scala.collection.mutable.HashMap[RefinedBuildManager.this.compiler.Symbol,List[RefinedBuildManager.this.Change]]" id="858922">changesOf</a> = <a href="#858931" title="scala.collection.mutable.HashMap[RefinedBuildManager.this.compiler.Symbol,List[RefinedBuildManager.this.Change]]" class="keyword">new</a> <a href="../../../collection/mutable/HashMap.scala.html#88242" title="anonymous class $anon extends scala.collection.mutable.HashMap[RefinedBuildManager.this.compiler.Symbol,List[RefinedBuildManager.this.Change]]" id="858931">mutable</a>.<a href="../../../collection/mutable/HashMap.scala.html#12447" title="scala.collection.mutable.HashMap[RefinedBuildManager.this.compiler.Symbol,List[RefinedBuildManager.this.Change]]">HashMap</a><span class="delimiter">[</span>Symbol, List<span class="delimiter">[</span>Change<span class="delimiter">]</span><span class="delimiter">]</span> <span class="delimiter">{</span>
          <span class="keyword">override</span> <span class="keyword">def</span> <a title="()String" id="858933">toString</a>: <span title="String">String</span> = <span class="delimiter">{</span>
            <span class="keyword">val</span> <a title="List[String]" id="858945">changesOrdered</a> =
              <a href="../../../collection/TraversableOnce.scala.html#58263" title="=&gt; List[(RefinedBuildManager.this.compiler.Symbol, List[RefinedBuildManager.this.Change])]">toList</a>.<a href="../../../collection/TraversableLike.scala.html#58063" title="(f: ((RefinedBuildManager.this.compiler.Symbol, List[RefinedBuildManager.this.Change])) =&gt; String)(implicit bf: scala.collection.generic.CanBuildFrom[List[(RefinedBuildManager.this.compiler.Symbol, List[RefinedBuildManager.this.Change])],String,List[String]])List[String]">map</a><a href="../../../collection/immutable/List.scala.html#62442" title="scala.collection.generic.CanBuildFrom[scala.collection.immutable.List.Coll,String,List[String]]" class="delimiter">(</a><a title="(RefinedBuildManager.this.compiler.Symbol, List[RefinedBuildManager.this.Change])" id="858965">e</a> =&gt; <span class="delimiter">{</span>
                <a href="#858965" title="(RefinedBuildManager.this.compiler.Symbol, List[RefinedBuildManager.this.Change])">e</a>.<a href="../../../Tuple2.scala.html#60635" title="=&gt; RefinedBuildManager.this.compiler.Symbol">_1</a>.<a href="../../../reflect/internal/Symbols.scala.html#411507" title="()String">toString</a> <span title="(x$1: Any)String">+</span> <span title="String(&quot; -&gt; &quot;)" class="string">&quot; -&gt; &quot;</span> <span title="(x$1: Any)String">+</span>
                <a href="#858965" title="(RefinedBuildManager.this.compiler.Symbol, List[RefinedBuildManager.this.Change])">e</a>.<a href="../../../Tuple2.scala.html#60637" title="=&gt; List[RefinedBuildManager.this.Change]">_2</a>.<a href="../../../collection/SeqLike.scala.html#58869" title="(f: RefinedBuildManager.this.Change =&gt; String)(implicit ord: scala.math.Ordering[String])List[RefinedBuildManager.this.Change]">sortBy</a><a href="../../../math/Ordering.scala.html#82256" title="scala.math.Ordering.String.type" class="delimiter">(</a><a href="#858972" title="RefinedBuildManager.this.Change">_</a>.<span title="()String">toString</span><span class="delimiter">)</span>.<a href="../../../collection/TraversableOnce.scala.html#58282" title="(start: String, sep: String, end: String)String">mkString</a><span class="delimiter">(</span><span title="String(&quot;List(&quot;)" class="string">&quot;List(&quot;</span>, <span title="String(&quot;, &quot;)" class="string">&quot;, &quot;</span>, <span title="String(&quot;)&quot;)" class="string">&quot;)&quot;</span><span class="delimiter">)</span>
              <span class="delimiter">}</span><span class="delimiter">)</span>
            <a href="#858945" title="List[String]">changesOrdered</a>.<a href="../../../collection/SeqLike.scala.html#58872" title="(implicit ord: scala.math.Ordering[String])List[String]">sorted</a>.<a href="../../../collection/TraversableOnce.scala.html#58282" title="(start: String, sep: String, end: String)String">mkString</a><span class="delimiter">(</span><span title="String(&quot;Map(&quot;)" class="string">&quot;Map(&quot;</span>, <span title="String(&quot;, &quot;)" class="string">&quot;, &quot;</span>, <span title="String(&quot;)&quot;)" class="string">&quot;)&quot;</span><span class="delimiter">)</span>
          <span class="delimiter">}</span>
      <span class="delimiter">}</span>
      <span class="keyword">val</span> <a title="scala.collection.mutable.HashSet[scala.tools.nsc.io.AbstractFile]" id="858923">additionalDefs</a>: mutable.<a href="../../../collection/mutable/HashSet.scala.html#13053" title="scala.collection.mutable.HashSet[scala.tools.nsc.io.AbstractFile]">HashSet</a><span class="delimiter">[</span>AbstractFile<span class="delimiter">]</span> = mutable.<a href="../../../collection/mutable/HashSet.scala.html#13054" title="scala.collection.mutable.HashSet.type">HashSet</a>.<a href="../../../collection/mutable/HashSet.scala.html#156202" title="scala.collection.mutable.HashSet[scala.tools.nsc.io.AbstractFile]">empty</a>

      <span class="keyword">val</span> <a title="scala.collection.mutable.Map[tools.nsc.io.AbstractFile,List[RefinedBuildManager.this.compiler.dependencyAnalysis.global.Symbol]]" id="858924">defs</a> = <a href="#634109" title="=&gt; RefinedBuildManager.this.BuilderGlobal">compiler</a>.<a href="../Global.scala.html#537600" title="RefinedBuildManager.this.compiler.dependencyAnalysis.type">dependencyAnalysis</a>.<a href="../dependencies/DependencyAnalysis.scala.html#620090" title="=&gt; scala.collection.mutable.Map[tools.nsc.io.AbstractFile,List[RefinedBuildManager.this.compiler.dependencyAnalysis.global.Symbol]]">definitions</a>
      <span class="keyword">for</span> <span class="delimiter">(</span><a title="scala.tools.nsc.io.AbstractFile" id="859147">src</a> &lt;- <a href="../../../collection/IterableLike.scala.html#58562" title="(f: scala.tools.nsc.io.AbstractFile =&gt; Any)Unit">files</a><span class="delimiter">)</span> <span class="delimiter">{</span>
        <span title="Any" class="keyword">if</span> <span class="delimiter">(</span><a href="../../../collection/MapLike.scala.html#87535" title="(key: scala.tools.nsc.io.AbstractFile)List[RefinedBuildManager.this.SymWithHistory]">definitions</a><span class="delimiter">(</span><a href="#859147" title="scala.tools.nsc.io.AbstractFile">src</a><span class="delimiter">)</span>.<a href="../../../collection/SeqLike.scala.html#58787" title="=&gt; Boolean">isEmpty</a><span class="delimiter">)</span>
          <a href="#858923" title="scala.collection.mutable.HashSet[scala.tools.nsc.io.AbstractFile]">additionalDefs</a> <a href="../../../collection/generic/Growable.scala.html#60003" title="(xs: scala.collection.TraversableOnce[scala.tools.nsc.io.AbstractFile])additionalDefs.type">++=</a> <a href="#634109" title="=&gt; RefinedBuildManager.this.BuilderGlobal">compiler</a>.<a href="../Global.scala.html#537600" title="RefinedBuildManager.this.compiler.dependencyAnalysis.type">dependencyAnalysis</a>.
                             <a href="../dependencies/DependencyAnalysis.scala.html#620086" title="=&gt; RefinedBuildManager.this.compiler.dependencyAnalysis.FileDependencies">dependencies</a>.<a href="../dependencies/Files.scala.html#768955" title="(depth: Int, changed: scala.collection.Set[scala.tools.nsc.io.AbstractFile])scala.collection.Set[scala.tools.nsc.io.AbstractFile]">dependentFiles</a><span class="delimiter">(</span><span title="Int(1)" class="int">1</span>, mutable.<a href="../../../collection/generic/GenericCompanion.scala.html#59933" title="(elems: scala.tools.nsc.io.AbstractFile*)scala.collection.mutable.Set[scala.tools.nsc.io.AbstractFile]">Set</a><span class="delimiter">(</span><a href="#859147" title="scala.tools.nsc.io.AbstractFile">src</a><span class="delimiter">)</span><span class="delimiter">)</span>
        <span class="keyword">else</span> <span class="delimiter">{</span>
          <span class="keyword">val</span> <a title="List[RefinedBuildManager.this.compiler.dependencyAnalysis.global.Symbol]" id="859168">syms</a> = <a href="../../../collection/MapLike.scala.html#87535" title="(key: tools.nsc.io.AbstractFile)List[RefinedBuildManager.this.compiler.dependencyAnalysis.global.Symbol]">defs</a><span class="delimiter">(</span><a href="#859147" title="scala.tools.nsc.io.AbstractFile">src</a><span class="delimiter">)</span>
          <span class="keyword">for</span> <span class="delimiter">(</span><a title="RefinedBuildManager.this.compiler.dependencyAnalysis.global.Symbol" id="859205">sym</a> &lt;- <a href="../../../collection/immutable/List.scala.html#62719" title="(f: RefinedBuildManager.this.compiler.dependencyAnalysis.global.Symbol =&gt; Unit)Unit">syms</a><span class="delimiter">)</span> <span class="delimiter">{</span>
            <a href="../../../collection/MapLike.scala.html#87535" title="(key: scala.tools.nsc.io.AbstractFile)List[RefinedBuildManager.this.SymWithHistory]">definitions</a><span class="delimiter">(</span><a href="#859147" title="scala.tools.nsc.io.AbstractFile">src</a><span class="delimiter">)</span>.<a href="../../../collection/LinearSeqOptimized.scala.html#86381" title="(p: RefinedBuildManager.this.SymWithHistory =&gt; Boolean)Option[RefinedBuildManager.this.SymWithHistory]">find</a><span title="Unit" class="delimiter">(</span>
               <a title="RefinedBuildManager.this.SymWithHistory" id="859229">s</a> =&gt; <span class="delimiter">(</span><a href="#859229" title="RefinedBuildManager.this.SymWithHistory">s</a>.<a href="#860751" title="=&gt; RefinedBuildManager.this.compiler.Symbol">sym</a>.<a href="../../../reflect/internal/Symbols.scala.html#411334" title="=&gt; String">fullName</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="#859205" title="RefinedBuildManager.this.compiler.dependencyAnalysis.global.Symbol">sym</a>.<a href="../../../reflect/internal/Symbols.scala.html#411334" title="=&gt; String">fullName</a><span class="delimiter">)</span> <a href="../../../Boolean.scala.html#57826" title="(x: Boolean)Boolean">&amp;&amp;</a>
                    <a href="#858838" title="(from: RefinedBuildManager.this.compiler.Symbol, to: RefinedBuildManager.this.compiler.Symbol)Boolean">isCorrespondingSym</a><span class="delimiter">(</span><a href="#859229" title="RefinedBuildManager.this.SymWithHistory">s</a>.<a href="#860751" title="=&gt; RefinedBuildManager.this.compiler.Symbol">sym</a>, <a href="#859205" title="RefinedBuildManager.this.compiler.dependencyAnalysis.global.Symbol">sym</a><span class="delimiter">)</span><span class="delimiter">)</span> <span class="keyword">match</span> <span class="delimiter">{</span>
              <span class="keyword">case</span> Some<a href="#3331670" title="Unit" id="3331672" class="delimiter">(</a>SymWithHistory<a href="../../../Option.scala.html#63132" title="RefinedBuildManager.this.SymWithHistory" id="3331671" class="delimiter">(</a><a href="#860751" title="RefinedBuildManager.this.compiler.Symbol" id="859264">oldSym</a>, <a href="#860752" title="RefinedBuildManager.this.compiler.Type" id="859265">info</a><span class="delimiter">)</span><span class="delimiter">)</span> =&gt;
                <span class="keyword">val</span> <a title="List[RefinedBuildManager.this.Change]" id="859266">changes</a> = <a href="../dependencies/Changes.scala.html#634097" title="(from: RefinedBuildManager.this.compiler.Type, toSym: RefinedBuildManager.this.compiler.Symbol)List[RefinedBuildManager.this.Change]">changeSet</a><span class="delimiter">(</span><a href="#859264" title="RefinedBuildManager.this.compiler.Symbol">oldSym</a>.<a href="../../../reflect/internal/Symbols.scala.html#411367" title="=&gt; RefinedBuildManager.this.compiler.Type">info</a>, <a href="#859205" title="RefinedBuildManager.this.compiler.dependencyAnalysis.global.Symbol">sym</a><span class="delimiter">)</span>
                <span class="keyword">val</span> <a title="List[RefinedBuildManager.this.Change]" id="859267">changesErasure</a> = <a href="../Global.scala.html#537708" title="(op: =&gt; List[RefinedBuildManager.this.Change])List[RefinedBuildManager.this.Change]">beforeErasure</a><span class="delimiter">(</span><a href="../dependencies/Changes.scala.html#634097" title="(from: RefinedBuildManager.this.compiler.Type, toSym: RefinedBuildManager.this.compiler.Symbol)List[RefinedBuildManager.this.Change]">changeSet</a><span class="delimiter">(</span><a href="#859265" title="RefinedBuildManager.this.compiler.Type">info</a>, <a href="#859205" title="RefinedBuildManager.this.compiler.dependencyAnalysis.global.Symbol">sym</a><span class="delimiter">)</span><span class="delimiter">)</span>

                <a href="../../../collection/mutable/HashMap.scala.html#88248" title="(key: RefinedBuildManager.this.compiler.Symbol, value: List[RefinedBuildManager.this.Change])Unit">changesOf</a><span class="delimiter">(</span><a href="#859264" title="RefinedBuildManager.this.compiler.Symbol">oldSym</a><span class="delimiter">)</span> = <span class="delimiter">(</span><a href="#859266" title="List[RefinedBuildManager.this.Change]">changes</a> <a href="../../../collection/immutable/List.scala.html#62697" title="(that: scala.collection.GenTraversableOnce[RefinedBuildManager.this.Change])(implicit bf: scala.collection.generic.CanBuildFrom[List[RefinedBuildManager.this.Change],RefinedBuildManager.this.Change,List[RefinedBuildManager.this.Change]])List[RefinedBuildManager.this.Change]">++</a> <a href="#859267" title="List[RefinedBuildManager.this.Change]">changesErasure</a><span class="delimiter">)</span>.<a href="../../../collection/SeqLike.scala.html#58839" title="=&gt; List[RefinedBuildManager.this.Change]">distinct</a>
              <span class="keyword">case</span> _ =&gt;
                // a new top level definition
                <a href="../../../collection/mutable/HashMap.scala.html#88248" title="(key: RefinedBuildManager.this.compiler.Symbol, value: List[RefinedBuildManager.this.Change])Unit">changesOf</a><span class="delimiter">(</span><a href="#859205" title="RefinedBuildManager.this.compiler.dependencyAnalysis.global.Symbol">sym</a><span class="delimiter">)</span> = <a href="#859205" title="RefinedBuildManager.this.compiler.dependencyAnalysis.global.Symbol">sym</a>.<a href="../../../reflect/internal/Symbols.scala.html#411441" title="=&gt; List[RefinedBuildManager.this.compiler.dependencyAnalysis.global.Symbol]">parentSymbols</a> <a href="../../../collection/TraversableLike.scala.html#58073" title="(p: RefinedBuildManager.this.compiler.dependencyAnalysis.global.Symbol =&gt; Boolean)List[RefinedBuildManager.this.compiler.dependencyAnalysis.global.Symbol]">filter</a> <span class="delimiter">(</span><a href="#859339" title="RefinedBuildManager.this.compiler.dependencyAnalysis.global.Symbol">_</a>.<a href="../../../reflect/internal/HasFlags.scala.html#409869" title="=&gt; Boolean">isSealed</a><span class="delimiter">)</span> <a href="../../../collection/TraversableLike.scala.html#58063" title="(f: RefinedBuildManager.this.compiler.dependencyAnalysis.global.Symbol =&gt; RefinedBuildManager.this.Change)(implicit bf: scala.collection.generic.CanBuildFrom[List[RefinedBuildManager.this.compiler.dependencyAnalysis.global.Symbol],RefinedBuildManager.this.Change,List[RefinedBuildManager.this.Change]])List[RefinedBuildManager.this.Change]">map</a> <span class="delimiter">(</span><a title="RefinedBuildManager.this.compiler.dependencyAnalysis.global.Symbol" id="859359">p</a> =&gt;
                    <a href="../dependencies/Changes.scala.html#634099" title="(sym: RefinedBuildManager.this.compiler.Symbol, msg: String)RefinedBuildManager.this.Change">changeChangeSet</a><span class="delimiter">(</span><a href="#859359" title="RefinedBuildManager.this.compiler.dependencyAnalysis.global.Symbol">p</a>, <a href="../../../Predef.scala.html#7605" title="implicit scala.Predef.any2stringadd : (x: Any)scala.runtime.StringAdd">sym</a><a href="../../../runtime/StringAdd.scala.html#60046" title="(other: String)String">+</a><span title="String(&quot; extends a sealed &quot;)" class="string">&quot; extends a sealed &quot;</span><span title="(x$1: Any)String">+</span><a href="#859359" title="RefinedBuildManager.this.compiler.dependencyAnalysis.global.Symbol">p</a><span class="delimiter">)</span><span class="delimiter">)</span>
            <span class="delimiter">}</span>
          <span class="delimiter">}</span>
          // Create a change for the top level classes that were removed
          <span class="keyword">val</span> <a title="List[RefinedBuildManager.this.SymWithHistory]" id="859169">removed</a> = <a href="../../../collection/MapLike.scala.html#87535" title="(key: scala.tools.nsc.io.AbstractFile)List[RefinedBuildManager.this.SymWithHistory]">definitions</a><span class="delimiter">(</span><a href="#859147" title="scala.tools.nsc.io.AbstractFile">src</a><span class="delimiter">)</span> <a href="../../../collection/TraversableLike.scala.html#58074" title="(p: RefinedBuildManager.this.SymWithHistory =&gt; Boolean)List[RefinedBuildManager.this.SymWithHistory]">filterNot</a> <span class="delimiter">(</span><span class="delimiter">(</span>s:<a href="#860824" title="RefinedBuildManager.this.SymWithHistory">SymWithHistory</a><span class="delimiter">)</span> =&gt;
            <a href="#859168" title="List[RefinedBuildManager.this.compiler.dependencyAnalysis.global.Symbol]">syms</a>.<a href="../../../collection/LinearSeqOptimized.scala.html#86381" title="(p: RefinedBuildManager.this.compiler.dependencyAnalysis.global.Symbol =&gt; Boolean)Option[RefinedBuildManager.this.compiler.dependencyAnalysis.global.Symbol]">find</a><span class="delimiter">(</span><a href="#859420" title="RefinedBuildManager.this.compiler.dependencyAnalysis.global.Symbol">_</a>.<a href="../../../reflect/internal/Symbols.scala.html#411334" title="=&gt; String">fullName</a> <span title="(x$1: AnyRef)Boolean">==</span> <span class="delimiter">(</span><a href="#859413" title="RefinedBuildManager.this.SymWithHistory">s</a>.<a href="#860751" title="=&gt; RefinedBuildManager.this.compiler.Symbol">sym</a>.<a href="../../../reflect/internal/Symbols.scala.html#411334" title="=&gt; String">fullName</a><span class="delimiter">)</span><span class="delimiter">)</span> <span title="(x$1: AnyRef)Boolean">!=</span> <a href="../../../Option.scala.html#1585" title="None.type">None</a><span class="delimiter">)</span>
          <span class="keyword">for</span> <span class="delimiter">(</span><a title="RefinedBuildManager.this.SymWithHistory" id="859455">s</a> &lt;- <a href="../../../collection/immutable/List.scala.html#62719" title="(f: RefinedBuildManager.this.SymWithHistory =&gt; Unit)Unit">removed</a><span class="delimiter">)</span> <span class="delimiter">{</span>
            <a href="../../../collection/mutable/HashMap.scala.html#88248" title="(key: RefinedBuildManager.this.compiler.Symbol, value: List[RefinedBuildManager.this.Change])Unit">changesOf</a><span class="delimiter">(</span><a href="#859455" title="RefinedBuildManager.this.SymWithHistory">s</a>.<a href="#860751" title="=&gt; RefinedBuildManager.this.compiler.Symbol">sym</a><span class="delimiter">)</span> = <a href="../../../collection/immutable/List.scala.html#62451" title="(xs: RefinedBuildManager.this.Change*)List[RefinedBuildManager.this.Change]">List</a><span class="delimiter">(</span><a href="../dependencies/Changes.scala.html#634098" title="(sym: RefinedBuildManager.this.compiler.Symbol)RefinedBuildManager.this.Change">removeChangeSet</a><span class="delimiter">(</span><a href="#859455" title="RefinedBuildManager.this.SymWithHistory">s</a>.<a href="#860751" title="=&gt; RefinedBuildManager.this.compiler.Symbol">sym</a><span class="delimiter">)</span><span class="delimiter">)</span>
          <span class="delimiter">}</span>
        <span class="delimiter">}</span>
      <span class="delimiter">}</span>
      <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#634139" title="=&gt; scala.tools.nsc.Settings">settings</a>.<a href="../settings/ScalaSettings.scala.html#540134" title="=&gt; RefinedBuildManager.this.settings.BooleanSetting">Ybuildmanagerdebug</a>.<a href="../settings/MutableSettings.scala.html#541066" title="=&gt; Boolean">value</a><span class="delimiter">)</span>
        <a href="#634109" title="=&gt; RefinedBuildManager.this.BuilderGlobal">compiler</a>.<a href="../Global.scala.html#537494" title="(msg: String)Unit">inform</a><span class="delimiter">(</span><span title="String(&quot;Changes: &quot;)" class="string">&quot;Changes: &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#858922" title="scala.collection.mutable.HashMap[RefinedBuildManager.this.compiler.Symbol,List[RefinedBuildManager.this.Change]]">changesOf</a><span class="delimiter">)</span>
      <a href="#634136" title="(files: scala.collection.Set[scala.tools.nsc.io.AbstractFile])Unit">updateDefinitions</a><span class="delimiter">(</span><a href="#858920" title="scala.collection.Set[scala.tools.nsc.io.AbstractFile]">files</a><span class="delimiter">)</span>
      <span class="keyword">val</span> <a title="scala.collection.Set[scala.tools.nsc.io.AbstractFile]" id="858925">invalid</a> = <a href="#634135" title="(files: scala.collection.Set[scala.tools.nsc.io.AbstractFile], changesOf: scala.collection.Map[RefinedBuildManager.this.compiler.Symbol,List[RefinedBuildManager.this.Change]], processed: scala.collection.Set[scala.tools.nsc.io.AbstractFile])scala.collection.Set[scala.tools.nsc.io.AbstractFile]">invalidated</a><span class="delimiter">(</span><a href="#858920" title="scala.collection.Set[scala.tools.nsc.io.AbstractFile]">files</a>, <a href="#858922" title="scala.collection.mutable.HashMap[RefinedBuildManager.this.compiler.Symbol,List[RefinedBuildManager.this.Change]]">changesOf</a>, <a href="#858923" title="scala.collection.mutable.HashSet[scala.tools.nsc.io.AbstractFile]">additionalDefs</a><span class="delimiter">)</span>
      <a href="#858840" title="(files: scala.collection.Set[scala.tools.nsc.io.AbstractFile])Unit">update0</a><span class="delimiter">(</span><a href="#634134" title="(files: scala.collection.Set[scala.tools.nsc.io.AbstractFile], initial: scala.collection.Set[scala.tools.nsc.io.AbstractFile], collect: scala.collection.mutable.Map[scala.tools.nsc.io.AbstractFile,scala.collection.immutable.Set[scala.tools.nsc.io.AbstractFile]])scala.collection.Set[scala.tools.nsc.io.AbstractFile]">checkCycles</a><span class="delimiter">(</span><a href="#858925" title="scala.collection.Set[scala.tools.nsc.io.AbstractFile]">invalid</a>, <a href="#858920" title="scala.collection.Set[scala.tools.nsc.io.AbstractFile]">files</a>, <a href="#858837" title="scala.collection.mutable.Map[scala.tools.nsc.io.AbstractFile,scala.collection.immutable.Set[scala.tools.nsc.io.AbstractFile]]">coll</a><span class="delimiter">)</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>

    <a href="#858840" title="(files: scala.collection.Set[scala.tools.nsc.io.AbstractFile])Unit">update0</a><span class="delimiter">(</span><a href="#858834" title="scala.collection.Set[scala.tools.nsc.io.AbstractFile]">files</a><span class="delimiter">)</span>
    // remove the current run in order to save some memory
    <a href="#634109" title="=&gt; RefinedBuildManager.this.BuilderGlobal">compiler</a>.<a href="../Global.scala.html#537663" title="()Unit">dropRun</a><span class="delimiter">(</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  // Attempt to break the cycling reference deps as soon as possible and reduce
  // the number of compilations to minimum without having too coarse grained rules
  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(files: scala.collection.Set[scala.tools.nsc.io.AbstractFile], initial: scala.collection.Set[scala.tools.nsc.io.AbstractFile], collect: scala.collection.mutable.Map[scala.tools.nsc.io.AbstractFile,scala.collection.immutable.Set[scala.tools.nsc.io.AbstractFile]])scala.collection.Set[scala.tools.nsc.io.AbstractFile]" id="634134">checkCycles</a><span class="delimiter">(</span><a title="scala.collection.Set[scala.tools.nsc.io.AbstractFile]" id="859487">files</a>: <a href="../../../collection/Set.scala.html#4394" title="scala.collection.Set[scala.tools.nsc.io.AbstractFile]">Set</a><span class="delimiter">[</span>AbstractFile<span class="delimiter">]</span>, <a title="scala.collection.Set[scala.tools.nsc.io.AbstractFile]" id="859488">initial</a>: <a href="../../../collection/Set.scala.html#4394" title="scala.collection.Set[scala.tools.nsc.io.AbstractFile]">Set</a><span class="delimiter">[</span>AbstractFile<span class="delimiter">]</span>,
                          <a title="scala.collection.mutable.Map[scala.tools.nsc.io.AbstractFile,scala.collection.immutable.Set[scala.tools.nsc.io.AbstractFile]]" id="859489">collect</a>: mutable.<a href="../../../collection/mutable/Map.scala.html#12498" title="scala.collection.mutable.Map[scala.tools.nsc.io.AbstractFile,scala.collection.immutable.Set[scala.tools.nsc.io.AbstractFile]]">Map</a><span class="delimiter">[</span>AbstractFile, immutable.Set<span class="delimiter">[</span>AbstractFile<span class="delimiter">]</span><span class="delimiter">]</span><span class="delimiter">)</span>:
    <a href="../../../collection/Set.scala.html#4394" title="scala.collection.Set[scala.tools.nsc.io.AbstractFile]">Set</a><span class="delimiter">[</span>AbstractFile<span class="delimiter">]</span> = <span class="delimiter">{</span>
      <span class="keyword">def</span> <a title="(set: scala.collection.Set[scala.tools.nsc.io.AbstractFile], rest: scala.collection.immutable.Set[scala.tools.nsc.io.AbstractFile])scala.collection.immutable.Set[scala.tools.nsc.io.AbstractFile]" id="859647">followChain</a><span class="delimiter">(</span><a title="scala.collection.Set[scala.tools.nsc.io.AbstractFile]" id="859649">set</a>: <a href="../../../collection/Set.scala.html#4394" title="scala.collection.Set[scala.tools.nsc.io.AbstractFile]">Set</a><span class="delimiter">[</span>AbstractFile<span class="delimiter">]</span>, <a title="scala.collection.immutable.Set[scala.tools.nsc.io.AbstractFile]" id="859650">rest</a>: immutable.<a href="../../../collection/immutable/Set.scala.html#11919" title="scala.collection.immutable.Set[scala.tools.nsc.io.AbstractFile]">Set</a><span class="delimiter">[</span>AbstractFile<span class="delimiter">]</span><span class="delimiter">)</span>:
        immutable.<a href="../../../collection/immutable/Set.scala.html#11919" title="scala.collection.immutable.Set[scala.tools.nsc.io.AbstractFile]">Set</a><span class="delimiter">[</span>AbstractFile<span class="delimiter">]</span> = <span class="delimiter">{</span>
        <span class="keyword">val</span> <a title="scala.collection.Set[scala.tools.nsc.io.AbstractFile]" id="859651">deps</a>:<a href="../../../collection/Set.scala.html#4394" title="scala.collection.Set[scala.tools.nsc.io.AbstractFile]">Set</a><span class="delimiter">[</span>AbstractFile<span class="delimiter">]</span> = <a href="#859649" title="scala.collection.Set[scala.tools.nsc.io.AbstractFile]">set</a>.<a href="../../../collection/TraversableLike.scala.html#58068" title="(f: scala.tools.nsc.io.AbstractFile =&gt; scala.collection.GenTraversableOnce[scala.tools.nsc.io.AbstractFile])(implicit bf: scala.collection.generic.CanBuildFrom[scala.collection.Set[scala.tools.nsc.io.AbstractFile],scala.tools.nsc.io.AbstractFile,scala.collection.Set[scala.tools.nsc.io.AbstractFile]])scala.collection.Set[scala.tools.nsc.io.AbstractFile]">flatMap</a><a href="../../../collection/Set.scala.html#66624" title="scala.collection.generic.CanBuildFrom[scala.collection.Set.Coll,scala.tools.nsc.io.AbstractFile,scala.collection.Set[scala.tools.nsc.io.AbstractFile]]" class="delimiter">(</a>
              <a title="scala.tools.nsc.io.AbstractFile" id="859669">s</a> =&gt; <a href="#859489" title="scala.collection.mutable.Map[scala.tools.nsc.io.AbstractFile,scala.collection.immutable.Set[scala.tools.nsc.io.AbstractFile]]">collect</a>.<a href="../../../collection/MapLike.scala.html#87525" title="(key: scala.tools.nsc.io.AbstractFile)Option[scala.collection.immutable.Set[scala.tools.nsc.io.AbstractFile]]">get</a><span title="scala.collection.Set[scala.tools.nsc.io.AbstractFile]" class="delimiter">(</span><a href="#859669" title="scala.tools.nsc.io.AbstractFile">s</a><span class="delimiter">)</span> <span class="keyword">match</span> <span class="delimiter">{</span>
                     <span class="keyword">case</span> Some<a href="#3331679" title="scala.collection.Set[scala.tools.nsc.io.AbstractFile]" id="3331680" class="delimiter">(</a><a href="../../../Option.scala.html#63132" title="scala.collection.immutable.Set[scala.tools.nsc.io.AbstractFile]" id="859673">x</a><span class="delimiter">)</span> =&gt; <a href="#3331682" title="(x: scala.collection.Set[scala.tools.nsc.io.AbstractFile])scala.collection.Set[scala.tools.nsc.io.AbstractFile]">x</a>
                     <span class="keyword">case</span> _ =&gt; <a href="../../../collection/generic/GenericCompanion.scala.html#59933" title="[A](elems: A*)scala.collection.Set[A]">Set</a><span title="(elems: scala.tools.nsc.io.AbstractFile*)scala.collection.Set[scala.tools.nsc.io.AbstractFile]" class="delimiter">[</span><a href="../../../reflect/io/AbstractFile.scala.html#23215" title="scala.tools.nsc.io.AbstractFile">AbstractFile</a><span class="delimiter">]</span><a href="#3331682" title="(x: scala.collection.Set[scala.tools.nsc.io.AbstractFile])scala.collection.Set[scala.tools.nsc.io.AbstractFile]" class="delimiter">(</a><span class="delimiter">)</span>
              <span class="delimiter">}</span><span class="delimiter">)</span>
          <span class="keyword">val</span> <a title="scala.collection.Set[scala.tools.nsc.io.AbstractFile]" id="859652">newDeps</a> = <a href="#859651" title="scala.collection.Set[scala.tools.nsc.io.AbstractFile]">deps</a> <a href="../../../collection/generic/Subtractable.scala.html#66460" title="(xs: scala.collection.GenTraversableOnce[scala.tools.nsc.io.AbstractFile])scala.collection.Set[scala.tools.nsc.io.AbstractFile]">--</a> <a href="#859650" title="scala.collection.immutable.Set[scala.tools.nsc.io.AbstractFile]">rest</a>
          <span title="scala.collection.immutable.Set[scala.tools.nsc.io.AbstractFile]" class="keyword">if</span> <span class="delimiter">(</span><a href="#859652" title="scala.collection.Set[scala.tools.nsc.io.AbstractFile]">newDeps</a>.<a href="../../../collection/SetLike.scala.html#66447" title="=&gt; Boolean">isEmpty</a><span class="delimiter">)</span> <a href="#859650" title="scala.collection.immutable.Set[scala.tools.nsc.io.AbstractFile]">rest</a> <span class="keyword">else</span> <a href="#859647" title="(set: scala.collection.Set[scala.tools.nsc.io.AbstractFile], rest: scala.collection.immutable.Set[scala.tools.nsc.io.AbstractFile])scala.collection.immutable.Set[scala.tools.nsc.io.AbstractFile]">followChain</a><span class="delimiter">(</span><a href="#859652" title="scala.collection.Set[scala.tools.nsc.io.AbstractFile]">newDeps</a>, <a href="#859650" title="scala.collection.immutable.Set[scala.tools.nsc.io.AbstractFile]">rest</a> <a href="../../../collection/SetLike.scala.html#66445" title="(elems: scala.collection.GenTraversableOnce[scala.tools.nsc.io.AbstractFile])scala.collection.immutable.Set[scala.tools.nsc.io.AbstractFile]">++</a> <a href="#859652" title="scala.collection.Set[scala.tools.nsc.io.AbstractFile]">newDeps</a><span class="delimiter">)</span>
      <span class="delimiter">}</span>
      <span class="keyword">var</span> <a title="scala.collection.Set[scala.tools.nsc.io.AbstractFile]" id="859648">res</a>:<a href="../../../collection/Set.scala.html#4394" title="scala.collection.Set[scala.tools.nsc.io.AbstractFile]">Set</a><span class="delimiter">[</span>AbstractFile<span class="delimiter">]</span> = mutable.<a href="../../../collection/generic/GenericCompanion.scala.html#59933" title="(elems: scala.tools.nsc.io.AbstractFile*)scala.collection.mutable.Set[scala.tools.nsc.io.AbstractFile]">Set</a><span class="delimiter">(</span><span class="delimiter">)</span>
      <a href="#859487" title="scala.collection.Set[scala.tools.nsc.io.AbstractFile]">files</a>.<a href="../../../collection/IterableLike.scala.html#58562" title="(f: scala.tools.nsc.io.AbstractFile =&gt; Unit)Unit">foreach</a><span class="delimiter">(</span> <a title="scala.tools.nsc.io.AbstractFile" id="859762">f</a> =&gt;
        <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#859489" title="scala.collection.mutable.Map[scala.tools.nsc.io.AbstractFile,scala.collection.immutable.Set[scala.tools.nsc.io.AbstractFile]]">collect</a> <a href="../../../collection/MapLike.scala.html#87536" title="(key: scala.tools.nsc.io.AbstractFile)Boolean">contains</a> <a href="#859762" title="scala.tools.nsc.io.AbstractFile">f</a><span class="delimiter">)</span> <span class="delimiter">{</span>
          <span class="keyword">val</span> <a title="scala.collection.immutable.Set[scala.tools.nsc.io.AbstractFile]" id="859765">chain</a> = <a href="#859647" title="(set: scala.collection.Set[scala.tools.nsc.io.AbstractFile], rest: scala.collection.immutable.Set[scala.tools.nsc.io.AbstractFile])scala.collection.immutable.Set[scala.tools.nsc.io.AbstractFile]">followChain</a><span class="delimiter">(</span><a href="../../../collection/generic/GenericCompanion.scala.html#59933" title="(elems: scala.tools.nsc.io.AbstractFile*)scala.collection.Set[scala.tools.nsc.io.AbstractFile]">Set</a><span class="delimiter">(</span><a href="#859762" title="scala.tools.nsc.io.AbstractFile">f</a><span class="delimiter">)</span>, immutable.<a href="../../../collection/generic/GenericCompanion.scala.html#59933" title="(elems: scala.tools.nsc.io.AbstractFile*)scala.collection.immutable.Set[scala.tools.nsc.io.AbstractFile]">Set</a><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span> <a href="../../../collection/SetLike.scala.html#66445" title="(elems: scala.collection.GenTraversableOnce[scala.tools.nsc.io.AbstractFile])scala.collection.immutable.Set[scala.tools.nsc.io.AbstractFile]">++</a> <a href="#859487" title="scala.collection.Set[scala.tools.nsc.io.AbstractFile]">files</a>
          <a href="#859765" title="scala.collection.immutable.Set[scala.tools.nsc.io.AbstractFile]">chain</a>.<a href="../../../collection/IterableLike.scala.html#58562" title="(f: scala.tools.nsc.io.AbstractFile =&gt; scala.collection.mutable.Map[scala.tools.nsc.io.AbstractFile,scala.collection.immutable.Set[scala.tools.nsc.io.AbstractFile]])Unit">foreach</a><span class="delimiter">(</span><span class="delimiter">(</span>fc: <a href="../../../reflect/io/AbstractFile.scala.html#23215" title="scala.tools.nsc.io.AbstractFile">AbstractFile</a><span class="delimiter">)</span> =&gt; <a href="#859489" title="scala.collection.mutable.Map[scala.tools.nsc.io.AbstractFile,scala.collection.immutable.Set[scala.tools.nsc.io.AbstractFile]]">collect</a> <a href="../../../collection/mutable/MapLike.scala.html#87612" title="(kv: (scala.tools.nsc.io.AbstractFile, scala.collection.immutable.Set[scala.tools.nsc.io.AbstractFile]))collect.type">+=</a> <a href="../../../Predef.scala.html#7509" title="(x: scala.tools.nsc.io.AbstractFile)ArrowAssoc[scala.tools.nsc.io.AbstractFile]">fc</a> <a href="../../../Predef.scala.html#62634" title="(y: scala.collection.immutable.Set[scala.tools.nsc.io.AbstractFile])(scala.tools.nsc.io.AbstractFile, scala.collection.immutable.Set[scala.tools.nsc.io.AbstractFile])">-&gt;</a> <a href="#859765" title="scala.collection.immutable.Set[scala.tools.nsc.io.AbstractFile]">chain</a><span class="delimiter">)</span>
          <a href="#859648" title="scala.collection.Set[scala.tools.nsc.io.AbstractFile]">res</a> <a href="../../../collection/SetLike.scala.html#66445" title="(elems: scala.collection.GenTraversableOnce[scala.tools.nsc.io.AbstractFile])scala.collection.Set[scala.tools.nsc.io.AbstractFile]">++=</a> <a href="#859765" title="scala.collection.immutable.Set[scala.tools.nsc.io.AbstractFile]">chain</a>
        <span class="delimiter">}</span> <span class="keyword">else</span>
          <a href="#859648" title="scala.collection.Set[scala.tools.nsc.io.AbstractFile]">res</a> <a href="../../../collection/SetLike.scala.html#66443" title="(elem: scala.tools.nsc.io.AbstractFile)scala.collection.Set[scala.tools.nsc.io.AbstractFile]">+=</a> <a href="#859762" title="scala.tools.nsc.io.AbstractFile">f</a>
       <span class="delimiter">)</span>

      <a href="#859488" title="scala.collection.Set[scala.tools.nsc.io.AbstractFile]">initial</a>.<a href="../../../collection/IterableLike.scala.html#58562" title="(f: scala.tools.nsc.io.AbstractFile =&gt; scala.collection.mutable.Map[scala.tools.nsc.io.AbstractFile,scala.collection.immutable.Set[scala.tools.nsc.io.AbstractFile]])Unit">foreach</a><span class="delimiter">(</span><span class="delimiter">(</span>f: <a href="../../../reflect/io/AbstractFile.scala.html#23215" title="scala.tools.nsc.io.AbstractFile">AbstractFile</a><span class="delimiter">)</span> =&gt; <a href="#859489" title="scala.collection.mutable.Map[scala.tools.nsc.io.AbstractFile,scala.collection.immutable.Set[scala.tools.nsc.io.AbstractFile]]">collect</a> <a href="../../../collection/mutable/MapLike.scala.html#87612" title="(kv: (scala.tools.nsc.io.AbstractFile, scala.collection.immutable.Set[scala.tools.nsc.io.AbstractFile]))collect.type">+=</a> <span class="delimiter">(</span><a href="../../../Predef.scala.html#7509" title="(x: scala.tools.nsc.io.AbstractFile)ArrowAssoc[scala.tools.nsc.io.AbstractFile]">f</a> <a href="../../../Predef.scala.html#62634" title="(y: scala.collection.immutable.Set[scala.tools.nsc.io.AbstractFile])(scala.tools.nsc.io.AbstractFile, scala.collection.immutable.Set[scala.tools.nsc.io.AbstractFile])">-&gt;</a> <span class="delimiter">(</span><a href="#859489" title="scala.collection.mutable.Map[scala.tools.nsc.io.AbstractFile,scala.collection.immutable.Set[scala.tools.nsc.io.AbstractFile]]">collect</a>.<a href="../../../collection/MapLike.scala.html#87532" title="(key: scala.tools.nsc.io.AbstractFile, default: =&gt; scala.collection.immutable.Set[scala.tools.nsc.io.AbstractFile])scala.collection.immutable.Set[scala.tools.nsc.io.AbstractFile]">getOrElse</a><span class="delimiter">(</span><a href="#859957" title="scala.tools.nsc.io.AbstractFile">f</a>, immutable.<a href="../../../collection/generic/GenericCompanion.scala.html#59933" title="(elems: scala.tools.nsc.io.AbstractFile*)scala.collection.immutable.Set[scala.tools.nsc.io.AbstractFile]">Set</a><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span> <a href="../../../collection/SetLike.scala.html#66445" title="(elems: scala.collection.GenTraversableOnce[scala.tools.nsc.io.AbstractFile])scala.collection.immutable.Set[scala.tools.nsc.io.AbstractFile]">++</a> <a href="#859648" title="scala.collection.Set[scala.tools.nsc.io.AbstractFile]">res</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
      <span title="scala.collection.Set[scala.tools.nsc.io.AbstractFile]" class="keyword">if</span> <span class="delimiter">(</span><a href="#859648" title="scala.collection.Set[scala.tools.nsc.io.AbstractFile]">res</a>.<a href="../../../collection/GenSetLike.scala.html#66410" title="(that: scala.collection.GenSet[scala.tools.nsc.io.AbstractFile])Boolean">subsetOf</a><span class="delimiter">(</span><a href="#859488" title="scala.collection.Set[scala.tools.nsc.io.AbstractFile]">initial</a><span class="delimiter">)</span><span class="delimiter">)</span> <a href="../../../collection/generic/GenericCompanion.scala.html#59933" title="(elems: scala.tools.nsc.io.AbstractFile*)scala.collection.Set[scala.tools.nsc.io.AbstractFile]">Set</a><span class="delimiter">(</span><span class="delimiter">)</span> <span class="keyword">else</span> <a href="#859648" title="scala.collection.Set[scala.tools.nsc.io.AbstractFile]">res</a>
  <span class="delimiter">}</span>

  /** Return the set of source files that are invalidated by the given changes. */
  <span class="keyword">def</span> <a title="(files: scala.collection.Set[scala.tools.nsc.io.AbstractFile], changesOf: scala.collection.Map[RefinedBuildManager.this.compiler.Symbol,List[RefinedBuildManager.this.Change]], processed: scala.collection.Set[scala.tools.nsc.io.AbstractFile])scala.collection.Set[scala.tools.nsc.io.AbstractFile]" id="634135">invalidated</a><span class="delimiter">(</span><a title="scala.collection.Set[scala.tools.nsc.io.AbstractFile]" id="859482">files</a>: <a href="../../../collection/Set.scala.html#4394" title="scala.collection.Set[scala.tools.nsc.io.AbstractFile]">Set</a><span class="delimiter">[</span>AbstractFile<span class="delimiter">]</span>, <a title="scala.collection.Map[RefinedBuildManager.this.compiler.Symbol,List[RefinedBuildManager.this.Change]]" id="859483">changesOf</a>: scala.collection.<a href="../../../collection/Map.scala.html#3509" title="scala.collection.Map[RefinedBuildManager.this.compiler.Symbol,List[RefinedBuildManager.this.Change]]">Map</a><span class="delimiter">[</span>Symbol, List<span class="delimiter">[</span>Change<span class="delimiter">]</span><span class="delimiter">]</span>,
                  <a title="scala.collection.Set[scala.tools.nsc.io.AbstractFile]" id="859486">processed</a>: <a href="../../../collection/Set.scala.html#4394" title="scala.collection.Set[scala.tools.nsc.io.AbstractFile]">Set</a><span class="delimiter">[</span>AbstractFile<span class="delimiter">]</span> = <a href="../../../collection/Set.scala.html#4395" title="scala.collection.Set.type">Set</a>.<a href="../../../collection/Set.scala.html#66621" title="scala.collection.Set[scala.tools.nsc.io.AbstractFile]">empty</a><span class="delimiter">)</span>:
    <a href="../../../collection/Set.scala.html#4394" title="scala.collection.Set[scala.tools.nsc.io.AbstractFile]">Set</a><span class="delimiter">[</span>AbstractFile<span class="delimiter">]</span> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="scala.collection.mutable.HashSet[scala.tools.nsc.io.AbstractFile]" id="860056">buf</a> = <a href="../../../collection/mutable/HashSet.scala.html#125959" title="()scala.collection.mutable.HashSet[scala.tools.nsc.io.AbstractFile]" class="keyword">new</a> mutable.<a href="../../../collection/mutable/HashSet.scala.html#13053" title="scala.collection.mutable.HashSet[scala.tools.nsc.io.AbstractFile]">HashSet</a><span class="delimiter">[</span>AbstractFile<span class="delimiter">]</span>
    <span class="keyword">val</span> <a title="scala.collection.mutable.HashMap[RefinedBuildManager.this.compiler.Symbol,List[RefinedBuildManager.this.Change]]" id="860057">newChangesOf</a> = <a href="../../../collection/mutable/HashMap.scala.html#88242" title="()scala.collection.mutable.HashMap[RefinedBuildManager.this.compiler.Symbol,List[RefinedBuildManager.this.Change]]" class="keyword">new</a> mutable.<a href="../../../collection/mutable/HashMap.scala.html#12447" title="scala.collection.mutable.HashMap[RefinedBuildManager.this.compiler.Symbol,List[RefinedBuildManager.this.Change]]">HashMap</a><span class="delimiter">[</span>Symbol, List<span class="delimiter">[</span>Change<span class="delimiter">]</span><span class="delimiter">]</span>
    <span class="keyword">var</span> <a title="scala.collection.Set[scala.tools.nsc.io.AbstractFile]" id="860058">directDeps</a> =
      <a href="#634109" title="=&gt; RefinedBuildManager.this.BuilderGlobal">compiler</a>.<a href="../Global.scala.html#537600" title="RefinedBuildManager.this.compiler.dependencyAnalysis.type">dependencyAnalysis</a>.<a href="../dependencies/DependencyAnalysis.scala.html#620086" title="=&gt; RefinedBuildManager.this.compiler.dependencyAnalysis.FileDependencies">dependencies</a>.<a href="../dependencies/Files.scala.html#768955" title="(depth: Int, changed: scala.collection.Set[scala.tools.nsc.io.AbstractFile])scala.collection.Set[scala.tools.nsc.io.AbstractFile]">dependentFiles</a><span class="delimiter">(</span><span title="Int(1)" class="int">1</span>, <a href="#859482" title="scala.collection.Set[scala.tools.nsc.io.AbstractFile]">files</a><span class="delimiter">)</span>

    <span class="keyword">def</span> <a title="(file: scala.tools.nsc.io.AbstractFile, reason: String, change: RefinedBuildManager.this.Change)Nothing" id="860059">invalidate</a><span class="delimiter">(</span><a title="scala.tools.nsc.io.AbstractFile" id="860062">file</a>: <a href="../../../reflect/io/AbstractFile.scala.html#23215" title="scala.tools.nsc.io.AbstractFile">AbstractFile</a>, <a title="String" id="860063">reason</a>: <span title="String">String</span>, <a title="RefinedBuildManager.this.Change" id="860064">change</a>: <a href="../dependencies/Changes.scala.html#634061" title="RefinedBuildManager.this.Change">Change</a><span class="delimiter">)</span> = <span class="delimiter">{</span>
      <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#634139" title="=&gt; scala.tools.nsc.Settings">settings</a>.<a href="../settings/ScalaSettings.scala.html#540134" title="=&gt; RefinedBuildManager.this.settings.BooleanSetting">Ybuildmanagerdebug</a>.<a href="../settings/MutableSettings.scala.html#541066" title="=&gt; Boolean">value</a><span class="delimiter">)</span>
        <a href="#634109" title="=&gt; RefinedBuildManager.this.BuilderGlobal">compiler</a>.<a href="../Global.scala.html#537494" title="(msg: String)Unit">inform</a><span class="delimiter">(</span><span title="String(&quot;invalidate &quot;)" class="string">&quot;invalidate &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#860062" title="scala.tools.nsc.io.AbstractFile">file</a> <span title="(x$1: Any)String">+</span> <span title="String(&quot; because &quot;)" class="string">&quot; because &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#860063" title="String">reason</a> <span title="(x$1: Any)String">+</span> <span title="String(&quot; [&quot;)" class="string">&quot; [&quot;</span> <span title="(x$1: Any)String">+</span> <a href="#860064" title="RefinedBuildManager.this.Change">change</a> <span title="(x$1: Any)String">+</span> <span title="String(&quot;]&quot;)" class="string">&quot;]&quot;</span><span class="delimiter">)</span>
      <a href="#860056" title="scala.collection.mutable.HashSet[scala.tools.nsc.io.AbstractFile]">buf</a> <a href="../../../collection/mutable/HashSet.scala.html#125963" title="(elem: scala.tools.nsc.io.AbstractFile)buf.type">+=</a> <a href="#860062" title="scala.tools.nsc.io.AbstractFile">file</a>
      <a href="#860058" title="scala.collection.Set[scala.tools.nsc.io.AbstractFile]">directDeps</a> <a href="../../../collection/SetLike.scala.html#66446" title="(elem: scala.tools.nsc.io.AbstractFile)scala.collection.Set[scala.tools.nsc.io.AbstractFile]">-=</a> <a href="#860062" title="scala.tools.nsc.io.AbstractFile">file</a>
      <span class="keyword">for</span> <span class="delimiter">(</span><a title="RefinedBuildManager.this.SymWithHistory" id="860133">syms</a> &lt;- <a href="../../../collection/MapLike.scala.html#87535" title="(key: scala.tools.nsc.io.AbstractFile)List[RefinedBuildManager.this.SymWithHistory]">definitions</a><a href="../../../collection/immutable/List.scala.html#62719" title="(f: RefinedBuildManager.this.SymWithHistory =&gt; Unit)Unit" class="delimiter">(</a><a href="#860062" title="scala.tools.nsc.io.AbstractFile">file</a><span class="delimiter">)</span><span class="delimiter">)</span>     // fixes #2557
        <a href="../../../collection/mutable/HashMap.scala.html#88248" title="(key: RefinedBuildManager.this.compiler.Symbol, value: List[RefinedBuildManager.this.Change])Unit">newChangesOf</a><span class="delimiter">(</span><a href="#860133" title="RefinedBuildManager.this.SymWithHistory">syms</a>.<a href="#860751" title="=&gt; RefinedBuildManager.this.compiler.Symbol">sym</a><span class="delimiter">)</span> = <a href="../../../collection/immutable/List.scala.html#62451" title="(xs: RefinedBuildManager.this.Change*)List[RefinedBuildManager.this.Change]">List</a><span class="delimiter">(</span><a href="#860064" title="RefinedBuildManager.this.Change">change</a>, <a href="../dependencies/Changes.scala.html#634100" title="(sym: RefinedBuildManager.this.compiler.Symbol)RefinedBuildManager.this.Change">parentChangeSet</a><span class="delimiter">(</span><a href="#860133" title="RefinedBuildManager.this.SymWithHistory">syms</a>.<a href="#860751" title="=&gt; RefinedBuildManager.this.compiler.Symbol">sym</a><span class="delimiter">)</span><span class="delimiter">)</span>
      <a href="../../../util/control/Breaks.scala.html#58517" title="()Nothing">break</a>
    <span class="delimiter">}</span>

    <span class="keyword">for</span> <span class="delimiter">(</span><span class="delimiter">(</span><a href="../../../Tuple2.scala.html#60635" title="RefinedBuildManager.this.compiler.Symbol" id="860167">oldSym</a>, <a href="../../../Tuple2.scala.html#60637" title="List[RefinedBuildManager.this.Change]" id="860168">changes</a><span class="delimiter">)</span> &lt;- <a href="../../../collection/IterableLike.scala.html#58562" title="(f: ((RefinedBuildManager.this.compiler.Symbol, List[RefinedBuildManager.this.Change])) =&gt; Unit)Unit">changesOf</a>; <a title="RefinedBuildManager.this.Change" id="860189">change</a> &lt;- <a href="../../../collection/immutable/List.scala.html#62719" title="(f: RefinedBuildManager.this.Change =&gt; Unit)Unit">changes</a><span class="delimiter">)</span> <span class="delimiter">{</span>
      <span class="keyword">def</span> <a title="(cls: RefinedBuildManager.this.compiler.Symbol, file: scala.tools.nsc.io.AbstractFile)Unit" id="860190">checkParents</a><span class="delimiter">(</span><a title="RefinedBuildManager.this.compiler.Symbol" id="860194">cls</a>: <a href="../../../reflect/internal/Symbols.scala.html#407146" title="RefinedBuildManager.this.compiler.Symbol">Symbol</a>, <a title="scala.tools.nsc.io.AbstractFile" id="860195">file</a>: <a href="../../../reflect/io/AbstractFile.scala.html#23215" title="scala.tools.nsc.io.AbstractFile">AbstractFile</a><span class="delimiter">)</span> <span class="delimiter">{</span>
        <span class="keyword">val</span> <a title="Boolean" id="860196">parentChange</a> = <a href="#860194" title="RefinedBuildManager.this.compiler.Symbol">cls</a>.<a href="../../../reflect/internal/Symbols.scala.html#411441" title="=&gt; List[RefinedBuildManager.this.compiler.Symbol]">parentSymbols</a> <a href="../../../collection/LinearSeqOptimized.scala.html#86379" title="(p: RefinedBuildManager.this.compiler.Symbol =&gt; Boolean)Boolean">exists</a> <span class="delimiter">(</span><a href="#860205" title="RefinedBuildManager.this.compiler.Symbol">_</a>.<a href="../../../reflect/internal/Symbols.scala.html#411334" title="=&gt; String">fullName</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="#860167" title="RefinedBuildManager.this.compiler.Symbol">oldSym</a>.<a href="../../../reflect/internal/Symbols.scala.html#411334" title="=&gt; String">fullName</a><span class="delimiter">)</span>
          // if (settings.buildmanagerdebug.value)
          //   compiler.inform(&quot;checkParents &quot; + cls + &quot; oldSym: &quot; + oldSym + &quot; parentChange: &quot; + parentChange + &quot; &quot; + cls.info.parents)
        <a href="#860189" title="RefinedBuildManager.this.Change">change</a> <span class="keyword">match</span> <span class="delimiter">{</span>
          <span class="keyword">case</span> Changed<a href="#3331687" title="Boolean" id="3331690" class="delimiter">(</a>Class<a href="../dependencies/Changes.scala.html#767677" title="RefinedBuildManager.this.Entity" id="3331693" class="delimiter">(</a><a href="../dependencies/Changes.scala.html#767536" title="String" id="3331691">_</a><span class="delimiter">)</span><span class="delimiter">)</span> <span class="keyword">if</span> <a href="#860196" title="Boolean">parentChange</a> =&gt;
            <a href="#860059" title="(file: scala.tools.nsc.io.AbstractFile, reason: String, change: RefinedBuildManager.this.Change)Nothing">invalidate</a><a href="#3331714" title="(x: Unit)Unit" class="delimiter">(</a><a href="#860195" title="scala.tools.nsc.io.AbstractFile">file</a>, <span title="String(&quot;parents have changed&quot;)" class="string">&quot;parents have changed&quot;</span>, <a href="#860189" title="RefinedBuildManager.this.Change">change</a><span class="delimiter">)</span>

          <span class="keyword">case</span> Changed<span class="delimiter">(</span>Definition<a href="../dependencies/Changes.scala.html#767677" title="RefinedBuildManager.this.Entity" id="3331699" class="delimiter">(</a><a href="../dependencies/Changes.scala.html#767571" title="String" id="3331697">_</a><span class="delimiter">)</span><span class="delimiter">)</span> <span class="keyword">if</span> <a href="#860196" title="Boolean">parentChange</a> =&gt;
            <a href="#860059" title="(file: scala.tools.nsc.io.AbstractFile, reason: String, change: RefinedBuildManager.this.Change)Nothing">invalidate</a><a href="#3331714" title="(x: Unit)Unit" class="delimiter">(</a><a href="#860195" title="scala.tools.nsc.io.AbstractFile">file</a>, <span title="String(&quot;inherited method changed&quot;)" class="string">&quot;inherited method changed&quot;</span>, <a href="#860189" title="RefinedBuildManager.this.Change">change</a><span class="delimiter">)</span>

          <span class="keyword">case</span> Added<a href="#3331687" title="Unit" id="3331702" class="delimiter">(</a>Definition<a href="../dependencies/Changes.scala.html#767606" title="RefinedBuildManager.this.Entity" id="3331705" class="delimiter">(</a><a href="../dependencies/Changes.scala.html#767571" title="String" id="3331703">_</a><span class="delimiter">)</span><span class="delimiter">)</span> <span class="keyword">if</span> <a href="#860196" title="Boolean">parentChange</a> =&gt;
            <a href="#860059" title="(file: scala.tools.nsc.io.AbstractFile, reason: String, change: RefinedBuildManager.this.Change)Nothing">invalidate</a><a href="#3331714" title="(x: Unit)Unit" class="delimiter">(</a><a href="#860195" title="scala.tools.nsc.io.AbstractFile">file</a>, <span title="String(&quot;inherited new method&quot;)" class="string">&quot;inherited new method&quot;</span>, <a href="#860189" title="RefinedBuildManager.this.Change">change</a><span class="delimiter">)</span>

          <span class="keyword">case</span> Removed<a href="#3331687" title="Unit" id="3331708" class="delimiter">(</a>Definition<a href="../dependencies/Changes.scala.html#767641" title="RefinedBuildManager.this.Entity" id="3331711" class="delimiter">(</a><a href="../dependencies/Changes.scala.html#767571" title="String" id="3331709">_</a><span class="delimiter">)</span><span class="delimiter">)</span> <span class="keyword">if</span> <a href="#860196" title="Boolean">parentChange</a> =&gt;
            <a href="#860059" title="(file: scala.tools.nsc.io.AbstractFile, reason: String, change: RefinedBuildManager.this.Change)Nothing">invalidate</a><a href="#3331714" title="(x: Unit)Unit" class="delimiter">(</a><a href="#860195" title="scala.tools.nsc.io.AbstractFile">file</a>, <span title="String(&quot;inherited method removed&quot;)" class="string">&quot;inherited method removed&quot;</span>, <a href="#860189" title="RefinedBuildManager.this.Change">change</a><span class="delimiter">)</span>

          <span class="keyword">case</span> _ =&gt; <a href="#3331714" title="(x: Unit)Unit" class="delimiter">(</a><span class="delimiter">)</span>
        <span class="delimiter">}</span>
      <span class="delimiter">}</span>

      <span class="keyword">def</span> <a title="(cls: RefinedBuildManager.this.compiler.Symbol, file: scala.tools.nsc.io.AbstractFile)Unit" id="860191">checkInterface</a><span class="delimiter">(</span><a title="RefinedBuildManager.this.compiler.Symbol" id="860219">cls</a>: <a href="../../../reflect/internal/Symbols.scala.html#407146" title="RefinedBuildManager.this.compiler.Symbol">Symbol</a>, <a title="scala.tools.nsc.io.AbstractFile" id="860220">file</a>: <a href="../../../reflect/io/AbstractFile.scala.html#23215" title="scala.tools.nsc.io.AbstractFile">AbstractFile</a><span class="delimiter">)</span> <span class="delimiter">{</span>
        <a href="#860189" title="RefinedBuildManager.this.Change">change</a> <span class="keyword">match</span> <span class="delimiter">{</span>
          <span class="keyword">case</span> Added<a href="#3331722" title="Unit" id="3331725" class="delimiter">(</a>Definition<a href="../dependencies/Changes.scala.html#767606" title="RefinedBuildManager.this.Entity" id="3331727" class="delimiter">(</a><a href="../dependencies/Changes.scala.html#767571" title="String" id="860222">name</a><span class="delimiter">)</span><span class="delimiter">)</span> =&gt;
            <a href="#3331734" title="(x: Unit)Unit" class="keyword">if</a> <span class="delimiter">(</span><a href="#860219" title="RefinedBuildManager.this.compiler.Symbol">cls</a>.<a href="../../../reflect/internal/Symbols.scala.html#411367" title="=&gt; RefinedBuildManager.this.compiler.Type">info</a>.<a href="../../../reflect/internal/Types.scala.html#408442" title="=&gt; RefinedBuildManager.this.compiler.Scope">decls</a>.<a href="../../../reflect/internal/Scopes.scala.html#410524" title="=&gt; Iterator[RefinedBuildManager.this.compiler.Symbol]">iterator</a>.<a href="../../../collection/Iterator.scala.html#66801" title="(p: RefinedBuildManager.this.compiler.Symbol =&gt; Boolean)Boolean">exists</a><span class="delimiter">(</span><a href="#860230" title="RefinedBuildManager.this.compiler.Symbol">_</a>.<a href="../../../reflect/internal/Symbols.scala.html#411334" title="=&gt; String">fullName</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="#860222" title="String">name</a><span class="delimiter">)</span><span class="delimiter">)</span>
              <a href="#860059" title="(file: scala.tools.nsc.io.AbstractFile, reason: String, change: RefinedBuildManager.this.Change)Nothing">invalidate</a><span class="delimiter">(</span><a href="#860220" title="scala.tools.nsc.io.AbstractFile">file</a>, <span title="String(&quot;of new method with existing name&quot;)" class="string">&quot;of new method with existing name&quot;</span>, <a href="#860189" title="RefinedBuildManager.this.Change">change</a><span class="delimiter">)</span>
          <span class="keyword">case</span> Changed<a href="#3331722" title="Unit" id="3331730" class="delimiter">(</a>Class<a href="../dependencies/Changes.scala.html#767677" title="RefinedBuildManager.this.Entity" id="3331732" class="delimiter">(</a><a href="../dependencies/Changes.scala.html#767536" title="String" id="860239">name</a><span class="delimiter">)</span><span class="delimiter">)</span> =&gt;
            <a href="#3331734" title="(x: Unit)Unit" class="keyword">if</a> <span class="delimiter">(</span><a href="#860219" title="RefinedBuildManager.this.compiler.Symbol">cls</a>.<a href="../../../reflect/internal/Symbols.scala.html#411367" title="=&gt; RefinedBuildManager.this.compiler.Type">info</a>.<a href="../../../reflect/internal/Types.scala.html#408407" title="=&gt; RefinedBuildManager.this.compiler.Symbol">typeSymbol</a>.<a href="../../../reflect/internal/Symbols.scala.html#411334" title="=&gt; String">fullName</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="#860239" title="String">name</a><span class="delimiter">)</span>
              <a href="#860059" title="(file: scala.tools.nsc.io.AbstractFile, reason: String, change: RefinedBuildManager.this.Change)Nothing">invalidate</a><span class="delimiter">(</span><a href="#860220" title="scala.tools.nsc.io.AbstractFile">file</a>, <span title="String(&quot;self type changed&quot;)" class="string">&quot;self type changed&quot;</span>, <a href="#860189" title="RefinedBuildManager.this.Change">change</a><span class="delimiter">)</span>
          <span class="keyword">case</span> _ =&gt;
            <a href="#3331734" title="(x: Unit)Unit" class="delimiter">(</a><span class="delimiter">)</span>
        <span class="delimiter">}</span>
      <span class="delimiter">}</span>

      <span class="keyword">def</span> <a title="(file: scala.tools.nsc.io.AbstractFile)Unit" id="860192">checkReferences</a><span class="delimiter">(</span><a title="scala.tools.nsc.io.AbstractFile" id="860249">file</a>: <a href="../../../reflect/io/AbstractFile.scala.html#23215" title="scala.tools.nsc.io.AbstractFile">AbstractFile</a><span class="delimiter">)</span> <span class="delimiter">{</span>
        //if (settings.buildmanagerdebug.value)
        //  compiler.inform(file + &quot;:&quot; + references(file))
        <span class="keyword">val</span> <a title="scala.collection.immutable.Set[String]" id="860250">refs</a> = <a href="../../../collection/MapLike.scala.html#87535" title="(key: scala.tools.nsc.io.AbstractFile)scala.collection.immutable.Set[String]">references</a><span class="delimiter">(</span><a href="#860249" title="scala.tools.nsc.io.AbstractFile">file</a><span class="delimiter">)</span>
        <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#860250" title="scala.collection.immutable.Set[String]">refs</a>.<a href="../../../collection/SetLike.scala.html#66447" title="=&gt; Boolean">isEmpty</a><span class="delimiter">)</span>
          <a href="#860059" title="(file: scala.tools.nsc.io.AbstractFile, reason: String, change: RefinedBuildManager.this.Change)Nothing">invalidate</a><span class="delimiter">(</span><a href="#860249" title="scala.tools.nsc.io.AbstractFile">file</a>, <span title="String(&quot;it is a direct dependency and we don\'t yet have finer-grained dependency information&quot;)" class="string">&quot;it is a direct dependency and we don't yet have finer-grained dependency information&quot;</span>, <a href="#860189" title="RefinedBuildManager.this.Change">change</a><span class="delimiter">)</span>
        <span class="keyword">else</span> <span class="delimiter">{</span>
          <a href="#860189" title="RefinedBuildManager.this.Change">change</a> <span class="keyword">match</span> <span class="delimiter">{</span>
            <span class="keyword">case</span> Removed<a href="#3331740" title="Boolean" id="3331743" class="delimiter">(</a>Definition<a href="../dependencies/Changes.scala.html#767641" title="RefinedBuildManager.this.Entity" id="3331745" class="delimiter">(</a><a href="../dependencies/Changes.scala.html#767571" title="String" id="860269">name</a><span class="delimiter">)</span><span class="delimiter">)</span> <span class="keyword">if</span> <a href="../../../collection/GenSetLike.scala.html#66403" title="(elem: String)Boolean">refs</a><span class="delimiter">(</span><a href="#860269" title="String">name</a><span class="delimiter">)</span> =&gt;
              <a href="#860059" title="(file: scala.tools.nsc.io.AbstractFile, reason: String, change: RefinedBuildManager.this.Change)Nothing">invalidate</a><a href="#3331769" title="(x: Unit)Unit" class="delimiter">(</a><a href="#860249" title="scala.tools.nsc.io.AbstractFile">file</a>, <span title="String(&quot;it references deleted definition&quot;)" class="string">&quot;it references deleted definition&quot;</span>, <a href="#860189" title="RefinedBuildManager.this.Change">change</a><span class="delimiter">)</span>
            <span class="keyword">case</span> Removed<span class="delimiter">(</span>Class<a href="../dependencies/Changes.scala.html#767641" title="RefinedBuildManager.this.Entity" id="3331750" class="delimiter">(</a><a href="../dependencies/Changes.scala.html#767536" title="String" id="860282">name</a><span class="delimiter">)</span><span class="delimiter">)</span> <span class="keyword">if</span> <span class="delimiter">(</span><a href="../../../collection/GenSetLike.scala.html#66403" title="(elem: String)Boolean">refs</a><span class="delimiter">(</span><a href="#860282" title="String">name</a><span class="delimiter">)</span><span class="delimiter">)</span> =&gt;
              <a href="#860059" title="(file: scala.tools.nsc.io.AbstractFile, reason: String, change: RefinedBuildManager.this.Change)Nothing">invalidate</a><a href="#3331769" title="(x: Unit)Unit" class="delimiter">(</a><a href="#860249" title="scala.tools.nsc.io.AbstractFile">file</a>, <span title="String(&quot;it references deleted class&quot;)" class="string">&quot;it references deleted class&quot;</span>, <a href="#860189" title="RefinedBuildManager.this.Change">change</a><span class="delimiter">)</span>
            <span class="keyword">case</span> Changed<a href="#3331740" title="Boolean" id="3331753" class="delimiter">(</a>Class<a href="../dependencies/Changes.scala.html#767677" title="RefinedBuildManager.this.Entity" id="3331755" class="delimiter">(</a><a href="../dependencies/Changes.scala.html#767536" title="String" id="860295">name</a><span class="delimiter">)</span><span class="delimiter">)</span> <span class="keyword">if</span> <span class="delimiter">(</span><a href="../../../collection/GenSetLike.scala.html#66403" title="(elem: String)Boolean">refs</a><span class="delimiter">(</span><a href="#860295" title="String">name</a><span class="delimiter">)</span><span class="delimiter">)</span> =&gt;
              <a href="#860059" title="(file: scala.tools.nsc.io.AbstractFile, reason: String, change: RefinedBuildManager.this.Change)Nothing">invalidate</a><a href="#3331769" title="(x: Unit)Unit" class="delimiter">(</a><a href="#860249" title="scala.tools.nsc.io.AbstractFile">file</a>, <span title="String(&quot;it references changed class&quot;)" class="string">&quot;it references changed class&quot;</span>, <a href="#860189" title="RefinedBuildManager.this.Change">change</a><span class="delimiter">)</span>
            <span class="keyword">case</span> Changed<span class="delimiter">(</span>Definition<a href="../dependencies/Changes.scala.html#767677" title="RefinedBuildManager.this.Entity" id="3331760" class="delimiter">(</a><a href="../dependencies/Changes.scala.html#767571" title="String" id="860308">name</a><span class="delimiter">)</span><span class="delimiter">)</span> <span class="keyword">if</span> <span class="delimiter">(</span><a href="../../../collection/GenSetLike.scala.html#66403" title="(elem: String)Boolean">refs</a><span class="delimiter">(</span><a href="#860308" title="String">name</a><span class="delimiter">)</span><span class="delimiter">)</span> =&gt;
              <a href="#860059" title="(file: scala.tools.nsc.io.AbstractFile, reason: String, change: RefinedBuildManager.this.Change)Nothing">invalidate</a><a href="#3331769" title="(x: Unit)Unit" class="delimiter">(</a><a href="#860249" title="scala.tools.nsc.io.AbstractFile">file</a>, <span title="String(&quot;it references changed definition&quot;)" class="string">&quot;it references changed definition&quot;</span>, <a href="#860189" title="RefinedBuildManager.this.Change">change</a><span class="delimiter">)</span>
            <span class="keyword">case</span> Added<a href="#3331740" title="Unit" id="3331763" class="delimiter">(</a>Definition<a href="../dependencies/Changes.scala.html#767606" title="RefinedBuildManager.this.Entity" id="3331765" class="delimiter">(</a><a href="../dependencies/Changes.scala.html#767571" title="String" id="860321">name</a><span class="delimiter">)</span><span class="delimiter">)</span> <span class="keyword">if</span> <span class="delimiter">(</span><a href="../../../collection/GenSetLike.scala.html#66403" title="(elem: String)Boolean">refs</a><span class="delimiter">(</span><a href="#860321" title="String">name</a><span class="delimiter">)</span><span class="delimiter">)</span> =&gt;
              <a href="#860059" title="(file: scala.tools.nsc.io.AbstractFile, reason: String, change: RefinedBuildManager.this.Change)Nothing">invalidate</a><a href="#3331769" title="(x: Unit)Unit" class="delimiter">(</a><a href="#860249" title="scala.tools.nsc.io.AbstractFile">file</a>, <span title="String(&quot;it references added definition&quot;)" class="string">&quot;it references added definition&quot;</span>, <a href="#860189" title="RefinedBuildManager.this.Change">change</a><span class="delimiter">)</span>
            <span class="keyword">case</span> _ =&gt; <a href="#3331769" title="(x: Unit)Unit" class="delimiter">(</a><span class="delimiter">)</span>
          <span class="delimiter">}</span>
        <span class="delimiter">}</span>
      <span class="delimiter">}</span>

      <span class="keyword">def</span> <a title="(file: scala.tools.nsc.io.AbstractFile)Unit" id="860193">checkInheritedReferences</a><span class="delimiter">(</span><a title="scala.tools.nsc.io.AbstractFile" id="860333">file</a>: <a href="../../../reflect/io/AbstractFile.scala.html#23215" title="scala.tools.nsc.io.AbstractFile">AbstractFile</a><span class="delimiter">)</span> <span class="delimiter">{</span>
        <span class="keyword">val</span> <a title="scala.collection.immutable.Set[RefinedBuildManager.this.compiler.dependencyAnalysis.Inherited]" id="860334">refs</a> = <a href="../../../collection/MapLike.scala.html#87535" title="(key: scala.tools.nsc.io.AbstractFile)scala.collection.immutable.Set[RefinedBuildManager.this.compiler.dependencyAnalysis.Inherited]">inherited</a><span class="delimiter">(</span><a href="#860333" title="scala.tools.nsc.io.AbstractFile">file</a><span class="delimiter">)</span>
        <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="../../../Boolean.scala.html#57822" title="=&gt; Boolean">!</a><a href="#860334" title="scala.collection.immutable.Set[RefinedBuildManager.this.compiler.dependencyAnalysis.Inherited]">refs</a>.<a href="../../../collection/SetLike.scala.html#66447" title="=&gt; Boolean">isEmpty</a><span class="delimiter">)</span>
          <a href="#860189" title="RefinedBuildManager.this.Change">change</a> <span class="keyword">match</span> <span class="delimiter">{</span>
            <span class="keyword">case</span> ParentChanged<a href="#3331791" title="Unit" id="3331794" class="delimiter">(</a>Class<a href="../dependencies/Changes.scala.html#767720" title="RefinedBuildManager.this.Entity" id="3331796" class="delimiter">(</a><a href="../dependencies/Changes.scala.html#767536" title="String" id="860353">name</a><span class="delimiter">)</span><span class="delimiter">)</span> =&gt;
              <span class="keyword">for</span> <span class="delimiter">(</span>Inherited<span class="delimiter">(</span><a href="../dependencies/DependencyAnalysis.scala.html#770546" title="String" id="860386">q</a>, <a href="../dependencies/DependencyAnalysis.scala.html#770548" title="RefinedBuildManager.this.compiler.dependencyAnalysis.global.Name" id="860387">member</a><span class="delimiter">)</span> &lt;- <a href="#860334" title="scala.collection.immutable.Set[RefinedBuildManager.this.compiler.dependencyAnalysis.Inherited]">refs</a>.<a href="../../../collection/IterableLike.scala.html#58567" title="(p: RefinedBuildManager.this.compiler.dependencyAnalysis.Inherited =&gt; Boolean)Option[RefinedBuildManager.this.compiler.dependencyAnalysis.Inherited]">find</a><a href="../../../Option.scala.html#97479" title="(f: RefinedBuildManager.this.compiler.dependencyAnalysis.Inherited =&gt; Unit)Unit" class="delimiter">(</a><a title="RefinedBuildManager.this.compiler.dependencyAnalysis.Inherited" id="860359">p</a> =&gt; <span class="delimiter">(</span><a href="#860359" title="RefinedBuildManager.this.compiler.dependencyAnalysis.Inherited">p</a> <span title="(x$1: AnyRef)Boolean">!=</span> <span title="Null(null)" class="keyword">null</span> <a href="../../../Boolean.scala.html#57826" title="(x: Boolean)Boolean">&amp;&amp;</a> <a href="#860359" title="RefinedBuildManager.this.compiler.dependencyAnalysis.Inherited">p</a>.<a href="../dependencies/DependencyAnalysis.scala.html#770546" title="=&gt; String">qualifier</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="#860353" title="String">name</a><span class="delimiter">)</span><span class="delimiter">)</span>;
                   <a title="scala.tools.nsc.io.AbstractFile" id="860396">classFile</a> &lt;- <a href="#634127" title="=&gt; scala.collection.mutable.Map[String,scala.tools.nsc.io.AbstractFile]">classes</a>.<a href="../../../collection/MapLike.scala.html#87525" title="(key: String)Option[scala.tools.nsc.io.AbstractFile]">get</a><a href="../../../Option.scala.html#62884" title="(f: scala.tools.nsc.io.AbstractFile =&gt; Unit)Unit" class="delimiter">(</a><a href="#860386" title="String">q</a><span class="delimiter">)</span>;
                   <a title="List[RefinedBuildManager.this.SymWithHistory]" id="860403">defs</a> &lt;- <a href="#634118" title="=&gt; scala.collection.mutable.Map[scala.tools.nsc.io.AbstractFile,List[RefinedBuildManager.this.SymWithHistory]]">definitions</a>.<a href="../../../collection/MapLike.scala.html#87525" title="(key: scala.tools.nsc.io.AbstractFile)Option[List[RefinedBuildManager.this.SymWithHistory]]">get</a><a href="../../../Option.scala.html#62884" title="(f: List[RefinedBuildManager.this.SymWithHistory] =&gt; Unit)Unit" class="delimiter">(</a><a href="#860396" title="scala.tools.nsc.io.AbstractFile">classFile</a><span class="delimiter">)</span>;
                   <a title="RefinedBuildManager.this.SymWithHistory" id="860433">s</a> &lt;- <a href="#860403" title="List[RefinedBuildManager.this.SymWithHistory]">defs</a>.<a href="../../../collection/LinearSeqOptimized.scala.html#86381" title="(p: RefinedBuildManager.this.SymWithHistory =&gt; Boolean)Option[RefinedBuildManager.this.SymWithHistory]">find</a><a href="../../../Option.scala.html#97479" title="(f: RefinedBuildManager.this.SymWithHistory =&gt; Nothing)Unit" class="delimiter">(</a><a title="RefinedBuildManager.this.SymWithHistory" id="860410">p</a> =&gt; <a href="#860410" title="RefinedBuildManager.this.SymWithHistory">p</a>.<a href="#860751" title="=&gt; RefinedBuildManager.this.compiler.Symbol">sym</a>.<a href="../../../reflect/internal/Symbols.scala.html#411334" title="=&gt; String">fullName</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="#860386" title="String">q</a><span class="delimiter">)</span>
                     <span class="keyword">if</span> <span class="delimiter">(</span><span class="delimiter">(</span><a href="#860433" title="RefinedBuildManager.this.SymWithHistory">s</a>.<a href="#860751" title="=&gt; RefinedBuildManager.this.compiler.Symbol">sym</a><span class="delimiter">)</span>.<a href="../../../reflect/internal/Symbols.scala.html#411365" title="=&gt; RefinedBuildManager.this.compiler.Type">tpe</a>.<a href="../../../reflect/internal/Types.scala.html#408452" title="(name: RefinedBuildManager.this.compiler.Name)RefinedBuildManager.this.compiler.Symbol">nonPrivateMember</a><span class="delimiter">(</span><a href="#860387" title="RefinedBuildManager.this.compiler.dependencyAnalysis.global.Name">member</a><span class="delimiter">)</span> <span title="(x$1: AnyRef)Boolean">==</span> <a href="#634109" title="=&gt; RefinedBuildManager.this.BuilderGlobal">compiler</a>.<a href="../../../reflect/internal/Symbols.scala.html#407184" title="=&gt; RefinedBuildManager.this.compiler.NoSymbol">NoSymbol</a><span class="delimiter">)</span><span class="delimiter">)</span>
                <a href="#860059" title="(file: scala.tools.nsc.io.AbstractFile, reason: String, change: RefinedBuildManager.this.Change)Nothing">invalidate</a><span class="delimiter">(</span><a href="#860333" title="scala.tools.nsc.io.AbstractFile">file</a>, <span title="String(&quot;it references invalid (no longer inherited) definition&quot;)" class="string">&quot;it references invalid (no longer inherited) definition&quot;</span>, <a href="#860189" title="RefinedBuildManager.this.Change">change</a><span class="delimiter">)</span>
              <span title="Unit" class="delimiter">(</span><span class="delimiter">)</span>
            <span class="keyword">case</span> _ =&gt; <a href="#3331798" title="(x: Unit)Unit" class="delimiter">(</a><span class="delimiter">)</span>
        <span class="delimiter">}</span>
      <span class="delimiter">}</span>

        <span class="keyword">for</span> <span class="delimiter">(</span><a title="scala.tools.nsc.io.AbstractFile" id="860456">file</a> &lt;- <a href="../../../collection/IterableLike.scala.html#58562" title="(f: scala.tools.nsc.io.AbstractFile =&gt; Unit)Unit">directDeps</a><span class="delimiter">)</span> <span class="delimiter">{</span>
          <a href="../../../util/control/Breaks.scala.html#58511" title="(op: =&gt; Unit)Unit">breakable</a> <span class="delimiter">{</span>
            <span class="keyword">for</span> <span class="delimiter">(</span><a title="RefinedBuildManager.this.SymWithHistory" id="860494">cls</a> &lt;- <a href="../../../collection/MapLike.scala.html#87535" title="(key: scala.tools.nsc.io.AbstractFile)List[RefinedBuildManager.this.SymWithHistory]">definitions</a><a href="../../../collection/immutable/List.scala.html#62719" title="(f: RefinedBuildManager.this.SymWithHistory =&gt; Unit)Unit" class="delimiter">(</a><a href="#860456" title="scala.tools.nsc.io.AbstractFile">file</a><span class="delimiter">)</span><span class="delimiter">)</span> <a href="#860190" title="(cls: RefinedBuildManager.this.compiler.Symbol, file: scala.tools.nsc.io.AbstractFile)Unit">checkParents</a><span class="delimiter">(</span><a href="#860494" title="RefinedBuildManager.this.SymWithHistory">cls</a>.<a href="#860751" title="=&gt; RefinedBuildManager.this.compiler.Symbol">sym</a>, <a href="#860456" title="scala.tools.nsc.io.AbstractFile">file</a><span class="delimiter">)</span>
            <span class="keyword">for</span> <span class="delimiter">(</span><a title="RefinedBuildManager.this.SymWithHistory" id="860533">cls</a> &lt;- <a href="../../../collection/MapLike.scala.html#87535" title="(key: scala.tools.nsc.io.AbstractFile)List[RefinedBuildManager.this.SymWithHistory]">definitions</a><a href="../../../collection/immutable/List.scala.html#62719" title="(f: RefinedBuildManager.this.SymWithHistory =&gt; Unit)Unit" class="delimiter">(</a><a href="#860456" title="scala.tools.nsc.io.AbstractFile">file</a><span class="delimiter">)</span><span class="delimiter">)</span> <a href="#860191" title="(cls: RefinedBuildManager.this.compiler.Symbol, file: scala.tools.nsc.io.AbstractFile)Unit">checkInterface</a><span class="delimiter">(</span><a href="#860533" title="RefinedBuildManager.this.SymWithHistory">cls</a>.<a href="#860751" title="=&gt; RefinedBuildManager.this.compiler.Symbol">sym</a>, <a href="#860456" title="scala.tools.nsc.io.AbstractFile">file</a><span class="delimiter">)</span>
            <a href="#860192" title="(file: scala.tools.nsc.io.AbstractFile)Unit">checkReferences</a><span class="delimiter">(</span><a href="#860456" title="scala.tools.nsc.io.AbstractFile">file</a><span class="delimiter">)</span>
            <a href="#860193" title="(file: scala.tools.nsc.io.AbstractFile)Unit">checkInheritedReferences</a><span class="delimiter">(</span><a href="#860456" title="scala.tools.nsc.io.AbstractFile">file</a><span class="delimiter">)</span>
          <span class="delimiter">}</span>
        <span class="delimiter">}</span>
    <span class="delimiter">}</span>
    <span title="scala.collection.Set[scala.tools.nsc.io.AbstractFile]" class="keyword">if</span> <span class="delimiter">(</span><a href="#860056" title="scala.collection.mutable.HashSet[scala.tools.nsc.io.AbstractFile]">buf</a>.<a href="../../../collection/SetLike.scala.html#66447" title="=&gt; Boolean">isEmpty</a><span class="delimiter">)</span>
      <a href="#859486" title="scala.collection.Set[scala.tools.nsc.io.AbstractFile]">processed</a>
    <span class="keyword">else</span>
      <a href="#634135" title="(files: scala.collection.Set[scala.tools.nsc.io.AbstractFile], changesOf: scala.collection.Map[RefinedBuildManager.this.compiler.Symbol,List[RefinedBuildManager.this.Change]], processed: scala.collection.Set[scala.tools.nsc.io.AbstractFile])scala.collection.Set[scala.tools.nsc.io.AbstractFile]">invalidated</a><span class="delimiter">(</span><a href="#860056" title="scala.collection.mutable.HashSet[scala.tools.nsc.io.AbstractFile]">buf</a>.<a href="../../../collection/mutable/HashSet.scala.html#125973" title="()scala.collection.mutable.HashSet[scala.tools.nsc.io.AbstractFile]">clone</a><span class="delimiter">(</span><span class="delimiter">)</span> <a href="../../../collection/generic/Shrinkable.scala.html#66942" title="(xs: scala.collection.TraversableOnce[scala.reflect.io.AbstractFile])scala.collection.mutable.HashSet[scala.tools.nsc.io.AbstractFile]">--=</a> <a href="#859486" title="scala.collection.Set[scala.tools.nsc.io.AbstractFile]">processed</a>, <a href="#860057" title="scala.collection.mutable.HashMap[RefinedBuildManager.this.compiler.Symbol,List[RefinedBuildManager.this.Change]]">newChangesOf</a>, <a href="#859486" title="scala.collection.Set[scala.tools.nsc.io.AbstractFile]">processed</a> <a href="../../../collection/SetLike.scala.html#66445" title="(elems: scala.collection.GenTraversableOnce[scala.tools.nsc.io.AbstractFile])scala.collection.Set[scala.tools.nsc.io.AbstractFile]">++</a> <a href="#860056" title="scala.collection.mutable.HashSet[scala.tools.nsc.io.AbstractFile]">buf</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  /** Update the map of definitions per source file */
  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(files: scala.collection.Set[scala.tools.nsc.io.AbstractFile])Unit" id="634136">updateDefinitions</a><span class="delimiter">(</span><a title="scala.collection.Set[scala.tools.nsc.io.AbstractFile]" id="859480">files</a>: <a href="../../../collection/Set.scala.html#4394" title="scala.collection.Set[scala.tools.nsc.io.AbstractFile]">Set</a><span class="delimiter">[</span>AbstractFile<span class="delimiter">]</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span class="keyword">for</span> <span class="delimiter">(</span><a href="../../../Tuple2.scala.html#62849" title="scala.tools.nsc.io.AbstractFile" id="860691">src</a> &lt;- <a href="../../../collection/SetLike.scala.html#66437" title="(f: scala.tools.nsc.io.AbstractFile =&gt; (scala.tools.nsc.io.AbstractFile, List[RefinedBuildManager.this.compiler.dependencyAnalysis.global.Symbol]))(implicit bf: scala.collection.generic.CanBuildFrom[scala.collection.Set[scala.tools.nsc.io.AbstractFile],(scala.tools.nsc.io.AbstractFile, List[RefinedBuildManager.this.compiler.dependencyAnalysis.global.Symbol]),scala.collection.Set[(scala.tools.nsc.io.AbstractFile, List[RefinedBuildManager.this.compiler.dependencyAnalysis.global.Symbol])]])scala.collection.Set[(scala.tools.nsc.io.AbstractFile, List[RefinedBuildManager.this.compiler.dependencyAnalysis.global.Symbol])]">files</a>; <a title="List[RefinedBuildManager.this.compiler.dependencyAnalysis.global.Symbol]" id="860692">localDefs</a> = <a href="#634109" title="=&gt; RefinedBuildManager.this.BuilderGlobal">compiler</a>.<a href="../Global.scala.html#537600" title="RefinedBuildManager.this.compiler.dependencyAnalysis.type">dependencyAnalysis</a>.<a href="../../../collection/MapLike.scala.html#87535" title="(key: tools.nsc.io.AbstractFile)List[RefinedBuildManager.this.compiler.dependencyAnalysis.global.Symbol]">definitions</a><span class="delimiter">(</span><a href="#860691" title="scala.tools.nsc.io.AbstractFile">src</a><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">{</span>
      <a href="../../../collection/mutable/MapLike.scala.html#87611" title="(key: scala.tools.nsc.io.AbstractFile, value: List[RefinedBuildManager.this.SymWithHistory])Unit">definitions</a><span class="delimiter">(</span><a href="#860691" title="scala.tools.nsc.io.AbstractFile">src</a><span class="delimiter">)</span> = <span class="delimiter">(</span><a href="#860692" title="List[RefinedBuildManager.this.compiler.dependencyAnalysis.global.Symbol]">localDefs</a> <a href="../../../collection/TraversableLike.scala.html#58063" title="(f: RefinedBuildManager.this.compiler.dependencyAnalysis.global.Symbol =&gt; RefinedBuildManager.this.SymWithHistory)(implicit bf: scala.collection.generic.CanBuildFrom[List[RefinedBuildManager.this.compiler.dependencyAnalysis.global.Symbol],RefinedBuildManager.this.SymWithHistory,List[RefinedBuildManager.this.SymWithHistory]])List[RefinedBuildManager.this.SymWithHistory]">map</a> <span class="delimiter">(</span><a title="RefinedBuildManager.this.compiler.dependencyAnalysis.global.Symbol" id="860711">s</a> =&gt; <span class="delimiter">{</span>
        <a href="#35871" title="RefinedBuildManager.this.type" class="keyword">this</a>.<a href="#634127" title="=&gt; scala.collection.mutable.Map[String,scala.tools.nsc.io.AbstractFile]">classes</a> <a href="../../../collection/mutable/MapLike.scala.html#87612" title="(kv: (String, scala.reflect.io.AbstractFile))scala.collection.mutable.Map[String,scala.tools.nsc.io.AbstractFile]">+=</a> <a href="#860711" title="RefinedBuildManager.this.compiler.dependencyAnalysis.global.Symbol">s</a>.<a href="../../../Predef.scala.html#7509" title="(x: String)ArrowAssoc[String]">fullName</a> <a href="../../../Predef.scala.html#62634" title="(y: scala.tools.nsc.io.AbstractFile)(String, scala.tools.nsc.io.AbstractFile)">-&gt;</a> <a href="#860691" title="scala.tools.nsc.io.AbstractFile">src</a>
        <a href="#860824" title="(sym: RefinedBuildManager.this.compiler.Symbol, befErasure: RefinedBuildManager.this.compiler.Type)RefinedBuildManager.this.SymWithHistory">SymWithHistory</a><span class="delimiter">(</span><a href="#860711" title="RefinedBuildManager.this.compiler.dependencyAnalysis.global.Symbol">s</a>.<a href="../../../reflect/internal/Symbols.scala.html#411417" title="=&gt; s.TypeOfClonedSymbol">cloneSymbol</a>, <a href="../Global.scala.html#537708" title="(op: =&gt; RefinedBuildManager.this.compiler.dependencyAnalysis.global.Type)RefinedBuildManager.this.compiler.dependencyAnalysis.global.Type">beforeErasure</a><span class="delimiter">(</span><a href="#860711" title="RefinedBuildManager.this.compiler.dependencyAnalysis.global.Symbol">s</a>.<a href="../../../reflect/internal/Symbols.scala.html#411367" title="=&gt; RefinedBuildManager.this.compiler.dependencyAnalysis.global.Type">info</a>.<a href="../../../reflect/internal/Types.scala.html#408493" title="(owner: RefinedBuildManager.this.compiler.dependencyAnalysis.global.Symbol)RefinedBuildManager.this.compiler.dependencyAnalysis.global.Type">cloneInfo</a><span class="delimiter">(</span><a href="#860711" title="RefinedBuildManager.this.compiler.dependencyAnalysis.global.Symbol">s</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
      <span class="delimiter">}</span><span class="delimiter">)</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>
    <a href="#35871" title="RefinedBuildManager.this.type" class="keyword">this</a>.<a href="#634121" title="(x$1: scala.collection.mutable.Map[scala.tools.nsc.io.AbstractFile,scala.collection.immutable.Set[String]])Unit">references</a> = <a href="#634109" title="=&gt; RefinedBuildManager.this.BuilderGlobal">compiler</a>.<a href="../Global.scala.html#537600" title="RefinedBuildManager.this.compiler.dependencyAnalysis.type">dependencyAnalysis</a>.<a href="../dependencies/DependencyAnalysis.scala.html#620092" title="=&gt; scala.collection.mutable.Map[tools.nsc.io.AbstractFile,scala.collection.immutable.Set[String]]">references</a>
    <a href="#35871" title="RefinedBuildManager.this.type" class="keyword">this</a>.<a href="#634124" title="(x$1: scala.collection.mutable.Map[scala.tools.nsc.io.AbstractFile,scala.collection.immutable.Set[RefinedBuildManager.this.compiler.dependencyAnalysis.Inherited]])Unit">inherited</a> = <a href="#634109" title="=&gt; RefinedBuildManager.this.BuilderGlobal">compiler</a>.<a href="../Global.scala.html#537600" title="RefinedBuildManager.this.compiler.dependencyAnalysis.type">dependencyAnalysis</a>.<a href="../dependencies/DependencyAnalysis.scala.html#620094" title="=&gt; scala.collection.mutable.Map[tools.nsc.io.AbstractFile,scala.collection.immutable.Set[RefinedBuildManager.this.compiler.dependencyAnalysis.Inherited]]">inherited</a>
  <span class="delimiter">}</span>

  /** Load saved dependency information. */
  <span class="keyword">def</span> <a title="(file: scala.tools.nsc.io.AbstractFile, toFile: String =&gt; scala.tools.nsc.io.AbstractFile)Boolean" id="634137">loadFrom</a><span class="delimiter">(</span><a title="scala.tools.nsc.io.AbstractFile" id="860808">file</a>: <a href="../../../reflect/io/AbstractFile.scala.html#23215" title="scala.tools.nsc.io.AbstractFile">AbstractFile</a>, <a title="String =&gt; scala.tools.nsc.io.AbstractFile" id="860809">toFile</a>: String =&gt; AbstractFile<span class="delimiter">)</span> : <a href="../../../Boolean.scala.html#1425" title="Boolean">Boolean</a> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="Boolean" id="860811">success</a> = <a href="#634109" title="=&gt; RefinedBuildManager.this.BuilderGlobal">compiler</a>.<a href="../Global.scala.html#537600" title="RefinedBuildManager.this.compiler.dependencyAnalysis.type">dependencyAnalysis</a>.<a href="../dependencies/DependencyAnalysis.scala.html#620097" title="(f: tools.nsc.io.AbstractFile, toFile: String =&gt; tools.nsc.io.AbstractFile)Boolean">loadFrom</a><span class="delimiter">(</span><a href="#860808" title="scala.tools.nsc.io.AbstractFile">file</a>, <a href="#860809" title="String =&gt; scala.tools.nsc.io.AbstractFile">toFile</a><span class="delimiter">)</span>
    <span title="Any" class="keyword">if</span> <span class="delimiter">(</span><a href="#860811" title="Boolean">success</a><span class="delimiter">)</span>
      <a href="#634116" title="=&gt; scala.collection.mutable.Set[scala.tools.nsc.io.AbstractFile]">sources</a> <a href="../../../collection/generic/Growable.scala.html#60003" title="(xs: scala.collection.TraversableOnce[scala.tools.nsc.io.AbstractFile])RefinedBuildManager.this.sources.type">++=</a> <a href="#634109" title="=&gt; RefinedBuildManager.this.BuilderGlobal">compiler</a>.<a href="../Global.scala.html#537600" title="RefinedBuildManager.this.compiler.dependencyAnalysis.type">dependencyAnalysis</a>.<a href="../dependencies/DependencyAnalysis.scala.html#620089" title="=&gt; scala.collection.Set[scala.tools.nsc.io.AbstractFile]">managedFiles</a>
    <a href="#860811" title="Boolean">success</a>
  <span class="delimiter">}</span>

  /** Save dependency information to `file`. */
  <span class="keyword">def</span> <a title="(file: scala.tools.nsc.io.AbstractFile, fromFile: scala.tools.nsc.io.AbstractFile =&gt; String)Unit" id="634138">saveTo</a><span class="delimiter">(</span><a title="scala.tools.nsc.io.AbstractFile" id="860818">file</a>: <a href="../../../reflect/io/AbstractFile.scala.html#23215" title="scala.tools.nsc.io.AbstractFile">AbstractFile</a>, <a title="scala.tools.nsc.io.AbstractFile =&gt; String" id="860819">fromFile</a>: AbstractFile =&gt; String<span class="delimiter">)</span> <span class="delimiter">{</span>
    <a href="#634109" title="=&gt; RefinedBuildManager.this.BuilderGlobal">compiler</a>.<a href="../Global.scala.html#537600" title="RefinedBuildManager.this.compiler.dependencyAnalysis.type">dependencyAnalysis</a>.<a href="../dependencies/DependencyAnalysis.scala.html#620082" title="(file: tools.nsc.io.AbstractFile)Unit">dependenciesFile</a> = <a href="#860818" title="scala.tools.nsc.io.AbstractFile">file</a>
    <a href="#634109" title="=&gt; RefinedBuildManager.this.BuilderGlobal">compiler</a>.<a href="../Global.scala.html#537600" title="RefinedBuildManager.this.compiler.dependencyAnalysis.type">dependencyAnalysis</a>.<a href="../dependencies/DependencyAnalysis.scala.html#620096" title="(fromFile: tools.nsc.io.AbstractFile =&gt; String)Unit">saveDependencies</a><span class="delimiter">(</span><a href="#860819" title="scala.tools.nsc.io.AbstractFile =&gt; String">fromFile</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>
<span class="delimiter">}</span>

        </pre>
    </body>
</html>