<?xml version="1.0" encoding="utf-8"?>
      <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <meta http-equiv="Expires" content="0" />
        <title>scala/tools/nsc/interactive/REPL.scala</title>
        <script type="text/javascript" src="../../../../jquery-all.js"></script>
        <script type="text/javascript" src="../../../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../../../style.css" title="Style"></link>
    </head>
    <body>
        <pre>
/* NSC -- new Scala compiler
 * Copyright 2009-2013 Typesafe/Scala Solutions and LAMP/EPFL
 * @author Martin Odersky
 */
<span class="keyword">package</span> scala.tools.nsc
<span class="keyword">package</span> interactive

<span class="keyword">import</span> scala.concurrent.SyncVar
<span class="keyword">import</span> scala.reflect.internal.util._
<span class="keyword">import</span> scala.tools.nsc.symtab._
<span class="keyword">import</span> scala.tools.nsc.ast._
<span class="keyword">import</span> scala.tools.nsc.reporters._
<span class="keyword">import</span> scala.tools.nsc.io._
<span class="keyword">import</span> scala.tools.nsc.scratchpad.SourceInserter
<span class="keyword">import</span> scala.tools.nsc.interpreter.AbstractFileClassLoader
<span class="keyword">import</span> java.io.<span class="delimiter">{</span>File, FileWriter<span class="delimiter">}</span>

/** Interface of interactive compiler to a client such as an IDE
 */
<span class="keyword">object</span> <a title="scala.tools.nsc.interactive.REPL.type" id="35665">REPL</a> <a href="#35666" title="scala.tools.nsc.interactive.REPL.type" class="delimiter">{</a>

  <span class="keyword">val</span> <a title="String" id="855710">versionMsg</a> = <span title="String(&quot;Scala compiler &quot;)" class="string">&quot;Scala compiler &quot;</span> <span title="(x$1: Any)String">+</span>
    <a href="../Properties.scala.html#27455" title="scala.tools.nsc.Properties.type">Properties</a>.<a href="../../../util/Properties.scala.html#80174" title="=&gt; String">versionString</a> <span title="(x$1: Any)String">+</span> <span title="String(&quot; -- &quot;)" class="string">&quot; -- &quot;</span> <span title="(x$1: Any)String">+</span>
    <a href="../Properties.scala.html#27455" title="scala.tools.nsc.Properties.type">Properties</a>.<a href="../../../util/Properties.scala.html#80176" title="=&gt; String">copyrightString</a>

  <span class="keyword">val</span> <a title="String" id="855712">prompt</a> = <span title="String(&quot;&gt; &quot;)" class="string">&quot;&gt; &quot;</span>

  <span class="keyword">var</span> <a title="scala.tools.nsc.reporters.ConsoleReporter" id="855715">reporter</a>: <a href="../reporters/ConsoleReporter.scala.html#41214" title="scala.tools.nsc.reporters.ConsoleReporter">ConsoleReporter</a> = _

  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(msg: String)Unit" id="855717">replError</a><span class="delimiter">(</span><a title="String" id="855733">msg</a>: <span title="String">String</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    <a href="#855715" title="=&gt; scala.tools.nsc.reporters.ConsoleReporter">reporter</a>.<a href="../reporters/Reporter.scala.html#539685" title="(pos: scala.reflect.internal.util.Position, msg: String)Unit">error</a><span class="delimiter">(</span>/*new Position */<a href="../../../reflect/internal/util/Position.scala.html#522761" title="(msg: String)scala.reflect.internal.util.FakePos">FakePos</a><span class="delimiter">(</span><span title="String(&quot;scalac&quot;)" class="string">&quot;scalac&quot;</span><span class="delimiter">)</span>,
                   <a href="#855733" title="String">msg</a> <span title="(x$1: Any)String">+</span> <span title="String(&quot;\n  scalac -help  gives more information&quot;)" class="string">&quot;\n  scalac -help  gives more information&quot;</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="(args: Array[String])Unit" id="855718">process</a><span class="delimiter">(</span><a title="Array[String]" id="855736">args</a>: <a href="../../../Array.scala.html#174" title="Array[String]">Array</a><span class="delimiter">[</span>String<span class="delimiter">]</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="scala.tools.nsc.Settings" id="855737">settings</a> = <span title="scala.tools.nsc.Settings" class="keyword">new</span> <a href="../Settings.scala.html#27643" title="scala.tools.nsc.Settings">Settings</a><span class="delimiter">(</span><a href="#855717" title="(msg: String)Unit">replError</a><span class="delimiter">)</span>
    <a href="#855715" title="(x$1: scala.tools.nsc.reporters.ConsoleReporter)Unit">reporter</a> = <a href="../reporters/ConsoleReporter.scala.html#601232" title="(settings: scala.tools.nsc.Settings)scala.tools.nsc.reporters.ConsoleReporter" class="keyword">new</a> <a href="../reporters/ConsoleReporter.scala.html#41214" title="scala.tools.nsc.reporters.ConsoleReporter">ConsoleReporter</a><span class="delimiter">(</span><a href="#855737" title="scala.tools.nsc.Settings">settings</a><span class="delimiter">)</span>
    <span class="keyword">val</span> <a title="scala.tools.nsc.CompilerCommand" id="855738">command</a> = <span title="scala.tools.nsc.CompilerCommand" class="keyword">new</span> <a href="../CompilerCommand.scala.html#27796" title="scala.tools.nsc.CompilerCommand">CompilerCommand</a><span class="delimiter">(</span><a href="../../../Predef.scala.html#7555" title="(xs: Array[String])scala.collection.mutable.ArrayOps[String]">args</a>.<a href="../../../collection/TraversableOnce.scala.html#58263" title="=&gt; List[String]">toList</a>, <a href="#855737" title="scala.tools.nsc.Settings">settings</a><span class="delimiter">)</span>
    <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#855738" title="scala.tools.nsc.CompilerCommand">command</a>.<a href="../CompilerCommand.scala.html#600794" title="=&gt; scala.tools.nsc.Settings">settings</a>.<a href="../settings/StandardScalaSettings.scala.html#540230" title="=&gt; command.settings.BooleanSetting">version</a>.<a href="../settings/MutableSettings.scala.html#541066" title="=&gt; Boolean">value</a><span class="delimiter">)</span>
      <a href="#855715" title="=&gt; scala.tools.nsc.reporters.ConsoleReporter">reporter</a>.<a href="../reporters/Reporter.scala.html#539681" title="(msg: String)Unit">echo</a><span class="delimiter">(</span><a href="#855710" title="=&gt; String">versionMsg</a><span class="delimiter">)</span>
    <span class="keyword">else</span> <span class="delimiter">{</span>
      <a href="#3331012" title="Unit" id="3331008" class="keyword">try</a> <span class="delimiter">{</span>
        <span class="keyword">object</span> <a title="compiler.type" id="855812">compiler</a> <a href="#855813" title="compiler.type" class="keyword">extends</a> <a href="Global.scala.html#35889" title="scala.tools.nsc.interactive.Global">Global</a><span class="delimiter">(</span><a href="#855738" title="scala.tools.nsc.CompilerCommand">command</a>.<a href="../CompilerCommand.scala.html#600794" title="=&gt; scala.tools.nsc.Settings">settings</a>, <a href="#855715" title="=&gt; scala.tools.nsc.reporters.ConsoleReporter">reporter</a><span class="delimiter">)</span> <span class="delimiter">{</span>
//          printTypings = true
        <span class="delimiter">}</span>
        <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#855715" title="=&gt; scala.tools.nsc.reporters.ConsoleReporter">reporter</a>.<a href="../reporters/Reporter.scala.html#539679" title="=&gt; Boolean">hasErrors</a><span class="delimiter">)</span> <span class="delimiter">{</span>
          <a href="#855715" title="=&gt; scala.tools.nsc.reporters.ConsoleReporter">reporter</a>.<a href="../reporters/ConsoleReporter.scala.html#601250" title="()Unit">flush</a><span class="delimiter">(</span><span class="delimiter">)</span>
          <span title="Nothing" class="keyword">return</span>
        <span class="delimiter">}</span>
        <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#855738" title="scala.tools.nsc.CompilerCommand">command</a>.<a href="../CompilerCommand.scala.html#600815" title="=&gt; Boolean">shouldStopWithInfo</a><span class="delimiter">)</span> <span class="delimiter">{</span>
          <a href="#855715" title="=&gt; scala.tools.nsc.reporters.ConsoleReporter">reporter</a>.<a href="../reporters/Reporter.scala.html#539681" title="(msg: String)Unit">echo</a><span class="delimiter">(</span><a href="#855738" title="scala.tools.nsc.CompilerCommand">command</a>.<a href="../CompilerCommand.scala.html#600816" title="(global: scala.tools.nsc.Global)String">getInfoMessage</a><span class="delimiter">(</span><a href="#855812" title="compiler.type">compiler</a><span class="delimiter">)</span><span class="delimiter">)</span>
        <span class="delimiter">}</span> <span class="keyword">else</span> <span class="delimiter">{</span>
          <a href="#855721" title="(comp: scala.tools.nsc.interactive.Global)Unit">run</a><span class="delimiter">(</span><a href="#855812" title="compiler.type">compiler</a><span class="delimiter">)</span>
        <span class="delimiter">}</span>
      <span class="delimiter">}</span> <span class="keyword">catch</span> <span class="delimiter">{</span>
        <span class="keyword">case</span> ex @ FatalError<a href="#3331008" title="Unit" id="3331009" class="delimiter">(</a><a href="../../../reflect/internal/FatalError.scala.html#441515" title="String" id="855821">msg</a><span class="delimiter">)</span> =&gt;
          <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><span title="Boolean(true)" class="keyword">true</span> <a href="../../../Boolean.scala.html#57825" title="(x: Boolean)Boolean">||</a> <a href="#855738" title="scala.tools.nsc.CompilerCommand">command</a>.<a href="../CompilerCommand.scala.html#600794" title="=&gt; scala.tools.nsc.Settings">settings</a>.<a href="../settings/ScalaSettings.scala.html#540057" title="=&gt; command.settings.BooleanSetting">debug</a>.<a href="../settings/MutableSettings.scala.html#541066" title="=&gt; Boolean">value</a><span class="delimiter">)</span> // !!!
            ex.<span title="()Unit">printStackTrace</span><span class="delimiter">(</span><span class="delimiter">)</span>;
        <a href="#855715" title="=&gt; scala.tools.nsc.reporters.ConsoleReporter">reporter</a>.<a href="../reporters/Reporter.scala.html#539685" title="(pos: scala.reflect.internal.util.Position, msg: String)Unit">error</a><span class="delimiter">(</span><span title="Null(null)" class="keyword">null</span>, <span title="String(&quot;fatal error: &quot;)" class="string">&quot;fatal error: &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#855821" title="String">msg</a><span class="delimiter">)</span>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="(args: Array[String])Unit" id="855719">main</a><span class="delimiter">(</span><a title="Array[String]" id="855824">args</a>: <a href="../../../Array.scala.html#174" title="Array[String]">Array</a><span class="delimiter">[</span>String<span class="delimiter">]</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    <a href="#855718" title="(args: Array[String])Unit">process</a><span class="delimiter">(</span><a href="#855824" title="Array[String]">args</a><span class="delimiter">)</span>
    /*sys.*/<a href="../../../Predef.scala.html#7482" title="(status: Int)Nothing">exit</a><span class="delimiter">(</span><span title="Int" class="keyword">if</span> <span class="delimiter">(</span><a href="#855715" title="=&gt; scala.tools.nsc.reporters.ConsoleReporter">reporter</a>.<a href="../reporters/Reporter.scala.html#539679" title="=&gt; Boolean">hasErrors</a><span class="delimiter">)</span> <span title="Int(1)" class="int">1</span> <span class="keyword">else</span> <span title="Int(0)" class="int">0</span><span class="delimiter">)</span>// Don't use sys yet as this has to run on 2.8.2 also.
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="(action: String =&gt; Unit)Unit" id="855720">loop</a><span class="delimiter">(</span><a title="String =&gt; Unit" id="855827">action</a>: <span class="delimiter">(</span>String<span class="delimiter">)</span> =&gt; Unit<span class="delimiter">)</span> <span class="delimiter">{</span>
    <a href="../../../Console.scala.html#136" title="Console.type">Console</a>.<a href="../../../Console.scala.html#63311" title="(obj: Any)Unit">print</a><span class="delimiter">(</span><a href="#855712" title="=&gt; String">prompt</a><span class="delimiter">)</span>
    <span class="keyword">try</span> <span class="delimiter">{</span>
      <span class="keyword">val</span> <a title="String" id="855828">line</a> = <a href="../../../Console.scala.html#136" title="Console.type">Console</a>.<a href="../../../Console.scala.html#63316" title="()String">readLine</a>
      <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#855828" title="String">line</a>.<span title="()Int">length</span><span class="delimiter">(</span><span class="delimiter">)</span> <a href="../../../Int.scala.html#57125" title="(x: Int)Boolean">&gt;</a> <span title="Int(0)" class="int">0</span><span class="delimiter">)</span> <span class="delimiter">{</span>
        <a href="../../../Function1.scala.html#58642" title="(v1: String)Unit">action</a><span class="delimiter">(</span><a href="#855828" title="String">line</a><span class="delimiter">)</span>
      <span class="delimiter">}</span>
      <a href="#855720" title="(action: String =&gt; Unit)Unit">loop</a><span class="delimiter">(</span><a href="#855827" title="String =&gt; Unit">action</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>
    <span class="keyword">catch</span> <span class="delimiter">{</span>
      <span class="keyword">case</span> <span title="Unit">_</span>: java.io.<span title="java.io.EOFException">EOFException</span> =&gt; //nop
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  /** Commands:
   *
   *  reload file1 ... fileN
   *  typeat file off1 off2?
   *  complete file off1 off2?
   */
  <span class="keyword">def</span> <a title="(comp: scala.tools.nsc.interactive.Global)Unit" id="855721">run</a><span class="delimiter">(</span><a title="scala.tools.nsc.interactive.Global" id="855819">comp</a>: <a href="Global.scala.html#35889" title="scala.tools.nsc.interactive.Global">Global</a><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="scala.tools.nsc.interactive.Response[Unit]" id="855836">reloadResult</a> = <span title="scala.tools.nsc.interactive.Response[Unit]" class="keyword">new</span> <a href="Response.scala.html#36348" title="scala.tools.nsc.interactive.Response[Unit]">Response</a><span class="delimiter">[</span>Unit<span class="delimiter">]</span>
    <span class="keyword">val</span> <a title="scala.tools.nsc.interactive.Response[comp.Tree]" id="855837">typeatResult</a> = <span title="scala.tools.nsc.interactive.Response[comp.Tree]" class="keyword">new</span> <a href="Response.scala.html#36348" title="scala.tools.nsc.interactive.Response[comp.Tree]">Response</a><span class="delimiter">[</span>comp.Tree<span class="delimiter">]</span>
    <span class="keyword">val</span> <a title="scala.tools.nsc.interactive.Response[List[comp.Member]]" id="855838">completeResult</a> = <span title="scala.tools.nsc.interactive.Response[List[comp.Member]]" class="keyword">new</span> <a href="Response.scala.html#36348" title="scala.tools.nsc.interactive.Response[List[comp.Member]]">Response</a><span class="delimiter">[</span>List<span class="delimiter">[</span>comp.Member<span class="delimiter">]</span><span class="delimiter">]</span>
    <span class="keyword">val</span> <a title="scala.tools.nsc.interactive.Response[comp.Tree]" id="855839">typedResult</a> = <span title="scala.tools.nsc.interactive.Response[comp.Tree]" class="keyword">new</span> <a href="Response.scala.html#36348" title="scala.tools.nsc.interactive.Response[comp.Tree]">Response</a><span class="delimiter">[</span>comp.Tree<span class="delimiter">]</span>
    <span class="keyword">val</span> <a title="scala.tools.nsc.interactive.Response[comp.Tree]" id="855840">structureResult</a> = <span title="scala.tools.nsc.interactive.Response[comp.Tree]" class="keyword">new</span> <a href="Response.scala.html#36348" title="scala.tools.nsc.interactive.Response[comp.Tree]">Response</a><span class="delimiter">[</span>comp.Tree<span class="delimiter">]</span>
    @deprecated<span class="delimiter">(</span><span class="string">&quot;SI-6458: Instrumentation logic will be moved out of the compiler.&quot;</span>,<span class="string">&quot;2.10.0&quot;</span><span class="delimiter">)</span>
    <span class="keyword">val</span> <a title="scala.tools.nsc.interactive.Response[(String, Array[Char])]" id="855841">instrumentedResult</a> = <span title="scala.tools.nsc.interactive.Response[(String, Array[Char])]" class="keyword">new</span> <a href="Response.scala.html#36348" title="scala.tools.nsc.interactive.Response[(String, Array[Char])]">Response</a><span class="delimiter">[</span><span class="delimiter">(</span>String, Array<span class="delimiter">[</span>Char<span class="delimiter">]</span><span class="delimiter">)</span><span class="delimiter">]</span>

    <span class="keyword">def</span> <a title="(file: String, off1: String, off2: String)scala.reflect.internal.util.RangePosition" id="855842">makePos</a><span class="delimiter">(</span><a title="String" id="855850">file</a>: <span title="String">String</span>, <a title="String" id="855851">off1</a>: <span title="String">String</span>, <a title="String" id="855852">off2</a>: <span title="String">String</span><span class="delimiter">)</span> = <span class="delimiter">{</span>
      <span class="keyword">val</span> <a title="scala.reflect.internal.util.BatchSourceFile" id="855853">source</a> = <a href="#855722" title="(name: String)scala.reflect.internal.util.BatchSourceFile">toSourceFile</a><span class="delimiter">(</span><a href="#855850" title="String">file</a><span class="delimiter">)</span>
      <a href="#855819" title="scala.tools.nsc.interactive.Global">comp</a>.<a href="RangePositions.scala.html#633499" title="(source: scala.reflect.internal.util.SourceFile, start: Int, point: Int, end: Int)scala.reflect.internal.util.RangePosition">rangePos</a><span class="delimiter">(</span><a href="#855853" title="scala.reflect.internal.util.BatchSourceFile">source</a>, <a href="../../../Predef.scala.html#7604" title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps">off1</a>.<a href="../../../collection/immutable/StringLike.scala.html#59873" title="=&gt; Int">toInt</a>, <a href="../../../Predef.scala.html#7604" title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps">off1</a>.<a href="../../../collection/immutable/StringLike.scala.html#59873" title="=&gt; Int">toInt</a>, <a href="../../../Predef.scala.html#7604" title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps">off2</a>.<a href="../../../collection/immutable/StringLike.scala.html#59873" title="=&gt; Int">toInt</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>

    <span class="keyword">def</span> <a title="(pos: scala.reflect.internal.util.Position)Unit" id="855843">doTypeAt</a><span class="delimiter">(</span><a title="scala.reflect.internal.util.Position" id="855870">pos</a>: <a href="../../../reflect/internal/util/Position.scala.html#22953" title="scala.reflect.internal.util.Position">Position</a><span class="delimiter">)</span> <span class="delimiter">{</span>
      <a href="#855819" title="scala.tools.nsc.interactive.Global">comp</a>.<a href="CompilerControl.scala.html#633433" title="(pos: comp.Position, response: comp.Response[comp.Tree])Unit">askTypeAt</a><span class="delimiter">(</span><a href="#855870" title="scala.reflect.internal.util.Position">pos</a>, <a href="#855837" title="scala.tools.nsc.interactive.Response[comp.Tree]">typeatResult</a><span class="delimiter">)</span>
      <a href="#855728" title="(svar: scala.tools.nsc.interactive.Response[comp.Tree])Option[Unit]">show</a><span title="Unit" class="delimiter">(</span><a href="#855837" title="scala.tools.nsc.interactive.Response[comp.Tree]">typeatResult</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>

    <span class="keyword">def</span> <a title="(pos: scala.reflect.internal.util.Position)Unit" id="855844">doComplete</a><span class="delimiter">(</span><a title="scala.reflect.internal.util.Position" id="855896">pos</a>: <a href="../../../reflect/internal/util/Position.scala.html#22953" title="scala.reflect.internal.util.Position">Position</a><span class="delimiter">)</span> <span class="delimiter">{</span>
      <a href="#855819" title="scala.tools.nsc.interactive.Global">comp</a>.<a href="CompilerControl.scala.html#633436" title="(pos: comp.Position, response: comp.Response[List[comp.Member]])Unit">askTypeCompletion</a><span class="delimiter">(</span><a href="#855896" title="scala.reflect.internal.util.Position">pos</a>, <a href="#855838" title="scala.tools.nsc.interactive.Response[List[comp.Member]]">completeResult</a><span class="delimiter">)</span>
      <a href="#855728" title="(svar: scala.tools.nsc.interactive.Response[List[comp.Member]])Option[Unit]">show</a><span title="Unit" class="delimiter">(</span><a href="#855838" title="scala.tools.nsc.interactive.Response[List[comp.Member]]">completeResult</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>

    <span class="keyword">def</span> <a title="(file: String)Unit" id="855845">doTypedTree</a><span class="delimiter">(</span><a title="String" id="855902">file</a>: <span title="String">String</span><span class="delimiter">)</span> <span class="delimiter">{</span>
      <a href="#855819" title="scala.tools.nsc.interactive.Global">comp</a>.<a href="CompilerControl.scala.html#633434" title="(source: scala.reflect.internal.util.SourceFile, forceReload: Boolean, response: comp.Response[comp.Tree])Unit">askType</a><span class="delimiter">(</span><a href="#855722" title="(name: String)scala.reflect.internal.util.BatchSourceFile">toSourceFile</a><span class="delimiter">(</span><a href="#855902" title="String">file</a><span class="delimiter">)</span>, <span title="Boolean(true)" class="keyword">true</span>, <a href="#855839" title="scala.tools.nsc.interactive.Response[comp.Tree]">typedResult</a><span class="delimiter">)</span>
      <a href="#855728" title="(svar: scala.tools.nsc.interactive.Response[comp.Tree])Option[Unit]">show</a><span title="Unit" class="delimiter">(</span><a href="#855839" title="scala.tools.nsc.interactive.Response[comp.Tree]">typedResult</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>

    <span class="keyword">def</span> <a title="(file: String)Unit" id="855846">doStructure</a><span class="delimiter">(</span><a title="String" id="855909">file</a>: <span title="String">String</span><span class="delimiter">)</span> <span class="delimiter">{</span>
      <a href="#855819" title="scala.tools.nsc.interactive.Global">comp</a>.<a href="CompilerControl.scala.html#633441" title="(source: scala.reflect.internal.util.SourceFile, keepLoaded: Boolean, response: comp.Response[comp.Tree])Unit">askParsedEntered</a><span class="delimiter">(</span><a href="#855722" title="(name: String)scala.reflect.internal.util.BatchSourceFile">toSourceFile</a><span class="delimiter">(</span><a href="#855909" title="String">file</a><span class="delimiter">)</span>, <span title="Boolean(false)" class="keyword">false</span>, <a href="#855840" title="scala.tools.nsc.interactive.Response[comp.Tree]">structureResult</a><span class="delimiter">)</span>
      <a href="#855728" title="(svar: scala.tools.nsc.interactive.Response[comp.Tree])Option[Unit]">show</a><span title="Unit" class="delimiter">(</span><a href="#855840" title="scala.tools.nsc.interactive.Response[comp.Tree]">structureResult</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>

    /** Write instrumented source file to disk.
     *  @param iFullName  The full name of the first top-level object in source
     *  @param iContents  An Array[Char] containing the instrumented source
     *  @return The name of the instrumented source file
     */
    @deprecated<span class="delimiter">(</span><span class="string">&quot;SI-6458: Instrumentation logic will be moved out of the compiler.&quot;</span>,<span class="string">&quot;2.10.0&quot;</span><span class="delimiter">)</span>
    <span class="keyword">def</span> <a title="(iFullName: String, suffix: String, iContents: Array[Char])String" id="855847">writeInstrumented</a><span class="delimiter">(</span><a title="String" id="855916">iFullName</a>: <span title="String">String</span>, <a title="String" id="855917">suffix</a>: <span title="String">String</span>, <a title="Array[Char]" id="855918">iContents</a>: <a href="../../../Array.scala.html#174" title="Array[Char]">Array</a><span class="delimiter">[</span>Char<span class="delimiter">]</span><span class="delimiter">)</span>: <span title="String">String</span> = <span class="delimiter">{</span>
      <span class="keyword">val</span> <a title="String" id="855919">iSimpleName</a> = <a href="../../../Predef.scala.html#7604" title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps">iFullName</a> <a href="../../../collection/IndexedSeqOptimized.scala.html#59163" title="(n: Int)String">drop</a> <span class="delimiter">(</span><span class="delimiter">(</span><a href="#855916" title="String">iFullName</a> <span title="(x$1: Int)Int">lastIndexOf</span> <span title="Int(46)" class="char">'.'</span><span class="delimiter">)</span> <a href="../../../Int.scala.html#57154" title="(x: Int)Int">+</a> <span title="Int(1)" class="int">1</span><span class="delimiter">)</span>
      <span class="keyword">val</span> <a title="String" id="855920">iSourceName</a> = <a href="#855919" title="String">iSimpleName</a> <span title="(x$1: Any)String">+</span> <a href="#855917" title="String">suffix</a>
      <span class="keyword">val</span> <a title="java.io.FileWriter" id="855921">ifile</a> = <span title="java.io.FileWriter" class="keyword">new</span> <span title="java.io.FileWriter">FileWriter</span><span class="delimiter">(</span><a href="#855920" title="String">iSourceName</a><span class="delimiter">)</span>
      <a href="#855921" title="java.io.FileWriter">ifile</a>.<span title="(x$1: Array[Char])Unit">write</span><span class="delimiter">(</span><a href="#855918" title="Array[Char]">iContents</a><span class="delimiter">)</span>
      <a href="#855921" title="java.io.FileWriter">ifile</a>.<span title="()Unit">close</span><span class="delimiter">(</span><span class="delimiter">)</span>
      <a href="#855920" title="String">iSourceName</a>
    <span class="delimiter">}</span>

    /** The method for implementing worksheet functionality.
     *  @param arguments  a file name, followed by optional command line arguments that are passed
     *                    to the compiler that processes the instrumented source.
     *  @param line       A line number that controls uop to which line results should be produced
     *                    If line = -1, results are produced for all expressions in the worksheet.
     *  @return           The generated file content containing original source in the left column
     *                    and outputs in the right column, or None if the presentation compiler
     *                    does not respond to askInstrumented.
     */
    @deprecated<span class="delimiter">(</span><span class="string">&quot;SI-6458: Instrumentation logic will be moved out of the compiler.&quot;</span>,<span class="string">&quot;2.10.0&quot;</span><span class="delimiter">)</span>
    <span class="keyword">def</span> <a title="(arguments: List[String], line: Int)Option[(String, String)]" id="855848">instrument</a><span class="delimiter">(</span><a title="List[String]" id="855973">arguments</a>: <a href="../../../collection/immutable/List.scala.html#11952" title="List[String]">List</a><span class="delimiter">[</span>String<span class="delimiter">]</span>, <a title="Int" id="855974">line</a>: <a href="../../../Int.scala.html#321" title="Int">Int</a><span class="delimiter">)</span>: <a href="../../../Option.scala.html#978" title="Option[(String, String)]">Option</a><span class="delimiter">[</span><span class="delimiter">(</span>String, String<span class="delimiter">)</span><span class="delimiter">]</span> = <span class="delimiter">{</span>
      <span class="keyword">val</span> <a title="scala.reflect.internal.util.BatchSourceFile" id="855975">source</a> = <a href="#855722" title="(name: String)scala.reflect.internal.util.BatchSourceFile">toSourceFile</a><span class="delimiter">(</span><a href="#855973" title="List[String]">arguments</a>.<a href="../../../collection/IterableLike.scala.html#58577" title="=&gt; String">head</a><span class="delimiter">)</span>
      // strip right hand side comment column and any trailing spaces from all lines
      <span class="keyword">val</span> <a title="Array[Char]" id="855976">strippedContents</a> = <a href="../scratchpad/SourceInserter.scala.html#41284" title="scala.tools.nsc.scratchpad.SourceInserter.type">SourceInserter</a>.<a href="../scratchpad/SourceInserter.scala.html#855979" title="(cs: Array[Char])Array[Char]">stripRight</a><span class="delimiter">(</span><a href="#855975" title="scala.reflect.internal.util.BatchSourceFile">source</a>.<a href="../../../reflect/internal/util/SourceFile.scala.html#523305" title="=&gt; Array[Char]">content</a><span class="delimiter">)</span>
      <span class="keyword">val</span> <a title="scala.reflect.internal.util.BatchSourceFile" id="855977">strippedSource</a> = <span title="scala.reflect.internal.util.BatchSourceFile" class="keyword">new</span> <a href="../../../reflect/internal/util/SourceFile.scala.html#22617" title="scala.reflect.internal.util.BatchSourceFile">BatchSourceFile</a><span class="delimiter">(</span><a href="#855975" title="scala.reflect.internal.util.BatchSourceFile">source</a>.<a href="../../../reflect/internal/util/SourceFile.scala.html#523297" title="=&gt; scala.reflect.io.AbstractFile">file</a>, <a href="#855976" title="Array[Char]">strippedContents</a><span class="delimiter">)</span>
      <a href="../../../Predef.scala.html#7514" title="(x: Any)Unit">println</a><span class="delimiter">(</span><span title="String(&quot;stripped source = &quot;)" class="string">&quot;stripped source = &quot;</span><span title="(x$1: Any)String">+</span><a href="#855977" title="scala.reflect.internal.util.BatchSourceFile">strippedSource</a><span title="(x$1: Any)String">+</span><span title="String(&quot;:&quot;)" class="string">&quot;:&quot;</span><span title="(x$1: Any)String">+</span><a href="../../../Predef.scala.html#7550" title="implicit scala.Predef.charArrayOps : (xs: Array[Char])scala.collection.mutable.ArrayOps[Char]">strippedContents</a>.<a href="../../../collection/TraversableOnce.scala.html#58284" title="=&gt; String">mkString</a><span class="delimiter">)</span>
      <a href="#855819" title="scala.tools.nsc.interactive.Global">comp</a>.<a href="CompilerControl.scala.html#633431" title="(sources: List[scala.reflect.internal.util.SourceFile], response: comp.Response[Unit])Unit">askReload</a><span class="delimiter">(</span><a href="../../../collection/immutable/List.scala.html#62451" title="(xs: scala.reflect.internal.util.BatchSourceFile*)List[scala.reflect.internal.util.BatchSourceFile]">List</a><span class="delimiter">(</span><a href="#855977" title="scala.reflect.internal.util.BatchSourceFile">strippedSource</a><span class="delimiter">)</span>, <a href="#855836" title="scala.tools.nsc.interactive.Response[Unit]">reloadResult</a><span class="delimiter">)</span>
      <a href="#855819" title="scala.tools.nsc.interactive.Global">comp</a>.<a href="CompilerControl.scala.html#633442" title="(source: scala.reflect.internal.util.SourceFile, line: Int, response: comp.Response[(String, Array[Char])])Unit">askInstrumented</a><span class="delimiter">(</span><a href="#855977" title="scala.reflect.internal.util.BatchSourceFile">strippedSource</a>, <a href="#855974" title="Int">line</a>, <a href="#855841" title="scala.tools.nsc.interactive.Response[(String, Array[Char])]">instrumentedResult</a><span class="delimiter">)</span>
      <a href="#855723" title="(svar: scala.tools.nsc.interactive.Response[(String, Array[Char])])(op: ((String, Array[Char])) =&gt; (String, String))Option[(String, String)]">using</a><span class="delimiter">(</span><a href="#855841" title="scala.tools.nsc.interactive.Response[(String, Array[Char])]">instrumentedResult</a><span class="delimiter">)</span> <a href="#856092" title="(String, Array[Char])" class="delimiter">{</a>
        <span class="keyword">case</span> <span class="delimiter">(</span><a href="../../../Tuple2.scala.html#60635" title="String" id="856095">iFullName</a>, <a href="../../../Tuple2.scala.html#60637" title="Array[Char]" id="856096">iContents</a><span class="delimiter">)</span> =&gt;
          <a href="../../../Predef.scala.html#7514" title="(x: Any)Unit">println</a><span class="delimiter">(</span><a href="../../../StringContext.scala.html#56629" title="(args: Any*)String">s</a>&quot;instrumented source $<a href="#856095" title="String">iFullName</a> = $<span class="delimiter">{</span><a href="../../../Predef.scala.html#7550" title="implicit scala.Predef.charArrayOps : (xs: Array[Char])scala.collection.mutable.ArrayOps[Char]">iContents</a>.<a href="../../../collection/TraversableOnce.scala.html#58284" title="=&gt; String">mkString</a><span class="delimiter">}</span><span class="string">&quot;</span><span class="delimiter">)</span>
          <span class="keyword">val</span> <a title="String" id="856097">iSourceName</a> = <a href="#855847" title="(iFullName: String, suffix: String, iContents: Array[Char])String">writeInstrumented</a><span class="delimiter">(</span><a href="#856095" title="String">iFullName</a>, <span title="String(&quot;$instrumented.scala&quot;)" class="string">&quot;$instrumented.scala&quot;</span>, <a href="#856096" title="Array[Char]">iContents</a><span class="delimiter">)</span>
          <span class="keyword">val</span> <a title="String" id="856098">sSourceName</a> = <a href="#855847" title="(iFullName: String, suffix: String, iContents: Array[Char])String">writeInstrumented</a><span class="delimiter">(</span><a href="#856095" title="String">iFullName</a>, <span title="String(&quot;$stripped.scala&quot;)" class="string">&quot;$stripped.scala&quot;</span>, <a href="#855976" title="Array[Char]">strippedContents</a><span class="delimiter">)</span>
          <a href="../../../Tuple2.scala.html#62849" title="(_1: String, _2: String)(String, String)" class="delimiter">(</a><a href="#856097" title="String">iSourceName</a>, <a href="#856098" title="String">sSourceName</a><span class="delimiter">)</span>
/*
 *           val vdirOpt = compileInstrumented(iSourceName, arguments.tail)
          runInstrumented(vdirOpt, iFullName, strippedSource.content)
 */
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>

    <a href="#855720" title="(action: String =&gt; Unit)Unit">loop</a> <span class="delimiter">{</span> <a title="String" id="856194">line</a> =&gt;
      <span class="delimiter">(</span><a href="#856194" title="String">line</a> <a href="../../../Predef.scala.html#7555" title="(xs: Array[String])scala.collection.mutable.ArrayOps[String]">split</a> <span title="String(&quot; &quot;)" class="string">&quot; &quot;</span><span class="delimiter">)</span>.<a href="../../../collection/TraversableOnce.scala.html#58263" title="=&gt; List[String]">toList</a> <span class="keyword">match</span> <span class="delimiter">{</span>
        <span class="keyword">case</span> <a href="../../../collection/immutable/List.scala.html#206583" title="String" id="3331089" class="string">&quot;reload&quot;</a> <a href="#3331022" title="Boolean" id="3331024">::</a> <a href="../../../collection/immutable/List.scala.html#206584" title="List[String]" id="856260">args</a> =&gt;
          <a href="#855819" title="scala.tools.nsc.interactive.Global">comp</a>.<a href="CompilerControl.scala.html#633431" title="(sources: List[scala.reflect.internal.util.SourceFile], response: comp.Response[Unit])Unit">askReload</a><span class="delimiter">(</span><a href="#856260" title="List[String]">args</a> <a href="../../../collection/TraversableLike.scala.html#58063" title="(f: String =&gt; scala.reflect.internal.util.BatchSourceFile)(implicit bf: scala.collection.generic.CanBuildFrom[List[String],scala.reflect.internal.util.BatchSourceFile,List[scala.reflect.internal.util.SourceFile]])List[scala.reflect.internal.util.SourceFile]">map</a> <a href="#855722" title="(name: String)scala.reflect.internal.util.BatchSourceFile">toSourceFile</a>, <a href="#855836" title="scala.tools.nsc.interactive.Response[Unit]">reloadResult</a><span class="delimiter">)</span>
          <a href="#855728" title="(svar: scala.tools.nsc.interactive.Response[Unit])Option[Unit]">show</a><span title="Unit" class="delimiter">(</span><a href="#855836" title="scala.tools.nsc.interactive.Response[Unit]">reloadResult</a><span class="delimiter">)</span>
        <span class="keyword">case</span> <a href="../../../collection/immutable/List.scala.html#206583" title="String" id="3331090" class="string">&quot;reloadAndAskType&quot;</a> :: <a href="../../../collection/immutable/List.scala.html#206583" title="String" id="856313">file</a> <a href="../../../collection/immutable/List.scala.html#206584" title="List[String]" id="3331033">::</a> <a href="../../../collection/immutable/List.scala.html#206583" title="String" id="856316">millis</a> <a href="../../../collection/immutable/List.scala.html#206584" title="List[String]" id="3331035">::</a> <a href="../../../collection/immutable/List.scala.html#206584" title="List[String]" id="3331091">Nil</a> =&gt;
          <a href="#855819" title="scala.tools.nsc.interactive.Global">comp</a>.<a href="CompilerControl.scala.html#633431" title="(sources: List[scala.reflect.internal.util.SourceFile], response: comp.Response[Unit])Unit">askReload</a><span class="delimiter">(</span><a href="../../../collection/immutable/List.scala.html#62451" title="(xs: scala.reflect.internal.util.BatchSourceFile*)List[scala.reflect.internal.util.BatchSourceFile]">List</a><span class="delimiter">(</span><a href="#855722" title="(name: String)scala.reflect.internal.util.BatchSourceFile">toSourceFile</a><span class="delimiter">(</span><a href="#856313" title="String">file</a><span class="delimiter">)</span><span class="delimiter">)</span>, <a href="#855836" title="scala.tools.nsc.interactive.Response[Unit]">reloadResult</a><span class="delimiter">)</span>
          <span title="Thread.type">Thread</span>.<span title="(x$1: Long)Unit">sleep</span><span class="delimiter">(</span><a href="../../../Predef.scala.html#7604" title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps">millis</a>.<a href="../../../Int.scala.html#57081" title="=&gt; Long">toInt</a><span class="delimiter">)</span>
          <a href="../../../Predef.scala.html#7514" title="(x: Any)Unit">println</a><span class="delimiter">(</span><span title="String(&quot;ask type now&quot;)" class="string">&quot;ask type now&quot;</span><span class="delimiter">)</span>
          <a href="#855819" title="scala.tools.nsc.interactive.Global">comp</a>.<a href="CompilerControl.scala.html#633434" title="(source: scala.reflect.internal.util.SourceFile, forceReload: Boolean, response: comp.Response[comp.Tree])Unit">askType</a><span class="delimiter">(</span><a href="#855722" title="(name: String)scala.reflect.internal.util.BatchSourceFile">toSourceFile</a><span class="delimiter">(</span><a href="#856313" title="String">file</a><span class="delimiter">)</span>, <span title="Boolean(false)" class="keyword">false</span>, <a href="#855839" title="scala.tools.nsc.interactive.Response[comp.Tree]">typedResult</a><span class="delimiter">)</span>
          <a href="#855839" title="scala.tools.nsc.interactive.Response[comp.Tree]">typedResult</a>.<a href="Response.scala.html#633703" title="=&gt; Either[comp.Tree,Throwable]">get</a>
        <span class="keyword">case</span> <a href="../../../collection/generic/SeqFactory.scala.html#59986" title="Option[List[String]]" id="3331109">List</a><span class="delimiter">(</span><a title="String" id="3331092" class="string">&quot;typed&quot;</a>, <a title="String" id="856345">file</a><span class="delimiter">)</span> =&gt;
          <a href="#855845" title="(file: String)Unit">doTypedTree</a><a href="#3331103" title="(x: Unit)Unit" class="delimiter">(</a><a href="#856345" title="String">file</a><span class="delimiter">)</span>
        <span class="keyword">case</span> <a href="../../../collection/generic/SeqFactory.scala.html#59986" title="Option[List[String]]" id="3331111">List</a><span class="delimiter">(</span><a title="String" id="3331093" class="string">&quot;typeat&quot;</a>, <a title="String" id="856354">file</a>, <a title="String" id="856355">off1</a>, <a title="String" id="856356">off2</a><span class="delimiter">)</span> =&gt;
          <a href="#855843" title="(pos: scala.reflect.internal.util.Position)Unit">doTypeAt</a><a href="#3331103" title="(x: Unit)Unit" class="delimiter">(</a><a href="#855842" title="(file: String, off1: String, off2: String)scala.reflect.internal.util.RangePosition">makePos</a><span class="delimiter">(</span><a href="#856354" title="String">file</a>, <a href="#856355" title="String">off1</a>, <a href="#856356" title="String">off2</a><span class="delimiter">)</span><span class="delimiter">)</span>
        <span class="keyword">case</span> <a href="../../../collection/generic/SeqFactory.scala.html#59986" title="Option[List[String]]" id="3331113">List</a><span class="delimiter">(</span><a title="String" id="3331094" class="string">&quot;typeat&quot;</a>, <a title="String" id="856365">file</a>, <a title="String" id="856366">off1</a><span class="delimiter">)</span> =&gt;
          <a href="#855843" title="(pos: scala.reflect.internal.util.Position)Unit">doTypeAt</a><a href="#3331103" title="(x: Unit)Unit" class="delimiter">(</a><a href="#855842" title="(file: String, off1: String, off2: String)scala.reflect.internal.util.RangePosition">makePos</a><span class="delimiter">(</span><a href="#856365" title="String">file</a>, <a href="#856366" title="String">off1</a>, <a href="#856366" title="String">off1</a><span class="delimiter">)</span><span class="delimiter">)</span>
        <span class="keyword">case</span> <a href="../../../collection/generic/SeqFactory.scala.html#59986" title="Option[List[String]]" id="3331115">List</a><span class="delimiter">(</span><a title="String" id="3331095" class="string">&quot;complete&quot;</a>, <a title="String" id="856375">file</a>, <a title="String" id="856376">off1</a>, <a title="String" id="856377">off2</a><span class="delimiter">)</span> =&gt;
          <a href="#855844" title="(pos: scala.reflect.internal.util.Position)Unit">doComplete</a><a href="#3331103" title="(x: Unit)Unit" class="delimiter">(</a><a href="#855842" title="(file: String, off1: String, off2: String)scala.reflect.internal.util.RangePosition">makePos</a><span class="delimiter">(</span><a href="#856375" title="String">file</a>, <a href="#856376" title="String">off1</a>, <a href="#856377" title="String">off2</a><span class="delimiter">)</span><span class="delimiter">)</span>
        <span class="keyword">case</span> <a href="../../../collection/generic/SeqFactory.scala.html#59986" title="Option[List[String]]" id="3331117">List</a><span class="delimiter">(</span><a title="String" id="3331096" class="string">&quot;complete&quot;</a>, <a title="String" id="856386">file</a>, <a title="String" id="856387">off1</a><span class="delimiter">)</span> =&gt;
          <a href="#855844" title="(pos: scala.reflect.internal.util.Position)Unit">doComplete</a><a href="#3331103" title="(x: Unit)Unit" class="delimiter">(</a><a href="#855842" title="(file: String, off1: String, off2: String)scala.reflect.internal.util.RangePosition">makePos</a><span class="delimiter">(</span><a href="#856386" title="String">file</a>, <a href="#856387" title="String">off1</a>, <a href="#856387" title="String">off1</a><span class="delimiter">)</span><span class="delimiter">)</span>
        <span class="keyword">case</span> <a href="../../../collection/immutable/List.scala.html#206583" title="String" id="3331097" class="string">&quot;instrument&quot;</a> :: <a href="../../../collection/immutable/List.scala.html#206584" title="List[String]" id="856390">arguments</a> =&gt;
          <a href="../../../Predef.scala.html#7514" title="(x: Any)Unit">println</a><a href="#3331103" title="(x: Unit)Unit" class="delimiter">(</a><a href="#855848" title="(arguments: List[String], line: Int)Option[(String, String)]">instrument</a><span class="delimiter">(</span><a href="#856390" title="List[String]">arguments</a>, -<span title="Int(-1)" class="int">1</span><span class="delimiter">)</span><span class="delimiter">)</span>
        <span class="keyword">case</span> <a href="../../../collection/immutable/List.scala.html#206583" title="String" id="3331098" class="string">&quot;instrumentTo&quot;</a> :: <a href="../../../collection/immutable/List.scala.html#206583" title="String" id="856397">line</a> <a href="../../../collection/immutable/List.scala.html#206584" title="List[String]" id="3331076">::</a> <a href="../../../collection/immutable/List.scala.html#206584" title="List[String]" id="856398">arguments</a> =&gt;
          <a href="../../../Predef.scala.html#7514" title="(x: Any)Unit">println</a><a href="#3331103" title="(x: Unit)Unit" class="delimiter">(</a><a href="#855848" title="(arguments: List[String], line: Int)Option[(String, String)]">instrument</a><span class="delimiter">(</span><a href="#856398" title="List[String]">arguments</a>, <a href="../../../Predef.scala.html#7604" title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps">line</a>.<a href="../../../collection/immutable/StringLike.scala.html#59873" title="=&gt; Int">toInt</a><span class="delimiter">)</span><span class="delimiter">)</span>
        <span class="keyword">case</span> <a href="../../../collection/generic/SeqFactory.scala.html#59986" title="Option[List[String]]" id="3331121">List</a><span class="delimiter">(</span><a title="String" id="3331099" class="string">&quot;quit&quot;</a><span class="delimiter">)</span> =&gt;
          <a href="#855819" title="scala.tools.nsc.interactive.Global">comp</a>.<a href="CompilerControl.scala.html#633444" title="()Unit">askShutdown</a><span class="delimiter">(</span><span class="delimiter">)</span>
          <a href="../../../Predef.scala.html#7482" title="(status: Int)Nothing">exit</a><span class="delimiter">(</span><span title="Int(1)" class="int">1</span><span class="delimiter">)</span> // Don't use sys yet as this has to run on 2.8.2 also.
        <span class="keyword">case</span> <a href="../../../collection/generic/SeqFactory.scala.html#59986" title="Option[List[String]]" id="3331123">List</a><span class="delimiter">(</span><a title="String" id="3331100" class="string">&quot;structure&quot;</a>, <a title="String" id="856422">file</a><span class="delimiter">)</span> =&gt;
          <a href="#855846" title="(file: String)Unit">doStructure</a><a href="#3331103" title="(x: Unit)Unit" class="delimiter">(</a><a href="#856422" title="String">file</a><span class="delimiter">)</span>
        <span class="keyword">case</span> _ =&gt;
          <a href="../../../Predef.scala.html#7512" title="(x: Any)Unit">print</a><a href="#3331103" title="(x: Unit)Unit" class="delimiter">(</a><a href="../../../Predef.scala.html#7604" title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps" class="string">&quot;&quot;&quot;Available commands:
                  | reload &lt;file_1&gt; ... &lt;file_n&gt;
                  | reloadAndAskType &lt;file&gt; &lt;sleep-ms&gt;
                  | typed &lt;file&gt;
                  | typeat &lt;file&gt; &lt;start-pos&gt; &lt;end-pos&gt;
                  | typeat &lt;file&gt; &lt;pos&gt;
                  | complete &lt;file&gt; &lt;start-pos&gt; &lt;end-pos&gt;
                  | compile &lt;file&gt; &lt;pos&gt;
                  | instrument &lt;file&gt; &lt;arg&gt;*
                  | instrumentTo &lt;line-num&gt; &lt;file&gt; &lt;arg&gt;*
                  | structure &lt;file&gt;
                  | quit
                  |&quot;&quot;&quot;</a>.<a href="../../../collection/immutable/StringLike.scala.html#59864" title="=&gt; String">stripMargin</a><span class="delimiter">)</span>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="(name: String)scala.reflect.internal.util.BatchSourceFile" id="855722">toSourceFile</a><span class="delimiter">(</span><a title="String" id="855854">name</a>: <span title="String">String</span><span class="delimiter">)</span> = <a href="../../../reflect/internal/util/SourceFile.scala.html#523302" title="(_file: scala.reflect.io.AbstractFile)scala.reflect.internal.util.BatchSourceFile" class="keyword">new</a> <a href="../../../reflect/internal/util/SourceFile.scala.html#22617" title="scala.reflect.internal.util.BatchSourceFile">BatchSourceFile</a><span class="delimiter">(</span><span title="scala.reflect.io.PlainFile" class="keyword">new</span> <a href="../io/package.scala.html#55777" title="scala.reflect.io.PlainFile">PlainFile</a><span class="delimiter">(</span><a href="../../../reflect/io/Path.scala.html#531010" title="implicit scala.reflect.io.Path.jfile2path : (jfile: java.io.File)scala.reflect.io.Path" class="keyword">new</a> java.io.<span title="java.io.File">File</span><span class="delimiter">(</span><a href="#855854" title="String">name</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>

  <span class="keyword">def</span> <a title="[T, U](svar: scala.tools.nsc.interactive.Response[T])(op: T =&gt; U)Option[U]" id="855723">using</a><span class="delimiter">[</span><a title="" id="855726">T</a>, <a title="" id="855727">U</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="scala.tools.nsc.interactive.Response[T]" id="855874">svar</a>: <a href="Response.scala.html#36348" title="scala.tools.nsc.interactive.Response[T]">Response</a><span class="delimiter">[</span>T<span class="delimiter">]</span><span class="delimiter">)</span><span class="delimiter">(</span><a title="T =&gt; U" id="855875">op</a>: T =&gt; U<span class="delimiter">)</span>: <a href="../../../Option.scala.html#978" title="Option[U]">Option</a><span class="delimiter">[</span>U<span class="delimiter">]</span> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="Option[U]" id="856433">res</a> = <a href="#855874" title="scala.tools.nsc.interactive.Response[T]">svar</a>.<a href="Response.scala.html#633703" title="=&gt; Either[T,Throwable]">get</a> <span class="keyword">match</span> <span class="delimiter">{</span>
      <span class="keyword">case</span> Left<a href="#3331334" title="Option[U]" id="3331335" class="delimiter">(</a><a href="../../../util/Either.scala.html#97650" title="T" id="856438">result</a><span class="delimiter">)</span> =&gt; <a href="../../../Option.scala.html#63128" title="(x: U)Some[U]">Some</a><a href="#3331338" title="(x: Option[U])Option[U]" class="delimiter">(</a><a href="../../../Function1.scala.html#58642" title="(v1: T)U">op</a><span class="delimiter">(</span><a href="#856438" title="T">result</a><span class="delimiter">)</span><span class="delimiter">)</span>
      <span class="keyword">case</span> Right<a href="#3331334" title="Option[U]" id="3331336" class="delimiter">(</a><a href="../../../util/Either.scala.html#97679" title="Throwable" id="856445">exc</a><span class="delimiter">)</span> =&gt; <a href="#856445" title="Throwable">exc</a>.<span title="()Unit">printStackTrace</span>; <a href="../../../Predef.scala.html#7514" title="(x: Any)Unit">println</a><span class="delimiter">(</span><span title="String(&quot;ERROR: &quot;)" class="string">&quot;ERROR: &quot;</span><span title="(x$1: Any)String">+</span><a href="#856445" title="Throwable">exc</a><span class="delimiter">)</span>; <a href="../../../Option.scala.html#1585" title="None.type">None</a>
    <span class="delimiter">}</span>
    <a href="#855874" title="scala.tools.nsc.interactive.Response[T]">svar</a>.<a href="Response.scala.html#633708" title="()Unit">clear</a><span class="delimiter">(</span><span class="delimiter">)</span>
    <a href="#856433" title="Option[U]">res</a>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="[T](svar: scala.tools.nsc.interactive.Response[T])Option[Unit]" id="855728">show</a><span class="delimiter">[</span><a title="" id="855730">T</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="scala.tools.nsc.interactive.Response[T]" id="855873">svar</a>: <a href="Response.scala.html#36348" title="scala.tools.nsc.interactive.Response[T]">Response</a><span class="delimiter">[</span>T<span class="delimiter">]</span><span class="delimiter">)</span> = <a href="#855723" title="(svar: scala.tools.nsc.interactive.Response[T])(op: T =&gt; Unit)Option[Unit]">using</a><span class="delimiter">(</span><a href="#855873" title="scala.tools.nsc.interactive.Response[T]">svar</a><span class="delimiter">)</span><span class="delimiter">(</span><a title="T" id="855887">res</a> =&gt; <a href="../../../Predef.scala.html#7514" title="(x: Any)Unit">println</a><span class="delimiter">(</span><span title="String(&quot;==&gt; &quot;)" class="string">&quot;==&gt; &quot;</span><span title="(x$1: Any)String">+</span><a href="#855887" title="T">res</a><span class="delimiter">)</span><span class="delimiter">)</span>
<span class="delimiter">}</span>

        </pre>
    </body>
</html>