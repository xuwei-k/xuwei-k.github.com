<?xml version="1.0" encoding="utf-8"?>
      <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <meta http-equiv="Expires" content="0" />
        <title>scala/tools/nsc/interactive/tests/core/CoreTestDefs.scala</title>
        <script type="text/javascript" src="../../../../../../jquery-all.js"></script>
        <script type="text/javascript" src="../../../../../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../../../../../style.css" title="Style"></link>
    </head>
    <body>
        <pre>
<span class="keyword">package</span> scala.tools.nsc
<span class="keyword">package</span> interactive
<span class="keyword">package</span> tests.core

<span class="keyword">import</span> scala.reflect.internal.util.Position
<span class="keyword">import</span> scala.tools.nsc.interactive.tests.core._

/** Set of core test definitions that are executed for each test run. */
<span class="keyword">private</span><span class="delimiter">[</span>tests<span class="delimiter">]</span> <span class="keyword">trait</span> <a title="trait CoreTestDefs extends Object with scala.tools.nsc.interactive.tests.core.PresentationCompilerRequestsWorkingMode" id="37001">CoreTestDefs</a>
	<a href="../../../../../Unit.scala.html#1515" title="Unit" class="keyword">extends</a> <a href="PresentationCompilerRequestsWorkingMode.scala.html#36959" title="scala.tools.nsc.interactive.tests.core.PresentationCompilerRequestsWorkingMode">PresentationCompilerRequestsWorkingMode</a> <span class="delimiter">{</span>

  <span class="keyword">import</span> scala.tools.nsc.interactive.Global

  /** Ask the presentation compiler for completion at all locations
   * (in all sources) where the defined `marker` is found. */
  <span class="keyword">class</span> <a title="class CompletionAction extends Object with scala.tools.nsc.interactive.tests.core.PresentationCompilerTestDef with scala.tools.nsc.interactive.tests.core.AskCompletionAt" id="863793">CompletionAction</a><a href="#863793" title="CoreTestDefs.this.CompletionAction" class="delimiter">(</a><span class="keyword">override</span> <span class="keyword">val</span> <a title="scala.tools.nsc.interactive.Global" id="863820">compiler</a>: <a href="../../Global.scala.html#35889" title="scala.tools.nsc.interactive.Global">Global</a><span class="delimiter">)</span>
    <span class="keyword">extends</span> <a href="PresentationCompilerTestDef.scala.html#36998" title="scala.tools.nsc.interactive.tests.core.PresentationCompilerTestDef">PresentationCompilerTestDef</a>
    <span class="keyword">with</span> <a href="AskCommand.scala.html#36839" title="scala.tools.nsc.interactive.tests.core.AskCompletionAt">AskCompletionAt</a> <span class="delimiter">{</span>

    <span class="keyword">def</span> <a title="(member: CompletionAction.this.compiler.Member)String" id="863815">memberPrinter</a><span class="delimiter">(</span><a title="CompletionAction.this.compiler.Member" id="868127">member</a>: compiler.<a href="../../CompilerControl.scala.html#633454" title="CompletionAction.this.compiler.Member">Member</a><span class="delimiter">)</span>: <span title="String">String</span> =
        <a href="../../../../../Predef.scala.html#7604" title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps" class="string">&quot;[accessible: %5s] &quot;</a>.<a href="../../../../../collection/immutable/StringLike.scala.html#59882" title="(args: Any*)String">format</a><span class="delimiter">(</span><a href="#868127" title="CompletionAction.this.compiler.Member">member</a>.<a href="../../CompilerControl.scala.html#846905" title="=&gt; Boolean">accessible</a><span class="delimiter">)</span> <span title="(x$1: Any)String">+</span> <span title="String(&quot;`&quot;)" class="string">&quot;`&quot;</span> <span title="(x$1: Any)String">+</span> <span class="delimiter">(</span><a href="#868127" title="CompletionAction.this.compiler.Member">member</a>.<a href="../../CompilerControl.scala.html#846903" title="=&gt; CompletionAction.this.compiler.Symbol">sym</a>.<a href="../../../../../reflect/internal/Symbols.scala.html#411507" title="()String">toString</a><span class="delimiter">(</span><span class="delimiter">)</span> <span title="(x$1: Any)String">+</span> <a href="#868127" title="CompletionAction.this.compiler.Member">member</a>.<a href="../../CompilerControl.scala.html#846904" title="=&gt; CompletionAction.this.compiler.Type">tpe</a>.<a href="../../../../../reflect/internal/Types.scala.html#408499" title="()String">toString</a><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span>.<span title="()String">trim</span><span class="delimiter">(</span><span class="delimiter">)</span> <span title="(x$1: Any)String">+</span> <span title="String(&quot;`&quot;)" class="string">&quot;`&quot;</span>

    <span class="keyword">override</span> <span class="keyword">def</span> <a title="()Unit" id="863816">runTest</a><span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span>
      <a href="../../../../../Function1.scala.html#58642" title="(v1: scala.tools.nsc.interactive.tests.core.TestMarker)(scala.reflect.internal.util.Position =&gt; scala.tools.nsc.interactive.Response[List[CompletionAction.this.compiler.Member]]) =&gt; (((scala.reflect.internal.util.Position, List[CompletionAction.this.compiler.Member]) =&gt; Unit) =&gt; Unit)">askAllSources</a><a href="../../../../../Function1.scala.html#58642" title="(v1: scala.reflect.internal.util.Position =&gt; scala.tools.nsc.interactive.Response[List[CompletionAction.this.compiler.Member]])((scala.reflect.internal.util.Position, List[CompletionAction.this.compiler.Member]) =&gt; Unit) =&gt; Unit" class="delimiter">(</a><a href="TestMarker.scala.html#37020" title="scala.tools.nsc.interactive.tests.core.CompletionMarker.type">CompletionMarker</a><span class="delimiter">)</span> <a href="../../../../../Function1.scala.html#58642" title="(v1: (scala.reflect.internal.util.Position, List[CompletionAction.this.compiler.Member]) =&gt; Unit)Unit" class="delimiter">{</a> <a title="scala.reflect.internal.util.Position" id="868179">pos</a> =&gt;
        <a href="AskCommand.scala.html#863819" title="(pos: scala.reflect.internal.util.Position)(implicit reporter: scala.tools.nsc.interactive.tests.core.Reporter)scala.tools.nsc.interactive.Response[List[CompletionAction.this.compiler.Member]]">askCompletionAt</a><a href="TestSettings.scala.html#863760" title="=&gt; scala.tools.nsc.interactive.tests.core.Reporter" class="delimiter">(</a><a href="#868179" title="scala.reflect.internal.util.Position">pos</a><span class="delimiter">)</span>
      <span class="delimiter">}</span> <span class="delimiter">{</span> <span class="delimiter">(</span><a title="scala.reflect.internal.util.Position" id="868183">pos</a>, <a title="List[CompletionAction.this.compiler.Member]" id="868184">members</a><span class="delimiter">)</span> =&gt;
        <a href="PresentationCompilerTestDef.scala.html#863809" title="(block: =&gt; Unit)(implicit reporter: scala.tools.nsc.interactive.tests.core.Reporter)Unit">withResponseDelimiter</a> <a href="TestSettings.scala.html#863760" title="=&gt; scala.tools.nsc.interactive.tests.core.Reporter" class="delimiter">{</a>
          <a href="TestSettings.scala.html#863760" title="=&gt; scala.tools.nsc.interactive.tests.core.Reporter">reporter</a>.<a href="Reporter.scala.html#863850" title="(msg: Any)Unit">println</a><span class="delimiter">(</span><span title="String(&quot;[response] aksTypeCompletion at &quot;)" class="string">&quot;[response] aksTypeCompletion at &quot;</span> <span title="(x$1: Any)String">+</span> <a href="PresentationCompilerTestDef.scala.html#863810" title="(pos: scala.reflect.internal.util.Position)String">format</a><span class="delimiter">(</span><a href="#868183" title="scala.reflect.internal.util.Position">pos</a><span class="delimiter">)</span><span class="delimiter">)</span>
          // we skip getClass because it changed signature between 1.5 and 1.6, so there is no
          // universal check file that we can provide for this to work
          <a href="TestSettings.scala.html#863760" title="=&gt; scala.tools.nsc.interactive.tests.core.Reporter">reporter</a>.<a href="Reporter.scala.html#863850" title="(msg: Any)Unit">println</a><span class="delimiter">(</span><a href="../../../../../Predef.scala.html#7604" title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps" class="string">&quot;retrieved %d members&quot;</a>.<a href="../../../../../collection/immutable/StringLike.scala.html#59882" title="(args: Any*)String">format</a><span class="delimiter">(</span><a href="#868184" title="List[CompletionAction.this.compiler.Member]">members</a>.<a href="../../../../../collection/SeqLike.scala.html#58788" title="=&gt; Int">size</a><span class="delimiter">)</span><span class="delimiter">)</span>
          <a href="#863820" title="=&gt; scala.tools.nsc.interactive.Global">compiler</a> <a href="../../CompilerControl.scala.html#633447" title="(op: () =&gt; Unit)Unit">ask</a> <span class="delimiter">{</span> <span class="delimiter">(</span><span class="delimiter">)</span> =&gt;
            <span class="keyword">val</span> <a title="List[CompletionAction.this.compiler.Member]" id="868194">filtered</a> = <a href="#868184" title="List[CompletionAction.this.compiler.Member]">members</a>.<a href="../../../../../collection/TraversableLike.scala.html#58074" title="(p: CompletionAction.this.compiler.Member =&gt; Boolean)List[CompletionAction.this.compiler.Member]">filterNot</a><span class="delimiter">(</span><a title="CompletionAction.this.compiler.Member" id="868198">member</a> =&gt; <a href="#868198" title="CompletionAction.this.compiler.Member">member</a>.<a href="../../CompilerControl.scala.html#846903" title="=&gt; CompletionAction.this.compiler.Symbol">sym</a>.<a href="../../../../../reflect/internal/Symbols.scala.html#411087" title="=&gt; member.sym.NameType">name</a>.<span title="()String">toString</span> <span title="(x$1: AnyRef)Boolean">==</span> <span title="String(&quot;getClass&quot;)" class="string">&quot;getClass&quot;</span> <a href="../../../../../Boolean.scala.html#57825" title="(x: Boolean)Boolean">||</a> <a href="#868198" title="CompletionAction.this.compiler.Member">member</a>.<a href="../../CompilerControl.scala.html#846903" title="=&gt; CompletionAction.this.compiler.Symbol">sym</a>.<a href="../../../../../reflect/internal/Symbols.scala.html#411201" title="=&gt; Boolean">isConstructor</a><span class="delimiter">)</span>
            <a href="TestSettings.scala.html#863760" title="=&gt; scala.tools.nsc.interactive.tests.core.Reporter">reporter</a>.<a href="Reporter.scala.html#863850" title="(msg: Any)Unit">println</a><span class="delimiter">(</span><a href="#868194" title="List[CompletionAction.this.compiler.Member]">filtered</a>.<a href="../../../../../collection/TraversableLike.scala.html#58063" title="(f: CompletionAction.this.compiler.Member =&gt; String)(implicit bf: scala.collection.generic.CanBuildFrom[List[CompletionAction.this.compiler.Member],String,List[String]])List[String]">map</a><a href="../../../../../collection/immutable/List.scala.html#62442" title="scala.collection.generic.CanBuildFrom[scala.collection.immutable.List.Coll,String,List[String]]" class="delimiter">(</a><a href="#863815" title="(member: CompletionAction.this.compiler.Member)String">memberPrinter</a><span class="delimiter">)</span>.<a href="../../../../../collection/SeqLike.scala.html#58869" title="(f: String =&gt; String)(implicit ord: scala.math.Ordering[String])List[String]">sortBy</a><a href="../../../../../math/Ordering.scala.html#82256" title="scala.math.Ordering.String.type" class="delimiter">(</a><a href="#868256" title="String">_</a>.<span title="()String">toString</span><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span>.<a href="../../../../../collection/TraversableOnce.scala.html#58283" title="(sep: String)String">mkString</a><span class="delimiter">(</span><span title="String(&quot;\n&quot;)" class="string">&quot;\n&quot;</span><span class="delimiter">)</span><span class="delimiter">)</span>
          <span class="delimiter">}</span>
        <span class="delimiter">}</span>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  /** Ask the presentation compiler for type info at all locations
   * (in all sources) where the defined `marker` is found. */
  <span class="keyword">class</span> <a title="class TypeAction extends Object with scala.tools.nsc.interactive.tests.core.PresentationCompilerTestDef with scala.tools.nsc.interactive.tests.core.AskTypeAt" id="863794">TypeAction</a><a href="#863794" title="CoreTestDefs.this.TypeAction" class="delimiter">(</a><span class="keyword">override</span> <span class="keyword">val</span> <a title="scala.tools.nsc.interactive.Global" id="863829">compiler</a>: <a href="../../Global.scala.html#35889" title="scala.tools.nsc.interactive.Global">Global</a><span class="delimiter">)</span>
    <span class="keyword">extends</span> <a href="PresentationCompilerTestDef.scala.html#36998" title="scala.tools.nsc.interactive.tests.core.PresentationCompilerTestDef">PresentationCompilerTestDef</a>
    <span class="keyword">with</span> <a href="AskCommand.scala.html#37040" title="scala.tools.nsc.interactive.tests.core.AskTypeAt">AskTypeAt</a> <span class="delimiter">{</span>

    <span class="keyword">override</span> <span class="keyword">def</span> <a title="()Unit" id="863825">runTest</a><span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span>
      <a href="../../../../../Function1.scala.html#58642" title="(v1: scala.tools.nsc.interactive.tests.core.TestMarker)(scala.reflect.internal.util.Position =&gt; scala.tools.nsc.interactive.Response[TypeAction.this.compiler.Tree]) =&gt; (((scala.reflect.internal.util.Position, TypeAction.this.compiler.Tree) =&gt; Unit) =&gt; Unit)">askAllSources</a><a href="../../../../../Function1.scala.html#58642" title="(v1: scala.reflect.internal.util.Position =&gt; scala.tools.nsc.interactive.Response[TypeAction.this.compiler.Tree])((scala.reflect.internal.util.Position, TypeAction.this.compiler.Tree) =&gt; Unit) =&gt; Unit" class="delimiter">(</a><a href="TestMarker.scala.html#36924" title="scala.tools.nsc.interactive.tests.core.TypeMarker.type">TypeMarker</a><span class="delimiter">)</span> <a href="../../../../../Function1.scala.html#58642" title="(v1: (scala.reflect.internal.util.Position, TypeAction.this.compiler.Tree) =&gt; Unit)Unit" class="delimiter">{</a> <a title="scala.reflect.internal.util.Position" id="868324">pos</a> =&gt;
        <a href="AskCommand.scala.html#863828" title="(pos: scala.reflect.internal.util.Position)(implicit reporter: scala.tools.nsc.interactive.tests.core.Reporter)scala.tools.nsc.interactive.Response[TypeAction.this.compiler.Tree]">askTypeAt</a><a href="TestSettings.scala.html#863760" title="=&gt; scala.tools.nsc.interactive.tests.core.Reporter" class="delimiter">(</a><a href="#868324" title="scala.reflect.internal.util.Position">pos</a><span class="delimiter">)</span>
      <span class="delimiter">}</span> <span class="delimiter">{</span> <span class="delimiter">(</span><a title="scala.reflect.internal.util.Position" id="868328">pos</a>, <a title="TypeAction.this.compiler.Tree" id="868329">tree</a><span class="delimiter">)</span> =&gt;
        <a href="PresentationCompilerTestDef.scala.html#863809" title="(block: =&gt; Unit)(implicit reporter: scala.tools.nsc.interactive.tests.core.Reporter)Unit">withResponseDelimiter</a> <a href="TestSettings.scala.html#863760" title="=&gt; scala.tools.nsc.interactive.tests.core.Reporter" class="delimiter">{</a>
          <a href="TestSettings.scala.html#863760" title="=&gt; scala.tools.nsc.interactive.tests.core.Reporter">reporter</a>.<a href="Reporter.scala.html#863850" title="(msg: Any)Unit">println</a><span class="delimiter">(</span><span title="String(&quot;[response] askTypeAt at &quot;)" class="string">&quot;[response] askTypeAt at &quot;</span> <span title="(x$1: Any)String">+</span> <a href="PresentationCompilerTestDef.scala.html#863810" title="(pos: scala.reflect.internal.util.Position)String">format</a><span class="delimiter">(</span><a href="#868328" title="scala.reflect.internal.util.Position">pos</a><span class="delimiter">)</span><span class="delimiter">)</span>
          <a href="#863829" title="=&gt; scala.tools.nsc.interactive.Global">compiler</a>.<a href="../../CompilerControl.scala.html#633447" title="(op: () =&gt; Unit)Unit">ask</a><span class="delimiter">(</span><span class="delimiter">(</span><span class="delimiter">)</span> =&gt; <a href="TestSettings.scala.html#863760" title="=&gt; scala.tools.nsc.interactive.tests.core.Reporter">reporter</a>.<a href="Reporter.scala.html#863850" title="(msg: Any)Unit">println</a><span class="delimiter">(</span><a href="#868329" title="TypeAction.this.compiler.Tree">tree</a><span class="delimiter">)</span><span class="delimiter">)</span>
        <span class="delimiter">}</span>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  /** Ask the presentation compiler for hyperlink at all locations
   * (in all sources) where the defined `marker` is found. */
  <span class="keyword">class</span> <a title="class HyperlinkAction extends Object with scala.tools.nsc.interactive.tests.core.PresentationCompilerTestDef with scala.tools.nsc.interactive.tests.core.AskTypeAt with scala.tools.nsc.interactive.tests.core.AskCompletionAt" id="863795">HyperlinkAction</a><a href="#863795" title="CoreTestDefs.this.HyperlinkAction" class="delimiter">(</a><span class="keyword">override</span> <span class="keyword">val</span> <a title="scala.tools.nsc.interactive.Global" id="863835">compiler</a>: <a href="../../Global.scala.html#35889" title="scala.tools.nsc.interactive.Global">Global</a><span class="delimiter">)</span>
    <span class="keyword">extends</span> <a href="PresentationCompilerTestDef.scala.html#36998" title="scala.tools.nsc.interactive.tests.core.PresentationCompilerTestDef">PresentationCompilerTestDef</a>
    <span class="keyword">with</span> <a href="AskCommand.scala.html#37040" title="scala.tools.nsc.interactive.tests.core.AskTypeAt">AskTypeAt</a>
    <span class="keyword">with</span> <a href="AskCommand.scala.html#36839" title="scala.tools.nsc.interactive.tests.core.AskCompletionAt">AskCompletionAt</a> <span class="delimiter">{</span>

    <span class="keyword">override</span> <span class="keyword">def</span> <a title="()Unit" id="863834">runTest</a><span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span>
      <a href="../../../../../Function1.scala.html#58642" title="(v1: scala.tools.nsc.interactive.tests.core.TestMarker)(scala.reflect.internal.util.Position =&gt; scala.tools.nsc.interactive.Response[HyperlinkAction.this.compiler.Tree]) =&gt; (((scala.reflect.internal.util.Position, HyperlinkAction.this.compiler.Tree) =&gt; Unit) =&gt; Unit)">askAllSources</a><a href="../../../../../Function1.scala.html#58642" title="(v1: scala.reflect.internal.util.Position =&gt; scala.tools.nsc.interactive.Response[HyperlinkAction.this.compiler.Tree])((scala.reflect.internal.util.Position, HyperlinkAction.this.compiler.Tree) =&gt; Unit) =&gt; Unit" class="delimiter">(</a><a href="TestMarker.scala.html#36981" title="scala.tools.nsc.interactive.tests.core.HyperlinkMarker.type">HyperlinkMarker</a><span class="delimiter">)</span> <a href="../../../../../Function1.scala.html#58642" title="(v1: (scala.reflect.internal.util.Position, HyperlinkAction.this.compiler.Tree) =&gt; Unit)Unit" class="delimiter">{</a> <a title="scala.reflect.internal.util.Position" id="868342">pos</a> =&gt;
        <a href="AskCommand.scala.html#863828" title="(pos: scala.reflect.internal.util.Position)(implicit reporter: scala.tools.nsc.interactive.tests.core.Reporter)scala.tools.nsc.interactive.Response[HyperlinkAction.this.compiler.Tree]">askTypeAt</a><span class="delimiter">(</span><a href="#868342" title="scala.reflect.internal.util.Position">pos</a><span class="delimiter">)</span><span class="delimiter">(</span><a href="Reporter.scala.html#36882" title="scala.tools.nsc.interactive.tests.core.NullReporter.type">NullReporter</a><span class="delimiter">)</span>
      <span class="delimiter">}</span> <span class="delimiter">{</span> <span class="delimiter">(</span><a title="scala.reflect.internal.util.Position" id="868348">pos</a>, <a title="HyperlinkAction.this.compiler.Tree" id="868349">tree</a><span class="delimiter">)</span> =&gt;
        <span title="Unit" class="keyword">if</span><span class="delimiter">(</span><a href="#868349" title="HyperlinkAction.this.compiler.Tree">tree</a>.<a href="../../../../../reflect/internal/Trees.scala.html#408577" title="=&gt; HyperlinkAction.this.compiler.Symbol">symbol</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="#863835" title="=&gt; scala.tools.nsc.interactive.Global">compiler</a>.<a href="../../../../../reflect/internal/Symbols.scala.html#407184" title="=&gt; HyperlinkAction.this.compiler.NoSymbol">NoSymbol</a><span class="delimiter">)</span> <span class="delimiter">{</span>
          <a href="TestSettings.scala.html#863760" title="=&gt; scala.tools.nsc.interactive.tests.core.Reporter">reporter</a>.<a href="Reporter.scala.html#863850" title="(msg: Any)Unit">println</a><span class="delimiter">(</span><span title="String(&quot;\nNo symbol is associated with tree: &quot;)" class="string">&quot;\nNo symbol is associated with tree: &quot;</span><span title="(x$1: Any)String">+</span><a href="#868349" title="HyperlinkAction.this.compiler.Tree">tree</a><span class="delimiter">)</span>
        <span class="delimiter">}</span>
        <span class="keyword">else</span> <span class="delimiter">{</span>
          <a href="TestSettings.scala.html#863760" title="=&gt; scala.tools.nsc.interactive.tests.core.Reporter">reporter</a>.<a href="Reporter.scala.html#863850" title="(msg: Any)Unit">println</a><span class="delimiter">(</span><span title="String(&quot;\naskHyperlinkPos for `&quot;)" class="string">&quot;\naskHyperlinkPos for `&quot;</span> <span title="(x$1: Any)String">+</span> <a href="#868349" title="HyperlinkAction.this.compiler.Tree">tree</a>.<a href="../../../../../reflect/internal/Trees.scala.html#408577" title="=&gt; HyperlinkAction.this.compiler.Symbol">symbol</a>.<a href="../../../../../reflect/internal/Symbols.scala.html#411087" title="=&gt; HyperlinkAction.this.compiler.Symbol#NameType">name</a> <span title="(x$1: Any)String">+</span> <span title="String(&quot;` at &quot;)" class="string">&quot;` at &quot;</span> <span title="(x$1: Any)String">+</span> <a href="PresentationCompilerTestDef.scala.html#863810" title="(pos: scala.reflect.internal.util.Position)String">format</a><span class="delimiter">(</span><a href="#868348" title="scala.reflect.internal.util.Position">pos</a><span class="delimiter">)</span> <span title="(x$1: Any)String">+</span> <span title="String(&quot; &quot;)" class="string">&quot; &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#868348" title="scala.reflect.internal.util.Position">pos</a>.<a href="../../../../../reflect/internal/util/Position.scala.html#409665" title="=&gt; scala.reflect.internal.util.SourceFile">source</a>.<a href="../../../../../reflect/internal/util/SourceFile.scala.html#403754" title="=&gt; scala.reflect.io.AbstractFile">file</a>.<a href="../../../../../reflect/io/AbstractFile.scala.html#404301" title="=&gt; String">name</a><span class="delimiter">)</span>
          <span class="keyword">val</span> <a title="scala.tools.nsc.interactive.Response[scala.reflect.internal.util.Position]" id="868355">r</a> = <span title="scala.tools.nsc.interactive.Response[scala.reflect.internal.util.Position]" class="keyword">new</span> <a href="../../Response.scala.html#36348" title="scala.tools.nsc.interactive.Response[scala.reflect.internal.util.Position]">Response</a><span class="delimiter">[</span>Position<span class="delimiter">]</span>
          // `tree.symbol.sourceFile` was discovered to be null when testing using virtpatmat on the akka presentation test, where a position had shifted to point to `Int`
          // askHyperlinkPos for `Int` at (73,19) pi.scala --&gt; class Int in package scala has null sourceFile!
          <span class="keyword">val</span> <a title="String" id="868356">treePath</a> = <span title="String" class="keyword">if</span> <span class="delimiter">(</span><a href="#868349" title="HyperlinkAction.this.compiler.Tree">tree</a>.<a href="../../../../../reflect/internal/Trees.scala.html#408577" title="=&gt; HyperlinkAction.this.compiler.Symbol">symbol</a>.<a href="../../../../../reflect/internal/Symbols.scala.html#411483" title="=&gt; scala.reflect.io.AbstractFile">sourceFile</a> <span title="(x$1: AnyRef)Boolean">ne</span> <span title="Null(null)" class="keyword">null</span><span class="delimiter">)</span> <a href="#868349" title="HyperlinkAction.this.compiler.Tree">tree</a>.<a href="../../../../../reflect/internal/Trees.scala.html#408577" title="=&gt; HyperlinkAction.this.compiler.Symbol">symbol</a>.<a href="../../../../../reflect/internal/Symbols.scala.html#411483" title="=&gt; scala.reflect.io.AbstractFile">sourceFile</a>.<a href="../../../../../reflect/io/AbstractFile.scala.html#404302" title="=&gt; String">path</a> <span class="keyword">else</span> <span title="Null(null)" class="keyword">null</span>
          <span class="keyword">val</span> <a title="String" id="868357">treeName</a> = <span title="String" class="keyword">if</span> <span class="delimiter">(</span><a href="#868349" title="HyperlinkAction.this.compiler.Tree">tree</a>.<a href="../../../../../reflect/internal/Trees.scala.html#408577" title="=&gt; HyperlinkAction.this.compiler.Symbol">symbol</a>.<a href="../../../../../reflect/internal/Symbols.scala.html#411483" title="=&gt; scala.reflect.io.AbstractFile">sourceFile</a> <span title="(x$1: AnyRef)Boolean">ne</span> <span title="Null(null)" class="keyword">null</span><span class="delimiter">)</span> <a href="#868349" title="HyperlinkAction.this.compiler.Tree">tree</a>.<a href="../../../../../reflect/internal/Trees.scala.html#408577" title="=&gt; HyperlinkAction.this.compiler.Symbol">symbol</a>.<a href="../../../../../reflect/internal/Symbols.scala.html#411483" title="=&gt; scala.reflect.io.AbstractFile">sourceFile</a>.<a href="../../../../../reflect/io/AbstractFile.scala.html#404301" title="=&gt; String">name</a> <span class="keyword">else</span> <span title="Null(null)" class="keyword">null</span>
          <span class="keyword">val</span> <a title="Unit" id="868358">sourceFile</a> = <a href="../../../../../Predef.scala.html#7555" title="(xs: Array[scala.reflect.internal.util.SourceFile])scala.collection.mutable.ArrayOps[scala.reflect.internal.util.SourceFile]">sourceFiles</a>.<a href="../../../../../collection/IndexedSeqOptimized.scala.html#59126" title="(p: scala.reflect.internal.util.SourceFile =&gt; Boolean)Option[scala.reflect.internal.util.SourceFile]">find</a><a href="#3332056" title="(x: Unit)Unit" class="delimiter">(</a><a href="#868582" title="scala.reflect.internal.util.SourceFile">_</a>.<a href="../../../../../reflect/internal/util/SourceFile.scala.html#403765" title="=&gt; String">path</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="#868356" title="String">treePath</a><span class="delimiter">)</span> <span class="keyword">match</span> <span class="delimiter">{</span>
            <span class="keyword">case</span> Some<a href="#3332051" title="Unit" id="3332052" class="delimiter">(</a><a href="../../../../../Option.scala.html#63132" title="scala.reflect.internal.util.SourceFile" id="868589">source</a><span class="delimiter">)</span> =&gt;
              <a href="#863835" title="=&gt; scala.tools.nsc.interactive.Global">compiler</a>.<a href="../../CompilerControl.scala.html#633435" title="(sym: HyperlinkAction.this.compiler.Symbol, source: scala.reflect.internal.util.SourceFile, response: HyperlinkAction.this.compiler.Response[HyperlinkAction.this.compiler.Position])Unit">askLinkPos</a><span class="delimiter">(</span><a href="#868349" title="HyperlinkAction.this.compiler.Tree">tree</a>.<a href="../../../../../reflect/internal/Trees.scala.html#408577" title="=&gt; HyperlinkAction.this.compiler.Symbol">symbol</a>, <a href="#868589" title="scala.reflect.internal.util.SourceFile">source</a>, <a href="#868355" title="scala.tools.nsc.interactive.Response[scala.reflect.internal.util.Position]">r</a><span class="delimiter">)</span>
              <a href="#868355" title="scala.tools.nsc.interactive.Response[scala.reflect.internal.util.Position]">r</a>.<a href="../../Response.scala.html#633703" title="=&gt; Either[scala.reflect.internal.util.Position,Throwable]">get</a> <span class="keyword">match</span> <span class="delimiter">{</span>
                <span class="keyword">case</span> Left<a href="#3332042" title="Unit" id="3332043" class="delimiter">(</a><a href="../../../../../util/Either.scala.html#97650" title="scala.reflect.internal.util.Position" id="868596">pos</a><span class="delimiter">)</span> =&gt;
                  <span class="keyword">val</span> <a title="HyperlinkAction.this.compiler.Position" id="868597">resolvedPos</a> = <span title="HyperlinkAction.this.compiler.Position" class="keyword">if</span> <span class="delimiter">(</span><a href="#868349" title="HyperlinkAction.this.compiler.Tree">tree</a>.<a href="../../../../../reflect/internal/Trees.scala.html#408577" title="=&gt; HyperlinkAction.this.compiler.Symbol">symbol</a>.<a href="../../../../../reflect/internal/StdAttachments.scala.html#409602" title="=&gt; HyperlinkAction.this.compiler.Position">pos</a>.<a href="../../../../../reflect/internal/util/Position.scala.html#409666" title="=&gt; Boolean">isDefined</a><span class="delimiter">)</span> <a href="#868349" title="HyperlinkAction.this.compiler.Tree">tree</a>.<a href="../../../../../reflect/internal/Trees.scala.html#408577" title="=&gt; HyperlinkAction.this.compiler.Symbol">symbol</a>.<a href="../../../../../reflect/internal/StdAttachments.scala.html#409602" title="=&gt; HyperlinkAction.this.compiler.Position">pos</a> <span class="keyword">else</span> <a href="#868596" title="scala.reflect.internal.util.Position">pos</a>
                  <a href="PresentationCompilerTestDef.scala.html#863809" title="(block: =&gt; Unit)(implicit reporter: scala.tools.nsc.interactive.tests.core.Reporter)Unit">withResponseDelimiter</a> <a href="TestSettings.scala.html#863760" title="=&gt; scala.tools.nsc.interactive.tests.core.Reporter" class="delimiter">{</a>
                    <a href="TestSettings.scala.html#863760" title="=&gt; scala.tools.nsc.interactive.tests.core.Reporter">reporter</a>.<a href="Reporter.scala.html#863850" title="(msg: Any)Unit">println</a><span class="delimiter">(</span><span title="String(&quot;[response] found askHyperlinkPos for `&quot;)" class="string">&quot;[response] found askHyperlinkPos for `&quot;</span> <span title="(x$1: Any)String">+</span> <a href="#868349" title="HyperlinkAction.this.compiler.Tree">tree</a>.<a href="../../../../../reflect/internal/Trees.scala.html#408577" title="=&gt; HyperlinkAction.this.compiler.Symbol">symbol</a>.<a href="../../../../../reflect/internal/Symbols.scala.html#411087" title="=&gt; HyperlinkAction.this.compiler.Symbol#NameType">name</a> <span title="(x$1: Any)String">+</span> <span title="String(&quot;` at &quot;)" class="string">&quot;` at &quot;</span> <span title="(x$1: Any)String">+</span> <a href="PresentationCompilerTestDef.scala.html#863810" title="(pos: scala.reflect.internal.util.Position)String">format</a><span class="delimiter">(</span><a href="#868597" title="HyperlinkAction.this.compiler.Position">resolvedPos</a><span class="delimiter">)</span> <span title="(x$1: Any)String">+</span> <span title="String(&quot; &quot;)" class="string">&quot; &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#868349" title="HyperlinkAction.this.compiler.Tree">tree</a>.<a href="../../../../../reflect/internal/Trees.scala.html#408577" title="=&gt; HyperlinkAction.this.compiler.Symbol">symbol</a>.<a href="../../../../../reflect/internal/Symbols.scala.html#411483" title="=&gt; scala.reflect.io.AbstractFile">sourceFile</a>.<a href="../../../../../reflect/io/AbstractFile.scala.html#404301" title="=&gt; String">name</a><span class="delimiter">)</span>
                  <span class="delimiter">}</span>
                <span class="keyword">case</span> Right<a href="#3332042" title="Unit" id="3332044" class="delimiter">(</a><a href="../../../../../util/Either.scala.html#97679" title="Throwable" id="868605">ex</a><span class="delimiter">)</span> =&gt;
                  <a href="#868605" title="Throwable">ex</a>.<span title="()Unit">printStackTrace</span><a href="#3332046" title="(x: Unit)Unit" class="delimiter">(</a><span class="delimiter">)</span>
              <span class="delimiter">}</span>
            <span class="keyword">case</span> <a href="../../../../../Option.scala.html#1585" title="Unit" id="3332054">None</a> =&gt;
              <a href="TestSettings.scala.html#863760" title="=&gt; scala.tools.nsc.interactive.tests.core.Reporter">reporter</a>.<a href="Reporter.scala.html#863850" title="(msg: Any)Unit">println</a><a href="#3332056" title="(x: Unit)Unit" class="delimiter">(</a><span title="String(&quot;[error] could not locate sourcefile `&quot;)" class="string">&quot;[error] could not locate sourcefile `&quot;</span> <span title="(x$1: Any)String">+</span> <a href="#868357" title="String">treeName</a> <span title="(x$1: Any)String">+</span> <span title="String(&quot;`.&quot;)" class="string">&quot;`.&quot;</span> <span title="(x$1: Any)String">+</span>
                <span title="String(&quot;Hint: Does the looked up definition come form a binary?&quot;)" class="string">&quot;Hint: Does the looked up definition come form a binary?&quot;</span><span class="delimiter">)</span>
          <span class="delimiter">}</span>
        <span title="Unit" class="delimiter">}</span>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>
<span class="delimiter">}</span>
        </pre>
    </body>
</html>