<?xml version="1.0" encoding="utf-8"?>
      <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <meta http-equiv="Expires" content="0" />
        <title>scala/tools/nsc/dependencies/Files.scala</title>
        <script type="text/javascript" src="../../../../jquery-all.js"></script>
        <script type="text/javascript" src="../../../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../../../style.css" title="Style"></link>
    </head>
    <body>
        <pre>
<span class="keyword">package</span> scala.tools.nsc
<span class="keyword">package</span> dependencies

<span class="keyword">import</span> java.io.<span class="delimiter">{</span>InputStream, OutputStream, PrintStream, InputStreamReader, BufferedReader<span class="delimiter">}</span>
<span class="keyword">import</span> io.<span class="delimiter">{</span>AbstractFile, PlainFile, VirtualFile<span class="delimiter">}</span>

<span class="keyword">import</span> scala.collection._


<span class="keyword">trait</span> <a title="trait Files extends Object" id="33314">Files</a> <a href="../../../Unit.scala.html#1515" title="Unit" class="delimiter">{</a> self : SubComponent =&gt;

  <span class="keyword">class</span> <a title="class FileDependencies extends Object" id="620125">FileDependencies</a><a href="#620125" title="Files.this.FileDependencies" class="delimiter">(</a><span class="keyword">val</span> <a title="String" id="768958">classpath</a>: <span title="String">String</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span class="keyword">import</span> <a href="#620126" title="Files.this.FileDependencies.type">FileDependencies</a>._

    <span class="keyword">class</span> <a title="class Tracker extends scala.collection.mutable.OpenHashMap[scala.tools.nsc.io.AbstractFile,scala.collection.mutable.Set[scala.tools.nsc.io.AbstractFile]]" id="768943">Tracker</a> <a href="#768943" title="FileDependencies.this.Tracker" class="keyword">extends</a> mutable.<a href="../../../collection/mutable/OpenHashMap.scala.html#12459" title="scala.collection.mutable.OpenHashMap[scala.tools.nsc.io.AbstractFile,scala.collection.mutable.Set[scala.tools.nsc.io.AbstractFile]]">OpenHashMap</a><span class="delimiter">[</span>AbstractFile, mutable.Set<span class="delimiter">[</span>AbstractFile<span class="delimiter">]</span><span class="delimiter">]</span> <span class="delimiter">{</span>
      <span class="keyword">override</span> <span class="keyword">def</span> <a title="(key: scala.tools.nsc.io.AbstractFile)scala.collection.mutable.Set[scala.tools.nsc.io.AbstractFile]" id="769116">default</a><span class="delimiter">(</span><a title="scala.tools.nsc.io.AbstractFile" id="771409">key</a>: <a href="../../../reflect/io/AbstractFile.scala.html#23215" title="scala.tools.nsc.io.AbstractFile">AbstractFile</a><span class="delimiter">)</span> = <span class="delimiter">{</span>
        <a href="../../../collection/mutable/OpenHashMap.scala.html#291911" title="(key: scala.tools.nsc.io.AbstractFile, value: scala.collection.mutable.Set[scala.tools.nsc.io.AbstractFile])Unit" class="keyword">this</a><span class="delimiter">(</span><a href="#771409" title="scala.tools.nsc.io.AbstractFile">key</a><span class="delimiter">)</span> = <a href="../../../collection/mutable/HashSet.scala.html#125959" title="()scala.collection.mutable.HashSet[scala.tools.nsc.io.AbstractFile]" class="keyword">new</a> mutable.<a href="../../../collection/mutable/HashSet.scala.html#13053" title="scala.collection.mutable.HashSet[scala.tools.nsc.io.AbstractFile]">HashSet</a><span class="delimiter">[</span>AbstractFile<span class="delimiter">]</span>
        <a href="../../../collection/MapLike.scala.html#87535" title="(key: scala.tools.nsc.io.AbstractFile)scala.collection.mutable.Set[scala.tools.nsc.io.AbstractFile]" class="keyword">this</a><span class="delimiter">(</span><a href="#771409" title="scala.tools.nsc.io.AbstractFile">key</a><span class="delimiter">)</span>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>

    <span class="keyword">val</span> <a title="FileDependencies.this.Tracker" id="768944">dependencies</a> = <span title="FileDependencies.this.Tracker" class="keyword">new</span> <a href="#768943" title="FileDependencies.this.Tracker">Tracker</a>
    <span class="keyword">val</span> <a title="FileDependencies.this.Tracker" id="768946">targets</a> =  <span title="FileDependencies.this.Tracker" class="keyword">new</span> <a href="#768943" title="FileDependencies.this.Tracker">Tracker</a>

    <span class="keyword">def</span> <a title="=&gt; Boolean" id="768948">isEmpty</a> = <a href="#768944" title="=&gt; FileDependencies.this.Tracker">dependencies</a>.<a href="../../../collection/MapLike.scala.html#87531" title="=&gt; Boolean">isEmpty</a> <a href="../../../Boolean.scala.html#57826" title="(x: Boolean)Boolean">&amp;&amp;</a> <a href="#768946" title="=&gt; FileDependencies.this.Tracker">targets</a>.<a href="../../../collection/MapLike.scala.html#87531" title="=&gt; Boolean">isEmpty</a>

    <span class="keyword">def</span> <a title="(source: scala.tools.nsc.io.AbstractFile, result: scala.tools.nsc.io.AbstractFile)scala.collection.mutable.Set[scala.tools.nsc.io.AbstractFile]" id="768949">emits</a><span class="delimiter">(</span><a title="scala.tools.nsc.io.AbstractFile" id="770870">source</a>: <a href="../../../reflect/io/AbstractFile.scala.html#23215" title="scala.tools.nsc.io.AbstractFile">AbstractFile</a>, <a title="scala.tools.nsc.io.AbstractFile" id="770871">result</a>: <a href="../../../reflect/io/AbstractFile.scala.html#23215" title="scala.tools.nsc.io.AbstractFile">AbstractFile</a><span class="delimiter">)</span> =
      <a href="../../../collection/MapLike.scala.html#87535" title="(key: scala.tools.nsc.io.AbstractFile)scala.collection.mutable.Set[scala.tools.nsc.io.AbstractFile]">targets</a><span class="delimiter">(</span><a href="#770870" title="scala.tools.nsc.io.AbstractFile">source</a><span class="delimiter">)</span> <a href="../../../collection/mutable/SetLike.scala.html#90897" title="(elem: scala.reflect.io.AbstractFile)scala.collection.mutable.Set[scala.tools.nsc.io.AbstractFile]">+=</a> <a href="#770871" title="scala.tools.nsc.io.AbstractFile">result</a>
    <span class="keyword">def</span> <a title="(from: scala.tools.nsc.io.AbstractFile, on: scala.tools.nsc.io.AbstractFile)scala.collection.mutable.Set[scala.tools.nsc.io.AbstractFile]" id="768950">depends</a><span class="delimiter">(</span><a title="scala.tools.nsc.io.AbstractFile" id="770947">from</a>: <a href="../../../reflect/io/AbstractFile.scala.html#23215" title="scala.tools.nsc.io.AbstractFile">AbstractFile</a>, <a title="scala.tools.nsc.io.AbstractFile" id="770948">on</a>: <a href="../../../reflect/io/AbstractFile.scala.html#23215" title="scala.tools.nsc.io.AbstractFile">AbstractFile</a><span class="delimiter">)</span> =
      <a href="../../../collection/MapLike.scala.html#87535" title="(key: scala.tools.nsc.io.AbstractFile)scala.collection.mutable.Set[scala.tools.nsc.io.AbstractFile]">dependencies</a><span class="delimiter">(</span><a href="#770947" title="scala.tools.nsc.io.AbstractFile">from</a><span class="delimiter">)</span> <a href="../../../collection/mutable/SetLike.scala.html#90897" title="(elem: scala.reflect.io.AbstractFile)scala.collection.mutable.Set[scala.tools.nsc.io.AbstractFile]">+=</a> <a href="#770948" title="scala.tools.nsc.io.AbstractFile">on</a>

    <span class="keyword">def</span> <a title="(file: scala.tools.nsc.io.AbstractFile)FileDependencies.this.Tracker" id="768951">reset</a><span class="delimiter">(</span><a title="scala.tools.nsc.io.AbstractFile" id="770921">file</a>: <a href="../../../reflect/io/AbstractFile.scala.html#23215" title="scala.tools.nsc.io.AbstractFile">AbstractFile</a><span class="delimiter">)</span> = <a href="#768944" title="=&gt; FileDependencies.this.Tracker">dependencies</a> <a href="../../../collection/mutable/OpenHashMap.scala.html#291913" title="(key: scala.tools.nsc.io.AbstractFile)FileDependencies.this.dependencies.type">-=</a> <a href="#770921" title="scala.tools.nsc.io.AbstractFile">file</a>

    <span class="keyword">def</span> <a title="=&gt; FileDependencies.this.Tracker" id="768952">cleanEmpty</a> = <span class="delimiter">{</span>
      <a href="#768944" title="=&gt; FileDependencies.this.Tracker">dependencies</a> <a href="../../../collection/mutable/OpenHashMap.scala.html#291920" title="(f: ((scala.tools.nsc.io.AbstractFile, scala.collection.mutable.Set[scala.tools.nsc.io.AbstractFile])) =&gt; Unit)Unit">foreach</a> <a href="#771458" title="(scala.tools.nsc.io.AbstractFile, scala.collection.mutable.Set[scala.tools.nsc.io.AbstractFile])" class="delimiter">{</a><span class="keyword">case</span> <span class="delimiter">(</span><a href="../../../Tuple2.scala.html#60635" title="scala.tools.nsc.io.AbstractFile" id="3320890">_</a>, <a href="../../../Tuple2.scala.html#60637" title="scala.collection.mutable.Set[scala.tools.nsc.io.AbstractFile]" id="771461">value</a><span class="delimiter">)</span> =&gt;
                               <a href="#771461" title="scala.collection.mutable.Set[scala.tools.nsc.io.AbstractFile]">value</a> <a href="#3320892" title="(x: Unit)Unit">retain</a> <span class="delimiter">(</span><a title="scala.tools.nsc.io.AbstractFile" id="771464">x</a> =&gt; <a href="#771464" title="scala.tools.nsc.io.AbstractFile">x</a>.<a href="../../../reflect/io/AbstractFile.scala.html#404311" title="=&gt; Boolean">exists</a> <a href="../../../Boolean.scala.html#57826" title="(x: Boolean)Boolean">&amp;&amp;</a> <span class="delimiter">(</span><a href="#771464" title="scala.tools.nsc.io.AbstractFile">x</a> <span title="(x$1: AnyRef)Boolean">ne</span> <a href="#769070" title="=&gt; scala.reflect.io.VirtualFile">removedFile</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">}</span>
      <a href="#768944" title="=&gt; FileDependencies.this.Tracker">dependencies</a> <a href="../../../collection/mutable/OpenHashMap.scala.html#291925" title="(f: (scala.tools.nsc.io.AbstractFile, scala.collection.mutable.Set[scala.tools.nsc.io.AbstractFile]) =&gt; Boolean)FileDependencies.this.dependencies.type">retain</a> <span class="delimiter">(</span><span class="delimiter">(</span><a title="scala.tools.nsc.io.AbstractFile" id="771475">key</a>, <a title="scala.collection.mutable.Set[scala.tools.nsc.io.AbstractFile]" id="771476">value</a><span class="delimiter">)</span> =&gt; <a href="#771475" title="scala.tools.nsc.io.AbstractFile">key</a>.<a href="../../../reflect/io/AbstractFile.scala.html#404311" title="=&gt; Boolean">exists</a> <a href="../../../Boolean.scala.html#57826" title="(x: Boolean)Boolean">&amp;&amp;</a> <a href="../../../Boolean.scala.html#57822" title="=&gt; Boolean">!</a><a href="#771476" title="scala.collection.mutable.Set[scala.tools.nsc.io.AbstractFile]">value</a>.<a href="../../../collection/SetLike.scala.html#66447" title="=&gt; Boolean">isEmpty</a><span class="delimiter">)</span>
      <a href="#768946" title="=&gt; FileDependencies.this.Tracker">targets</a> <a href="../../../collection/mutable/OpenHashMap.scala.html#291920" title="(f: ((scala.tools.nsc.io.AbstractFile, scala.collection.mutable.Set[scala.tools.nsc.io.AbstractFile])) =&gt; Unit)Unit">foreach</a> <a href="#771501" title="(scala.tools.nsc.io.AbstractFile, scala.collection.mutable.Set[scala.tools.nsc.io.AbstractFile])" class="delimiter">{</a><span class="keyword">case</span> <span class="delimiter">(</span><a href="../../../Tuple2.scala.html#60635" title="scala.tools.nsc.io.AbstractFile" id="3320897">_</a>, <a href="../../../Tuple2.scala.html#60637" title="scala.collection.mutable.Set[scala.tools.nsc.io.AbstractFile]" id="771504">value</a><span class="delimiter">)</span> =&gt; <a href="#771504" title="scala.collection.mutable.Set[scala.tools.nsc.io.AbstractFile]">value</a> <a href="#3320899" title="(x: Unit)Unit">retain</a> <span class="delimiter">(</span><a href="#771507" title="scala.tools.nsc.io.AbstractFile">_</a>.<a href="../../../reflect/io/AbstractFile.scala.html#404311" title="=&gt; Boolean">exists</a><span class="delimiter">)</span><span class="delimiter">}</span>
      <a href="#768946" title="=&gt; FileDependencies.this.Tracker">targets</a> <a href="../../../collection/mutable/OpenHashMap.scala.html#291925" title="(f: (scala.tools.nsc.io.AbstractFile, scala.collection.mutable.Set[scala.tools.nsc.io.AbstractFile]) =&gt; Boolean)FileDependencies.this.targets.type">retain</a> <span class="delimiter">(</span><span class="delimiter">(</span><a title="scala.tools.nsc.io.AbstractFile" id="771518">key</a>, <a title="scala.collection.mutable.Set[scala.tools.nsc.io.AbstractFile]" id="771519">value</a><span class="delimiter">)</span> =&gt; <a href="#771518" title="scala.tools.nsc.io.AbstractFile">key</a>.<a href="../../../reflect/io/AbstractFile.scala.html#404311" title="=&gt; Boolean">exists</a> <a href="../../../Boolean.scala.html#57826" title="(x: Boolean)Boolean">&amp;&amp;</a> <a href="../../../Boolean.scala.html#57822" title="=&gt; Boolean">!</a><a href="#771519" title="scala.collection.mutable.Set[scala.tools.nsc.io.AbstractFile]">value</a>.<a href="../../../collection/SetLike.scala.html#66447" title="=&gt; Boolean">isEmpty</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>

    <span class="keyword">def</span> <a title="(f: scala.tools.nsc.io.AbstractFile)Boolean" id="768953">containsFile</a><span class="delimiter">(</span><a title="scala.tools.nsc.io.AbstractFile" id="770765">f</a>: <a href="../../../reflect/io/AbstractFile.scala.html#23215" title="scala.tools.nsc.io.AbstractFile">AbstractFile</a><span class="delimiter">)</span> = <a href="#768946" title="=&gt; FileDependencies.this.Tracker">targets</a>.<a href="../../../collection/MapLike.scala.html#87536" title="(key: scala.tools.nsc.io.AbstractFile)Boolean">contains</a><span class="delimiter">(</span><a href="#770765" title="scala.tools.nsc.io.AbstractFile">f</a>.<a href="../../../reflect/io/AbstractFile.scala.html#404307" title="=&gt; scala.reflect.io.AbstractFile">absolute</a><span class="delimiter">)</span>

    <span class="keyword">def</span> <a title="(maxDepth: Int)(scala.collection.mutable.HashSet[scala.tools.nsc.io.AbstractFile], scala.collection.Set[scala.tools.nsc.io.AbstractFile])" id="768954">invalidatedFiles</a><span class="delimiter">(</span><a title="Int" id="770579">maxDepth</a>: <a href="../../../Int.scala.html#321" title="Int">Int</a><span class="delimiter">)</span> = <span class="delimiter">{</span>
      <span class="keyword">val</span> <a title="scala.collection.mutable.HashSet[scala.tools.nsc.io.AbstractFile]" id="770580">direct</a> = <a href="../../../collection/mutable/HashSet.scala.html#125959" title="()scala.collection.mutable.HashSet[scala.tools.nsc.io.AbstractFile]" class="keyword">new</a> mutable.<a href="../../../collection/mutable/HashSet.scala.html#13053" title="scala.collection.mutable.HashSet[scala.tools.nsc.io.AbstractFile]">HashSet</a><span class="delimiter">[</span>AbstractFile<span class="delimiter">]</span>

      <span class="keyword">for</span> <span class="delimiter">(</span><span class="delimiter">(</span><a href="../../../Tuple2.scala.html#60635" title="scala.tools.nsc.io.AbstractFile" id="770610">file</a>, <a href="../../../Tuple2.scala.html#60637" title="scala.collection.mutable.Set[scala.tools.nsc.io.AbstractFile]" id="770611">products</a><span class="delimiter">)</span> &lt;- <a href="../../../collection/mutable/OpenHashMap.scala.html#291920" title="(f: ((scala.tools.nsc.io.AbstractFile, scala.collection.mutable.Set[scala.tools.nsc.io.AbstractFile])) =&gt; Unit)Unit">targets</a><span class="delimiter">)</span> <span class="delimiter">{</span>
        // This looks a bit odd. It may seem like one should invalidate a file
        // if *any* of its dependencies are older than it. The forall is there
        // to deal with the fact that a) Some results might have been orphaned
        // and b) Some files might not need changing.
        <a href="../../../collection/mutable/SetLike.scala.html#90896" title="(elem: scala.tools.nsc.io.AbstractFile, included: Boolean)Unit">direct</a><span class="delimiter">(</span><a href="#770610" title="scala.tools.nsc.io.AbstractFile">file</a><span class="delimiter">)</span> <a href="#3320905" title="(x: Unit)Unit">||=</a> <a href="#770611" title="scala.collection.mutable.Set[scala.tools.nsc.io.AbstractFile]">products</a>.<a href="../../../collection/IterableLike.scala.html#58565" title="(p: scala.tools.nsc.io.AbstractFile =&gt; Boolean)Boolean">forall</a><span class="delimiter">(</span><a title="scala.tools.nsc.io.AbstractFile" id="770640">d</a> =&gt; <a href="#770640" title="scala.tools.nsc.io.AbstractFile">d</a>.<a href="../../../reflect/io/AbstractFile.scala.html#404316" title="=&gt; Long">lastModified</a> <a href="../../../Long.scala.html#57478" title="(x: Long)Boolean">&lt;</a> <a href="#770610" title="scala.tools.nsc.io.AbstractFile">file</a>.<a href="../../../reflect/io/AbstractFile.scala.html#404316" title="=&gt; Long">lastModified</a><span class="delimiter">)</span>
      <span class="delimiter">}</span>

      <span class="keyword">val</span> <a title="scala.collection.Set[scala.tools.nsc.io.AbstractFile]" id="770581">indirect</a> = <a href="#768955" title="(depth: Int, changed: scala.collection.Set[scala.tools.nsc.io.AbstractFile])scala.collection.Set[scala.tools.nsc.io.AbstractFile]">dependentFiles</a><span class="delimiter">(</span><a href="#770579" title="Int">maxDepth</a>, <a href="#770580" title="scala.collection.mutable.HashSet[scala.tools.nsc.io.AbstractFile]">direct</a><span class="delimiter">)</span>

      <span class="keyword">for</span> <span class="delimiter">(</span><span class="delimiter">(</span><a href="../../../Tuple2.scala.html#60635" title="scala.tools.nsc.io.AbstractFile" id="770689">source</a>, <a href="../../../Tuple2.scala.html#60637" title="scala.collection.mutable.Set[scala.tools.nsc.io.AbstractFile]" id="770690">targets</a><span class="delimiter">)</span> &lt;- <a href="../../../collection/generic/FilterMonadic.scala.html#58171" title="(f: ((scala.tools.nsc.io.AbstractFile, scala.collection.mutable.Set[scala.tools.nsc.io.AbstractFile])) =&gt; scala.collection.mutable.Set[scala.tools.nsc.io.AbstractFile])Unit">targets</a>
           <span class="keyword">if</span> <a href="../../../collection/GenSetLike.scala.html#66403" title="(elem: scala.tools.nsc.io.AbstractFile)Boolean">direct</a><span class="delimiter">(</span><a href="#770689" title="scala.tools.nsc.io.AbstractFile">source</a><span class="delimiter">)</span> <a href="../../../Boolean.scala.html#57825" title="(x: Boolean)Boolean">||</a> <a href="../../../collection/GenSetLike.scala.html#66403" title="(elem: scala.tools.nsc.io.AbstractFile)Boolean">indirect</a><span class="delimiter">(</span><a href="#770689" title="scala.tools.nsc.io.AbstractFile">source</a><span class="delimiter">)</span> <a href="#3320911" title="(x: Boolean)Boolean">||</a> <span class="delimiter">(</span><a href="#770689" title="scala.tools.nsc.io.AbstractFile">source</a> <span title="(x$1: AnyRef)Boolean">eq</span> <a href="#769070" title="=&gt; scala.reflect.io.VirtualFile">removedFile</a><span class="delimiter">)</span><span class="delimiter">)</span> <a href="#3320917" title="(x: scala.collection.mutable.Set[scala.tools.nsc.io.AbstractFile])scala.collection.mutable.Set[scala.tools.nsc.io.AbstractFile]" class="delimiter">{</a>
        <a href="#770690" title="scala.collection.mutable.Set[scala.tools.nsc.io.AbstractFile]">targets</a> <a href="../../../collection/IterableLike.scala.html#58562" title="(f: scala.tools.nsc.io.AbstractFile =&gt; Unit)Unit">foreach</a> <span class="delimiter">(</span><a href="#770707" title="scala.tools.nsc.io.AbstractFile">_</a>.<a href="../../../reflect/io/AbstractFile.scala.html#404314" title="()Unit">delete</a><span class="delimiter">)</span>
        <a href="#770690" title="scala.collection.mutable.Set[scala.tools.nsc.io.AbstractFile]">targets</a> <a href="../../../collection/mutable/SetLike.scala.html#90898" title="(elem: scala.tools.nsc.io.AbstractFile)targets.type">-=</a> <a href="#770689" title="scala.tools.nsc.io.AbstractFile">source</a>
      <span class="delimiter">}</span>

      <a href="../../../Tuple2.scala.html#62849" title="(_1: scala.collection.mutable.HashSet[scala.tools.nsc.io.AbstractFile], _2: scala.collection.Set[scala.tools.nsc.io.AbstractFile])(scala.collection.mutable.HashSet[scala.tools.nsc.io.AbstractFile], scala.collection.Set[scala.tools.nsc.io.AbstractFile])" class="delimiter">(</a><a href="#770580" title="scala.collection.mutable.HashSet[scala.tools.nsc.io.AbstractFile]">direct</a>, <a href="#770581" title="scala.collection.Set[scala.tools.nsc.io.AbstractFile]">indirect</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>

    /** Return the set of files that depend on the given changed files.
     *  It computes the transitive closure up to the given depth.
     */
    <span class="keyword">def</span> <a title="(depth: Int, changed: scala.collection.Set[scala.tools.nsc.io.AbstractFile])scala.collection.Set[scala.tools.nsc.io.AbstractFile]" id="768955">dependentFiles</a><span class="delimiter">(</span><a title="Int" id="770646">depth</a>: <a href="../../../Int.scala.html#321" title="Int">Int</a>, <a title="scala.collection.Set[scala.tools.nsc.io.AbstractFile]" id="770647">changed</a>: <a href="../../../collection/Set.scala.html#4394" title="scala.collection.Set[scala.tools.nsc.io.AbstractFile]">Set</a><span class="delimiter">[</span>AbstractFile<span class="delimiter">]</span><span class="delimiter">)</span>: <a href="../../../collection/Set.scala.html#4394" title="scala.collection.Set[scala.tools.nsc.io.AbstractFile]">Set</a><span class="delimiter">[</span>AbstractFile<span class="delimiter">]</span> = <span class="delimiter">{</span>
      <span class="keyword">val</span> <a title="scala.collection.mutable.HashSet[scala.tools.nsc.io.AbstractFile]" id="771526">indirect</a> = <a href="../../../collection/mutable/HashSet.scala.html#125959" title="()scala.collection.mutable.HashSet[scala.tools.nsc.io.AbstractFile]" class="keyword">new</a> mutable.<a href="../../../collection/mutable/HashSet.scala.html#13053" title="scala.collection.mutable.HashSet[scala.tools.nsc.io.AbstractFile]">HashSet</a><span class="delimiter">[</span>AbstractFile<span class="delimiter">]</span>
      <span class="keyword">val</span> <a title="scala.collection.mutable.HashSet[scala.tools.nsc.io.AbstractFile]" id="771527">newInvalidations</a> = <a href="../../../collection/mutable/HashSet.scala.html#125959" title="()scala.collection.mutable.HashSet[scala.tools.nsc.io.AbstractFile]" class="keyword">new</a> mutable.<a href="../../../collection/mutable/HashSet.scala.html#13053" title="scala.collection.mutable.HashSet[scala.tools.nsc.io.AbstractFile]">HashSet</a><span class="delimiter">[</span>AbstractFile<span class="delimiter">]</span>

      <span class="keyword">def</span> <a title="(file: scala.tools.nsc.io.AbstractFile)Boolean" id="771528">invalid</a><span class="delimiter">(</span><a title="scala.tools.nsc.io.AbstractFile" id="771532">file</a>: <a href="../../../reflect/io/AbstractFile.scala.html#23215" title="scala.tools.nsc.io.AbstractFile">AbstractFile</a><span class="delimiter">)</span> =
        <a href="../../../collection/GenSetLike.scala.html#66403" title="(elem: scala.tools.nsc.io.AbstractFile)Boolean">indirect</a><span class="delimiter">(</span><a href="#771532" title="scala.tools.nsc.io.AbstractFile">file</a><span class="delimiter">)</span> <a href="../../../Boolean.scala.html#57825" title="(x: Boolean)Boolean">||</a> <a href="../../../collection/GenSetLike.scala.html#66403" title="(elem: scala.tools.nsc.io.AbstractFile)Boolean">changed</a><span class="delimiter">(</span><a href="#771532" title="scala.tools.nsc.io.AbstractFile">file</a><span class="delimiter">)</span> <a href="../../../Boolean.scala.html#57825" title="(x: Boolean)Boolean">||</a> <span class="delimiter">(</span><a href="#771532" title="scala.tools.nsc.io.AbstractFile">file</a> <span title="(x$1: AnyRef)Boolean">eq</span> <a href="#769070" title="=&gt; scala.reflect.io.VirtualFile">removedFile</a><span class="delimiter">)</span>

      <span class="keyword">def</span> <a title="(i: Int)Unit" id="771529">go</a><span class="delimiter">(</span><a title="Int" id="771555">i</a>: <a href="../../../Int.scala.html#321" title="Int">Int</a><span class="delimiter">)</span> : <a href="../../../Unit.scala.html#1515" title="Unit">Unit</a> = <span title="Unit" class="keyword">if</span><span class="delimiter">(</span><a href="#771555" title="Int">i</a> <a href="../../../Int.scala.html#57125" title="(x: Int)Boolean">&gt;</a> <span title="Int(0)" class="int">0</span><span class="delimiter">)</span> <span class="delimiter">{</span>
        <a href="#771527" title="scala.collection.mutable.HashSet[scala.tools.nsc.io.AbstractFile]">newInvalidations</a>.<a href="../../../collection/mutable/HashSet.scala.html#125968" title="()Unit">clear</a>
        <span class="keyword">for</span><span class="delimiter">(</span><span class="delimiter">(</span><a href="../../../Tuple2.scala.html#60635" title="scala.tools.nsc.io.AbstractFile" id="771577">target</a>, <a href="../../../Tuple2.scala.html#60637" title="scala.collection.mutable.Set[scala.tools.nsc.io.AbstractFile]" id="771578">depends</a><span class="delimiter">)</span> &lt;- <a href="../../../collection/generic/FilterMonadic.scala.html#58171" title="(f: ((scala.tools.nsc.io.AbstractFile, scala.collection.mutable.Set[scala.tools.nsc.io.AbstractFile])) =&gt; Unit)Unit">dependencies</a> <span class="keyword">if</span> <a href="#3320923" title="(x: Boolean)Boolean">!</a><a href="#771528" title="(file: scala.tools.nsc.io.AbstractFile)Boolean">invalid</a><span class="delimiter">(</span><a href="#771577" title="scala.tools.nsc.io.AbstractFile">target</a><span class="delimiter">)</span>;
            <a title="scala.tools.nsc.io.AbstractFile" id="771595">d</a> &lt;- <a href="../../../collection/IterableLike.scala.html#58562" title="(f: scala.tools.nsc.io.AbstractFile =&gt; Unit)Unit">depends</a><span class="delimiter">)</span>
          <a href="../../../collection/mutable/SetLike.scala.html#90896" title="(elem: scala.tools.nsc.io.AbstractFile, included: Boolean)Unit">newInvalidations</a><span class="delimiter">(</span><a href="#771577" title="scala.tools.nsc.io.AbstractFile">target</a><span class="delimiter">)</span> <a href="../../../Boolean.scala.html#57825" title="(x: Boolean)Boolean">||=</a> <a href="#771528" title="(file: scala.tools.nsc.io.AbstractFile)Boolean">invalid</a><span class="delimiter">(</span><a href="#771595" title="scala.tools.nsc.io.AbstractFile">d</a><span class="delimiter">)</span>

        <a href="#771526" title="scala.collection.mutable.HashSet[scala.tools.nsc.io.AbstractFile]">indirect</a> <a href="../../../collection/generic/Growable.scala.html#60003" title="(xs: scala.collection.TraversableOnce[scala.tools.nsc.io.AbstractFile])indirect.type">++=</a> <a href="#771527" title="scala.collection.mutable.HashSet[scala.tools.nsc.io.AbstractFile]">newInvalidations</a>
        <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="../../../Boolean.scala.html#57822" title="=&gt; Boolean">!</a><a href="#771527" title="scala.collection.mutable.HashSet[scala.tools.nsc.io.AbstractFile]">newInvalidations</a>.<a href="../../../collection/SetLike.scala.html#66447" title="=&gt; Boolean">isEmpty</a><span class="delimiter">)</span> <a href="#771529" title="(i: Int)Unit">go</a><span class="delimiter">(</span><a href="#771555" title="Int">i</a> <a href="../../../Int.scala.html#57161" title="(x: Int)Int">-</a> <span title="Int(1)" class="int">1</span><span class="delimiter">)</span>
      <span class="delimiter">}</span>

      <a href="#771529" title="(i: Int)Unit">go</a><span class="delimiter">(</span><a href="#770646" title="Int">depth</a><span class="delimiter">)</span>

      <a href="#771526" title="scala.collection.mutable.HashSet[scala.tools.nsc.io.AbstractFile]">indirect</a> <a href="../../../collection/generic/Shrinkable.scala.html#66942" title="(xs: scala.collection.TraversableOnce[scala.tools.nsc.io.AbstractFile])indirect.type">--=</a> <a href="#770647" title="scala.collection.Set[scala.tools.nsc.io.AbstractFile]">changed</a>
    <span class="delimiter">}</span>

    <span class="keyword">def</span> <a title="(file: scala.tools.nsc.io.AbstractFile, fromFile: scala.tools.nsc.io.AbstractFile =&gt; String)Unit" id="768956">writeTo</a><span class="delimiter">(</span><a title="scala.tools.nsc.io.AbstractFile" id="769074">file</a>: <a href="../../../reflect/io/AbstractFile.scala.html#23215" title="scala.tools.nsc.io.AbstractFile">AbstractFile</a>, <a title="scala.tools.nsc.io.AbstractFile =&gt; String" id="769075">fromFile</a>: AbstractFile =&gt; String<span class="delimiter">)</span>: <a href="../../../Unit.scala.html#1515" title="Unit">Unit</a> =
      <a href="#620128" title="(file: scala.tools.nsc.io.AbstractFile)(f: java.io.OutputStream =&gt; Unit)Unit">writeToFile</a><span class="delimiter">(</span><a href="#769074" title="scala.tools.nsc.io.AbstractFile">file</a><span class="delimiter">)</span><span class="delimiter">(</span><a title="java.io.OutputStream" id="771627">out</a> =&gt; <a href="#768957" title="(print: java.io.PrintStream, fromFile: scala.tools.nsc.io.AbstractFile =&gt; String)Unit">writeTo</a><span class="delimiter">(</span><span title="java.io.PrintStream" class="keyword">new</span> <span title="java.io.PrintStream">PrintStream</span><span class="delimiter">(</span><a href="#771627" title="java.io.OutputStream">out</a><span class="delimiter">)</span>, <a href="#769075" title="scala.tools.nsc.io.AbstractFile =&gt; String">fromFile</a><span class="delimiter">)</span><span class="delimiter">)</span>

    <span class="keyword">def</span> <a title="(print: java.io.PrintStream, fromFile: scala.tools.nsc.io.AbstractFile =&gt; String)Unit" id="768957">writeTo</a><span class="delimiter">(</span><a title="java.io.PrintStream" id="769063">print</a>: <span title="java.io.PrintStream">PrintStream</span>, <a title="scala.tools.nsc.io.AbstractFile =&gt; String" id="769064">fromFile</a>: AbstractFile =&gt; String<span class="delimiter">)</span>: <a href="../../../Unit.scala.html#1515" title="Unit">Unit</a> = <span class="delimiter">{</span>
      <span class="keyword">def</span> <a title="(tracker: FileDependencies.this.Tracker)Unit" id="771640">emit</a><span class="delimiter">(</span><a title="FileDependencies.this.Tracker" id="771641">tracker</a>: <a href="#768943" title="FileDependencies.this.Tracker">Tracker</a><span class="delimiter">)</span> =
        <span class="keyword">for</span> <span class="delimiter">(</span><span class="delimiter">(</span><a href="../../../Tuple2.scala.html#60635" title="scala.tools.nsc.io.AbstractFile" id="771664">f</a>, <a href="../../../Tuple2.scala.html#60637" title="scala.collection.mutable.Set[scala.tools.nsc.io.AbstractFile]" id="771665">ds</a><span class="delimiter">)</span> &lt;- <a href="../../../collection/mutable/OpenHashMap.scala.html#291920" title="(f: ((scala.tools.nsc.io.AbstractFile, scala.collection.mutable.Set[scala.tools.nsc.io.AbstractFile])) =&gt; Unit)Unit">tracker</a>; <a title="scala.tools.nsc.io.AbstractFile" id="771682">d</a> &lt;- <a href="../../../collection/IterableLike.scala.html#58562" title="(f: scala.tools.nsc.io.AbstractFile =&gt; Unit)Unit">ds</a><span class="delimiter">)</span> <a href="#769063" title="java.io.PrintStream">print</a>.<span title="(x$1: String)Unit">println</span><span class="delimiter">(</span><a href="../../../Function1.scala.html#58642" title="(v1: scala.tools.nsc.io.AbstractFile)String">fromFile</a><span class="delimiter">(</span><a href="#771664" title="scala.tools.nsc.io.AbstractFile">f</a><span class="delimiter">)</span> <span title="(x$1: Any)String">+</span> <a href="#769068" title="=&gt; String">arrow</a> <span title="(x$1: Any)String">+</span> <a href="../../../Function1.scala.html#58642" title="(v1: scala.tools.nsc.io.AbstractFile)String">fromFile</a><span class="delimiter">(</span><a href="#771682" title="scala.tools.nsc.io.AbstractFile">d</a><span class="delimiter">)</span><span class="delimiter">)</span>

      <a href="#768952" title="=&gt; FileDependencies.this.Tracker">cleanEmpty</a>
      <a href="#769063" title="java.io.PrintStream">print</a>.<span title="(x$1: String)Unit">println</span><span class="delimiter">(</span><a href="#768958" title="=&gt; String">classpath</a><span class="delimiter">)</span>
      <a href="#769063" title="java.io.PrintStream">print</a>.<span title="(x$1: String)Unit">println</span><span class="delimiter">(</span><a href="#769066" title="=&gt; String">separator</a><span class="delimiter">)</span>
      <a href="#771640" title="(tracker: FileDependencies.this.Tracker)Unit">emit</a><span class="delimiter">(</span><a href="#768944" title="=&gt; FileDependencies.this.Tracker">dependencies</a><span class="delimiter">)</span>
      <a href="#769063" title="java.io.PrintStream">print</a>.<span title="(x$1: String)Unit">println</span><span class="delimiter">(</span><a href="#769066" title="=&gt; String">separator</a><span class="delimiter">)</span>
      <a href="#771640" title="(tracker: FileDependencies.this.Tracker)Unit">emit</a><span class="delimiter">(</span><a href="#768946" title="=&gt; FileDependencies.this.Tracker">targets</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="keyword">object</span> <a title="Files.this.FileDependencies.type" id="620126">FileDependencies</a> <a href="#620127" title="Files.this.FileDependencies.type" class="delimiter">{</a>
    <span class="keyword">private</span> <span class="keyword">val</span> <a title="String" id="769066">separator</a>:<span title="String">String</span> = <span title="String(&quot;-------&quot;)" class="string">&quot;-------&quot;</span>
    <span class="keyword">private</span> <span class="keyword">val</span> <a title="String" id="769068">arrow</a> = <span title="String(&quot; -&gt; &quot;)" class="string">&quot; -&gt; &quot;</span>
    <span class="keyword">private</span> <span class="keyword">val</span> <a title="scala.reflect.io.VirtualFile" id="769070">removedFile</a> = <a href="../../../reflect/io/VirtualFile.scala.html#524124" title="(name: String)scala.reflect.io.VirtualFile" class="keyword">new</a> <a href="../io/package.scala.html#55783" title="scala.reflect.io.VirtualFile">VirtualFile</a><span class="delimiter">(</span><span title="String(&quot;removed&quot;)" class="string">&quot;removed&quot;</span><span class="delimiter">)</span>

    <span class="keyword">private</span> <span class="keyword">def</span> <a title="(l: String)Boolean" id="769072">validLine</a><span class="delimiter">(</span><a title="String" id="771703">l</a>: <span title="String">String</span><span class="delimiter">)</span> = <span class="delimiter">(</span><a href="#771703" title="String">l</a> <span title="(x$1: AnyRef)Boolean">!=</span> <span title="Null(null)" class="keyword">null</span><span class="delimiter">)</span> <a href="../../../Boolean.scala.html#57826" title="(x: Boolean)Boolean">&amp;&amp;</a> <span class="delimiter">(</span><a href="#771703" title="String">l</a> <span title="(x$1: AnyRef)Boolean">!=</span> <a href="#769066" title="=&gt; String">separator</a><span class="delimiter">)</span>

    <span class="keyword">def</span> <a title="(file: scala.tools.nsc.io.AbstractFile, toFile: String =&gt; scala.tools.nsc.io.AbstractFile)Option[Files.this.FileDependencies]" id="769073">readFrom</a><span class="delimiter">(</span><a title="scala.tools.nsc.io.AbstractFile" id="770556">file</a>: <a href="../../../reflect/io/AbstractFile.scala.html#23215" title="scala.tools.nsc.io.AbstractFile">AbstractFile</a>, <a title="String =&gt; scala.tools.nsc.io.AbstractFile" id="770557">toFile</a>: String =&gt; AbstractFile<span class="delimiter">)</span>: <a href="../../../Option.scala.html#978" title="Option[Files.this.FileDependencies]">Option</a><span class="delimiter">[</span>FileDependencies<span class="delimiter">]</span> =
      <a href="#620131" title="(file: scala.tools.nsc.io.AbstractFile)(f: java.io.InputStream =&gt; Some[Files.this.FileDependencies])Some[Files.this.FileDependencies]">readFromFile</a><span class="delimiter">(</span><a href="#770556" title="scala.tools.nsc.io.AbstractFile">file</a><span class="delimiter">)</span> <span class="delimiter">{</span> <a title="java.io.InputStream" id="771720">in</a> =&gt;
        <span class="keyword">val</span> <a title="java.io.BufferedReader" id="771721">reader</a> = <span title="(x$1: java.io.Reader)java.io.BufferedReader" class="keyword">new</span> <span title="java.io.BufferedReader">BufferedReader</span><span class="delimiter">(</span><span title="java.io.InputStreamReader" class="keyword">new</span> <span title="java.io.InputStreamReader">InputStreamReader</span><span class="delimiter">(</span><a href="#771720" title="java.io.InputStream">in</a><span class="delimiter">)</span><span class="delimiter">)</span>
        <span class="keyword">val</span> <a title="Files.this.FileDependencies" id="771722">it</a> = <span title="Files.this.FileDependencies" class="keyword">new</span> <a href="#620125" title="Files.this.FileDependencies">FileDependencies</a><span class="delimiter">(</span><a href="#771721" title="java.io.BufferedReader">reader</a>.<span title="()String">readLine</span><span class="delimiter">)</span>

        <span class="keyword">def</span> <a title="(valid: Boolean)(f: (scala.tools.nsc.io.AbstractFile, scala.tools.nsc.io.AbstractFile) =&gt; Unit)Boolean" id="771723">readLines</a><span class="delimiter">(</span><a title="Boolean" id="771730">valid</a>: <a href="../../../Boolean.scala.html#1425" title="Boolean">Boolean</a><span class="delimiter">)</span><span class="delimiter">(</span><a title="(scala.tools.nsc.io.AbstractFile, scala.tools.nsc.io.AbstractFile) =&gt; Unit" id="771731">f</a>: <span class="delimiter">(</span>AbstractFile, AbstractFile<span class="delimiter">)</span> =&gt; Unit<span class="delimiter">)</span>: <a href="../../../Boolean.scala.html#1425" title="Boolean">Boolean</a> = <span class="delimiter">{</span>
          <span class="keyword">var</span> <a title="Boolean" id="771732">continue</a> = <a href="#771730" title="Boolean">valid</a>
          <span class="keyword">var</span> <a title="String" id="771733">line</a>: <span title="String">String</span> = <span title="Null(null)" class="keyword">null</span>
          <span title="Unit" class="keyword">while</span> <span class="delimiter">(</span><a href="#771732" title="Boolean">continue</a> <a href="../../../Boolean.scala.html#57826" title="(x: Boolean)Boolean">&amp;&amp;</a> <span class="delimiter">{</span><a href="#771733" title="String">line</a> = <a href="#771721" title="java.io.BufferedReader">reader</a>.<span title="()String">readLine</span>; <a href="#769072" title="(l: String)Boolean">validLine</a><span class="delimiter">(</span><a href="#771733" title="String">line</a><span class="delimiter">)</span><span class="delimiter">}</span><span class="delimiter">)</span> <span class="delimiter">{</span>
            <a href="#771733" title="String">line</a>.<span title="(x$1: String)Array[String]">split</span><a href="#3320939" title="Array[String]" class="delimiter">(</a><a href="#769068" title="=&gt; String">arrow</a><span class="delimiter">)</span> <a href="#771734" title="()Unit" class="keyword">match</a> <span class="delimiter">{</span>
              <span class="keyword">case</span> <a href="../../../Array.scala.html#72325" title="Option[IndexedSeq[String]]" id="3320947">Array</a><span class="delimiter">(</span><a title="String" id="771744">from</a>, <a title="String" id="771745">on</a><span class="delimiter">)</span> =&gt; <a href="../../../Function2.scala.html#65848" title="(v1: scala.tools.nsc.io.AbstractFile, v2: scala.tools.nsc.io.AbstractFile)Unit">f</a><a href="#3320943" title="(x: Unit)Unit" class="delimiter">(</a><a href="../../../Function1.scala.html#58642" title="(v1: String)scala.tools.nsc.io.AbstractFile">toFile</a><span class="delimiter">(</span><a href="#771744" title="String">from</a><span class="delimiter">)</span>, <a href="../../../Function1.scala.html#58642" title="(v1: String)scala.tools.nsc.io.AbstractFile">toFile</a><span class="delimiter">(</span><a href="#771745" title="String">on</a><span class="delimiter">)</span><span class="delimiter">)</span>
              <span class="keyword">case</span> _ =&gt;
                <a href="../SubComponent.scala.html#620039" title="=&gt; scala.tools.nsc.Global">global</a>.<a href="../Global.scala.html#537494" title="(msg: String)Unit">inform</a><span class="delimiter">(</span><span title="String(&quot;Parse error: Unrecognised string &quot;)" class="string">&quot;Parse error: Unrecognised string &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#771733" title="String">line</a><span class="delimiter">)</span>
                <a href="#771732" title="Boolean">continue</a> = <span title="Boolean(false)" class="keyword">false</span>
            <span class="delimiter">}</span>
          <span class="delimiter">}</span>
          <a href="#771732" title="Boolean">continue</a>
        <span class="delimiter">}</span>

        <a href="#771721" title="java.io.BufferedReader">reader</a>.<span title="()String">readLine</span>

        <span class="keyword">val</span> <a title="Boolean" id="771724">dResult</a> = <a href="#771723" title="(valid: Boolean)(f: (scala.tools.nsc.io.AbstractFile, scala.tools.nsc.io.AbstractFile) =&gt; Unit)Boolean">readLines</a><span class="delimiter">(</span><span title="Boolean(true)" class="keyword">true</span><span class="delimiter">)</span><span class="delimiter">(</span>
          <a href="../../../Tuple2.scala.html#62849" title="(_1: scala.tools.nsc.io.AbstractFile, _2: scala.tools.nsc.io.AbstractFile)(scala.tools.nsc.io.AbstractFile, scala.tools.nsc.io.AbstractFile)" class="delimiter">(</a><a href="#771756" title="scala.tools.nsc.io.AbstractFile">_</a>, <a href="#771757" title="scala.tools.nsc.io.AbstractFile">_</a><span class="delimiter">)</span> <span class="keyword">match</span> <span class="delimiter">{</span>
            <span class="keyword">case</span> <span class="delimiter">(</span><a href="../../../Tuple2.scala.html#60635" title="scala.tools.nsc.io.AbstractFile" id="3320976" class="keyword">null</a>, <a href="../../../Tuple2.scala.html#60637" title="scala.tools.nsc.io.AbstractFile" id="3320970">_</a><span class="delimiter">)</span>          =&gt; // fromFile is removed, it's ok
            <span class="keyword">case</span> <span class="delimiter">(</span><a href="../../../Tuple2.scala.html#60635" title="scala.tools.nsc.io.AbstractFile" id="771768">fromFile</a>, <a href="../../../Tuple2.scala.html#60637" title="scala.tools.nsc.io.AbstractFile" id="3320977" class="keyword">null</a><span class="delimiter">)</span>   =&gt;
              // onFile is removed, should recompile fromFile
              <a href="#771722" title="Files.this.FileDependencies">it</a>.<a href="#768950" title="(from: scala.tools.nsc.io.AbstractFile, on: scala.tools.nsc.io.AbstractFile)scala.collection.mutable.Set[scala.tools.nsc.io.AbstractFile]">depends</a><a href="#3320979" title="(x: Unit)Unit" class="delimiter">(</a><a href="#771768" title="scala.tools.nsc.io.AbstractFile">fromFile</a>, <a href="#769070" title="=&gt; scala.reflect.io.VirtualFile">removedFile</a><span class="delimiter">)</span>
            <span class="keyword">case</span> <span class="delimiter">(</span><a href="../../../Tuple2.scala.html#60635" title="scala.tools.nsc.io.AbstractFile" id="771771">fromFile</a>, <a href="../../../Tuple2.scala.html#60637" title="scala.tools.nsc.io.AbstractFile" id="771772">onFile</a><span class="delimiter">)</span> =&gt; <a href="#771722" title="Files.this.FileDependencies">it</a>.<a href="#768950" title="(from: scala.tools.nsc.io.AbstractFile, on: scala.tools.nsc.io.AbstractFile)scala.collection.mutable.Set[scala.tools.nsc.io.AbstractFile]">depends</a><a href="#3320979" title="(x: Unit)Unit" class="delimiter">(</a><a href="#771771" title="scala.tools.nsc.io.AbstractFile">fromFile</a>, <a href="#771772" title="scala.tools.nsc.io.AbstractFile">onFile</a><span class="delimiter">)</span>
          <span class="delimiter">}</span><span class="delimiter">)</span>

        <a href="#771723" title="(valid: Boolean)(f: (scala.tools.nsc.io.AbstractFile, scala.tools.nsc.io.AbstractFile) =&gt; Unit)Boolean">readLines</a><span class="delimiter">(</span><a href="#771724" title="Boolean">dResult</a><span class="delimiter">)</span><span class="delimiter">(</span>
          <a href="../../../Tuple2.scala.html#62849" title="(_1: scala.tools.nsc.io.AbstractFile, _2: scala.tools.nsc.io.AbstractFile)(scala.tools.nsc.io.AbstractFile, scala.tools.nsc.io.AbstractFile)" class="delimiter">(</a><a href="#771774" title="scala.tools.nsc.io.AbstractFile">_</a>, <a href="#771775" title="scala.tools.nsc.io.AbstractFile">_</a><span class="delimiter">)</span> <span class="keyword">match</span> <span class="delimiter">{</span>
            <span class="keyword">case</span> <span class="delimiter">(</span><a href="../../../Tuple2.scala.html#60635" title="scala.tools.nsc.io.AbstractFile" id="3321005" class="keyword">null</a>, <a href="../../../Tuple2.scala.html#60637" title="scala.tools.nsc.io.AbstractFile" id="3321006" class="keyword">null</a><span class="delimiter">)</span>             =&gt;
              // source and target are all removed, it's ok
            <span class="keyword">case</span> <span class="delimiter">(</span><a href="../../../Tuple2.scala.html#60635" title="scala.tools.nsc.io.AbstractFile" id="3321007" class="keyword">null</a>, <a href="../../../Tuple2.scala.html#60637" title="scala.tools.nsc.io.AbstractFile" id="771786">targetFile</a><span class="delimiter">)</span>       =&gt;
              // source is removed, should remove relative target later
              <a href="#771722" title="Files.this.FileDependencies">it</a>.<a href="#768949" title="(source: scala.tools.nsc.io.AbstractFile, result: scala.tools.nsc.io.AbstractFile)scala.collection.mutable.Set[scala.tools.nsc.io.AbstractFile]">emits</a><a href="#3321010" title="(x: Unit)Unit" class="delimiter">(</a><a href="#769070" title="=&gt; scala.reflect.io.VirtualFile">removedFile</a>, <a href="#771786" title="scala.tools.nsc.io.AbstractFile">targetFile</a><span class="delimiter">)</span>
            <span class="keyword">case</span> <span class="delimiter">(</span><a href="../../../Tuple2.scala.html#60635" title="scala.tools.nsc.io.AbstractFile" id="3321001">_</a>, <a href="../../../Tuple2.scala.html#60637" title="scala.tools.nsc.io.AbstractFile" id="3321008" class="keyword">null</a><span class="delimiter">)</span>                =&gt;
              // it may has been cleaned outside, or removed during last phase
            <span class="keyword">case</span> <span class="delimiter">(</span><a href="../../../Tuple2.scala.html#60635" title="scala.tools.nsc.io.AbstractFile" id="771791">sourceFile</a>, <a href="../../../Tuple2.scala.html#60637" title="scala.tools.nsc.io.AbstractFile" id="771792">targetFile</a><span class="delimiter">)</span> =&gt; <a href="#771722" title="Files.this.FileDependencies">it</a>.<a href="#768949" title="(source: scala.tools.nsc.io.AbstractFile, result: scala.tools.nsc.io.AbstractFile)scala.collection.mutable.Set[scala.tools.nsc.io.AbstractFile]">emits</a><a href="#3321010" title="(x: Unit)Unit" class="delimiter">(</a><a href="#771791" title="scala.tools.nsc.io.AbstractFile">sourceFile</a>, <a href="#771792" title="scala.tools.nsc.io.AbstractFile">targetFile</a><span class="delimiter">)</span>
          <span class="delimiter">}</span><span class="delimiter">)</span>

        <a href="../../../Option.scala.html#63128" title="(x: Files.this.FileDependencies)Some[Files.this.FileDependencies]">Some</a><span class="delimiter">(</span><a href="#771722" title="Files.this.FileDependencies">it</a><span class="delimiter">)</span>
      <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="[T](file: scala.tools.nsc.io.AbstractFile)(f: java.io.OutputStream =&gt; T)T" id="620128">writeToFile</a><span class="delimiter">[</span><a title="" id="620130">T</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="scala.tools.nsc.io.AbstractFile" id="771619">file</a>: <a href="../../../reflect/io/AbstractFile.scala.html#23215" title="scala.tools.nsc.io.AbstractFile">AbstractFile</a><span class="delimiter">)</span><span class="delimiter">(</span><a title="java.io.OutputStream =&gt; T" id="771620">f</a>: OutputStream =&gt; T<span class="delimiter">)</span> : <a href="#620130" title="T">T</a> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="java.io.BufferedOutputStream" id="771798">out</a> = <a href="#771619" title="scala.tools.nsc.io.AbstractFile">file</a>.<a href="../../../reflect/io/AbstractFile.scala.html#404319" title="=&gt; java.io.BufferedOutputStream">bufferedOutput</a>
    <span class="keyword">try</span> <span class="delimiter">{</span>
      <a href="../../../Function1.scala.html#58642" title="(v1: java.io.OutputStream)T">f</a><span class="delimiter">(</span><a href="#771798" title="java.io.BufferedOutputStream">out</a><span class="delimiter">)</span>
    <span class="delimiter">}</span> <span class="keyword">finally</span> <span class="delimiter">{</span>
      <a href="#771798" title="java.io.BufferedOutputStream">out</a>.<span title="()Unit">close</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="[T](file: scala.tools.nsc.io.AbstractFile)(f: java.io.InputStream =&gt; T)T" id="620131">readFromFile</a><span class="delimiter">[</span><a title="" id="620133">T</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="scala.tools.nsc.io.AbstractFile" id="771712">file</a>: <a href="../../../reflect/io/AbstractFile.scala.html#23215" title="scala.tools.nsc.io.AbstractFile">AbstractFile</a><span class="delimiter">)</span><span class="delimiter">(</span><a title="java.io.InputStream =&gt; T" id="771713">f</a>: InputStream =&gt; T<span class="delimiter">)</span> : <a href="#620133" title="T">T</a> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="java.io.InputStream" id="771800">in</a> = <a href="#771712" title="scala.tools.nsc.io.AbstractFile">file</a>.<a href="../../../reflect/io/AbstractFile.scala.html#404317" title="=&gt; java.io.InputStream">input</a>
    <span class="keyword">try</span><span class="delimiter">{</span>
      <a href="../../../Function1.scala.html#58642" title="(v1: java.io.InputStream)T">f</a><span class="delimiter">(</span><a href="#771800" title="java.io.InputStream">in</a><span class="delimiter">)</span>
    <span class="delimiter">}</span> <span class="keyword">finally</span> <span class="delimiter">{</span>
      <a href="#771800" title="java.io.InputStream">in</a>.<span title="()Unit">close</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>
<span class="delimiter">}</span>

        </pre>
    </body>
</html>