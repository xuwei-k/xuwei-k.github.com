<?xml version="1.0" encoding="utf-8"?>
      <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <meta http-equiv="Expires" content="0" />
        <title>scala/tools/nsc/interpreter/ILoop.scala</title>
        <script type="text/javascript" src="../../../../jquery-all.js"></script>
        <script type="text/javascript" src="../../../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../../../style.css" title="Style"></link>
    </head>
    <body>
        <pre>
/* NSC -- new Scala compiler
 * Copyright 2005-2013 LAMP/EPFL
 * @author Alexander Spoon
 */

<span class="keyword">package</span> scala.tools.nsc
<span class="keyword">package</span> interpreter

<span class="keyword">import</span> <a href="../../../Predef.scala.html#805" title="type">Predef</a>.<span class="delimiter">{</span> println =&gt; _, _ <span class="delimiter">}</span>
<span class="keyword">import</span> java.io.<span class="delimiter">{</span> BufferedReader, FileReader <span class="delimiter">}</span>
<span class="keyword">import</span> java.util.concurrent.locks.ReentrantLock
<span class="keyword">import</span> scala.sys.process.Process
<span class="keyword">import</span> session._
<span class="keyword">import</span> scala.util.<a href="../../../util/Properties.scala.html#7130" title="scala.util.Properties.type">Properties</a>.<span class="delimiter">{</span> jdkHome, javaVersion <span class="delimiter">}</span>
<span class="keyword">import</span> scala.tools.util.<span class="delimiter">{</span> Javap <span class="delimiter">}</span>
<span class="keyword">import</span> scala.annotation.tailrec
<span class="keyword">import</span> scala.collection.mutable.ListBuffer
<span class="keyword">import</span> scala.concurrent.ops
<span class="keyword">import</span> util.<span class="delimiter">{</span> ClassPath, Exceptional, stringFromWriter, stringFromStream <span class="delimiter">}</span>
<span class="keyword">import</span> interpreter._
<span class="keyword">import</span> io.<span class="delimiter">{</span> File, Directory <span class="delimiter">}</span>
<span class="keyword">import</span> scala.reflect.<a href="../../../reflect/NameTransformer.scala.html#2381" title="scala.reflect.NameTransformer.type">NameTransformer</a>._
<span class="keyword">import</span> util.ScalaClassLoader
<span class="keyword">import</span> <a href="../util/ScalaClassLoader.scala.html#50234" title="scala.tools.nsc.util.ScalaClassLoader.type">ScalaClassLoader</a>._
<span class="keyword">import</span> scala.tools.util._
<span class="keyword">import</span> scala.<a href="../../../language.scala.html#1423" title="language.type">language</a>.<span class="delimiter">{</span>implicitConversions, existentials<span class="delimiter">}</span>
<span class="keyword">import</span> scala.reflect.<span class="delimiter">{</span>ClassTag, classTag<span class="delimiter">}</span>
<span class="keyword">import</span> scala.tools.reflect.<a href="../../reflect/StdTags.scala.html#51014" title="scala.tools.reflect.StdRuntimeTags.type">StdRuntimeTags</a>._

/** The Scala interactive shell.  It provides a read-eval-print loop
 *  around the Interpreter class.
 *  After instantiation, clients should call the main() method.
 *
 *  If no in0 is specified, then input will come from the console, and
 *  the class will attempt to provide input editing feature such as
 *  input history.
 *
 *  @author Moez A. Abdel-Gawad
 *  @author  Lex Spoon
 *  @version 1.2
 */
<span class="keyword">class</span> <a title="class ILoop extends Object with scala.tools.nsc.interpreter.LoopCommands with scala.tools.nsc.interpreter.ILoopInit" id="37218">ILoop</a><a href="#37218" title="scala.tools.nsc.interpreter.ILoop" class="delimiter">(</a><a title="Option[java.io.BufferedReader]" id="632954">in0</a>: <a href="../../../Option.scala.html#978" title="Option[java.io.BufferedReader]">Option</a><span class="delimiter">[</span>BufferedReader<span class="delimiter">]</span>, <span class="keyword">protected</span> <span class="keyword">val</span> <a title="scala.tools.nsc.interpreter.JPrintWriter" id="632955">out</a>: <span title="scala.tools.nsc.interpreter.JPrintWriter">JPrintWriter</span><span class="delimiter">)</span>
                <span class="keyword">extends</span> <span title="Object">AnyRef</span>
                   <span class="keyword">with</span> <a href="LoopCommands.scala.html#38889" title="scala.tools.nsc.interpreter.LoopCommands">LoopCommands</a>
                   <span class="keyword">with</span> <a href="ILoopInit.scala.html#38673" title="scala.tools.nsc.interpreter.ILoopInit">ILoopInit</a>
<span class="delimiter">{</span>
  <span class="keyword">def</span> <a title="(in0: java.io.BufferedReader, out: scala.tools.nsc.interpreter.JPrintWriter)scala.tools.nsc.interpreter.ILoop" id="632778" class="keyword">this</a><span class="delimiter">(</span><a title="java.io.BufferedReader" id="632952">in0</a>: <span title="java.io.BufferedReader">BufferedReader</span>, <a title="scala.tools.nsc.interpreter.JPrintWriter" id="632953">out</a>: <span title="scala.tools.nsc.interpreter.JPrintWriter">JPrintWriter</span><span class="delimiter">)</span> = <a href="#37218" title="ILoop.this.type" class="keyword">this</a><span class="delimiter">(</span><a href="../../../Option.scala.html#63128" title="(x: java.io.BufferedReader)Some[java.io.BufferedReader]">Some</a><span class="delimiter">(</span><a href="#632952" title="java.io.BufferedReader">in0</a><span class="delimiter">)</span>, <a href="#632953" title="scala.tools.nsc.interpreter.JPrintWriter">out</a><span class="delimiter">)</span>
  <span class="keyword">def</span> <a title="()scala.tools.nsc.interpreter.ILoop" id="632779" class="keyword">this</a><span class="delimiter">(</span><span class="delimiter">)</span> = <a href="#37218" title="ILoop.this.type" class="keyword">this</a><span class="delimiter">(</span><a href="../../../Option.scala.html#1585" title="None.type">None</a>, <span title="(x$1: java.io.OutputStream, x$2: Boolean)java.io.PrintWriter" class="keyword">new</span> <a href="package.scala.html#55728" title="java.io.PrintWriter">JPrintWriter</a><span class="delimiter">(</span><a href="../../../Console.scala.html#136" title="Console.type">Console</a>.<a href="../../../Console.scala.html#63284" title="=&gt; java.io.PrintStream">out</a>, <span title="Boolean(true)" class="keyword">true</span><span class="delimiter">)</span><span class="delimiter">)</span>

  <span class="keyword">var</span> <a title="scala.tools.nsc.interpreter.InteractiveReader" id="632781">in</a>: <a href="InteractiveReader.scala.html#39027" title="scala.tools.nsc.interpreter.InteractiveReader">InteractiveReader</a> = _   // the input stream from which commands come
  <span class="keyword">var</span> <a title="scala.tools.nsc.Settings" id="632784">settings</a>: <a href="../Settings.scala.html#27643" title="scala.tools.nsc.Settings">Settings</a> = _
  <span class="keyword">var</span> <a title="scala.tools.nsc.interpreter.IMain" id="632787">intp</a>: <a href="IMain.scala.html#38871" title="scala.tools.nsc.interpreter.IMain">IMain</a> = _

  @deprecated<span class="delimiter">(</span><span class="string">&quot;Use `intp` instead.&quot;</span>, <span class="string">&quot;2.9.0&quot;</span><span class="delimiter">)</span> <span class="keyword">def</span> <a title="=&gt; scala.tools.nsc.interpreter.IMain" id="632789">interpreter</a> = <a href="#632787" title="=&gt; scala.tools.nsc.interpreter.IMain">intp</a>
  @deprecated<span class="delimiter">(</span><span class="string">&quot;Use `intp` instead.&quot;</span>, <span class="string">&quot;2.9.0&quot;</span><span class="delimiter">)</span> <span class="keyword">def</span> <a title="(i: scala.tools.nsc.Interpreter)Unit" id="632790">interpreter_=</a> <span class="delimiter">(</span><a title="scala.tools.nsc.Interpreter" id="875597">i</a>: <a href="../Interpreter.scala.html#27727" title="scala.tools.nsc.Interpreter">Interpreter</a><span class="delimiter">)</span>: <a href="../../../Unit.scala.html#1515" title="Unit">Unit</a> = <a href="#632787" title="(x$1: scala.tools.nsc.interpreter.IMain)Unit">intp</a> = <a href="#875597" title="scala.tools.nsc.Interpreter">i</a>

  /** Having inherited the difficult &quot;var-ness&quot; of the repl instance,
   *  I'm trying to work around it by moving operations into a class from
   *  which it will appear a stable prefix.
   */
  <span class="keyword">private</span> <span class="keyword">def</span> <a title="[T](f: scala.tools.nsc.interpreter.IMain =&gt; T)T" id="632791">onIntp</a><span class="delimiter">[</span><a title="" id="632793">T</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="scala.tools.nsc.interpreter.IMain =&gt; T" id="875599">f</a>: IMain =&gt; T<span class="delimiter">)</span>: <a href="#632793" title="T">T</a> = <a href="../../../Function1.scala.html#58642" title="(v1: scala.tools.nsc.interpreter.IMain)T">f</a><span class="delimiter">(</span><a href="#632787" title="=&gt; scala.tools.nsc.interpreter.IMain">intp</a><span class="delimiter">)</span>

  <span class="keyword">class</span> <a title="class IMainOps[T &lt;: scala.tools.nsc.interpreter.IMain] extends Object" id="632794">IMainOps</a><span class="delimiter">[</span><a title=" &lt;: scala.tools.nsc.interpreter.IMain" id="632795">T</a> &lt;: IMain<span class="delimiter">]</span><a href="#632794" title="ILoop.this.IMainOps[T]" class="delimiter">(</a><span class="keyword">val</span> <a title="T" id="875457">intp</a>: <a href="#632795" title="T">T</a><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span class="keyword">import</span> <a href="#875457" title="=&gt; T">intp</a>._
    <span class="keyword">import</span> <a href="IMain.scala.html#632489" title="=&gt; scala.tools.nsc.Global">global</a>._

    <span class="keyword">def</span> <a title="(msg: =&gt; String)Unit" id="875453">printAfterTyper</a><span class="delimiter">(</span><a title="=&gt; String" id="875605">msg</a>: =&gt; String<span class="delimiter">)</span> =
      <a href="#875457" title="=&gt; T">intp</a>.<a href="IMain.scala.html#632478" title="=&gt; scala.tools.nsc.interpreter.ReplReporter">reporter</a> <a href="ReplReporter.scala.html#874465" title="(msg: String)Unit">printUntruncatedMessage</a> <a href="../Global.scala.html#537702" title="(op: =&gt; String)String">afterTyper</a><span class="delimiter">(</span><a href="#875605" title="=&gt; String">msg</a><span class="delimiter">)</span>

    /** Strip NullaryMethodType artifacts. */
    <span class="keyword">private</span> <span class="keyword">def</span> <a title="(sym: IMainOps.this.intp.global.Symbol)IMainOps.this.intp.global.Type" id="875454">replInfo</a><span class="delimiter">(</span><a title="IMainOps.this.intp.global.Symbol" id="875617">sym</a>: <a href="../../../reflect/internal/Symbols.scala.html#407146" title="IMainOps.this.intp.global.Symbol">Symbol</a><span class="delimiter">)</span> = <span class="delimiter">{</span>
      <a href="#875617" title="IMainOps.this.intp.global.Symbol">sym</a>.<a href="../../../reflect/internal/Symbols.scala.html#411367" title="=&gt; IMainOps.this.intp.global.Type">info</a> <span class="keyword">match</span> <span class="delimiter">{</span>
        <span class="keyword">case</span> NullaryMethodType<a href="#3332507" title="IMainOps.this.intp.global.Type" id="3332509" class="delimiter">(</a><a href="../../../reflect/internal/Types.scala.html#410746" title="IMainOps.this.intp.global.Type" id="875619">restpe</a><span class="delimiter">)</span> <span class="keyword">if</span> <a href="#875617" title="IMainOps.this.intp.global.Symbol">sym</a>.<a href="../../../reflect/internal/Symbols.scala.html#411197" title="=&gt; Boolean">isAccessor</a>  =&gt; <a href="#3332511" title="(x: IMainOps.this.intp.global.Type)IMainOps.this.intp.global.Type">restpe</a>
        <span class="keyword">case</span> info                                         =&gt; <a href="#3332511" title="(x: IMainOps.this.intp.global.Type)IMainOps.this.intp.global.Type">info</a>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>
    <span class="keyword">def</span> <a title="(sym: IMainOps.this.intp.global.Symbol)Unit" id="875455">echoTypeStructure</a><span class="delimiter">(</span><a title="IMainOps.this.intp.global.Symbol" id="875621">sym</a>: <a href="../../../reflect/internal/Symbols.scala.html#407146" title="IMainOps.this.intp.global.Symbol">Symbol</a><span class="delimiter">)</span> =
      <a href="#875453" title="(msg: =&gt; String)Unit">printAfterTyper</a><span class="delimiter">(</span><span title="String(&quot;&quot;)" class="string">&quot;&quot;</span> <span title="(x$1: Any)String">+</span> <a href="IMain.scala.html#632501" title="IMainOps.this.intp.deconstruct.type">deconstruct</a>.<a href="TypeStrings.scala.html#626635" title="(tp: IMainOps.this.intp.deconstruct.global.Type)String">show</a><span class="delimiter">(</span><a href="#875454" title="(sym: IMainOps.this.intp.global.Symbol)IMainOps.this.intp.global.Type">replInfo</a><span class="delimiter">(</span><a href="#875621" title="IMainOps.this.intp.global.Symbol">sym</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>

    <span class="keyword">def</span> <a title="(sym: IMainOps.this.intp.global.Symbol, verbose: Boolean)Unit" id="875456">echoTypeSignature</a><span class="delimiter">(</span><a title="IMainOps.this.intp.global.Symbol" id="875628">sym</a>: <a href="../../../reflect/internal/Symbols.scala.html#407146" title="IMainOps.this.intp.global.Symbol">Symbol</a>, <a title="Boolean" id="875629">verbose</a>: <a href="../../../Boolean.scala.html#1425" title="Boolean">Boolean</a><span class="delimiter">)</span> = <span class="delimiter">{</span>
      <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#875629" title="Boolean">verbose</a><span class="delimiter">)</span> <a href="#37218" title="ILoop.this.type">ILoop</a>.<span class="keyword">this</span>.<a href="#632830" title="(msg: String)Unit">echo</a><span class="delimiter">(</span><span title="String(&quot;// Type signature&quot;)" class="string">&quot;// Type signature&quot;</span><span class="delimiter">)</span>
      <a href="#875453" title="(msg: =&gt; String)Unit">printAfterTyper</a><span class="delimiter">(</span><span title="String(&quot;&quot;)" class="string">&quot;&quot;</span> <span title="(x$1: Any)String">+</span> <a href="#875454" title="(sym: IMainOps.this.intp.global.Symbol)IMainOps.this.intp.global.Type">replInfo</a><span class="delimiter">(</span><a href="#875628" title="IMainOps.this.intp.global.Symbol">sym</a><span class="delimiter">)</span><span class="delimiter">)</span>

      <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#875629" title="Boolean">verbose</a><span class="delimiter">)</span> <span class="delimiter">{</span>
        <a href="#37218" title="ILoop.this.type">ILoop</a>.<span class="keyword">this</span>.<a href="#632830" title="(msg: String)Unit">echo</a><span class="delimiter">(</span><span title="String(&quot;\n// Internal Type structure&quot;)" class="string">&quot;\n// Internal Type structure&quot;</span><span class="delimiter">)</span>
        <a href="#875455" title="(sym: IMainOps.this.intp.global.Symbol)Unit">echoTypeStructure</a><span class="delimiter">(</span><a href="#875628" title="IMainOps.this.intp.global.Symbol">sym</a><span class="delimiter">)</span>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>
  <span class="keyword">implicit</span> <span class="keyword">def</span> <a title="implicit scala.tools.nsc.interpreter.ILoop.stabilizeIMain : (intp: scala.tools.nsc.interpreter.IMain)ILoop.this.IMainOps[intp.type]" id="632796">stabilizeIMain</a><span class="delimiter">(</span><a title="scala.tools.nsc.interpreter.IMain" id="875444">intp</a>: <a href="IMain.scala.html#38871" title="scala.tools.nsc.interpreter.IMain">IMain</a><span class="delimiter">)</span> = <span title="ILoop.this.IMainOps[intp.type]" class="keyword">new</span> <a href="#632794" title="ILoop.this.IMainOps[intp.type]">IMainOps</a><span class="delimiter">[</span>intp.<span class="keyword">type</span><span class="delimiter">]</span><span class="delimiter">(</span><a href="#875444" title="scala.tools.nsc.interpreter.IMain">intp</a><span class="delimiter">)</span>

  /** TODO -
   *  -n normalize
   *  -l label with case class parameter names
   *  -c complete - leave nothing out
   */
  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(expr: String, verbose: Boolean)ILoop.this.Result" id="632797">typeCommandInternal</a><span class="delimiter">(</span><a title="String" id="875637">expr</a>: <span title="String">String</span>, <a title="Boolean" id="875638">verbose</a>: <a href="../../../Boolean.scala.html#1425" title="Boolean">Boolean</a><span class="delimiter">)</span>: <a href="LoopCommands.scala.html#632911" title="ILoop.this.Result">Result</a> = <span class="delimiter">{</span>
    <a href="#632791" title="(f: scala.tools.nsc.interpreter.IMain =&gt; ILoop.this.Result)ILoop.this.Result">onIntp</a> <span class="delimiter">{</span> <a title="scala.tools.nsc.interpreter.IMain" id="875651">intp</a> =&gt;
      <span class="keyword">val</span> <a title="intp.global.Symbol" id="875652">sym</a> = <a href="#875651" title="scala.tools.nsc.interpreter.IMain">intp</a>.<a href="IMain.scala.html#632600" title="(code: String)intp.global.Symbol">symbolOfLine</a><span class="delimiter">(</span><a href="#875637" title="String">expr</a><span class="delimiter">)</span>
      <span title="ILoop.this.Result" class="keyword">if</span> <span class="delimiter">(</span><a href="#875652" title="intp.global.Symbol">sym</a>.<a href="../../../reflect/internal/Symbols.scala.html#411310" title="=&gt; Boolean">exists</a><span class="delimiter">)</span> <a href="#632796" title="implicit scala.tools.nsc.interpreter.ILoop.stabilizeIMain : (intp: scala.tools.nsc.interpreter.IMain)ILoop.this.IMainOps[intp.type]">intp</a>.<a href="#875456" title="((sym: _2962.intp.global.Symbol, verbose: Boolean)Unit) forSome { val _2962: ILoop.this.IMainOps[intp.type] }">echoTypeSignature</a><a href="LoopCommands.scala.html#875673" title="implicit scala.tools.nsc.interpreter.LoopCommands.Result.resultFromUnit : (x: Unit)ILoop.this.Result" class="delimiter">(</a><a href="#875652" title="intp.global.Symbol">sym</a>, <a href="#875638" title="Boolean">verbose</a><span class="delimiter">)</span>
      <span class="keyword">else</span> <a href="LoopCommands.scala.html#875674" title="implicit scala.tools.nsc.interpreter.LoopCommands.Result.resultFromString : (msg: String)ILoop.this.Result" class="string">&quot;&quot;</a>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="keyword">override</span> <span class="keyword">def</span> <a title="(msg: String)Unit" id="632798">echoCommandMessage</a><span class="delimiter">(</span><a title="String" id="875687">msg</a>: <span title="String">String</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    <a href="#632787" title="=&gt; scala.tools.nsc.interpreter.IMain">intp</a>.<a href="IMain.scala.html#632478" title="=&gt; scala.tools.nsc.interpreter.ReplReporter">reporter</a> <a href="ReplReporter.scala.html#874465" title="(msg: String)Unit">printUntruncatedMessage</a> <a href="#875687" title="String">msg</a>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="=&gt; Boolean" id="632799">isAsync</a> = <a href="../../../Boolean.scala.html#57822" title="=&gt; Boolean">!</a><a href="#632784" title="=&gt; scala.tools.nsc.Settings">settings</a>.<a href="../settings/ScalaSettings.scala.html#540117" title="=&gt; scala.tools.nsc.Settings#BooleanSetting">Yreplsync</a>.<a href="../settings/MutableSettings.scala.html#541066" title="=&gt; Boolean">value</a>
  <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="scala.tools.nsc.interpreter.Power[scala.tools.nsc.interpreter.StdReplVals]" id="632801">power</a> = <span title="scala.tools.nsc.interpreter.Power[scala.tools.nsc.interpreter.StdReplVals]" class="keyword">new</span> <a href="Power.scala.html#38421" title="scala.tools.nsc.interpreter.Power[scala.tools.nsc.interpreter.StdReplVals]">Power</a><span class="delimiter">(</span><a href="#632787" title="=&gt; scala.tools.nsc.interpreter.IMain">intp</a>, <span title="scala.tools.nsc.interpreter.StdReplVals" class="keyword">new</span> <a href="ReplVals.scala.html#39084" title="scala.tools.nsc.interpreter.StdReplVals">StdReplVals</a><span class="delimiter">(</span><a href="#37218" title="scala.tools.nsc.interpreter.ILoop" class="keyword">this</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">(</span><a href="../../reflect/StdTags.scala.html#609303" title="=&gt; tools.reflect.StdRuntimeTags.u.TypeTag[scala.tools.nsc.interpreter.StdReplVals]">tagOfStdReplVals</a>, <a href="../../../reflect/package.scala.html#55632" title="[T](implicit ctag: scala.reflect.ClassTag[T])scala.reflect.ClassTag[T]">classTag</a><a href="../../../reflect/ClassTag.scala.html#81051" title="(implicit ctag: scala.reflect.ClassTag[scala.tools.nsc.interpreter.StdReplVals])scala.reflect.ClassTag[scala.tools.nsc.interpreter.StdReplVals]" class="delimiter">[</a><a href="ReplVals.scala.html#39084" title="scala.tools.nsc.interpreter.StdReplVals">StdReplVals</a><span class="delimiter">]</span><span class="delimiter">)</span>
  <span class="keyword">def</span> <a title="=&gt; scala.tools.nsc.interpreter.session.History" id="632802">history</a> = <a href="#632781" title="=&gt; scala.tools.nsc.interpreter.InteractiveReader">in</a>.<a href="InteractiveReader.scala.html#875583" title="=&gt; scala.tools.nsc.interpreter.session.History">history</a>

  /** The context class loader at the time this object was created */
  <span class="keyword">protected</span> <span class="keyword">val</span> <a title="ClassLoader" id="632803">originalClassLoader</a> = <span title="Thread.type">Thread</span>.<span title="()Thread">currentThread</span>.<span title="()ClassLoader">getContextClassLoader</span>

  // classpath entries added via :cp
  <span class="keyword">var</span> <a title="String" id="632806">addedClasspath</a>: <span title="String">String</span> = <span title="String(&quot;&quot;)" class="string">&quot;&quot;</span>

  /** A reverse list of commands to replay if the user requests a :replay */
  <span class="keyword">var</span> <a title="List[String]" id="632809">replayCommandStack</a>: <a href="../../../collection/immutable/List.scala.html#11952" title="List[String]">List</a><span class="delimiter">[</span>String<span class="delimiter">]</span> = <a href="../../../collection/immutable/List.scala.html#11188" title="scala.collection.immutable.Nil.type">Nil</a>

  /** A list of commands to replay if the user requests a :replay */
  <span class="keyword">def</span> <a title="=&gt; List[String]" id="632811">replayCommands</a> = <a href="#632809" title="=&gt; List[String]">replayCommandStack</a>.<a href="../../../collection/immutable/List.scala.html#62716" title="=&gt; List[String]">reverse</a>

  /** Record a command for replay should the user request a :replay */
  <span class="keyword">def</span> <a title="(cmd: String)Unit" id="632812">addReplay</a><span class="delimiter">(</span><a title="String" id="875838">cmd</a>: <span title="String">String</span><span class="delimiter">)</span> = <a href="#632809" title="(x$1: List[String])Unit">replayCommandStack</a> <a href="../../../collection/immutable/List.scala.html#62685" title="(x: String)List[String]">::=</a> <a href="#875838" title="String">cmd</a>

  <span class="keyword">def</span> <a title="[T](body: =&gt; T)T" id="632813">savingReplayStack</a><span class="delimiter">[</span><a title="" id="632815">T</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="=&gt; T" id="875848">body</a>: =&gt; T<span class="delimiter">)</span>: <a href="#632815" title="T">T</a> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="List[String]" id="875851">saved</a> = <a href="#632809" title="=&gt; List[String]">replayCommandStack</a>
    <span class="keyword">try</span> <a href="#875848" title="=&gt; T">body</a>
    <span class="keyword">finally</span> <a href="#632809" title="(x$1: List[String])Unit">replayCommandStack</a> = <a href="#875851" title="List[String]">saved</a>
  <span class="delimiter">}</span>
  <span class="keyword">def</span> <a title="[T](body: =&gt; T)T" id="632816">savingReader</a><span class="delimiter">[</span><a title="" id="632818">T</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="=&gt; T" id="875852">body</a>: =&gt; T<span class="delimiter">)</span>: <a href="#632818" title="T">T</a> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="scala.tools.nsc.interpreter.InteractiveReader" id="875855">saved</a> = <a href="#632781" title="=&gt; scala.tools.nsc.interpreter.InteractiveReader">in</a>
    <span class="keyword">try</span> <a href="#875852" title="=&gt; T">body</a>
    <span class="keyword">finally</span> <a href="#632781" title="(x$1: scala.tools.nsc.interpreter.InteractiveReader)Unit">in</a> = <a href="#875855" title="scala.tools.nsc.interpreter.InteractiveReader">saved</a>
  <span class="delimiter">}</span>

  /** Close the interpreter and set the var to null. */
  <span class="keyword">def</span> <a title="()Unit" id="632819">closeInterpreter</a><span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#632787" title="=&gt; scala.tools.nsc.interpreter.IMain">intp</a> <span title="(x$1: AnyRef)Boolean">ne</span> <span title="Null(null)" class="keyword">null</span><span class="delimiter">)</span> <span class="delimiter">{</span>
      <a href="#632787" title="=&gt; scala.tools.nsc.interpreter.IMain">intp</a>.<a href="IMain.scala.html#632575" title="()Unit">close</a><span class="delimiter">(</span><span class="delimiter">)</span>
      <a href="#632787" title="(x$1: scala.tools.nsc.interpreter.IMain)Unit">intp</a> = <span title="Null(null)" class="keyword">null</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="keyword">class</span> <a title="class ILoopInterpreter extends scala.tools.nsc.interpreter.IMain" id="632820">ILoopInterpreter</a> <a href="#632820" title="ILoop.this.ILoopInterpreter" class="keyword">extends</a> <a href="IMain.scala.html#38871" title="scala.tools.nsc.interpreter.IMain">IMain</a><span class="delimiter">(</span><a href="#632784" title="=&gt; scala.tools.nsc.Settings">settings</a>, <a href="#632955" title="=&gt; scala.tools.nsc.interpreter.JPrintWriter">out</a><span class="delimiter">)</span> <span class="delimiter">{</span>
    outer =&gt;

    <span class="keyword">override</span> <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="formatting extends Object with scala.tools.nsc.interpreter.Formatting" id="875861">formatting</a> = <a href="#875868" title="scala.tools.nsc.interpreter.Formatting" class="keyword">new</a> <a title="anonymous class $anon extends Object with scala.tools.nsc.interpreter.Formatting" id="875868">Formatting</a> <span class="delimiter">{</span>
      <span class="keyword">def</span> <a title="=&gt; String" id="875870">prompt</a> = <a href="#37218" title="ILoop.this.type">ILoop</a>.<span class="keyword">this</span>.<a href="#632837" title="=&gt; String">prompt</a>
    <span class="delimiter">}</span>
    <span class="keyword">override</span> <span class="keyword">protected</span> <span class="keyword">def</span> <a title="=&gt; ClassLoader" id="875862">parentClassLoader</a> =
      <a href="IMain.scala.html#632467" title="=&gt; scala.tools.nsc.Settings">settings</a>.<a href="../settings/MutableSettings.scala.html#539845" title="=&gt; Option[ClassLoader]">explicitParentLoader</a>.<a href="../../../Option.scala.html#62859" title="(default: =&gt; ClassLoader)ClassLoader">getOrElse</a><span class="delimiter">(</span> classOf<span title="Class[scala.tools.nsc.interpreter.ILoop](classOf[scala.tools.nsc.interpreter.ILoop])" class="delimiter">[</span>ILoop<span class="delimiter">]</span>.<span title="()ClassLoader">getClassLoader</span> <span class="delimiter">)</span>
  <span class="delimiter">}</span>

  /** Create a new interpreter. */
  <span class="keyword">def</span> <a title="()Unit" id="632821">createInterpreter</a><span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#632806" title="=&gt; String">addedClasspath</a> <span title="(x$1: AnyRef)Boolean">!=</span> <span title="String(&quot;&quot;)" class="string">&quot;&quot;</span><span class="delimiter">)</span>
      <a href="#632784" title="=&gt; scala.tools.nsc.Settings">settings</a>.<a href="../settings/ScalaSettings.scala.html#539943" title="=&gt; scala.tools.nsc.Settings#PathSetting">classpath</a> <a href="../settings/MutableSettings.scala.html#593179" title="(s: String)Unit">append</a> <a href="#632806" title="=&gt; String">addedClasspath</a>

    <a href="#632787" title="(x$1: scala.tools.nsc.interpreter.IMain)Unit">intp</a> = <span title="ILoop.this.ILoopInterpreter" class="keyword">new</span> <a href="#632820" title="ILoop.this.ILoopInterpreter">ILoopInterpreter</a>
  <span class="delimiter">}</span>

  /** print a friendly help message */
  <span class="keyword">def</span> <a title="(line: String)ILoop.this.Result" id="632822">helpCommand</a><span class="delimiter">(</span><a title="String" id="875908">line</a>: <span title="String">String</span><span class="delimiter">)</span>: <a href="LoopCommands.scala.html#632911" title="ILoop.this.Result">Result</a> = <span class="delimiter">{</span>
    <span title="ILoop.this.Result" class="keyword">if</span> <span class="delimiter">(</span><a href="#875908" title="String">line</a> <span title="(x$1: AnyRef)Boolean">==</span> <span title="String(&quot;&quot;)" class="string">&quot;&quot;</span><span class="delimiter">)</span> <a href="#632823" title="()Unit">helpSummary</a><a href="LoopCommands.scala.html#875673" title="implicit scala.tools.nsc.interpreter.LoopCommands.Result.resultFromUnit : (x: Unit)ILoop.this.Result" class="delimiter">(</a><span class="delimiter">)</span>
    <span class="keyword">else</span> <a href="#632826" title="(cmd: String)Option[ILoop.this.LoopCommand]">uniqueCommand</a><span title="ILoop.this.Result" class="delimiter">(</span><a href="#875908" title="String">line</a><span class="delimiter">)</span> <span class="keyword">match</span> <span class="delimiter">{</span>
      <span class="keyword">case</span> Some<a href="#3332516" title="ILoop.this.Result" id="3332517" class="delimiter">(</a><a href="../../../Option.scala.html#63132" title="ILoop.this.LoopCommand" id="876105">lc</a><span class="delimiter">)</span> =&gt; <a href="#632830" title="(msg: String)Unit">echo</a><a href="#3332519" title="(x: ILoop.this.Result)ILoop.this.Result" class="delimiter">(</a><span title="String(&quot;\n&quot;)" class="string">&quot;\n&quot;</span> <span title="(x$1: Any)String">+</span> <a href="#876105" title="ILoop.this.LoopCommand">lc</a>.<a href="LoopCommands.scala.html#875953" title="=&gt; String">longHelp</a><span class="delimiter">)</span>
      <span class="keyword">case</span> _        =&gt; <a href="#632824" title="(cmd: String)ILoop.this.Result">ambiguousError</a><a href="#3332519" title="(x: ILoop.this.Result)ILoop.this.Result" class="delimiter">(</a><a href="#875908" title="String">line</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>
  <span class="keyword">private</span> <span class="keyword">def</span> <a title="()Unit" id="632823">helpSummary</a><span class="delimiter">(</span><span class="delimiter">)</span> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="Int" id="875916">usageWidth</a>  = <a href="#632860" title="=&gt; List[ILoop.this.LoopCommand]">commands</a> <a href="../../../collection/TraversableLike.scala.html#58063" title="(f: ILoop.this.LoopCommand =&gt; Int)(implicit bf: scala.collection.generic.CanBuildFrom[List[ILoop.this.LoopCommand],Int,List[Int]])List[Int]">map</a> <span class="delimiter">(</span><a href="#875939" title="ILoop.this.LoopCommand">_</a>.<a href="LoopCommands.scala.html#875955" title="=&gt; String">usageMsg</a>.<span title="()Int">length</span><span class="delimiter">)</span> <a href="../../../collection/TraversableOnce.scala.html#58241" title="(implicit cmp: Ordering[Int])Int">max</a>
    <span class="keyword">val</span> <a title="String" id="875917">formatStr</a>   = <span title="String(&quot;%-&quot;)" class="string">&quot;%-&quot;</span> <span title="(x$1: Any)String">+</span> <a href="#875916" title="Int">usageWidth</a> <span title="(x$1: Any)String">+</span> <span title="String(&quot;s %s %s&quot;)" class="string">&quot;s %s %s&quot;</span>

    <a href="#632830" title="(msg: String)Unit">echo</a><span class="delimiter">(</span><span title="String(&quot;All commands can be abbreviated, e.g. :he instead of :help.&quot;)" class="string">&quot;All commands can be abbreviated, e.g. :he instead of :help.&quot;</span><span class="delimiter">)</span>
    <a href="#632830" title="(msg: String)Unit">echo</a><span class="delimiter">(</span><span title="String(&quot;Those marked with a * have more detailed help, e.g. :help imports.\n&quot;)" class="string">&quot;Those marked with a * have more detailed help, e.g. :help imports.\n&quot;</span><span class="delimiter">)</span>

    <a href="#632860" title="=&gt; List[ILoop.this.LoopCommand]">commands</a> <a href="../../../collection/immutable/List.scala.html#62719" title="(f: ILoop.this.LoopCommand =&gt; Unit)Unit">foreach</a> <span class="delimiter">{</span> <a title="ILoop.this.LoopCommand" id="876076">cmd</a> =&gt;
      <span class="keyword">val</span> <a title="String" id="876077">star</a> = <span title="String" class="keyword">if</span> <span class="delimiter">(</span><a href="#876076" title="ILoop.this.LoopCommand">cmd</a>.<a href="LoopCommands.scala.html#875951" title="=&gt; Boolean">hasLongHelp</a><span class="delimiter">)</span> <span title="String(&quot;*&quot;)" class="string">&quot;*&quot;</span> <span class="keyword">else</span> <span title="String(&quot; &quot;)" class="string">&quot; &quot;</span>
      <a href="#632830" title="(msg: String)Unit">echo</a><span class="delimiter">(</span><a href="../../../Predef.scala.html#7604" title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps">formatStr</a>.<a href="../../../collection/immutable/StringLike.scala.html#59882" title="(args: Any*)String">format</a><span class="delimiter">(</span><a href="#876076" title="ILoop.this.LoopCommand">cmd</a>.<a href="LoopCommands.scala.html#875955" title="=&gt; String">usageMsg</a>, <a href="#876077" title="String">star</a>, <a href="#876076" title="ILoop.this.LoopCommand">cmd</a>.<a href="LoopCommands.scala.html#875944" title="=&gt; String">help</a><span class="delimiter">)</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>
  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(cmd: String)ILoop.this.Result" id="632824">ambiguousError</a><span class="delimiter">(</span><a title="String" id="876106">cmd</a>: <span title="String">String</span><span class="delimiter">)</span>: <a href="LoopCommands.scala.html#632911" title="ILoop.this.Result">Result</a> = <span class="delimiter">{</span>
    <a href="#632825" title="(cmd: String)List[ILoop.this.LoopCommand]">matchingCommands</a><a href="#3332524" title="List[ILoop.this.LoopCommand]" class="delimiter">(</a><a href="#876106" title="String">cmd</a><span class="delimiter">)</span> <span class="keyword">match</span> <span class="delimiter">{</span>
      <span class="keyword">case</span> <a href="../../../collection/immutable/List.scala.html#11188" title="Unit" id="3332526">Nil</a>  =&gt; <a href="#632830" title="(msg: String)Unit">echo</a><a href="#3332528" title="(x: Unit)Unit" class="delimiter">(</a><a href="#876106" title="String">cmd</a> <span title="(x$1: Any)String">+</span> <span title="String(&quot;: no such command.  Type :help for help.&quot;)" class="string">&quot;: no such command.  Type :help for help.&quot;</span><span class="delimiter">)</span>
      <span class="keyword">case</span> xs   =&gt; <a href="#632830" title="(msg: String)Unit">echo</a><a href="#3332528" title="(x: Unit)Unit" class="delimiter">(</a><a href="#876106" title="String">cmd</a> <span title="(x$1: Any)String">+</span> <span title="String(&quot; is ambiguous: did you mean &quot;)" class="string">&quot; is ambiguous: did you mean &quot;</span> <span title="(x$1: Any)String">+</span> xs.<a href="../../../collection/TraversableLike.scala.html#58063" title="(f: ILoop.this.LoopCommand =&gt; String)(implicit bf: scala.collection.generic.CanBuildFrom[List[ILoop.this.LoopCommand],String,List[String]])List[String]">map</a><a href="../../../collection/immutable/List.scala.html#62442" title="scala.collection.generic.CanBuildFrom[scala.collection.immutable.List.Coll,String,List[String]]" class="delimiter">(</a><span title="String(&quot;:&quot;)" class="string">&quot;:&quot;</span> <span title="(x$1: Any)String">+</span> <a href="#876136" title="ILoop.this.LoopCommand">_</a>.<a href="LoopCommands.scala.html#875942" title="=&gt; String">name</a><span class="delimiter">)</span>.<a href="../../../collection/TraversableOnce.scala.html#58283" title="(sep: String)String">mkString</a><span class="delimiter">(</span><span title="String(&quot; or &quot;)" class="string">&quot; or &quot;</span><span class="delimiter">)</span> <span title="(x$1: Any)String">+</span> <span title="String(&quot;?&quot;)" class="string">&quot;?&quot;</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>
    <a href="LoopCommands.scala.html#875675" title="(keepRunning: Boolean, lineToRecord: Option[String])ILoop.this.Result">Result</a><span class="delimiter">(</span><span title="Boolean(true)" class="keyword">true</span>, <a href="../../../Option.scala.html#1585" title="None.type">None</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>
  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(cmd: String)List[ILoop.this.LoopCommand]" id="632825">matchingCommands</a><span class="delimiter">(</span><a title="String" id="876108">cmd</a>: <span title="String">String</span><span class="delimiter">)</span> = <a href="#632860" title="=&gt; List[ILoop.this.LoopCommand]">commands</a> <a href="../../../collection/TraversableLike.scala.html#58073" title="(p: ILoop.this.LoopCommand =&gt; Boolean)List[ILoop.this.LoopCommand]">filter</a> <span class="delimiter">(</span><a href="#876116" title="ILoop.this.LoopCommand">_</a>.<a href="LoopCommands.scala.html#875942" title="=&gt; String">name</a> <span title="(x$1: String)Boolean">startsWith</span> <a href="#876108" title="String">cmd</a><span class="delimiter">)</span>
  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(cmd: String)Option[ILoop.this.LoopCommand]" id="632826">uniqueCommand</a><span class="delimiter">(</span><a title="String" id="876102">cmd</a>: <span title="String">String</span><span class="delimiter">)</span>: <a href="../../../Option.scala.html#978" title="Option[ILoop.this.LoopCommand]">Option</a><span class="delimiter">[</span>LoopCommand<span class="delimiter">]</span> = <span class="delimiter">{</span>
    // this lets us add commands willy-nilly and only requires enough command to disambiguate
    <a href="#632825" title="(cmd: String)List[ILoop.this.LoopCommand]">matchingCommands</a><a href="#3332536" title="List[ILoop.this.LoopCommand]" class="delimiter">(</a><a href="#876102" title="String">cmd</a><span class="delimiter">)</span> <span class="keyword">match</span> <span class="delimiter">{</span>
      <span class="keyword">case</span> <a href="../../../collection/generic/SeqFactory.scala.html#59986" title="Option[List[ILoop.this.LoopCommand]]" id="3332545">List</a><span class="delimiter">(</span><a title="ILoop.this.LoopCommand" id="876178">x</a><span class="delimiter">)</span>  =&gt; <a href="../../../Option.scala.html#63128" title="(x: ILoop.this.LoopCommand)Some[ILoop.this.LoopCommand]">Some</a><a href="#3332541" title="(x: Option[ILoop.this.LoopCommand])Option[ILoop.this.LoopCommand]" class="delimiter">(</a><a href="#876178" title="ILoop.this.LoopCommand">x</a><span class="delimiter">)</span>
      // exact match OK even if otherwise appears ambiguous
      <span class="keyword">case</span> xs       =&gt; xs <a href="#3332541" title="(x: Option[ILoop.this.LoopCommand])Option[ILoop.this.LoopCommand]">find</a> <span class="delimiter">(</span><a href="#876189" title="ILoop.this.LoopCommand">_</a>.<a href="LoopCommands.scala.html#875942" title="=&gt; String">name</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="#876102" title="String">cmd</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  /** Show the history */
  <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="historyCommand extends ILoop.this.LoopCommand" id="632828">historyCommand</a> = <a href="#876194" title="ILoop.this.LoopCommand{def defaultLines: Int}" class="keyword">new</a> <a href="LoopCommands.scala.html#632905" title="anonymous class $anon extends ILoop.this.LoopCommand" id="876194">LoopCommand</a><span class="delimiter">(</span><span title="String(&quot;history&quot;)" class="string">&quot;history&quot;</span>, <span title="String(&quot;show the history (optional num is commands to show)&quot;)" class="string">&quot;show the history (optional num is commands to show)&quot;</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span class="keyword">override</span> <span class="keyword">def</span> <a title="=&gt; String" id="876196">usage</a> = <span title="String(&quot;[num]&quot;)" class="string">&quot;[num]&quot;</span>
    <span class="keyword">def</span> <a title="=&gt; Int" id="876197">defaultLines</a> = <span title="Int(20)" class="int">20</span>

    <span class="keyword">def</span> <a title="(line: String)ILoop.this.Result" id="876198">apply</a><span class="delimiter">(</span><a title="String" id="876201">line</a>: <span title="String">String</span><span class="delimiter">)</span>: <a href="LoopCommands.scala.html#632911" title="ILoop.this.Result">Result</a> = <span class="delimiter">{</span>
      <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#632802" title="=&gt; scala.tools.nsc.interpreter.session.History">history</a> <span title="(x$1: AnyRef)Boolean">eq</span> <a href="session/History.scala.html#39591" title="scala.tools.nsc.interpreter.session.NoHistory.type">NoHistory</a><span class="delimiter">)</span>
        <span title="Nothing" class="keyword">return</span> <a href="LoopCommands.scala.html#875674" title="implicit scala.tools.nsc.interpreter.LoopCommands.Result.resultFromString : (msg: String)ILoop.this.Result" class="string">&quot;No history available.&quot;</a>

      <span class="keyword">val</span> <a title="List[String]" id="876210">xs</a>      = <a href="ReplStrings.scala.html#55752" title="(s: String)List[String]">words</a><span class="delimiter">(</span><a href="#876201" title="String">line</a><span class="delimiter">)</span>
      <span class="keyword">val</span> <a title="Int" id="876211">current</a> = <a href="#632802" title="=&gt; scala.tools.nsc.interpreter.session.History">history</a>.<a href="session/History.scala.html#875831" title="=&gt; Int">index</a>
      <span class="keyword">val</span> <a title="Int" id="876212">count</a>   = <span class="keyword">try</span> <a href="#876210" title="List[String]">xs</a>.<a href="../../../Predef.scala.html#7604" title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps">head</a>.<a href="../../../collection/immutable/StringLike.scala.html#59873" title="=&gt; Int">toInt</a> <span class="keyword">catch</span> <span class="delimiter">{</span> <span class="keyword">case</span> <span title="Int">_</span>: <span title="Exception">Exception</span> =&gt; <a href="#876197" title="=&gt; Int">defaultLines</a> <span class="delimiter">}</span>
      <span class="keyword">val</span> <a title="List[String]" id="876213">lines</a>   = <a href="#632802" title="=&gt; scala.tools.nsc.interpreter.session.History">history</a>.<a href="session/History.scala.html#875830" title="=&gt; List[String]">asStrings</a> <a href="../../../collection/immutable/List.scala.html#62711" title="(n: Int)List[String]">takeRight</a> <a href="#876212" title="Int">count</a>
      <span class="keyword">val</span> <a title="Int" id="876214">offset</a>  = <a href="#876211" title="Int">current</a> <a href="../../../Int.scala.html#57161" title="(x: Int)Int">-</a> <a href="#876213" title="List[String]">lines</a>.<a href="../../../collection/SeqLike.scala.html#58788" title="=&gt; Int">size</a> <a href="../../../Int.scala.html#57154" title="(x: Int)Int">+</a> <span title="Int(1)" class="int">1</span>

      <span class="keyword">for</span> <span class="delimiter">(</span><span class="delimiter">(</span><a href="../../../Tuple2.scala.html#60635" title="String" id="876502">line</a>, <a href="../../../Tuple2.scala.html#60637" title="Int" id="876503">index</a><span class="delimiter">)</span> &lt;- <a href="#876213" title="List[String]">lines</a>.<a href="../../../collection/immutable/List.scala.html#62719" title="(f: ((String, Int)) =&gt; Unit)Unit">zipWithIndex</a><span class="delimiter">)</span>
        <a href="#632830" title="(msg: String)Unit">echo</a><a href="#3332560" title="(x: Unit)Unit" class="delimiter">(</a><a href="../../../Predef.scala.html#7604" title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps" class="string">&quot;%3d  %s&quot;</a>.<a href="../../../collection/immutable/StringLike.scala.html#59882" title="(args: Any*)String">format</a><span class="delimiter">(</span><a href="#876503" title="Int">index</a> <a href="../../../Int.scala.html#57154" title="(x: Int)Int">+</a> <a href="#876214" title="Int">offset</a>, <a href="#876502" title="String">line</a><span class="delimiter">)</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  // When you know you are most likely breaking into the middle
  // of a line being typed.  This softens the blow.
  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="(msg: String)Unit" id="632829">echoAndRefresh</a><span class="delimiter">(</span><a title="String" id="876533">msg</a>: <span title="String">String</span><span class="delimiter">)</span> = <span class="delimiter">{</span>
    <a href="#632830" title="(msg: String)Unit">echo</a><span class="delimiter">(</span><span title="String(&quot;\n&quot;)" class="string">&quot;\n&quot;</span> <span title="(x$1: Any)String">+</span> <a href="#876533" title="String">msg</a><span class="delimiter">)</span>
    <a href="#632781" title="=&gt; scala.tools.nsc.interpreter.InteractiveReader">in</a>.<a href="InteractiveReader.scala.html#875586" title="()Unit">redrawLine</a><span class="delimiter">(</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>
  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="(msg: String)Unit" id="632830">echo</a><span class="delimiter">(</span><a title="String" id="875630">msg</a>: <span title="String">String</span><span class="delimiter">)</span> = <span class="delimiter">{</span>
    <a href="#632955" title="=&gt; scala.tools.nsc.interpreter.JPrintWriter">out</a> <span title="(x$1: String)Unit">println</span> <a href="#875630" title="String">msg</a>
    <a href="#632955" title="=&gt; scala.tools.nsc.interpreter.JPrintWriter">out</a>.<span title="()Unit">flush</span><span class="delimiter">(</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>
  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="(msg: String)Unit" id="632831">echoNoNL</a><span class="delimiter">(</span><a title="String" id="876536">msg</a>: <span title="String">String</span><span class="delimiter">)</span> = <span class="delimiter">{</span>
    <a href="#632955" title="=&gt; scala.tools.nsc.interpreter.JPrintWriter">out</a> <span title="(x$1: String)Unit">print</span> <a href="#876536" title="String">msg</a>
    <a href="#632955" title="=&gt; scala.tools.nsc.interpreter.JPrintWriter">out</a>.<span title="()Unit">flush</span><span class="delimiter">(</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  /** Search the history */
  <span class="keyword">def</span> <a title="(_cmdline: String)Unit" id="632832">searchHistory</a><span class="delimiter">(</span><a title="String" id="876543">_cmdline</a>: <span title="String">String</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="String" id="876545">cmdline</a> = <a href="#876543" title="String">_cmdline</a>.<span title="()String">toLowerCase</span>
    <span class="keyword">val</span> <a title="Int" id="876546">offset</a>  = <a href="#632802" title="=&gt; scala.tools.nsc.interpreter.session.History">history</a>.<a href="session/History.scala.html#875831" title="=&gt; Int">index</a> <a href="../../../Int.scala.html#57161" title="(x: Int)Int">-</a> <a href="#632802" title="=&gt; scala.tools.nsc.interpreter.session.History">history</a>.<a href="session/History.scala.html#875832" title="=&gt; Int">size</a> <a href="../../../Int.scala.html#57154" title="(x: Int)Int">+</a> <span title="Int(1)" class="int">1</span>

    <span class="keyword">for</span> <span class="delimiter">(</span><span class="delimiter">(</span><a href="../../../Tuple2.scala.html#60635" title="String" id="876620">line</a>, <a href="../../../Tuple2.scala.html#60637" title="Int" id="876621">index</a><span class="delimiter">)</span> &lt;- <a href="#632802" title="=&gt; scala.tools.nsc.interpreter.session.History">history</a>.<a href="session/History.scala.html#875830" title="=&gt; List[String]">asStrings</a>.<a href="../../../collection/generic/FilterMonadic.scala.html#58171" title="(f: ((String, Int)) =&gt; Unit)Unit">zipWithIndex</a> ; <span class="keyword">if</span> <a href="#876620" title="String">line</a>.<span title="()String">toLowerCase</span> <a href="#3332566" title="(x: Boolean)Boolean">contains</a> <a href="#876545" title="String">cmdline</a><span class="delimiter">)</span>
      <a href="#632830" title="(msg: String)Unit">echo</a><a href="#3332572" title="(x: Unit)Unit" class="delimiter">(</a><a href="../../../Predef.scala.html#7604" title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps" class="string">&quot;%d %s&quot;</a>.<a href="../../../collection/immutable/StringLike.scala.html#59882" title="(args: Any*)String">format</a><span class="delimiter">(</span><a href="#876621" title="Int">index</a> <a href="../../../Int.scala.html#57154" title="(x: Int)Int">+</a> <a href="#876546" title="Int">offset</a>, <a href="#876620" title="String">line</a><span class="delimiter">)</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">private</span> <span class="keyword">var</span> <a title="String" id="632834">currentPrompt</a> = <a href="../Properties.scala.html#27455" title="scala.tools.nsc.Properties.type">Properties</a>.<a href="../Properties.scala.html#593229" title="=&gt; String">shellPromptString</a>
  <span class="keyword">def</span> <a title="(prompt: String)Unit" id="632836">setPrompt</a><span class="delimiter">(</span><a title="String" id="876630">prompt</a>: <span title="String">String</span><span class="delimiter">)</span> = <a href="#632834" title="(x$1: String)Unit">currentPrompt</a> = <a href="#876630" title="String">prompt</a>
  /** Prompt to print when awaiting input */
  <span class="keyword">def</span> <a title="=&gt; String" id="632837">prompt</a> = <a href="#632834" title="=&gt; String">currentPrompt</a>

  <span class="keyword">import</span> <a href="LoopCommands.scala.html#632906" title="ILoop.this.LoopCommand.type">LoopCommand</a>.<span class="delimiter">{</span> cmd, nullary <span class="delimiter">}</span>

  /** Standard commands **/
  <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="List[ILoop.this.LoopCommand]" id="632840">standardCommands</a> = <a href="../../../collection/immutable/List.scala.html#62451" title="(xs: ILoop.this.LoopCommand*)List[ILoop.this.LoopCommand]">List</a><span class="delimiter">(</span>
    <a href="LoopCommands.scala.html#875442" title="(name: String, usage: String, help: String, f: String =&gt; ILoop.this.Result)ILoop.this.LoopCommand">cmd</a><span class="delimiter">(</span><span title="String(&quot;cp&quot;)" class="string">&quot;cp&quot;</span>, <span title="String(&quot;&lt;path&gt;&quot;)" class="string">&quot;&lt;path&gt;&quot;</span>, <span title="String(&quot;add a jar or directory to the classpath&quot;)" class="string">&quot;add a jar or directory to the classpath&quot;</span>, <a href="LoopCommands.scala.html#875673" title="implicit scala.tools.nsc.interpreter.LoopCommands.Result.resultFromUnit : (x: Unit)ILoop.this.Result">addClasspath</a><span class="delimiter">)</span>,
    <a href="LoopCommands.scala.html#875442" title="(name: String, usage: String, help: String, f: String =&gt; ILoop.this.Result)ILoop.this.LoopCommand">cmd</a><span class="delimiter">(</span><span title="String(&quot;help&quot;)" class="string">&quot;help&quot;</span>, <span title="String(&quot;[command]&quot;)" class="string">&quot;[command]&quot;</span>, <span title="String(&quot;print this summary or command-specific help&quot;)" class="string">&quot;print this summary or command-specific help&quot;</span>, <a href="#632822" title="(line: String)ILoop.this.Result">helpCommand</a><span class="delimiter">)</span>,
    <a href="#632827" title="=&gt; ILoop.this.LoopCommand{def defaultLines: Int}">historyCommand</a>,
    <a href="LoopCommands.scala.html#875442" title="(name: String, usage: String, help: String, f: String =&gt; ILoop.this.Result)ILoop.this.LoopCommand">cmd</a><span class="delimiter">(</span><span title="String(&quot;h?&quot;)" class="string">&quot;h?&quot;</span>, <span title="String(&quot;&lt;string&gt;&quot;)" class="string">&quot;&lt;string&gt;&quot;</span>, <span title="String(&quot;search the history&quot;)" class="string">&quot;search the history&quot;</span>, <a href="LoopCommands.scala.html#875673" title="implicit scala.tools.nsc.interpreter.LoopCommands.Result.resultFromUnit : (x: Unit)ILoop.this.Result">searchHistory</a><span class="delimiter">)</span>,
    <a href="LoopCommands.scala.html#875442" title="(name: String, usage: String, help: String, f: String =&gt; ILoop.this.Result)ILoop.this.LoopCommand">cmd</a><span class="delimiter">(</span><span title="String(&quot;imports&quot;)" class="string">&quot;imports&quot;</span>, <span title="String(&quot;[name name ...]&quot;)" class="string">&quot;[name name ...]&quot;</span>, <span title="String(&quot;show import history, identifying sources of names&quot;)" class="string">&quot;show import history, identifying sources of names&quot;</span>, <a href="#632847" title="(line: String)ILoop.this.Result">importsCommand</a><span class="delimiter">)</span>,
    <a href="LoopCommands.scala.html#875442" title="(name: String, usage: String, help: String, f: String =&gt; ILoop.this.Result)ILoop.this.LoopCommand">cmd</a><span class="delimiter">(</span><span title="String(&quot;implicits&quot;)" class="string">&quot;implicits&quot;</span>, <span title="String(&quot;[-v]&quot;)" class="string">&quot;[-v]&quot;</span>, <span title="String(&quot;show the implicits in scope&quot;)" class="string">&quot;show the implicits in scope&quot;</span>, <a href="#632848" title="(line: String)ILoop.this.Result">implicitsCommand</a><span class="delimiter">)</span>,
    <a href="LoopCommands.scala.html#875442" title="(name: String, usage: String, help: String, f: String =&gt; ILoop.this.Result)ILoop.this.LoopCommand">cmd</a><span class="delimiter">(</span><span title="String(&quot;javap&quot;)" class="string">&quot;javap&quot;</span>, <span title="String(&quot;&lt;path|class&gt;&quot;)" class="string">&quot;&lt;path|class&gt;&quot;</span>, <span title="String(&quot;disassemble a file or class name&quot;)" class="string">&quot;disassemble a file or class name&quot;</span>, <a href="#632856" title="(line: String)ILoop.this.Result">javapCommand</a><span class="delimiter">)</span>,
    <a href="LoopCommands.scala.html#875442" title="(name: String, usage: String, help: String, f: String =&gt; ILoop.this.Result)ILoop.this.LoopCommand">cmd</a><span class="delimiter">(</span><span title="String(&quot;load&quot;)" class="string">&quot;load&quot;</span>, <span title="String(&quot;&lt;path&gt;&quot;)" class="string">&quot;&lt;path&gt;&quot;</span>, <span title="String(&quot;load and interpret a Scala file&quot;)" class="string">&quot;load and interpret a Scala file&quot;</span>, <a href="#632873" title="(arg: String)ILoop.this.Result">loadCommand</a><span class="delimiter">)</span>,
    <a href="LoopCommands.scala.html#875441" title="(name: String, help: String, f: () =&gt; ILoop.this.Result)ILoop.this.LoopCommand">nullary</a><span class="delimiter">(</span><span title="String(&quot;paste&quot;)" class="string">&quot;paste&quot;</span>, <span title="String(&quot;enter paste mode: all input up to ctrl-D compiled together&quot;)" class="string">&quot;enter paste mode: all input up to ctrl-D compiled together&quot;</span>, <a href="#632882" title="()ILoop.this.Result">pasteCommand</a><span class="delimiter">)</span>,
    <a href="LoopCommands.scala.html#875441" title="(name: String, help: String, f: () =&gt; ILoop.this.Result)ILoop.this.LoopCommand">nullary</a><span class="delimiter">(</span><span title="String(&quot;power&quot;)" class="string">&quot;power&quot;</span>, <span title="String(&quot;enable power user mode&quot;)" class="string">&quot;enable power user mode&quot;</span>, <a href="#632875" title="()ILoop.this.Result">powerCmd</a><span class="delimiter">)</span>,
    <a href="LoopCommands.scala.html#875441" title="(name: String, help: String, f: () =&gt; ILoop.this.Result)ILoop.this.LoopCommand">nullary</a><span class="delimiter">(</span><span title="String(&quot;quit&quot;)" class="string">&quot;quit&quot;</span>, <span title="String(&quot;exit the interpreter&quot;)" class="string">&quot;exit the interpreter&quot;</span>, <span class="delimiter">(</span><span class="delimiter">)</span> =&gt; <a href="LoopCommands.scala.html#875675" title="(keepRunning: Boolean, lineToRecord: Option[String])ILoop.this.Result">Result</a><span class="delimiter">(</span><span title="Boolean(false)" class="keyword">false</span>, <a href="../../../Option.scala.html#1585" title="None.type">None</a><span class="delimiter">)</span><span class="delimiter">)</span>,
    <a href="LoopCommands.scala.html#875441" title="(name: String, help: String, f: () =&gt; ILoop.this.Result)ILoop.this.LoopCommand">nullary</a><span class="delimiter">(</span><span title="String(&quot;replay&quot;)" class="string">&quot;replay&quot;</span>, <span title="String(&quot;reset execution and replay all previous commands&quot;)" class="string">&quot;reset execution and replay all previous commands&quot;</span>, <a href="LoopCommands.scala.html#875673" title="implicit scala.tools.nsc.interpreter.LoopCommands.Result.resultFromUnit : (x: Unit)ILoop.this.Result">replay</a><span class="delimiter">)</span>,
    <a href="LoopCommands.scala.html#875441" title="(name: String, help: String, f: () =&gt; ILoop.this.Result)ILoop.this.LoopCommand">nullary</a><span class="delimiter">(</span><span title="String(&quot;reset&quot;)" class="string">&quot;reset&quot;</span>, <span title="String(&quot;reset the repl to its initial state, forgetting all session entries&quot;)" class="string">&quot;reset the repl to its initial state, forgetting all session entries&quot;</span>, <a href="LoopCommands.scala.html#875673" title="implicit scala.tools.nsc.interpreter.LoopCommands.Result.resultFromUnit : (x: Unit)ILoop.this.Result">resetCommand</a><span class="delimiter">)</span>,
    <a href="#632870" title="=&gt; ILoop.this.LoopCommand">shCommand</a>,
    <a href="LoopCommands.scala.html#875441" title="(name: String, help: String, f: () =&gt; ILoop.this.Result)ILoop.this.LoopCommand">nullary</a><span class="delimiter">(</span><span title="String(&quot;silent&quot;)" class="string">&quot;silent&quot;</span>, <span title="String(&quot;disable/enable automatic printing of results&quot;)" class="string">&quot;disable/enable automatic printing of results&quot;</span>, <a href="LoopCommands.scala.html#875673" title="implicit scala.tools.nsc.interpreter.LoopCommands.Result.resultFromUnit : (x: Unit)ILoop.this.Result">verbosity</a><span class="delimiter">)</span>,
    <a href="LoopCommands.scala.html#875442" title="(name: String, usage: String, help: String, f: String =&gt; ILoop.this.Result)ILoop.this.LoopCommand">cmd</a><span class="delimiter">(</span><span title="String(&quot;type&quot;)" class="string">&quot;type&quot;</span>, <span title="String(&quot;[-v] &lt;expr&gt;&quot;)" class="string">&quot;[-v] &lt;expr&gt;&quot;</span>, <span title="String(&quot;display the type of an expression without evaluating it&quot;)" class="string">&quot;display the type of an expression without evaluating it&quot;</span>, <a href="#632854" title="(line0: String)ILoop.this.Result">typeCommand</a><span class="delimiter">)</span>,
    <a href="LoopCommands.scala.html#875441" title="(name: String, help: String, f: () =&gt; ILoop.this.Result)ILoop.this.LoopCommand">nullary</a><span class="delimiter">(</span><span title="String(&quot;warnings&quot;)" class="string">&quot;warnings&quot;</span>, <span title="String(&quot;show the suppressed warnings from the most recent line which had any&quot;)" class="string">&quot;show the suppressed warnings from the most recent line which had any&quot;</span>, <a href="#632855" title="()ILoop.this.Result">warningsCommand</a><span class="delimiter">)</span>
  <span class="delimiter">)</span>

  /** Power user commands */
  <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="List[ILoop.this.LoopCommand]" id="632842">powerCommands</a>: <a href="../../../collection/immutable/List.scala.html#11952" title="List[ILoop.this.LoopCommand]">List</a><span class="delimiter">[</span>LoopCommand<span class="delimiter">]</span> = <a href="../../../collection/immutable/List.scala.html#62451" title="(xs: ILoop.this.LoopCommand*)List[ILoop.this.LoopCommand]">List</a><span class="delimiter">(</span>
    <a href="LoopCommands.scala.html#875442" title="(name: String, usage: String, help: String, f: String =&gt; ILoop.this.Result)ILoop.this.LoopCommand">cmd</a><span class="delimiter">(</span><span title="String(&quot;phase&quot;)" class="string">&quot;phase&quot;</span>, <span title="String(&quot;&lt;phase&gt;&quot;)" class="string">&quot;&lt;phase&gt;&quot;</span>, <span title="String(&quot;set the implicit phase for power commands&quot;)" class="string">&quot;set the implicit phase for power commands&quot;</span>, <a href="#632859" title="(name: String)ILoop.this.Result">phaseCommand</a><span class="delimiter">)</span>
  <span class="delimiter">)</span>

  <span class="keyword">private</span> <span class="keyword">def</span> <a title="()ILoop.this.Result" id="632843">dumpCommand</a><span class="delimiter">(</span><span class="delimiter">)</span>: <a href="LoopCommands.scala.html#632911" title="ILoop.this.Result">Result</a> = <span class="delimiter">{</span>
    <a href="#632830" title="(msg: String)Unit">echo</a><span class="delimiter">(</span><span title="String(&quot;&quot;)" class="string">&quot;&quot;</span> <span title="(x$1: Any)String">+</span> <a href="#632800" title="=&gt; scala.tools.nsc.interpreter.Power[scala.tools.nsc.interpreter.StdReplVals]">power</a><span class="delimiter">)</span>
    <a href="#632802" title="=&gt; scala.tools.nsc.interpreter.session.History">history</a>.<a href="session/History.scala.html#875830" title="=&gt; List[String]">asStrings</a> <a href="../../../collection/immutable/List.scala.html#62711" title="(n: Int)List[String]">takeRight</a> <span title="Int(30)" class="int">30</span> <a href="../../../collection/immutable/List.scala.html#62719" title="(f: String =&gt; Unit)Unit">foreach</a> <a href="#632830" title="(msg: String)Unit">echo</a>
    <a href="#632781" title="=&gt; scala.tools.nsc.interpreter.InteractiveReader">in</a>.<a href="InteractiveReader.scala.html#875586" title="()Unit">redrawLine</a><a href="LoopCommands.scala.html#875673" title="implicit scala.tools.nsc.interpreter.LoopCommands.Result.resultFromUnit : (x: Unit)ILoop.this.Result" class="delimiter">(</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>
  <span class="keyword">private</span> <span class="keyword">def</span> <a title="()ILoop.this.Result" id="632844">valsCommand</a><span class="delimiter">(</span><span class="delimiter">)</span>: <a href="LoopCommands.scala.html#632911" title="ILoop.this.Result">Result</a> = <a href="#632800" title="=&gt; scala.tools.nsc.interpreter.Power[scala.tools.nsc.interpreter.StdReplVals]">power</a>.<a href="LoopCommands.scala.html#875674" title="implicit scala.tools.nsc.interpreter.LoopCommands.Result.resultFromString : (msg: String)ILoop.this.Result">valsDescription</a>

  <span class="keyword">private</span> <span class="keyword">val</span> <a title="List[(String, String)]" id="632845">typeTransforms</a> = <a href="../../../collection/immutable/List.scala.html#62451" title="(xs: (String, String)*)List[(String, String)]">List</a><span class="delimiter">(</span>
    <a href="../../../Predef.scala.html#7509" title="(x: String)ArrowAssoc[String]" class="string">&quot;scala.collection.immutable.&quot;</a> <a href="../../../Predef.scala.html#62634" title="(y: String)(String, String)">-&gt;</a> <span title="String(&quot;immutable.&quot;)" class="string">&quot;immutable.&quot;</span>,
    <a href="../../../Predef.scala.html#7509" title="(x: String)ArrowAssoc[String]" class="string">&quot;scala.collection.mutable.&quot;</a>   <a href="../../../Predef.scala.html#62634" title="(y: String)(String, String)">-&gt;</a> <span title="String(&quot;mutable.&quot;)" class="string">&quot;mutable.&quot;</span>,
    <a href="../../../Predef.scala.html#7509" title="(x: String)ArrowAssoc[String]" class="string">&quot;scala.collection.generic.&quot;</a>   <a href="../../../Predef.scala.html#62634" title="(y: String)(String, String)">-&gt;</a> <span title="String(&quot;generic.&quot;)" class="string">&quot;generic.&quot;</span>,
    <a href="../../../Predef.scala.html#7509" title="(x: String)ArrowAssoc[String]" class="string">&quot;java.lang.&quot;</a>                  <a href="../../../Predef.scala.html#62634" title="(y: String)(String, String)">-&gt;</a> <span title="String(&quot;jl.&quot;)" class="string">&quot;jl.&quot;</span>,
    <a href="../../../Predef.scala.html#7509" title="(x: String)ArrowAssoc[String]" class="string">&quot;scala.runtime.&quot;</a>              <a href="../../../Predef.scala.html#62634" title="(y: String)(String, String)">-&gt;</a> <span title="String(&quot;runtime.&quot;)" class="string">&quot;runtime.&quot;</span>
  <span class="delimiter">)</span>

  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(line: String)ILoop.this.Result" id="632847">importsCommand</a><span class="delimiter">(</span><a title="String" id="876655">line</a>: <span title="String">String</span><span class="delimiter">)</span>: <a href="LoopCommands.scala.html#632911" title="ILoop.this.Result">Result</a> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="List[String]" id="876799">tokens</a>    = <a href="ReplStrings.scala.html#55752" title="(s: String)List[String]">words</a><span class="delimiter">(</span><a href="#876655" title="String">line</a><span class="delimiter">)</span>
    <span class="keyword">val</span> <a title="List[scala.tools.nsc.interpreter.MemberHandlers#ImportHandler]" id="876800">handlers</a>  = <a href="#632787" title="=&gt; scala.tools.nsc.interpreter.IMain">intp</a>.<a href="Imports.scala.html#632408" title="(=&gt; List[_1400.memberHandlers.ImportHandler]) forSome { val _1400: scala.tools.nsc.interpreter.IMain }">languageWildcardHandlers</a> <a href="../../../collection/immutable/List.scala.html#62697" title="(that: scala.collection.GenTraversableOnce[scala.tools.nsc.interpreter.MemberHandlers#ImportHandler])(implicit bf: scala.collection.generic.CanBuildFrom[List[_1400.memberHandlers.ImportHandler],scala.tools.nsc.interpreter.MemberHandlers#ImportHandler,List[scala.tools.nsc.interpreter.MemberHandlers#ImportHandler]])List[scala.tools.nsc.interpreter.MemberHandlers#ImportHandler]">++</a> <a href="#632787" title="=&gt; scala.tools.nsc.interpreter.IMain">intp</a>.<a href="IMain.scala.html#632642" title="(=&gt; List[_2965.memberHandlers.ImportHandler]) forSome { val _2965: scala.tools.nsc.interpreter.IMain }">importHandlers</a>
    <span class="keyword">val</span> <a title="Boolean" id="876801">isVerbose</a> = <a href="#876799" title="List[String]">tokens</a> <a href="../../../collection/LinearSeqOptimized.scala.html#86380" title="(elem: Any)Boolean">contains</a> <span title="String(&quot;-v&quot;)" class="string">&quot;-v&quot;</span>

    <a href="#876800" title="List[scala.tools.nsc.interpreter.MemberHandlers#ImportHandler]">handlers</a>.<a href="../../../collection/TraversableLike.scala.html#58074" title="(p: scala.tools.nsc.interpreter.MemberHandlers#ImportHandler =&gt; Boolean)List[scala.tools.nsc.interpreter.MemberHandlers#ImportHandler]">filterNot</a><span class="delimiter">(</span><a href="#877372" title="scala.tools.nsc.interpreter.MemberHandlers#ImportHandler">_</a>.<a href="MemberHandlers.scala.html#876845" title="(=&gt; List[_2966.intp.global.Symbol]) forSome { val _2966: scala.tools.nsc.interpreter.MemberHandlers }">importedSymbols</a>.<a href="../../../collection/SeqLike.scala.html#58787" title="=&gt; Boolean">isEmpty</a><span class="delimiter">)</span>.<a href="../../../collection/IterableLike.scala.html#58604" title="(implicit bf: scala.collection.generic.CanBuildFrom[List[scala.tools.nsc.interpreter.MemberHandlers#ImportHandler],(scala.tools.nsc.interpreter.MemberHandlers#ImportHandler, Int),List[(scala.tools.nsc.interpreter.MemberHandlers#ImportHandler, Int)]])List[(scala.tools.nsc.interpreter.MemberHandlers#ImportHandler, Int)]">zipWithIndex</a> <a href="LoopCommands.scala.html#875673" title="implicit scala.tools.nsc.interpreter.LoopCommands.Result.resultFromUnit : (x: Unit)ILoop.this.Result">foreach</a> <a href="#877497" title="(scala.tools.nsc.interpreter.MemberHandlers#ImportHandler, Int)" class="delimiter">{</a>
      <span class="keyword">case</span> <span class="delimiter">(</span><a href="../../../Tuple2.scala.html#60635" title="scala.tools.nsc.interpreter.MemberHandlers#ImportHandler" id="877500">handler</a>, <a href="../../../Tuple2.scala.html#60637" title="Int" id="877501">idx</a><span class="delimiter">)</span> =&gt;
        <span class="keyword">val</span> <a href="#3332578" title="(x: (List[_1412.intp.global.Symbol], List[_1412.intp.global.Symbol]))(List[_1412.intp.global.Symbol], List[_1412.intp.global.Symbol])" class="delimiter">(</a><a href="../../../Tuple2.scala.html#60635" title="List[_1412.intp.global.Symbol]" id="877503">types</a>, <a href="../../../Tuple2.scala.html#60637" title="List[_1412.intp.global.Symbol]" id="877504">terms</a><span class="delimiter">)</span> = <a href="#877500" title="scala.tools.nsc.interpreter.MemberHandlers#ImportHandler">handler</a>.<a href="MemberHandlers.scala.html#876845" title="(=&gt; List[_2967.intp.global.Symbol]) forSome { val _2967: scala.tools.nsc.interpreter.MemberHandlers }">importedSymbols</a> <a href="../../../collection/TraversableLike.scala.html#58080" title="(p: _1412.intp.global.Symbol =&gt; Boolean)(List[_1412.intp.global.Symbol], List[_1412.intp.global.Symbol])">partition</a> <span class="delimiter">(</span><a href="#877520" title="_1412.intp.global.Symbol">_</a>.<a href="../../../reflect/internal/Symbols.scala.html#411087" title="=&gt; x$9.NameType">name</a>.<a href="../../../reflect/internal/Names.scala.html#410378" title="=&gt; Boolean">isTypeName</a><span class="delimiter">)</span>
        <span class="keyword">val</span> <a title="List[_1413.intp.global.Symbol] forSome { val _1413: scala.tools.nsc.interpreter.MemberHandlers }" id="877505">imps</a>           = <a href="#877500" title="scala.tools.nsc.interpreter.MemberHandlers#ImportHandler">handler</a>.<a href="MemberHandlers.scala.html#876844" title="(=&gt; List[_2968.intp.global.Symbol]) forSome { val _2968: scala.tools.nsc.interpreter.MemberHandlers }">implicitSymbols</a>
        <span class="keyword">val</span> <a title="List[String]" id="877506">found</a>          = <a href="#876799" title="List[String]">tokens</a> <a href="../../../collection/TraversableLike.scala.html#58073" title="(p: String =&gt; Boolean)List[String]">filter</a> <span class="delimiter">(</span><a href="#877500" title="scala.tools.nsc.interpreter.MemberHandlers#ImportHandler">handler</a> <a href="../../../collection/GenSetLike.scala.html#66403" title="(elem: String)Boolean">importsSymbolNamed</a> <a href="#877555" title="String">_</a><span class="delimiter">)</span>
        <span class="keyword">val</span> <a title="String" id="877507">typeMsg</a>        = <span title="String" class="keyword">if</span> <span class="delimiter">(</span><a href="#877503" title="List[_1412.intp.global.Symbol] forSome { val _1412: scala.tools.nsc.interpreter.MemberHandlers }">types</a>.<a href="../../../collection/SeqLike.scala.html#58787" title="=&gt; Boolean">isEmpty</a><span class="delimiter">)</span> <span title="String(&quot;&quot;)" class="string">&quot;&quot;</span> <span class="keyword">else</span> <a href="#877503" title="List[_1412.intp.global.Symbol] forSome { val _1412: scala.tools.nsc.interpreter.MemberHandlers }">types</a>.<a href="../../../collection/SeqLike.scala.html#58788" title="=&gt; Int">size</a> <a href="../../../Int.scala.html#57087" title="(x: String)String">+</a> <span title="String(&quot; types&quot;)" class="string">&quot; types&quot;</span>
        <span class="keyword">val</span> <a title="String" id="877508">termMsg</a>        = <span title="String" class="keyword">if</span> <span class="delimiter">(</span><a href="#877504" title="List[_1412.intp.global.Symbol] forSome { val _1412: scala.tools.nsc.interpreter.MemberHandlers }">terms</a>.<a href="../../../collection/SeqLike.scala.html#58787" title="=&gt; Boolean">isEmpty</a><span class="delimiter">)</span> <span title="String(&quot;&quot;)" class="string">&quot;&quot;</span> <span class="keyword">else</span> <a href="#877504" title="List[_1412.intp.global.Symbol] forSome { val _1412: scala.tools.nsc.interpreter.MemberHandlers }">terms</a>.<a href="../../../collection/SeqLike.scala.html#58788" title="=&gt; Int">size</a> <a href="../../../Int.scala.html#57087" title="(x: String)String">+</a> <span title="String(&quot; terms&quot;)" class="string">&quot; terms&quot;</span>
        <span class="keyword">val</span> <a title="String" id="877509">implicitMsg</a>    = <span title="String" class="keyword">if</span> <span class="delimiter">(</span><a href="#877505" title="List[_1413.intp.global.Symbol] forSome { val _1413: scala.tools.nsc.interpreter.MemberHandlers }">imps</a>.<a href="../../../collection/SeqLike.scala.html#58787" title="=&gt; Boolean">isEmpty</a><span class="delimiter">)</span> <span title="String(&quot;&quot;)" class="string">&quot;&quot;</span> <span class="keyword">else</span> <a href="#877505" title="List[_1413.intp.global.Symbol] forSome { val _1413: scala.tools.nsc.interpreter.MemberHandlers }">imps</a>.<a href="../../../collection/SeqLike.scala.html#58788" title="=&gt; Int">size</a> <a href="../../../Int.scala.html#57087" title="(x: String)String">+</a> <span title="String(&quot; are implicit&quot;)" class="string">&quot; are implicit&quot;</span>
        <span class="keyword">val</span> <a title="String" id="877510">foundMsg</a>       = <span title="String" class="keyword">if</span> <span class="delimiter">(</span><a href="#877506" title="List[String]">found</a>.<a href="../../../collection/SeqLike.scala.html#58787" title="=&gt; Boolean">isEmpty</a><span class="delimiter">)</span> <span title="String(&quot;&quot;)" class="string">&quot;&quot;</span> <span class="keyword">else</span> <a href="#877506" title="List[String]">found</a>.<a href="../../../collection/TraversableOnce.scala.html#58282" title="(start: String, sep: String, end: String)String">mkString</a><span class="delimiter">(</span><span title="String(&quot; // imports: &quot;)" class="string">&quot; // imports: &quot;</span>, <span title="String(&quot;, &quot;)" class="string">&quot;, &quot;</span>, <span title="String(&quot;&quot;)" class="string">&quot;&quot;</span><span class="delimiter">)</span>
        <span class="keyword">val</span> <a title="String" id="877511">statsMsg</a>       = <a href="../../../collection/immutable/List.scala.html#62451" title="(xs: String*)List[String]">List</a><span class="delimiter">(</span><a href="#877507" title="String">typeMsg</a>, <a href="#877508" title="String">termMsg</a>, <a href="#877509" title="String">implicitMsg</a><span class="delimiter">)</span> <a href="../../../collection/TraversableLike.scala.html#58074" title="(p: String =&gt; Boolean)List[String]">filterNot</a> <span class="delimiter">(</span><a href="#877593" title="String">_</a> <span title="(x$1: AnyRef)Boolean">==</span> <span title="String(&quot;&quot;)" class="string">&quot;&quot;</span><span class="delimiter">)</span> <a href="../../../collection/TraversableOnce.scala.html#58282" title="(start: String, sep: String, end: String)String">mkString</a> <span class="delimiter">(</span><span title="String(&quot;(&quot;)" class="string">&quot;(&quot;</span>, <span title="String(&quot;, &quot;)" class="string">&quot;, &quot;</span>, <span title="String(&quot;)&quot;)" class="string">&quot;)&quot;</span><span class="delimiter">)</span>

        <a href="#632787" title="=&gt; scala.tools.nsc.interpreter.IMain">intp</a>.<a href="IMain.scala.html#632478" title="=&gt; scala.tools.nsc.interpreter.ReplReporter">reporter</a>.<a href="ReplReporter.scala.html#874466" title="(msg: String)Unit">printMessage</a><span class="delimiter">(</span><a href="../../../Predef.scala.html#7604" title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps" class="string">&quot;%2d) %-30s %s%s&quot;</a>.<a href="../../../collection/immutable/StringLike.scala.html#59882" title="(args: Any*)String">format</a><span class="delimiter">(</span>
          <a href="#877501" title="Int">idx</a> <a href="../../../Int.scala.html#57154" title="(x: Int)Int">+</a> <span title="Int(1)" class="int">1</span>,
          <a href="#877500" title="scala.tools.nsc.interpreter.MemberHandlers#ImportHandler">handler</a>.<a href="MemberHandlers.scala.html#876858" title="=&gt; String">importString</a>,
          <a href="#877511" title="String">statsMsg</a>,
          <a href="#877510" title="String">foundMsg</a>
        <span class="delimiter">)</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(line: String)ILoop.this.Result" id="632848">implicitsCommand</a><span class="delimiter">(</span><a title="String" id="876659">line</a>: <span title="String">String</span><span class="delimiter">)</span>: <a href="LoopCommands.scala.html#632911" title="ILoop.this.Result">Result</a> = <a href="#632791" title="(f: scala.tools.nsc.interpreter.IMain =&gt; ILoop.this.Result)ILoop.this.Result">onIntp</a> <span class="delimiter">{</span> <a title="scala.tools.nsc.interpreter.IMain" id="877615">intp</a> =&gt;
    <span class="keyword">import</span> <a href="#877615" title="scala.tools.nsc.interpreter.IMain">intp</a>._
    <span class="keyword">import</span> <a href="IMain.scala.html#632489" title="=&gt; scala.tools.nsc.Global">global</a>._

    <span class="keyword">def</span> <a title="(x: Any)Unit" id="877618">p</a><span class="delimiter">(</span><a title="Any" id="877621">x</a>: <span title="Any">Any</span><span class="delimiter">)</span> = <a href="#877615" title="scala.tools.nsc.interpreter.IMain">intp</a>.<a href="IMain.scala.html#632478" title="=&gt; scala.tools.nsc.interpreter.ReplReporter">reporter</a>.<a href="ReplReporter.scala.html#874466" title="(msg: String)Unit">printMessage</a><span class="delimiter">(</span><span title="String(&quot;&quot;)" class="string">&quot;&quot;</span> <span title="(x$1: Any)String">+</span> <a href="#877621" title="Any">x</a><span class="delimiter">)</span>

    // If an argument is given, only show a source with that
    // in its name somewhere.
    <span class="keyword">val</span> <a title="Array[String]" id="877619">args</a>     = <a href="#876659" title="String">line</a> <span title="(x$1: String)Array[String]">split</span> <span title="String(&quot;\\s+&quot;)" class="string">&quot;\\s+&quot;</span>
    <span class="keyword">val</span> <a title="List[(intp.global.Symbol, List[intp.global.Symbol])]" id="877620">filtered</a> = <a href="#877615" title="scala.tools.nsc.interpreter.IMain">intp</a>.<a href="Imports.scala.html#632422" title="=&gt; List[(intp.global.Symbol, List[intp.global.Symbol])]">implicitSymbolsBySource</a> <a href="../../../collection/TraversableLike.scala.html#58073" title="(p: ((intp.global.Symbol, List[intp.global.Symbol])) =&gt; Boolean)List[(intp.global.Symbol, List[intp.global.Symbol])]">filter</a> <a href="#877631" title="(intp.global.Symbol, List[intp.global.Symbol])" class="delimiter">{</a>
      <span class="keyword">case</span> <span class="delimiter">(</span><a href="../../../Tuple2.scala.html#60635" title="intp.global.Symbol" id="877634">source</a>, <a href="../../../Tuple2.scala.html#60637" title="List[intp.global.Symbol]" id="877635">syms</a><span class="delimiter">)</span> =&gt;
        <span class="delimiter">(</span><a href="../../../Predef.scala.html#7555" title="(xs: Array[String])scala.collection.mutable.ArrayOps[String]">args</a> <a href="../../../collection/SeqLike.scala.html#58824" title="(elem: Any)Boolean">contains</a> <span title="String(&quot;-v&quot;)" class="string">&quot;-v&quot;</span><span class="delimiter">)</span> <a href="#3332590" title="(x: Boolean)Boolean">||</a> <span class="delimiter">{</span>
          <span title="Boolean" class="keyword">if</span> <span class="delimiter">(</span><a href="#876659" title="String">line</a> <span title="(x$1: AnyRef)Boolean">==</span> <span title="String(&quot;&quot;)" class="string">&quot;&quot;</span><span class="delimiter">)</span> <span class="delimiter">(</span><a href="#877634" title="intp.global.Symbol">source</a>.<a href="../../../reflect/internal/Symbols.scala.html#411334" title="=&gt; String">fullName</a>.<span title="()String">toString</span> <span title="(x$1: AnyRef)Boolean">!=</span> <span title="String(&quot;scala.Predef&quot;)" class="string">&quot;scala.Predef&quot;</span><span class="delimiter">)</span>
          <span class="keyword">else</span> <span class="delimiter">(</span><a href="../../../Predef.scala.html#7555" title="(xs: Array[String])scala.collection.mutable.ArrayOps[String]">args</a> <a href="../../../collection/IndexedSeqOptimized.scala.html#59125" title="(p: String =&gt; Boolean)Boolean">exists</a> <span class="delimiter">(</span><a href="#877634" title="intp.global.Symbol">source</a>.<a href="../../../reflect/internal/Symbols.scala.html#411087" title="=&gt; source.NameType">name</a>.<span title="()String">toString</span> <span title="(x$1: CharSequence)Boolean">contains</span> <a href="#877914" title="String">_</a><span class="delimiter">)</span><span class="delimiter">)</span>
        <span class="delimiter">}</span>
    <span class="delimiter">}</span>

    <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#877620" title="List[(intp.global.Symbol, List[intp.global.Symbol])]">filtered</a>.<a href="../../../collection/SeqLike.scala.html#58787" title="=&gt; Boolean">isEmpty</a><span class="delimiter">)</span>
      <span title="Nothing" class="keyword">return</span> <a href="LoopCommands.scala.html#875674" title="implicit scala.tools.nsc.interpreter.LoopCommands.Result.resultFromString : (msg: String)ILoop.this.Result" class="string">&quot;No implicits have been imported other than those in Predef.&quot;</a>

    <a href="#877620" title="List[(intp.global.Symbol, List[intp.global.Symbol])]">filtered</a> <a href="LoopCommands.scala.html#875673" title="implicit scala.tools.nsc.interpreter.LoopCommands.Result.resultFromUnit : (x: Unit)ILoop.this.Result">foreach</a> <a href="#877936" title="(intp.global.Symbol, List[intp.global.Symbol])" class="delimiter">{</a>
      <span class="keyword">case</span> <span class="delimiter">(</span><a href="../../../Tuple2.scala.html#60635" title="intp.global.Symbol" id="877939">source</a>, <a href="../../../Tuple2.scala.html#60637" title="List[intp.global.Symbol]" id="877940">syms</a><span class="delimiter">)</span> =&gt;
        <a href="#877618" title="(x: Any)Unit">p</a><span class="delimiter">(</span><span title="String(&quot;/* &quot;)" class="string">&quot;/* &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#877940" title="List[intp.global.Symbol]">syms</a>.<a href="../../../collection/SeqLike.scala.html#58788" title="=&gt; Int">size</a> <span title="(x$1: Any)String">+</span> <span title="String(&quot; implicit members imported from &quot;)" class="string">&quot; implicit members imported from &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#877939" title="intp.global.Symbol">source</a>.<a href="../../../reflect/internal/Symbols.scala.html#411334" title="=&gt; String">fullName</a> <span title="(x$1: Any)String">+</span> <span title="String(&quot; */&quot;)" class="string">&quot; */&quot;</span><span class="delimiter">)</span>

        // This groups the members by where the symbol is defined
        <span class="keyword">val</span> <a title="scala.collection.immutable.Map[intp.global.Symbol,List[intp.global.Symbol]]" id="877941">byOwner</a> = <a href="#877940" title="List[intp.global.Symbol]">syms</a> <a href="../../../collection/TraversableLike.scala.html#58081" title="(f: intp.global.Symbol =&gt; intp.global.Symbol)scala.collection.immutable.Map[intp.global.Symbol,List[intp.global.Symbol]]">groupBy</a> <span class="delimiter">(</span><a href="#877951" title="intp.global.Symbol">_</a>.<a href="../../../reflect/internal/Symbols.scala.html#411315" title="=&gt; intp.global.Symbol">owner</a><span class="delimiter">)</span>
        <span class="keyword">val</span> <a title="List[(intp.global.Symbol, List[intp.global.Symbol])]" id="877942">sortedOwners</a> = <a href="#877941" title="scala.collection.immutable.Map[intp.global.Symbol,List[intp.global.Symbol]]">byOwner</a>.<a href="../../../collection/TraversableOnce.scala.html#58263" title="=&gt; List[(intp.global.Symbol, List[intp.global.Symbol])]">toList</a> <a href="../../../collection/SeqLike.scala.html#58869" title="(f: ((intp.global.Symbol, List[intp.global.Symbol])) =&gt; Int)(implicit ord: scala.math.Ordering[Int])List[(intp.global.Symbol, List[intp.global.Symbol])]">sortBy</a> <a href="#877959" title="(intp.global.Symbol, List[intp.global.Symbol])" class="delimiter">{</a> <span class="keyword">case</span> <span class="delimiter">(</span><a href="../../../Tuple2.scala.html#60635" title="intp.global.Symbol" id="877962">owner</a>, <a href="../../../Tuple2.scala.html#60637" title="List[intp.global.Symbol]" id="3332595">_</a><span class="delimiter">)</span> =&gt; <a href="../Global.scala.html#537702" title="(op: =&gt; Int)Int">afterTyper</a><a href="#3332597" title="(x: Int)Int" class="delimiter">(</a><a href="#877939" title="intp.global.Symbol">source</a>.<a href="../../../reflect/internal/Symbols.scala.html#411367" title="=&gt; intp.global.Type">info</a>.<a href="../../../reflect/internal/Types.scala.html#408491" title="=&gt; List[intp.global.Symbol]">baseClasses</a> <a href="../../../collection/GenSeqLike.scala.html#58689" title="(elem: intp.global.Symbol)Int">indexOf</a> <a href="#877962" title="intp.global.Symbol">owner</a><span class="delimiter">)</span> <span class="delimiter">}</span>

        <a href="#877942" title="List[(intp.global.Symbol, List[intp.global.Symbol])]">sortedOwners</a> <a href="../../../collection/immutable/List.scala.html#62719" title="(f: ((intp.global.Symbol, List[intp.global.Symbol])) =&gt; Unit)Unit">foreach</a> <a href="#878058" title="(intp.global.Symbol, List[intp.global.Symbol])" class="delimiter">{</a>
          <span class="keyword">case</span> <span class="delimiter">(</span><a href="../../../Tuple2.scala.html#60635" title="intp.global.Symbol" id="878061">owner</a>, <a href="../../../Tuple2.scala.html#60637" title="List[intp.global.Symbol]" id="878062">members</a><span class="delimiter">)</span> =&gt;
            // Within each owner, we cluster results based on the final result type
            // if there are more than a couple, and sort each cluster based on name.
            // This is really just trying to make the 100 or so implicits imported
            // by default into something readable.
            <span class="keyword">val</span> <a title="List[List[intp.global.Symbol]]" id="878063">memberGroups</a>: <a href="../../../collection/immutable/List.scala.html#11952" title="List[List[intp.global.Symbol]]">List</a><span class="delimiter">[</span>List<span class="delimiter">[</span>Symbol<span class="delimiter">]</span><span class="delimiter">]</span> = <span class="delimiter">{</span>
              <span class="keyword">val</span> <a title="List[(intp.global.Type, List[intp.global.Symbol])]" id="878065">groups</a> = <a href="#878062" title="List[intp.global.Symbol]">members</a> <a href="../../../collection/TraversableLike.scala.html#58081" title="(f: intp.global.Symbol =&gt; intp.global.Type)scala.collection.immutable.Map[intp.global.Type,List[intp.global.Symbol]]">groupBy</a> <span class="delimiter">(</span><a href="#878076" title="intp.global.Symbol">_</a>.<a href="../../../reflect/internal/Symbols.scala.html#411365" title="=&gt; intp.global.Type">tpe</a>.<a href="../../../reflect/internal/Types.scala.html#408427" title="=&gt; intp.global.Type">finalResultType</a><span class="delimiter">)</span> <a href="../../../collection/TraversableOnce.scala.html#58263" title="=&gt; List[(intp.global.Type, List[intp.global.Symbol])]">toList</a>
              <span class="keyword">val</span> <a href="#3332603" title="(x: (List[(intp.global.Type, List[intp.global.Symbol])], List[(intp.global.Type, List[intp.global.Symbol])]))(List[(intp.global.Type, List[intp.global.Symbol])], List[(intp.global.Type, List[intp.global.Symbol])])" class="delimiter">(</a><a href="../../../Tuple2.scala.html#60635" title="List[(intp.global.Type, List[intp.global.Symbol])]" id="878067">big</a>, <a href="../../../Tuple2.scala.html#60637" title="List[(intp.global.Type, List[intp.global.Symbol])]" id="878068">small</a><span class="delimiter">)</span> = <a href="#878065" title="List[(intp.global.Type, List[intp.global.Symbol])]">groups</a> <a href="../../../collection/TraversableLike.scala.html#58080" title="(p: ((intp.global.Type, List[intp.global.Symbol])) =&gt; Boolean)(List[(intp.global.Type, List[intp.global.Symbol])], List[(intp.global.Type, List[intp.global.Symbol])])">partition</a> <span class="delimiter">(</span><a href="#878088" title="(intp.global.Type, List[intp.global.Symbol])">_</a>.<a href="../../../Tuple2.scala.html#60637" title="=&gt; List[intp.global.Symbol]">_2</a>.<a href="../../../collection/SeqLike.scala.html#58788" title="=&gt; Int">size</a> <a href="../../../Int.scala.html#57125" title="(x: Int)Boolean">&gt;</a> <span title="Int(3)" class="int">3</span><span class="delimiter">)</span>
              <span class="keyword">val</span> <a title="List[List[intp.global.Symbol]]" id="878069">xss</a> = <span class="delimiter">(</span>
                <span class="delimiter">(</span><a href="#878067" title="List[(intp.global.Type, List[intp.global.Symbol])]">big</a> <a href="../../../collection/SeqLike.scala.html#58869" title="(f: ((intp.global.Type, List[intp.global.Symbol])) =&gt; String)(implicit ord: scala.math.Ordering[String])List[(intp.global.Type, List[intp.global.Symbol])]">sortBy</a> <span class="delimiter">(</span><a href="#878110" title="(intp.global.Type, List[intp.global.Symbol])">_</a>.<a href="../../../Tuple2.scala.html#60635" title="=&gt; intp.global.Type">_1</a>.<a href="../../../reflect/internal/Types.scala.html#408499" title="()String">toString</a><span class="delimiter">)</span> <a href="../../../collection/TraversableLike.scala.html#58063" title="(f: ((intp.global.Type, List[intp.global.Symbol])) =&gt; List[intp.global.Symbol])(implicit bf: scala.collection.generic.CanBuildFrom[List[(intp.global.Type, List[intp.global.Symbol])],List[intp.global.Symbol],List[List[intp.global.Symbol]]])List[List[intp.global.Symbol]]">map</a> <span class="delimiter">(</span><a href="#878186" title="(intp.global.Type, List[intp.global.Symbol])">_</a>.<a href="../../../Tuple2.scala.html#60637" title="=&gt; List[intp.global.Symbol]">_2</a><span class="delimiter">)</span><span class="delimiter">)</span> <a href="../../../collection/SeqLike.scala.html#58855" title="(elem: List[intp.global.Symbol])(implicit bf: scala.collection.generic.CanBuildFrom[List[List[intp.global.Symbol]],List[intp.global.Symbol],List[List[intp.global.Symbol]]])List[List[intp.global.Symbol]]">:+</a>
                <span class="delimiter">(</span><a href="#878068" title="List[(intp.global.Type, List[intp.global.Symbol])]">small</a> <a href="../../../collection/TraversableLike.scala.html#58068" title="(f: ((intp.global.Type, List[intp.global.Symbol])) =&gt; scala.collection.GenTraversableOnce[intp.global.Symbol])(implicit bf: scala.collection.generic.CanBuildFrom[List[(intp.global.Type, List[intp.global.Symbol])],intp.global.Symbol,List[intp.global.Symbol]])List[intp.global.Symbol]">flatMap</a> <span class="delimiter">(</span><a href="#878254" title="(intp.global.Type, List[intp.global.Symbol])">_</a>.<a href="../../../Tuple2.scala.html#60637" title="=&gt; List[intp.global.Symbol]">_2</a><span class="delimiter">)</span><span class="delimiter">)</span>
              <span class="delimiter">)</span>

              <a href="#878069" title="List[List[intp.global.Symbol]]">xss</a> <a href="../../../collection/TraversableLike.scala.html#58063" title="(f: List[intp.global.Symbol] =&gt; List[intp.global.Symbol])(implicit bf: scala.collection.generic.CanBuildFrom[List[List[intp.global.Symbol]],List[intp.global.Symbol],List[List[intp.global.Symbol]]])List[List[intp.global.Symbol]]">map</a> <span class="delimiter">(</span><a title="List[intp.global.Symbol]" id="878327">xs</a> =&gt; <a href="#878327" title="List[intp.global.Symbol]">xs</a> <a href="../../../collection/SeqLike.scala.html#58869" title="(f: intp.global.Symbol =&gt; String)(implicit ord: scala.math.Ordering[String])List[intp.global.Symbol]">sortBy</a> <span class="delimiter">(</span><a href="#878334" title="intp.global.Symbol">_</a>.<a href="../../../reflect/internal/Symbols.scala.html#411087" title="=&gt; x$21.NameType">name</a>.<span title="()String">toString</span><span class="delimiter">)</span><span class="delimiter">)</span>
            <span class="delimiter">}</span>

            <span class="keyword">val</span> <a title="String" id="878064">ownerMessage</a> = <span title="String" class="keyword">if</span> <span class="delimiter">(</span><a href="#878061" title="intp.global.Symbol">owner</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="#877939" title="intp.global.Symbol">source</a><span class="delimiter">)</span> <span title="String(&quot; defined in &quot;)" class="string">&quot; defined in &quot;</span> <span class="keyword">else</span> <span title="String(&quot; inherited from &quot;)" class="string">&quot; inherited from &quot;</span>
            <a href="#877618" title="(x: Any)Unit">p</a><span class="delimiter">(</span><span title="String(&quot;  /* &quot;)" class="string">&quot;  /* &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#878062" title="List[intp.global.Symbol]">members</a>.<a href="../../../collection/SeqLike.scala.html#58788" title="=&gt; Int">size</a> <span title="(x$1: Any)String">+</span> <a href="#878064" title="String">ownerMessage</a> <span title="(x$1: Any)String">+</span> <a href="#878061" title="intp.global.Symbol">owner</a>.<a href="../../../reflect/internal/Symbols.scala.html#411334" title="=&gt; String">fullName</a> <span title="(x$1: Any)String">+</span> <span title="String(&quot; */&quot;)" class="string">&quot; */&quot;</span><span class="delimiter">)</span>

            <a href="#878063" title="List[List[intp.global.Symbol]]">memberGroups</a> <a href="../../../collection/immutable/List.scala.html#62719" title="(f: List[intp.global.Symbol] =&gt; Unit)Unit">foreach</a> <span class="delimiter">{</span> <a title="List[intp.global.Symbol]" id="878450">group</a> =&gt;
              <a href="#878450" title="List[intp.global.Symbol]">group</a> <a href="../../../collection/immutable/List.scala.html#62719" title="(f: intp.global.Symbol =&gt; Unit)Unit">foreach</a> <span class="delimiter">(</span><a title="intp.global.Symbol" id="878471">s</a> =&gt; <a href="#877618" title="(x: Any)Unit">p</a><span class="delimiter">(</span><span title="String(&quot;  &quot;)" class="string">&quot;  &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#877615" title="scala.tools.nsc.interpreter.IMain">intp</a>.<a href="IMain.scala.html#632647" title="(sym: intp.global.Symbol)String">symbolDefString</a><span class="delimiter">(</span><a href="#878471" title="intp.global.Symbol">s</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
              <a href="#877618" title="(x: Any)Unit">p</a><span class="delimiter">(</span><span title="String(&quot;&quot;)" class="string">&quot;&quot;</span><span class="delimiter">)</span>
            <span class="delimiter">}</span>
        <span class="delimiter">}</span>
        <a href="#877618" title="(x: Any)Unit">p</a><span class="delimiter">(</span><span title="String(&quot;&quot;)" class="string">&quot;&quot;</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="keyword">private</span> <span class="keyword">def</span> <a title="()Option[scala.reflect.io.File]" id="632849">findToolsJar</a><span class="delimiter">(</span><span class="delimiter">)</span> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="scala.reflect.io.Directory" id="878540">jdkPath</a> = <a href="../../../reflect/io/Directory.scala.html#531519" title="(path: scala.reflect.io.Path)scala.reflect.io.Directory">Directory</a><span class="delimiter">(</span><a href="../../../reflect/io/Path.scala.html#531009" title="implicit scala.reflect.io.Path.string2path : (s: String)scala.reflect.io.Path">jdkHome</a><span class="delimiter">)</span>
    <span class="keyword">val</span> <a title="scala.reflect.io.File" id="878541">jar</a>     = <a href="#878540" title="scala.reflect.io.Directory">jdkPath</a> <a href="../../../reflect/io/Path.scala.html#530880" title="(child: scala.reflect.io.Path)scala.reflect.io.Path">/</a> <a href="../../../reflect/io/Path.scala.html#531009" title="implicit scala.reflect.io.Path.string2path : (s: String)scala.reflect.io.Path" class="string">&quot;lib&quot;</a> <a href="../../../reflect/io/Path.scala.html#530880" title="(child: scala.reflect.io.Path)scala.reflect.io.Path">/</a> <a href="../../../reflect/io/Path.scala.html#531009" title="implicit scala.reflect.io.Path.string2path : (s: String)scala.reflect.io.Path" class="string">&quot;tools.jar&quot;</a> <a href="../../../reflect/io/Path.scala.html#530873" title="=&gt; scala.reflect.io.File">toFile</a>;

    <span title="Option[scala.reflect.io.File]" class="keyword">if</span> <span class="delimiter">(</span><a href="#878541" title="scala.reflect.io.File">jar</a> <a href="../../../reflect/io/Path.scala.html#530910" title="=&gt; Boolean">isFile</a><span class="delimiter">)</span>
      <a href="../../../Option.scala.html#63128" title="(x: scala.reflect.io.File)Some[scala.reflect.io.File]">Some</a><span class="delimiter">(</span><a href="#878541" title="scala.reflect.io.File">jar</a><span class="delimiter">)</span>
    <span class="keyword">else</span> <span title="Option[scala.reflect.io.File]" class="keyword">if</span> <span class="delimiter">(</span><a href="#878540" title="scala.reflect.io.Directory">jdkPath</a>.<a href="../../../reflect/io/Path.scala.html#530911" title="=&gt; Boolean">isDirectory</a><span class="delimiter">)</span>
      <a href="#878540" title="scala.reflect.io.Directory">jdkPath</a>.<a href="../../../reflect/io/Directory.scala.html#531534" title="=&gt; Iterator[scala.reflect.io.File]">deepFiles</a> <a href="../../../collection/Iterator.scala.html#66803" title="(p: scala.reflect.io.File =&gt; Boolean)Option[scala.reflect.io.File]">find</a> <span class="delimiter">(</span><a href="#878559" title="scala.reflect.io.File">_</a>.<a href="../../../reflect/io/Path.scala.html#530885" title="=&gt; String">name</a> <span title="(x$1: AnyRef)Boolean">==</span> <span title="String(&quot;tools.jar&quot;)" class="string">&quot;tools.jar&quot;</span><span class="delimiter">)</span>
    <span class="keyword">else</span> <a href="../../../Option.scala.html#1585" title="None.type">None</a>
  <span class="delimiter">}</span>
  <span class="keyword">private</span> <span class="keyword">def</span> <a title="()scala.tools.nsc.util.ScalaClassLoader" id="632850">addToolsJarToLoader</a><span class="delimiter">(</span><span class="delimiter">)</span> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="scala.tools.nsc.util.ScalaClassLoader" id="878567">cl</a> = <a href="#632849" title="()Option[scala.reflect.io.File]">findToolsJar</a> <span class="keyword">match</span> <span class="delimiter">{</span>
      <span class="keyword">case</span> Some<a href="#3332619" title="scala.tools.nsc.util.ScalaClassLoader" id="3332620" class="delimiter">(</a><a href="../../../Option.scala.html#63132" title="scala.reflect.io.File" id="878569">tools</a><span class="delimiter">)</span> =&gt; <a href="../util/ScalaClassLoader.scala.html#50234" title="scala.tools.nsc.util.ScalaClassLoader.type">ScalaClassLoader</a>.<a href="../util/ScalaClassLoader.scala.html#594241" title="(urls: Seq[java.net.URL], parent: ClassLoader)scala.tools.nsc.util.ScalaClassLoader.URLClassLoader">fromURLs</a><a href="#3332622" title="(x: scala.tools.nsc.util.ScalaClassLoader)scala.tools.nsc.util.ScalaClassLoader" class="delimiter">(</a><a href="../../../collection/generic/GenericCompanion.scala.html#59933" title="(elems: java.net.URL*)Seq[java.net.URL]">Seq</a><span class="delimiter">(</span><a href="#878569" title="scala.reflect.io.File">tools</a>.<a href="../../../reflect/io/Path.scala.html#530878" title="=&gt; java.net.URL">toURL</a><span class="delimiter">)</span>, <a href="#632787" title="=&gt; scala.tools.nsc.interpreter.IMain">intp</a>.<a href="IMain.scala.html#632527" title="=&gt; scala.tools.nsc.interpreter.AbstractFileClassLoader">classLoader</a><span class="delimiter">)</span>
      <span class="keyword">case</span> _           =&gt; <a href="#632787" title="=&gt; scala.tools.nsc.interpreter.IMain">intp</a>.<a href="#3332622" title="(x: scala.tools.nsc.util.ScalaClassLoader)scala.tools.nsc.util.ScalaClassLoader">classLoader</a>
    <span class="delimiter">}</span>
    <span title="scala.tools.nsc.util.ScalaClassLoader" class="keyword">if</span> <span class="delimiter">(</span><a href="../../util/Javap.scala.html#51846" title="scala.tools.util.Javap.type">Javap</a>.<a href="../../util/Javap.scala.html#728382" title="(cl: scala.tools.nsc.util.ScalaClassLoader)Boolean">isAvailable</a><span class="delimiter">(</span><a href="#878567" title="scala.tools.nsc.util.ScalaClassLoader">cl</a><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">{</span>
      <a href="ReplConfig.scala.html#55704" title="(msg: =&gt; String)Unit">repldbg</a><span class="delimiter">(</span><span title="String(&quot;:javap available.&quot;)" class="string">&quot;:javap available.&quot;</span><span class="delimiter">)</span>
      <a href="#878567" title="scala.tools.nsc.util.ScalaClassLoader">cl</a>
    <span class="delimiter">}</span>
    <span class="keyword">else</span> <span class="delimiter">{</span>
      <a href="ReplConfig.scala.html#55704" title="(msg: =&gt; String)Unit">repldbg</a><span class="delimiter">(</span><span title="String(&quot;:javap unavailable: no tools.jar at &quot;)" class="string">&quot;:javap unavailable: no tools.jar at &quot;</span> <span title="(x$1: Any)String">+</span> <a href="../../../util/Properties.scala.html#80198" title="=&gt; String">jdkHome</a><span class="delimiter">)</span>
      <a href="#632787" title="=&gt; scala.tools.nsc.interpreter.IMain">intp</a>.<a href="IMain.scala.html#632527" title="=&gt; scala.tools.nsc.interpreter.AbstractFileClassLoader">classLoader</a>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="()scala.tools.util.JavapClass" id="632851">newJavap</a><span class="delimiter">(</span><span class="delimiter">)</span> = <a href="#878592" title="scala.tools.util.JavapClass" class="keyword">new</a> <a href="../../util/Javap.scala.html#51788" title="anonymous class $anon extends scala.tools.util.JavapClass" id="878592">JavapClass</a><span class="delimiter">(</span><a href="#632850" title="()scala.tools.nsc.util.ScalaClassLoader">addToolsJarToLoader</a><span class="delimiter">(</span><span class="delimiter">)</span>, <span title="scala.tools.nsc.interpreter.IMain.ReplStrippingWriter" class="keyword">new</span> <a href="IMain.scala.html#38872" title="scala.tools.nsc.interpreter.IMain.type">IMain</a>.<a href="IMain.scala.html#632678" title="scala.tools.nsc.interpreter.IMain.ReplStrippingWriter">ReplStrippingWriter</a><span class="delimiter">(</span><a href="#632787" title="=&gt; scala.tools.nsc.interpreter.IMain">intp</a><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span class="keyword">override</span> <span class="keyword">def</span> <a title="(path: String)Array[Byte]" id="878594">tryClass</a><span class="delimiter">(</span><a title="String" id="878595">path</a>: <span title="String">String</span><span class="delimiter">)</span>: <a href="../../../Array.scala.html#174" title="Array[Byte]">Array</a><span class="delimiter">[</span>Byte<span class="delimiter">]</span> = <span class="delimiter">{</span>
      <span class="keyword">val</span> <a href="../../../collection/immutable/List.scala.html#206583" title="String" id="878625">hd</a> <a href="#3332627" title="(String, List[String])" id="3332628">::</a> <a href="../../../collection/immutable/List.scala.html#206584" title="List[String]" id="878626">rest</a> = <a href="../../../Predef.scala.html#7604" title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps">path</a> <a href="../../../Predef.scala.html#7555" title="(xs: Array[String])scala.collection.mutable.ArrayOps[String]">split</a> <span title="Char('.')" class="char">'.'</span> <a href="../../../collection/TraversableOnce.scala.html#58263" title="=&gt; List[String]">toList</a>;
      // If there are dots in the name, the first segment is the
      // key to finding it.
      <span title="Array[Byte]" class="keyword">if</span> <span class="delimiter">(</span><a href="#878626" title="List[String]">rest</a>.<a href="../../../collection/TraversableOnce.scala.html#58191" title="=&gt; Boolean">nonEmpty</a><span class="delimiter">)</span> <span class="delimiter">{</span>
        <a href="#632787" title="=&gt; scala.tools.nsc.interpreter.IMain">intp</a> <a href="IMain.scala.html#632534" title="(id: String)Option[String]">optFlatName</a> <a href="#878625" title="String">hd</a> <span class="keyword">match</span> <span class="delimiter">{</span>
          <span class="keyword">case</span> Some<a href="#3332634" title="Array[Byte]" id="3332635" class="delimiter">(</a><a href="../../../Option.scala.html#63132" title="String" id="878868">flat</a><span class="delimiter">)</span> =&gt;
            <span class="keyword">val</span> <a title="String" id="878869">clazz</a> = <a href="#878868" title="String">flat</a> <a href="../../../collection/immutable/List.scala.html#62685" title="(x: String)List[String]">::</a> <a href="#878626" title="List[String]">rest</a> <a href="../../../collection/TraversableOnce.scala.html#58283" title="(sep: String)String">mkString</a> <a href="../../../reflect/NameTransformer.scala.html#86850" title="=&gt; String">NAME_JOIN_STRING</a>
            <span class="keyword">val</span> <a title="Array[Byte]" id="878870">bytes</a> = <a href="#878592" title="scala.tools.util.JavapClass" class="keyword">super</a>.<a href="../../util/Javap.scala.html#728372" title="(path: String)Array[Byte]">tryClass</a><span class="delimiter">(</span><a href="#878869" title="String">clazz</a><span class="delimiter">)</span>
            <span title="Array[Byte]" class="keyword">if</span> <span class="delimiter">(</span><a href="../../../Predef.scala.html#7549" title="implicit scala.Predef.byteArrayOps : (xs: Array[Byte])scala.collection.mutable.ArrayOps[Byte]">bytes</a>.<a href="../../../collection/TraversableOnce.scala.html#58191" title="=&gt; Boolean">nonEmpty</a><span class="delimiter">)</span> <a href="#878870" title="Array[Byte]">bytes</a>
            <span class="keyword">else</span> <a href="#878592" title="scala.tools.util.JavapClass" class="keyword">super</a>.<a href="../../util/Javap.scala.html#728372" title="(path: String)Array[Byte]">tryClass</a><span class="delimiter">(</span><a href="#878869" title="String">clazz</a> <span title="(x$1: Any)String">+</span> <a href="../../../reflect/NameTransformer.scala.html#86848" title="=&gt; String">MODULE_SUFFIX_STRING</a><span class="delimiter">)</span>
          <span class="keyword">case</span> _          =&gt; <a href="#878592" title="scala.tools.util.JavapClass" class="keyword">super</a>.<a href="../../util/Javap.scala.html#728372" title="(path: String)Array[Byte]">tryClass</a><a href="#3332637" title="(x: Array[Byte])Array[Byte]" class="delimiter">(</a><a href="#878595" title="String">path</a><span class="delimiter">)</span>
        <span class="delimiter">}</span>
      <span class="delimiter">}</span>
      <span class="keyword">else</span> <span class="delimiter">{</span>
        // Look for Foo first, then Foo$, but if Foo$ is given explicitly,
        // we have to drop the $ to find object Foo, then tack it back onto
        // the end of the flattened name.
        <span class="keyword">def</span> <a title="=&gt; String" id="878936">className</a>  = <a href="#632787" title="=&gt; scala.tools.nsc.interpreter.IMain">intp</a> <a href="IMain.scala.html#632533" title="(id: String)String">flatName</a> <a href="#878595" title="String">path</a>
        <span class="keyword">def</span> <a title="=&gt; String" id="878937">moduleName</a> = <span class="delimiter">(</span><a href="#632787" title="=&gt; scala.tools.nsc.interpreter.IMain">intp</a> <a href="IMain.scala.html#632533" title="(id: String)String">flatName</a> <a href="../../../Predef.scala.html#7604" title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps">path</a>.<a href="../../../collection/immutable/StringLike.scala.html#59861" title="(suffix: String)String">stripSuffix</a><span class="delimiter">(</span><a href="../../../reflect/NameTransformer.scala.html#86848" title="=&gt; String">MODULE_SUFFIX_STRING</a><span class="delimiter">)</span><span class="delimiter">)</span> <span title="(x$1: Any)String">+</span> <a href="../../../reflect/NameTransformer.scala.html#86848" title="=&gt; String">MODULE_SUFFIX_STRING</a>

        <span class="keyword">val</span> <a title="Array[Byte]" id="878938">bytes</a> = <a href="#878592" title="scala.tools.util.JavapClass" class="keyword">super</a>.<a href="../../util/Javap.scala.html#728372" title="(path: String)Array[Byte]">tryClass</a><span class="delimiter">(</span><a href="#878936" title="=&gt; String">className</a><span class="delimiter">)</span>
        <span title="Array[Byte]" class="keyword">if</span> <span class="delimiter">(</span><a href="../../../Predef.scala.html#7549" title="implicit scala.Predef.byteArrayOps : (xs: Array[Byte])scala.collection.mutable.ArrayOps[Byte]">bytes</a>.<a href="../../../collection/TraversableOnce.scala.html#58191" title="=&gt; Boolean">nonEmpty</a><span class="delimiter">)</span> <a href="#878938" title="Array[Byte]">bytes</a>
        <span class="keyword">else</span> <a href="#878592" title="scala.tools.util.JavapClass" class="keyword">super</a>.<a href="../../util/Javap.scala.html#728372" title="(path: String)Array[Byte]">tryClass</a><span class="delimiter">(</span><a href="#878937" title="=&gt; String">moduleName</a><span class="delimiter">)</span>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>
  <span class="keyword">private</span> <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="scala.tools.util.Javap" id="632853">javap</a> = <a href="ReplConfig.scala.html#55713" title="[T](label: String, alt: =&gt; T)(body: =&gt; T)T">substituteAndLog</a><span title="(label: String, alt: =&gt; scala.tools.util.Javap)(body: =&gt; scala.tools.util.Javap)scala.tools.util.Javap" class="delimiter">[</span><a href="../../util/Javap.scala.html#51845" title="scala.tools.util.Javap">Javap</a><span class="delimiter">]</span><span class="delimiter">(</span><span title="String(&quot;javap&quot;)" class="string">&quot;javap&quot;</span>, <a href="../../util/Javap.scala.html#51819" title="scala.tools.util.NoJavap.type">NoJavap</a><span class="delimiter">)</span><span class="delimiter">(</span><a href="#632851" title="()scala.tools.util.JavapClass">newJavap</a><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span>

  // Still todo: modules.
  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(line0: String)ILoop.this.Result" id="632854">typeCommand</a><span class="delimiter">(</span><a title="String" id="876754">line0</a>: <span title="String">String</span><span class="delimiter">)</span>: <a href="LoopCommands.scala.html#632911" title="ILoop.this.Result">Result</a> = <span class="delimiter">{</span>
    <a href="#876754" title="String">line0</a>.<a href="#3332642" title="()String">trim</a> <span class="keyword">match</span> <span class="delimiter">{</span>
      <span class="keyword">case</span> <a href="#3332642" title="ILoop.this.Result" id="3332645" class="string">&quot;&quot;</a>                      =&gt; <a href="#3332647" title="(x: ILoop.this.Result)ILoop.this.Result" class="string">&quot;:type [-v] &lt;expression&gt;&quot;</a>
      <span class="keyword">case</span> s <span class="keyword">if</span> s <span title="(x$1: String)Boolean">startsWith</span> <span title="String(&quot;-v &quot;)" class="string">&quot;-v &quot;</span> =&gt; <a href="#632797" title="(expr: String, verbose: Boolean)ILoop.this.Result">typeCommandInternal</a><a href="#3332647" title="(x: ILoop.this.Result)ILoop.this.Result" class="delimiter">(</a><a href="../../../Predef.scala.html#7604" title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps">s</a> <a href="../../../collection/immutable/StringLike.scala.html#59860" title="(prefix: String)String">stripPrefix</a> <span title="String(&quot;-v &quot;)" class="string">&quot;-v &quot;</span> <span title="()String">trim</span>, <span title="Boolean(true)" class="keyword">true</span><span class="delimiter">)</span>
      <span class="keyword">case</span> s                       =&gt; <a href="#632797" title="(expr: String, verbose: Boolean)ILoop.this.Result">typeCommandInternal</a><a href="#3332647" title="(x: ILoop.this.Result)ILoop.this.Result" class="delimiter">(</a>s, <span title="Boolean(false)" class="keyword">false</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="keyword">private</span> <span class="keyword">def</span> <a title="()ILoop.this.Result" id="632855">warningsCommand</a><span class="delimiter">(</span><span class="delimiter">)</span>: <a href="LoopCommands.scala.html#632911" title="ILoop.this.Result">Result</a> = <span class="delimiter">{</span>
    <span title="ILoop.this.Result" class="keyword">if</span> <span class="delimiter">(</span><a href="#632787" title="=&gt; scala.tools.nsc.interpreter.IMain">intp</a>.<a href="IMain.scala.html#632582" title="=&gt; List[(scala.reflect.internal.util.Position, String)]">lastWarnings</a>.<a href="../../../collection/SeqLike.scala.html#58787" title="=&gt; Boolean">isEmpty</a><span class="delimiter">)</span>
      <a href="LoopCommands.scala.html#875674" title="implicit scala.tools.nsc.interpreter.LoopCommands.Result.resultFromString : (msg: String)ILoop.this.Result" class="string">&quot;Can't find any cached warnings.&quot;</a>
    <span class="keyword">else</span>
      <a href="#632787" title="=&gt; scala.tools.nsc.interpreter.IMain">intp</a>.<a href="IMain.scala.html#632582" title="=&gt; List[(scala.reflect.internal.util.Position, String)]">lastWarnings</a> <a href="LoopCommands.scala.html#875673" title="implicit scala.tools.nsc.interpreter.LoopCommands.Result.resultFromUnit : (x: Unit)ILoop.this.Result">foreach</a> <a href="#879072" title="(scala.reflect.internal.util.Position, String)" class="delimiter">{</a> <span class="keyword">case</span> <span class="delimiter">(</span><a href="../../../Tuple2.scala.html#60635" title="scala.reflect.internal.util.Position" id="879075">pos</a>, <a href="../../../Tuple2.scala.html#60637" title="String" id="879076">msg</a><span class="delimiter">)</span> =&gt; <a href="#632787" title="=&gt; scala.tools.nsc.interpreter.IMain">intp</a>.<a href="IMain.scala.html#632478" title="=&gt; scala.tools.nsc.interpreter.ReplReporter">reporter</a>.<a href="../reporters/Reporter.scala.html#539684" title="(pos: scala.reflect.internal.util.Position, msg: String)Unit">warning</a><a href="#3332658" title="(x: Unit)Unit" class="delimiter">(</a><a href="#879075" title="scala.reflect.internal.util.Position">pos</a>, <a href="#879076" title="String">msg</a><span class="delimiter">)</span> <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(line: String)ILoop.this.Result" id="632856">javapCommand</a><span class="delimiter">(</span><a title="String" id="876663">line</a>: <span title="String">String</span><span class="delimiter">)</span>: <a href="LoopCommands.scala.html#632911" title="ILoop.this.Result">Result</a> = <span class="delimiter">{</span>
    <span title="ILoop.this.Result" class="keyword">if</span> <span class="delimiter">(</span><a href="#632852" title="=&gt; scala.tools.util.Javap">javap</a> <span title="(x$1: AnyRef)Boolean">==</span> <span title="Null(null)" class="keyword">null</span><span class="delimiter">)</span>
      <a href="../../../Predef.scala.html#7604" title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps" class="string">&quot;:javap unavailable, no tools.jar at %s.  Set JDK_HOME.&quot;</a>.<a href="../../../collection/immutable/StringLike.scala.html#59882" title="(args: Any*)String">format</a><a href="LoopCommands.scala.html#875674" title="implicit scala.tools.nsc.interpreter.LoopCommands.Result.resultFromString : (msg: String)ILoop.this.Result" class="delimiter">(</a><a href="../../../util/Properties.scala.html#80198" title="=&gt; String">jdkHome</a><span class="delimiter">)</span>
    <span class="keyword">else</span> <span title="ILoop.this.Result" class="keyword">if</span> <span class="delimiter">(</span><a href="../../../util/Properties.scala.html#80185" title="=&gt; String">javaVersion</a> <span title="(x$1: String)Boolean">startsWith</span> <span title="String(&quot;1.7&quot;)" class="string">&quot;1.7&quot;</span><span class="delimiter">)</span>
      <a href="LoopCommands.scala.html#875674" title="implicit scala.tools.nsc.interpreter.LoopCommands.Result.resultFromString : (msg: String)ILoop.this.Result" class="string">&quot;:javap not yet working with java 1.7&quot;</a>
    <span class="keyword">else</span> <span title="ILoop.this.Result" class="keyword">if</span> <span class="delimiter">(</span><a href="#876663" title="String">line</a> <span title="(x$1: AnyRef)Boolean">==</span> <span title="String(&quot;&quot;)" class="string">&quot;&quot;</span><span class="delimiter">)</span>
      <a href="LoopCommands.scala.html#875674" title="implicit scala.tools.nsc.interpreter.LoopCommands.Result.resultFromString : (msg: String)ILoop.this.Result" class="string">&quot;:javap [-lcsvp] [path1 path2 ...]&quot;</a>
    <span class="keyword">else</span>
      <a href="../../util/Javap.scala.html#728348" title="(args: Seq[String])List[scala.tools.util.Javap.JpResult]">javap</a><span class="delimiter">(</span><a href="ReplStrings.scala.html#55752" title="(s: String)List[String]">words</a><span class="delimiter">(</span><a href="#876663" title="String">line</a><span class="delimiter">)</span><span class="delimiter">)</span> <a href="LoopCommands.scala.html#875673" title="implicit scala.tools.nsc.interpreter.LoopCommands.Result.resultFromUnit : (x: Unit)ILoop.this.Result">foreach</a> <span class="delimiter">{</span> <a title="scala.tools.util.Javap.JpResult" id="879113">res</a> =&gt;
        <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#879113" title="scala.tools.util.Javap.JpResult">res</a>.<a href="../../util/Javap.scala.html#728446" title="=&gt; Boolean">isError</a><span class="delimiter">)</span> <span title="Nothing" class="keyword">return</span> <span title="String(&quot;Failed: &quot;)" class="string">&quot;Failed: &quot;</span> <a href="LoopCommands.scala.html#875674" title="implicit scala.tools.nsc.interpreter.LoopCommands.Result.resultFromString : (msg: String)ILoop.this.Result">+</a> <a href="#879113" title="scala.tools.util.Javap.JpResult">res</a>.<a href="../../util/Javap.scala.html#728447" title="=&gt; res.ResultType">value</a>
        <span class="keyword">else</span> <a href="#879113" title="scala.tools.util.Javap.JpResult">res</a>.<a href="../../util/Javap.scala.html#728448" title="()Unit">show</a><span class="delimiter">(</span><span class="delimiter">)</span>
      <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(line: String)ILoop.this.Result" id="632857">wrapCommand</a><span class="delimiter">(</span><a title="String" id="879115">line</a>: <span title="String">String</span><span class="delimiter">)</span>: <a href="LoopCommands.scala.html#632911" title="ILoop.this.Result">Result</a> = <span class="delimiter">{</span>
    <span class="keyword">def</span> <a title="=&gt; String" id="879117">failMsg</a> = <span title="String(&quot;Argument to :wrap must be the name of a method with signature [T](=&gt; T): T&quot;)" class="string">&quot;Argument to :wrap must be the name of a method with signature [T](=&gt; T): T&quot;</span>
    <a href="#632791" title="(f: scala.tools.nsc.interpreter.IMain =&gt; ILoop.this.Result)ILoop.this.Result">onIntp</a> <span class="delimiter">{</span> <a title="scala.tools.nsc.interpreter.IMain" id="879121">intp</a> =&gt;
      <span class="keyword">import</span> <a href="#879121" title="scala.tools.nsc.interpreter.IMain">intp</a>._
      <span class="keyword">import</span> <a href="IMain.scala.html#632489" title="=&gt; scala.tools.nsc.Global">global</a>._

      <a href="ReplStrings.scala.html#55752" title="(s: String)List[String]">words</a><a href="#3332736" title="ILoop.this.Result" class="delimiter">(</a><a href="#879115" title="String">line</a><span class="delimiter">)</span> <span class="keyword">match</span> <span class="delimiter">{</span>
        <span class="keyword">case</span> <a href="../../../collection/immutable/List.scala.html#11188" title="ILoop.this.Result" id="3332743">Nil</a>            =&gt;
          <a href="#879121" title="scala.tools.nsc.interpreter.IMain">intp</a>.<a href="#3332749" title="(x: ILoop.this.Result)ILoop.this.Result">executionWrapper</a> <span class="keyword">match</span> <span class="delimiter">{</span>
            <span class="keyword">case</span> <a href="#3332662" title="ILoop.this.Result" id="3332665" class="string">&quot;&quot;</a>   =&gt; <a href="#3332667" title="(x: ILoop.this.Result)ILoop.this.Result" class="string">&quot;No execution wrapper is set.&quot;</a>
            <span class="keyword">case</span> s    =&gt; <span title="String(&quot;Current execution wrapper: &quot;)" class="string">&quot;Current execution wrapper: &quot;</span> <a href="#3332667" title="(x: ILoop.this.Result)ILoop.this.Result">+</a> s
          <span class="delimiter">}</span>
        <span class="keyword">case</span> <a href="../../../collection/immutable/List.scala.html#206583" title="String" id="3332744" class="string">&quot;clear&quot;</a> <a href="#3332732" title="Boolean" id="3332736">::</a> <a href="../../../collection/immutable/List.scala.html#206584" title="List[String]" id="3332745">Nil</a> =&gt;
          <a href="#879121" title="scala.tools.nsc.interpreter.IMain">intp</a>.<a href="#3332749" title="(x: ILoop.this.Result)ILoop.this.Result">executionWrapper</a> <span class="keyword">match</span> <span class="delimiter">{</span>
            <span class="keyword">case</span> <a href="#3332675" title="ILoop.this.Result" id="3332678" class="string">&quot;&quot;</a>   =&gt; <a href="#3332680" title="(x: ILoop.this.Result)ILoop.this.Result" class="string">&quot;No execution wrapper is set.&quot;</a>
            <span class="keyword">case</span> s    =&gt; <a href="#879121" title="scala.tools.nsc.interpreter.IMain">intp</a>.<a href="IMain.scala.html#632520" title="()Unit">clearExecutionWrapper</a><span class="delimiter">(</span><span class="delimiter">)</span> ; <a href="LoopCommands.scala.html#875674" title="implicit scala.tools.nsc.interpreter.LoopCommands.Result.resultFromString : (msg: String)ILoop.this.Result" class="string">&quot;Cleared execution wrapper.&quot;</a>
          <span class="delimiter">}</span>
        <span class="keyword">case</span> <a href="../../../collection/immutable/List.scala.html#206583" title="String" id="879144">wrapper</a> :: <a href="../../../collection/immutable/List.scala.html#206584" title="List[String]" id="3332746">Nil</a> =&gt;
          <a href="#879121" title="scala.tools.nsc.interpreter.IMain">intp</a>.<a href="IMain.scala.html#632601" title="(expr: String, silent: Boolean)intp.global.Type">typeOfExpression</a><a href="#3332749" title="(x: ILoop.this.Result)ILoop.this.Result" class="delimiter">(</a><a href="#879144" title="String">wrapper</a><span class="delimiter">)</span> <span class="keyword">match</span> <span class="delimiter">{</span>
            <span class="keyword">case</span> PolyType<a href="#3332688" title="ILoop.this.Result" id="3332692" class="delimiter">(</a><a href="../../../collection/generic/SeqFactory.scala.html#59986" title="Option[List[intp.global.Symbol]]" id="3332708">List</a><a href="../../../reflect/internal/Types.scala.html#410715" title="List[intp.global.Symbol]" id="3332689" class="delimiter">(</a><a title="intp.global.Symbol" id="879165">targ</a><span class="delimiter">)</span>, MethodType<a href="../../../reflect/internal/Types.scala.html#410717" title="intp.global.Type" id="3332698" class="delimiter">(</a><a href="../../../collection/generic/SeqFactory.scala.html#59986" title="Option[List[intp.global.Symbol]]" id="3332707">List</a><a href="../../../reflect/internal/Types.scala.html#410769" title="List[intp.global.Symbol]" id="3332696" class="delimiter">(</a><a title="intp.global.Symbol" id="879176">arg</a><span class="delimiter">)</span>, <a href="../../../reflect/internal/Types.scala.html#410771" title="intp.global.Type" id="879177">restpe</a><span class="delimiter">)</span><span class="delimiter">)</span> =&gt;
              <a href="#879121" title="scala.tools.nsc.interpreter.IMain">intp</a> <a href="IMain.scala.html#632519" title="(code: String)Unit">setExecutionWrapper</a> <a href="#879121" title="scala.tools.nsc.interpreter.IMain">intp</a>.<a href="IMain.scala.html#632537" title="(id: String)String">pathToTerm</a><span class="delimiter">(</span><a href="#879144" title="String">wrapper</a><span class="delimiter">)</span>
              <span title="String(&quot;Set wrapper to \'&quot;)" class="string">&quot;Set wrapper to '&quot;</span> <span title="(x$1: Any)String">+</span> <a href="#879144" title="String">wrapper</a> <a href="LoopCommands.scala.html#875674" title="implicit scala.tools.nsc.interpreter.LoopCommands.Result.resultFromString : (msg: String)ILoop.this.Result">+</a> <span title="String(&quot;\'&quot;)" class="string">&quot;'&quot;</span>
            <span class="keyword">case</span> tp =&gt;
              <a href="#879117" title="=&gt; String">failMsg</a> <a href="#3332703" title="(x: ILoop.this.Result)ILoop.this.Result">+</a> <span title="String(&quot;\nFound: &lt;unknown&gt;&quot;)" class="string">&quot;\nFound: &lt;unknown&gt;&quot;</span>
          <span class="delimiter">}</span>
        <span class="keyword">case</span> _ =&gt; <a href="#3332749" title="(x: ILoop.this.Result)ILoop.this.Result">failMsg</a>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="keyword">private</span> <span class="keyword">def</span> <a title="=&gt; String" id="632858">pathToPhaseWrapper</a> = <a href="#632787" title="=&gt; scala.tools.nsc.interpreter.IMain">intp</a>.<a href="IMain.scala.html#632537" title="(id: String)String">pathToTerm</a><span class="delimiter">(</span><span title="String(&quot;$r&quot;)" class="string">&quot;$r&quot;</span><span class="delimiter">)</span> <span title="(x$1: Any)String">+</span> <span title="String(&quot;.phased.atCurrent&quot;)" class="string">&quot;.phased.atCurrent&quot;</span>
  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(name: String)ILoop.this.Result" id="632859">phaseCommand</a><span class="delimiter">(</span><a title="String" id="876767">name</a>: <span title="String">String</span><span class="delimiter">)</span>: <a href="LoopCommands.scala.html#632911" title="ILoop.this.Result">Result</a> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="scala.tools.nsc.interpreter.Phased" id="879188">phased</a>: <a href="Phased.scala.html#38151" title="scala.tools.nsc.interpreter.Phased">Phased</a> = <a href="#632800" title="=&gt; scala.tools.nsc.interpreter.Power[scala.tools.nsc.interpreter.StdReplVals]">power</a>.<a href="Power.scala.html#875751" title="=&gt; scala.tools.nsc.interpreter.Phased">phased</a>
    <span class="keyword">import</span> <a href="#879188" title="scala.tools.nsc.interpreter.Phased">phased</a>.NoPhaseName

    <span title="ILoop.this.Result" class="keyword">if</span> <span class="delimiter">(</span><a href="#876767" title="String">name</a> <span title="(x$1: AnyRef)Boolean">==</span> <span title="String(&quot;clear&quot;)" class="string">&quot;clear&quot;</span><span class="delimiter">)</span> <span class="delimiter">{</span>
      <a href="#879188" title="scala.tools.nsc.interpreter.Phased">phased</a>.<a href="Phased.scala.html#879200" title="(phase: phased.PhaseName)Boolean">set</a><span class="delimiter">(</span><a href="Phased.scala.html#879290" title="phased.NoPhaseName.type">NoPhaseName</a><span class="delimiter">)</span>
      <a href="#632787" title="=&gt; scala.tools.nsc.interpreter.IMain">intp</a>.<a href="IMain.scala.html#632520" title="()Unit">clearExecutionWrapper</a><span class="delimiter">(</span><span class="delimiter">)</span>
      <a href="LoopCommands.scala.html#875674" title="implicit scala.tools.nsc.interpreter.LoopCommands.Result.resultFromString : (msg: String)ILoop.this.Result" class="string">&quot;Cleared active phase.&quot;</a>
    <span class="delimiter">}</span>
    <span class="keyword">else</span> <span title="ILoop.this.Result" class="keyword">if</span> <span class="delimiter">(</span><a href="#876767" title="String">name</a> <span title="(x$1: AnyRef)Boolean">==</span> <span title="String(&quot;&quot;)" class="string">&quot;&quot;</span><span class="delimiter">)</span> <a href="#879188" title="scala.tools.nsc.interpreter.Phased">phased</a>.<a href="Phased.scala.html#879199" title="=&gt; phased.PhaseName">get</a> <span class="keyword">match</span> <span class="delimiter">{</span>
      <span class="keyword">case</span> <a href="Phased.scala.html#879290" title="ILoop.this.Result" id="3332770">NoPhaseName</a> =&gt; <a href="#3332772" title="(x: ILoop.this.Result)ILoop.this.Result" class="string">&quot;Usage: :phase &lt;expr&gt; (e.g. typer, erasure.next, erasure+3)&quot;</a>
      <span class="keyword">case</span> ph          =&gt; <a href="../../../Predef.scala.html#7604" title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps" class="string">&quot;Active phase is '%s'.  (To clear, :phase clear)&quot;</a>.<a href="../../../collection/immutable/StringLike.scala.html#59882" title="(args: Any*)String">format</a><a href="#3332772" title="(x: ILoop.this.Result)ILoop.this.Result" class="delimiter">(</a><a href="#879188" title="scala.tools.nsc.interpreter.Phased">phased</a>.<a href="Phased.scala.html#879199" title="=&gt; phased.PhaseName">get</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>
    <span class="keyword">else</span> <span class="delimiter">{</span>
      <span class="keyword">val</span> <a title="phased.PhaseName" id="879324">what</a> = <a href="#879188" title="scala.tools.nsc.interpreter.Phased">phased</a>.<a href="Phased.scala.html#879205" title="(str: String)phased.PhaseName">parse</a><span class="delimiter">(</span><a href="#876767" title="String">name</a><span class="delimiter">)</span>
      <span title="ILoop.this.Result" class="keyword">if</span> <span class="delimiter">(</span><a href="#879324" title="phased.PhaseName">what</a>.<a href="Phased.scala.html#879306" title="=&gt; Boolean">isEmpty</a> <a href="../../../Boolean.scala.html#57825" title="(x: Boolean)Boolean">||</a> <a href="../../../Boolean.scala.html#57822" title="=&gt; Boolean">!</a><a href="#879188" title="scala.tools.nsc.interpreter.Phased">phased</a>.<a href="Phased.scala.html#879200" title="(phase: phased.PhaseName)Boolean">set</a><span class="delimiter">(</span><a href="#879324" title="phased.PhaseName">what</a><span class="delimiter">)</span><span class="delimiter">)</span>
        <span title="String(&quot;\'&quot;)" class="string">&quot;'&quot;</span> <span title="(x$1: Any)String">+</span> <a href="#876767" title="String">name</a> <a href="LoopCommands.scala.html#875674" title="implicit scala.tools.nsc.interpreter.LoopCommands.Result.resultFromString : (msg: String)ILoop.this.Result">+</a> <span title="String(&quot;\' does not appear to represent a valid phase.&quot;)" class="string">&quot;' does not appear to represent a valid phase.&quot;</span>
      <span class="keyword">else</span> <span class="delimiter">{</span>
        <a href="#632787" title="=&gt; scala.tools.nsc.interpreter.IMain">intp</a>.<a href="IMain.scala.html#632519" title="(code: String)Unit">setExecutionWrapper</a><span class="delimiter">(</span><a href="#632858" title="=&gt; String">pathToPhaseWrapper</a><span class="delimiter">)</span>
        <span class="keyword">val</span> <a title="String" id="879326">activeMessage</a> =
          <span title="String" class="keyword">if</span> <span class="delimiter">(</span><a href="#879324" title="phased.PhaseName">what</a>.<span title="()String">toString</span>.<span title="()Int">length</span> <a href="../../../Int.scala.html#57097" title="(x: Int)Boolean">==</a> <a href="#876767" title="String">name</a>.<span title="()Int">length</span><span class="delimiter">)</span> <span title="String(&quot;&quot;)" class="string">&quot;&quot;</span> <span title="(x$1: Any)String">+</span> <a href="#879324" title="phased.PhaseName">what</a>
          <span class="keyword">else</span> <a href="../../../Predef.scala.html#7604" title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps" class="string">&quot;%s (%s)&quot;</a>.<a href="../../../collection/immutable/StringLike.scala.html#59882" title="(args: Any*)String">format</a><span class="delimiter">(</span><a href="#879324" title="phased.PhaseName">what</a>, <a href="#876767" title="String">name</a><span class="delimiter">)</span>

        <span title="String(&quot;Active phase is now: &quot;)" class="string">&quot;Active phase is now: &quot;</span> <a href="LoopCommands.scala.html#875674" title="implicit scala.tools.nsc.interpreter.LoopCommands.Result.resultFromString : (msg: String)ILoop.this.Result">+</a> <a href="#879326" title="String">activeMessage</a>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  /** Available commands */
  <span class="keyword">def</span> <a title="=&gt; List[ILoop.this.LoopCommand]" id="632860">commands</a>: <a href="../../../collection/immutable/List.scala.html#11952" title="List[ILoop.this.LoopCommand]">List</a><span class="delimiter">[</span>LoopCommand<span class="delimiter">]</span> = <a href="#632839" title="=&gt; List[ILoop.this.LoopCommand]">standardCommands</a> <a href="../../../collection/immutable/List.scala.html#62697" title="(that: scala.collection.GenTraversableOnce[ILoop.this.LoopCommand])(implicit bf: scala.collection.generic.CanBuildFrom[List[ILoop.this.LoopCommand],ILoop.this.LoopCommand,List[ILoop.this.LoopCommand]])List[ILoop.this.LoopCommand]">++</a> <span class="delimiter">(</span>
    <span title="List[ILoop.this.LoopCommand]" class="keyword">if</span> <span class="delimiter">(</span><a href="ReplConfig.scala.html#55720" title="=&gt; Boolean">isReplPower</a><span class="delimiter">)</span> <a href="#632841" title="=&gt; List[ILoop.this.LoopCommand]">powerCommands</a> <span class="keyword">else</span> <a href="../../../collection/immutable/List.scala.html#11188" title="scala.collection.immutable.Nil.type">Nil</a>
  <span class="delimiter">)</span>

  <span class="keyword">val</span> <a title="String" id="632861">replayQuestionMessage</a> =
    <span title="String(&quot;|That entry seems to have slain the compiler.  Shall I replay\n       |your session? I can re-run each line except the last one.\n       |[y/n]\n    &quot;)" class="string">&quot;&quot;&quot;|That entry seems to have slain the compiler.  Shall I replay
       |your session? I can re-run each line except the last one.
       |[y/n]
    &quot;&quot;&quot;</span>.<a href="../../../Predef.scala.html#7604" title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps">trim</a>.<a href="../../../collection/immutable/StringLike.scala.html#59864" title="=&gt; String">stripMargin</a>

  <span class="keyword">private</span> <span class="keyword">val</span> <a title="PartialFunction[Throwable,Boolean]" id="632863">crashRecovery</a>: <a href="../../../PartialFunction.scala.html#129" title="PartialFunction[Throwable,Boolean]">PartialFunction</a><span class="delimiter">[</span>Throwable, Boolean<span class="delimiter">]</span> = <a title="anonymous class $anonfun extends scala.runtime.AbstractPartialFunction[Throwable,Boolean] with Serializable" id="879404" class="delimiter">{</a>
    <span class="keyword">case</span> <a href="#3332794" title="B1" id="3332803">ex</a>: Throwable =&gt;
      <a href="#632830" title="(msg: String)Unit">echo</a><span class="delimiter">(</span><a href="#632787" title="=&gt; scala.tools.nsc.interpreter.IMain">intp</a>.<a href="IMain.scala.html#632489" title="=&gt; scala.tools.nsc.Global">global</a>.<a href="../Global.scala.html#537519" title="(t: Throwable)String">throwableAsString</a><span class="delimiter">(</span>ex<span class="delimiter">)</span><span class="delimiter">)</span>

      <span title="Unit">ex</span> <span class="keyword">match</span> <span class="delimiter">{</span>
        <span class="keyword">case</span> _: NoSuchMethodError | _: NoClassDefFoundError =&gt;
          <a href="#632830" title="(msg: String)Unit">echo</a><span class="delimiter">(</span><span title="String(&quot;\nUnrecoverable error.&quot;)" class="string">&quot;\nUnrecoverable error.&quot;</span><span class="delimiter">)</span>
          <span title="Nothing" class="keyword">throw</span> ex
        <span class="keyword">case</span> _  =&gt;
          <span class="keyword">def</span> <a title="()Boolean" id="879401">fn</a><span class="delimiter">(</span><span class="delimiter">)</span>: <a href="../../../Boolean.scala.html#1425" title="Boolean">Boolean</a> =
            <span class="keyword">try</span> <a href="#632781" title="=&gt; scala.tools.nsc.interpreter.InteractiveReader">in</a>.<a href="InteractiveReader.scala.html#875588" title="(prompt: String, alt: =&gt; Boolean)Boolean">readYesOrNo</a><span class="delimiter">(</span><a href="#632861" title="=&gt; String">replayQuestionMessage</a>, <span class="delimiter">{</span> <a href="#632830" title="(msg: String)Unit">echo</a><span class="delimiter">(</span><span title="String(&quot;\nYou must enter y or n.&quot;)" class="string">&quot;\nYou must enter y or n.&quot;</span><span class="delimiter">)</span> ; <a href="#879401" title="()Boolean">fn</a><span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">}</span><span class="delimiter">)</span>
            <span class="keyword">catch</span> <span class="delimiter">{</span> <span class="keyword">case</span> <span title="Boolean(false)">_</span>: <span title="RuntimeException">RuntimeException</span> =&gt; <span title="Boolean(false)" class="keyword">false</span> <span class="delimiter">}</span>

          <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#879401" title="()Boolean">fn</a><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span> <a href="#632867" title="()Unit">replay</a><span class="delimiter">(</span><span class="delimiter">)</span>
          <span class="keyword">else</span> <a href="#632830" title="(msg: String)Unit">echo</a><span class="delimiter">(</span><span title="String(&quot;\nAbandoning crashed session.&quot;)" class="string">&quot;\nAbandoning crashed session.&quot;</span><span class="delimiter">)</span>
      <span class="delimiter">}</span>
      <span title="Boolean(true)" class="keyword">true</span>
  <span class="delimiter">}</span>

  /** The main read-eval-print loop for the repl.  It calls
   *  command() for each line of input, and stops when
   *  command() returns false.
   */
  <span class="keyword">def</span> <a title="()Unit" id="632865">loop</a><span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span class="keyword">def</span> <a title="()String" id="879431">readOneLine</a><span class="delimiter">(</span><span class="delimiter">)</span> = <span class="delimiter">{</span>
      <a href="#632955" title="=&gt; scala.tools.nsc.interpreter.JPrintWriter">out</a>.<span title="()Unit">flush</span><span class="delimiter">(</span><span class="delimiter">)</span>
      <a href="#632781" title="=&gt; scala.tools.nsc.interpreter.InteractiveReader">in</a> <a href="InteractiveReader.scala.html#875593" title="(prompt: String)String">readLine</a> <a href="#632837" title="=&gt; String">prompt</a>
    <span class="delimiter">}</span>
    // return false if repl should exit
    <span class="keyword">def</span> <a title="(line: String)Boolean" id="879432">processLine</a><span class="delimiter">(</span><a title="String" id="879435">line</a>: <span title="String">String</span><span class="delimiter">)</span>: <a href="../../../Boolean.scala.html#1425" title="Boolean">Boolean</a> = <span class="delimiter">{</span>
      <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#632799" title="=&gt; Boolean">isAsync</a><span class="delimiter">)</span> <span class="delimiter">{</span>
        <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="../../../Boolean.scala.html#57822" title="=&gt; Boolean">!</a><a href="ILoopInit.scala.html#632938" title="()Boolean">awaitInitialized</a><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span> <span title="Nothing" class="keyword">return</span> <span title="Boolean(false)" class="keyword">false</span>
        <a href="ILoopInit.scala.html#632945" title="()Unit">runThunks</a><span class="delimiter">(</span><span class="delimiter">)</span>
      <span class="delimiter">}</span>
      <span title="Boolean" class="keyword">if</span> <span class="delimiter">(</span><a href="#879435" title="String">line</a> <span title="(x$1: AnyRef)Boolean">eq</span> <span title="Null(null)" class="keyword">null</span><span class="delimiter">)</span> <span title="Boolean(false)" class="keyword">false</span>               // assume null means EOF
      <span class="keyword">else</span> <a href="#632880" title="(line: String)ILoop.this.Result">command</a><a href="#3332809" title="Boolean" class="delimiter">(</a><a href="#879435" title="String">line</a><span class="delimiter">)</span> <span class="keyword">match</span> <span class="delimiter">{</span>
        <span class="keyword">case</span> Result<span class="delimiter">(</span><a href="LoopCommands.scala.html#875642" title="Boolean" id="3332817" class="keyword">false</a>, <a href="LoopCommands.scala.html#875644" title="Option[String]" id="3332811">_</a><span class="delimiter">)</span>           =&gt; <a href="#3332819" title="(x: Boolean)Boolean" class="keyword">false</a>
        <span class="keyword">case</span> Result<span class="delimiter">(</span><a href="LoopCommands.scala.html#875642" title="Boolean" id="3332814">_</a>, Some<a href="LoopCommands.scala.html#875644" title="Option[String]" id="3332816" class="delimiter">(</a><a href="../../../Option.scala.html#63132" title="String" id="879461">finalLine</a><span class="delimiter">)</span><span class="delimiter">)</span> =&gt; <a href="#632812" title="(cmd: String)Unit">addReplay</a><span class="delimiter">(</span><a href="#879461" title="String">finalLine</a><span class="delimiter">)</span> ; <span title="Boolean(true)" class="keyword">true</span>
        <span class="keyword">case</span> _                          =&gt; <a href="#3332819" title="(x: Boolean)Boolean" class="keyword">true</a>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>
    <span class="keyword">def</span> <a title="()Unit" id="879433">innerLoop</a><span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span>
      <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span> <a title="Boolean" id="879462" class="keyword">try</a> <a href="#879432" title="(line: String)Boolean">processLine</a><span class="delimiter">(</span><a href="#879431" title="()String">readOneLine</a><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span> <span class="keyword">catch</span> <a href="#632863" title="PartialFunction[Throwable,Boolean]" id="879463">crashRecovery</a> <span class="delimiter">)</span>
        <a href="#879433" title="()Unit">innerLoop</a><span class="delimiter">(</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>
    <a href="#879433" title="()Unit">innerLoop</a><span class="delimiter">(</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  /** interpret all lines from a specified file */
  <span class="keyword">def</span> <a title="(file: scala.tools.nsc.io.File)Unit" id="632866">interpretAllFrom</a><span class="delimiter">(</span><a title="scala.tools.nsc.io.File" id="876676">file</a>: <a href="../../../reflect/io/File.scala.html#23254" title="scala.tools.nsc.io.File">File</a><span class="delimiter">)</span> <span class="delimiter">{</span>
    <a href="#632816" title="(body: =&gt; Unit)Unit">savingReader</a> <span class="delimiter">{</span>
      <a href="#632813" title="(body: =&gt; Unit)Unit">savingReplayStack</a> <span class="delimiter">{</span>
        <a href="#876676" title="scala.tools.nsc.io.File">file</a> <a href="../../../reflect/io/Streamable.scala.html#530985" title="(f: java.io.BufferedReader =&gt; Unit)Unit">applyReader</a> <span class="delimiter">{</span> <a title="java.io.BufferedReader" id="879473">reader</a> =&gt;
          <a href="#632781" title="(x$1: scala.tools.nsc.interpreter.InteractiveReader)Unit">in</a> = <a href="SimpleReader.scala.html#879477" title="(in: java.io.BufferedReader, out: scala.tools.nsc.interpreter.JPrintWriter, interactive: Boolean)scala.tools.nsc.interpreter.SimpleReader">SimpleReader</a><span class="delimiter">(</span><a href="#879473" title="java.io.BufferedReader">reader</a>, <a href="#632955" title="=&gt; scala.tools.nsc.interpreter.JPrintWriter">out</a>, <span title="Boolean(false)" class="keyword">false</span><span class="delimiter">)</span>
          <a href="#632830" title="(msg: String)Unit">echo</a><span class="delimiter">(</span><span title="String(&quot;Loading &quot;)" class="string">&quot;Loading &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#876676" title="scala.tools.nsc.io.File">file</a> <span title="(x$1: Any)String">+</span> <span title="String(&quot;...&quot;)" class="string">&quot;...&quot;</span><span class="delimiter">)</span>
          <a href="#632865" title="()Unit">loop</a><span class="delimiter">(</span><span class="delimiter">)</span>
        <span class="delimiter">}</span>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  /** create a new interpreter and replay the given commands */
  <span class="keyword">def</span> <a title="()Unit" id="632867">replay</a><span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    <a href="#632869" title="()Unit">reset</a><span class="delimiter">(</span><span class="delimiter">)</span>
    <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#632809" title="=&gt; List[String]">replayCommandStack</a>.<a href="../../../collection/SeqLike.scala.html#58787" title="=&gt; Boolean">isEmpty</a><span class="delimiter">)</span>
      <a href="#632830" title="(msg: String)Unit">echo</a><span class="delimiter">(</span><span title="String(&quot;Nothing to replay.&quot;)" class="string">&quot;Nothing to replay.&quot;</span><span class="delimiter">)</span>
    <span class="keyword">else</span> <span class="keyword">for</span> <span class="delimiter">(</span><a title="String" id="879530">cmd</a> &lt;- <a href="../../../collection/immutable/List.scala.html#62719" title="(f: String =&gt; Unit)Unit">replayCommands</a><span class="delimiter">)</span> <span class="delimiter">{</span>
      <a href="#632830" title="(msg: String)Unit">echo</a><span class="delimiter">(</span><span title="String(&quot;Replaying: &quot;)" class="string">&quot;Replaying: &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#879530" title="String">cmd</a><span class="delimiter">)</span>  // flush because maybe cmd will have its own output
      <a href="#632880" title="(line: String)ILoop.this.Result">command</a><span class="delimiter">(</span><a href="#879530" title="String">cmd</a><span class="delimiter">)</span>
      <a href="#632830" title="(msg: String)Unit">echo</a><span class="delimiter">(</span><span title="String(&quot;&quot;)" class="string">&quot;&quot;</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>
  <span class="keyword">def</span> <a title="()Unit" id="632868">resetCommand</a><span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    <a href="#632830" title="(msg: String)Unit">echo</a><span class="delimiter">(</span><span title="String(&quot;Resetting interpreter state.&quot;)" class="string">&quot;Resetting interpreter state.&quot;</span><span class="delimiter">)</span>
    <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#632809" title="=&gt; List[String]">replayCommandStack</a>.<a href="../../../collection/TraversableOnce.scala.html#58191" title="=&gt; Boolean">nonEmpty</a><span class="delimiter">)</span> <span class="delimiter">{</span>
      <a href="#632830" title="(msg: String)Unit">echo</a><span class="delimiter">(</span><span title="String(&quot;Forgetting this session history:\n&quot;)" class="string">&quot;Forgetting this session history:\n&quot;</span><span class="delimiter">)</span>
      <a href="#632811" title="=&gt; List[String]">replayCommands</a> <a href="../../../collection/immutable/List.scala.html#62719" title="(f: String =&gt; Unit)Unit">foreach</a> <a href="#632830" title="(msg: String)Unit">echo</a>
      <a href="#632830" title="(msg: String)Unit">echo</a><span class="delimiter">(</span><span title="String(&quot;&quot;)" class="string">&quot;&quot;</span><span class="delimiter">)</span>
      <a href="#632809" title="(x$1: List[String])Unit">replayCommandStack</a> = <a href="../../../collection/immutable/List.scala.html#11188" title="scala.collection.immutable.Nil.type">Nil</a>
    <span class="delimiter">}</span>
    <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#632787" title="=&gt; scala.tools.nsc.interpreter.IMain">intp</a>.<a href="IMain.scala.html#632608" title="(=&gt; List[_1416.global.TermName]) forSome { val _1416: scala.tools.nsc.interpreter.IMain }">namedDefinedTerms</a>.<a href="../../../collection/TraversableOnce.scala.html#58191" title="=&gt; Boolean">nonEmpty</a><span class="delimiter">)</span>
      <a href="#632830" title="(msg: String)Unit">echo</a><span class="delimiter">(</span><span title="String(&quot;Forgetting all expression results and named terms: &quot;)" class="string">&quot;Forgetting all expression results and named terms: &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#632787" title="=&gt; scala.tools.nsc.interpreter.IMain">intp</a>.<a href="IMain.scala.html#632608" title="(=&gt; List[_1416.global.TermName]) forSome { val _1416: scala.tools.nsc.interpreter.IMain }">namedDefinedTerms</a>.<a href="../../../collection/TraversableOnce.scala.html#58283" title="(sep: String)String">mkString</a><span class="delimiter">(</span><span title="String(&quot;, &quot;)" class="string">&quot;, &quot;</span><span class="delimiter">)</span><span class="delimiter">)</span>
    <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#632787" title="=&gt; scala.tools.nsc.interpreter.IMain">intp</a>.<a href="IMain.scala.html#632605" title="(=&gt; List[_1417.global.TypeName]) forSome { val _1417: scala.tools.nsc.interpreter.IMain }">definedTypes</a>.<a href="../../../collection/TraversableOnce.scala.html#58191" title="=&gt; Boolean">nonEmpty</a><span class="delimiter">)</span>
      <a href="#632830" title="(msg: String)Unit">echo</a><span class="delimiter">(</span><span title="String(&quot;Forgetting defined types: &quot;)" class="string">&quot;Forgetting defined types: &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#632787" title="=&gt; scala.tools.nsc.interpreter.IMain">intp</a>.<a href="IMain.scala.html#632605" title="(=&gt; List[_1417.global.TypeName]) forSome { val _1417: scala.tools.nsc.interpreter.IMain }">definedTypes</a>.<a href="../../../collection/TraversableOnce.scala.html#58283" title="(sep: String)String">mkString</a><span class="delimiter">(</span><span title="String(&quot;, &quot;)" class="string">&quot;, &quot;</span><span class="delimiter">)</span><span class="delimiter">)</span>

    <a href="#632869" title="()Unit">reset</a><span class="delimiter">(</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>
  <span class="keyword">def</span> <a title="()Unit" id="632869">reset</a><span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    <a href="#632787" title="=&gt; scala.tools.nsc.interpreter.IMain">intp</a>.<a href="IMain.scala.html#632574" title="()Unit">reset</a><span class="delimiter">(</span><span class="delimiter">)</span>
    <a href="#632877" title="()Unit">unleashAndSetPhase</a><span class="delimiter">(</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  /** fork a shell and run a command */
  <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="ILoop.this.LoopCommand" id="632871">shCommand</a> = <a href="#876698" title="ILoop.this.LoopCommand" class="keyword">new</a> <a href="LoopCommands.scala.html#632905" title="anonymous class $anon extends ILoop.this.LoopCommand" id="876698">LoopCommand</a><span class="delimiter">(</span><span title="String(&quot;sh&quot;)" class="string">&quot;sh&quot;</span>, <span title="String(&quot;run a shell command (result is implicitly =&gt; List[String])&quot;)" class="string">&quot;run a shell command (result is implicitly =&gt; List[String])&quot;</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span class="keyword">override</span> <span class="keyword">def</span> <a title="=&gt; String" id="876700">usage</a> = <span title="String(&quot;&lt;command line&gt;&quot;)" class="string">&quot;&lt;command line&gt;&quot;</span>
    <span class="keyword">def</span> <a title="(line: String)ILoop.this.Result" id="876701">apply</a><span class="delimiter">(</span><a title="String" id="876702">line</a>: <span title="String">String</span><span class="delimiter">)</span>: <a href="LoopCommands.scala.html#632911" title="ILoop.this.Result">Result</a> = <a href="#876702" title="String">line</a> <span class="keyword">match</span> <span class="delimiter">{</span>
      <span class="keyword">case</span> <a href="#3332828" title="ILoop.this.Result" id="3332831" class="string">&quot;&quot;</a>   =&gt; <a href="LoopCommands.scala.html#875957" title="()ILoop.this.Result">showUsage</a><a href="#3332833" title="(x: ILoop.this.Result)ILoop.this.Result" class="delimiter">(</a><span class="delimiter">)</span>
      <span class="keyword">case</span> _    =&gt;
        <span class="keyword">val</span> <a title="String" id="876707">toRun</a> = classOf<span title="Class[scala.tools.nsc.interpreter.ProcessResult](classOf[scala.tools.nsc.interpreter.ProcessResult])" class="delimiter">[</span>ProcessResult<span class="delimiter">]</span>.<span title="()String">getName</span> <span title="(x$1: Any)String">+</span> <span title="String(&quot;(&quot;)" class="string">&quot;(&quot;</span> <span title="(x$1: Any)String">+</span> <a href="ReplStrings.scala.html#55750" title="(str: String)String">string2codeQuoted</a><span class="delimiter">(</span><a href="#876702" title="String">line</a><span class="delimiter">)</span> <span title="(x$1: Any)String">+</span> <span title="String(&quot;)&quot;)" class="string">&quot;)&quot;</span>
        <a href="#632787" title="=&gt; scala.tools.nsc.interpreter.IMain">intp</a> <a href="IMain.scala.html#632554" title="(line: String)scala.tools.nsc.interpreter.IR.Result">interpret</a> <a href="#876707" title="String">toRun</a>
        <a href="LoopCommands.scala.html#875673" title="implicit scala.tools.nsc.interpreter.LoopCommands.Result.resultFromUnit : (x: Unit)ILoop.this.Result" class="delimiter">(</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="(filename: String)(action: scala.tools.nsc.io.File =&gt; Unit)Unit" id="632872">withFile</a><span class="delimiter">(</span><a title="String" id="876671">filename</a>: <span title="String">String</span><span class="delimiter">)</span><span class="delimiter">(</span><a title="scala.tools.nsc.io.File =&gt; Unit" id="876672">action</a>: File =&gt; Unit<span class="delimiter">)</span> <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="scala.reflect.io.File" id="879779">f</a> = <a href="../../../reflect/io/File.scala.html#530996" title="(path: scala.reflect.io.Path)(implicit codec: scala.io.Codec)scala.reflect.io.File">File</a><a href="../../../io/Codec.scala.html#393359" title="=&gt; scala.io.Codec" class="delimiter">(</a><a href="../../../reflect/io/Path.scala.html#531009" title="implicit scala.reflect.io.Path.string2path : (s: String)scala.reflect.io.Path">filename</a><span class="delimiter">)</span>

    <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#879779" title="scala.reflect.io.File">f</a>.<a href="../../../reflect/io/Path.scala.html#530908" title="=&gt; Boolean">exists</a><span class="delimiter">)</span> <a href="../../../Function1.scala.html#58642" title="(v1: scala.tools.nsc.io.File)Unit">action</a><span class="delimiter">(</span><a href="#879779" title="scala.reflect.io.File">f</a><span class="delimiter">)</span>
    <span class="keyword">else</span> <a href="#632830" title="(msg: String)Unit">echo</a><span class="delimiter">(</span><span title="String(&quot;That file does not exist&quot;)" class="string">&quot;That file does not exist&quot;</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="(arg: String)ILoop.this.Result" id="632873">loadCommand</a><span class="delimiter">(</span><a title="String" id="876667">arg</a>: <span title="String">String</span><span class="delimiter">)</span> = <span class="delimiter">{</span>
    <span class="keyword">var</span> <a title="Option[String]" id="876670">shouldReplay</a>: <a href="../../../Option.scala.html#978" title="Option[String]">Option</a><span class="delimiter">[</span>String<span class="delimiter">]</span> = <a href="../../../Option.scala.html#1585" title="None.type">None</a>
    <a href="#632872" title="(filename: String)(action: scala.tools.nsc.io.File =&gt; Unit)Unit">withFile</a><span class="delimiter">(</span><a href="#876667" title="String">arg</a><span class="delimiter">)</span><span class="delimiter">(</span><a title="scala.tools.nsc.io.File" id="876675">f</a> =&gt; <span class="delimiter">{</span>
      <a href="#632866" title="(file: scala.tools.nsc.io.File)Unit">interpretAllFrom</a><span class="delimiter">(</span><a href="#876675" title="scala.tools.nsc.io.File">f</a><span class="delimiter">)</span>
      <a href="#876670" title="Option[String]">shouldReplay</a> = <a href="../../../Option.scala.html#63128" title="(x: String)Some[String]">Some</a><span class="delimiter">(</span><span title="String(&quot;:load &quot;)" class="string">&quot;:load &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#876667" title="String">arg</a><span class="delimiter">)</span>
    <span class="delimiter">}</span><span class="delimiter">)</span>
    <a href="LoopCommands.scala.html#875675" title="(keepRunning: Boolean, lineToRecord: Option[String])ILoop.this.Result">Result</a><span class="delimiter">(</span><span title="Boolean(true)" class="keyword">true</span>, <a href="#876670" title="Option[String]">shouldReplay</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="(arg: String)Unit" id="632874">addClasspath</a><span class="delimiter">(</span><a title="String" id="876647">arg</a>: <span title="String">String</span><span class="delimiter">)</span>: <a href="../../../Unit.scala.html#1515" title="Unit">Unit</a> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="scala.reflect.io.File" id="879781">f</a> = <a href="../../../reflect/io/File.scala.html#530996" title="(path: scala.reflect.io.Path)(implicit codec: scala.io.Codec)scala.reflect.io.File">File</a><a href="../../../io/Codec.scala.html#393359" title="=&gt; scala.io.Codec" class="delimiter">(</a><a href="../../../reflect/io/Path.scala.html#531009" title="implicit scala.reflect.io.Path.string2path : (s: String)scala.reflect.io.Path">arg</a><span class="delimiter">)</span>.<a href="../../../reflect/io/File.scala.html#530945" title="=&gt; scala.reflect.io.File">normalize</a>
    <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#879781" title="scala.reflect.io.File">f</a>.<a href="../../../reflect/io/Path.scala.html#530908" title="=&gt; Boolean">exists</a><span class="delimiter">)</span> <span class="delimiter">{</span>
      <a href="#632806" title="(x$1: String)Unit">addedClasspath</a> = <a href="../util/ClassPath.scala.html#50228" title="scala.tools.nsc.util.ClassPath.type">ClassPath</a>.<a href="../util/ClassPath.scala.html#538286" title="(paths: String*)String">join</a><span class="delimiter">(</span><a href="#632806" title="=&gt; String">addedClasspath</a>, <a href="#879781" title="scala.reflect.io.File">f</a>.<a href="../../../reflect/io/Path.scala.html#530886" title="=&gt; String">path</a><span class="delimiter">)</span>
      <span class="keyword">val</span> <a title="String" id="879783">totalClasspath</a> = <a href="../util/ClassPath.scala.html#50228" title="scala.tools.nsc.util.ClassPath.type">ClassPath</a>.<a href="../util/ClassPath.scala.html#538286" title="(paths: String*)String">join</a><span class="delimiter">(</span><a href="#632784" title="=&gt; scala.tools.nsc.Settings">settings</a>.<a href="../settings/ScalaSettings.scala.html#539943" title="=&gt; scala.tools.nsc.Settings#PathSetting">classpath</a>.<a href="../settings/MutableSettings.scala.html#593180" title="=&gt; String">value</a>, <a href="#632806" title="=&gt; String">addedClasspath</a><span class="delimiter">)</span>
      <a href="#632830" title="(msg: String)Unit">echo</a><span class="delimiter">(</span><a href="../../../Predef.scala.html#7604" title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps" class="string">&quot;Added '%s'.  Your new classpath is:\n\&quot;%s\&quot;&quot;</a>.<a href="../../../collection/immutable/StringLike.scala.html#59882" title="(args: Any*)String">format</a><span class="delimiter">(</span><a href="#879781" title="scala.reflect.io.File">f</a>.<a href="../../../reflect/io/Path.scala.html#530886" title="=&gt; String">path</a>, <a href="#879783" title="String">totalClasspath</a><span class="delimiter">)</span><span class="delimiter">)</span>
      <a href="#632867" title="()Unit">replay</a><span class="delimiter">(</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>
    <span class="keyword">else</span> <a href="#632830" title="(msg: String)Unit">echo</a><span class="delimiter">(</span><span title="String(&quot;The path \'&quot;)" class="string">&quot;The path '&quot;</span> <span title="(x$1: Any)String">+</span> <a href="#879781" title="scala.reflect.io.File">f</a> <span title="(x$1: Any)String">+</span> <span title="String(&quot;\' doesn\'t seem to exist.&quot;)" class="string">&quot;' doesn't seem to exist.&quot;</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="()ILoop.this.Result" id="632875">powerCmd</a><span class="delimiter">(</span><span class="delimiter">)</span>: <a href="LoopCommands.scala.html#632911" title="ILoop.this.Result">Result</a> = <span class="delimiter">{</span>
    <span title="ILoop.this.Result" class="keyword">if</span> <span class="delimiter">(</span><a href="ReplConfig.scala.html#55720" title="=&gt; Boolean">isReplPower</a><span class="delimiter">)</span> <a href="LoopCommands.scala.html#875674" title="implicit scala.tools.nsc.interpreter.LoopCommands.Result.resultFromString : (msg: String)ILoop.this.Result" class="string">&quot;Already in power mode.&quot;</a>
    <span class="keyword">else</span> <a href="#632876" title="(isDuringInit: Boolean)Unit">enablePowerMode</a><a href="LoopCommands.scala.html#875673" title="implicit scala.tools.nsc.interpreter.LoopCommands.Result.resultFromUnit : (x: Unit)ILoop.this.Result" class="delimiter">(</a><span title="Boolean(false)" class="keyword">false</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>
  <span class="keyword">def</span> <a title="(isDuringInit: Boolean)Unit" id="632876">enablePowerMode</a><span class="delimiter">(</span><a title="Boolean" id="879791">isDuringInit</a>: <a href="../../../Boolean.scala.html#1425" title="Boolean">Boolean</a><span class="delimiter">)</span> = <span class="delimiter">{</span>
    <a href="ReplConfig.scala.html#55697" title="=&gt; scala.tools.nsc.interpreter.ReplProps">replProps</a>.<a href="ReplProps.scala.html#879807" title="=&gt; scala.sys.BooleanProp">power</a> <a href="../../../sys/Prop.scala.html#584736" title="(value: Boolean)Boolean">setValue</a> <span title="Boolean(true)" class="keyword">true</span>
    <a href="#632877" title="()Unit">unleashAndSetPhase</a><span class="delimiter">(</span><span class="delimiter">)</span>
    <a href="#632878" title="(async: Boolean, msg: =&gt; String)Unit">asyncEcho</a><span class="delimiter">(</span><a href="#879791" title="Boolean">isDuringInit</a>, <a href="#632800" title="=&gt; scala.tools.nsc.interpreter.Power[scala.tools.nsc.interpreter.StdReplVals]">power</a>.<a href="Power.scala.html#875714" title="=&gt; String">banner</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>
  <span class="keyword">private</span> <span class="keyword">def</span> <a title="()Unit" id="632877">unleashAndSetPhase</a><span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="ReplConfig.scala.html#55720" title="=&gt; Boolean">isReplPower</a><span class="delimiter">)</span> <span class="delimiter">{</span>
      <a href="#632800" title="=&gt; scala.tools.nsc.interpreter.Power[scala.tools.nsc.interpreter.StdReplVals]">power</a>.<a href="Power.scala.html#875717" title="()Unit">unleash</a><span class="delimiter">(</span><span class="delimiter">)</span>
      // Set the phase to &quot;typer&quot;
      <a href="#632787" title="=&gt; scala.tools.nsc.interpreter.IMain">intp</a> <a href="IMain.scala.html#632509" title="(operation: =&gt; ILoop.this.Result)ILoop.this.Result">beSilentDuring</a> <a href="#632859" title="(name: String)ILoop.this.Result">phaseCommand</a><span class="delimiter">(</span><span title="String(&quot;typer&quot;)" class="string">&quot;typer&quot;</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="(async: Boolean, msg: =&gt; String)Unit" id="632878">asyncEcho</a><span class="delimiter">(</span><a title="Boolean" id="879828">async</a>: <a href="../../../Boolean.scala.html#1425" title="Boolean">Boolean</a>, <a title="=&gt; String" id="879829">msg</a>: =&gt; String<span class="delimiter">)</span> <span class="delimiter">{</span>
    <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#879828" title="Boolean">async</a><span class="delimiter">)</span> <a href="ILoopInit.scala.html#632917" title="(msg: String)Unit">asyncMessage</a><span class="delimiter">(</span><a href="#879829" title="=&gt; String">msg</a><span class="delimiter">)</span>
    <span class="keyword">else</span> <a href="#632830" title="(msg: String)Unit">echo</a><span class="delimiter">(</span><a href="#879829" title="=&gt; String">msg</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="()Unit" id="632879">verbosity</a><span class="delimiter">(</span><span class="delimiter">)</span> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="Boolean" id="876751">old</a> = <a href="#632787" title="=&gt; scala.tools.nsc.interpreter.IMain">intp</a>.<a href="IMain.scala.html#632441" title="=&gt; Boolean">printResults</a>
    <a href="#632787" title="=&gt; scala.tools.nsc.interpreter.IMain">intp</a>.<a href="IMain.scala.html#632442" title="(x$1: Boolean)Unit">printResults</a> = <a href="../../../Boolean.scala.html#57822" title="=&gt; Boolean">!</a><a href="#876751" title="Boolean">old</a>
    <a href="#632830" title="(msg: String)Unit">echo</a><span class="delimiter">(</span><span title="String(&quot;Switched &quot;)" class="string">&quot;Switched &quot;</span> <span title="(x$1: Any)String">+</span> <span class="delimiter">(</span><span title="Any" class="keyword">if</span> <span class="delimiter">(</span><a href="#876751" title="Boolean">old</a><span class="delimiter">)</span> <span title="String(&quot;off&quot;)" class="string">&quot;off&quot;</span> <span class="keyword">else</span> <span title="String(&quot;on&quot;)" class="string">&quot;on&quot;</span><span class="delimiter">)</span> <span title="(x$1: Any)String">+</span> <span title="String(&quot; result printing.&quot;)" class="string">&quot; result printing.&quot;</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  /** Run one command submitted by the user.  Two values are returned:
    * (1) whether to keep running, (2) the line to record for replay,
    * if any. */
  <span class="keyword">def</span> <a title="(line: String)ILoop.this.Result" id="632880">command</a><span class="delimiter">(</span><a title="String" id="879436">line</a>: <span title="String">String</span><span class="delimiter">)</span>: <a href="LoopCommands.scala.html#632911" title="ILoop.this.Result">Result</a> = <span class="delimiter">{</span>
    <span title="ILoop.this.Result" class="keyword">if</span> <span class="delimiter">(</span><a href="#879436" title="String">line</a> <span title="(x$1: String)Boolean">startsWith</span> <span title="String(&quot;:&quot;)" class="string">&quot;:&quot;</span><span class="delimiter">)</span> <span class="delimiter">{</span>
      <span class="keyword">val</span> <a title="String" id="879876">cmd</a> = <a href="../../../Predef.scala.html#7604" title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps">line</a>.<a href="../../../Predef.scala.html#7604" title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps">tail</a> <a href="../../../collection/IndexedSeqOptimized.scala.html#59167" title="(p: Char =&gt; Boolean)String">takeWhile</a> <span class="delimiter">(</span><a title="Char" id="879967">x</a> =&gt; <a href="../../../Boolean.scala.html#57822" title="=&gt; Boolean">!</a><a href="../../../LowPriorityImplicits.scala.html#7396" title="implicit scala.LowPriorityImplicits.charWrapper : (c: Char)scala.runtime.RichChar">x</a>.<a href="../../../runtime/RichChar.scala.html#57199" title="=&gt; Boolean">isWhitespace</a><span class="delimiter">)</span>
      <a href="#632826" title="(cmd: String)Option[ILoop.this.LoopCommand]">uniqueCommand</a><span title="ILoop.this.Result" class="delimiter">(</span><a href="#879876" title="String">cmd</a><span class="delimiter">)</span> <span class="keyword">match</span> <span class="delimiter">{</span>
        <span class="keyword">case</span> Some<a href="#3332841" title="ILoop.this.Result" id="3332842" class="delimiter">(</a><a href="../../../Option.scala.html#63132" title="ILoop.this.LoopCommand" id="879971">lc</a><span class="delimiter">)</span> =&gt; <a href="LoopCommands.scala.html#875956" title="(line: String)ILoop.this.Result">lc</a><a href="#3332844" title="(x: ILoop.this.Result)ILoop.this.Result" class="delimiter">(</a><a href="../../../Predef.scala.html#7604" title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps">line</a>.<a href="../../../Predef.scala.html#7604" title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps">tail</a> <a href="../../../Predef.scala.html#7604" title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps">stripPrefix</a> <a href="#879876" title="String">cmd</a> <a href="../../../collection/IndexedSeqOptimized.scala.html#59168" title="(p: Char =&gt; Boolean)String">dropWhile</a> <span class="delimiter">(</span><a href="../../../LowPriorityImplicits.scala.html#7396" title="implicit scala.LowPriorityImplicits.charWrapper : (c: Char)scala.runtime.RichChar">_</a>.<a href="../../../runtime/RichChar.scala.html#57199" title="=&gt; Boolean">isWhitespace</a><span class="delimiter">)</span><span class="delimiter">)</span>
        <span class="keyword">case</span> _        =&gt; <a href="#632824" title="(cmd: String)ILoop.this.Result">ambiguousError</a><a href="#3332844" title="(x: ILoop.this.Result)ILoop.this.Result" class="delimiter">(</a><a href="#879876" title="String">cmd</a><span class="delimiter">)</span>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>
    <span class="keyword">else</span> <span title="ILoop.this.Result" class="keyword">if</span> <span class="delimiter">(</span><a href="#632787" title="=&gt; scala.tools.nsc.interpreter.IMain">intp</a>.<a href="IMain.scala.html#632489" title="=&gt; scala.tools.nsc.Global">global</a> <span title="(x$1: AnyRef)Boolean">==</span> <span title="Null(null)" class="keyword">null</span><span class="delimiter">)</span> <a href="LoopCommands.scala.html#875675" title="(keepRunning: Boolean, lineToRecord: Option[String])ILoop.this.Result">Result</a><span class="delimiter">(</span><span title="Boolean(false)" class="keyword">false</span>, <a href="../../../Option.scala.html#1585" title="None.type">None</a><span class="delimiter">)</span>  // Notice failure to create compiler
    <span class="keyword">else</span> <a href="LoopCommands.scala.html#875675" title="(keepRunning: Boolean, lineToRecord: Option[String])ILoop.this.Result">Result</a><span class="delimiter">(</span><span title="Boolean(true)" class="keyword">true</span>, <a href="#632886" title="(code: String)Option[String]">interpretStartingWith</a><span class="delimiter">(</span><a href="#879436" title="String">line</a><span class="delimiter">)</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(cond: String =&gt; Boolean)Iterator[String]" id="632881">readWhile</a><span class="delimiter">(</span><a title="String =&gt; Boolean" id="880072">cond</a>: String =&gt; Boolean<span class="delimiter">)</span> = <span class="delimiter">{</span>
    <a href="../../../package.scala.html#55538" title="=&gt; collection.Iterator.type">Iterator</a> <a href="../../../collection/Iterator.scala.html#97554" title="(elem: =&gt; String)Iterator[String]">continually</a> <a href="#632781" title="=&gt; scala.tools.nsc.interpreter.InteractiveReader">in</a>.<a href="InteractiveReader.scala.html#875593" title="(prompt: String)String">readLine</a><span class="delimiter">(</span><span title="String(&quot;&quot;)" class="string">&quot;&quot;</span><span class="delimiter">)</span> <a href="../../../collection/Iterator.scala.html#66779" title="(p: String =&gt; Boolean)Iterator[String]">takeWhile</a> <span class="delimiter">(</span><a title="String" id="880080">x</a> =&gt; <a href="#880080" title="String">x</a> <span title="(x$1: AnyRef)Boolean">!=</span> <span title="Null(null)" class="keyword">null</span> <a href="../../../Boolean.scala.html#57826" title="(x: Boolean)Boolean">&amp;&amp;</a> <a href="../../../Function1.scala.html#58642" title="(v1: String)Boolean">cond</a><span class="delimiter">(</span><a href="#880080" title="String">x</a><span class="delimiter">)</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="()ILoop.this.Result" id="632882">pasteCommand</a><span class="delimiter">(</span><span class="delimiter">)</span>: <a href="LoopCommands.scala.html#632911" title="ILoop.this.Result">Result</a> = <span class="delimiter">{</span>
    <a href="#632830" title="(msg: String)Unit">echo</a><span class="delimiter">(</span><span title="String(&quot;// Entering paste mode (ctrl-D to finish)\n&quot;)" class="string">&quot;// Entering paste mode (ctrl-D to finish)\n&quot;</span><span class="delimiter">)</span>
    <span class="keyword">val</span> <a title="String" id="880086">code</a> = <a href="#632881" title="(cond: String =&gt; Boolean)Iterator[String]">readWhile</a><span class="delimiter">(</span><a title="String" id="880088">_</a> =&gt; <span title="Boolean(true)" class="keyword">true</span><span class="delimiter">)</span> <a href="../../../collection/TraversableOnce.scala.html#58283" title="(sep: String)String">mkString</a> <span title="String(&quot;\n&quot;)" class="string">&quot;\n&quot;</span>
    <a href="#632830" title="(msg: String)Unit">echo</a><span class="delimiter">(</span><span title="String(&quot;\n// Exiting paste mode, now interpreting.\n&quot;)" class="string">&quot;\n// Exiting paste mode, now interpreting.\n&quot;</span><span class="delimiter">)</span>
    <a href="#632787" title="=&gt; scala.tools.nsc.interpreter.IMain">intp</a> <a href="IMain.scala.html#632554" title="(line: String)scala.tools.nsc.interpreter.IR.Result">interpret</a> <a href="#880086" title="String">code</a>
    <a href="LoopCommands.scala.html#875673" title="implicit scala.tools.nsc.interpreter.LoopCommands.Result.resultFromUnit : (x: Unit)ILoop.this.Result" class="delimiter">(</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">private</span> <span class="keyword">object</span> <a title="ILoop.this.paste.type" id="632883">paste</a> <a href="#632884" title="ILoop.this.paste.type" class="keyword">extends</a> <a href="Pasted.scala.html#37347" title="scala.tools.nsc.interpreter.Pasted">Pasted</a> <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="String" id="880115">ContinueString</a> = <span title="String(&quot;     | &quot;)" class="string">&quot;     | &quot;</span>
    <span class="keyword">val</span> <a title="String" id="880117">PromptString</a>   = <span title="String(&quot;scala&gt; &quot;)" class="string">&quot;scala&gt; &quot;</span>

    <span class="keyword">def</span> <a title="(line: String)Unit" id="880119">interpret</a><span class="delimiter">(</span><a title="String" id="880122">line</a>: <span title="String">String</span><span class="delimiter">)</span>: <a href="../../../Unit.scala.html#1515" title="Unit">Unit</a> = <span class="delimiter">{</span>
      <a href="#632830" title="(msg: String)Unit">echo</a><span class="delimiter">(</span><a href="#880122" title="String">line</a>.<span title="()String">trim</span><span class="delimiter">)</span>
      <a href="#632787" title="=&gt; scala.tools.nsc.interpreter.IMain">intp</a> <a href="IMain.scala.html#632554" title="(line: String)scala.tools.nsc.interpreter.IR.Result">interpret</a> <a href="#880122" title="String">line</a>
      <a href="#632830" title="(msg: String)Unit">echo</a><span class="delimiter">(</span><span title="String(&quot;&quot;)" class="string">&quot;&quot;</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>

    <span class="keyword">def</span> <a title="(start: String)Unit" id="880120">transcript</a><span class="delimiter">(</span><a title="String" id="880126">start</a>: <span title="String">String</span><span class="delimiter">)</span> = <span class="delimiter">{</span>
      <a href="#632830" title="(msg: String)Unit">echo</a><span class="delimiter">(</span><span title="String(&quot;\n// Detected repl transcript paste: ctrl-D to finish.\n&quot;)" class="string">&quot;\n// Detected repl transcript paste: ctrl-D to finish.\n&quot;</span><span class="delimiter">)</span>
      <a href="Pasted.scala.html#880113" title="(lines: TraversableOnce[String])Unit">apply</a><span class="delimiter">(</span><a href="../../../collection/Iterator.scala.html#97538" title="(elems: String*)Iterator[String]">Iterator</a><span class="delimiter">(</span><a href="#880126" title="String">start</a><span class="delimiter">)</span> <a href="../../../collection/Iterator.scala.html#66758" title="(that: =&gt; scala.collection.GenTraversableOnce[String])Iterator[String]">++</a> <a href="#632881" title="(cond: String =&gt; Boolean)Iterator[String]">readWhile</a><span class="delimiter">(</span><a href="#880149" title="String">_</a>.<span title="()String">trim</span> <span title="(x$1: AnyRef)Boolean">!=</span> <a href="#880117" title="=&gt; String">PromptString</a>.<span title="()String">trim</span><span class="delimiter">)</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>
  <span class="keyword">import</span> <a href="#632883" title="ILoop.this.paste.type">paste</a>.<span class="delimiter">{</span> ContinueString, PromptString <span class="delimiter">}</span>

  /** Interpret expressions starting with the first line.
    * Read lines until a complete compilation unit is available
    * or until a syntax error has been seen.  If a full unit is
    * read, go ahead and interpret it.  Return the full string
    * to be recorded for replay, if any.
    */
  <span class="keyword">def</span> <a title="(code: String)Option[String]" id="632886">interpretStartingWith</a><span class="delimiter">(</span><a title="String" id="880070">code</a>: <span title="String">String</span><span class="delimiter">)</span>: <a href="../../../Option.scala.html#978" title="Option[String]">Option</a><span class="delimiter">[</span>String<span class="delimiter">]</span> = <span class="delimiter">{</span>
    // signal completion non-completion input has been received
    <a href="#632781" title="=&gt; scala.tools.nsc.interpreter.InteractiveReader">in</a>.<a href="InteractiveReader.scala.html#875584" title="=&gt; scala.tools.nsc.interpreter.Completion">completion</a>.<a href="Completion.scala.html#871962" title="()Unit">resetVerbosity</a><span class="delimiter">(</span><span class="delimiter">)</span>

    <span class="keyword">def</span> <a title="=&gt; (scala.tools.nsc.interpreter.IR.Result, Option[String])" id="880156">reallyInterpret</a> = <span class="delimiter">{</span>
      <span class="keyword">val</span> <a title="scala.tools.nsc.interpreter.IR.Result" id="880157">reallyResult</a> = <a href="#632787" title="=&gt; scala.tools.nsc.interpreter.IMain">intp</a>.<a href="IMain.scala.html#632554" title="(line: String)scala.tools.nsc.interpreter.IR.Result">interpret</a><span class="delimiter">(</span><a href="#880070" title="String">code</a><span class="delimiter">)</span>
      <a href="../../../Tuple2.scala.html#62849" title="(_1: scala.tools.nsc.interpreter.IR.Result, _2: Option[String])(scala.tools.nsc.interpreter.IR.Result, Option[String])" class="delimiter">(</a><a href="#880157" title="scala.tools.nsc.interpreter.IR.Result">reallyResult</a>, <a href="#880157" title="scala.tools.nsc.interpreter.IR.Result">reallyResult</a> <span class="keyword">match</span> <span class="delimiter">{</span>
        <span class="keyword">case</span> <a href="package.scala.html#55731" title="=&gt; scala.tools.nsc.interpreter.Results.type">IR</a>.<a href="Results.scala.html#874715" title="Option[String]" id="3332866">Error</a>       =&gt; <a href="#3332870" title="(x: Option[String])Option[String]">None</a>
        <span class="keyword">case</span> <a href="package.scala.html#55731" title="=&gt; scala.tools.nsc.interpreter.Results.type">IR</a>.<a href="Results.scala.html#874713" title="Option[String]" id="3332867">Success</a>     =&gt; <a href="../../../Option.scala.html#63128" title="(x: String)Some[String]">Some</a><a href="#3332870" title="(x: Option[String])Option[String]" class="delimiter">(</a><a href="#880070" title="String">code</a><span class="delimiter">)</span>
        <span class="keyword">case</span> <a href="package.scala.html#55731" title="=&gt; scala.tools.nsc.interpreter.Results.type">IR</a>.<a href="Results.scala.html#874717" title="Option[String]" id="3332868">Incomplete</a>  =&gt;
          <a href="#3332870" title="(x: Option[String])Option[String]" class="keyword">if</a> <span class="delimiter">(</span><a href="#632781" title="=&gt; scala.tools.nsc.interpreter.InteractiveReader">in</a>.<a href="InteractiveReader.scala.html#875580" title="=&gt; Boolean">interactive</a> <a href="../../../Boolean.scala.html#57826" title="(x: Boolean)Boolean">&amp;&amp;</a> <a href="#880070" title="String">code</a>.<span title="(x$1: String)Boolean">endsWith</span><span class="delimiter">(</span><span title="String(&quot;\n\n&quot;)" class="string">&quot;\n\n&quot;</span><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">{</span>
            <a href="#632830" title="(msg: String)Unit">echo</a><span class="delimiter">(</span><span title="String(&quot;You typed two blank lines.  Starting a new command.&quot;)" class="string">&quot;You typed two blank lines.  Starting a new command.&quot;</span><span class="delimiter">)</span>
            <a href="../../../Option.scala.html#1585" title="None.type">None</a>
          <span class="delimiter">}</span>
          <span class="keyword">else</span> <a href="#632781" title="=&gt; scala.tools.nsc.interpreter.InteractiveReader">in</a>.<a href="InteractiveReader.scala.html#875593" title="(prompt: String)String">readLine</a><a href="#3332849" title="String" class="delimiter">(</a><a href="#880115" title="=&gt; String">ContinueString</a><span class="delimiter">)</span> <span class="keyword">match</span> <span class="delimiter">{</span>
            <span class="keyword">case</span> <a href="#3332849" title="Option[String]" id="3332852" class="keyword">null</a> =&gt;
              // we know compilation is going to fail since we're at EOF and the
              // parser thinks the input is still incomplete, but since this is
              // a file being read non-interactively we want to fail.  So we send
              // it straight to the compiler for the nice error message.
              <a href="#632787" title="=&gt; scala.tools.nsc.interpreter.IMain">intp</a>.<a href="IMain.scala.html#632547" title="(code: String)Boolean">compileString</a><span class="delimiter">(</span><a href="#880070" title="String">code</a><span class="delimiter">)</span>
              <a href="../../../Option.scala.html#1585" title="None.type">None</a>

            <span class="keyword">case</span> line =&gt; <a href="#632886" title="(code: String)Option[String]">interpretStartingWith</a><a href="#3332854" title="(x: Option[String])Option[String]" class="delimiter">(</a><a href="#880070" title="String">code</a> <span title="(x$1: Any)String">+</span> <span title="String(&quot;\n&quot;)" class="string">&quot;\n&quot;</span> <span title="(x$1: Any)String">+</span> line<span class="delimiter">)</span>
          <span class="delimiter">}</span>
      <span class="delimiter">}</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>

    /** Here we place ourselves between the user and the interpreter and examine
     *  the input they are ostensibly submitting.  We intervene in several cases:
     *
     *  1) If the line starts with &quot;scala&gt; &quot; it is assumed to be an interpreter paste.
     *  2) If the line starts with &quot;.&quot; (but not &quot;..&quot; or &quot;./&quot;) it is treated as an invocation
     *     on the previous result.
     *  3) If the Completion object's execute returns Some(_), we inject that value
     *     and avoid the interpreter, as it's likely not valid scala code.
     */
    <span title="Option[String]" class="keyword">if</span> <span class="delimiter">(</span><a href="#880070" title="String">code</a> <span title="(x$1: AnyRef)Boolean">==</span> <span title="String(&quot;&quot;)" class="string">&quot;&quot;</span><span class="delimiter">)</span> <a href="../../../Option.scala.html#1585" title="None.type">None</a>
    <span class="keyword">else</span> <span title="Option[String]" class="keyword">if</span> <span class="delimiter">(</span><a href="../../../Boolean.scala.html#57822" title="=&gt; Boolean">!</a><a href="#632883" title="ILoop.this.paste.type">paste</a>.<a href="Pasted.scala.html#880100" title="=&gt; Boolean">running</a> <a href="../../../Boolean.scala.html#57826" title="(x: Boolean)Boolean">&amp;&amp;</a> <a href="#880070" title="String">code</a>.<span title="()String">trim</span>.<span title="(x$1: String)Boolean">startsWith</span><span class="delimiter">(</span><a href="#880117" title="=&gt; String">PromptString</a><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">{</span>
      <a href="#632883" title="ILoop.this.paste.type">paste</a>.<a href="#880120" title="(start: String)Unit">transcript</a><span class="delimiter">(</span><a href="#880070" title="String">code</a><span class="delimiter">)</span>
      <a href="../../../Option.scala.html#1585" title="None.type">None</a>
    <span class="delimiter">}</span>
    <span class="keyword">else</span> <span title="Option[String]" class="keyword">if</span> <span class="delimiter">(</span><a href="Completion.scala.html#38143" title="scala.tools.nsc.interpreter.Completion.type">Completion</a>.<a href="Completion.scala.html#871958" title="(code: String)Boolean">looksLikeInvocation</a><span class="delimiter">(</span><a href="#880070" title="String">code</a><span class="delimiter">)</span> <a href="../../../Boolean.scala.html#57826" title="(x: Boolean)Boolean">&amp;&amp;</a> <a href="#632787" title="=&gt; scala.tools.nsc.interpreter.IMain">intp</a>.<a href="IMain.scala.html#632578" title="=&gt; String">mostRecentVar</a> <span title="(x$1: AnyRef)Boolean">!=</span> <span title="String(&quot;&quot;)" class="string">&quot;&quot;</span><span class="delimiter">)</span> <span class="delimiter">{</span>
      <a href="#632886" title="(code: String)Option[String]">interpretStartingWith</a><span class="delimiter">(</span><a href="#632787" title="=&gt; scala.tools.nsc.interpreter.IMain">intp</a>.<a href="IMain.scala.html#632578" title="=&gt; String">mostRecentVar</a> <span title="(x$1: Any)String">+</span> <a href="#880070" title="String">code</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>
    <span class="keyword">else</span> <span title="Option[String]" class="keyword">if</span> <span class="delimiter">(</span><a href="#880070" title="String">code</a>.<span title="()String">trim</span> <span title="(x$1: String)Boolean">startsWith</span> <span title="String(&quot;//&quot;)" class="string">&quot;//&quot;</span><span class="delimiter">)</span> <span class="delimiter">{</span>
      // line comment, do nothing
      <a href="../../../Option.scala.html#1585" title="None.type">None</a>
    <span class="delimiter">}</span>
    <span class="keyword">else</span>
      <a href="#880156" title="=&gt; (scala.tools.nsc.interpreter.IR.Result, Option[String])">reallyInterpret</a>.<a href="../../../Tuple2.scala.html#60637" title="=&gt; Option[String]">_2</a>
  <span class="delimiter">}</span>

  // runs :load `file` on any files passed via -i
  <span class="keyword">def</span> <a title="(settings: scala.tools.nsc.Settings)Unit" id="632887">loadFiles</a><span class="delimiter">(</span><a title="scala.tools.nsc.Settings" id="880190">settings</a>: <a href="../Settings.scala.html#27643" title="scala.tools.nsc.Settings">Settings</a><span class="delimiter">)</span> = <a href="#880190" title="scala.tools.nsc.Settings">settings</a> <span class="keyword">match</span> <span class="delimiter">{</span>
    <span class="keyword">case</span> <a href="#3332885" title="Unit" id="3332886">settings</a>: GenericRunnerSettings =&gt;
      <span class="keyword">for</span> <span class="delimiter">(</span><a title="String" id="880216">filename</a> &lt;- settings.<a href="../GenericRunnerSettings.scala.html#618189" title="=&gt; scala.tools.nsc.GenericRunnerSettings#MultiStringSetting">loadfiles</a>.<a href="../../../collection/immutable/List.scala.html#62719" title="(f: String =&gt; Unit)Unit">value</a><span class="delimiter">)</span> <span class="delimiter">{</span>
        <span class="keyword">val</span> <a title="String" id="880217">cmd</a> = <span title="String(&quot;:load &quot;)" class="string">&quot;:load &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#880216" title="String">filename</a>
        <a href="#632880" title="(line: String)ILoop.this.Result">command</a><span class="delimiter">(</span><a href="#880217" title="String">cmd</a><span class="delimiter">)</span>
        <a href="#632812" title="(cmd: String)Unit">addReplay</a><span class="delimiter">(</span><a href="#880217" title="String">cmd</a><span class="delimiter">)</span>
        <a href="#632830" title="(msg: String)Unit">echo</a><span class="delimiter">(</span><span title="String(&quot;&quot;)" class="string">&quot;&quot;</span><span class="delimiter">)</span>
      <span class="delimiter">}</span>
    <span class="keyword">case</span> _ =&gt;
  <span class="delimiter">}</span>

  /** Tries to create a JLineReader, falling back to SimpleReader:
   *  unless settings or properties are such that it should start
   *  with SimpleReader.
   */
  <span class="keyword">def</span> <a title="(settings: scala.tools.nsc.Settings)scala.tools.nsc.interpreter.InteractiveReader" id="632888">chooseReader</a><span class="delimiter">(</span><a title="scala.tools.nsc.Settings" id="880219">settings</a>: <a href="../Settings.scala.html#27643" title="scala.tools.nsc.Settings">Settings</a><span class="delimiter">)</span>: <a href="InteractiveReader.scala.html#39027" title="scala.tools.nsc.interpreter.InteractiveReader">InteractiveReader</a> = <span class="delimiter">{</span>
    <span title="scala.tools.nsc.interpreter.InteractiveReader" class="keyword">if</span> <span class="delimiter">(</span><a href="#880219" title="scala.tools.nsc.Settings">settings</a>.<a href="../settings/ScalaSettings.scala.html#539987" title="=&gt; settings.BooleanSetting">Xnojline</a>.<a href="../settings/MutableSettings.scala.html#541066" title="=&gt; Boolean">value</a> <a href="../../../Boolean.scala.html#57825" title="(x: Boolean)Boolean">||</a> <a href="../Properties.scala.html#27455" title="scala.tools.nsc.Properties.type">Properties</a>.<a href="../Properties.scala.html#593231" title="=&gt; Boolean">isEmacsShell</a><span class="delimiter">)</span>
      <a href="SimpleReader.scala.html#879477" title="(in: java.io.BufferedReader, out: scala.tools.nsc.interpreter.JPrintWriter, interactive: Boolean)scala.tools.nsc.interpreter.SimpleReader">SimpleReader</a><span class="delimiter">(</span><span class="delimiter">)</span>
    <span class="keyword">else</span> <a href="#3332902" title="scala.tools.nsc.interpreter.InteractiveReader" id="3332897" class="keyword">try</a> <span title="scala.tools.nsc.interpreter.JLineReader" class="keyword">new</span> <a href="JLineReader.scala.html#38838" title="scala.tools.nsc.interpreter.JLineReader">JLineReader</a><span class="delimiter">(</span>
      <span title="scala.tools.nsc.interpreter.Completion" class="keyword">if</span> <span class="delimiter">(</span><a href="#880219" title="scala.tools.nsc.Settings">settings</a>.<a href="../settings/ScalaSettings.scala.html#540053" title="=&gt; settings.BooleanSetting">noCompletion</a>.<a href="../settings/MutableSettings.scala.html#541066" title="=&gt; Boolean">value</a><span class="delimiter">)</span> <a href="Completion.scala.html#37756" title="scala.tools.nsc.interpreter.NoCompletion.type">NoCompletion</a>
      <span class="keyword">else</span> <span title="scala.tools.nsc.interpreter.JLineCompletion" class="keyword">new</span> <a href="JLineCompletion.scala.html#37278" title="scala.tools.nsc.interpreter.JLineCompletion">JLineCompletion</a><span class="delimiter">(</span><a href="#632787" title="=&gt; scala.tools.nsc.interpreter.IMain">intp</a><span class="delimiter">)</span>
    <span class="delimiter">)</span>
    <span class="keyword">catch</span> <span class="delimiter">{</span>
      <span class="keyword">case</span> ex @ <span class="delimiter">(</span>_: Exception | _: NoClassDefFoundError<span class="delimiter">)</span> =&gt;
        <a href="#632830" title="(msg: String)Unit">echo</a><span class="delimiter">(</span><span title="String(&quot;Failed to created JLineReader: &quot;)" class="string">&quot;Failed to created JLineReader: &quot;</span> <span title="(x$1: Any)String">+</span> ex <span title="(x$1: Any)String">+</span> <span title="String(&quot;\nFalling back to SimpleReader.&quot;)" class="string">&quot;\nFalling back to SimpleReader.&quot;</span><span class="delimiter">)</span>
        <a href="SimpleReader.scala.html#879477" title="(in: java.io.BufferedReader, out: scala.tools.nsc.interpreter.JPrintWriter, interactive: Boolean)scala.tools.nsc.interpreter.SimpleReader">SimpleReader</a><span class="delimiter">(</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>
  <span class="keyword">def</span> <a title="(settings: scala.tools.nsc.Settings)Boolean" id="632889">process</a><span class="delimiter">(</span><a title="scala.tools.nsc.Settings" id="636044">settings</a>: <a href="../Settings.scala.html#27643" title="scala.tools.nsc.Settings">Settings</a><span class="delimiter">)</span>: <a href="../../../Boolean.scala.html#1425" title="Boolean">Boolean</a> = <a href="../util/ScalaClassLoader.scala.html#594237" title="(body: =&gt; Boolean)Boolean">savingContextLoader</a> <span class="delimiter">{</span>
    <a href="#37218" title="ILoop.this.type" class="keyword">this</a>.<a href="#632784" title="(x$1: scala.tools.nsc.Settings)Unit">settings</a> = <a href="#636044" title="scala.tools.nsc.Settings">settings</a>
    <a href="#632821" title="()Unit">createInterpreter</a><span class="delimiter">(</span><span class="delimiter">)</span>

    // sets in to some kind of reader depending on environmental cues
    <a href="#632781" title="(x$1: scala.tools.nsc.interpreter.InteractiveReader)Unit">in</a> = <a href="#632954" title="Option[java.io.BufferedReader]">in0</a> <span class="keyword">match</span> <span class="delimiter">{</span>
      <span class="keyword">case</span> Some<a href="#3332919" title="scala.tools.nsc.interpreter.InteractiveReader" id="3332920" class="delimiter">(</a><a href="../../../Option.scala.html#63132" title="java.io.BufferedReader" id="880303">reader</a><span class="delimiter">)</span> =&gt; <a href="SimpleReader.scala.html#879477" title="(in: java.io.BufferedReader, out: scala.tools.nsc.interpreter.JPrintWriter, interactive: Boolean)scala.tools.nsc.interpreter.SimpleReader">SimpleReader</a><a href="#3332924" title="(x: scala.tools.nsc.interpreter.InteractiveReader)scala.tools.nsc.interpreter.InteractiveReader" class="delimiter">(</a><a href="#880303" title="java.io.BufferedReader">reader</a>, <a href="#632955" title="=&gt; scala.tools.nsc.interpreter.JPrintWriter">out</a>, <span title="Boolean(true)" class="keyword">true</span><span class="delimiter">)</span>
      <span class="keyword">case</span> <a href="../../../Option.scala.html#1585" title="scala.tools.nsc.interpreter.InteractiveReader" id="3332922">None</a>         =&gt;
        // some post-initialization
        <a href="#632888" title="(settings: scala.tools.nsc.Settings)scala.tools.nsc.interpreter.InteractiveReader">chooseReader</a><a href="#3332924" title="(x: scala.tools.nsc.interpreter.InteractiveReader)scala.tools.nsc.interpreter.InteractiveReader" class="delimiter">(</a><a href="#636044" title="scala.tools.nsc.Settings">settings</a><span class="delimiter">)</span> <span class="keyword">match</span> <span class="delimiter">{</span>
          <span class="keyword">case</span> <a href="#3332911" title="scala.tools.nsc.interpreter.InteractiveReader" id="3332912">x</a>: JLineReader =&gt; <a href="ILoopInit.scala.html#632944" title="(body: =&gt; Unit)Unit">addThunk</a><span class="delimiter">(</span>x.<a href="JLineReader.scala.html#880226" title="=&gt; scala.tools.nsc.interpreter.JLineReader#JLineConsoleReader">consoleReader</a>.<a href="JLineReader.scala.html#880375" title="=&gt; Unit">postInit</a><span class="delimiter">)</span> ; x
          <span class="keyword">case</span> x              =&gt; <a href="#3332914" title="(x: scala.tools.nsc.interpreter.InteractiveReader)scala.tools.nsc.interpreter.InteractiveReader">x</a>
        <span class="delimiter">}</span>
    <span class="delimiter">}</span>
    // Bind intp somewhere out of the regular namespace where
    // we can get at it in generated code.
    <a href="ILoopInit.scala.html#632944" title="(body: =&gt; Unit)Unit">addThunk</a><span class="delimiter">(</span><a href="#632787" title="=&gt; scala.tools.nsc.interpreter.IMain">intp</a>.<a href="IMain.scala.html#632566" title="(p: scala.tools.nsc.interpreter.NamedParam)scala.tools.nsc.interpreter.IR.Result">quietBind</a><span title="Unit" class="delimiter">(</span><a href="NamedParam.scala.html#880383" title="[T](name: String, x: T)(implicit evidence$1: reflect.runtime.universe.TypeTag[T], implicit evidence$2: scala.reflect.ClassTag[T])scala.tools.nsc.interpreter.NamedParam">NamedParam</a><span title="(name: String, x: scala.tools.nsc.interpreter.IMain)(implicit evidence$1: reflect.runtime.universe.TypeTag[scala.tools.nsc.interpreter.IMain], implicit evidence$2: scala.reflect.ClassTag[scala.tools.nsc.interpreter.IMain])scala.tools.nsc.interpreter.NamedParam" class="delimiter">[</span><a href="IMain.scala.html#38871" title="scala.tools.nsc.interpreter.IMain">IMain</a><span class="delimiter">]</span><span class="delimiter">(</span><span title="String(&quot;$intp&quot;)" class="string">&quot;$intp&quot;</span>, <a href="#632787" title="=&gt; scala.tools.nsc.interpreter.IMain">intp</a><span class="delimiter">)</span><span class="delimiter">(</span><a href="../../reflect/StdTags.scala.html#609305" title="=&gt; tools.reflect.StdRuntimeTags.u.TypeTag[scala.tools.nsc.interpreter.IMain]">tagOfIMain</a>, <a href="../../../reflect/package.scala.html#55632" title="[T](implicit ctag: scala.reflect.ClassTag[T])scala.reflect.ClassTag[T]">classTag</a><a href="../../../reflect/ClassTag.scala.html#81051" title="(implicit ctag: scala.reflect.ClassTag[scala.tools.nsc.interpreter.IMain])scala.reflect.ClassTag[scala.tools.nsc.interpreter.IMain]" class="delimiter">[</a><a href="IMain.scala.html#38871" title="scala.tools.nsc.interpreter.IMain">IMain</a><span class="delimiter">]</span><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
    <a href="ILoopInit.scala.html#632944" title="(body: =&gt; Unit)Unit">addThunk</a><span class="delimiter">(</span><span class="delimiter">{</span>
      <span class="keyword">import</span> scala.tools.nsc.io._
      <span class="keyword">import</span> <a href="../Properties.scala.html#27455" title="scala.tools.nsc.Properties.type">Properties</a>.userHome
      <span class="keyword">import</span> scala.compat.<a href="../../../compat/Platform.scala.html#16125" title="scala.compat.Platform.type">Platform</a>.EOL
      <span class="keyword">val</span> <a title="Option[String]" id="880446">autorun</a> = <a href="ReplConfig.scala.html#55697" title="=&gt; scala.tools.nsc.interpreter.ReplProps">replProps</a>.<a href="ReplProps.scala.html#879811" title="=&gt; scala.sys.Prop[scala.tools.nsc.interpreter.JFile]">replAutorunCode</a>.<a href="../../../sys/Prop.scala.html#584740" title="=&gt; Option[scala.tools.nsc.interpreter.JFile]">option</a> <a href="../../../Option.scala.html#62871" title="(f: scala.tools.nsc.interpreter.JFile =&gt; Option[String])Option[String]">flatMap</a> <span class="delimiter">(</span><a title="scala.tools.nsc.interpreter.JFile" id="880451">f</a> =&gt; io.<a href="../../../reflect/io/File.scala.html#530996" title="(path: scala.reflect.io.Path)(implicit codec: scala.io.Codec)scala.reflect.io.File">File</a><a href="../../../io/Codec.scala.html#393359" title="=&gt; scala.io.Codec" class="delimiter">(</a><a href="../../../reflect/io/Path.scala.html#531010" title="implicit scala.reflect.io.Path.jfile2path : (jfile: java.io.File)scala.reflect.io.Path">f</a><span class="delimiter">)</span>.<a href="../../../reflect/io/File.scala.html#530965" title="()Option[String]">safeSlurp</a><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span>
      <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#880446" title="Option[String]">autorun</a>.<a href="../../../Option.scala.html#62857" title="=&gt; Boolean">isDefined</a><span class="delimiter">)</span> <a href="#632787" title="=&gt; scala.tools.nsc.interpreter.IMain">intp</a>.<a href="IMain.scala.html#632512" title="(code: String)scala.tools.nsc.interpreter.IR.Result">quietRun</a><span title="Unit" class="delimiter">(</span><a href="#880446" title="Option[String]">autorun</a>.<a href="../../../Option.scala.html#62858" title="=&gt; String">get</a><span class="delimiter">)</span>
    <span class="delimiter">}</span><span class="delimiter">)</span>

    <a href="#632887" title="(settings: scala.tools.nsc.Settings)Unit">loadFiles</a><span class="delimiter">(</span><a href="#636044" title="scala.tools.nsc.Settings">settings</a><span class="delimiter">)</span>
    // it is broken on startup; go ahead and exit
    <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#632787" title="=&gt; scala.tools.nsc.interpreter.IMain">intp</a>.<a href="IMain.scala.html#632478" title="=&gt; scala.tools.nsc.interpreter.ReplReporter">reporter</a>.<a href="../reporters/Reporter.scala.html#539679" title="=&gt; Boolean">hasErrors</a><span class="delimiter">)</span>
      <span title="Nothing" class="keyword">return</span> <span title="Boolean(false)" class="keyword">false</span>

    // This is about the illusion of snappiness.  We call initialize()
    // which spins off a separate thread, then print the prompt and try
    // our best to look ready.  The interlocking lazy vals tend to
    // inter-deadlock, so we break the cycle with a single asynchronous
    // message to an actor.
    <span title="Any" class="keyword">if</span> <span class="delimiter">(</span><a href="#632799" title="=&gt; Boolean">isAsync</a><span class="delimiter">)</span> <span class="delimiter">{</span>
      <a href="#632787" title="=&gt; scala.tools.nsc.interpreter.IMain">intp</a> <a href="IMain.scala.html#632486" title="(postInitSignal: =&gt; Unit)Unit">initialize</a> <a href="ILoopInit.scala.html#632936" title="()Unit">initializedCallback</a><span class="delimiter">(</span><span class="delimiter">)</span>
      <a href="ILoopInit.scala.html#632937" title="()java.util.concurrent.Future[Unit]">createAsyncListener</a><span class="delimiter">(</span><span class="delimiter">)</span> // listens for signal to run postInitialization
    <span class="delimiter">}</span>
    <span class="keyword">else</span> <span class="delimiter">{</span>
      <a href="#632787" title="=&gt; scala.tools.nsc.interpreter.IMain">intp</a>.<a href="IMain.scala.html#632487" title="()Unit">initializeSynchronous</a><span class="delimiter">(</span><span class="delimiter">)</span>
      <a href="ILoopInit.scala.html#632940" title="()Unit">postInitialization</a><span class="delimiter">(</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>
    <a href="ILoopInit.scala.html#632916" title="()Unit">printWelcome</a><span class="delimiter">(</span><span class="delimiter">)</span>

    <a title="Nothing" id="880511" class="keyword">try</a> <a href="#632865" title="()Unit">loop</a><span class="delimiter">(</span><span class="delimiter">)</span>
    <span class="keyword">catch</span> <a href="AbstractOrMissingHandler.scala.html#871482" title="()scala.tools.nsc.interpreter.AbstractOrMissingHandler[Nothing]">AbstractOrMissingHandler</a><a href="AbstractOrMissingHandler.scala.html#871346" title="scala.tools.nsc.interpreter.AbstractOrMissingHandler[Nothing]" id="880512" class="delimiter">(</a><span class="delimiter">)</span>
    <span class="keyword">finally</span> <a href="#632819" title="()Unit">closeInterpreter</a><span class="delimiter">(</span><span class="delimiter">)</span>

    <span title="Boolean(true)" class="keyword">true</span>
  <span class="delimiter">}</span>

  /** process command-line arguments and do as they request */
  <span class="keyword">def</span> <a title="(args: Array[String])Boolean" id="632890">process</a><span class="delimiter">(</span><a title="Array[String]" id="636042">args</a>: <a href="../../../Array.scala.html#174" title="Array[String]">Array</a><span class="delimiter">[</span>String<span class="delimiter">]</span><span class="delimiter">)</span>: <a href="../../../Boolean.scala.html#1425" title="Boolean">Boolean</a> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="scala.tools.nsc.interpreter.CommandLine" id="880517">command</a> = <span title="scala.tools.nsc.interpreter.CommandLine" class="keyword">new</span> <a href="CommandLine.scala.html#37407" title="scala.tools.nsc.interpreter.CommandLine">CommandLine</a><span class="delimiter">(</span><a href="../../../Predef.scala.html#7555" title="(xs: Array[String])scala.collection.mutable.ArrayOps[String]">args</a>.<a href="../../../collection/TraversableOnce.scala.html#58263" title="=&gt; List[String]">toList</a>, <a href="#632830" title="(msg: String)Unit">echo</a><span class="delimiter">)</span>
    <span class="keyword">def</span> <a title="()String" id="880518">neededHelp</a><span class="delimiter">(</span><span class="delimiter">)</span>: <span title="String">String</span> =
      <span class="delimiter">(</span><span title="String" class="keyword">if</span> <span class="delimiter">(</span><a href="#880517" title="scala.tools.nsc.interpreter.CommandLine">command</a>.<a href="../CompilerCommand.scala.html#600794" title="=&gt; scala.tools.nsc.Settings">settings</a>.<a href="../settings/StandardScalaSettings.scala.html#540211" title="=&gt; command.settings.BooleanSetting">help</a>.<a href="../settings/MutableSettings.scala.html#541066" title="=&gt; Boolean">value</a><span class="delimiter">)</span> <a href="#880517" title="scala.tools.nsc.interpreter.CommandLine">command</a>.<a href="../CompilerCommand.scala.html#600812" title="=&gt; String">usageMsg</a> <span title="(x$1: Any)String">+</span> <span title="String(&quot;\n&quot;)" class="string">&quot;\n&quot;</span> <span class="keyword">else</span> <span title="String(&quot;&quot;)" class="string">&quot;&quot;</span><span class="delimiter">)</span> <span title="(x$1: Any)String">+</span>
      <span class="delimiter">(</span><span title="Any" class="keyword">if</span> <span class="delimiter">(</span><a href="#880517" title="scala.tools.nsc.interpreter.CommandLine">command</a>.<a href="../CompilerCommand.scala.html#600794" title="=&gt; scala.tools.nsc.Settings">settings</a>.<a href="../settings/ScalaSettings.scala.html#539951" title="=&gt; command.settings.BooleanSetting">Xhelp</a>.<a href="../settings/MutableSettings.scala.html#541066" title="=&gt; Boolean">value</a><span class="delimiter">)</span> <a href="#880517" title="scala.tools.nsc.interpreter.CommandLine">command</a>.<a href="../CompilerCommand.scala.html#600813" title="=&gt; String">xusageMsg</a> <span title="(x$1: Any)String">+</span> <span title="String(&quot;\n&quot;)" class="string">&quot;\n&quot;</span> <span class="keyword">else</span> <span title="String(&quot;&quot;)" class="string">&quot;&quot;</span><span class="delimiter">)</span>

    // if they asked for no help and command is valid, we call the real main
    <a href="#880518" title="()String">neededHelp</a><a href="#3332932" title="String" class="delimiter">(</a><span class="delimiter">)</span> <span class="keyword">match</span> <span class="delimiter">{</span>
      <span class="keyword">case</span> <a href="#3332932" title="Boolean" id="3332935" class="string">&quot;&quot;</a>     =&gt; <a href="#880517" title="scala.tools.nsc.interpreter.CommandLine">command</a>.<a href="../CompilerCommand.scala.html#600804" title="=&gt; Boolean">ok</a> <a href="#3332937" title="(x: Boolean)Boolean">&amp;&amp;</a> <a href="#632889" title="(settings: scala.tools.nsc.Settings)Boolean">process</a><span class="delimiter">(</span><a href="#880517" title="scala.tools.nsc.interpreter.CommandLine">command</a>.<a href="../CompilerCommand.scala.html#600794" title="=&gt; scala.tools.nsc.Settings">settings</a><span class="delimiter">)</span>
      <span class="keyword">case</span> help   =&gt; <a href="#632831" title="(msg: String)Unit">echoNoNL</a><span class="delimiter">(</span>help<span class="delimiter">)</span> ; <span title="Boolean(true)" class="keyword">true</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  @deprecated<span class="delimiter">(</span><span class="string">&quot;Use `process` instead&quot;</span>, <span class="string">&quot;2.9.0&quot;</span><span class="delimiter">)</span>
  <span class="keyword">def</span> <a title="(settings: scala.tools.nsc.Settings)Unit" id="632891">main</a><span class="delimiter">(</span><a title="scala.tools.nsc.Settings" id="880594">settings</a>: <a href="../Settings.scala.html#27643" title="scala.tools.nsc.Settings">Settings</a><span class="delimiter">)</span>: <a href="../../../Unit.scala.html#1515" title="Unit">Unit</a> = <a href="#632889" title="(settings: scala.tools.nsc.Settings)Boolean">process</a><span title="Unit" class="delimiter">(</span><a href="#880594" title="scala.tools.nsc.Settings">settings</a><span class="delimiter">)</span>
<span class="delimiter">}</span>

<span class="keyword">object</span> <a title="scala.tools.nsc.interpreter.ILoop.type" id="37219">ILoop</a> <a href="#37220" title="scala.tools.nsc.interpreter.ILoop.type" class="delimiter">{</a>
  <span class="keyword">implicit</span> <span class="keyword">def</span> <a title="implicit scala.tools.nsc.interpreter.ILoop.loopToInterpreter : (repl: scala.tools.nsc.interpreter.ILoop)scala.tools.nsc.interpreter.IMain" id="875678">loopToInterpreter</a><span class="delimiter">(</span><a title="scala.tools.nsc.interpreter.ILoop" id="875685">repl</a>: <a href="#37218" title="scala.tools.nsc.interpreter.ILoop">ILoop</a><span class="delimiter">)</span>: <a href="IMain.scala.html#38871" title="scala.tools.nsc.interpreter.IMain">IMain</a> = <a href="#875685" title="scala.tools.nsc.interpreter.ILoop">repl</a>.<a href="#632787" title="=&gt; scala.tools.nsc.interpreter.IMain">intp</a>
  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(msg: String)Unit" id="875679">echo</a><span class="delimiter">(</span><a title="String" id="880604">msg</a>: <span title="String">String</span><span class="delimiter">)</span> = <a href="../../../Console.scala.html#136" title="Console.type">Console</a> <a href="../../../Console.scala.html#63314" title="(x: Any)Unit">println</a> <a href="#880604" title="String">msg</a>

  // Designed primarily for use by test code: take a String with a
  // bunch of code, and prints out a transcript of what it would look
  // like if you'd just typed it into the repl.
  <span class="keyword">def</span> <a title="(code: String, settings: scala.tools.nsc.Settings)String" id="875680">runForTranscript</a><span class="delimiter">(</span><a title="String" id="880607">code</a>: <span title="String">String</span>, <a title="scala.tools.nsc.Settings" id="880608">settings</a>: <a href="../Settings.scala.html#27643" title="scala.tools.nsc.Settings">Settings</a><span class="delimiter">)</span>: <span title="String">String</span> = <span class="delimiter">{</span>
    <span class="keyword">import</span> java.io.<span class="delimiter">{</span> BufferedReader, StringReader, OutputStreamWriter <span class="delimiter">}</span>

    <a href="../util/package.scala.html#55854" title="(stream: java.io.OutputStream =&gt; Unit)String">stringFromStream</a> <span class="delimiter">{</span> <a title="java.io.OutputStream" id="880612">ostream</a> =&gt;
      <a href="../../../Console.scala.html#136" title="Console.type">Console</a>.<a href="../../../Console.scala.html#63292" title="(out: java.io.OutputStream)(thunk: =&gt; Boolean)Boolean">withOut</a><span class="delimiter">(</span><a href="#880612" title="java.io.OutputStream">ostream</a><span class="delimiter">)</span> <span title="Unit" class="delimiter">{</span>
        <span class="keyword">val</span> <a title="java.io.PrintWriter" id="880636">output</a> = <a href="#880639" title="java.io.PrintWriter" class="keyword">new</a> <a href="package.scala.html#55728" title="anonymous class $anon extends java.io.PrintWriter" id="880639">JPrintWriter</a><span class="delimiter">(</span><span title="(x$1: java.io.OutputStream)java.io.OutputStreamWriter" class="keyword">new</span> <span title="java.io.OutputStreamWriter">OutputStreamWriter</span><span class="delimiter">(</span><a href="#880612" title="java.io.OutputStream">ostream</a><span class="delimiter">)</span>, <span title="Boolean(true)" class="keyword">true</span><span class="delimiter">)</span> <span class="delimiter">{</span>
          <span class="keyword">override</span> <span class="keyword">def</span> <a title="(str: String)Unit" id="880641">write</a><span class="delimiter">(</span><a title="String" id="880643">str</a>: <span title="String">String</span><span class="delimiter">)</span> = <span class="delimiter">{</span>
            // completely skip continuation lines
            <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="../../../Predef.scala.html#7604" title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps">str</a> <a href="../../../collection/IndexedSeqOptimized.scala.html#59124" title="(p: Char =&gt; Boolean)Boolean">forall</a> <span class="delimiter">(</span><a title="Char" id="880840">ch</a> =&gt; <a href="../../../LowPriorityImplicits.scala.html#7396" title="implicit scala.LowPriorityImplicits.charWrapper : (c: Char)scala.runtime.RichChar">ch</a>.<a href="../../../runtime/RichChar.scala.html#57199" title="=&gt; Boolean">isWhitespace</a> <a href="../../../Boolean.scala.html#57825" title="(x: Boolean)Boolean">||</a> <a href="#880840" title="Char">ch</a> <a href="../../../Char.scala.html#57246" title="(x: Char)Boolean">==</a> <span title="Char('|')" class="char">'|'</span><span class="delimiter">)</span><span class="delimiter">)</span> <span title="Unit" class="delimiter">(</span><span class="delimiter">)</span>
            // print a newline on empty scala prompts
            <span class="keyword">else</span> <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><span class="delimiter">(</span><a href="../../../Predef.scala.html#7604" title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps">str</a> <a href="../../../collection/SeqLike.scala.html#58824" title="(elem: Any)Boolean">contains</a> <span title="Char('\n')" class="char">'\n'</span><span class="delimiter">)</span> <a href="../../../Boolean.scala.html#57826" title="(x: Boolean)Boolean">&amp;&amp;</a> <span class="delimiter">(</span><a href="#880643" title="String">str</a>.<span title="()String">trim</span> <span title="(x$1: AnyRef)Boolean">==</span> <span title="String(&quot;scala&gt; &quot;)" class="string">&quot;scala&gt; &quot;</span><span class="delimiter">)</span><span class="delimiter">)</span> <a href="#880639" title="java.io.PrintWriter" class="keyword">super</a>.<span title="(x$1: String)Unit">write</span><span class="delimiter">(</span><span title="String(&quot;\n&quot;)" class="string">&quot;\n&quot;</span><span class="delimiter">)</span>
            <span class="keyword">else</span> <a href="#880639" title="java.io.PrintWriter" class="keyword">super</a>.<span title="(x$1: String)Unit">write</span><span class="delimiter">(</span><a href="#880643" title="String">str</a><span class="delimiter">)</span>
          <span class="delimiter">}</span>
        <span class="delimiter">}</span>
        <span class="keyword">val</span> <a title="java.io.BufferedReader" id="880637">input</a> = <a href="#880901" title="java.io.BufferedReader" class="keyword">new</a> <a title="anonymous class $anon extends java.io.BufferedReader" id="880901">BufferedReader</a><span class="delimiter">(</span><span title="java.io.StringReader" class="keyword">new</span> <span title="java.io.StringReader">StringReader</span><span class="delimiter">(</span><a href="#880607" title="String">code</a><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">{</span>
          <span class="keyword">override</span> <span class="keyword">def</span> <a title="()String" id="880903">readLine</a><span class="delimiter">(</span><span class="delimiter">)</span>: <span title="String">String</span> = <span class="delimiter">{</span>
            <span class="keyword">val</span> <a title="String" id="880926">s</a> = <a href="#880901" title="java.io.BufferedReader" class="keyword">super</a>.<span title="()String">readLine</span><span class="delimiter">(</span><span class="delimiter">)</span>
            // helping out by printing the line being interpreted.
            <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#880926" title="String">s</a> <span title="(x$1: AnyRef)Boolean">!=</span> <span title="Null(null)" class="keyword">null</span><span class="delimiter">)</span>
              <a href="#880636" title="java.io.PrintWriter">output</a>.<span title="(x$1: String)Unit">println</span><span class="delimiter">(</span><a href="#880926" title="String">s</a><span class="delimiter">)</span>
            <a href="#880926" title="String">s</a>
          <span class="delimiter">}</span>
        <span class="delimiter">}</span>
        <span class="keyword">val</span> <a title="scala.tools.nsc.interpreter.ILoop" id="880638">repl</a> = <a href="#632778" title="(in0: java.io.BufferedReader, out: scala.tools.nsc.interpreter.JPrintWriter)scala.tools.nsc.interpreter.ILoop" class="keyword">new</a> <a href="#37218" title="scala.tools.nsc.interpreter.ILoop">ILoop</a><span class="delimiter">(</span><a href="#880637" title="java.io.BufferedReader">input</a>, <a href="#880636" title="java.io.PrintWriter">output</a><span class="delimiter">)</span>
        <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#880608" title="scala.tools.nsc.Settings">settings</a>.<a href="../settings/ScalaSettings.scala.html#539943" title="=&gt; settings.PathSetting">classpath</a>.<a href="../../../reflect/internal/settings/MutableSettings.scala.html#423750" title="=&gt; Boolean">isDefault</a><span class="delimiter">)</span>
          <a href="#880608" title="scala.tools.nsc.Settings">settings</a>.<a href="../settings/ScalaSettings.scala.html#539943" title="=&gt; settings.PathSetting">classpath</a>.<a href="../../../reflect/internal/settings/MutableSettings.scala.html#423753" title="(arg: settings.classpath.T)Unit">value</a> = sys.<a href="../../../collection/MapLike.scala.html#87535" title="(key: String)String">props</a><span class="delimiter">(</span><span title="String(&quot;java.class.path&quot;)" class="string">&quot;java.class.path&quot;</span><span class="delimiter">)</span>

        <a href="#880638" title="scala.tools.nsc.interpreter.ILoop">repl</a> <a href="#632889" title="(settings: scala.tools.nsc.Settings)Boolean">process</a> <a href="#880608" title="scala.tools.nsc.Settings">settings</a>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  /** Creates an interpreter loop with default settings and feeds
   *  the given code to it as input.
   */
  <span class="keyword">def</span> <a title="(code: String, sets: scala.tools.nsc.Settings)String" id="875681">run</a><span class="delimiter">(</span><a title="String" id="880975">code</a>: <span title="String">String</span>, <a title="scala.tools.nsc.Settings" id="880977">sets</a>: <a href="../Settings.scala.html#27643" title="scala.tools.nsc.Settings">Settings</a> = <a href="../Settings.scala.html#539876" title="()scala.tools.nsc.Settings" class="keyword">new</a> <a href="../Settings.scala.html#27643" title="scala.tools.nsc.Settings">Settings</a><span class="delimiter">)</span>: <span title="String">String</span> = <span class="delimiter">{</span>
    <span class="keyword">import</span> java.io.<span class="delimiter">{</span> BufferedReader, StringReader, OutputStreamWriter <span class="delimiter">}</span>

    <a href="../util/package.scala.html#55854" title="(stream: java.io.OutputStream =&gt; Unit)String">stringFromStream</a> <span class="delimiter">{</span> <a title="java.io.OutputStream" id="880986">ostream</a> =&gt;
      <a href="../../../Console.scala.html#136" title="Console.type">Console</a>.<a href="../../../Console.scala.html#63292" title="(out: java.io.OutputStream)(thunk: =&gt; Boolean)Boolean">withOut</a><span class="delimiter">(</span><a href="#880986" title="java.io.OutputStream">ostream</a><span class="delimiter">)</span> <span title="Unit" class="delimiter">{</span>
        <span class="keyword">val</span> <a title="java.io.BufferedReader" id="881010">input</a>    = <span title="(x$1: java.io.Reader)java.io.BufferedReader" class="keyword">new</span> <span title="java.io.BufferedReader">BufferedReader</span><span class="delimiter">(</span><span title="java.io.StringReader" class="keyword">new</span> <span title="java.io.StringReader">StringReader</span><span class="delimiter">(</span><a href="#880975" title="String">code</a><span class="delimiter">)</span><span class="delimiter">)</span>
        <span class="keyword">val</span> <a title="java.io.PrintWriter" id="881011">output</a>   = <span title="(x$1: java.io.Writer, x$2: Boolean)java.io.PrintWriter" class="keyword">new</span> <a href="package.scala.html#55728" title="java.io.PrintWriter">JPrintWriter</a><span class="delimiter">(</span><span title="(x$1: java.io.OutputStream)java.io.OutputStreamWriter" class="keyword">new</span> <span title="java.io.OutputStreamWriter">OutputStreamWriter</span><span class="delimiter">(</span><a href="#880986" title="java.io.OutputStream">ostream</a><span class="delimiter">)</span>, <span title="Boolean(true)" class="keyword">true</span><span class="delimiter">)</span>
        <span class="keyword">val</span> <a title="scala.tools.nsc.interpreter.ILoop" id="881012">repl</a>     = <a href="#632778" title="(in0: java.io.BufferedReader, out: scala.tools.nsc.interpreter.JPrintWriter)scala.tools.nsc.interpreter.ILoop" class="keyword">new</a> <a href="#37218" title="scala.tools.nsc.interpreter.ILoop">ILoop</a><span class="delimiter">(</span><a href="#881010" title="java.io.BufferedReader">input</a>, <a href="#881011" title="java.io.PrintWriter">output</a><span class="delimiter">)</span>

        <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#880977" title="scala.tools.nsc.Settings">sets</a>.<a href="../settings/ScalaSettings.scala.html#539943" title="=&gt; sets.PathSetting">classpath</a>.<a href="../../../reflect/internal/settings/MutableSettings.scala.html#423750" title="=&gt; Boolean">isDefault</a><span class="delimiter">)</span>
          <a href="#880977" title="scala.tools.nsc.Settings">sets</a>.<a href="../settings/ScalaSettings.scala.html#539943" title="=&gt; sets.PathSetting">classpath</a>.<a href="../../../reflect/internal/settings/MutableSettings.scala.html#423753" title="(arg: sets.classpath.T)Unit">value</a> = sys.<a href="../../../collection/MapLike.scala.html#87535" title="(key: String)String">props</a><span class="delimiter">(</span><span title="String(&quot;java.class.path&quot;)" class="string">&quot;java.class.path&quot;</span><span class="delimiter">)</span>

        <a href="#881012" title="scala.tools.nsc.interpreter.ILoop">repl</a> <a href="#632889" title="(settings: scala.tools.nsc.Settings)Boolean">process</a> <a href="#880977" title="scala.tools.nsc.Settings">sets</a>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>
  <span class="keyword">def</span> <a title="(lines: List[String])String" id="875682">run</a><span class="delimiter">(</span><a title="List[String]" id="881049">lines</a>: <a href="../../../collection/immutable/List.scala.html#11952" title="List[String]">List</a><span class="delimiter">[</span>String<span class="delimiter">]</span><span class="delimiter">)</span>: <span title="String">String</span> = <a href="#875681" title="(code: String, sets: scala.tools.nsc.Settings)String">run</a><span class="delimiter">(</span><a href="#881049" title="List[String]">lines</a> <a href="../../../collection/TraversableLike.scala.html#58063" title="(f: String =&gt; String)(implicit bf: scala.collection.generic.CanBuildFrom[List[String],String,List[String]])List[String]">map</a> <span class="delimiter">(</span><a href="#881072" title="String">_</a> <span title="(x$1: Any)String">+</span> <span title="String(&quot;\n&quot;)" class="string">&quot;\n&quot;</span><span class="delimiter">)</span> <a href="../../../collection/TraversableOnce.scala.html#58284" title="=&gt; String">mkString</a><span class="delimiter">)</span>
<span class="delimiter">}</span>

        </pre>
    </body>
</html>