<?xml version="1.0" encoding="utf-8"?>
      <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <meta http-equiv="Expires" content="0" />
        <title>scala/tools/nsc/interpreter/ExprTyper.scala</title>
        <script type="text/javascript" src="../../../../jquery-all.js"></script>
        <script type="text/javascript" src="../../../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../../../style.css" title="Style"></link>
    </head>
    <body>
        <pre>
/* NSC -- new Scala compiler
 * Copyright 2005-2013 LAMP/EPFL
 * @author  Paul Phillips
 */

<span class="keyword">package</span> scala.tools.nsc
<span class="keyword">package</span> interpreter

<span class="keyword">import</span> scala.reflect.internal.util.BatchSourceFile
<span class="keyword">import</span> scala.tools.nsc.ast.parser.<a href="../ast/parser/Tokens.scala.html#28987" title="scala.tools.nsc.ast.parser.Tokens.type">Tokens</a>.EOF

<span class="keyword">trait</span> <a title="trait ExprTyper extends Object" id="37254">ExprTyper</a> <a href="../../../Unit.scala.html#1515" title="Unit" class="delimiter">{</a>
  <span class="keyword">val</span> <a title="=&gt; scala.tools.nsc.interpreter.IMain" id="874391">repl</a>: <a href="IMain.scala.html#38871" title="scala.tools.nsc.interpreter.IMain">IMain</a>

  <span class="keyword">import</span> <a href="#874391" title="=&gt; scala.tools.nsc.interpreter.IMain">repl</a>._
  <span class="keyword">import</span> <a href="IMain.scala.html#632489" title="=&gt; scala.tools.nsc.Global">global</a>.<span class="delimiter">{</span> reporter =&gt; _, Import =&gt; _, _ <span class="delimiter">}</span>
  <span class="keyword">import</span> <a href="../../../reflect/internal/Definitions.scala.html#407777" title="ExprTyper.this.repl.global.definitions.type">definitions</a>._
  <span class="keyword">import</span> <a href="../Global.scala.html#537548" title="ExprTyper.this.repl.global.syntaxAnalyzer.type">syntaxAnalyzer</a>.<span class="delimiter">{</span> UnitParser, UnitScanner, token2name <span class="delimiter">}</span>
  <span class="keyword">import</span> <a href="IMain.scala.html#632498" title="ExprTyper.this.repl.naming.type">naming</a>.freshInternalVarName

  <span class="keyword">object</span> <a title="ExprTyper.this.codeParser.type" id="874397">codeParser</a> <a href="#874398" title="ExprTyper.this.codeParser.type" class="keyword">extends</a> <span class="delimiter">{</span> <span class="keyword">val</span> <a title="ExprTyper.this.repl.global.type" id="874454">global</a>: repl.global.<span class="keyword">type</span> = <a href="#874391" title="=&gt; scala.tools.nsc.interpreter.IMain">repl</a>.<a href="IMain.scala.html#632489" title="=&gt; scala.tools.nsc.Global">global</a> <span class="delimiter">}</span> <span class="keyword">with</span> <a href="CodeHandlers.scala.html#38772" title="scala.tools.nsc.interpreter.CodeHandlers[ExprTyper.this.repl.global.Tree]">CodeHandlers</a><span class="delimiter">[</span>Tree<span class="delimiter">]</span> <span class="delimiter">{</span>
    <span class="keyword">def</span> <a title="[T](code: String, rule: ExprTyper.this.repl.global.syntaxAnalyzer.UnitParser =&gt; T)T" id="874444">applyRule</a><span class="delimiter">[</span><a title="" id="874446">T</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="String" id="874455">code</a>: <span title="String">String</span>, <a title="ExprTyper.this.repl.global.syntaxAnalyzer.UnitParser =&gt; T" id="874456">rule</a>: UnitParser =&gt; T<span class="delimiter">)</span>: <a href="#874446" title="T">T</a> = <span class="delimiter">{</span>
      <a href="IMain.scala.html#632478" title="=&gt; scala.tools.nsc.interpreter.ReplReporter">reporter</a>.<a href="../reporters/AbstractReporter.scala.html#601218" title="()Unit">reset</a><span class="delimiter">(</span><span class="delimiter">)</span>
      <span class="keyword">val</span> <a title="ExprTyper.this.repl.global.syntaxAnalyzer.UnitParser" id="874460">scanner</a> = <a href="../Global.scala.html#537746" title="(code: String)ExprTyper.this.repl.global.syntaxAnalyzer.UnitParser">newUnitParser</a><span class="delimiter">(</span><a href="#874455" title="String">code</a><span class="delimiter">)</span>
      <span class="keyword">val</span> <a title="T" id="874461">result</a>  = <a href="../../../Function1.scala.html#58642" title="(v1: ExprTyper.this.repl.global.syntaxAnalyzer.UnitParser)T">rule</a><span class="delimiter">(</span><a href="#874460" title="ExprTyper.this.repl.global.syntaxAnalyzer.UnitParser">scanner</a><span class="delimiter">)</span>

      <span title="AnyVal" class="keyword">if</span> <span class="delimiter">(</span><a href="../../../Boolean.scala.html#57822" title="=&gt; Boolean">!</a><a href="IMain.scala.html#632478" title="=&gt; scala.tools.nsc.interpreter.ReplReporter">reporter</a>.<a href="../reporters/Reporter.scala.html#539679" title="=&gt; Boolean">hasErrors</a><span class="delimiter">)</span>
        <a href="#874460" title="ExprTyper.this.repl.global.syntaxAnalyzer.UnitParser">scanner</a>.<a href="../ast/parser/Parsers.scala.html#627588" title="(token: Int)Int">accept</a><span class="delimiter">(</span><span title="Int(0)">EOF</span><span class="delimiter">)</span>

      <a href="#874461" title="T">result</a>
    <span class="delimiter">}</span>

    <span class="keyword">def</span> <a title="(code: String)List[ExprTyper.this.repl.global.DefTree]" id="874447">defns</a><span class="delimiter">(</span><a title="String" id="874475">code</a>: <span title="String">String</span><span class="delimiter">)</span> = <a href="#874449" title="(code: String)List[ExprTyper.this.repl.global.syntaxAnalyzer.global.Tree]">stmts</a><span class="delimiter">(</span><a href="#874475" title="String">code</a><span class="delimiter">)</span> <a href="../../../collection/TraversableLike.scala.html#58075" title="(pf: PartialFunction[ExprTyper.this.repl.global.syntaxAnalyzer.global.Tree,ExprTyper.this.repl.global.DefTree])(implicit bf: scala.collection.generic.CanBuildFrom[List[ExprTyper.this.repl.global.syntaxAnalyzer.global.Tree],ExprTyper.this.repl.global.DefTree,List[ExprTyper.this.repl.global.DefTree]])List[ExprTyper.this.repl.global.DefTree]">collect</a> <a title="anonymous class $anonfun extends scala.runtime.AbstractPartialFunction[ExprTyper.this.repl.global.syntaxAnalyzer.global.Tree,ExprTyper.this.repl.global.DefTree] with Serializable" id="874510" class="delimiter">{</a> <span class="keyword">case</span> <a href="#3332424" title="B1" id="3332440">x</a>: DefTree =&gt; <a href="#3332430" title="(x: B1)B1">x</a> <span class="delimiter">}</span>
    <span class="keyword">def</span> <a title="(code: String)ExprTyper.this.repl.global.syntaxAnalyzer.global.Tree" id="874448">expr</a><span class="delimiter">(</span><a title="String" id="874572">code</a>: <span title="String">String</span><span class="delimiter">)</span>  = <a href="#874444" title="(code: String, rule: ExprTyper.this.repl.global.syntaxAnalyzer.UnitParser =&gt; ExprTyper.this.repl.global.syntaxAnalyzer.global.Tree)ExprTyper.this.repl.global.syntaxAnalyzer.global.Tree">applyRule</a><span class="delimiter">(</span><a href="#874572" title="String">code</a>, <a href="#874579" title="ExprTyper.this.repl.global.syntaxAnalyzer.UnitParser">_</a>.<a href="../ast/parser/Parsers.scala.html#627679" title="()ExprTyper.this.repl.global.syntaxAnalyzer.global.Tree">expr</a><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span>
    <span class="keyword">def</span> <a title="(code: String)List[ExprTyper.this.repl.global.syntaxAnalyzer.global.Tree]" id="874449">stmts</a><span class="delimiter">(</span><a title="String" id="874478">code</a>: <span title="String">String</span><span class="delimiter">)</span> = <a href="#874444" title="(code: String, rule: ExprTyper.this.repl.global.syntaxAnalyzer.UnitParser =&gt; List[ExprTyper.this.repl.global.syntaxAnalyzer.global.Tree])List[ExprTyper.this.repl.global.syntaxAnalyzer.global.Tree]">applyRule</a><span class="delimiter">(</span><a href="#874478" title="String">code</a>, <a href="#874485" title="ExprTyper.this.repl.global.syntaxAnalyzer.UnitParser">_</a>.<a href="../ast/parser/Parsers.scala.html#627766" title="()List[ExprTyper.this.repl.global.syntaxAnalyzer.global.Tree]">templateStats</a><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span>
    <span class="keyword">def</span> <a title="(code: String)ExprTyper.this.repl.global.syntaxAnalyzer.global.Tree" id="874450">stmt</a><span class="delimiter">(</span><a title="String" id="874584">code</a>: <span title="String">String</span><span class="delimiter">)</span>  = <a href="#874449" title="(code: String)List[ExprTyper.this.repl.global.syntaxAnalyzer.global.Tree]">stmts</a><span class="delimiter">(</span><a href="#874584" title="String">code</a><span class="delimiter">)</span>.<a href="../../../collection/LinearSeqOptimized.scala.html#86394" title="=&gt; ExprTyper.this.repl.global.syntaxAnalyzer.global.Tree">last</a>  // guaranteed nonempty
  <span class="delimiter">}</span>

  /** Parse a line into a sequence of trees. Returns None if the input is incomplete. */
  <span class="keyword">def</span> <a title="(line: String)Option[List[ExprTyper.this.repl.global.Tree]]" id="874399">parse</a><span class="delimiter">(</span><a title="String" id="874588">line</a>: <span title="String">String</span><span class="delimiter">)</span>: <a href="../../../Option.scala.html#978" title="Option[List[ExprTyper.this.repl.global.Tree]]">Option</a><span class="delimiter">[</span>List<span class="delimiter">[</span>Tree<span class="delimiter">]</span><span class="delimiter">]</span> = <a href="IMain.scala.html#632649" title="(msg: String)(res: Option[List[ExprTyper.this.repl.global.Tree]])Option[List[ExprTyper.this.repl.global.Tree]]">debugging</a><span class="delimiter">(</span><a href="../../../StringContext.scala.html#56629" title="(args: Any*)String">s</a>&quot;&quot;&quot;parse(&quot;$<a href="#874588" title="String">line</a><span class="string">&quot;)&quot;&quot;&quot;</span><span class="delimiter">)</span>  <span class="delimiter">{</span>
    <span class="keyword">var</span> <a title="Boolean" id="874647">isIncomplete</a> = <span title="Boolean(false)" class="keyword">false</span>
    <a href="IMain.scala.html#632478" title="=&gt; scala.tools.nsc.interpreter.ReplReporter">reporter</a>.<a href="../reporters/Reporter.scala.html#539673" title="(handler: (scala.reflect.internal.util.Position, String) =&gt; Unit)(thunk: =&gt; Option[List[ExprTyper.this.repl.global.Tree]])Option[List[ExprTyper.this.repl.global.Tree]]">withIncompleteHandler</a><span class="delimiter">(</span><span class="delimiter">(</span><a title="scala.reflect.internal.util.Position" id="874657">_</a>, <a title="String" id="874658">_</a><span class="delimiter">)</span> =&gt; <a href="#874647" title="Boolean">isIncomplete</a> = <span title="Boolean(true)" class="keyword">true</span><span class="delimiter">)</span> <span class="delimiter">{</span>
      <span class="keyword">val</span> <a title="List[ExprTyper.this.repl.global.syntaxAnalyzer.global.Tree]" id="874660">trees</a> = <a href="#874397" title="ExprTyper.this.codeParser.type">codeParser</a>.<a href="#874449" title="(code: String)List[ExprTyper.this.repl.global.syntaxAnalyzer.global.Tree]">stmts</a><span class="delimiter">(</span><a href="#874588" title="String">line</a><span class="delimiter">)</span>
      <span title="Option[List[ExprTyper.this.repl.global.Tree]]" class="keyword">if</span> <span class="delimiter">(</span><a href="IMain.scala.html#632478" title="=&gt; scala.tools.nsc.interpreter.ReplReporter">reporter</a>.<a href="../reporters/Reporter.scala.html#539679" title="=&gt; Boolean">hasErrors</a><span class="delimiter">)</span> <a href="../../../Option.scala.html#63128" title="(x: scala.collection.immutable.Nil.type)Some[scala.collection.immutable.Nil.type]">Some</a><span class="delimiter">(</span><a href="../../../collection/immutable/List.scala.html#11188" title="scala.collection.immutable.Nil.type">Nil</a><span class="delimiter">)</span>
      <span class="keyword">else</span> <span title="Option[List[ExprTyper.this.repl.global.Tree]]" class="keyword">if</span> <span class="delimiter">(</span><a href="#874647" title="Boolean">isIncomplete</a><span class="delimiter">)</span> <a href="../../../Option.scala.html#1585" title="None.type">None</a>
      <span class="keyword">else</span> <a href="../../../Option.scala.html#63128" title="(x: List[ExprTyper.this.repl.global.syntaxAnalyzer.global.Tree])Some[List[ExprTyper.this.repl.global.syntaxAnalyzer.global.Tree]]">Some</a><span class="delimiter">(</span><a href="#874660" title="List[ExprTyper.this.repl.global.syntaxAnalyzer.global.Tree]">trees</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>
  // def parsesAsExpr(line: String) = {
  //   import codeParser._
  //   (opt expr line).isDefined
  // }

  <span class="keyword">def</span> <a title="(code: String)ExprTyper.this.repl.global.Symbol" id="874400">symbolOfLine</a><span class="delimiter">(</span><a title="String" id="874675">code</a>: <span title="String">String</span><span class="delimiter">)</span>: <a href="../../../reflect/internal/Symbols.scala.html#407146" title="ExprTyper.this.repl.global.Symbol">Symbol</a> = <span class="delimiter">{</span>
    <span class="keyword">def</span> <a title="()ExprTyper.this.repl.global.Symbol" id="874676">asExpr</a><span class="delimiter">(</span><span class="delimiter">)</span>: <a href="../../../reflect/internal/Symbols.scala.html#407146" title="ExprTyper.this.repl.global.Symbol">Symbol</a> = <span class="delimiter">{</span>
      <span class="keyword">val</span> <a title="String" id="874678">name</a>  = <a href="Naming.scala.html#874428" title="()String">freshInternalVarName</a><span class="delimiter">(</span><span class="delimiter">)</span>
      // Typing it with a lazy val would give us the right type, but runs
      // into compiler bugs with things like existentials, so we compile it
      // behind a def and strip the NullaryMethodType which wraps the expr.
      <span class="keyword">val</span> <a title="String" id="874679">line</a> = <span title="String(&quot;def &quot;)" class="string">&quot;def &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#874678" title="String">name</a> <span title="(x$1: Any)String">+</span> <span title="String(&quot; = {\n&quot;)" class="string">&quot; = {\n&quot;</span> <span title="(x$1: Any)String">+</span> <a href="#874675" title="String">code</a> <span title="(x$1: Any)String">+</span> <span title="String(&quot;\n}&quot;)" class="string">&quot;\n}&quot;</span>

      <a href="IMain.scala.html#632555" title="(line: String)scala.tools.nsc.interpreter.IR.Result">interpretSynthetic</a><span title="ExprTyper.this.repl.global.Symbol" class="delimiter">(</span><a href="#874679" title="String">line</a><span class="delimiter">)</span> <span class="keyword">match</span> <span class="delimiter">{</span>
        <span class="keyword">case</span> <a href="package.scala.html#55731" title="=&gt; scala.tools.nsc.interpreter.Results.type">IR</a>.<a href="Results.scala.html#874713" title="ExprTyper.this.repl.global.Symbol" id="3332448">Success</a> =&gt;
          <span class="keyword">val</span> <a title="ExprTyper.this.repl.global.Symbol" id="874722">sym0</a> = <a href="IMain.scala.html#632593" title="(id: String)ExprTyper.this.repl.global.Symbol">symbolOfTerm</a><span class="delimiter">(</span><a href="#874678" title="String">name</a><span class="delimiter">)</span>
          // drop NullaryMethodType
          <span class="keyword">val</span> <a title="sym0.TypeOfClonedSymbol" id="874723">sym</a> = <a href="#874722" title="ExprTyper.this.repl.global.Symbol">sym0</a>.<a href="../../../reflect/internal/Symbols.scala.html#411417" title="=&gt; sym0.TypeOfClonedSymbol">cloneSymbol</a> <a href="../../../reflect/internal/Symbols.scala.html#411369" title="(info: ExprTyper.this.repl.global.Type)sym0.TypeOfClonedSymbol">setInfo</a> <a href="../Global.scala.html#537702" title="(op: =&gt; ExprTyper.this.repl.global.Type)ExprTyper.this.repl.global.Type">afterTyper</a><span class="delimiter">(</span><a href="#874722" title="ExprTyper.this.repl.global.Symbol">sym0</a>.<a href="../../../reflect/internal/Symbols.scala.html#411367" title="=&gt; ExprTyper.this.repl.global.Type">info</a>.<a href="../../../reflect/internal/Types.scala.html#408427" title="=&gt; ExprTyper.this.repl.global.Type">finalResultType</a><span class="delimiter">)</span>
          <span title="ExprTyper.this.repl.global.Symbol" class="keyword">if</span> <span class="delimiter">(</span><a href="#874723" title="sym0.TypeOfClonedSymbol">sym</a>.<a href="../../../reflect/internal/Symbols.scala.html#411367" title="=&gt; ExprTyper.this.repl.global.Type">info</a>.<a href="../../../reflect/internal/Types.scala.html#408407" title="=&gt; ExprTyper.this.repl.global.Symbol">typeSymbol</a> <span title="(x$1: AnyRef)Boolean">eq</span> <a href="../../../reflect/internal/Definitions.scala.html#409353" title="=&gt; ExprTyper.this.repl.global.ClassSymbol">UnitClass</a><span class="delimiter">)</span> <a href="../../../reflect/internal/Symbols.scala.html#407184" title="=&gt; ExprTyper.this.repl.global.NoSymbol">NoSymbol</a>
          <span class="keyword">else</span> <a href="#874723" title="sym0.TypeOfClonedSymbol">sym</a>
        <span class="keyword">case</span> _          =&gt; <a href="#3332450" title="(x: ExprTyper.this.repl.global.Symbol)ExprTyper.this.repl.global.Symbol">NoSymbol</a>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>
    <span class="keyword">def</span> <a title="()ExprTyper.this.repl.global.Symbol" id="874677">asDefn</a><span class="delimiter">(</span><span class="delimiter">)</span>: <a href="../../../reflect/internal/Symbols.scala.html#407146" title="ExprTyper.this.repl.global.Symbol">Symbol</a> = <span class="delimiter">{</span>
      <span class="keyword">val</span> <a title="scala.collection.immutable.Set[ExprTyper.this.repl.memberHandlers.intp.global.Symbol]" id="874763">old</a> = <a href="#874391" title="=&gt; scala.tools.nsc.interpreter.IMain">repl</a>.<a href="IMain.scala.html#632607" title="=&gt; List[ExprTyper.this.repl.memberHandlers.intp.global.Symbol]">definedSymbolList</a>.<a href="../../../collection/TraversableOnce.scala.html#58270" title="scala.collection.immutable.Set[ExprTyper.this.repl.memberHandlers.intp.global.Symbol]">toSet</a>

      <a href="IMain.scala.html#632555" title="(line: String)scala.tools.nsc.interpreter.IR.Result">interpretSynthetic</a><span title="ExprTyper.this.repl.global.Symbol" class="delimiter">(</span><a href="#874675" title="String">code</a><span class="delimiter">)</span> <span class="keyword">match</span> <span class="delimiter">{</span>
        <span class="keyword">case</span> <a href="package.scala.html#55731" title="=&gt; scala.tools.nsc.interpreter.Results.type">IR</a>.<a href="Results.scala.html#874713" title="ExprTyper.this.repl.global.Symbol" id="3332480">Success</a> =&gt;
          <a href="#874391" title="=&gt; scala.tools.nsc.interpreter.IMain">repl</a>.<a href="IMain.scala.html#632607" title="=&gt; List[ExprTyper.this.repl.memberHandlers.intp.global.Symbol]">definedSymbolList</a> <a href="#3332482" title="(x: ExprTyper.this.repl.global.Symbol)ExprTyper.this.repl.global.Symbol">filterNot</a> <a href="#874763" title="scala.collection.immutable.Set[ExprTyper.this.repl.memberHandlers.intp.global.Symbol]">old</a> <span class="keyword">match</span> <span class="delimiter">{</span>
            <span class="keyword">case</span> <a href="../../../collection/immutable/List.scala.html#11188" title="ExprTyper.this.repl.global.Symbol" id="3332463">Nil</a>        =&gt; <a href="#3332466" title="(x: ExprTyper.this.repl.global.Symbol)ExprTyper.this.repl.global.Symbol">NoSymbol</a>
            <span class="keyword">case</span> <a href="../../../collection/immutable/List.scala.html#206583" title="ExprTyper.this.repl.memberHandlers.intp.global.Symbol" id="875201">sym</a> <a href="#3332458" title="ExprTyper.this.repl.global.Symbol" id="3332461">::</a> <a href="../../../collection/immutable/List.scala.html#206584" title="List[ExprTyper.this.repl.memberHandlers.intp.global.Symbol]" id="3332464">Nil</a> =&gt; <a href="#3332466" title="(x: ExprTyper.this.repl.global.Symbol)ExprTyper.this.repl.global.Symbol">sym</a>
            <span class="keyword">case</span> syms       =&gt; <a href="../../../reflect/internal/Symbols.scala.html#407184" title="=&gt; ExprTyper.this.repl.global.NoSymbol">NoSymbol</a>.<a href="../../../reflect/internal/Symbols.scala.html#411129" title="(pre: ExprTyper.this.repl.global.Type, alternatives: List[ExprTyper.this.repl.global.Symbol])ExprTyper.this.repl.global.TermSymbol">newOverloaded</a><a href="#3332466" title="(x: ExprTyper.this.repl.global.Symbol)ExprTyper.this.repl.global.Symbol" class="delimiter">(</a><a href="../../../reflect/internal/Types.scala.html#407286" title="ExprTyper.this.repl.global.NoPrefix.type">NoPrefix</a>, syms<span class="delimiter">)</span>
          <span class="delimiter">}</span>
        <span class="keyword">case</span> _ =&gt; <a href="#3332482" title="(x: ExprTyper.this.repl.global.Symbol)ExprTyper.this.repl.global.Symbol">NoSymbol</a>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>
    <a href="IMain.scala.html#632506" title="(body: =&gt; ExprTyper.this.repl.global.Symbol)ExprTyper.this.repl.global.Symbol">beQuietDuring</a><span class="delimiter">(</span><a href="#874676" title="()ExprTyper.this.repl.global.Symbol">asExpr</a><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span> <a href="../../../reflect/internal/Symbols.scala.html#411489" title="(alt: =&gt; ExprTyper.this.repl.global.Symbol)ExprTyper.this.repl.global.Symbol">orElse</a> <a href="IMain.scala.html#632506" title="(body: =&gt; ExprTyper.this.repl.global.Symbol)ExprTyper.this.repl.global.Symbol">beQuietDuring</a><span class="delimiter">(</span><a href="#874677" title="()ExprTyper.this.repl.global.Symbol">asDefn</a><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">private</span> <span class="keyword">var</span> <a title="Int" id="874402">typeOfExpressionDepth</a> = <span title="Int(0)" class="int">0</span>
  <span class="keyword">def</span> <a title="(expr: String, silent: Boolean)ExprTyper.this.repl.global.Type" id="874404">typeOfExpression</a><span class="delimiter">(</span><a title="String" id="875218">expr</a>: <span title="String">String</span>, <a title="Boolean" id="875220">silent</a>: <a href="../../../Boolean.scala.html#1425" title="Boolean">Boolean</a> = <span title="Boolean(true)" class="keyword">true</span><span class="delimiter">)</span>: <a href="../../../reflect/internal/Types.scala.html#407270" title="ExprTyper.this.repl.global.Type">Type</a> = <span class="delimiter">{</span>
    <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#874402" title="=&gt; Int">typeOfExpressionDepth</a> <a href="../../../Int.scala.html#57125" title="(x: Int)Boolean">&gt;</a> <span title="Int(2)" class="int">2</span><span class="delimiter">)</span> <span class="delimiter">{</span>
      <a href="ReplConfig.scala.html#55704" title="(msg: =&gt; String)Unit">repldbg</a><span class="delimiter">(</span><span title="String(&quot;Terminating typeOfExpression recursion for expression: &quot;)" class="string">&quot;Terminating typeOfExpression recursion for expression: &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#875218" title="String">expr</a><span class="delimiter">)</span>
      <span title="Nothing" class="keyword">return</span> <a href="../../../reflect/internal/Types.scala.html#407284" title="ExprTyper.this.repl.global.NoType.type">NoType</a>
    <span class="delimiter">}</span>
    <a href="#874402" title="(x$1: Int)Unit">typeOfExpressionDepth</a> <a href="../../../Int.scala.html#57154" title="(x: Int)Int">+=</a> <span title="Int(1)" class="int">1</span>
    // Don't presently have a good way to suppress undesirable success output
    // while letting errors through, so it is first trying it silently: if there
    // is an error, and errors are desired, then it re-evaluates non-silently
    // to induce the error message.
    <span class="keyword">try</span> <a href="IMain.scala.html#632509" title="(operation: =&gt; ExprTyper.this.repl.global.Type)ExprTyper.this.repl.global.Type">beSilentDuring</a><span title="ExprTyper.this.repl.global.Type" class="delimiter">(</span><a href="#874400" title="(code: String)ExprTyper.this.repl.global.Symbol">symbolOfLine</a><span class="delimiter">(</span><a href="#875218" title="String">expr</a><span class="delimiter">)</span>.<a href="../../../reflect/internal/Symbols.scala.html#411365" title="=&gt; ExprTyper.this.repl.global.Type">tpe</a><span class="delimiter">)</span> <span class="keyword">match</span> <span class="delimiter">{</span>
      <span class="keyword">case</span> <a href="../../../reflect/internal/Types.scala.html#407284" title="ExprTyper.this.repl.global.Type" id="3332492">NoType</a> <span class="keyword">if</span> <a href="../../../Boolean.scala.html#57822" title="=&gt; Boolean">!</a><a href="#875220" title="Boolean">silent</a> =&gt; <a href="#874400" title="(code: String)ExprTyper.this.repl.global.Symbol">symbolOfLine</a><span class="delimiter">(</span><a href="#875218" title="String">expr</a><span class="delimiter">)</span>.<a href="#3332494" title="(x: ExprTyper.this.repl.global.Type)ExprTyper.this.repl.global.Type">tpe</a> // generate error
      <span class="keyword">case</span> tpe               =&gt; <a href="#3332494" title="(x: ExprTyper.this.repl.global.Type)ExprTyper.this.repl.global.Type">tpe</a>
    <span class="delimiter">}</span>
    <span class="keyword">finally</span> <a href="#874402" title="(x$1: Int)Unit">typeOfExpressionDepth</a> <a href="../../../Int.scala.html#57161" title="(x: Int)Int">-=</a> <span title="Int(1)" class="int">1</span>
  <span class="delimiter">}</span>
<span class="delimiter">}</span>

        </pre>
    </body>
</html>