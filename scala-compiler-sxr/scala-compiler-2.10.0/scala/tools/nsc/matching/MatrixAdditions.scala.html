<?xml version="1.0" encoding="utf-8"?>
      <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <meta http-equiv="Expires" content="0" />
        <title>scala/tools/nsc/matching/MatrixAdditions.scala</title>
        <script type="text/javascript" src="../../../../jquery-all.js"></script>
        <script type="text/javascript" src="../../../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../../../style.css" title="Style"></link>
    </head>
    <body>
        <pre>
/* NSC -- new Scala compiler
 * Copyright 2005-2013 LAMP/EPFL
 * Author: Paul Phillips
 */

<span class="keyword">package</span> scala.tools.nsc
<span class="keyword">package</span> matching

<span class="keyword">import</span> transform.ExplicitOuter
<span class="keyword">import</span> <a href="../../../PartialFunction.scala.html#130" title="PartialFunction.type">PartialFunction</a>._

/** Traits which are mixed into MatchMatrix, but separated out as
 *  (somewhat) independent components to keep them on the sidelines.
 */
<span class="keyword">trait</span> <a title="trait MatrixAdditions extends Object with scala.tools.nsc.ast.TreeDSL" id="40947">MatrixAdditions</a> <a href="../../../Unit.scala.html#1515" title="Unit" class="keyword">extends</a> ast.<a href="../ast/TreeDSL.scala.html#28843" title="scala.tools.nsc.ast.TreeDSL">TreeDSL</a> <span class="delimiter">{</span>
  self: ExplicitOuter <span class="keyword">with</span> ParallelMatching =&gt;

  <span class="keyword">import</span> <a href="../transform/TypingTransformers.scala.html#621439" title="=&gt; scala.tools.nsc.Global">global</a>.<span class="delimiter">{</span> typer =&gt; _, _ <span class="delimiter">}</span>
  <span class="keyword">import</span> symtab.Flags
  <span class="keyword">import</span> <a href="../ast/TreeDSL.scala.html#538235" title="MatrixAdditions.this.CODE.type">CODE</a>._
  <span class="keyword">import</span> <a href="MatchSupport.scala.html#621954" title="MatrixAdditions.this.Debug.type">Debug</a>._
  <span class="keyword">import</span> <a href="../ast/Trees.scala.html#537807" title="MatrixAdditions.this.global.treeInfo.type">treeInfo</a>._
  <span class="keyword">import</span> <a href="../../../reflect/internal/Definitions.scala.html#407777" title="MatrixAdditions.this.global.definitions.type">definitions</a>.<span class="delimiter">{</span> isPrimitiveValueClass <span class="delimiter">}</span>

  /** The Squeezer, responsible for all the squeezing.
   */
  <span class="keyword">private</span><span class="delimiter">[</span>matching<span class="delimiter">]</span> <span class="keyword">trait</span> <a title="trait Squeezer extends Object" id="621970">Squeezer</a> <a href="../../../Unit.scala.html#1515" title="Unit" class="delimiter">{</a>
    self: MatrixContext =&gt;

    <span class="keyword">private</span> <span class="keyword">val</span> <a title="Boolean" id="929647">settings_squeeze</a> = <a href="../../../Boolean.scala.html#57822" title="=&gt; Boolean">!</a><a href="../Global.scala.html#537448" title="=&gt; scala.tools.nsc.Settings">settings</a>.<a href="../settings/ScalaSettings.scala.html#540101" title="=&gt; scala.tools.nsc.Settings#BooleanSetting">Ynosqueeze</a>.<a href="../settings/MutableSettings.scala.html#541066" title="=&gt; Boolean">value</a>

    <span class="keyword">class</span> <a title="class RefTraverser extends MatrixAdditions.this.global.Traverser" id="929649">RefTraverser</a><a href="#929649" title="Squeezer.this.RefTraverser" class="delimiter">(</a><a title="MatrixAdditions.this.global.ValDef" id="931579">vd</a>: <a href="../../../reflect/internal/Trees.scala.html#407960" title="MatrixAdditions.this.global.ValDef">ValDef</a><span class="delimiter">)</span> <span class="keyword">extends</span> <a href="../../../reflect/api/Trees.scala.html#56467" title="MatrixAdditions.this.global.Traverser">Traverser</a> <span class="delimiter">{</span>
      <span class="keyword">private</span> <span class="keyword">val</span> <a title="MatrixAdditions.this.global.Symbol" id="931564">targetSymbol</a> = <a href="#931579" title="MatrixAdditions.this.global.ValDef">vd</a>.<a href="../../../reflect/internal/Trees.scala.html#409939" title="=&gt; MatrixAdditions.this.global.Symbol">symbol</a>
      <span class="keyword">private</span> <span class="keyword">var</span> <a title="Int" id="931567">safeRefs</a>     = <span title="Int(0)" class="int">0</span>
      <span class="keyword">private</span> <span class="keyword">var</span> <a title="Boolean" id="931570">isSafe</a>       = <span title="Boolean(true)" class="keyword">true</span>

      <span class="keyword">def</span> <a title="=&gt; Boolean" id="931572">canDrop</a>   = <a href="#931570" title="=&gt; Boolean">isSafe</a> <a href="../../../Boolean.scala.html#57826" title="(x: Boolean)Boolean">&amp;&amp;</a> <a href="#931567" title="=&gt; Int">safeRefs</a> <a href="../../../Int.scala.html#57097" title="(x: Int)Boolean">==</a> <span title="Int(0)" class="int">0</span>
      <span class="keyword">def</span> <a title="=&gt; Boolean" id="931573">canInline</a> = <a href="#931570" title="=&gt; Boolean">isSafe</a> <a href="../../../Boolean.scala.html#57826" title="(x: Boolean)Boolean">&amp;&amp;</a> <a href="#931567" title="=&gt; Int">safeRefs</a> <a href="../../../Int.scala.html#57097" title="(x: Int)Boolean">==</a> <span title="Int(1)" class="int">1</span>

      <span class="keyword">override</span> <span class="keyword">def</span> <a title="(tree: MatrixAdditions.this.global.Tree)Unit" id="931574">traverse</a><span class="delimiter">(</span><a title="MatrixAdditions.this.global.Tree" id="931590">tree</a>: <a href="../../../reflect/internal/Trees.scala.html#407938" title="MatrixAdditions.this.global.Tree">Tree</a><span class="delimiter">)</span>: <a href="../../../Unit.scala.html#1515" title="Unit">Unit</a> = <a href="#931590" title="MatrixAdditions.this.global.Tree">tree</a> <span class="keyword">match</span> <span class="delimiter">{</span>
        <span class="keyword">case</span> <a href="#3336556" title="Unit" id="3336561">t</a>: Ident <span class="keyword">if</span> t.<a href="../../../reflect/internal/Trees.scala.html#409939" title="=&gt; MatrixAdditions.this.global.Symbol">symbol</a> <span title="(x$1: AnyRef)Boolean">eq</span> <a href="#931564" title="=&gt; MatrixAdditions.this.global.Symbol">targetSymbol</a> =&gt;
          // target symbol's owner should match currentOwner
          <a href="#3336563" title="(x: Unit)Unit" class="keyword">if</a> <span class="delimiter">(</span><a href="#931564" title="=&gt; MatrixAdditions.this.global.Symbol">targetSymbol</a>.<a href="../../../reflect/internal/Symbols.scala.html#411315" title="=&gt; MatrixAdditions.this.global.Symbol">owner</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="../../../reflect/api/Trees.scala.html#405541" title="=&gt; MatrixAdditions.this.global.Symbol">currentOwner</a><span class="delimiter">)</span> <a href="#931567" title="(x$1: Int)Unit">safeRefs</a> <a href="../../../Int.scala.html#57154" title="(x: Int)Int">+=</a> <span title="Int(1)" class="int">1</span>
          <span class="keyword">else</span> <a href="#931570" title="(x$1: Boolean)Unit">isSafe</a> = <span title="Boolean(false)" class="keyword">false</span>

        <span class="keyword">case</span> LabelDef<a href="#3336556" title="Unit" id="3336560" class="delimiter">(</a><a href="../../../reflect/internal/Trees.scala.html#410239" title="MatrixAdditions.this.global.TermName" id="3336558">_</a>, <a href="../../../reflect/internal/Trees.scala.html#410241" title="List[MatrixAdditions.this.global.Ident]" id="931628">params</a>, <a href="../../../reflect/internal/Trees.scala.html#410243" title="MatrixAdditions.this.global.Tree" id="931629">rhs</a><span class="delimiter">)</span> =&gt;
          <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#931628" title="List[MatrixAdditions.this.global.Ident]">params</a> <a href="../../../collection/LinearSeqOptimized.scala.html#86379" title="(p: MatrixAdditions.this.global.Ident =&gt; Boolean)Boolean">exists</a> <span class="delimiter">(</span><a href="#931636" title="MatrixAdditions.this.global.Ident">_</a>.<a href="../../../reflect/internal/Trees.scala.html#409939" title="=&gt; MatrixAdditions.this.global.Symbol">symbol</a> <span title="(x$1: AnyRef)Boolean">eq</span> <a href="#931564" title="=&gt; MatrixAdditions.this.global.Symbol">targetSymbol</a><span class="delimiter">)</span><span class="delimiter">)</span>  // cannot substitute this one
            <a href="#931570" title="(x$1: Boolean)Unit">isSafe</a> = <span title="Boolean(false)" class="keyword">false</span>

          <a href="#931574" title="(tree: MatrixAdditions.this.global.Tree)Unit">traverse</a><span class="delimiter">(</span><a href="#931629" title="MatrixAdditions.this.global.Tree">rhs</a><span class="delimiter">)</span>
        <span class="keyword">case</span> _ <span class="keyword">if</span> <a href="#931567" title="=&gt; Int">safeRefs</a> <a href="../../../Int.scala.html#57125" title="(x: Int)Boolean">&gt;</a> <span title="Int(1)" class="int">1</span> =&gt; <a href="#3336563" title="(x: Unit)Unit" class="delimiter">(</a><span class="delimiter">)</span>
        <span class="keyword">case</span> _ =&gt;
          <a href="#929649" title="Squeezer.this.RefTraverser" class="keyword">super</a>.<a href="../../../reflect/api/Trees.scala.html#405544" title="(tree: MatrixAdditions.this.global.Tree)Unit">traverse</a><a href="#3336563" title="(x: Unit)Unit" class="delimiter">(</a><a href="#931590" title="MatrixAdditions.this.global.Tree">tree</a><span class="delimiter">)</span>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>

    /** Compresses multiple Blocks. */
    <span class="keyword">private</span> <span class="keyword">def</span> <a title="(stats: List[MatrixAdditions.this.global.Tree], expr: MatrixAdditions.this.global.Tree)MatrixAdditions.this.global.Tree" id="929650">combineBlocks</a><span class="delimiter">(</span><a title="List[MatrixAdditions.this.global.Tree]" id="931642">stats</a>: <a href="../../../collection/immutable/List.scala.html#11952" title="List[MatrixAdditions.this.global.Tree]">List</a><span class="delimiter">[</span>Tree<span class="delimiter">]</span>, <a title="MatrixAdditions.this.global.Tree" id="931643">expr</a>: <a href="../../../reflect/internal/Trees.scala.html#407938" title="MatrixAdditions.this.global.Tree">Tree</a><span class="delimiter">)</span>: <a href="../../../reflect/internal/Trees.scala.html#407938" title="MatrixAdditions.this.global.Tree">Tree</a> = <a href="#931643" title="MatrixAdditions.this.global.Tree">expr</a> <span class="keyword">match</span> <span class="delimiter">{</span>
      <span class="keyword">case</span> Block<a href="#3336570" title="MatrixAdditions.this.global.Tree" id="3336572" class="delimiter">(</a><a href="../../../reflect/internal/Trees.scala.html#410192" title="List[MatrixAdditions.this.global.Tree]" id="931650">stats1</a>, <a href="../../../reflect/internal/Trees.scala.html#410194" title="MatrixAdditions.this.global.Tree" id="931651">expr1</a><span class="delimiter">)</span> <span class="keyword">if</span> <a href="#931642" title="List[MatrixAdditions.this.global.Tree]">stats</a>.<a href="../../../collection/SeqLike.scala.html#58787" title="=&gt; Boolean">isEmpty</a> =&gt; <a href="#929650" title="(stats: List[MatrixAdditions.this.global.Tree], expr: MatrixAdditions.this.global.Tree)MatrixAdditions.this.global.Tree">combineBlocks</a><a href="#3336574" title="(x: MatrixAdditions.this.global.Tree)MatrixAdditions.this.global.Tree" class="delimiter">(</a><a href="#931650" title="List[MatrixAdditions.this.global.Tree]">stats1</a>, <a href="#931651" title="MatrixAdditions.this.global.Tree">expr1</a><span class="delimiter">)</span>
      <span class="keyword">case</span> _                                     =&gt; <a href="../../../reflect/internal/Trees.scala.html#453067" title="(stats: List[MatrixAdditions.this.global.Tree], expr: MatrixAdditions.this.global.Tree)MatrixAdditions.this.global.Block">Block</a><a href="#3336574" title="(x: MatrixAdditions.this.global.Tree)MatrixAdditions.this.global.Tree" class="delimiter">(</a><a href="#931642" title="List[MatrixAdditions.this.global.Tree]">stats</a>, <a href="#931643" title="MatrixAdditions.this.global.Tree">expr</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>
    <span class="keyword">def</span> <a title="(vds: List[MatrixAdditions.this.global.Tree], exp: MatrixAdditions.this.global.Tree)MatrixAdditions.this.global.Tree" id="929651">squeezedBlock</a><span class="delimiter">(</span><a title="List[MatrixAdditions.this.global.Tree]" id="931672">vds</a>: <a href="../../../collection/immutable/List.scala.html#11952" title="List[MatrixAdditions.this.global.Tree]">List</a><span class="delimiter">[</span>Tree<span class="delimiter">]</span>, <a title="MatrixAdditions.this.global.Tree" id="931673">exp</a>: <a href="../../../reflect/internal/Trees.scala.html#407938" title="MatrixAdditions.this.global.Tree">Tree</a><span class="delimiter">)</span>: <a href="../../../reflect/internal/Trees.scala.html#407938" title="MatrixAdditions.this.global.Tree">Tree</a> =
      <span title="MatrixAdditions.this.global.Tree" class="keyword">if</span> <span class="delimiter">(</span><a href="#929647" title="=&gt; Boolean">settings_squeeze</a><span class="delimiter">)</span> <a href="#929650" title="(stats: List[MatrixAdditions.this.global.Tree], expr: MatrixAdditions.this.global.Tree)MatrixAdditions.this.global.Tree">combineBlocks</a><span class="delimiter">(</span><a href="../../../collection/immutable/List.scala.html#11188" title="scala.collection.immutable.Nil.type">Nil</a>, <a href="#929652" title="(vds: List[MatrixAdditions.this.global.Tree], exp: MatrixAdditions.this.global.Tree)MatrixAdditions.this.global.Tree">squeezedBlock1</a><span class="delimiter">(</span><a href="#931672" title="List[MatrixAdditions.this.global.Tree]">vds</a>, <a href="#931673" title="MatrixAdditions.this.global.Tree">exp</a><span class="delimiter">)</span><span class="delimiter">)</span>
      <span class="keyword">else</span>                  <a href="#929650" title="(stats: List[MatrixAdditions.this.global.Tree], expr: MatrixAdditions.this.global.Tree)MatrixAdditions.this.global.Tree">combineBlocks</a><span class="delimiter">(</span><a href="#931672" title="List[MatrixAdditions.this.global.Tree]">vds</a>, <a href="#931673" title="MatrixAdditions.this.global.Tree">exp</a><span class="delimiter">)</span>

    <span class="keyword">private</span> <span class="keyword">def</span> <a title="(vds: List[MatrixAdditions.this.global.Tree], exp: MatrixAdditions.this.global.Tree)MatrixAdditions.this.global.Tree" id="929652">squeezedBlock1</a><span class="delimiter">(</span><a title="List[MatrixAdditions.this.global.Tree]" id="931674">vds</a>: <a href="../../../collection/immutable/List.scala.html#11952" title="List[MatrixAdditions.this.global.Tree]">List</a><span class="delimiter">[</span>Tree<span class="delimiter">]</span>, <a title="MatrixAdditions.this.global.Tree" id="931675">exp</a>: <a href="../../../reflect/internal/Trees.scala.html#407938" title="MatrixAdditions.this.global.Tree">Tree</a><span class="delimiter">)</span>: <a href="../../../reflect/internal/Trees.scala.html#407938" title="MatrixAdditions.this.global.Tree">Tree</a> = <span class="delimiter">{</span>
      <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="MatrixAdditions.this.global.Tree" id="931677">squeezedTail</a> = <a href="#929651" title="(vds: List[MatrixAdditions.this.global.Tree], exp: MatrixAdditions.this.global.Tree)MatrixAdditions.this.global.Tree">squeezedBlock</a><span class="delimiter">(</span><a href="#931674" title="List[MatrixAdditions.this.global.Tree]">vds</a>.<a href="../../../collection/TraversableLike.scala.html#58104" title="=&gt; List[MatrixAdditions.this.global.Tree]">tail</a>, <a href="#931675" title="MatrixAdditions.this.global.Tree">exp</a><span class="delimiter">)</span>
      <span class="keyword">def</span> <a title="=&gt; MatrixAdditions.this.global.Block" id="931678">default</a> = <a href="#931676" title="=&gt; MatrixAdditions.this.global.Tree">squeezedTail</a> <span class="keyword">match</span> <span class="delimiter">{</span>
        <span class="keyword">case</span> Block<a href="#3336579" title="MatrixAdditions.this.global.Block" id="3336581" class="delimiter">(</a><a href="../../../reflect/internal/Trees.scala.html#410192" title="List[MatrixAdditions.this.global.Tree]" id="931683">vds2</a>, <a href="../../../reflect/internal/Trees.scala.html#410194" title="MatrixAdditions.this.global.Tree" id="931684">exp2</a><span class="delimiter">)</span> =&gt; <a href="../../../reflect/internal/Trees.scala.html#453067" title="(stats: List[MatrixAdditions.this.global.Tree], expr: MatrixAdditions.this.global.Tree)MatrixAdditions.this.global.Block">Block</a><a href="#3336583" title="(x: MatrixAdditions.this.global.Block)MatrixAdditions.this.global.Block" class="delimiter">(</a><a href="#931674" title="List[MatrixAdditions.this.global.Tree]">vds</a>.<a href="../../../collection/IterableLike.scala.html#58577" title="=&gt; MatrixAdditions.this.global.Tree">head</a> <a href="../../../collection/immutable/List.scala.html#62685" title="(x: MatrixAdditions.this.global.Tree)List[MatrixAdditions.this.global.Tree]">::</a> <a href="#931683" title="List[MatrixAdditions.this.global.Tree]">vds2</a>, <a href="#931684" title="MatrixAdditions.this.global.Tree">exp2</a><span class="delimiter">)</span>
        <span class="keyword">case</span> exp2              =&gt; <a href="../../../reflect/internal/Trees.scala.html#453067" title="(stats: List[MatrixAdditions.this.global.Tree], expr: MatrixAdditions.this.global.Tree)MatrixAdditions.this.global.Block">Block</a><a href="#3336583" title="(x: MatrixAdditions.this.global.Block)MatrixAdditions.this.global.Block" class="delimiter">(</a><a href="#931674" title="List[MatrixAdditions.this.global.Tree]">vds</a>.<a href="../../../collection/IterableLike.scala.html#58577" title="=&gt; MatrixAdditions.this.global.Tree">head</a> <a href="../../../collection/immutable/List.scala.html#62685" title="(x: MatrixAdditions.this.global.Tree)List[MatrixAdditions.this.global.Tree]">::</a> <a href="../../../collection/immutable/List.scala.html#11188" title="scala.collection.immutable.Nil.type">Nil</a>,  exp2<span class="delimiter">)</span>
      <span class="delimiter">}</span>

      <span title="MatrixAdditions.this.global.Tree" class="keyword">if</span> <span class="delimiter">(</span><a href="#931674" title="List[MatrixAdditions.this.global.Tree]">vds</a>.<a href="../../../collection/SeqLike.scala.html#58787" title="=&gt; Boolean">isEmpty</a><span class="delimiter">)</span> <a href="#931675" title="MatrixAdditions.this.global.Tree">exp</a>
      <span class="keyword">else</span> <a href="#931674" title="List[MatrixAdditions.this.global.Tree]">vds</a>.<a href="../../../collection/IterableLike.scala.html#58577" title="=&gt; MatrixAdditions.this.global.Tree">head</a> <span class="keyword">match</span> <span class="delimiter">{</span>
        <span class="keyword">case</span> <a href="#3336588" title="MatrixAdditions.this.global.Tree" id="3336590">vd</a>: ValDef =&gt;
          <span class="keyword">val</span> <a title="Squeezer.this.RefTraverser" id="931731">rt</a> = <span title="Squeezer.this.RefTraverser" class="keyword">new</span> <a href="#929649" title="Squeezer.this.RefTraverser">RefTraverser</a><span class="delimiter">(</span>vd<span class="delimiter">)</span>
          <a href="#931731" title="Squeezer.this.RefTraverser">rt</a>.<a href="../../../reflect/api/Trees.scala.html#405548" title="(owner: MatrixAdditions.this.global.Symbol)(traverse: =&gt; Unit)Unit">atOwner</a><span class="delimiter">(</span><a href="Matrix.scala.html#929664" title="=&gt; MatrixAdditions.this.global.Symbol">owner</a><span class="delimiter">)</span><span class="delimiter">(</span><a href="#931731" title="Squeezer.this.RefTraverser">rt</a> <a href="#931574" title="(tree: MatrixAdditions.this.global.Tree)Unit">traverse</a> <a href="#931676" title="=&gt; MatrixAdditions.this.global.Tree">squeezedTail</a><span class="delimiter">)</span>

          <span title="MatrixAdditions.this.global.Tree" class="keyword">if</span> <span class="delimiter">(</span><a href="#931731" title="Squeezer.this.RefTraverser">rt</a>.<a href="#931572" title="=&gt; Boolean">canDrop</a><span class="delimiter">)</span>
            <a href="#931676" title="=&gt; MatrixAdditions.this.global.Tree">squeezedTail</a>
          <span class="keyword">else</span> <span title="MatrixAdditions.this.global.Tree" class="keyword">if</span> <span class="delimiter">(</span><a href="../../../reflect/internal/Types.scala.html#407553" title="(tp: MatrixAdditions.this.global.Type)Boolean">isConstantType</a><span class="delimiter">(</span>vd.<a href="../../../reflect/internal/Trees.scala.html#409939" title="=&gt; MatrixAdditions.this.global.Symbol">symbol</a>.<a href="../../../reflect/internal/Symbols.scala.html#411365" title="=&gt; MatrixAdditions.this.global.Type">tpe</a><span class="delimiter">)</span> <a href="../../../Boolean.scala.html#57825" title="(x: Boolean)Boolean">||</a> <a href="#931731" title="Squeezer.this.RefTraverser">rt</a>.<a href="#931573" title="=&gt; Boolean">canInline</a><span class="delimiter">)</span>
            <span title="MatrixAdditions.this.global.TreeSubstituter" class="keyword">new</span> <a href="../../../reflect/internal/Trees.scala.html#408138" title="MatrixAdditions.this.global.TreeSubstituter">TreeSubstituter</a><span class="delimiter">(</span><a href="../../../collection/immutable/List.scala.html#62451" title="(xs: MatrixAdditions.this.global.Symbol*)List[MatrixAdditions.this.global.Symbol]">List</a><span class="delimiter">(</span>vd.<a href="../../../reflect/internal/Trees.scala.html#409939" title="=&gt; MatrixAdditions.this.global.Symbol">symbol</a><span class="delimiter">)</span>, <a href="../../../collection/immutable/List.scala.html#62451" title="(xs: MatrixAdditions.this.global.Tree*)List[MatrixAdditions.this.global.Tree]">List</a><span class="delimiter">(</span>vd.<a href="../../../reflect/internal/Trees.scala.html#410304" title="=&gt; MatrixAdditions.this.global.Tree">rhs</a><span class="delimiter">)</span><span class="delimiter">)</span> <a href="../../../reflect/internal/Trees.scala.html#486156" title="(tree: MatrixAdditions.this.global.Tree)MatrixAdditions.this.global.Tree">transform</a> <a href="#931676" title="=&gt; MatrixAdditions.this.global.Tree">squeezedTail</a>
          <span class="keyword">else</span>
            <a href="#931678" title="=&gt; MatrixAdditions.this.global.Block">default</a>
        <span class="keyword">case</span> _ =&gt; <a href="#3336592" title="(x: MatrixAdditions.this.global.Tree)MatrixAdditions.this.global.Tree">default</a>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  /** The Optimizer, responsible for some of the optimizing.
   */
  <span class="keyword">private</span><span class="delimiter">[</span>matching<span class="delimiter">]</span> <span class="keyword">trait</span> <a title="trait MatchMatrixOptimizer extends Object" id="621971">MatchMatrixOptimizer</a> <a href="../../../Unit.scala.html#1515" title="Unit" class="delimiter">{</a>
    self: MatchMatrix =&gt;

    <span class="keyword">import</span> <a href="#621971" title="MatchMatrixOptimizer.this.type">self</a>.<a href="ParallelMatching.scala.html#929800" title="=&gt; MatrixAdditions.this.MatrixContext">context</a>._

    <span class="keyword">final</span> <span class="keyword">def</span> <a title="(tree: MatrixAdditions.this.global.Tree)MatrixAdditions.this.global.Tree" id="929798">optimize</a><span class="delimiter">(</span><a title="MatrixAdditions.this.global.Tree" id="930605">tree</a>: <a href="../../../reflect/internal/Trees.scala.html#407938" title="MatrixAdditions.this.global.Tree">Tree</a><span class="delimiter">)</span>: <a href="../../../reflect/internal/Trees.scala.html#407938" title="MatrixAdditions.this.global.Tree">Tree</a> = <span class="delimiter">{</span>
      // Uses treeInfo extractors rather than looking at trees directly
      // because the many Blocks obscure our vision.
      <span class="keyword">object</span> <a title="lxtt.type" id="931756">lxtt</a> <a href="#931757" title="lxtt.type" class="keyword">extends</a> <a href="../ast/Trees.scala.html#537817" title="MatrixAdditions.this.global.Transformer">Transformer</a> <span class="delimiter">{</span>
        <span class="keyword">override</span> <span class="keyword">def</span> <a title="(tree: MatrixAdditions.this.global.Tree)MatrixAdditions.this.global.Tree" id="931759">transform</a><span class="delimiter">(</span><a title="MatrixAdditions.this.global.Tree" id="931761">tree</a>: <a href="../../../reflect/internal/Trees.scala.html#407938" title="MatrixAdditions.this.global.Tree">Tree</a><span class="delimiter">)</span>: <a href="../../../reflect/internal/Trees.scala.html#407938" title="MatrixAdditions.this.global.Tree">Tree</a> = <a href="#931761" title="MatrixAdditions.this.global.Tree">tree</a> <span class="keyword">match</span> <span class="delimiter">{</span>
          <span class="keyword">case</span> Block<a href="#3336597" title="MatrixAdditions.this.global.Tree" id="3336599" class="delimiter">(</a><a href="../../../reflect/internal/Trees.scala.html#410192" title="List[MatrixAdditions.this.global.Tree]" id="931767">stats</a>, <a href="../../../reflect/internal/Trees.scala.html#410194" title="MatrixAdditions.this.global.Tree" id="931768">ld</a> @ LabelDef<a href="#931768" title="MatrixAdditions.this.global.Tree" id="3336603" class="delimiter">(</a><a href="../../../reflect/internal/Trees.scala.html#410239" title="MatrixAdditions.this.global.TermName" id="3336600">_</a>, <a href="../../../reflect/internal/Trees.scala.html#410241" title="List[MatrixAdditions.this.global.Ident]" id="3336601">_</a>, <a href="../../../reflect/internal/Trees.scala.html#410243" title="MatrixAdditions.this.global.Tree" id="931774">body</a><span class="delimiter">)</span><span class="delimiter">)</span> <span class="keyword">if</span> <a href="ParallelMatching.scala.html#929817" title="=&gt; List[Product with Serializable with MatchMatrixOptimizer.this.State]">targets</a> <a href="../../../collection/LinearSeqOptimized.scala.html#86379" title="(p: Product with Serializable with MatchMatrixOptimizer.this.State =&gt; Boolean)Boolean">exists</a> <span class="delimiter">(</span><a href="#931782" title="MatchMatrix extends Product with Serializable with MatchMatrixOptimizer.this.State">_</a> <a href="ParallelMatching.scala.html#930289" title="(sym: MatrixAdditions.this.global.Symbol)Boolean">shouldInline</a> ld.<a href="../../../reflect/internal/Trees.scala.html#409939" title="=&gt; MatrixAdditions.this.global.Symbol">symbol</a><span class="delimiter">)</span> =&gt;
            <a href="#929651" title="(vds: List[MatrixAdditions.this.global.Tree], exp: MatrixAdditions.this.global.Tree)MatrixAdditions.this.global.Tree">squeezedBlock</a><a href="#3336625" title="(x: MatrixAdditions.this.global.Tree)MatrixAdditions.this.global.Tree" class="delimiter">(</a><a href="../../../reflect/api/Trees.scala.html#405661" title="(stats: List[MatrixAdditions.this.global.Tree], exprOwner: MatrixAdditions.this.global.Symbol)List[MatrixAdditions.this.global.Tree]">transformStats</a><span class="delimiter">(</span><a href="#931767" title="List[MatrixAdditions.this.global.Tree]">stats</a>, <a href="../../../reflect/api/Trees.scala.html#405647" title="=&gt; MatrixAdditions.this.global.Symbol">currentOwner</a><span class="delimiter">)</span>, <a href="#931774" title="MatrixAdditions.this.global.Tree">body</a><span class="delimiter">)</span>
          <span class="keyword">case</span> <a href="../../../reflect/internal/TreeInfo.scala.html#480415" title="Option[(MatrixAdditions.this.global.treeInfo.global.Tree, MatrixAdditions.this.global.treeInfo.global.Tree, MatrixAdditions.this.global.treeInfo.global.Tree)]" id="3336630">IsIf</a><span class="delimiter">(</span><a href="../../../Tuple3.scala.html#60576" title="MatrixAdditions.this.global.treeInfo.global.Tree" id="931803">cond</a>, <a href="../../../reflect/internal/TreeInfo.scala.html#480415" title="MatrixAdditions.this.global.Tree">IsTrue</a><a href="../../../Tuple3.scala.html#60578" title="MatrixAdditions.this.global.treeInfo.global.Tree" id="3336607" class="delimiter">(</a><span class="delimiter">)</span>, <a href="../../../reflect/internal/TreeInfo.scala.html#480415" title="MatrixAdditions.this.global.Tree">IsFalse</a><a href="../../../Tuple3.scala.html#60580" title="MatrixAdditions.this.global.treeInfo.global.Tree" id="3336608" class="delimiter">(</a><span class="delimiter">)</span><span class="delimiter">)</span> =&gt;
            <a href="#931759" title="(tree: MatrixAdditions.this.global.Tree)MatrixAdditions.this.global.Tree">transform</a><a href="#3336625" title="(x: MatrixAdditions.this.global.Tree)MatrixAdditions.this.global.Tree" class="delimiter">(</a><a href="#931803" title="MatrixAdditions.this.global.treeInfo.global.Tree">cond</a><span class="delimiter">)</span>
          <span class="keyword">case</span> <a href="../../../reflect/internal/TreeInfo.scala.html#480415" title="Option[(MatrixAdditions.this.global.treeInfo.global.Tree, MatrixAdditions.this.global.treeInfo.global.Tree, MatrixAdditions.this.global.treeInfo.global.Tree)]" id="3336633">IsIf</a><span class="delimiter">(</span><a href="../../../Tuple3.scala.html#60576" title="MatrixAdditions.this.global.treeInfo.global.Tree" id="931813">cond1</a>, <a href="../../../reflect/internal/TreeInfo.scala.html#480415" title="Option[(MatrixAdditions.this.global.treeInfo.global.Tree, MatrixAdditions.this.global.treeInfo.global.Tree, MatrixAdditions.this.global.treeInfo.global.Tree)]" id="3336632">IsIf</a><a href="../../../Tuple3.scala.html#60578" title="MatrixAdditions.this.global.treeInfo.global.Tree" id="3336609" class="delimiter">(</a><a href="../../../Tuple3.scala.html#60576" title="MatrixAdditions.this.global.treeInfo.global.Tree" id="931817">cond2</a>, <a href="../../../Tuple3.scala.html#60578" title="MatrixAdditions.this.global.treeInfo.global.Tree" id="931818">thenp</a>, <a href="../../../Tuple3.scala.html#60580" title="MatrixAdditions.this.global.treeInfo.global.Tree" id="931819">elsep1</a><span class="delimiter">)</span>, <a href="../../../Tuple3.scala.html#60580" title="MatrixAdditions.this.global.treeInfo.global.Tree" id="931820">elsep2</a><span class="delimiter">)</span> <span class="keyword">if</span> <a href="#931819" title="MatrixAdditions.this.global.treeInfo.global.Tree">elsep1</a> <a href="../../../reflect/internal/Trees.scala.html#408547" title="(that: MatrixAdditions.this.global.treeInfo.global.Tree)Boolean">equalsStructure</a> <a href="#931820" title="MatrixAdditions.this.global.treeInfo.global.Tree">elsep2</a> =&gt;
            <a href="#931759" title="(tree: MatrixAdditions.this.global.Tree)MatrixAdditions.this.global.Tree">transform</a><a href="#3336625" title="(x: MatrixAdditions.this.global.Tree)MatrixAdditions.this.global.Tree" class="delimiter">(</a><a href="Matrix.scala.html#929662" title="=&gt; MatrixAdditions.this.global.analyzer.Typer">typer</a> <a href="../typechecker/Typers.scala.html#538701" title="(tree: MatrixAdditions.this.global.analyzer.global.Tree)MatrixAdditions.this.global.analyzer.global.Tree">typed</a> <a href="../../../reflect/internal/Trees.scala.html#453562" title="(cond: MatrixAdditions.this.global.Tree, thenp: MatrixAdditions.this.global.Tree, elsep: MatrixAdditions.this.global.Tree)MatrixAdditions.this.global.If">If</a><span class="delimiter">(</span><a href="../Global.scala.html#537460" title="MatrixAdditions.this.global.gen.type">gen</a>.<a href="../../../reflect/internal/TreeGen.scala.html#471013" title="(tree1: MatrixAdditions.this.global.gen.global.Tree, tree2: MatrixAdditions.this.global.gen.global.Tree)MatrixAdditions.this.global.gen.global.Tree">mkAnd</a><span class="delimiter">(</span><a href="#931813" title="MatrixAdditions.this.global.treeInfo.global.Tree">cond1</a>, <a href="#931817" title="MatrixAdditions.this.global.treeInfo.global.Tree">cond2</a><span class="delimiter">)</span>, <a href="#931818" title="MatrixAdditions.this.global.treeInfo.global.Tree">thenp</a>, <a href="#931820" title="MatrixAdditions.this.global.treeInfo.global.Tree">elsep2</a><span class="delimiter">)</span><span class="delimiter">)</span>
          <span class="keyword">case</span> If<a href="#3336597" title="MatrixAdditions.this.global.Tree" id="3336614" class="delimiter">(</a><a href="../../../reflect/internal/Trees.scala.html#410107" title="MatrixAdditions.this.global.Tree" id="931848">cond1</a>, <a href="../../../reflect/internal/TreeInfo.scala.html#480415" title="Option[(MatrixAdditions.this.global.treeInfo.global.Tree, MatrixAdditions.this.global.treeInfo.global.Tree, MatrixAdditions.this.global.treeInfo.global.Tree)]" id="3336635">IsIf</a><a href="../../../reflect/internal/Trees.scala.html#410109" title="MatrixAdditions.this.global.treeInfo.global.Tree" id="3336612" class="delimiter">(</a><a href="../../../Tuple3.scala.html#60576" title="MatrixAdditions.this.global.treeInfo.global.Tree" id="931852">cond2</a>, <a href="../../../Tuple3.scala.html#60578" title="MatrixAdditions.this.global.treeInfo.global.Tree" id="931853">thenp</a>, Apply<a href="../../../Tuple3.scala.html#60580" title="MatrixAdditions.this.global.treeInfo.global.Tree" id="3336619" class="delimiter">(</a><a href="../../../reflect/internal/Trees.scala.html#410031" title="MatrixAdditions.this.global.Tree" id="931862">jmp</a>, <a href="../../../reflect/internal/Trees.scala.html#410033" title="List[MatrixAdditions.this.global.Tree]" id="3336622">Nil</a><span class="delimiter">)</span><span class="delimiter">)</span>, <a href="../../../reflect/internal/Trees.scala.html#410111" title="MatrixAdditions.this.global.Tree" id="931863">ld</a>: LabelDef<span class="delimiter">)</span> <span class="keyword">if</span> <a href="#931862" title="MatrixAdditions.this.global.Tree">jmp</a>.<a href="../../../reflect/internal/Trees.scala.html#408577" title="=&gt; MatrixAdditions.this.global.Symbol">symbol</a> <span title="(x$1: AnyRef)Boolean">eq</span> ld.<a href="../../../reflect/internal/Trees.scala.html#409939" title="=&gt; MatrixAdditions.this.global.Symbol">symbol</a> =&gt;
            <a href="#931759" title="(tree: MatrixAdditions.this.global.Tree)MatrixAdditions.this.global.Tree">transform</a><a href="#3336625" title="(x: MatrixAdditions.this.global.Tree)MatrixAdditions.this.global.Tree" class="delimiter">(</a><a href="Matrix.scala.html#929662" title="=&gt; MatrixAdditions.this.global.analyzer.Typer">typer</a> <a href="../typechecker/Typers.scala.html#538701" title="(tree: MatrixAdditions.this.global.analyzer.global.Tree)MatrixAdditions.this.global.analyzer.global.Tree">typed</a> <a href="../../../reflect/internal/Trees.scala.html#453562" title="(cond: MatrixAdditions.this.global.Tree, thenp: MatrixAdditions.this.global.Tree, elsep: MatrixAdditions.this.global.Tree)MatrixAdditions.this.global.If">If</a><span class="delimiter">(</span><a href="../Global.scala.html#537460" title="MatrixAdditions.this.global.gen.type">gen</a>.<a href="../../../reflect/internal/TreeGen.scala.html#471013" title="(tree1: MatrixAdditions.this.global.gen.global.Tree, tree2: MatrixAdditions.this.global.gen.global.Tree)MatrixAdditions.this.global.gen.global.Tree">mkAnd</a><span class="delimiter">(</span><a href="#931848" title="MatrixAdditions.this.global.Tree">cond1</a>, <a href="#931852" title="MatrixAdditions.this.global.treeInfo.global.Tree">cond2</a><span class="delimiter">)</span>, <a href="#931853" title="MatrixAdditions.this.global.treeInfo.global.Tree">thenp</a>, ld<span class="delimiter">)</span><span class="delimiter">)</span>
          <span class="keyword">case</span> _ =&gt;
            <span class="keyword">super</span>.<a href="../../../reflect/api/Trees.scala.html#405652" title="(tree: MatrixAdditions.this.global.Tree)MatrixAdditions.this.global.Tree">transform</a><a href="#3336625" title="(x: MatrixAdditions.this.global.Tree)MatrixAdditions.this.global.Tree" class="delimiter">(</a><a href="#931761" title="MatrixAdditions.this.global.Tree">tree</a><span class="delimiter">)</span>
        <span class="delimiter">}</span>
      <span class="delimiter">}</span>
      <span class="keyword">try</span> <a href="#931756" title="lxtt.type">lxtt</a> <a href="#931759" title="(tree: MatrixAdditions.this.global.Tree)MatrixAdditions.this.global.Tree">transform</a> <a href="#930605" title="MatrixAdditions.this.global.Tree">tree</a>
      <span class="keyword">finally</span> <a href="Matrix.scala.html#929675" title="()Unit">clearSyntheticSyms</a><span class="delimiter">(</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  /** The Exhauster.
   */
  <span class="keyword">private</span><span class="delimiter">[</span>matching<span class="delimiter">]</span> <span class="keyword">trait</span> <a title="trait MatrixExhaustiveness extends Object" id="621972">MatrixExhaustiveness</a> <a href="../../../Unit.scala.html#1515" title="Unit" class="delimiter">{</a>
    self: MatchMatrix =&gt;

    <span class="keyword">import</span> <a href="#621972" title="MatrixExhaustiveness.this.type">self</a>.<a href="ParallelMatching.scala.html#929800" title="=&gt; MatrixAdditions.this.MatrixContext">context</a>._

    /** Exhaustiveness checking requires looking for sealed classes
     *  and if found, making sure all children are covered by a pattern.
     */
    <span class="keyword">class</span> <a title="class ExhaustivenessChecker extends Object" id="929865">ExhaustivenessChecker</a><a href="#929865" title="MatrixExhaustiveness.this.ExhaustivenessChecker" class="delimiter">(</a><a title="MatrixExhaustiveness.this.Rep" id="931938">rep</a>: <a href="ParallelMatching.scala.html#929852" title="MatrixExhaustiveness.this.Rep">Rep</a>, <a title="MatrixAdditions.this.global.Position" id="931939">matchPos</a>: <a href="../../../reflect/internal/util/Position.scala.html#22953" title="MatrixAdditions.this.global.Position">Position</a><span class="delimiter">)</span> <span class="delimiter">{</span>
      <span class="keyword">val</span> Rep<a href="#3336654" title="(x: (MatrixExhaustiveness.this.context.PatternVarGroup, List[MatrixExhaustiveness.this.Row]))(MatrixExhaustiveness.this.context.PatternVarGroup, List[MatrixExhaustiveness.this.Row])" class="delimiter">(</a><a href="ParallelMatching.scala.html#929894" title="MatrixExhaustiveness.this.context.PatternVarGroup" id="931875">tvars</a>, <a href="ParallelMatching.scala.html#929896" title="List[MatrixExhaustiveness.this.Row]" id="931877">rows</a><span class="delimiter">)</span> = <a href="#931938" title="MatrixExhaustiveness.this.Rep">rep</a>

      <span class="keyword">import</span> <a href="../symtab/package.scala.html#55820" title="=&gt; reflect.internal.Flags.type">Flags</a>.<span class="delimiter">{</span> MUTABLE, ABSTRACT, SEALED <span class="delimiter">}</span>

      <span class="keyword">private</span> case <span class="keyword">class</span> <a title="class Combo extends AnyRef with Product with Serializable" id="932589">Combo</a><a href="../../../Product.scala.html#186" title="Product" class="delimiter">(</a><a title="Int" id="932295">index</a>: <a href="../../../Int.scala.html#321" title="Int">Int</a>, <a title="MatrixAdditions.this.global.Symbol" id="932296">sym</a>: <a href="../../../reflect/internal/Symbols.scala.html#407146" title="MatrixAdditions.this.global.Symbol">Symbol</a><span class="delimiter">)</span> <span class="delimiter">{</span> <span class="delimiter">}</span>

      /* True if the patterns in 'row' cover the given type symbol combination, and has no guard. */
      <span class="keyword">private</span> <span class="keyword">def</span> <a title="(row: MatrixExhaustiveness.this.Row, combos: List[ExhaustivenessChecker.this.Combo])Boolean" id="931883">rowCoversCombo</a><span class="delimiter">(</span><a title="MatrixExhaustiveness.this.Row" id="931991">row</a>: <a href="ParallelMatching.scala.html#929842" title="MatrixExhaustiveness.this.Row">Row</a>, <a title="List[ExhaustivenessChecker.this.Combo]" id="931992">combos</a>: <a href="../../../collection/immutable/List.scala.html#11952" title="List[ExhaustivenessChecker.this.Combo]">List</a><span class="delimiter">[</span>Combo<span class="delimiter">]</span><span class="delimiter">)</span> =
        <a href="#931991" title="MatrixExhaustiveness.this.Row">row</a>.<a href="ParallelMatching.scala.html#930242" title="=&gt; MatrixAdditions.this.global.Tree">guard</a>.<a href="../../../reflect/internal/Trees.scala.html#408582" title="=&gt; Boolean">isEmpty</a> <a href="../../../Boolean.scala.html#57826" title="(x: Boolean)Boolean">&amp;&amp;</a> <a href="#931992" title="List[ExhaustivenessChecker.this.Combo]">combos</a>.<a href="../../../collection/LinearSeqOptimized.scala.html#86378" title="(p: ExhaustivenessChecker.this.Combo =&gt; Boolean)Boolean">forall</a><span class="delimiter">(</span><a title="ExhaustivenessChecker.this.Combo" id="931999">c</a> =&gt; <a href="#931991" title="MatrixExhaustiveness.this.Row">row</a>.<a href="../../../collection/LinearSeqOptimized.scala.html#86374" title="(n: Int)MatrixAdditions.this.Pattern">pats</a><span class="delimiter">(</span><a href="#931999" title="ExhaustivenessChecker.this.Combo">c</a>.<a href="#932295" title="=&gt; Int">index</a><span class="delimiter">)</span> <a href="Patterns.scala.html#932032" title="(sym: MatrixAdditions.this.global.Symbol)Boolean">covers</a> <a href="#931999" title="ExhaustivenessChecker.this.Combo">c</a>.<a href="#932296" title="=&gt; MatrixAdditions.this.global.Symbol">sym</a><span class="delimiter">)</span>

      <span class="keyword">private</span> <span class="keyword">def</span> <a title="(sym: MatrixAdditions.this.global.Symbol)Boolean" id="931884">requiresExhaustive</a><span class="delimiter">(</span><a title="MatrixAdditions.this.global.Symbol" id="932052">sym</a>: <a href="../../../reflect/internal/Symbols.scala.html#407146" title="MatrixAdditions.this.global.Symbol">Symbol</a><span class="delimiter">)</span> = <span class="delimiter">{</span>
         <span class="delimiter">(</span><a href="#932052" title="MatrixAdditions.this.global.Symbol">sym</a>.<a href="../../../reflect/internal/HasFlags.scala.html#409860" title="=&gt; Boolean">isMutable</a><span class="delimiter">)</span> <a href="../../../Boolean.scala.html#57826" title="(x: Boolean)Boolean">&amp;&amp;</a>                 // indicates that have not yet checked exhaustivity
        <a href="../../../Boolean.scala.html#57822" title="=&gt; Boolean">!</a><span class="delimiter">(</span><a href="#932052" title="MatrixAdditions.this.global.Symbol">sym</a> <a href="../../../reflect/internal/Symbols.scala.html#411234" title="(mask: Long)Boolean">hasFlag</a> <a href="Matrix.scala.html#621980" title="=&gt; Long">NO_EXHAUSTIVE</a><span class="delimiter">)</span> <a href="../../../Boolean.scala.html#57826" title="(x: Boolean)Boolean">&amp;&amp;</a>     // indicates @unchecked
         <span class="delimiter">(</span><a href="#932052" title="MatrixAdditions.this.global.Symbol">sym</a>.<a href="../../../reflect/internal/Symbols.scala.html#411365" title="=&gt; MatrixAdditions.this.global.Type">tpe</a>.<a href="../../../reflect/internal/Types.scala.html#408407" title="=&gt; MatrixAdditions.this.global.Symbol">typeSymbol</a>.<a href="../../../reflect/internal/HasFlags.scala.html#409869" title="=&gt; Boolean">isSealed</a><span class="delimiter">)</span> <a href="../../../Boolean.scala.html#57826" title="(x: Boolean)Boolean">&amp;&amp;</a>
        <a href="../../../Boolean.scala.html#57822" title="=&gt; Boolean">!</a><a href="../../../reflect/internal/Definitions.scala.html#409297" title="(sym: MatrixAdditions.this.global.Symbol)Boolean">isPrimitiveValueClass</a><span class="delimiter">(</span><a href="#932052" title="MatrixAdditions.this.global.Symbol">sym</a>.<a href="../../../reflect/internal/Symbols.scala.html#411365" title="=&gt; MatrixAdditions.this.global.Type">tpe</a>.<a href="../../../reflect/internal/Types.scala.html#408407" title="=&gt; MatrixAdditions.this.global.Symbol">typeSymbol</a><span class="delimiter">)</span>   // make sure it's not a primitive, else (5: Byte) match { case 5 =&gt; ... } sees no Byte
      <span class="delimiter">}</span>

      <span class="keyword">private</span> <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="List[List[ExhaustivenessChecker.this.Combo]]" id="931886">inexhaustives</a>: <a href="../../../collection/immutable/List.scala.html#11952" title="List[List[ExhaustivenessChecker.this.Combo]]">List</a><span class="delimiter">[</span>List<span class="delimiter">[</span>Combo<span class="delimiter">]</span><span class="delimiter">]</span> = <span class="delimiter">{</span>
        // let's please not get too clever side-effecting the mutable flag.
        <span class="keyword">val</span> <a title="List[(MatrixExhaustiveness.this.context.PatternVar, Int)]" id="932056">toCollect</a> = <a href="#931875" title="=&gt; MatrixExhaustiveness.this.context.PatternVarGroup">tvars</a>.<a href="Matrix.scala.html#930638" title="=&gt; List[(MatrixExhaustiveness.this.context.PatternVar, Int)]">zipWithIndex</a> <a href="../../../collection/TraversableLike.scala.html#58073" title="(p: ((MatrixExhaustiveness.this.context.PatternVar, Int)) =&gt; Boolean)List[(MatrixExhaustiveness.this.context.PatternVar, Int)]">filter</a> <a href="#932064" title="(MatrixExhaustiveness.this.context.PatternVar, Int)" class="delimiter">{</a> <span class="keyword">case</span> <span class="delimiter">(</span><a href="../../../Tuple2.scala.html#60635" title="MatrixExhaustiveness.this.context.PatternVar" id="932067">pv</a>, <a href="../../../Tuple2.scala.html#60637" title="Int" id="932068">i</a><span class="delimiter">)</span> =&gt; <a href="#931884" title="(sym: MatrixAdditions.this.global.Symbol)Boolean">requiresExhaustive</a><a href="#3336673" title="(x: Boolean)Boolean" class="delimiter">(</a><a href="#932067" title="MatrixExhaustiveness.this.context.PatternVar">pv</a>.<a href="Matrix.scala.html#929729" title="=&gt; MatrixAdditions.this.global.Symbol">sym</a><span class="delimiter">)</span> <span class="delimiter">}</span>
        <span class="keyword">val</span> <a title="List[(Int, List[MatrixAdditions.this.global.Symbol])]" id="932057">collected</a> = <a href="#932056" title="List[(MatrixExhaustiveness.this.context.PatternVar, Int)]">toCollect</a> <a href="../../../collection/TraversableLike.scala.html#58063" title="(f: ((MatrixExhaustiveness.this.context.PatternVar, Int)) =&gt; (Int, List[MatrixAdditions.this.global.Symbol]))(implicit bf: scala.collection.generic.CanBuildFrom[List[(MatrixExhaustiveness.this.context.PatternVar, Int)],(Int, List[MatrixAdditions.this.global.Symbol]),List[(Int, List[MatrixAdditions.this.global.Symbol])]])List[(Int, List[MatrixAdditions.this.global.Symbol])]">map</a> <a href="#932085" title="(MatrixExhaustiveness.this.context.PatternVar, Int)" class="delimiter">{</a> <span class="keyword">case</span> <span class="delimiter">(</span><a href="../../../Tuple2.scala.html#60635" title="MatrixExhaustiveness.this.context.PatternVar" id="932088">pv</a>, <a href="../../../Tuple2.scala.html#60637" title="Int" id="932089">i</a><span class="delimiter">)</span> =&gt;
          // okay, now reset the flag
          <a href="#932088" title="MatrixExhaustiveness.this.context.PatternVar">pv</a>.<a href="Matrix.scala.html#929729" title="=&gt; MatrixAdditions.this.global.Symbol">sym</a> <a href="../../../reflect/internal/Symbols.scala.html#411237" title="(mask: Long)MatrixAdditions.this.global.Symbol">resetFlag</a> <span title="Long(4096L)">MUTABLE</span>

          <a href="../../../Predef.scala.html#7509" title="(x: Int)ArrowAssoc[Int]">i</a> <a href="../../../Predef.scala.html#62634" title="(y: List[MatrixAdditions.this.global.Symbol])(Int, List[MatrixAdditions.this.global.Symbol])">-&gt;</a> <span class="delimiter">(</span>
            <a href="#932088" title="MatrixExhaustiveness.this.context.PatternVar">pv</a>.<a href="Matrix.scala.html#929730" title="=&gt; MatrixAdditions.this.global.Type">tpe</a>.<a href="../../../reflect/internal/Types.scala.html#408407" title="=&gt; MatrixAdditions.this.global.Symbol">typeSymbol</a>.<a href="../../../reflect/internal/Symbols.scala.html#411488" title="=&gt; Set[MatrixAdditions.this.global.Symbol]">sealedDescendants</a>.<a href="../../../collection/TraversableOnce.scala.html#58263" title="=&gt; List[MatrixAdditions.this.global.Symbol]">toList</a> <a href="../../../collection/SeqLike.scala.html#58869" title="(f: MatrixAdditions.this.global.Symbol =&gt; String)(implicit ord: scala.math.Ordering[String])List[MatrixAdditions.this.global.Symbol]">sortBy</a> <span class="delimiter">(</span><a href="#932120" title="MatrixAdditions.this.global.Symbol">_</a>.<a href="../../../reflect/internal/Symbols.scala.html#411493" title="=&gt; String">sealedSortName</a><span class="delimiter">)</span>
            // symbols which are both sealed and abstract need not be covered themselves, because
            // all of their children must be and they cannot otherwise be created.
            <a href="../../../collection/TraversableLike.scala.html#58074" title="(p: MatrixAdditions.this.global.Symbol =&gt; Boolean)List[MatrixAdditions.this.global.Symbol]">filterNot</a> <span class="delimiter">(</span><a title="MatrixAdditions.this.global.Symbol" id="932182">x</a> =&gt; <a href="#932182" title="MatrixAdditions.this.global.Symbol">x</a>.<a href="../../../reflect/internal/HasFlags.scala.html#409869" title="=&gt; Boolean">isSealed</a> <a href="../../../Boolean.scala.html#57826" title="(x: Boolean)Boolean">&amp;&amp;</a> <a href="#932182" title="MatrixAdditions.this.global.Symbol">x</a>.<a href="../../../reflect/internal/Symbols.scala.html#411175" title="=&gt; Boolean">isAbstractClass</a> <a href="../../../Boolean.scala.html#57826" title="(x: Boolean)Boolean">&amp;&amp;</a> <a href="../../../Boolean.scala.html#57822" title="=&gt; Boolean">!</a><a href="../../../reflect/internal/Definitions.scala.html#409297" title="(sym: MatrixAdditions.this.global.Symbol)Boolean">isPrimitiveValueClass</a><span class="delimiter">(</span><a href="#932182" title="MatrixAdditions.this.global.Symbol">x</a><span class="delimiter">)</span><span class="delimiter">)</span>
            // have to filter out children which cannot match: see ticket #3683 for an example
            <a href="../../../collection/TraversableLike.scala.html#58073" title="(p: MatrixAdditions.this.global.Symbol =&gt; Boolean)List[MatrixAdditions.this.global.Symbol]">filter</a> <span class="delimiter">(</span><a href="#932188" title="MatrixAdditions.this.global.Symbol">_</a>.<a href="../../../reflect/internal/Symbols.scala.html#411365" title="=&gt; MatrixAdditions.this.global.Type">tpe</a> <a href="../../../reflect/internal/Types.scala.html#408482" title="(that: MatrixAdditions.this.global.Type)Boolean">matchesPattern</a> <a href="#932088" title="MatrixExhaustiveness.this.context.PatternVar">pv</a>.<a href="Matrix.scala.html#929730" title="=&gt; MatrixAdditions.this.global.Type">tpe</a><span class="delimiter">)</span>
          <span class="delimiter">)</span>
        <span class="delimiter">}</span>

        <span class="keyword">val</span> <a title="List[List[ExhaustivenessChecker.this.Combo]]" id="932058">folded</a> =
          <a href="#932057" title="List[(Int, List[MatrixAdditions.this.global.Symbol])]">collected</a>.<a href="../../../collection/LinearSeqOptimized.scala.html#86385" title="(z: List[List[ExhaustivenessChecker.this.Combo]])(f: ((Int, List[MatrixAdditions.this.global.Symbol]), List[List[ExhaustivenessChecker.this.Combo]]) =&gt; List[List[ExhaustivenessChecker.this.Combo]])List[List[ExhaustivenessChecker.this.Combo]]">foldRight</a><span class="delimiter">(</span>List<span class="delimiter">[</span>List<span class="delimiter">[</span>Combo<span class="delimiter">]</span><span class="delimiter">]</span><a href="../../../collection/immutable/List.scala.html#11188" title="scala.collection.immutable.Nil.type" class="delimiter">(</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">(</span><span class="delimiter">(</span><a title="(Int, List[MatrixAdditions.this.global.Symbol])" id="932242">c</a>, <a title="List[List[ExhaustivenessChecker.this.Combo]]" id="932243">xs</a><span class="delimiter">)</span> =&gt; <span class="delimiter">{</span>
            <span class="keyword">val</span> <a href="#3336691" title="(x: (Int, List[MatrixAdditions.this.global.Symbol]))(Int, List[MatrixAdditions.this.global.Symbol])" class="delimiter">(</a><a href="../../../Tuple2.scala.html#60635" title="Int" id="932245">i</a>, <a href="../../../Tuple2.scala.html#60637" title="List[MatrixAdditions.this.global.Symbol]" id="932246">syms</a><span class="delimiter">)</span> = <a href="#932242" title="(Int, List[MatrixAdditions.this.global.Symbol])">c</a> <a href="../../../Tuple2.scala.html#783" title="(Int, List[MatrixAdditions.this.global.Symbol]) @unchecked" class="keyword">match</a> <span class="delimiter">{</span> <span class="keyword">case</span> <span class="delimiter">(</span><a href="../../../Tuple2.scala.html#60635" title="Int" id="932249">i</a>, <a href="../../../Tuple2.scala.html#60637" title="List[MatrixAdditions.this.global.Symbol]" id="932250">set</a><span class="delimiter">)</span> =&gt; <a href="#3336685" title="(x: (Int, List[MatrixAdditions.this.global.Symbol]))(Int, List[MatrixAdditions.this.global.Symbol])" class="delimiter">(</a><a href="#932249" title="Int">i</a>, <a href="#932250" title="List[MatrixAdditions.this.global.Symbol]">set</a>.<a href="../../../collection/immutable/List.scala.html#62707" title="=&gt; List[MatrixAdditions.this.global.Symbol]">toList</a><span class="delimiter">)</span> <span class="delimiter">}</span>
            <a href="#932243" title="List[List[ExhaustivenessChecker.this.Combo]]">xs</a> <span class="keyword">match</span> <span class="delimiter">{</span>
              <span class="keyword">case</span> <a href="../../../collection/immutable/List.scala.html#11188" title="List[List[ExhaustivenessChecker.this.Combo]]" id="3336697">Nil</a>  =&gt; <a href="#932246" title="List[MatrixAdditions.this.global.Symbol]">syms</a> <a href="#3336699" title="(x: List[List[ExhaustivenessChecker.this.Combo]])List[List[ExhaustivenessChecker.this.Combo]]">map</a> <span class="delimiter">(</span><a title="MatrixAdditions.this.global.Symbol" id="932284">s</a> =&gt; <a href="../../../collection/immutable/List.scala.html#62451" title="(xs: ExhaustivenessChecker.this.Combo*)List[ExhaustivenessChecker.this.Combo]">List</a><span class="delimiter">(</span><a href="#932589" title="(index: Int, sym: MatrixAdditions.this.global.Symbol)ExhaustivenessChecker.this.Combo">Combo</a><span class="delimiter">(</span><a href="#932245" title="Int">i</a>, <a href="#932284" title="MatrixAdditions.this.global.Symbol">s</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
              <span class="keyword">case</span> _    =&gt; <span class="keyword">for</span> <span class="delimiter">(</span><a title="MatrixAdditions.this.global.Symbol" id="932346">s</a> &lt;- <a href="../../../collection/TraversableLike.scala.html#58068" title="(f: MatrixAdditions.this.global.Symbol =&gt; scala.collection.GenTraversableOnce[List[ExhaustivenessChecker.this.Combo]])(implicit bf: scala.collection.generic.CanBuildFrom[List[MatrixAdditions.this.global.Symbol],List[ExhaustivenessChecker.this.Combo],List[List[ExhaustivenessChecker.this.Combo]]])List[List[ExhaustivenessChecker.this.Combo]]">syms</a> ; <a title="List[ExhaustivenessChecker.this.Combo]" id="932363">rest</a> &lt;- <a href="../../../collection/TraversableLike.scala.html#58063" title="(f: List[ExhaustivenessChecker.this.Combo] =&gt; List[ExhaustivenessChecker.this.Combo])(implicit bf: scala.collection.generic.CanBuildFrom[List[List[ExhaustivenessChecker.this.Combo]],List[ExhaustivenessChecker.this.Combo],List[List[ExhaustivenessChecker.this.Combo]]])List[List[ExhaustivenessChecker.this.Combo]]">xs</a><span class="delimiter">)</span> <span class="keyword">yield</span> <a href="#932589" title="(index: Int, sym: MatrixAdditions.this.global.Symbol)ExhaustivenessChecker.this.Combo">Combo</a><span class="delimiter">(</span><a href="#932245" title="Int">i</a>, <a href="#932346" title="MatrixAdditions.this.global.Symbol">s</a><span class="delimiter">)</span> <a href="../../../collection/immutable/List.scala.html#62685" title="(x: ExhaustivenessChecker.this.Combo)List[ExhaustivenessChecker.this.Combo]">::</a> <a href="#932363" title="List[ExhaustivenessChecker.this.Combo]">rest</a>
            <span class="delimiter">}</span>
          <span class="delimiter">}</span><span class="delimiter">)</span>

        <a href="#932058" title="List[List[ExhaustivenessChecker.this.Combo]]">folded</a> <a href="../../../collection/TraversableLike.scala.html#58074" title="(p: List[ExhaustivenessChecker.this.Combo] =&gt; Boolean)List[List[ExhaustivenessChecker.this.Combo]]">filterNot</a> <span class="delimiter">(</span><a title="List[ExhaustivenessChecker.this.Combo]" id="932429">combo</a> =&gt; <a href="#931877" title="=&gt; List[MatrixExhaustiveness.this.Row]">rows</a> <a href="../../../collection/LinearSeqOptimized.scala.html#86379" title="(p: MatrixExhaustiveness.this.Row =&gt; Boolean)Boolean">exists</a> <span class="delimiter">(</span><a title="MatrixExhaustiveness.this.Row" id="932436">r</a> =&gt; <a href="#931883" title="(row: MatrixExhaustiveness.this.Row, combos: List[ExhaustivenessChecker.this.Combo])Boolean">rowCoversCombo</a><span class="delimiter">(</span><a href="#932436" title="MatrixExhaustiveness.this.Row">r</a>, <a href="#932429" title="List[ExhaustivenessChecker.this.Combo]">combo</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
      <span class="delimiter">}</span>

      <span class="keyword">private</span> <span class="keyword">def</span> <a title="(xs: List[ExhaustivenessChecker.this.Combo], i: Int)String" id="931887">mkPad</a><span class="delimiter">(</span><a title="List[ExhaustivenessChecker.this.Combo]" id="932437">xs</a>: <a href="../../../collection/immutable/List.scala.html#11952" title="List[ExhaustivenessChecker.this.Combo]">List</a><span class="delimiter">[</span>Combo<span class="delimiter">]</span>, <a title="Int" id="932438">i</a>: <a href="../../../Int.scala.html#321" title="Int">Int</a><span class="delimiter">)</span>: <span title="String">String</span> = <a href="#932437" title="List[ExhaustivenessChecker.this.Combo]">xs</a> <span class="keyword">match</span> <span class="delimiter">{</span>
        <span class="keyword">case</span> <a href="../../../collection/immutable/List.scala.html#11188" title="String" id="3336711">Nil</a>                    =&gt; <a href="MatchSupport.scala.html#928639" title="(s: String)String">pad</a><a href="#3336713" title="(x: String)String" class="delimiter">(</a><span title="String(&quot;*&quot;)" class="string">&quot;*&quot;</span><span class="delimiter">)</span>
        <span class="keyword">case</span> Combo<a href="../../../collection/immutable/List.scala.html#206583" title="ExhaustivenessChecker.this.Combo" id="3336709" class="delimiter">(</a><a href="#932295" title="Int" id="932465">j</a>, <a href="#932296" title="MatrixAdditions.this.global.Symbol" id="932466">sym</a><span class="delimiter">)</span> <a href="#3336707" title="String" id="3336710">::</a> <a href="../../../collection/immutable/List.scala.html#206584" title="List[ExhaustivenessChecker.this.Combo]" id="932467">rest</a>  =&gt; <a href="#3336713" title="(x: String)String" class="keyword">if</a> <span class="delimiter">(</span><a href="#932465" title="Int">j</a> <a href="../../../Int.scala.html#57097" title="(x: Int)Boolean">==</a> <a href="#932438" title="Int">i</a><span class="delimiter">)</span> <a href="MatchSupport.scala.html#928639" title="(s: String)String">pad</a><span class="delimiter">(</span><a href="#932466" title="MatrixAdditions.this.global.Symbol">sym</a>.<a href="../../../reflect/internal/Symbols.scala.html#411087" title="=&gt; sym.NameType">name</a>.<span title="()String">toString</span><span class="delimiter">)</span> <span class="keyword">else</span> <a href="#931887" title="(xs: List[ExhaustivenessChecker.this.Combo], i: Int)String">mkPad</a><span class="delimiter">(</span><a href="#932467" title="List[ExhaustivenessChecker.this.Combo]">rest</a>, <a href="#932438" title="Int">i</a><span class="delimiter">)</span>
      <span class="delimiter">}</span>
      <span class="keyword">private</span> <span class="keyword">def</span> <a title="(open: List[ExhaustivenessChecker.this.Combo])String" id="931888">mkMissingStr</a><span class="delimiter">(</span><a title="List[ExhaustivenessChecker.this.Combo]" id="932477">open</a>: <a href="../../../collection/immutable/List.scala.html#11952" title="List[ExhaustivenessChecker.this.Combo]">List</a><span class="delimiter">[</span>Combo<span class="delimiter">]</span><span class="delimiter">)</span> =
        <a href="../../../Predef.scala.html#7604" title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps" class="string">&quot;missing combination %s\n&quot;</a> <a href="../../../collection/immutable/StringLike.scala.html#59882" title="(args: Any*)String">format</a> <a href="#931875" title="=&gt; MatrixExhaustiveness.this.context.PatternVarGroup">tvars</a>.<a href="Matrix.scala.html#930639" title="=&gt; scala.collection.immutable.Range">indices</a>.<a href="../../../collection/TraversableLike.scala.html#58063" title="(f: Int =&gt; String)(implicit bf: scala.collection.generic.CanBuildFrom[scala.collection.immutable.IndexedSeq[Int],String,scala.collection.immutable.IndexedSeq[String]])scala.collection.immutable.IndexedSeq[String]">map</a><a href="../../../collection/immutable/IndexedSeq.scala.html#59992" title="scala.collection.generic.CanBuildFrom[scala.collection.immutable.IndexedSeq.Coll,String,scala.collection.immutable.IndexedSeq[String]]" class="delimiter">(</a><a href="#931887" title="(xs: List[ExhaustivenessChecker.this.Combo], i: Int)String">mkPad</a><span class="delimiter">(</span><a href="#932477" title="List[ExhaustivenessChecker.this.Combo]">open</a>, <a href="#932500" title="Int">_</a><span class="delimiter">)</span><span class="delimiter">)</span>.<a href="../../../collection/TraversableOnce.scala.html#58284" title="=&gt; String">mkString</a>

      /** The only public method. */
      <span class="keyword">def</span> <a title="=&gt; MatrixExhaustiveness.this.Rep" id="931889">check</a> = <span class="delimiter">{</span>
        <span class="keyword">def</span> <a title="=&gt; String" id="932535">errMsg</a> = <span class="delimiter">(</span><a href="#931885" title="=&gt; List[List[ExhaustivenessChecker.this.Combo]]">inexhaustives</a> <a href="../../../collection/TraversableLike.scala.html#58063" title="(f: List[ExhaustivenessChecker.this.Combo] =&gt; String)(implicit bf: scala.collection.generic.CanBuildFrom[List[List[ExhaustivenessChecker.this.Combo]],String,List[String]])List[String]">map</a> <a href="#931888" title="(open: List[ExhaustivenessChecker.this.Combo])String">mkMissingStr</a><span class="delimiter">)</span>.<a href="../../../collection/TraversableOnce.scala.html#58284" title="=&gt; String">mkString</a>
        <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#931885" title="=&gt; List[List[ExhaustivenessChecker.this.Combo]]">inexhaustives</a>.<a href="../../../collection/TraversableOnce.scala.html#58191" title="=&gt; Boolean">nonEmpty</a><span class="delimiter">)</span>
          <a href="Matrix.scala.html#929658" title="=&gt; MatrixAdditions.this.global.CompilationUnit">cunit</a>.<a href="../CompilationUnits.scala.html#539299" title="(pos: MatrixAdditions.this.global.Position, msg: String)Unit">warning</a><span class="delimiter">(</span><a href="#931939" title="MatrixAdditions.this.global.Position">matchPos</a>, <span title="String(&quot;match is not exhaustive!\n&quot;)" class="string">&quot;match is not exhaustive!\n&quot;</span> <span title="(x$1: Any)String">+</span> <a href="#932535" title="=&gt; String">errMsg</a><span class="delimiter">)</span>

        <a href="#931938" title="MatrixExhaustiveness.this.Rep">rep</a>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>
  <span title="Object" class="delimiter">}</span>
<span title="Object" class="delimiter">}</span>
        </pre>
    </body>
</html>