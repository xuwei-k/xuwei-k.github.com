<?xml version="1.0" encoding="utf-8"?>
      <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <meta http-equiv="Expires" content="0" />
        <title>scala/tools/nsc/matching/PatternBindings.scala</title>
        <script type="text/javascript" src="../../../../jquery-all.js"></script>
        <script type="text/javascript" src="../../../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../../../style.css" title="Style"></link>
    </head>
    <body>
        <pre>
/* NSC -- new Scala compiler
 * Copyright 2005-2013 LAMP/EPFL
 * Author: Paul Phillips
 */

<span class="keyword">package</span> scala.tools.nsc
<span class="keyword">package</span> matching

<span class="keyword">import</span> transform.ExplicitOuter
<span class="keyword">import</span> <a href="../../../PartialFunction.scala.html#130" title="PartialFunction.type">PartialFunction</a>._
<span class="keyword">import</span> scala.<a href="../../../language.scala.html#1423" title="language.type">language</a>.postfixOps

<span class="keyword">trait</span> <a title="trait PatternBindings extends Object with scala.tools.nsc.ast.TreeDSL" id="40932">PatternBindings</a> <a href="../../../Unit.scala.html#1515" title="Unit" class="keyword">extends</a> ast.<a href="../ast/TreeDSL.scala.html#28843" title="scala.tools.nsc.ast.TreeDSL">TreeDSL</a>
<span class="delimiter">{</span>
  self: ExplicitOuter <span class="keyword">with</span> ParallelMatching =&gt;

  <span class="keyword">import</span> <a href="../transform/TypingTransformers.scala.html#621439" title="=&gt; scala.tools.nsc.Global">global</a>.<span class="delimiter">{</span> typer =&gt; _, _ <span class="delimiter">}</span>
  <span class="keyword">import</span> <a href="../../../reflect/internal/Definitions.scala.html#407777" title="PatternBindings.this.global.definitions.type">definitions</a>.<span class="delimiter">{</span> EqualsPatternClass <span class="delimiter">}</span>
  <span class="keyword">import</span> <a href="../ast/TreeDSL.scala.html#538235" title="PatternBindings.this.CODE.type">CODE</a>._
  <span class="keyword">import</span> <a href="MatchSupport.scala.html#621954" title="PatternBindings.this.Debug.type">Debug</a>._

  /** EqualsPattern **/
  <span class="keyword">def</span> <a title="(tpe: PatternBindings.this.global.Type)Boolean" id="621992">isEquals</a><span class="delimiter">(</span><a title="PatternBindings.this.global.Type" id="933844">tpe</a>: <a href="../../../reflect/internal/Types.scala.html#407270" title="PatternBindings.this.global.Type">Type</a><span class="delimiter">)</span>             = <a href="#933844" title="PatternBindings.this.global.Type">tpe</a>.<a href="../../../reflect/internal/Types.scala.html#408407" title="=&gt; PatternBindings.this.global.Symbol">typeSymbol</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="../../../reflect/internal/Definitions.scala.html#408806" title="=&gt; PatternBindings.this.global.ClassSymbol">EqualsPatternClass</a>
  <span class="keyword">def</span> <a title="(tpe: PatternBindings.this.global.Type)PatternBindings.this.global.Type" id="621993">mkEqualsRef</a><span class="delimiter">(</span><a title="PatternBindings.this.global.Type" id="939125">tpe</a>: <a href="../../../reflect/internal/Types.scala.html#407270" title="PatternBindings.this.global.Type">Type</a><span class="delimiter">)</span>          = <a href="../../../reflect/internal/Types.scala.html#407402" title="(pre: PatternBindings.this.global.Type, sym: PatternBindings.this.global.Symbol, args: List[PatternBindings.this.global.Type])PatternBindings.this.global.Type">typeRef</a><span class="delimiter">(</span><a href="../../../reflect/internal/Types.scala.html#407286" title="PatternBindings.this.global.NoPrefix.type">NoPrefix</a>, <a href="../../../reflect/internal/Definitions.scala.html#408806" title="=&gt; PatternBindings.this.global.ClassSymbol">EqualsPatternClass</a>, <a href="../../../collection/immutable/List.scala.html#62451" title="(xs: PatternBindings.this.global.Type*)List[PatternBindings.this.global.Type]">List</a><span class="delimiter">(</span><a href="#939125" title="PatternBindings.this.global.Type">tpe</a><span class="delimiter">)</span><span class="delimiter">)</span>
  <span class="keyword">def</span> <a title="(tpe: PatternBindings.this.global.Type)PatternBindings.this.global.Type" id="621994">decodedEqualsType</a><span class="delimiter">(</span><a title="PatternBindings.this.global.Type" id="928629">tpe</a>: <a href="../../../reflect/internal/Types.scala.html#407270" title="PatternBindings.this.global.Type">Type</a><span class="delimiter">)</span>    =
    <span title="PatternBindings.this.global.Type" class="keyword">if</span> <span class="delimiter">(</span><a href="#928629" title="PatternBindings.this.global.Type">tpe</a>.<a href="../../../reflect/internal/Types.scala.html#408407" title="=&gt; PatternBindings.this.global.Symbol">typeSymbol</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="../../../reflect/internal/Definitions.scala.html#408806" title="=&gt; PatternBindings.this.global.ClassSymbol">EqualsPatternClass</a><span class="delimiter">)</span> <a href="#928629" title="PatternBindings.this.global.Type">tpe</a>.<a href="../../../reflect/internal/Types.scala.html#408421" title="=&gt; List[PatternBindings.this.global.Type]">typeArgs</a>.<a href="../../../collection/IterableLike.scala.html#58577" title="=&gt; PatternBindings.this.global.Type">head</a> <span class="keyword">else</span> <a href="#928629" title="PatternBindings.this.global.Type">tpe</a>

  // A subtype test which creates fresh existentials for type
  // parameters on the right hand side.
  <span class="keyword">def</span> <a title="(arg1: PatternBindings.this.global.Type, arg2: PatternBindings.this.global.Type)Boolean" id="621995">matches</a><span class="delimiter">(</span><a title="PatternBindings.this.global.Type" id="936881">arg1</a>: <a href="../../../reflect/internal/Types.scala.html#407270" title="PatternBindings.this.global.Type">Type</a>, <a title="PatternBindings.this.global.Type" id="936882">arg2</a>: <a href="../../../reflect/internal/Types.scala.html#407270" title="PatternBindings.this.global.Type">Type</a><span class="delimiter">)</span> = <a href="#621994" title="(tpe: PatternBindings.this.global.Type)PatternBindings.this.global.Type">decodedEqualsType</a><span class="delimiter">(</span><a href="#936881" title="PatternBindings.this.global.Type">arg1</a><span class="delimiter">)</span> <a href="../../../reflect/internal/Types.scala.html#408482" title="(that: PatternBindings.this.global.Type)Boolean">matchesPattern</a> <a href="#621994" title="(tpe: PatternBindings.this.global.Type)PatternBindings.this.global.Type">decodedEqualsType</a><span class="delimiter">(</span><a href="#936882" title="PatternBindings.this.global.Type">arg2</a><span class="delimiter">)</span>

  // For spotting duplicate unapplies
  <span class="keyword">def</span> <a title="(t1: PatternBindings.this.global.Tree, t2: PatternBindings.this.global.Tree)Boolean" id="621996">isEquivalentTree</a><span class="delimiter">(</span><a title="PatternBindings.this.global.Tree" id="935212">t1</a>: <a href="../../../reflect/internal/Trees.scala.html#407938" title="PatternBindings.this.global.Tree">Tree</a>, <a title="PatternBindings.this.global.Tree" id="935213">t2</a>: <a href="../../../reflect/internal/Trees.scala.html#407938" title="PatternBindings.this.global.Tree">Tree</a><span class="delimiter">)</span> = <span class="delimiter">(</span><a href="#935212" title="PatternBindings.this.global.Tree">t1</a>.<a href="../../../reflect/internal/Trees.scala.html#408577" title="=&gt; PatternBindings.this.global.Symbol">symbol</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="#935213" title="PatternBindings.this.global.Tree">t2</a>.<a href="../../../reflect/internal/Trees.scala.html#408577" title="=&gt; PatternBindings.this.global.Symbol">symbol</a><span class="delimiter">)</span> <a href="../../../Boolean.scala.html#57826" title="(x: Boolean)Boolean">&amp;&amp;</a> <span class="delimiter">(</span><a href="#935212" title="PatternBindings.this.global.Tree">t1</a> <a href="../../../reflect/internal/Trees.scala.html#408547" title="(that: PatternBindings.this.global.Tree)Boolean">equalsStructure</a> <a href="#935213" title="PatternBindings.this.global.Tree">t2</a><span class="delimiter">)</span>

  // Reproduce the Bind trees wrapping oldTree around newTree
  <span class="keyword">def</span> <a title="(oldTree: PatternBindings.this.global.Tree, newTree: PatternBindings.this.global.Tree)PatternBindings.this.global.Tree" id="621997">moveBindings</a><span class="delimiter">(</span><a title="PatternBindings.this.global.Tree" id="939141">oldTree</a>: <a href="../../../reflect/internal/Trees.scala.html#407938" title="PatternBindings.this.global.Tree">Tree</a>, <a title="PatternBindings.this.global.Tree" id="939142">newTree</a>: <a href="../../../reflect/internal/Trees.scala.html#407938" title="PatternBindings.this.global.Tree">Tree</a><span class="delimiter">)</span>: <a href="../../../reflect/internal/Trees.scala.html#407938" title="PatternBindings.this.global.Tree">Tree</a> = <a href="#939141" title="PatternBindings.this.global.Tree">oldTree</a> <span class="keyword">match</span> <span class="delimiter">{</span>
    <span class="keyword">case</span> b @ Bind<a href="#3337826" title="PatternBindings.this.global.Tree" id="3337828" class="delimiter">(</a><a href="../../../reflect/internal/Trees.scala.html#410157" title="PatternBindings.this.global.Name" id="939153">x</a>, <a href="../../../reflect/internal/Trees.scala.html#410159" title="PatternBindings.this.global.Tree" id="939154">body</a><span class="delimiter">)</span>  =&gt; <a href="../../../reflect/internal/Trees.scala.html#408115" title="(sym: PatternBindings.this.global.Symbol, body: PatternBindings.this.global.Tree)PatternBindings.this.global.Bind">Bind</a><a href="#3337830" title="(x: PatternBindings.this.global.Tree)PatternBindings.this.global.Tree" class="delimiter">(</a>b.<a href="../../../reflect/internal/Trees.scala.html#409939" title="=&gt; PatternBindings.this.global.Symbol">symbol</a>, <a href="#621997" title="(oldTree: PatternBindings.this.global.Tree, newTree: PatternBindings.this.global.Tree)PatternBindings.this.global.Tree">moveBindings</a><span class="delimiter">(</span><a href="#939154" title="PatternBindings.this.global.Tree">body</a>, <a href="#939142" title="PatternBindings.this.global.Tree">newTree</a><span class="delimiter">)</span><span class="delimiter">)</span>
    <span class="keyword">case</span> _                  =&gt; <a href="#3337830" title="(x: PatternBindings.this.global.Tree)PatternBindings.this.global.Tree">newTree</a>
  <span class="delimiter">}</span>

  // used as argument to `EqualsPatternClass`
  case <span class="keyword">class</span> <a title="class PseudoType extends PatternBindings.this.global.Type with PatternBindings.this.global.SimpleTypeProxy with Product with Serializable" id="939601">PseudoType</a><a href="../../../Product.scala.html#186" title="Product" class="delimiter">(</a><a title="PatternBindings.this.global.Tree" id="939598">o</a>: <a href="../../../reflect/internal/Trees.scala.html#407938" title="PatternBindings.this.global.Tree">Tree</a><span class="delimiter">)</span> <span class="keyword">extends</span> <a href="../../../reflect/internal/Types.scala.html#407265" title="PatternBindings.this.global.SimpleTypeProxy">SimpleTypeProxy</a> <span class="delimiter">{</span>
    <span class="keyword">override</span> <span class="keyword">def</span> <a title="=&gt; PatternBindings.this.global.Type" id="936648">underlying</a>: <a href="../../../reflect/internal/Types.scala.html#407270" title="PatternBindings.this.global.Type">Type</a> = <a href="#939598" title="=&gt; PatternBindings.this.global.Tree">o</a>.<a href="../../../reflect/internal/Trees.scala.html#408573" title="=&gt; PatternBindings.this.global.Type">tpe</a>
    <span class="keyword">override</span> <span class="keyword">def</span> <a title="=&gt; String" id="936649">safeToString</a>: <span title="String">String</span> = <span title="String(&quot;PseudoType(&quot;)" class="string">&quot;PseudoType(&quot;</span><span title="(x$1: Any)String">+</span><a href="#939598" title="=&gt; PatternBindings.this.global.Tree">o</a><span title="(x$1: Any)String">+</span><span title="String(&quot;)&quot;)" class="string">&quot;)&quot;</span>
  <span class="delimiter">}</span>

  // If the given pattern contains alternatives, return it as a list of patterns.
  // Makes typed copies of any bindings found so all alternatives point to final state.
  <span class="keyword">def</span> <a title="(p: PatternBindings.this.Pattern)List[PatternBindings.this.Pattern]" id="622001">extractBindings</a><span class="delimiter">(</span><a title="PatternBindings.this.Pattern" id="937855">p</a>: <a href="Patterns.scala.html#621931" title="PatternBindings.this.Pattern">Pattern</a><span class="delimiter">)</span>: <a href="../../../collection/immutable/List.scala.html#11952" title="List[PatternBindings.this.Pattern]">List</a><span class="delimiter">[</span>Pattern<span class="delimiter">]</span> =
    <a href="ParallelMatching.scala.html#621941" title="(xs: List[PatternBindings.this.global.Tree])List[PatternBindings.this.Pattern]">toPats</a><span class="delimiter">(</span><a href="#622002" title="(p: PatternBindings.this.global.Tree, prevBindings: PatternBindings.this.global.Tree =&gt; PatternBindings.this.global.Tree)List[PatternBindings.this.global.Tree]">_extractBindings</a><span class="delimiter">(</span><a href="#937855" title="PatternBindings.this.Pattern">p</a>.<a href="#932013" title="=&gt; PatternBindings.this.global.Tree">boundTree</a>, <a href="../../../Predef.scala.html#7469" title="(x: PatternBindings.this.global.Tree)PatternBindings.this.global.Tree">identity</a><span class="delimiter">)</span><span class="delimiter">)</span>

  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(p: PatternBindings.this.global.Tree, prevBindings: PatternBindings.this.global.Tree =&gt; PatternBindings.this.global.Tree)List[PatternBindings.this.global.Tree]" id="622002">_extractBindings</a><span class="delimiter">(</span><a title="PatternBindings.this.global.Tree" id="939206">p</a>: <a href="../../../reflect/internal/Trees.scala.html#407938" title="PatternBindings.this.global.Tree">Tree</a>, <a title="PatternBindings.this.global.Tree =&gt; PatternBindings.this.global.Tree" id="939207">prevBindings</a>: Tree =&gt; Tree<span class="delimiter">)</span>: <a href="../../../collection/immutable/List.scala.html#11952" title="List[PatternBindings.this.global.Tree]">List</a><span class="delimiter">[</span>Tree<span class="delimiter">]</span> = <span class="delimiter">{</span>
    <span class="keyword">def</span> <a title="(b: PatternBindings.this.global.Bind)PatternBindings.this.global.Tree =&gt; PatternBindings.this.global.Bind" id="939216">newPrev</a><span class="delimiter">(</span><a title="PatternBindings.this.global.Bind" id="939217">b</a>: <a href="../../../reflect/internal/Trees.scala.html#407993" title="PatternBindings.this.global.Bind">Bind</a><span class="delimiter">)</span> = <span class="delimiter">(</span>x: <a href="../../../reflect/internal/Trees.scala.html#407938" title="PatternBindings.this.global.Tree">Tree</a><span class="delimiter">)</span> =&gt; <a href="../../../reflect/api/Trees.scala.html#56462" title="=&gt; PatternBindings.this.global.TreeCopier">treeCopy</a>.<a href="../../../reflect/api/Trees.scala.html#405384" title="(tree: PatternBindings.this.global.Tree, name: PatternBindings.this.global.Name, body: PatternBindings.this.global.Tree)PatternBindings.this.global.Bind">Bind</a><span class="delimiter">(</span><a href="#939217" title="PatternBindings.this.global.Bind">b</a>, <a href="#939217" title="PatternBindings.this.global.Bind">b</a>.<a href="../../../reflect/internal/Trees.scala.html#410157" title="=&gt; PatternBindings.this.global.Name">name</a>, <a href="#939219" title="PatternBindings.this.global.Tree">x</a><span class="delimiter">)</span> <a href="../../../reflect/internal/Trees.scala.html#408575" title="(tp: PatternBindings.this.global.Type)PatternBindings.this.global.Bind">setType</a> <a href="#939219" title="PatternBindings.this.global.Tree">x</a>.<a href="../../../reflect/internal/Trees.scala.html#408573" title="=&gt; PatternBindings.this.global.Type">tpe</a>

    <a href="#939206" title="PatternBindings.this.global.Tree">p</a> <span class="keyword">match</span> <span class="delimiter">{</span>
      <span class="keyword">case</span> b @ Bind<a href="#3337840" title="List[PatternBindings.this.global.Tree]" id="3337843" class="delimiter">(</a><a href="../../../reflect/internal/Trees.scala.html#410157" title="PatternBindings.this.global.Name" id="3337841">_</a>, <a href="../../../reflect/internal/Trees.scala.html#410159" title="PatternBindings.this.global.Tree" id="939234">body</a><span class="delimiter">)</span>  =&gt; <a href="#622002" title="(p: PatternBindings.this.global.Tree, prevBindings: PatternBindings.this.global.Tree =&gt; PatternBindings.this.global.Tree)List[PatternBindings.this.global.Tree]">_extractBindings</a><a href="#3337847" title="(x: List[PatternBindings.this.global.Tree])List[PatternBindings.this.global.Tree]" class="delimiter">(</a><a href="#939234" title="PatternBindings.this.global.Tree">body</a>, <a href="#939216" title="(b: PatternBindings.this.global.Bind)PatternBindings.this.global.Tree =&gt; PatternBindings.this.global.Bind">newPrev</a><span class="delimiter">(</span>b<span class="delimiter">)</span><span class="delimiter">)</span>
      <span class="keyword">case</span> Alternative<a href="#3337840" title="List[PatternBindings.this.global.Tree]" id="3337845" class="delimiter">(</a><a href="../../../reflect/internal/Trees.scala.html#410172" title="List[PatternBindings.this.global.Tree]" id="939236">ps</a><span class="delimiter">)</span>    =&gt; <a href="#939236" title="List[PatternBindings.this.global.Tree]">ps</a> <a href="#3337847" title="(x: List[PatternBindings.this.global.Tree])List[PatternBindings.this.global.Tree]">map</a> <a href="#939207" title="PatternBindings.this.global.Tree =&gt; PatternBindings.this.global.Tree">prevBindings</a>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="keyword">trait</span> <a title="trait PatternBindingLogic extends Object" id="622003">PatternBindingLogic</a> <a href="../../../Unit.scala.html#1515" title="Unit" class="delimiter">{</a>
    self: Pattern =&gt;

    // This is for traversing the pattern tree - pattern types which might have
    // bound variables beneath them return a list of said patterns for flatMapping.
    <span class="keyword">def</span> <a title="=&gt; List[PatternBindings.this.Pattern]" id="932009">subpatternsForVars</a>: <a href="../../../collection/immutable/List.scala.html#11952" title="List[PatternBindings.this.Pattern]">List</a><span class="delimiter">[</span>Pattern<span class="delimiter">]</span> = <a href="../../../collection/immutable/List.scala.html#11188" title="scala.collection.immutable.Nil.type">Nil</a>

    // The outermost Bind(x1, Bind(x2, ...)) surrounding the tree.
    <span class="keyword">private</span> <span class="keyword">var</span> <a title="PatternBindings.this.global.Tree" id="932011">_boundTree</a>: <a href="../../../reflect/internal/Trees.scala.html#407938" title="PatternBindings.this.global.Tree">Tree</a> = <a href="Patterns.scala.html#932025" title="=&gt; PatternBindings.this.global.Tree">tree</a>
    <span class="keyword">def</span> <a title="=&gt; PatternBindings.this.global.Tree" id="932013">boundTree</a> = <a href="#932011" title="=&gt; PatternBindings.this.global.Tree">_boundTree</a>
    <span class="keyword">def</span> <a title="(x: PatternBindings.this.global.Bind)PatternBindings.this.Pattern" id="932014">setBound</a><span class="delimiter">(</span><a title="PatternBindings.this.global.Bind" id="939288">x</a>: <a href="../../../reflect/internal/Trees.scala.html#407993" title="PatternBindings.this.global.Bind">Bind</a><span class="delimiter">)</span>: <a href="Patterns.scala.html#621931" title="PatternBindings.this.Pattern">Pattern</a> = <span class="delimiter">{</span>
      <a href="#932011" title="(x$1: PatternBindings.this.global.Tree)Unit">_boundTree</a> = <a href="#939288" title="PatternBindings.this.global.Bind">x</a>
      <a href="#622003" title="PatternBindings.this.Pattern" class="keyword">this</a>
    <span class="delimiter">}</span>
    <span class="keyword">def</span> <a title="=&gt; List[PatternBindings.this.global.Symbol]" id="932015">boundVariables</a> = <a href="#932022" title="(t: PatternBindings.this.global.Tree)List[PatternBindings.this.global.Symbol]">strip</a><span class="delimiter">(</span><a href="#932013" title="=&gt; PatternBindings.this.global.Tree">boundTree</a><span class="delimiter">)</span>

    // If a tree has bindings, boundTree looks something like
    //   Bind(v3, Bind(v2, Bind(v1, tree)))
    // This takes the given tree and creates a new pattern
    //   using the same bindings.
    <span class="keyword">def</span> <a title="(t: PatternBindings.this.global.Tree)PatternBindings.this.Pattern" id="932016">rebindTo</a><span class="delimiter">(</span><a title="PatternBindings.this.global.Tree" id="936021">t</a>: <a href="../../../reflect/internal/Trees.scala.html#407938" title="PatternBindings.this.global.Tree">Tree</a><span class="delimiter">)</span>: <a href="Patterns.scala.html#621931" title="PatternBindings.this.Pattern">Pattern</a> = <a href="Patterns.scala.html#932615" title="(tree: PatternBindings.this.global.Tree)PatternBindings.this.Pattern">Pattern</a><span class="delimiter">(</span><a href="#621997" title="(oldTree: PatternBindings.this.global.Tree, newTree: PatternBindings.this.global.Tree)PatternBindings.this.global.Tree">moveBindings</a><span class="delimiter">(</span><a href="#932013" title="=&gt; PatternBindings.this.global.Tree">boundTree</a>, <a href="#936021" title="PatternBindings.this.global.Tree">t</a><span class="delimiter">)</span><span class="delimiter">)</span>

    // Wrap this pattern's bindings around (_: Type)
    <span class="keyword">def</span> <a title="(tpe: PatternBindings.this.global.Type, ascription: PatternBindings.this.global.Type)PatternBindings.this.Pattern" id="932017">rebindToType</a><span class="delimiter">(</span><a title="PatternBindings.this.global.Type" id="939290">tpe</a>: <a href="../../../reflect/internal/Types.scala.html#407270" title="PatternBindings.this.global.Type">Type</a>, <a title="PatternBindings.this.global.Type" id="939292">ascription</a>: <a href="../../../reflect/internal/Types.scala.html#407270" title="PatternBindings.this.global.Type">Type</a> = <span title="Null(null)" class="keyword">null</span><span class="delimiter">)</span>: <a href="Patterns.scala.html#621931" title="PatternBindings.this.Pattern">Pattern</a> = <span class="delimiter">{</span>
      <span class="keyword">val</span> <a title="PatternBindings.this.global.Type" id="939293">aType</a> = <span title="PatternBindings.this.global.Type" class="keyword">if</span> <span class="delimiter">(</span><a href="#939292" title="PatternBindings.this.global.Type">ascription</a> <span title="(x$1: AnyRef)Boolean">==</span> <span title="Null(null)" class="keyword">null</span><span class="delimiter">)</span> <a href="#939290" title="PatternBindings.this.global.Type">tpe</a> <span class="keyword">else</span> <a href="#939292" title="PatternBindings.this.global.Type">ascription</a>
      <a href="#932016" title="(t: PatternBindings.this.global.Tree)PatternBindings.this.Pattern">rebindTo</a><span class="delimiter">(</span><a href="../../../reflect/internal/Trees.scala.html#453846" title="(expr: PatternBindings.this.global.Tree, tpt: PatternBindings.this.global.Tree)PatternBindings.this.global.Typed">Typed</a><span class="delimiter">(</span><a href="../ast/TreeDSL.scala.html#662561" title="(tpe: PatternBindings.this.global.Type)PatternBindings.this.global.Ident">WILD</a><span class="delimiter">(</span><a href="#939290" title="PatternBindings.this.global.Type">tpe</a><span class="delimiter">)</span>, <a href="../../../reflect/internal/Trees.scala.html#408087" title="(tp: PatternBindings.this.global.Type)PatternBindings.this.global.TypeTree">TypeTree</a><span class="delimiter">(</span><a href="#939293" title="PatternBindings.this.global.Type">aType</a><span class="delimiter">)</span><span class="delimiter">)</span> <a href="../../../reflect/internal/Trees.scala.html#408575" title="(tp: PatternBindings.this.global.Type)PatternBindings.this.global.Typed">setType</a> <a href="#939290" title="PatternBindings.this.global.Type">tpe</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>

    // Wrap them around _
    <span class="keyword">def</span> <a title="(tpe: PatternBindings.this.global.Type)PatternBindings.this.Pattern" id="932018">rebindToEmpty</a><span class="delimiter">(</span><a title="PatternBindings.this.global.Type" id="939313">tpe</a>: <a href="../../../reflect/internal/Types.scala.html#407270" title="PatternBindings.this.global.Type">Type</a><span class="delimiter">)</span>: <a href="Patterns.scala.html#621931" title="PatternBindings.this.Pattern">Pattern</a> =
      <a href="#932016" title="(t: PatternBindings.this.global.Tree)PatternBindings.this.Pattern">rebindTo</a><span class="delimiter">(</span><a href="../../../reflect/internal/Trees.scala.html#453846" title="(expr: PatternBindings.this.global.Tree, tpt: PatternBindings.this.global.Tree)PatternBindings.this.global.Typed">Typed</a><span class="delimiter">(</span><a href="../../../reflect/internal/Trees.scala.html#407946" title="PatternBindings.this.global.EmptyTree.type">EmptyTree</a>, <a href="../../../reflect/internal/Trees.scala.html#408087" title="(tp: PatternBindings.this.global.Type)PatternBindings.this.global.TypeTree">TypeTree</a><span class="delimiter">(</span><a href="#939313" title="PatternBindings.this.global.Type">tpe</a><span class="delimiter">)</span><span class="delimiter">)</span> <a href="../../../reflect/internal/Trees.scala.html#408575" title="(tp: PatternBindings.this.global.Type)PatternBindings.this.global.Typed">setType</a> <a href="#939313" title="PatternBindings.this.global.Type">tpe</a><span class="delimiter">)</span>

    // Wrap them around a singleton type for an EqualsPattern check.
    <span class="keyword">def</span> <a title="()PatternBindings.this.Pattern" id="932019">rebindToEqualsCheck</a><span class="delimiter">(</span><span class="delimiter">)</span>: <a href="Patterns.scala.html#621931" title="PatternBindings.this.Pattern">Pattern</a> =
      <a href="#932017" title="(tpe: PatternBindings.this.global.Type, ascription: PatternBindings.this.global.Type)PatternBindings.this.Pattern">rebindToType</a><span class="delimiter">(</span><a href="Patterns.scala.html#932042" title="=&gt; PatternBindings.this.global.Type">equalsCheck</a><span class="delimiter">)</span>

    // Like rebindToEqualsCheck, but subtly different.  Not trying to be
    // mysterious -- I haven't sorted it all out yet.
    <span class="keyword">def</span> <a title="()PatternBindings.this.Pattern" id="932020">rebindToObjectCheck</a><span class="delimiter">(</span><span class="delimiter">)</span>: <a href="Patterns.scala.html#621931" title="PatternBindings.this.Pattern">Pattern</a> =
      <a href="#932017" title="(tpe: PatternBindings.this.global.Type, ascription: PatternBindings.this.global.Type)PatternBindings.this.Pattern">rebindToType</a><span class="delimiter">(</span><a href="#621993" title="(tpe: PatternBindings.this.global.Type)PatternBindings.this.global.Type">mkEqualsRef</a><span class="delimiter">(</span><a href="Patterns.scala.html#932030" title="=&gt; PatternBindings.this.global.Type">sufficientType</a><span class="delimiter">)</span>, <a href="Patterns.scala.html#932030" title="=&gt; PatternBindings.this.global.Type">sufficientType</a><span class="delimiter">)</span>

    /** Helpers **/
    <span class="keyword">private</span> <span class="keyword">def</span> <a title="(vs: List[PatternBindings.this.global.Symbol], pat: PatternBindings.this.global.Tree)PatternBindings.this.global.Tree" id="932021">wrapBindings</a><span class="delimiter">(</span><a title="List[PatternBindings.this.global.Symbol]" id="939338">vs</a>: <a href="../../../collection/immutable/List.scala.html#11952" title="List[PatternBindings.this.global.Symbol]">List</a><span class="delimiter">[</span>Symbol<span class="delimiter">]</span>, <a title="PatternBindings.this.global.Tree" id="939339">pat</a>: <a href="../../../reflect/internal/Trees.scala.html#407938" title="PatternBindings.this.global.Tree">Tree</a><span class="delimiter">)</span>: <a href="../../../reflect/internal/Trees.scala.html#407938" title="PatternBindings.this.global.Tree">Tree</a> = <a href="#939338" title="List[PatternBindings.this.global.Symbol]">vs</a> <span class="keyword">match</span> <span class="delimiter">{</span>
      <span class="keyword">case</span> <a href="../../../collection/immutable/List.scala.html#11188" title="PatternBindings.this.global.Tree" id="3337855">Nil</a>      =&gt; <a href="#3337857" title="(x: PatternBindings.this.global.Tree)PatternBindings.this.global.Tree">pat</a>
      <span class="keyword">case</span> <a href="../../../collection/immutable/List.scala.html#206583" title="PatternBindings.this.global.Symbol" id="939342">x</a> <a href="#3337852" title="PatternBindings.this.global.Tree" id="3337854">::</a> <a href="../../../collection/immutable/List.scala.html#206584" title="List[PatternBindings.this.global.Symbol]" id="939343">xs</a>  =&gt; <a href="../../../reflect/internal/Trees.scala.html#408115" title="(sym: PatternBindings.this.global.Symbol, body: PatternBindings.this.global.Tree)PatternBindings.this.global.Bind">Bind</a><span class="delimiter">(</span><a href="#939342" title="PatternBindings.this.global.Symbol">x</a>, <a href="#932021" title="(vs: List[PatternBindings.this.global.Symbol], pat: PatternBindings.this.global.Tree)PatternBindings.this.global.Tree">wrapBindings</a><span class="delimiter">(</span><a href="#939343" title="List[PatternBindings.this.global.Symbol]">xs</a>, <a href="#939339" title="PatternBindings.this.global.Tree">pat</a><span class="delimiter">)</span><span class="delimiter">)</span> <a href="#3337857" title="(x: PatternBindings.this.global.Tree)PatternBindings.this.global.Tree">setType</a> <a href="#939339" title="PatternBindings.this.global.Tree">pat</a>.<a href="../../../reflect/internal/Trees.scala.html#408573" title="=&gt; PatternBindings.this.global.Type">tpe</a>
    <span class="delimiter">}</span>
    <span class="keyword">private</span> <span class="keyword">def</span> <a title="(t: PatternBindings.this.global.Tree)List[PatternBindings.this.global.Symbol]" id="932022">strip</a><span class="delimiter">(</span><a title="PatternBindings.this.global.Tree" id="934441">t</a>: <a href="../../../reflect/internal/Trees.scala.html#407938" title="PatternBindings.this.global.Tree">Tree</a><span class="delimiter">)</span>: <a href="../../../collection/immutable/List.scala.html#11952" title="List[PatternBindings.this.global.Symbol]">List</a><span class="delimiter">[</span>Symbol<span class="delimiter">]</span> = <a href="#934441" title="PatternBindings.this.global.Tree">t</a> <span class="keyword">match</span> <span class="delimiter">{</span>
      <span class="keyword">case</span> b @ Bind<a href="#3337865" title="List[PatternBindings.this.global.Symbol]" id="3337868" class="delimiter">(</a><a href="../../../reflect/internal/Trees.scala.html#410157" title="PatternBindings.this.global.Name" id="3337866">_</a>, <a href="../../../reflect/internal/Trees.scala.html#410159" title="PatternBindings.this.global.Tree" id="939371">pat</a><span class="delimiter">)</span> =&gt; b.<a href="../../../reflect/internal/Trees.scala.html#409939" title="=&gt; PatternBindings.this.global.Symbol">symbol</a> <a href="#3337870" title="(x: List[PatternBindings.this.global.Symbol])List[PatternBindings.this.global.Symbol]">::</a> <a href="#932022" title="(t: PatternBindings.this.global.Tree)List[PatternBindings.this.global.Symbol]">strip</a><span class="delimiter">(</span><a href="#939371" title="PatternBindings.this.global.Tree">pat</a><span class="delimiter">)</span>
      <span class="keyword">case</span> _                =&gt; <a href="#3337870" title="(x: List[PatternBindings.this.global.Symbol])List[PatternBindings.this.global.Symbol]">Nil</a>
    <span class="delimiter">}</span>
    <span class="keyword">private</span> <span class="keyword">def</span> <a title="(t: PatternBindings.this.global.Tree)List[PatternBindings.this.global.Symbol]" id="932023">deepstrip</a><span class="delimiter">(</span><a title="PatternBindings.this.global.Tree" id="939378">t</a>: <a href="../../../reflect/internal/Trees.scala.html#407938" title="PatternBindings.this.global.Tree">Tree</a><span class="delimiter">)</span>: <a href="../../../collection/immutable/List.scala.html#11952" title="List[PatternBindings.this.global.Symbol]">List</a><span class="delimiter">[</span>Symbol<span class="delimiter">]</span> =
      <a href="MatchSupport.scala.html#621949" title="(tree: PatternBindings.this.global.Tree, pf: PartialFunction[PatternBindings.this.global.Tree,PatternBindings.this.global.Symbol])List[PatternBindings.this.global.Symbol]">treeCollect</a><span class="delimiter">(</span><a href="#939378" title="PatternBindings.this.global.Tree">t</a>, <a title="anonymous class $anonfun extends scala.runtime.AbstractPartialFunction[PatternBindings.this.global.Tree,PatternBindings.this.global.Symbol] with Serializable" id="939392" class="delimiter">{</a> <span class="keyword">case</span> <a href="#3337875" title="B1" id="3337888">x</a>: Bind =&gt; x.<a href="#3337881" title="(x: B1)B1">symbol</a> <span class="delimiter">}</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  case <span class="keyword">class</span> <a title="class Binding extends AnyRef with Product with Serializable" id="939605">Binding</a><a href="../../../Product.scala.html#186" title="Product" class="delimiter">(</a><a title="PatternBindings.this.global.Symbol" id="939501">pvar</a>: <a href="../../../reflect/internal/Symbols.scala.html#407146" title="PatternBindings.this.global.Symbol">Symbol</a>, <a title="PatternBindings.this.global.Symbol" id="939502">tvar</a>: <a href="../../../reflect/internal/Symbols.scala.html#407146" title="PatternBindings.this.global.Symbol">Symbol</a><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span class="keyword">override</span> <span class="keyword">def</span> <a title="()String" id="930856">toString</a><span class="delimiter">(</span><span class="delimiter">)</span> = <a href="#939501" title="=&gt; PatternBindings.this.global.Symbol">pvar</a>.<a href="../../../Predef.scala.html#7605" title="implicit scala.Predef.any2stringadd : (x: Any)scala.runtime.StringAdd">name</a> <a href="../../../runtime/StringAdd.scala.html#60046" title="(other: String)String">+</a> <span title="String(&quot; -&gt; &quot;)" class="string">&quot; -&gt; &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#939502" title="=&gt; PatternBindings.this.global.Symbol">tvar</a>.<a href="../../../reflect/internal/Symbols.scala.html#411087" title="=&gt; Binding.this.tvar.NameType">name</a>
  <span class="delimiter">}</span>

  <span class="keyword">class</span> <a title="class Bindings extends Object" id="622007">Bindings</a><a href="#622007" title="PatternBindings.this.Bindings" class="delimiter">(</a><span class="keyword">private</span> <span class="keyword">val</span> <a title="List[PatternBindings.this.Binding]" id="939479">vlist</a>: <a href="../../../collection/immutable/List.scala.html#11952" title="List[PatternBindings.this.Binding]">List</a><span class="delimiter">[</span>Binding<span class="delimiter">]</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    // if (!vlist.isEmpty)
    //   traceCategory(&quot;Bindings&quot;, this.toString)

    <span class="keyword">def</span> <a title="()List[PatternBindings.this.Binding]" id="934199">get</a><span class="delimiter">(</span><span class="delimiter">)</span> = <a href="#939479" title="=&gt; List[PatternBindings.this.Binding]">vlist</a>
    <span class="keyword">def</span> <a title="=&gt; scala.collection.immutable.Map[PatternBindings.this.global.Symbol,PatternBindings.this.global.Symbol]" id="934200">toMap</a> = <a href="#939479" title="=&gt; List[PatternBindings.this.Binding]">vlist</a> <a href="../../../collection/TraversableLike.scala.html#58063" title="(f: PatternBindings.this.Binding =&gt; (PatternBindings.this.global.Symbol, PatternBindings.this.global.Symbol))(implicit bf: scala.collection.generic.CanBuildFrom[List[PatternBindings.this.Binding],(PatternBindings.this.global.Symbol, PatternBindings.this.global.Symbol),List[(PatternBindings.this.global.Symbol, PatternBindings.this.global.Symbol)]])List[(PatternBindings.this.global.Symbol, PatternBindings.this.global.Symbol)]">map</a> <span class="delimiter">(</span><a title="PatternBindings.this.Binding" id="934235">x</a> =&gt; <a href="../../../Tuple2.scala.html#62849" title="(_1: PatternBindings.this.global.Symbol, _2: PatternBindings.this.global.Symbol)(PatternBindings.this.global.Symbol, PatternBindings.this.global.Symbol)" class="delimiter">(</a><a href="#934235" title="PatternBindings.this.Binding">x</a>.<a href="#939501" title="=&gt; PatternBindings.this.global.Symbol">pvar</a>, <a href="#934235" title="PatternBindings.this.Binding">x</a>.<a href="#939502" title="=&gt; PatternBindings.this.global.Symbol">tvar</a><span class="delimiter">)</span><span class="delimiter">)</span> <a href="../../../collection/TraversableOnce.scala.html#58277" title="(implicit ev: &lt;:&lt;[(PatternBindings.this.global.Symbol, PatternBindings.this.global.Symbol),(PatternBindings.this.global.Symbol, PatternBindings.this.global.Symbol)])scala.collection.immutable.Map[PatternBindings.this.global.Symbol,PatternBindings.this.global.Symbol]">toMap</a>

    <span class="keyword">def</span> <a title="(vs: Iterable[PatternBindings.this.global.Symbol], tvar: PatternBindings.this.global.Symbol)PatternBindings.this.Bindings" id="934201">add</a><span class="delimiter">(</span><a title="Iterable[PatternBindings.this.global.Symbol]" id="934481">vs</a>: <a href="../../../collection/Iterable.scala.html#4163" title="Iterable[PatternBindings.this.global.Symbol]">Iterable</a><span class="delimiter">[</span>Symbol<span class="delimiter">]</span>, <a title="PatternBindings.this.global.Symbol" id="934482">tvar</a>: <a href="../../../reflect/internal/Symbols.scala.html#407146" title="PatternBindings.this.global.Symbol">Symbol</a><span class="delimiter">)</span>: <a href="#622007" title="PatternBindings.this.Bindings">Bindings</a> = <span class="delimiter">{</span>
      <span class="keyword">val</span> <a title="List[PatternBindings.this.Binding]" id="939480">newBindings</a> = <a href="#934481" title="Iterable[PatternBindings.this.global.Symbol]">vs</a>.<a href="../../../collection/TraversableOnce.scala.html#58263" title="=&gt; List[PatternBindings.this.global.Symbol]">toList</a> <a href="../../../collection/TraversableLike.scala.html#58063" title="(f: PatternBindings.this.global.Symbol =&gt; PatternBindings.this.Binding)(implicit bf: scala.collection.generic.CanBuildFrom[List[PatternBindings.this.global.Symbol],PatternBindings.this.Binding,List[PatternBindings.this.Binding]])List[PatternBindings.this.Binding]">map</a> <span class="delimiter">(</span><a title="PatternBindings.this.global.Symbol" id="939500">v</a> =&gt; <a href="#939605" title="(pvar: PatternBindings.this.global.Symbol, tvar: PatternBindings.this.global.Symbol)PatternBindings.this.Binding">Binding</a><span class="delimiter">(</span><a href="#939500" title="PatternBindings.this.global.Symbol">v</a>, <a href="#934482" title="PatternBindings.this.global.Symbol">tvar</a><span class="delimiter">)</span><span class="delimiter">)</span>
      <span title="PatternBindings.this.Bindings" class="keyword">new</span> <a href="#622007" title="PatternBindings.this.Bindings">Bindings</a><span class="delimiter">(</span><a href="#939480" title="List[PatternBindings.this.Binding]">newBindings</a> <a href="../../../collection/immutable/List.scala.html#62697" title="(that: scala.collection.GenTraversableOnce[PatternBindings.this.Binding])(implicit bf: scala.collection.generic.CanBuildFrom[List[PatternBindings.this.Binding],PatternBindings.this.Binding,List[PatternBindings.this.Binding]])List[PatternBindings.this.Binding]">++</a> <a href="#939479" title="=&gt; List[PatternBindings.this.Binding]">vlist</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>

    <span class="keyword">override</span> <span class="keyword">def</span> <a title="()String" id="934202">toString</a><span class="delimiter">(</span><span class="delimiter">)</span> =
      <span title="String" class="keyword">if</span> <span class="delimiter">(</span><a href="#939479" title="=&gt; List[PatternBindings.this.Binding]">vlist</a>.<a href="../../../collection/SeqLike.scala.html#58787" title="=&gt; Boolean">isEmpty</a><span class="delimiter">)</span> <span title="String(&quot;&lt;none&gt;&quot;)" class="string">&quot;&lt;none&gt;&quot;</span>
      <span class="keyword">else</span> <a href="#939479" title="=&gt; List[PatternBindings.this.Binding]">vlist</a>.<a href="../../../collection/TraversableOnce.scala.html#58283" title="(sep: String)String">mkString</a><span class="delimiter">(</span><span title="String(&quot;, &quot;)" class="string">&quot;, &quot;</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">val</span> <a title="PatternBindings.this.Bindings" id="622008">NoBinding</a>: <a href="#622007" title="PatternBindings.this.Bindings">Bindings</a> = <span title="PatternBindings.this.Bindings" class="keyword">new</span> <a href="#622007" title="PatternBindings.this.Bindings">Bindings</a><span class="delimiter">(</span><a href="../../../collection/immutable/List.scala.html#11188" title="scala.collection.immutable.Nil.type">Nil</a><span class="delimiter">)</span>
<span class="delimiter">}</span>

        </pre>
    </body>
</html>