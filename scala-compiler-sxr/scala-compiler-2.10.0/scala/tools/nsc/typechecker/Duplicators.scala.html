<?xml version="1.0" encoding="utf-8"?>
      <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <meta http-equiv="Expires" content="0" />
        <title>scala/tools/nsc/typechecker/Duplicators.scala</title>
        <script type="text/javascript" src="../../../../jquery-all.js"></script>
        <script type="text/javascript" src="../../../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../../../style.css" title="Style"></link>
    </head>
    <body>
        <pre>
/* NSC -- new Scala compiler
 * Copyright 2005-2013 LAMP/EPFL
 * @author  Martin Odersky
 */

<span class="keyword">package</span> scala.tools.nsc
<span class="keyword">package</span> typechecker

<span class="keyword">import</span> scala.tools.nsc.symtab.Flags
<span class="keyword">import</span> scala.collection.<span class="delimiter">{</span> mutable, immutable <span class="delimiter">}</span>

/** Duplicate trees and re-type check them, taking care to replace
 *  and create fresh symbols for new local definitions.
 *
 *  @author  Iulian Dragos
 *  @version 1.0
 */
<span class="keyword">abstract</span> <span class="keyword">class</span> <a title="class Duplicators extends Object with scala.tools.nsc.typechecker.Analyzer" id="48161">Duplicators</a> <a href="#48161" title="scala.tools.nsc.typechecker.Duplicators" class="keyword">extends</a> <a href="Analyzer.scala.html#44858" title="scala.tools.nsc.typechecker.Analyzer">Analyzer</a> <span class="delimiter">{</span>
  <span class="keyword">import</span> <a href="Analyzer.scala.html#537962" title="=&gt; scala.tools.nsc.Global">global</a>._
  <span class="keyword">import</span> <a href="../../../reflect/internal/Definitions.scala.html#407777" title="Duplicators.this.global.definitions.type">definitions</a>.<span class="delimiter">{</span> AnyRefClass, AnyValClass <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="(context: Duplicators.this.Context, tree: Duplicators.this.global.Tree)Duplicators.this.global.Tree" id="979833">retyped</a><span class="delimiter">(</span><a title="Duplicators.this.Context" id="979884">context</a>: <a href="Contexts.scala.html#537993" title="Duplicators.this.Context">Context</a>, <a title="Duplicators.this.global.Tree" id="979885">tree</a>: <a href="../../../reflect/internal/Trees.scala.html#407938" title="Duplicators.this.global.Tree">Tree</a><span class="delimiter">)</span>: <a href="../../../reflect/internal/Trees.scala.html#407938" title="Duplicators.this.global.Tree">Tree</a> = <span class="delimiter">{</span>
    <a href="#979838" title="()Unit">resetClassOwners</a>
    <span class="delimiter">(</span><a href="#979835" title="(context: Duplicators.this.Context)Duplicators.this.BodyDuplicator">newBodyDuplicator</a><span class="delimiter">(</span><a href="#979884" title="Duplicators.this.Context">context</a><span class="delimiter">)</span><span class="delimiter">)</span>.<a href="Typers.scala.html#538701" title="(tree: Duplicators.this.global.Tree)Duplicators.this.global.Tree">typed</a><span class="delimiter">(</span><a href="#979885" title="Duplicators.this.global.Tree">tree</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  /** Retype the given tree in the given context. Use this method when retyping
   *  a method in a different class. The typer will replace references to the this of
   *  the old class with the new class, and map symbols through the given 'env'. The
   *  environment is a map from type skolems to concrete types (see SpecializedTypes).
   */
  <span class="keyword">def</span> <a title="(context: Duplicators.this.Context, tree: Duplicators.this.global.Tree, oldThis: Duplicators.this.global.Symbol, newThis: Duplicators.this.global.Symbol, env: scala.collection.Map[Duplicators.this.global.Symbol,Duplicators.this.global.Type])Duplicators.this.global.Tree" id="979834">retyped</a><span class="delimiter">(</span><a title="Duplicators.this.Context" id="979873">context</a>: <a href="Contexts.scala.html#537993" title="Duplicators.this.Context">Context</a>, <a title="Duplicators.this.global.Tree" id="979874">tree</a>: <a href="../../../reflect/internal/Trees.scala.html#407938" title="Duplicators.this.global.Tree">Tree</a>, <a title="Duplicators.this.global.Symbol" id="979875">oldThis</a>: <a href="../../../reflect/internal/Symbols.scala.html#407146" title="Duplicators.this.global.Symbol">Symbol</a>, <a title="Duplicators.this.global.Symbol" id="979876">newThis</a>: <a href="../../../reflect/internal/Symbols.scala.html#407146" title="Duplicators.this.global.Symbol">Symbol</a>, <a title="scala.collection.Map[Duplicators.this.global.Symbol,Duplicators.this.global.Type]" id="979877">env</a>: scala.collection.<a href="../../../collection/Map.scala.html#3509" title="scala.collection.Map[Duplicators.this.global.Symbol,Duplicators.this.global.Type]">Map</a><span class="delimiter">[</span>Symbol, Type<span class="delimiter">]</span><span class="delimiter">)</span>: <a href="../../../reflect/internal/Trees.scala.html#407938" title="Duplicators.this.global.Tree">Tree</a> = <span class="delimiter">{</span>
    <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#979875" title="Duplicators.this.global.Symbol">oldThis</a> <span title="(x$1: AnyRef)Boolean">ne</span> <a href="#979876" title="Duplicators.this.global.Symbol">newThis</a><span class="delimiter">)</span> <span class="delimiter">{</span>
      <a href="#979840" title="(x$1: Duplicators.this.global.Symbol)Unit">oldClassOwner</a> = <a href="#979875" title="Duplicators.this.global.Symbol">oldThis</a>
      <a href="#979843" title="(x$1: Duplicators.this.global.Symbol)Unit">newClassOwner</a> = <a href="#979876" title="Duplicators.this.global.Symbol">newThis</a>
    <span class="delimiter">}</span> <span class="keyword">else</span> <a href="#979838" title="()Unit">resetClassOwners</a>

    <a href="#979846" title="(x$1: Duplicators.this.global.SubstTypeMap)Unit">envSubstitution</a> = <span title="Duplicators.this.SubstSkolemsTypeMap" class="keyword">new</span> <a href="#979848" title="Duplicators.this.SubstSkolemsTypeMap">SubstSkolemsTypeMap</a><span class="delimiter">(</span><a href="#979877" title="scala.collection.Map[Duplicators.this.global.Symbol,Duplicators.this.global.Type]">env</a>.<a href="../../../collection/MapLike.scala.html#87540" title="=&gt; Iterator[Duplicators.this.global.Symbol]">keysIterator</a>.<a href="../../../collection/TraversableOnce.scala.html#58263" title="=&gt; List[Duplicators.this.global.Symbol]">toList</a>, <a href="#979877" title="scala.collection.Map[Duplicators.this.global.Symbol,Duplicators.this.global.Type]">env</a>.<a href="../../../collection/MapLike.scala.html#87544" title="=&gt; Iterator[Duplicators.this.global.Type]">valuesIterator</a>.<a href="../../../collection/TraversableOnce.scala.html#58263" title="=&gt; List[Duplicators.this.global.Type]">toList</a><span class="delimiter">)</span>
    <a href="../Global.scala.html#537517" title="(msg: =&gt; String)Unit">debuglog</a><span class="delimiter">(</span><span title="String(&quot;retyped with env: &quot;)" class="string">&quot;retyped with env: &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#979877" title="scala.collection.Map[Duplicators.this.global.Symbol,Duplicators.this.global.Type]">env</a><span class="delimiter">)</span>
    <a href="#979835" title="(context: Duplicators.this.Context)Duplicators.this.BodyDuplicator">newBodyDuplicator</a><span class="delimiter">(</span><a href="#979873" title="Duplicators.this.Context">context</a><span class="delimiter">)</span>.<a href="Typers.scala.html#538701" title="(tree: Duplicators.this.global.Tree)Duplicators.this.global.Tree">typed</a><span class="delimiter">(</span><a href="#979874" title="Duplicators.this.global.Tree">tree</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="(context: Duplicators.this.Context)Duplicators.this.BodyDuplicator" id="979835">newBodyDuplicator</a><span class="delimiter">(</span><a title="Duplicators.this.Context" id="1006713">context</a>: <a href="Contexts.scala.html#537993" title="Duplicators.this.Context">Context</a><span class="delimiter">)</span> = <span title="Duplicators.this.BodyDuplicator" class="keyword">new</span> <a href="#979851" title="Duplicators.this.BodyDuplicator">BodyDuplicator</a><span class="delimiter">(</span><a href="#1006713" title="Duplicators.this.Context">context</a><span class="delimiter">)</span>

  <span class="keyword">def</span> <a title="(context: Duplicators.this.Context, tree: Duplicators.this.global.Tree, oldThis: Duplicators.this.global.Symbol, newThis: Duplicators.this.global.Symbol)Duplicators.this.global.Tree" id="979836">retypedMethod</a><span class="delimiter">(</span><a title="Duplicators.this.Context" id="1035592">context</a>: <a href="Contexts.scala.html#537993" title="Duplicators.this.Context">Context</a>, <a title="Duplicators.this.global.Tree" id="1035593">tree</a>: <a href="../../../reflect/internal/Trees.scala.html#407938" title="Duplicators.this.global.Tree">Tree</a>, <a title="Duplicators.this.global.Symbol" id="1035594">oldThis</a>: <a href="../../../reflect/internal/Symbols.scala.html#407146" title="Duplicators.this.global.Symbol">Symbol</a>, <a title="Duplicators.this.global.Symbol" id="1035595">newThis</a>: <a href="../../../reflect/internal/Symbols.scala.html#407146" title="Duplicators.this.global.Symbol">Symbol</a><span class="delimiter">)</span>: <a href="../../../reflect/internal/Trees.scala.html#407938" title="Duplicators.this.global.Tree">Tree</a> =
    <span class="delimiter">(</span><a href="#979835" title="(context: Duplicators.this.Context)Duplicators.this.BodyDuplicator">newBodyDuplicator</a><span class="delimiter">(</span><a href="#1035592" title="Duplicators.this.Context">context</a><span class="delimiter">)</span><span class="delimiter">)</span>.<a href="#1006661" title="(ddef: Duplicators.this.global.DefDef, oldThis: Duplicators.this.global.Symbol, newThis: Duplicators.this.global.Symbol)Duplicators.this.global.Tree">retypedMethod</a><span class="delimiter">(</span><a href="#1035593" title="Duplicators.this.global.Tree">tree</a>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="Duplicators.this.global.DefDef" class="delimiter">[</span><a href="../../../reflect/internal/Trees.scala.html#407963" title="Duplicators.this.global.DefDef">DefDef</a><span class="delimiter">]</span>, <a href="#1035594" title="Duplicators.this.global.Symbol">oldThis</a>, <a href="#1035595" title="Duplicators.this.global.Symbol">newThis</a><span class="delimiter">)</span>

  /** Return the special typer for duplicate method bodies. */
  <span class="keyword">override</span> <span class="keyword">def</span> <a title="(context: Duplicators.this.Context)Duplicators.this.Typer" id="979837">newTyper</a><span class="delimiter">(</span><a title="Duplicators.this.Context" id="1035600">context</a>: <a href="Contexts.scala.html#537993" title="Duplicators.this.Context">Context</a><span class="delimiter">)</span>: <a href="Typers.scala.html#538117" title="Duplicators.this.Typer">Typer</a> =
    <a href="#979835" title="(context: Duplicators.this.Context)Duplicators.this.BodyDuplicator">newBodyDuplicator</a><span class="delimiter">(</span><a href="#1035600" title="Duplicators.this.Context">context</a><span class="delimiter">)</span>

  <span class="keyword">private</span> <span class="keyword">def</span> <a title="()Unit" id="979838">resetClassOwners</a><span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    <a href="#979840" title="(x$1: Duplicators.this.global.Symbol)Unit">oldClassOwner</a> = <span title="Null(null)" class="keyword">null</span>
    <a href="#979843" title="(x$1: Duplicators.this.global.Symbol)Unit">newClassOwner</a> = <span title="Null(null)" class="keyword">null</span>
  <span class="delimiter">}</span>

  <span class="keyword">private</span> <span class="keyword">var</span> <a title="Duplicators.this.global.Symbol" id="979840">oldClassOwner</a>: <a href="../../../reflect/internal/Symbols.scala.html#407146" title="Duplicators.this.global.Symbol">Symbol</a> = _
  <span class="keyword">private</span> <span class="keyword">var</span> <a title="Duplicators.this.global.Symbol" id="979843">newClassOwner</a>: <a href="../../../reflect/internal/Symbols.scala.html#407146" title="Duplicators.this.global.Symbol">Symbol</a> = _
  <span class="keyword">private</span> <span class="keyword">var</span> <a title="Duplicators.this.global.SubstTypeMap" id="979846">envSubstitution</a>: <a href="../../../reflect/internal/Types.scala.html#407479" title="Duplicators.this.global.SubstTypeMap">SubstTypeMap</a> = _

  <span class="keyword">private</span> <span class="keyword">class</span> <a title="class SubstSkolemsTypeMap extends Duplicators.this.global.SubstTypeMap" id="979848">SubstSkolemsTypeMap</a><a href="#979848" title="Duplicators.this.SubstSkolemsTypeMap" class="delimiter">(</a><a title="List[Duplicators.this.global.Symbol]" id="1035576">from</a>: <a href="../../../collection/immutable/List.scala.html#11952" title="List[Duplicators.this.global.Symbol]">List</a><span class="delimiter">[</span>Symbol<span class="delimiter">]</span>, <a title="List[Duplicators.this.global.Type]" id="1035577">to</a>: <a href="../../../collection/immutable/List.scala.html#11952" title="List[Duplicators.this.global.Type]">List</a><span class="delimiter">[</span>Type<span class="delimiter">]</span><span class="delimiter">)</span> <span class="keyword">extends</span> <a href="../../../reflect/internal/Types.scala.html#407479" title="Duplicators.this.global.SubstTypeMap">SubstTypeMap</a><span class="delimiter">(</span><a href="#1035576" title="List[Duplicators.this.global.Symbol]">from</a>, <a href="#1035577" title="List[Duplicators.this.global.Type]">to</a><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span class="keyword">protected</span> <span class="keyword">override</span> <span class="keyword">def</span> <a title="(sym1: Duplicators.this.global.Symbol, sym2: Duplicators.this.global.Symbol)Boolean" id="1035575">matches</a><span class="delimiter">(</span><a title="Duplicators.this.global.Symbol" id="1035608">sym1</a>: <a href="../../../reflect/internal/Symbols.scala.html#407146" title="Duplicators.this.global.Symbol">Symbol</a>, <a title="Duplicators.this.global.Symbol" id="1035609">sym2</a>: <a href="../../../reflect/internal/Symbols.scala.html#407146" title="Duplicators.this.global.Symbol">Symbol</a><span class="delimiter">)</span> =
      <span title="Boolean" class="keyword">if</span> <span class="delimiter">(</span><a href="#1035609" title="Duplicators.this.global.Symbol">sym2</a>.<a href="../../../reflect/internal/Symbols.scala.html#411194" title="=&gt; Boolean">isTypeSkolem</a><span class="delimiter">)</span> <a href="#1035609" title="Duplicators.this.global.Symbol">sym2</a>.<a href="../../../reflect/internal/Symbols.scala.html#411475" title="=&gt; Duplicators.this.global.Symbol">deSkolemize</a> <span title="(x$1: AnyRef)Boolean">eq</span> <a href="#1035608" title="Duplicators.this.global.Symbol">sym1</a>
      <span class="keyword">else</span> <a href="#1035608" title="Duplicators.this.global.Symbol">sym1</a> <span title="(x$1: AnyRef)Boolean">eq</span> <a href="#1035609" title="Duplicators.this.global.Symbol">sym2</a>
  <span class="delimiter">}</span>

  <span class="keyword">private</span> <span class="keyword">val</span> <a title="scala.collection.mutable.Map[Duplicators.this.global.Symbol,Duplicators.this.global.Tree]" id="979849">invalidSyms</a>: mutable.<a href="../../../collection/mutable/Map.scala.html#12498" title="scala.collection.mutable.Map[Duplicators.this.global.Symbol,Duplicators.this.global.Tree]">Map</a><span class="delimiter">[</span>Symbol, Tree<span class="delimiter">]</span> = <a href="../../../reflect/internal/SymbolTable.scala.html#406696" title="Duplicators.this.global.perRunCaches.type">perRunCaches</a>.<a href="../../../reflect/internal/SymbolTable.scala.html#471987" title="[K, V]()scala.collection.mutable.HashMap[K,V]">newMap</a><span title="()scala.collection.mutable.HashMap[Duplicators.this.global.Symbol,Duplicators.this.global.Tree]" class="delimiter">[</span><a href="../../../reflect/internal/Symbols.scala.html#407146" title="Duplicators.this.global.Symbol">Symbol</a>, <a href="../../../reflect/internal/Trees.scala.html#407938" title="Duplicators.this.global.Tree">Tree</a><span class="delimiter">]</span><span class="delimiter">(</span><span class="delimiter">)</span>

  /** A typer that creates new symbols for all definitions in the given tree
   *  and updates references to them while re-typechecking. All types in the
   *  tree, except for TypeTrees, are erased prior to type checking. TypeTrees
   *  are fixed by substituting invalid symbols for the new ones.
   */
  <span class="keyword">class</span> <a title="class BodyDuplicator extends Duplicators.this.Typer" id="979851">BodyDuplicator</a><a href="#979851" title="Duplicators.this.BodyDuplicator" class="delimiter">(</a><a title="Duplicators.this.Context" id="1006672">_context</a>: <a href="Contexts.scala.html#537993" title="Duplicators.this.Context">Context</a><span class="delimiter">)</span> <span class="keyword">extends</span> <a href="Typers.scala.html#538117" title="Duplicators.this.Typer">Typer</a><span class="delimiter">(</span><a href="#1006672" title="Duplicators.this.Context">_context</a><span class="delimiter">)</span> <span class="delimiter">{</span>

    <span class="keyword">class</span> <a title="class FixInvalidSyms extends Duplicators.this.global.TypeMap" id="1006656">FixInvalidSyms</a> <a href="#1006656" title="BodyDuplicator.this.FixInvalidSyms" class="keyword">extends</a> <a href="../../../reflect/internal/Types.scala.html#407460" title="Duplicators.this.global.TypeMap">TypeMap</a> <span class="delimiter">{</span>

      <span class="keyword">def</span> <a title="(tpe: Duplicators.this.global.Type)Duplicators.this.global.Type" id="1035616">apply</a><span class="delimiter">(</span><a title="Duplicators.this.global.Type" id="1035619">tpe</a>: <a href="../../../reflect/internal/Types.scala.html#407270" title="Duplicators.this.global.Type">Type</a><span class="delimiter">)</span>: <a href="../../../reflect/internal/Types.scala.html#407270" title="Duplicators.this.global.Type">Type</a> = <span class="delimiter">{</span>
        <a href="#1035617" title="(tpe: Duplicators.this.global.Type)Duplicators.this.global.Type">mapOver</a><span class="delimiter">(</span><a href="#1035619" title="Duplicators.this.global.Type">tpe</a><span class="delimiter">)</span>
      <span class="delimiter">}</span>

      <span class="keyword">override</span> <span class="keyword">def</span> <a title="(tpe: Duplicators.this.global.Type)Duplicators.this.global.Type" id="1035617">mapOver</a><span class="delimiter">(</span><a title="Duplicators.this.global.Type" id="1035624">tpe</a>: <a href="../../../reflect/internal/Types.scala.html#407270" title="Duplicators.this.global.Type">Type</a><span class="delimiter">)</span>: <a href="../../../reflect/internal/Types.scala.html#407270" title="Duplicators.this.global.Type">Type</a> = <a href="#1035624" title="Duplicators.this.global.Type">tpe</a> <span class="keyword">match</span> <span class="delimiter">{</span>
        <span class="keyword">case</span> TypeRef<a href="#3364180" title="Boolean" id="3364183" class="delimiter">(</a><a href="../../../reflect/internal/Types.scala.html#410887" title="Duplicators.this.global.Type" id="3364191">NoPrefix</a>, <a href="../../../reflect/internal/Types.scala.html#410889" title="Duplicators.this.global.Symbol" id="1035673">sym</a>, <a href="../../../reflect/internal/Types.scala.html#410891" title="List[Duplicators.this.global.Type]" id="1035674">args</a><span class="delimiter">)</span> <span class="keyword">if</span> <a href="#1035673" title="Duplicators.this.global.Symbol">sym</a>.<a href="../../../reflect/internal/Symbols.scala.html#411193" title="=&gt; Boolean">isTypeParameterOrSkolem</a> =&gt;
          <span class="keyword">var</span> <a title="Duplicators.this.global.Symbol" id="1035675">sym1</a> = <a href="Typers.scala.html#538560" title="=&gt; Duplicators.this.Context">context</a>.<a href="Contexts.scala.html#538752" title="=&gt; Duplicators.this.global.Scope">scope</a>.<a href="../../../reflect/internal/Scopes.scala.html#410517" title="(name: Duplicators.this.global.Name)Duplicators.this.global.Symbol">lookup</a><span class="delimiter">(</span><a href="#1035673" title="Duplicators.this.global.Symbol">sym</a>.<a href="../../../reflect/internal/Symbols.scala.html#411087" title="=&gt; sym.NameType">name</a><span class="delimiter">)</span>
          <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#1035675" title="Duplicators.this.global.Symbol">sym1</a> <span title="(x$1: AnyRef)Boolean">eq</span> <a href="../../../reflect/internal/Symbols.scala.html#407184" title="=&gt; Duplicators.this.global.NoSymbol">NoSymbol</a><span class="delimiter">)</span> <span class="delimiter">{</span>
            // try harder (look in outer scopes)
            // with virtpatmat, this can happen when the sym is referenced in the scope of a LabelDef but is defined in the scope of an outer DefDef (e.g., in AbstractPartialFunction's andThen)
            <a href="#979851" title="Duplicators.this.BodyDuplicator">BodyDuplicator</a>.<span class="keyword">super</span>.<a href="Typers.scala.html#538609" title="(op: Duplicators.this.Typer =&gt; Duplicators.this.global.Tree, reportAmbiguousErrors: Boolean, newtree: Duplicators.this.global.Tree)Duplicators.this.SilentResult[Duplicators.this.global.Tree]">silent</a><span title="Unit" class="delimiter">(</span><a href="#1035685" title="Duplicators.this.Typer">_</a>.<a href="Typers.scala.html#538711" title="(tree: Duplicators.this.global.Tree)Duplicators.this.global.Tree">typedType</a><span class="delimiter">(</span><a href="../../../reflect/internal/Trees.scala.html#418125" title="(name: Duplicators.this.global.Name)Duplicators.this.global.Ident">Ident</a><span class="delimiter">(</span><a href="#1035673" title="Duplicators.this.global.Symbol">sym</a>.<a href="../../../reflect/internal/Symbols.scala.html#411087" title="=&gt; sym.NameType">name</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span> <span class="keyword">match</span> <span class="delimiter">{</span>
              <span class="keyword">case</span> SilentResultValue<a href="#3364171" title="Unit" id="3364173" class="delimiter">(</a><a href="Typers.scala.html#541584" title="Duplicators.this.global.Tree" id="1035711">t</a><span class="delimiter">)</span> =&gt;
                <a href="#1035675" title="Duplicators.this.global.Symbol">sym1</a> = <a href="#1035711" title="Duplicators.this.global.Tree">t</a>.<a href="../../../reflect/internal/Trees.scala.html#408577" title="=&gt; Duplicators.this.global.Symbol">symbol</a>
                <a href="../Global.scala.html#537517" title="(msg: =&gt; String)Unit">debuglog</a><span class="delimiter">(</span><span title="String(&quot;fixed by trying harder: &quot;)" class="string">&quot;fixed by trying harder: &quot;</span><a href="../../../Tuple3.scala.html#63169" title="(x$1: Any)String">+</a><span class="delimiter">(</span><a href="#1035673" title="Duplicators.this.global.Symbol">sym</a>, <a href="#1035675" title="Duplicators.this.global.Symbol">sym1</a>, <a href="Typers.scala.html#538560" title="=&gt; Duplicators.this.Context">context</a><span class="delimiter">)</span><span class="delimiter">)</span>
              <span class="keyword">case</span> _ =&gt;
            <span class="delimiter">}</span>
          <span class="delimiter">}</span>
//          assert(sym1 ne NoSymbol, tpe)
          <span title="Duplicators.this.global.Type" class="keyword">if</span> <span class="delimiter">(</span><span class="delimiter">(</span><a href="#1035675" title="Duplicators.this.global.Symbol">sym1</a> <span title="(x$1: AnyRef)Boolean">ne</span> <a href="../../../reflect/internal/Symbols.scala.html#407184" title="=&gt; Duplicators.this.global.NoSymbol">NoSymbol</a><span class="delimiter">)</span> <a href="../../../Boolean.scala.html#57826" title="(x: Boolean)Boolean">&amp;&amp;</a> <span class="delimiter">(</span><a href="#1035675" title="Duplicators.this.global.Symbol">sym1</a> <span title="(x$1: AnyRef)Boolean">ne</span> <a href="#1035673" title="Duplicators.this.global.Symbol">sym</a><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">{</span>
            <a href="../Global.scala.html#537517" title="(msg: =&gt; String)Unit">debuglog</a><span class="delimiter">(</span><span title="String(&quot;fixing &quot;)" class="string">&quot;fixing &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#1035673" title="Duplicators.this.global.Symbol">sym</a> <span title="(x$1: Any)String">+</span> <span title="String(&quot; -&gt; &quot;)" class="string">&quot; -&gt; &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#1035675" title="Duplicators.this.global.Symbol">sym1</a><span class="delimiter">)</span>
            <a href="../../../reflect/internal/Types.scala.html#407402" title="(pre: Duplicators.this.global.Type, sym: Duplicators.this.global.Symbol, args: List[Duplicators.this.global.Type])Duplicators.this.global.Type">typeRef</a><span class="delimiter">(</span><a href="../../../reflect/internal/Types.scala.html#407286" title="Duplicators.this.global.NoPrefix.type">NoPrefix</a>, <a href="#1035675" title="Duplicators.this.global.Symbol">sym1</a>, <a href="../../../reflect/internal/Types.scala.html#441773" title="(args: List[Duplicators.this.global.Type], tparams: List[Duplicators.this.global.Symbol])List[Duplicators.this.global.Type]">mapOverArgs</a><span class="delimiter">(</span><a href="#1035674" title="List[Duplicators.this.global.Type]">args</a>, <a href="#1035675" title="Duplicators.this.global.Symbol">sym1</a>.<a href="../../../reflect/internal/Symbols.scala.html#411389" title="=&gt; List[Duplicators.this.global.Symbol]">typeParams</a><span class="delimiter">)</span><span class="delimiter">)</span>
          <span class="delimiter">}</span> <span class="keyword">else</span> <a href="#1006656" title="BodyDuplicator.this.FixInvalidSyms" class="keyword">super</a>.<a href="../../../reflect/internal/Types.scala.html#441772" title="(tp: Duplicators.this.global.Type)Duplicators.this.global.Type">mapOver</a><span class="delimiter">(</span><a href="#1035624" title="Duplicators.this.global.Type">tpe</a><span class="delimiter">)</span>

        <span class="keyword">case</span> TypeRef<span class="delimiter">(</span><a href="../../../reflect/internal/Types.scala.html#410887" title="Duplicators.this.global.Type" id="1035745">pre</a>, <a href="../../../reflect/internal/Types.scala.html#410889" title="Duplicators.this.global.Symbol" id="1035746">sym</a>, <a href="../../../reflect/internal/Types.scala.html#410891" title="List[Duplicators.this.global.Type]" id="1035747">args</a><span class="delimiter">)</span> =&gt;
          <span class="keyword">val</span> <a title="Duplicators.this.global.Symbol" id="1035748">newsym</a> = <a href="#1006658" title="(sym: Duplicators.this.global.Symbol)Duplicators.this.global.Symbol">updateSym</a><span class="delimiter">(</span><a href="#1035746" title="Duplicators.this.global.Symbol">sym</a><span class="delimiter">)</span>
          <span title="Duplicators.this.global.Type" class="keyword">if</span> <span class="delimiter">(</span><a href="#1035748" title="Duplicators.this.global.Symbol">newsym</a> <span title="(x$1: AnyRef)Boolean">ne</span> <a href="#1035746" title="Duplicators.this.global.Symbol">sym</a><span class="delimiter">)</span> <span class="delimiter">{</span>
            <a href="../Global.scala.html#537517" title="(msg: =&gt; String)Unit">debuglog</a><span class="delimiter">(</span><span title="String(&quot;fixing &quot;)" class="string">&quot;fixing &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#1035746" title="Duplicators.this.global.Symbol">sym</a> <span title="(x$1: Any)String">+</span> <span title="String(&quot; -&gt; &quot;)" class="string">&quot; -&gt; &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#1035748" title="Duplicators.this.global.Symbol">newsym</a><span class="delimiter">)</span>
            <a href="../../../reflect/internal/Types.scala.html#407402" title="(pre: Duplicators.this.global.Type, sym: Duplicators.this.global.Symbol, args: List[Duplicators.this.global.Type])Duplicators.this.global.Type">typeRef</a><span class="delimiter">(</span><a href="#1035617" title="(tpe: Duplicators.this.global.Type)Duplicators.this.global.Type">mapOver</a><span class="delimiter">(</span><a href="#1035745" title="Duplicators.this.global.Type">pre</a><span class="delimiter">)</span>, <a href="#1035748" title="Duplicators.this.global.Symbol">newsym</a>, <a href="../../../reflect/internal/Types.scala.html#441773" title="(args: List[Duplicators.this.global.Type], tparams: List[Duplicators.this.global.Symbol])List[Duplicators.this.global.Type]">mapOverArgs</a><span class="delimiter">(</span><a href="#1035747" title="List[Duplicators.this.global.Type]">args</a>, <a href="#1035748" title="Duplicators.this.global.Symbol">newsym</a>.<a href="../../../reflect/internal/Symbols.scala.html#411389" title="=&gt; List[Duplicators.this.global.Symbol]">typeParams</a><span class="delimiter">)</span><span class="delimiter">)</span>
          <span class="delimiter">}</span> <span class="keyword">else</span>
            <a href="#1006656" title="BodyDuplicator.this.FixInvalidSyms" class="keyword">super</a>.<a href="../../../reflect/internal/Types.scala.html#441772" title="(tp: Duplicators.this.global.Type)Duplicators.this.global.Type">mapOver</a><span class="delimiter">(</span><a href="#1035624" title="Duplicators.this.global.Type">tpe</a><span class="delimiter">)</span>

        <span class="keyword">case</span> SingleType<a href="#3364180" title="Duplicators.this.global.Type" id="3364188" class="delimiter">(</a><a href="../../../reflect/internal/Types.scala.html#410991" title="Duplicators.this.global.Type" id="1035780">pre</a>, <a href="../../../reflect/internal/Types.scala.html#410993" title="Duplicators.this.global.Symbol" id="1035781">sym</a><span class="delimiter">)</span> =&gt;
          <span class="keyword">val</span> <a title="Duplicators.this.global.Symbol" id="1035782">sym1</a> = <a href="#1006658" title="(sym: Duplicators.this.global.Symbol)Duplicators.this.global.Symbol">updateSym</a><span class="delimiter">(</span><a href="#1035781" title="Duplicators.this.global.Symbol">sym</a><span class="delimiter">)</span>
          <span title="Duplicators.this.global.Type" class="keyword">if</span> <span class="delimiter">(</span><a href="#1035782" title="Duplicators.this.global.Symbol">sym1</a> <span title="(x$1: AnyRef)Boolean">ne</span> <a href="#1035781" title="Duplicators.this.global.Symbol">sym</a><span class="delimiter">)</span> <span class="delimiter">{</span>
            <a href="../Global.scala.html#537517" title="(msg: =&gt; String)Unit">debuglog</a><span class="delimiter">(</span><span title="String(&quot;fixing &quot;)" class="string">&quot;fixing &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#1035781" title="Duplicators.this.global.Symbol">sym</a> <span title="(x$1: Any)String">+</span> <span title="String(&quot; -&gt; &quot;)" class="string">&quot; -&gt; &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#1035782" title="Duplicators.this.global.Symbol">sym1</a><span class="delimiter">)</span>
            <a href="../../../reflect/internal/Types.scala.html#407398" title="(pre: Duplicators.this.global.Type, sym: Duplicators.this.global.Symbol)Duplicators.this.global.Type">singleType</a><span class="delimiter">(</span><a href="#1035617" title="(tpe: Duplicators.this.global.Type)Duplicators.this.global.Type">mapOver</a><span class="delimiter">(</span><a href="#1035780" title="Duplicators.this.global.Type">pre</a><span class="delimiter">)</span>, <a href="#1035782" title="Duplicators.this.global.Symbol">sym1</a><span class="delimiter">)</span>
          <span class="delimiter">}</span> <span class="keyword">else</span>
            <a href="#1006656" title="BodyDuplicator.this.FixInvalidSyms" class="keyword">super</a>.<a href="../../../reflect/internal/Types.scala.html#441772" title="(tp: Duplicators.this.global.Type)Duplicators.this.global.Type">mapOver</a><span class="delimiter">(</span><a href="#1035624" title="Duplicators.this.global.Type">tpe</a><span class="delimiter">)</span>

        <span class="keyword">case</span> ThisType<a href="#3364180" title="Duplicators.this.global.Type" id="3364190" class="delimiter">(</a><a href="../../../reflect/internal/Types.scala.html#411018" title="Duplicators.this.global.Symbol" id="1035816">sym</a><span class="delimiter">)</span> =&gt;
          <span class="keyword">val</span> <a title="Duplicators.this.global.Symbol" id="1035817">sym1</a> = <a href="#1006658" title="(sym: Duplicators.this.global.Symbol)Duplicators.this.global.Symbol">updateSym</a><span class="delimiter">(</span><a href="#1035816" title="Duplicators.this.global.Symbol">sym</a><span class="delimiter">)</span>
          <span title="Duplicators.this.global.Type" class="keyword">if</span> <span class="delimiter">(</span><a href="#1035817" title="Duplicators.this.global.Symbol">sym1</a> <span title="(x$1: AnyRef)Boolean">ne</span> <a href="#1035816" title="Duplicators.this.global.Symbol">sym</a><span class="delimiter">)</span> <span class="delimiter">{</span>
            <a href="../Global.scala.html#537517" title="(msg: =&gt; String)Unit">debuglog</a><span class="delimiter">(</span><span title="String(&quot;fixing &quot;)" class="string">&quot;fixing &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#1035816" title="Duplicators.this.global.Symbol">sym</a> <span title="(x$1: Any)String">+</span> <span title="String(&quot; -&gt; &quot;)" class="string">&quot; -&gt; &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#1035817" title="Duplicators.this.global.Symbol">sym1</a><span class="delimiter">)</span>
            <a href="../../../reflect/internal/Types.scala.html#442139" title="(sym: Duplicators.this.global.Symbol)Duplicators.this.global.Type">ThisType</a><span class="delimiter">(</span><a href="#1035817" title="Duplicators.this.global.Symbol">sym1</a><span class="delimiter">)</span>
          <span class="delimiter">}</span> <span class="keyword">else</span>
            <a href="#1006656" title="BodyDuplicator.this.FixInvalidSyms" class="keyword">super</a>.<a href="../../../reflect/internal/Types.scala.html#441772" title="(tp: Duplicators.this.global.Type)Duplicators.this.global.Type">mapOver</a><span class="delimiter">(</span><a href="#1035624" title="Duplicators.this.global.Type">tpe</a><span class="delimiter">)</span>


        <span class="keyword">case</span> _ =&gt;
          <a href="#1006656" title="BodyDuplicator.this.FixInvalidSyms" class="keyword">super</a>.<a href="../../../reflect/internal/Types.scala.html#441772" title="(tp: Duplicators.this.global.Type)Duplicators.this.global.Type">mapOver</a><a href="#3364194" title="(x: Duplicators.this.global.Type)Duplicators.this.global.Type" class="delimiter">(</a><a href="#1035624" title="Duplicators.this.global.Type">tpe</a><span class="delimiter">)</span>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>

    /** Fix the given type by replacing invalid symbols with the new ones. */
    <span class="keyword">def</span> <a title="(tpe: Duplicators.this.global.Type)Duplicators.this.global.Type" id="1006657">fixType</a><span class="delimiter">(</span><a title="Duplicators.this.global.Type" id="1006688">tpe</a>: <a href="../../../reflect/internal/Types.scala.html#407270" title="Duplicators.this.global.Type">Type</a><span class="delimiter">)</span>: <a href="../../../reflect/internal/Types.scala.html#407270" title="Duplicators.this.global.Type">Type</a> = <span class="delimiter">{</span>
      <span class="keyword">val</span> <a title="Duplicators.this.global.Type" id="1035832">tpe1</a> = <a href="../../../reflect/internal/Types.scala.html#486223" title="(tp0: Duplicators.this.global.Type)Duplicators.this.global.Type">envSubstitution</a><span class="delimiter">(</span><a href="#1006688" title="Duplicators.this.global.Type">tpe</a><span class="delimiter">)</span>
      <span class="keyword">val</span> <a title="Duplicators.this.global.Type" id="1035833">tpe2</a>: <a href="../../../reflect/internal/Types.scala.html#407270" title="Duplicators.this.global.Type">Type</a> = <span class="delimiter">(</span><a href="#1035616" title="(tpe: Duplicators.this.global.Type)Duplicators.this.global.Type" class="keyword">new</a> <a href="#1006656" title="BodyDuplicator.this.FixInvalidSyms">FixInvalidSyms</a><span class="delimiter">)</span><span class="delimiter">(</span><a href="#1035832" title="Duplicators.this.global.Type">tpe1</a><span class="delimiter">)</span>
      <span class="keyword">val</span> <a title="Duplicators.this.global.Type" id="1035834">tpe3</a> = <span title="Duplicators.this.global.Type" class="keyword">if</span> <span class="delimiter">(</span><a href="#979843" title="=&gt; Duplicators.this.global.Symbol">newClassOwner</a> <span title="(x$1: AnyRef)Boolean">ne</span> <span title="Null(null)" class="keyword">null</span><span class="delimiter">)</span> <span class="delimiter">{</span>
        <a href="#1035833" title="Duplicators.this.global.Type">tpe2</a>.<a href="../../../reflect/internal/Types.scala.html#408460" title="(pre: Duplicators.this.global.Type, clazz: Duplicators.this.global.Symbol)Duplicators.this.global.Type">asSeenFrom</a><span class="delimiter">(</span><a href="#979843" title="=&gt; Duplicators.this.global.Symbol">newClassOwner</a>.<a href="../../../reflect/internal/Symbols.scala.html#411427" title="=&gt; Duplicators.this.global.Type">thisType</a>, <a href="#979840" title="=&gt; Duplicators.this.global.Symbol">oldClassOwner</a><span class="delimiter">)</span>
      <span class="delimiter">}</span> <span class="keyword">else</span> <a href="#1035833" title="Duplicators.this.global.Type">tpe2</a>
      <a href="#1035834" title="Duplicators.this.global.Type">tpe3</a>
    <span class="delimiter">}</span>

    /** Return the new symbol corresponding to `sym`. */
    <span class="keyword">private</span> <span class="keyword">def</span> <a title="(sym: Duplicators.this.global.Symbol)Duplicators.this.global.Symbol" id="1006658">updateSym</a><span class="delimiter">(</span><a title="Duplicators.this.global.Symbol" id="1035749">sym</a>: <a href="../../../reflect/internal/Symbols.scala.html#407146" title="Duplicators.this.global.Symbol">Symbol</a><span class="delimiter">)</span>: <a href="../../../reflect/internal/Symbols.scala.html#407146" title="Duplicators.this.global.Symbol">Symbol</a> =
      <span title="Duplicators.this.global.Symbol" class="keyword">if</span> <span class="delimiter">(</span><a href="#979849" title="=&gt; scala.collection.mutable.Map[Duplicators.this.global.Symbol,Duplicators.this.global.Tree]">invalidSyms</a>.<a href="../../../collection/MapLike.scala.html#87537" title="(key: Duplicators.this.global.Symbol)Boolean">isDefinedAt</a><span class="delimiter">(</span><a href="#1035749" title="Duplicators.this.global.Symbol">sym</a><span class="delimiter">)</span><span class="delimiter">)</span>
        <a href="../../../collection/MapLike.scala.html#87535" title="(key: Duplicators.this.global.Symbol)Duplicators.this.global.Tree">invalidSyms</a><span class="delimiter">(</span><a href="#1035749" title="Duplicators.this.global.Symbol">sym</a><span class="delimiter">)</span>.<a href="../../../reflect/internal/Trees.scala.html#408577" title="=&gt; Duplicators.this.global.Symbol">symbol</a>
      <span class="keyword">else</span>
        <a href="#1035749" title="Duplicators.this.global.Symbol">sym</a>

    <span class="keyword">private</span> <span class="keyword">def</span> <a title="(tree: Duplicators.this.global.Tree, owner: Duplicators.this.global.Symbol)Unit" id="1006659">invalidate</a><span class="delimiter">(</span><a title="Duplicators.this.global.Tree" id="1035887">tree</a>: <a href="../../../reflect/internal/Trees.scala.html#407938" title="Duplicators.this.global.Tree">Tree</a>, <a title="Duplicators.this.global.Symbol" id="1035889">owner</a>: <a href="../../../reflect/internal/Symbols.scala.html#407146" title="Duplicators.this.global.Symbol">Symbol</a> = <a href="../../../reflect/internal/Symbols.scala.html#407184" title="=&gt; Duplicators.this.global.NoSymbol">NoSymbol</a><span class="delimiter">)</span> <span class="delimiter">{</span>
      <a href="../Global.scala.html#537517" title="(msg: =&gt; String)Unit">debuglog</a><span class="delimiter">(</span><span title="String(&quot;attempting to invalidate &quot;)" class="string">&quot;attempting to invalidate &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#1035887" title="Duplicators.this.global.Tree">tree</a>.<a href="../../../reflect/internal/Trees.scala.html#408577" title="=&gt; Duplicators.this.global.Symbol">symbol</a><span class="delimiter">)</span>
      <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#1035887" title="Duplicators.this.global.Tree">tree</a>.<a href="../../../reflect/internal/Trees.scala.html#408581" title="=&gt; Boolean">isDef</a> <a href="../../../Boolean.scala.html#57826" title="(x: Boolean)Boolean">&amp;&amp;</a> <a href="#1035887" title="Duplicators.this.global.Tree">tree</a>.<a href="../../../reflect/internal/Trees.scala.html#408577" title="=&gt; Duplicators.this.global.Symbol">symbol</a> <span title="(x$1: AnyRef)Boolean">!=</span> <a href="../../../reflect/internal/Symbols.scala.html#407184" title="=&gt; Duplicators.this.global.NoSymbol">NoSymbol</a><span class="delimiter">)</span> <span class="delimiter">{</span>
        <a href="../Global.scala.html#537517" title="(msg: =&gt; String)Unit">debuglog</a><span class="delimiter">(</span><span title="String(&quot;invalid &quot;)" class="string">&quot;invalid &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#1035887" title="Duplicators.this.global.Tree">tree</a>.<a href="../../../reflect/internal/Trees.scala.html#408577" title="=&gt; Duplicators.this.global.Symbol">symbol</a><span class="delimiter">)</span>
        <a href="../../../collection/mutable/MapLike.scala.html#87611" title="(key: Duplicators.this.global.Symbol, value: Duplicators.this.global.Tree)Unit">invalidSyms</a><span class="delimiter">(</span><a href="#1035887" title="Duplicators.this.global.Tree">tree</a>.<a href="../../../reflect/internal/Trees.scala.html#408577" title="=&gt; Duplicators.this.global.Symbol">symbol</a><span class="delimiter">)</span> = <a href="#1035887" title="Duplicators.this.global.Tree">tree</a>

        <a href="#1035887" title="Duplicators.this.global.Tree">tree</a> <span class="keyword">match</span> <span class="delimiter">{</span>
          <span class="keyword">case</span> ldef @ LabelDef<a href="#3364205" title="Unit" id="3364207" class="delimiter">(</a><a href="../../../reflect/internal/Trees.scala.html#410239" title="Duplicators.this.global.TermName" id="1035909">name</a>, <a href="../../../reflect/internal/Trees.scala.html#410241" title="List[Duplicators.this.global.Ident]" id="1035910">params</a>, <a href="../../../reflect/internal/Trees.scala.html#410243" title="Duplicators.this.global.Tree" id="1035911">rhs</a><span class="delimiter">)</span> =&gt;
            <a href="../Global.scala.html#537517" title="(msg: =&gt; String)Unit">debuglog</a><span class="delimiter">(</span><span title="String(&quot;LabelDef &quot;)" class="string">&quot;LabelDef &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#1035909" title="Duplicators.this.global.TermName">name</a> <span title="(x$1: Any)String">+</span> <span title="String(&quot; sym.info: &quot;)" class="string">&quot; sym.info: &quot;</span> <span title="(x$1: Any)String">+</span> ldef.<a href="../../../reflect/internal/Trees.scala.html#409939" title="=&gt; Duplicators.this.global.Symbol">symbol</a>.<a href="../../../reflect/internal/Symbols.scala.html#411367" title="=&gt; Duplicators.this.global.Type">info</a><span class="delimiter">)</span>
            <a href="../../../collection/mutable/MapLike.scala.html#87611" title="(key: Duplicators.this.global.Symbol, value: Duplicators.this.global.Tree)Unit">invalidSyms</a><span class="delimiter">(</span>ldef.<a href="../../../reflect/internal/Trees.scala.html#409939" title="=&gt; Duplicators.this.global.Symbol">symbol</a><span class="delimiter">)</span> = ldef
          //          breakIf(true, this, ldef, context)
            <span class="keyword">val</span> <a title="Duplicators.this.global.Symbol#TypeOfClonedSymbol" id="1035912">newsym</a> = ldef.<a href="../../../reflect/internal/Trees.scala.html#409939" title="=&gt; Duplicators.this.global.Symbol">symbol</a>.<a href="../../../reflect/internal/Symbols.scala.html#411418" title="(newOwner: Duplicators.this.global.Symbol)Duplicators.this.global.Symbol#TypeOfClonedSymbol">cloneSymbol</a><span class="delimiter">(</span><a href="Typers.scala.html#538560" title="=&gt; Duplicators.this.Context">context</a>.<a href="Contexts.scala.html#538749" title="=&gt; Duplicators.this.global.Symbol">owner</a><span class="delimiter">)</span>
            <a href="#1035912" title="Duplicators.this.global.Symbol#TypeOfClonedSymbol">newsym</a>.<a href="../../../reflect/internal/Symbols.scala.html#411369" title="(info: Duplicators.this.global.Type)newsym.type">setInfo</a><span class="delimiter">(</span><a href="#1006657" title="(tpe: Duplicators.this.global.Type)Duplicators.this.global.Type">fixType</a><span class="delimiter">(</span>ldef.<a href="../../../reflect/internal/Trees.scala.html#409939" title="=&gt; Duplicators.this.global.Symbol">symbol</a>.<a href="../../../reflect/internal/Symbols.scala.html#411367" title="=&gt; Duplicators.this.global.Type">info</a><span class="delimiter">)</span><span class="delimiter">)</span>
            ldef.<a href="../../../reflect/internal/Trees.scala.html#409940" title="(x$1: Duplicators.this.global.Symbol)Unit">symbol</a> = <a href="#1035912" title="Duplicators.this.global.Symbol#TypeOfClonedSymbol">newsym</a>
            <a href="../Global.scala.html#537517" title="(msg: =&gt; String)Unit">debuglog</a><span class="delimiter">(</span><span title="String(&quot;newsym: &quot;)" class="string">&quot;newsym: &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#1035912" title="Duplicators.this.global.Symbol#TypeOfClonedSymbol">newsym</a> <span title="(x$1: Any)String">+</span> <span title="String(&quot; info: &quot;)" class="string">&quot; info: &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#1035912" title="Duplicators.this.global.Symbol#TypeOfClonedSymbol">newsym</a>.<a href="../../../reflect/internal/Symbols.scala.html#411367" title="=&gt; Duplicators.this.global.Type">info</a><span class="delimiter">)</span>

          <span class="keyword">case</span> vdef @ ValDef<a href="#3364205" title="Unit" id="3364210" class="delimiter">(</a><a href="../../../reflect/internal/Trees.scala.html#410298" title="Duplicators.this.global.Modifiers" id="1035982">mods</a>, <a href="../../../reflect/internal/Trees.scala.html#410300" title="Duplicators.this.global.TermName" id="1035983">name</a>, <a href="../../../reflect/internal/Trees.scala.html#410302" title="Duplicators.this.global.Tree" id="3364208">_</a>, <a href="../../../reflect/internal/Trees.scala.html#410304" title="Duplicators.this.global.Tree" id="1035984">rhs</a><span class="delimiter">)</span> <span class="keyword">if</span> <a href="#1035982" title="Duplicators.this.global.Modifiers">mods</a>.<a href="../../../reflect/internal/Trees.scala.html#409816" title="(flag: Long)Boolean">hasFlag</a><span class="delimiter">(</span>Flags.<span title="Long(2147483648L)">LAZY</span><span class="delimiter">)</span> =&gt;
            <a href="../Global.scala.html#537517" title="(msg: =&gt; String)Unit">debuglog</a><span class="delimiter">(</span><span title="String(&quot;ValDef &quot;)" class="string">&quot;ValDef &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#1035983" title="Duplicators.this.global.TermName">name</a> <span title="(x$1: Any)String">+</span> <span title="String(&quot; sym.info: &quot;)" class="string">&quot; sym.info: &quot;</span> <span title="(x$1: Any)String">+</span> vdef.<a href="../../../reflect/internal/Trees.scala.html#409939" title="=&gt; Duplicators.this.global.Symbol">symbol</a>.<a href="../../../reflect/internal/Symbols.scala.html#411367" title="=&gt; Duplicators.this.global.Type">info</a><span class="delimiter">)</span>
            <a href="../../../collection/mutable/MapLike.scala.html#87611" title="(key: Duplicators.this.global.Symbol, value: Duplicators.this.global.Tree)Unit">invalidSyms</a><span class="delimiter">(</span>vdef.<a href="../../../reflect/internal/Trees.scala.html#409939" title="=&gt; Duplicators.this.global.Symbol">symbol</a><span class="delimiter">)</span> = vdef
            <span class="keyword">val</span> <a title="Duplicators.this.global.Symbol" id="1035986">newowner</a> = <span title="Duplicators.this.global.Symbol" class="keyword">if</span> <span class="delimiter">(</span><a href="#1035889" title="Duplicators.this.global.Symbol">owner</a> <span title="(x$1: AnyRef)Boolean">!=</span> <a href="../../../reflect/internal/Symbols.scala.html#407184" title="=&gt; Duplicators.this.global.NoSymbol">NoSymbol</a><span class="delimiter">)</span> <a href="#1035889" title="Duplicators.this.global.Symbol">owner</a> <span class="keyword">else</span> <a href="Typers.scala.html#538560" title="=&gt; Duplicators.this.Context">context</a>.<a href="Contexts.scala.html#538749" title="=&gt; Duplicators.this.global.Symbol">owner</a>
            <span class="keyword">val</span> <a title="Duplicators.this.global.Symbol#TypeOfClonedSymbol" id="1035987">newsym</a> = vdef.<a href="../../../reflect/internal/Trees.scala.html#409939" title="=&gt; Duplicators.this.global.Symbol">symbol</a>.<a href="../../../reflect/internal/Symbols.scala.html#411418" title="(newOwner: Duplicators.this.global.Symbol)Duplicators.this.global.Symbol#TypeOfClonedSymbol">cloneSymbol</a><span class="delimiter">(</span><a href="#1035986" title="Duplicators.this.global.Symbol">newowner</a><span class="delimiter">)</span>
            <a href="#1035987" title="Duplicators.this.global.Symbol#TypeOfClonedSymbol">newsym</a>.<a href="../../../reflect/internal/Symbols.scala.html#411369" title="(info: Duplicators.this.global.Type)newsym.type">setInfo</a><span class="delimiter">(</span><a href="#1006657" title="(tpe: Duplicators.this.global.Type)Duplicators.this.global.Type">fixType</a><span class="delimiter">(</span>vdef.<a href="../../../reflect/internal/Trees.scala.html#409939" title="=&gt; Duplicators.this.global.Symbol">symbol</a>.<a href="../../../reflect/internal/Symbols.scala.html#411367" title="=&gt; Duplicators.this.global.Type">info</a><span class="delimiter">)</span><span class="delimiter">)</span>
            vdef.<a href="../../../reflect/internal/Trees.scala.html#409940" title="(x$1: Duplicators.this.global.Symbol)Unit">symbol</a> = <a href="#1035987" title="Duplicators.this.global.Symbol#TypeOfClonedSymbol">newsym</a>
            <a href="../Global.scala.html#537517" title="(msg: =&gt; String)Unit">debuglog</a><span class="delimiter">(</span><span title="String(&quot;newsym: &quot;)" class="string">&quot;newsym: &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#1035987" title="Duplicators.this.global.Symbol#TypeOfClonedSymbol">newsym</a> <span title="(x$1: Any)String">+</span> <span title="String(&quot; info: &quot;)" class="string">&quot; info: &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#1035987" title="Duplicators.this.global.Symbol#TypeOfClonedSymbol">newsym</a>.<a href="../../../reflect/internal/Symbols.scala.html#411367" title="=&gt; Duplicators.this.global.Type">info</a> <span title="(x$1: Any)String">+</span> <span title="String(&quot;, owner: &quot;)" class="string">&quot;, owner: &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#1035987" title="Duplicators.this.global.Symbol#TypeOfClonedSymbol">newsym</a>.<a href="../../../reflect/internal/Symbols.scala.html#411315" title="=&gt; Duplicators.this.global.Symbol">owner</a> <span title="(x$1: Any)String">+</span> <span title="String(&quot;, &quot;)" class="string">&quot;, &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#1035987" title="Duplicators.this.global.Symbol#TypeOfClonedSymbol">newsym</a>.<a href="../../../reflect/internal/Symbols.scala.html#411315" title="=&gt; Duplicators.this.global.Symbol">owner</a>.<a href="../../../reflect/api/Symbols.scala.html#402403" title="=&gt; Boolean">isClass</a><span class="delimiter">)</span>
            <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#1035987" title="Duplicators.this.global.Symbol#TypeOfClonedSymbol">newsym</a>.<a href="../../../reflect/internal/Symbols.scala.html#411315" title="=&gt; Duplicators.this.global.Symbol">owner</a>.<a href="../../../reflect/api/Symbols.scala.html#402403" title="=&gt; Boolean">isClass</a><span class="delimiter">)</span> <a href="#1035987" title="Duplicators.this.global.Symbol#TypeOfClonedSymbol">newsym</a>.<a href="../../../reflect/internal/Symbols.scala.html#411315" title="=&gt; Duplicators.this.global.Symbol">owner</a>.<a href="../../../reflect/internal/Symbols.scala.html#411367" title="=&gt; Duplicators.this.global.Type">info</a>.<a href="../../../reflect/internal/Types.scala.html#408442" title="=&gt; Duplicators.this.global.Scope">decls</a> <a href="../../../reflect/internal/Scopes.scala.html#410508" title="(sym: Duplicators.this.global.Symbol#TypeOfClonedSymbol)Duplicators.this.global.Symbol#TypeOfClonedSymbol">enter</a> <a href="#1035987" title="Duplicators.this.global.Symbol#TypeOfClonedSymbol">newsym</a>

          <span class="keyword">case</span> DefDef<a href="#3364205" title="Unit" id="3364214" class="delimiter">(</a><a href="../../../reflect/internal/Trees.scala.html#410278" title="Duplicators.this.global.Modifiers" id="3364211">_</a>, <a href="../../../reflect/internal/Trees.scala.html#410280" title="Duplicators.this.global.Name" id="1036108">name</a>, <a href="../../../reflect/internal/Trees.scala.html#410282" title="List[Duplicators.this.global.TypeDef]" id="1036109">tparams</a>, <a href="../../../reflect/internal/Trees.scala.html#410284" title="List[List[Duplicators.this.global.ValDef]]" id="1036110">vparamss</a>, <a href="../../../reflect/internal/Trees.scala.html#410286" title="Duplicators.this.global.Tree" id="3364212">_</a>, <a href="../../../reflect/internal/Trees.scala.html#410288" title="Duplicators.this.global.Tree" id="1036111">rhs</a><span class="delimiter">)</span> =&gt;
            // invalidate parameters
            <a href="#1006660" title="(stats: List[Duplicators.this.global.Tree], owner: Duplicators.this.global.Symbol)Unit">invalidateAll</a><span class="delimiter">(</span><a href="#1036109" title="List[Duplicators.this.global.TypeDef]">tparams</a> <a href="../../../collection/immutable/List.scala.html#62688" title="(prefix: List[Duplicators.this.global.MemberDef with Serializable{def name: Duplicators.this.global.Name{def newName(str: String): Duplicators.this.global.Name{type ThisNameType &gt;: Duplicators.this.global.TermName with Duplicators.this.global.TypeName &lt;: Duplicators.this.global.Name}; def subName(from: Int,to: Int): Duplicators.this.global.Name{type ThisNameType &gt;: Duplicators.this.global.TermName with Duplicators.this.global.TypeName &lt;: Duplicators.this.global.Name}; def companionName: Duplicators.this.global.Name{type ThisNameType &gt;: Duplicators.this.global.TypeName with Duplicators.this.global.TermName &lt;: Duplicators.this.global.Name}; def next: Duplicators.this.global.Name{type ThisNameType &gt;: Duplicators.this.global.TermName with Duplicators.this.global.TypeName &lt;: Duplicators.this.global.Name}; type ThisNameType &gt;: Duplicators.this.global.TermName with Duplicators.this.global.TypeName &lt;: Duplicators.this.global.Name{type ThisNameType &gt;: Duplicators.this.global.TermName with Duplicators.this.global.TypeName &lt;: Duplicators.this.global.Name}}}])List[Duplicators.this.global.MemberDef with Serializable{def name: Duplicators.this.global.Name{def newName(str: String): Duplicators.this.global.Name{type ThisNameType &gt;: Duplicators.this.global.TermName with Duplicators.this.global.TypeName &lt;: Duplicators.this.global.Name}; def subName(from: Int,to: Int): Duplicators.this.global.Name{type ThisNameType &gt;: Duplicators.this.global.TermName with Duplicators.this.global.TypeName &lt;: Duplicators.this.global.Name}; def companionName: Duplicators.this.global.Name{type ThisNameType &gt;: Duplicators.this.global.TypeName with Duplicators.this.global.TermName &lt;: Duplicators.this.global.Name}; def next: Duplicators.this.global.Name{type ThisNameType &gt;: Duplicators.this.global.TermName with Duplicators.this.global.TypeName &lt;: Duplicators.this.global.Name}; type ThisNameType &gt;: Duplicators.this.global.TermName with Duplicators.this.global.TypeName &lt;: Duplicators.this.global.Name{type ThisNameType &gt;: Duplicators.this.global.TermName with Duplicators.this.global.TypeName &lt;: Duplicators.this.global.Name}}}]">:::</a> <a href="#1036110" title="List[List[Duplicators.this.global.ValDef]]">vparamss</a>.<a href="../../../collection/generic/GenericTraversableTemplate.scala.html#58488" title="(implicit asTraversable: List[Duplicators.this.global.ValDef] =&gt; scala.collection.GenTraversableOnce[Duplicators.this.global.ValDef])List[Duplicators.this.global.ValDef]">flatten</a><span class="delimiter">)</span>
            <a href="#1035887" title="Duplicators.this.global.Tree">tree</a>.<a href="../../../reflect/internal/Trees.scala.html#408578" title="(sym: Duplicators.this.global.Symbol)Unit">symbol</a> = <a href="../../../reflect/internal/Symbols.scala.html#407184" title="=&gt; Duplicators.this.global.NoSymbol">NoSymbol</a>

          <span class="keyword">case</span> _ =&gt;
            <a href="#1035887" title="Duplicators.this.global.Tree">tree</a>.<a href="../../../reflect/internal/Trees.scala.html#408578" title="(sym: Duplicators.this.global.Symbol)Unit">symbol</a> = <a href="../../../reflect/internal/Symbols.scala.html#407184" title="=&gt; Duplicators.this.global.NoSymbol">NoSymbol</a>
        <span class="delimiter">}</span>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>

    <span class="keyword">private</span> <span class="keyword">def</span> <a title="(stats: List[Duplicators.this.global.Tree], owner: Duplicators.this.global.Symbol)Unit" id="1006660">invalidateAll</a><span class="delimiter">(</span><a title="List[Duplicators.this.global.Tree]" id="1036112">stats</a>: <a href="../../../collection/immutable/List.scala.html#11952" title="List[Duplicators.this.global.Tree]">List</a><span class="delimiter">[</span>Tree<span class="delimiter">]</span>, <a title="Duplicators.this.global.Symbol" id="1036114">owner</a>: <a href="../../../reflect/internal/Symbols.scala.html#407146" title="Duplicators.this.global.Symbol">Symbol</a> = <a href="../../../reflect/internal/Symbols.scala.html#407184" title="=&gt; Duplicators.this.global.NoSymbol">NoSymbol</a><span class="delimiter">)</span> <span class="delimiter">{</span>
      <a href="#1036112" title="List[Duplicators.this.global.Tree]">stats</a>.<a href="../../../collection/immutable/List.scala.html#62719" title="(f: Duplicators.this.global.Tree =&gt; Unit)Unit">foreach</a><span class="delimiter">(</span><a href="#1006659" title="(tree: Duplicators.this.global.Tree, owner: Duplicators.this.global.Symbol)Unit">invalidate</a><span class="delimiter">(</span><a href="#1036800" title="Duplicators.this.global.Tree">_</a>, <a href="#1036114" title="Duplicators.this.global.Symbol">owner</a><span class="delimiter">)</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>

    <span class="keyword">def</span> <a title="(ddef: Duplicators.this.global.DefDef, oldThis: Duplicators.this.global.Symbol, newThis: Duplicators.this.global.Symbol)Duplicators.this.global.Tree" id="1006661">retypedMethod</a><span class="delimiter">(</span><a title="Duplicators.this.global.DefDef" id="1035597">ddef</a>: <a href="../../../reflect/internal/Trees.scala.html#407963" title="Duplicators.this.global.DefDef">DefDef</a>, <a title="Duplicators.this.global.Symbol" id="1035598">oldThis</a>: <a href="../../../reflect/internal/Symbols.scala.html#407146" title="Duplicators.this.global.Symbol">Symbol</a>, <a title="Duplicators.this.global.Symbol" id="1035599">newThis</a>: <a href="../../../reflect/internal/Symbols.scala.html#407146" title="Duplicators.this.global.Symbol">Symbol</a><span class="delimiter">)</span>: <a href="../../../reflect/internal/Trees.scala.html#407938" title="Duplicators.this.global.Tree">Tree</a> = <span class="delimiter">{</span>
      <a href="#979840" title="(x$1: Duplicators.this.global.Symbol)Unit">oldClassOwner</a> = <a href="#1035598" title="Duplicators.this.global.Symbol">oldThis</a>
      <a href="#979843" title="(x$1: Duplicators.this.global.Symbol)Unit">newClassOwner</a> = <a href="#1035599" title="Duplicators.this.global.Symbol">newThis</a>
      <a href="#1006660" title="(stats: List[Duplicators.this.global.Tree], owner: Duplicators.this.global.Symbol)Unit">invalidateAll</a><span class="delimiter">(</span><a href="#1035597" title="Duplicators.this.global.DefDef">ddef</a>.<a href="../../../reflect/internal/Trees.scala.html#410282" title="=&gt; List[Duplicators.this.global.TypeDef]">tparams</a><span class="delimiter">)</span>
      <a href="../../../reflect/internal/util/Collections.scala.html#406722" title="(xss: List[List[Duplicators.this.global.ValDef]])(f: Duplicators.this.global.ValDef =&gt; Unit)Unit">mforeach</a><span class="delimiter">(</span><a href="#1035597" title="Duplicators.this.global.DefDef">ddef</a>.<a href="../../../reflect/internal/Trees.scala.html#410284" title="=&gt; List[List[Duplicators.this.global.ValDef]]">vparamss</a><span class="delimiter">)</span> <span class="delimiter">{</span> <a title="Duplicators.this.global.ValDef" id="1036818">vdef</a> =&gt;
        <a href="#1006659" title="(tree: Duplicators.this.global.Tree, owner: Duplicators.this.global.Symbol)Unit">invalidate</a><span class="delimiter">(</span><a href="#1036818" title="Duplicators.this.global.ValDef">vdef</a><span class="delimiter">)</span>
        <a href="#1036818" title="Duplicators.this.global.ValDef">vdef</a>.<a href="../../../reflect/internal/Trees.scala.html#408574" title="(t: Duplicators.this.global.Type)Unit">tpe</a> = <span title="Null(null)" class="keyword">null</span>
      <span class="delimiter">}</span>
      <a href="#1035597" title="Duplicators.this.global.DefDef">ddef</a>.<a href="../../../reflect/internal/Trees.scala.html#409940" title="(x$1: Duplicators.this.global.Symbol)Unit">symbol</a> = <a href="../../../reflect/internal/Symbols.scala.html#407184" title="=&gt; Duplicators.this.global.NoSymbol">NoSymbol</a>
      <a href="Typers.scala.html#538634" title="(txt: Duplicators.this.Context, tree: Duplicators.this.global.Tree)Duplicators.this.Context">enterSym</a><span class="delimiter">(</span><a href="Typers.scala.html#538560" title="=&gt; Duplicators.this.Context">context</a>, <a href="#1035597" title="Duplicators.this.global.DefDef">ddef</a><span class="delimiter">)</span>
      <a href="../Global.scala.html#537517" title="(msg: =&gt; String)Unit">debuglog</a><span class="delimiter">(</span><span title="String(&quot;remapping this of &quot;)" class="string">&quot;remapping this of &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#979840" title="=&gt; Duplicators.this.global.Symbol">oldClassOwner</a> <span title="(x$1: Any)String">+</span> <span title="String(&quot; to &quot;)" class="string">&quot; to &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#979843" title="=&gt; Duplicators.this.global.Symbol">newClassOwner</a><span class="delimiter">)</span>
      <a href="Typers.scala.html#538701" title="(tree: Duplicators.this.global.Tree)Duplicators.this.global.Tree">typed</a><span class="delimiter">(</span><a href="#1035597" title="Duplicators.this.global.DefDef">ddef</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>

    <span class="keyword">private</span> <span class="keyword">def</span> <a title="(tpe: Duplicators.this.global.Type)Any" id="1006662">inspectTpe</a><span class="delimiter">(</span><a title="Duplicators.this.global.Type" id="1036840">tpe</a>: <a href="../../../reflect/internal/Types.scala.html#407270" title="Duplicators.this.global.Type">Type</a><span class="delimiter">)</span> = <span class="delimiter">{</span>
      <a href="#1036840" title="Duplicators.this.global.Type">tpe</a> <span class="keyword">match</span> <span class="delimiter">{</span>
        <span class="keyword">case</span> MethodType<a href="#3364234" title="Any" id="3364237" class="delimiter">(</a><a href="../../../reflect/internal/Types.scala.html#410769" title="List[Duplicators.this.global.Symbol]" id="3364235">_</a>, <a href="../../../reflect/internal/Types.scala.html#410771" title="Duplicators.this.global.Type" id="1036843">res</a><span class="delimiter">)</span> =&gt;
          <a href="../../../Predef.scala.html#7605" title="implicit scala.Predef.any2stringadd : (x: Any)scala.runtime.StringAdd">res</a> <a href="../../../runtime/StringAdd.scala.html#60046" title="(other: String)String">+</a> <span title="String(&quot;, &quot;)" class="string">&quot;, &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#1036843" title="Duplicators.this.global.Type">res</a>.<a href="../../../reflect/internal/Types.scala.html#408415" title="=&gt; Duplicators.this.global.TypeBounds">bounds</a>.<a href="../../../reflect/internal/Types.scala.html#410584" title="=&gt; Duplicators.this.global.Type">hi</a> <span title="(x$1: Any)String">+</span> <span title="String(&quot;, &quot;)" class="string">&quot;, &quot;</span> <a href="#3364239" title="(x: Any)Any">+</a> <span class="delimiter">(</span><a href="#1036843" title="Duplicators.this.global.Type">res</a>.<a href="../../../reflect/internal/Types.scala.html#408415" title="=&gt; Duplicators.this.global.TypeBounds">bounds</a>.<a href="../../../reflect/internal/Types.scala.html#410584" title="=&gt; Duplicators.this.global.Type">hi</a> <span class="keyword">match</span> <span class="delimiter">{</span>
            <span class="keyword">case</span> TypeRef<a href="#3364223" title="Any" id="3364227" class="delimiter">(</a><a href="../../../reflect/internal/Types.scala.html#410887" title="Duplicators.this.global.Type" id="3364224">_</a>, <a href="../../../reflect/internal/Types.scala.html#410889" title="Duplicators.this.global.Symbol" id="3364225">_</a>, <a href="../../../reflect/internal/Types.scala.html#410891" title="List[Duplicators.this.global.Type]" id="1036851">args</a><span class="delimiter">)</span> <span class="keyword">if</span> <span class="delimiter">(</span><a href="#1036851" title="List[Duplicators.this.global.Type]">args</a>.<a href="../../../collection/LinearSeqOptimized.scala.html#86373" title="=&gt; Int">length</a> <a href="../../../Int.scala.html#57125" title="(x: Int)Boolean">&gt;</a> <span title="Int(0)" class="int">0</span><span class="delimiter">)</span> =&gt; <a href="../../../collection/LinearSeqOptimized.scala.html#86374" title="(n: Int)Duplicators.this.global.Type">args</a><a href="../../../Predef.scala.html#7605" title="implicit scala.Predef.any2stringadd : (x: Any)scala.runtime.StringAdd" class="delimiter">(</a><span title="Int(0)" class="int">0</span><span class="delimiter">)</span> <a href="../../../runtime/StringAdd.scala.html#60046" title="(other: String)String">+</a> <span title="String(&quot;, &quot;)" class="string">&quot;, &quot;</span> <a href="#3364229" title="(x: Any)Any">+</a> <a href="../../../collection/LinearSeqOptimized.scala.html#86374" title="(n: Int)Duplicators.this.global.Type">args</a><span class="delimiter">(</span><span title="Int(0)" class="int">0</span><span class="delimiter">)</span>.<a href="../../../reflect/internal/Types.scala.html#408415" title="=&gt; Duplicators.this.global.TypeBounds">bounds</a>.<a href="../../../reflect/internal/Types.scala.html#410584" title="=&gt; Duplicators.this.global.Type">hi</a>
            <span class="keyword">case</span> _ =&gt; <span title="String(&quot;non-tref: &quot;)" class="string">&quot;non-tref: &quot;</span> <a href="#3364229" title="(x: Any)Any">+</a> <a href="#1036843" title="Duplicators.this.global.Type">res</a>.<a href="../../../reflect/internal/Types.scala.html#408415" title="=&gt; Duplicators.this.global.TypeBounds">bounds</a>.<a href="../../../reflect/internal/Types.scala.html#410584" title="=&gt; Duplicators.this.global.Type">hi</a>.<span title="()Class[_]">getClass</span>
          <span class="delimiter">}</span><span class="delimiter">)</span>
        <span class="keyword">case</span> _ =&gt;
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>

    /** Optionally cast this tree into some other type, if required.
     *  Unless overridden, just returns the tree.
     */
    <span class="keyword">def</span> <a title="(tree: Duplicators.this.global.Tree, pt: Duplicators.this.global.Type)Duplicators.this.global.Tree" id="1006663">castType</a><span class="delimiter">(</span><a title="Duplicators.this.global.Tree" id="1006676">tree</a>: <a href="../../../reflect/internal/Trees.scala.html#407938" title="Duplicators.this.global.Tree">Tree</a>, <a title="Duplicators.this.global.Type" id="1006677">pt</a>: <a href="../../../reflect/internal/Types.scala.html#407270" title="Duplicators.this.global.Type">Type</a><span class="delimiter">)</span>: <a href="../../../reflect/internal/Trees.scala.html#407938" title="Duplicators.this.global.Tree">Tree</a> = <a href="#1006676" title="Duplicators.this.global.Tree">tree</a>

    /** Special typer method for re-type checking trees. It expects a typed tree.
     *  Returns a typed tree that has fresh symbols for all definitions in the original tree.
     *
     *  Each definition tree is visited and its symbol added to the invalidSyms map (except LabelDefs),
     *  then cleared (forcing the namer to create fresh symbols).
     *  All invalid symbols found in trees are cleared (except for LabelDefs), forcing the
     *  typechecker to look for fresh ones in the context.
     *
     *  Type trees are typed by substituting old symbols for new ones (@see fixType).
     *
     *  LabelDefs are not typable from trees alone, unless they have the type ()Unit. Therefore,
     *  their symbols are recreated ad-hoc and their types are fixed inline, instead of letting the
     *  namer/typer handle them, or Idents that refer to them.
     */
    <span class="keyword">override</span> <span class="keyword">def</span> <a title="(tree: Duplicators.this.global.Tree, mode: Int, pt: Duplicators.this.global.Type)Duplicators.this.global.Tree" id="1006664">typed</a><span class="delimiter">(</span><a title="Duplicators.this.global.Tree" id="1035549">tree</a>: <a href="../../../reflect/internal/Trees.scala.html#407938" title="Duplicators.this.global.Tree">Tree</a>, <a title="Int" id="1035550">mode</a>: <a href="../../../Int.scala.html#321" title="Int">Int</a>, <a title="Duplicators.this.global.Type" id="1035551">pt</a>: <a href="../../../reflect/internal/Types.scala.html#407270" title="Duplicators.this.global.Type">Type</a><span class="delimiter">)</span>: <a href="../../../reflect/internal/Trees.scala.html#407938" title="Duplicators.this.global.Tree">Tree</a> = <span class="delimiter">{</span>
      <a href="../Global.scala.html#537517" title="(msg: =&gt; String)Unit">debuglog</a><span class="delimiter">(</span><span title="String(&quot;typing &quot;)" class="string">&quot;typing &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#1035549" title="Duplicators.this.global.Tree">tree</a> <span title="(x$1: Any)String">+</span> <span title="String(&quot;: &quot;)" class="string">&quot;: &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#1035549" title="Duplicators.this.global.Tree">tree</a>.<a href="../../../reflect/internal/Trees.scala.html#408573" title="=&gt; Duplicators.this.global.Type">tpe</a> <span title="(x$1: Any)String">+</span> <span title="String(&quot;, &quot;)" class="string">&quot;, &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#1035549" title="Duplicators.this.global.Tree">tree</a>.<span title="()Class[_]">getClass</span><span class="delimiter">)</span>
      <span class="keyword">val</span> <a title="Duplicators.this.global.Symbol" id="1036882">origtreesym</a> = <a href="#1035549" title="Duplicators.this.global.Tree">tree</a>.<a href="../../../reflect/internal/Trees.scala.html#408577" title="=&gt; Duplicators.this.global.Symbol">symbol</a>
      <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#1035549" title="Duplicators.this.global.Tree">tree</a>.<a href="../../../reflect/internal/Trees.scala.html#408580" title="=&gt; Boolean">hasSymbol</a> <a href="../../../Boolean.scala.html#57826" title="(x: Boolean)Boolean">&amp;&amp;</a> <a href="#1035549" title="Duplicators.this.global.Tree">tree</a>.<a href="../../../reflect/internal/Trees.scala.html#408577" title="=&gt; Duplicators.this.global.Symbol">symbol</a> <span title="(x$1: AnyRef)Boolean">!=</span> <a href="../../../reflect/internal/Symbols.scala.html#407184" title="=&gt; Duplicators.this.global.NoSymbol">NoSymbol</a>
          <a href="../../../Boolean.scala.html#57826" title="(x: Boolean)Boolean">&amp;&amp;</a> <a href="../../../Boolean.scala.html#57822" title="=&gt; Boolean">!</a><a href="#1035549" title="Duplicators.this.global.Tree">tree</a>.<a href="../../../reflect/internal/Trees.scala.html#408577" title="=&gt; Duplicators.this.global.Symbol">symbol</a>.<a href="../../../reflect/internal/Symbols.scala.html#411218" title="=&gt; Boolean">isLabel</a>  // labels cannot be retyped by the type checker as LabelDef has no ValDef/return type trees
          <a href="../../../Boolean.scala.html#57826" title="(x: Boolean)Boolean">&amp;&amp;</a> <a href="#979849" title="=&gt; scala.collection.mutable.Map[Duplicators.this.global.Symbol,Duplicators.this.global.Tree]">invalidSyms</a>.<a href="../../../collection/MapLike.scala.html#87537" title="(key: Duplicators.this.global.Symbol)Boolean">isDefinedAt</a><span class="delimiter">(</span><a href="#1035549" title="Duplicators.this.global.Tree">tree</a>.<a href="../../../reflect/internal/Trees.scala.html#408577" title="=&gt; Duplicators.this.global.Symbol">symbol</a><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">{</span>
        <a href="../Global.scala.html#537517" title="(msg: =&gt; String)Unit">debuglog</a><span class="delimiter">(</span><span title="String(&quot;removed symbol &quot;)" class="string">&quot;removed symbol &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#1035549" title="Duplicators.this.global.Tree">tree</a>.<a href="../../../reflect/internal/Trees.scala.html#408577" title="=&gt; Duplicators.this.global.Symbol">symbol</a><span class="delimiter">)</span>
        <a href="#1035549" title="Duplicators.this.global.Tree">tree</a>.<a href="../../../reflect/internal/Trees.scala.html#408578" title="(sym: Duplicators.this.global.Symbol)Unit">symbol</a> = <a href="../../../reflect/internal/Symbols.scala.html#407184" title="=&gt; Duplicators.this.global.NoSymbol">NoSymbol</a>
      <span class="delimiter">}</span>

      <a href="#1035549" title="Duplicators.this.global.Tree">tree</a> <span class="keyword">match</span> <span class="delimiter">{</span>
        <span class="keyword">case</span> ttree @ TypeTree<a href="#3364275" title="Duplicators.this.global.Tree" id="3364277" class="delimiter">(</a><span class="delimiter">)</span> =&gt;
          // log(&quot;fixing tpe: &quot; + tree.tpe + &quot; with sym: &quot; + tree.tpe.typeSymbol)
          ttree.<a href="../../../reflect/internal/Trees.scala.html#408574" title="(t: Duplicators.this.global.Type)Unit">tpe</a> = <a href="#1006657" title="(tpe: Duplicators.this.global.Type)Duplicators.this.global.Type">fixType</a><span class="delimiter">(</span>ttree.<a href="../../../reflect/internal/Trees.scala.html#408573" title="=&gt; Duplicators.this.global.Type">tpe</a><span class="delimiter">)</span>
          ttree

        <span class="keyword">case</span> Block<a href="#3364275" title="Duplicators.this.global.Tree" id="3364279" class="delimiter">(</a><a href="../../../reflect/internal/Trees.scala.html#410192" title="List[Duplicators.this.global.Tree]" id="1036906">stats</a>, <a href="../../../reflect/internal/Trees.scala.html#410194" title="Duplicators.this.global.Tree" id="1036907">res</a><span class="delimiter">)</span> =&gt;
          <a href="../Global.scala.html#537517" title="(msg: =&gt; String)Unit">debuglog</a><span class="delimiter">(</span><span title="String(&quot;invalidating block&quot;)" class="string">&quot;invalidating block&quot;</span><span class="delimiter">)</span>
          <a href="#1006660" title="(stats: List[Duplicators.this.global.Tree], owner: Duplicators.this.global.Symbol)Unit">invalidateAll</a><span class="delimiter">(</span><a href="#1036906" title="List[Duplicators.this.global.Tree]">stats</a><span class="delimiter">)</span>
          <a href="#1006659" title="(tree: Duplicators.this.global.Tree, owner: Duplicators.this.global.Symbol)Unit">invalidate</a><span class="delimiter">(</span><a href="#1036907" title="Duplicators.this.global.Tree">res</a><span class="delimiter">)</span>
          <a href="#1035549" title="Duplicators.this.global.Tree">tree</a>.<a href="../../../reflect/internal/Trees.scala.html#408574" title="(t: Duplicators.this.global.Type)Unit">tpe</a> = <span title="Null(null)" class="keyword">null</span>
          <a href="#979851" title="Duplicators.this.BodyDuplicator" class="keyword">super</a>.<a href="Typers.scala.html#538698" title="(tree: Duplicators.this.global.Tree, mode: Int, pt: Duplicators.this.global.Type)Duplicators.this.global.Tree">typed</a><span class="delimiter">(</span><a href="#1035549" title="Duplicators.this.global.Tree">tree</a>, <a href="#1035550" title="Int">mode</a>, <a href="#1035551" title="Duplicators.this.global.Type">pt</a><span class="delimiter">)</span>

        <span class="keyword">case</span> ClassDef<a href="#3364275" title="Duplicators.this.global.Tree" id="3364284" class="delimiter">(</a><a href="../../../reflect/internal/Trees.scala.html#410330" title="Duplicators.this.global.Modifiers" id="3364280">_</a>, <a href="../../../reflect/internal/Trees.scala.html#410332" title="Duplicators.this.global.TypeName" id="3364281">_</a>, <a href="../../../reflect/internal/Trees.scala.html#410334" title="List[Duplicators.this.global.TypeDef]" id="3364282">_</a>, <a href="../../../reflect/internal/Trees.scala.html#410336" title="Duplicators.this.global.Template" id="1036934">tmpl</a> @ Template<span class="delimiter">(</span><a href="../../../reflect/internal/Trees.scala.html#410203" title="List[Duplicators.this.global.Tree]" id="1036947">parents</a>, <a href="../../../reflect/internal/Trees.scala.html#410205" title="Duplicators.this.global.ValDef" id="3364285">_</a>, <a href="../../../reflect/internal/Trees.scala.html#410207" title="List[Duplicators.this.global.Tree]" id="1036948">stats</a><span class="delimiter">)</span><span class="delimiter">)</span> =&gt;
          // log(&quot;invalidating classdef &quot; + tree)
          <a href="#1036934" title="Duplicators.this.global.Template">tmpl</a>.<a href="../../../reflect/internal/Trees.scala.html#409940" title="(x$1: Duplicators.this.global.Symbol)Unit">symbol</a> = <a href="#1035549" title="Duplicators.this.global.Tree">tree</a>.<a href="../../../reflect/internal/Trees.scala.html#408577" title="=&gt; Duplicators.this.global.Symbol">symbol</a>.<a href="../../../reflect/internal/Symbols.scala.html#411112" title="(pos: Duplicators.this.global.Position)Duplicators.this.global.TermSymbol">newLocalDummy</a><span class="delimiter">(</span><a href="#1035549" title="Duplicators.this.global.Tree">tree</a>.<a href="../../../reflect/internal/Trees.scala.html#408571" title="=&gt; Duplicators.this.global.Position">pos</a><span class="delimiter">)</span>
          <a href="#1006660" title="(stats: List[Duplicators.this.global.Tree], owner: Duplicators.this.global.Symbol)Unit">invalidateAll</a><span class="delimiter">(</span><a href="#1036948" title="List[Duplicators.this.global.Tree]">stats</a>, <a href="#1035549" title="Duplicators.this.global.Tree">tree</a>.<a href="../../../reflect/internal/Trees.scala.html#408577" title="=&gt; Duplicators.this.global.Symbol">symbol</a><span class="delimiter">)</span>
          <a href="#1035549" title="Duplicators.this.global.Tree">tree</a>.<a href="../../../reflect/internal/Trees.scala.html#408574" title="(t: Duplicators.this.global.Type)Unit">tpe</a> = <span title="Null(null)" class="keyword">null</span>
          <a href="#979851" title="Duplicators.this.BodyDuplicator" class="keyword">super</a>.<a href="Typers.scala.html#538698" title="(tree: Duplicators.this.global.Tree, mode: Int, pt: Duplicators.this.global.Type)Duplicators.this.global.Tree">typed</a><span class="delimiter">(</span><a href="#1035549" title="Duplicators.this.global.Tree">tree</a>, <a href="#1035550" title="Int">mode</a>, <a href="#1035551" title="Duplicators.this.global.Type">pt</a><span class="delimiter">)</span>

        <span class="keyword">case</span> ddef @ DefDef<a href="#3364275" title="Duplicators.this.global.Tree" id="3364291" class="delimiter">(</a><a href="../../../reflect/internal/Trees.scala.html#410278" title="Duplicators.this.global.Modifiers" id="3364286">_</a>, <a href="../../../reflect/internal/Trees.scala.html#410280" title="Duplicators.this.global.Name" id="3364287">_</a>, <a href="../../../reflect/internal/Trees.scala.html#410282" title="List[Duplicators.this.global.TypeDef]" id="3364288">_</a>, <a href="../../../reflect/internal/Trees.scala.html#410284" title="List[List[Duplicators.this.global.ValDef]]" id="3364289">_</a>, <a href="../../../reflect/internal/Trees.scala.html#410286" title="Duplicators.this.global.Tree" id="1036965">tpt</a>, <a href="../../../reflect/internal/Trees.scala.html#410288" title="Duplicators.this.global.Tree" id="1036966">rhs</a><span class="delimiter">)</span> =&gt;
          ddef.<a href="../../../reflect/internal/Trees.scala.html#410286" title="=&gt; Duplicators.this.global.Tree">tpt</a>.<a href="../../../reflect/internal/Trees.scala.html#408574" title="(t: Duplicators.this.global.Type)Unit">tpe</a> = <a href="#1006657" title="(tpe: Duplicators.this.global.Type)Duplicators.this.global.Type">fixType</a><span class="delimiter">(</span>ddef.<a href="../../../reflect/internal/Trees.scala.html#410286" title="=&gt; Duplicators.this.global.Tree">tpt</a>.<a href="../../../reflect/internal/Trees.scala.html#408573" title="=&gt; Duplicators.this.global.Type">tpe</a><span class="delimiter">)</span>
          ddef.<a href="../../../reflect/internal/Trees.scala.html#408574" title="(t: Duplicators.this.global.Type)Unit">tpe</a> = <span title="Null(null)" class="keyword">null</span>
          <a href="#979851" title="Duplicators.this.BodyDuplicator" class="keyword">super</a>.<a href="Typers.scala.html#538698" title="(tree: Duplicators.this.global.Tree, mode: Int, pt: Duplicators.this.global.Type)Duplicators.this.global.Tree">typed</a><span class="delimiter">(</span>ddef, <a href="#1035550" title="Int">mode</a>, <a href="#1035551" title="Duplicators.this.global.Type">pt</a><span class="delimiter">)</span>

        <span class="keyword">case</span> vdef @ ValDef<a href="#3364275" title="Duplicators.this.global.Tree" id="3364293" class="delimiter">(</a><a href="../../../reflect/internal/Trees.scala.html#410298" title="Duplicators.this.global.Modifiers" id="1036980">mods</a>, <a href="../../../reflect/internal/Trees.scala.html#410300" title="Duplicators.this.global.TermName" id="1036981">name</a>, <a href="../../../reflect/internal/Trees.scala.html#410302" title="Duplicators.this.global.Tree" id="1036982">tpt</a>, <a href="../../../reflect/internal/Trees.scala.html#410304" title="Duplicators.this.global.Tree" id="1036983">rhs</a><span class="delimiter">)</span> =&gt;
          // log(&quot;vdef fixing tpe: &quot; + tree.tpe + &quot; with sym: &quot; + tree.tpe.typeSymbol + &quot; and &quot; + invalidSyms)
          //if (mods.hasFlag(Flags.LAZY)) vdef.symbol.resetFlag(Flags.MUTABLE) // Martin to Iulian: lazy vars can now appear because they are no longer boxed; Please check that deleting this statement is OK.
          vdef.<a href="../../../reflect/internal/Trees.scala.html#410302" title="=&gt; Duplicators.this.global.Tree">tpt</a>.<a href="../../../reflect/internal/Trees.scala.html#408574" title="(t: Duplicators.this.global.Type)Unit">tpe</a> = <a href="#1006657" title="(tpe: Duplicators.this.global.Type)Duplicators.this.global.Type">fixType</a><span class="delimiter">(</span>vdef.<a href="../../../reflect/internal/Trees.scala.html#410302" title="=&gt; Duplicators.this.global.Tree">tpt</a>.<a href="../../../reflect/internal/Trees.scala.html#408573" title="=&gt; Duplicators.this.global.Type">tpe</a><span class="delimiter">)</span>
          vdef.<a href="../../../reflect/internal/Trees.scala.html#408574" title="(t: Duplicators.this.global.Type)Unit">tpe</a> = <span title="Null(null)" class="keyword">null</span>
          <a href="#979851" title="Duplicators.this.BodyDuplicator" class="keyword">super</a>.<a href="Typers.scala.html#538698" title="(tree: Duplicators.this.global.Tree, mode: Int, pt: Duplicators.this.global.Type)Duplicators.this.global.Tree">typed</a><span class="delimiter">(</span>vdef, <a href="#1035550" title="Int">mode</a>, <a href="#1035551" title="Duplicators.this.global.Type">pt</a><span class="delimiter">)</span>

        <span class="keyword">case</span> ldef @ LabelDef<a href="#3364275" title="Duplicators.this.global.Tree" id="3364295" class="delimiter">(</a><a href="../../../reflect/internal/Trees.scala.html#410239" title="Duplicators.this.global.TermName" id="1036996">name</a>, <a href="../../../reflect/internal/Trees.scala.html#410241" title="List[Duplicators.this.global.Ident]" id="1036997">params</a>, <a href="../../../reflect/internal/Trees.scala.html#410243" title="Duplicators.this.global.Tree" id="1036998">rhs</a><span class="delimiter">)</span> =&gt;
          // log(&quot;label def: &quot; + ldef)
          // in case the rhs contains any definitions -- TODO: is this necessary?
          <a href="#1006659" title="(tree: Duplicators.this.global.Tree, owner: Duplicators.this.global.Symbol)Unit">invalidate</a><span class="delimiter">(</span><a href="#1036998" title="Duplicators.this.global.Tree">rhs</a><span class="delimiter">)</span>
          ldef.<a href="../../../reflect/internal/Trees.scala.html#408574" title="(t: Duplicators.this.global.Type)Unit">tpe</a> = <span title="Null(null)" class="keyword">null</span>

          // is this LabelDef generated by tailcalls?
          <span class="keyword">val</span> <a title="Boolean" id="1036999">isTailLabel</a> = <span class="delimiter">(</span>ldef.<a href="../../../reflect/internal/Trees.scala.html#410241" title="=&gt; List[Duplicators.this.global.Ident]">params</a>.<a href="../../../collection/LinearSeqOptimized.scala.html#86373" title="=&gt; Int">length</a> <a href="../../../Int.scala.html#57132" title="(x: Int)Boolean">&gt;=</a> <span title="Int(1)" class="int">1</span><span class="delimiter">)</span> <a href="../../../Boolean.scala.html#57826" title="(x: Boolean)Boolean">&amp;&amp;</a> <span class="delimiter">(</span>ldef.<a href="../../../reflect/internal/Trees.scala.html#410241" title="=&gt; List[Duplicators.this.global.Ident]">params</a>.<a href="../../../collection/IterableLike.scala.html#58577" title="=&gt; Duplicators.this.global.Ident">head</a>.<a href="../../../reflect/internal/Trees.scala.html#409987" title="=&gt; Duplicators.this.global.Name">name</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="../../../reflect/internal/StdNames.scala.html#407871" title="Duplicators.this.global.nme.type">nme</a>.<a href="../../../reflect/internal/StdNames.scala.html#414040" title="=&gt; Duplicators.this.global.nme.NameType">THIS</a><span class="delimiter">)</span>

          // the typer does not create the symbols for a LabelDef's params, so unless they were created before we need
          // to do it manually here -- but for the tailcalls-generated labels, ValDefs are created before the LabelDef,
          // so we just need to change the tree to point to the updated symbols
          <span class="keyword">def</span> <a title="(p: Duplicators.this.global.Tree)Duplicators.this.global.Ident" id="1037000">newParam</a><span class="delimiter">(</span><a title="Duplicators.this.global.Tree" id="1037015">p</a>: <a href="../../../reflect/internal/Trees.scala.html#407938" title="Duplicators.this.global.Tree">Tree</a><span class="delimiter">)</span>: <a href="../../../reflect/internal/Trees.scala.html#408054" title="Duplicators.this.global.Ident">Ident</a> =
            <span title="Duplicators.this.global.Ident" class="keyword">if</span> <span class="delimiter">(</span><a href="#1036999" title="Boolean">isTailLabel</a><span class="delimiter">)</span>
              <a href="../../../reflect/internal/Trees.scala.html#408127" title="(sym: Duplicators.this.global.Symbol)Duplicators.this.global.Ident">Ident</a><span class="delimiter">(</span><a href="#1006658" title="(sym: Duplicators.this.global.Symbol)Duplicators.this.global.Symbol">updateSym</a><span class="delimiter">(</span><a href="#1037015" title="Duplicators.this.global.Tree">p</a>.<a href="../../../reflect/internal/Trees.scala.html#408577" title="=&gt; Duplicators.this.global.Symbol">symbol</a><span class="delimiter">)</span><span class="delimiter">)</span>
            <span class="keyword">else</span> <span class="delimiter">{</span>
              <span class="keyword">val</span> <a title="Duplicators.this.global.Symbol#TypeOfClonedSymbol" id="1037025">newsym</a> = <a href="#1037015" title="Duplicators.this.global.Tree">p</a>.<a href="../../../reflect/internal/Trees.scala.html#408577" title="=&gt; Duplicators.this.global.Symbol">symbol</a>.<a href="../../../reflect/internal/Symbols.scala.html#411417" title="=&gt; Duplicators.this.global.Symbol#TypeOfClonedSymbol">cloneSymbol</a> //(context.owner) // TODO owner?
              <a href="../../../reflect/internal/Trees.scala.html#408127" title="(sym: Duplicators.this.global.Symbol)Duplicators.this.global.Ident">Ident</a><span class="delimiter">(</span><a href="#1037025" title="Duplicators.this.global.Symbol#TypeOfClonedSymbol">newsym</a>.<a href="../../../reflect/internal/Symbols.scala.html#411369" title="(info: Duplicators.this.global.Type)newsym.type">setInfo</a><span class="delimiter">(</span><a href="#1006657" title="(tpe: Duplicators.this.global.Type)Duplicators.this.global.Type">fixType</a><span class="delimiter">(</span><a href="#1037015" title="Duplicators.this.global.Tree">p</a>.<a href="../../../reflect/internal/Trees.scala.html#408577" title="=&gt; Duplicators.this.global.Symbol">symbol</a>.<a href="../../../reflect/internal/Symbols.scala.html#411367" title="=&gt; Duplicators.this.global.Type">info</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
            <span class="delimiter">}</span>

          <span class="keyword">val</span> <a title="List[Duplicators.this.global.Ident]" id="1037001">params1</a> = <a href="#1036997" title="List[Duplicators.this.global.Ident]">params</a> <a href="../../../collection/TraversableLike.scala.html#58063" title="(f: Duplicators.this.global.Ident =&gt; Duplicators.this.global.Ident)(implicit bf: scala.collection.generic.CanBuildFrom[List[Duplicators.this.global.Ident],Duplicators.this.global.Ident,List[Duplicators.this.global.Ident]])List[Duplicators.this.global.Ident]">map</a> <a href="#1037000" title="(p: Duplicators.this.global.Tree)Duplicators.this.global.Ident">newParam</a>
          <span class="keyword">val</span> <a title="Duplicators.this.global.Tree" id="1037002">rhs1</a> = <span class="delimiter">(</span><span title="Duplicators.this.global.TreeSubstituter" class="keyword">new</span> <a href="../../../reflect/internal/Trees.scala.html#408138" title="Duplicators.this.global.TreeSubstituter">TreeSubstituter</a><span class="delimiter">(</span><a href="#1036997" title="List[Duplicators.this.global.Ident]">params</a> <a href="../../../collection/TraversableLike.scala.html#58063" title="(f: Duplicators.this.global.Ident =&gt; Duplicators.this.global.Symbol)(implicit bf: scala.collection.generic.CanBuildFrom[List[Duplicators.this.global.Ident],Duplicators.this.global.Symbol,List[Duplicators.this.global.Symbol]])List[Duplicators.this.global.Symbol]">map</a> <span class="delimiter">(</span><a href="#1037140" title="Duplicators.this.global.Ident">_</a>.<a href="../../../reflect/internal/Trees.scala.html#409939" title="=&gt; Duplicators.this.global.Symbol">symbol</a><span class="delimiter">)</span>, <a href="#1037001" title="List[Duplicators.this.global.Ident]">params1</a><span class="delimiter">)</span> <a href="../../../reflect/internal/Trees.scala.html#486156" title="(tree: Duplicators.this.global.Tree)Duplicators.this.global.Tree">transform</a> <a href="#1036998" title="Duplicators.this.global.Tree">rhs</a><span class="delimiter">)</span> // TODO: duplicate?
          <a href="#1037002" title="Duplicators.this.global.Tree">rhs1</a>.<a href="../../../reflect/internal/Trees.scala.html#408574" title="(t: Duplicators.this.global.Type)Unit">tpe</a> = <span title="Null(null)" class="keyword">null</span>

          <a href="#979851" title="Duplicators.this.BodyDuplicator" class="keyword">super</a>.<a href="Typers.scala.html#538698" title="(tree: Duplicators.this.global.Tree, mode: Int, pt: Duplicators.this.global.Type)Duplicators.this.global.Tree">typed</a><span class="delimiter">(</span><a href="../../../reflect/api/Trees.scala.html#56462" title="=&gt; Duplicators.this.global.TreeCopier">treeCopy</a>.<a href="../../../reflect/api/Trees.scala.html#405377" title="(tree: Duplicators.this.global.Tree, name: Duplicators.this.global.Name, params: List[Duplicators.this.global.Ident], rhs: Duplicators.this.global.Tree)Duplicators.this.global.LabelDef">LabelDef</a><span class="delimiter">(</span><a href="#1035549" title="Duplicators.this.global.Tree">tree</a>, <a href="#1036996" title="Duplicators.this.global.TermName">name</a>, <a href="#1037001" title="List[Duplicators.this.global.Ident]">params1</a>, <a href="#1037002" title="Duplicators.this.global.Tree">rhs1</a><span class="delimiter">)</span>, <a href="#1035550" title="Int">mode</a>, <a href="#1035551" title="Duplicators.this.global.Type">pt</a><span class="delimiter">)</span>

        <span class="keyword">case</span> Bind<a href="#3364275" title="Duplicators.this.global.Tree" id="3364298" class="delimiter">(</a><a href="../../../reflect/internal/Trees.scala.html#410157" title="Duplicators.this.global.Name" id="1037194">name</a>, <a href="../../../reflect/internal/Trees.scala.html#410159" title="Duplicators.this.global.Tree" id="3364296">_</a><span class="delimiter">)</span> =&gt;
          // log(&quot;bind: &quot; + tree)
          <a href="#1006659" title="(tree: Duplicators.this.global.Tree, owner: Duplicators.this.global.Symbol)Unit">invalidate</a><span class="delimiter">(</span><a href="#1035549" title="Duplicators.this.global.Tree">tree</a><span class="delimiter">)</span>
          <a href="#1035549" title="Duplicators.this.global.Tree">tree</a>.<a href="../../../reflect/internal/Trees.scala.html#408574" title="(t: Duplicators.this.global.Type)Unit">tpe</a> = <span title="Null(null)" class="keyword">null</span>
          <a href="#979851" title="Duplicators.this.BodyDuplicator" class="keyword">super</a>.<a href="Typers.scala.html#538698" title="(tree: Duplicators.this.global.Tree, mode: Int, pt: Duplicators.this.global.Type)Duplicators.this.global.Tree">typed</a><span class="delimiter">(</span><a href="#1035549" title="Duplicators.this.global.Tree">tree</a>, <a href="#1035550" title="Int">mode</a>, <a href="#1035551" title="Duplicators.this.global.Type">pt</a><span class="delimiter">)</span>

        <span class="keyword">case</span> Ident<a href="#3364275" title="Boolean" id="3364301" class="delimiter">(</a><a href="../../../reflect/internal/Trees.scala.html#409987" title="Duplicators.this.global.Name" id="3364299">_</a><span class="delimiter">)</span> <span class="keyword">if</span> <a href="#1035549" title="Duplicators.this.global.Tree">tree</a>.<a href="../../../reflect/internal/Trees.scala.html#408577" title="=&gt; Duplicators.this.global.Symbol">symbol</a>.<a href="../../../reflect/internal/Symbols.scala.html#411218" title="=&gt; Boolean">isLabel</a> =&gt;
          <a href="../Global.scala.html#537517" title="(msg: =&gt; String)Unit">debuglog</a><span class="delimiter">(</span><span title="String(&quot;Ident to labeldef &quot;)" class="string">&quot;Ident to labeldef &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#1035549" title="Duplicators.this.global.Tree">tree</a> <span title="(x$1: Any)String">+</span> <span title="String(&quot; switched to &quot;)" class="string">&quot; switched to &quot;</span><span class="delimiter">)</span>
          <a href="#1035549" title="Duplicators.this.global.Tree">tree</a>.<a href="../../../reflect/internal/Trees.scala.html#408578" title="(sym: Duplicators.this.global.Symbol)Unit">symbol</a> = <a href="#1006658" title="(sym: Duplicators.this.global.Symbol)Duplicators.this.global.Symbol">updateSym</a><span class="delimiter">(</span><a href="#1035549" title="Duplicators.this.global.Tree">tree</a>.<a href="../../../reflect/internal/Trees.scala.html#408577" title="=&gt; Duplicators.this.global.Symbol">symbol</a><span class="delimiter">)</span>
          <a href="#1035549" title="Duplicators.this.global.Tree">tree</a>.<a href="../../../reflect/internal/Trees.scala.html#408574" title="(t: Duplicators.this.global.Type)Unit">tpe</a> = <span title="Null(null)" class="keyword">null</span>
          <a href="#979851" title="Duplicators.this.BodyDuplicator" class="keyword">super</a>.<a href="Typers.scala.html#538698" title="(tree: Duplicators.this.global.Tree, mode: Int, pt: Duplicators.this.global.Type)Duplicators.this.global.Tree">typed</a><span class="delimiter">(</span><a href="#1035549" title="Duplicators.this.global.Tree">tree</a>, <a href="#1035550" title="Int">mode</a>, <a href="#1035551" title="Duplicators.this.global.Type">pt</a><span class="delimiter">)</span>

        <span class="keyword">case</span> Ident<span class="delimiter">(</span><a href="../../../reflect/internal/Trees.scala.html#409987" title="Duplicators.this.global.Name" id="3364302">_</a><span class="delimiter">)</span> <span class="keyword">if</span> <span class="delimiter">(</span><a href="#1036882" title="Duplicators.this.global.Symbol">origtreesym</a> <span title="(x$1: AnyRef)Boolean">ne</span> <span title="Null(null)" class="keyword">null</span><span class="delimiter">)</span> <a href="../../../Boolean.scala.html#57826" title="(x: Boolean)Boolean">&amp;&amp;</a> <a href="#1036882" title="Duplicators.this.global.Symbol">origtreesym</a>.<a href="../../../reflect/internal/HasFlags.scala.html#409857" title="=&gt; Boolean">isLazy</a> =&gt;
          <a href="../Global.scala.html#537517" title="(msg: =&gt; String)Unit">debuglog</a><span class="delimiter">(</span><span title="String(&quot;Ident to a lazy val &quot;)" class="string">&quot;Ident to a lazy val &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#1035549" title="Duplicators.this.global.Tree">tree</a> <span title="(x$1: Any)String">+</span> <span title="String(&quot;, &quot;)" class="string">&quot;, &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#1035549" title="Duplicators.this.global.Tree">tree</a>.<a href="../../../reflect/internal/Trees.scala.html#408577" title="=&gt; Duplicators.this.global.Symbol">symbol</a> <span title="(x$1: Any)String">+</span> <span title="String(&quot; updated to &quot;)" class="string">&quot; updated to &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#1036882" title="Duplicators.this.global.Symbol">origtreesym</a><span class="delimiter">)</span>
          <a href="#1035549" title="Duplicators.this.global.Tree">tree</a>.<a href="../../../reflect/internal/Trees.scala.html#408578" title="(sym: Duplicators.this.global.Symbol)Unit">symbol</a> = <a href="#1006658" title="(sym: Duplicators.this.global.Symbol)Duplicators.this.global.Symbol">updateSym</a><span class="delimiter">(</span><a href="#1036882" title="Duplicators.this.global.Symbol">origtreesym</a><span class="delimiter">)</span>
          <a href="#1035549" title="Duplicators.this.global.Tree">tree</a>.<a href="../../../reflect/internal/Trees.scala.html#408574" title="(t: Duplicators.this.global.Type)Unit">tpe</a> = <span title="Null(null)" class="keyword">null</span>
          <a href="#979851" title="Duplicators.this.BodyDuplicator" class="keyword">super</a>.<a href="Typers.scala.html#538698" title="(tree: Duplicators.this.global.Tree, mode: Int, pt: Duplicators.this.global.Type)Duplicators.this.global.Tree">typed</a><span class="delimiter">(</span><a href="#1035549" title="Duplicators.this.global.Tree">tree</a>, <a href="#1035550" title="Int">mode</a>, <a href="#1035551" title="Duplicators.this.global.Type">pt</a><span class="delimiter">)</span>

        <span class="keyword">case</span> Select<a href="#3364275" title="Duplicators.this.global.Tree" id="3364306" class="delimiter">(</a><a href="../../../reflect/internal/Trees.scala.html#409999" title="Duplicators.this.global.Tree" id="1037224">th</a> @ This<a href="#1037224" title="Duplicators.this.global.Tree" id="3364309" class="delimiter">(</a><a href="../../../reflect/internal/Trees.scala.html#410008" title="Duplicators.this.global.TypeName" id="3364307">_</a><span class="delimiter">)</span>, <a href="../../../reflect/internal/Trees.scala.html#410001" title="Duplicators.this.global.Name" id="1037230">sel</a><span class="delimiter">)</span> <span class="keyword">if</span> <span class="delimiter">(</span><a href="#979840" title="=&gt; Duplicators.this.global.Symbol">oldClassOwner</a> <span title="(x$1: AnyRef)Boolean">ne</span> <span title="Null(null)" class="keyword">null</span><span class="delimiter">)</span> <a href="../../../Boolean.scala.html#57826" title="(x: Boolean)Boolean">&amp;&amp;</a> <span class="delimiter">(</span>th.<a href="../../../reflect/internal/Trees.scala.html#409939" title="=&gt; Duplicators.this.global.Symbol">symbol</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="#979840" title="=&gt; Duplicators.this.global.Symbol">oldClassOwner</a><span class="delimiter">)</span> =&gt;
          // log(&quot;selection on this, no type ascription required&quot;)
          // we use the symbol name instead of the tree name because the symbol may have been
          // name mangled, rendering the tree name obsolete
          // log(tree)
          <span class="keyword">val</span> <a title="Duplicators.this.global.Tree" id="1037236">t</a> = <a href="#979851" title="Duplicators.this.BodyDuplicator" class="keyword">super</a>.<a href="Typers.scala.html#538702" title="(pos: Duplicators.this.global.Position, mode: Int, pt: Duplicators.this.global.Type)(tree: Duplicators.this.global.Tree)Duplicators.this.global.Tree">typedPos</a><span class="delimiter">(</span><a href="#1035549" title="Duplicators.this.global.Tree">tree</a>.<a href="../../../reflect/internal/Trees.scala.html#408571" title="=&gt; Duplicators.this.global.Position">pos</a>, <a href="#1035550" title="Int">mode</a>, <a href="#1035551" title="Duplicators.this.global.Type">pt</a><span class="delimiter">)</span> <span class="delimiter">{</span>
            <a href="../../../reflect/internal/Trees.scala.html#418089" title="(qualifier: Duplicators.this.global.Tree, name: Duplicators.this.global.Name)Duplicators.this.global.Select">Select</a><span class="delimiter">(</span><a href="../../../reflect/internal/Trees.scala.html#408123" title="(sym: Duplicators.this.global.Symbol)Duplicators.this.global.Tree">This</a><span class="delimiter">(</span><a href="#979843" title="=&gt; Duplicators.this.global.Symbol">newClassOwner</a><span class="delimiter">)</span>, <a href="#1035549" title="Duplicators.this.global.Tree">tree</a>.<a href="../../../reflect/internal/Trees.scala.html#408577" title="=&gt; Duplicators.this.global.Symbol">symbol</a>.<a href="../../../reflect/internal/Symbols.scala.html#411087" title="=&gt; Duplicators.this.global.Symbol#NameType">name</a><span class="delimiter">)</span>
          <span class="delimiter">}</span>
          // log(&quot;typed to: &quot; + t + &quot;; tpe = &quot; + t.tpe + &quot;; &quot; + inspectTpe(t.tpe))
          <a href="#1037236" title="Duplicators.this.global.Tree">t</a>

        <span class="keyword">case</span> This<a href="#3364275" title="Boolean" id="3364312" class="delimiter">(</a><a href="../../../reflect/internal/Trees.scala.html#410008" title="Duplicators.this.global.TypeName" id="3364310">_</a><span class="delimiter">)</span> <span class="keyword">if</span> <span class="delimiter">(</span><a href="#979840" title="=&gt; Duplicators.this.global.Symbol">oldClassOwner</a> <span title="(x$1: AnyRef)Boolean">ne</span> <span title="Null(null)" class="keyword">null</span><span class="delimiter">)</span> <a href="../../../Boolean.scala.html#57826" title="(x: Boolean)Boolean">&amp;&amp;</a> <span class="delimiter">(</span><a href="#1035549" title="Duplicators.this.global.Tree">tree</a>.<a href="../../../reflect/internal/Trees.scala.html#408577" title="=&gt; Duplicators.this.global.Symbol">symbol</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="#979840" title="=&gt; Duplicators.this.global.Symbol">oldClassOwner</a><span class="delimiter">)</span> =&gt;
//          val tree1 = Typed(This(newClassOwner), TypeTree(fixType(tree.tpe.widen)))
          // log(&quot;selection on this: &quot; + tree)
          <span class="keyword">val</span> <a title="Duplicators.this.global.Tree" id="1037287">tree1</a> = <a href="../../../reflect/internal/Trees.scala.html#408123" title="(sym: Duplicators.this.global.Symbol)Duplicators.this.global.Tree">This</a><span class="delimiter">(</span><a href="#979843" title="=&gt; Duplicators.this.global.Symbol">newClassOwner</a><span class="delimiter">)</span>
          // log(&quot;tree1: &quot; + tree1)
          <a href="../Global.scala.html#537517" title="(msg: =&gt; String)Unit">debuglog</a><span class="delimiter">(</span><span title="String(&quot;mapped &quot;)" class="string">&quot;mapped &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#1035549" title="Duplicators.this.global.Tree">tree</a> <span title="(x$1: Any)String">+</span> <span title="String(&quot; to &quot;)" class="string">&quot; to &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#1037287" title="Duplicators.this.global.Tree">tree1</a><span class="delimiter">)</span>
          <a href="#979851" title="Duplicators.this.BodyDuplicator" class="keyword">super</a>.<a href="Typers.scala.html#538702" title="(pos: Duplicators.this.global.Position, mode: Int, pt: Duplicators.this.global.Type)(tree: Duplicators.this.global.Tree)Duplicators.this.global.Tree">typedPos</a><span class="delimiter">(</span><a href="#1035549" title="Duplicators.this.global.Tree">tree</a>.<a href="../../../reflect/internal/Trees.scala.html#408571" title="=&gt; Duplicators.this.global.Position">pos</a>, <a href="#1035550" title="Int">mode</a>, <a href="#1035551" title="Duplicators.this.global.Type">pt</a><span class="delimiter">)</span><span class="delimiter">(</span><a href="#1037287" title="Duplicators.this.global.Tree">tree1</a><span class="delimiter">)</span>

        <span class="keyword">case</span> This<span class="delimiter">(</span><a href="../../../reflect/internal/Trees.scala.html#410008" title="Duplicators.this.global.TypeName" id="3364313">_</a><span class="delimiter">)</span> =&gt;
          <a href="../Global.scala.html#537517" title="(msg: =&gt; String)Unit">debuglog</a><span class="delimiter">(</span><span title="String(&quot;selection on this, plain: &quot;)" class="string">&quot;selection on this, plain: &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#1035549" title="Duplicators.this.global.Tree">tree</a><span class="delimiter">)</span>
          <a href="#1035549" title="Duplicators.this.global.Tree">tree</a>.<a href="../../../reflect/internal/Trees.scala.html#408578" title="(sym: Duplicators.this.global.Symbol)Unit">symbol</a> = <a href="#1006658" title="(sym: Duplicators.this.global.Symbol)Duplicators.this.global.Symbol">updateSym</a><span class="delimiter">(</span><a href="#1035549" title="Duplicators.this.global.Tree">tree</a>.<a href="../../../reflect/internal/Trees.scala.html#408577" title="=&gt; Duplicators.this.global.Symbol">symbol</a><span class="delimiter">)</span>
          <span class="keyword">val</span> <a title="Duplicators.this.global.Tree" id="1037303">ntree</a> = <a href="#1006663" title="(tree: Duplicators.this.global.Tree, pt: Duplicators.this.global.Type)Duplicators.this.global.Tree">castType</a><span class="delimiter">(</span><a href="#1035549" title="Duplicators.this.global.Tree">tree</a>, <a href="#1035551" title="Duplicators.this.global.Type">pt</a><span class="delimiter">)</span>
          <span class="keyword">val</span> <a title="Duplicators.this.global.Tree" id="1037304">tree1</a> = <a href="#979851" title="Duplicators.this.BodyDuplicator" class="keyword">super</a>.<a href="Typers.scala.html#538698" title="(tree: Duplicators.this.global.Tree, mode: Int, pt: Duplicators.this.global.Type)Duplicators.this.global.Tree">typed</a><span class="delimiter">(</span><a href="#1037303" title="Duplicators.this.global.Tree">ntree</a>, <a href="#1035550" title="Int">mode</a>, <a href="#1035551" title="Duplicators.this.global.Type">pt</a><span class="delimiter">)</span>
          // log(&quot;plain this typed to: &quot; + tree1)
          <a href="#1037304" title="Duplicators.this.global.Tree">tree1</a>
/* no longer needed, because Super now contains a This(...)
        case Super(qual, mix) if (oldClassOwner ne null) &amp;&amp; (tree.symbol == oldClassOwner) =&gt;
          val tree1 = Super(qual, mix)
          log(&quot;changed &quot; + tree + &quot; to &quot; + tree1)
          super.typed(atPos(tree.pos)(tree1))
*/
        <span class="keyword">case</span> Match<a href="#3364275" title="Duplicators.this.global.Tree" id="3364317" class="delimiter">(</a><a href="../../../reflect/internal/Trees.scala.html#410097" title="Duplicators.this.global.Tree" id="1037309">scrut</a>, <a href="../../../reflect/internal/Trees.scala.html#410099" title="List[Duplicators.this.global.CaseDef]" id="1037310">cases</a><span class="delimiter">)</span> =&gt;
          <span class="keyword">val</span> <a title="Duplicators.this.global.Tree" id="1037311">scrut1</a>   = <a href="#1006664" title="(tree: Duplicators.this.global.Tree, mode: Int, pt: Duplicators.this.global.Type)Duplicators.this.global.Tree">typed</a><span class="delimiter">(</span><a href="#1037309" title="Duplicators.this.global.Tree">scrut</a>, EXPRmode <span title="Int(32769)">|</span> BYVALmode, <a href="../../../reflect/internal/Types.scala.html#407279" title="Duplicators.this.global.WildcardType.type">WildcardType</a><span class="delimiter">)</span>
          <span class="keyword">val</span> <a title="Duplicators.this.global.Type" id="1037312">scrutTpe</a> = <a href="#1037311" title="Duplicators.this.global.Tree">scrut1</a>.<a href="../../../reflect/internal/Trees.scala.html#408573" title="=&gt; Duplicators.this.global.Type">tpe</a>.<a href="../../../reflect/internal/Types.scala.html#408411" title="=&gt; Duplicators.this.global.Type">widen</a>
          <span class="keyword">val</span> <a title="List[Duplicators.this.global.CaseDef]" id="1037313">cases1</a> = <span class="delimiter">{</span>
            <span title="List[Duplicators.this.global.CaseDef]" class="keyword">if</span> <span class="delimiter">(</span><a href="#1037312" title="Duplicators.this.global.Type">scrutTpe</a>.<a href="../../../reflect/internal/Types.scala.html#408403" title="=&gt; Boolean">isFinalType</a><span class="delimiter">)</span> <a href="#1037310" title="List[Duplicators.this.global.CaseDef]">cases</a> <a href="../../../collection/TraversableLike.scala.html#58073" title="(p: Duplicators.this.global.CaseDef =&gt; Boolean)List[Duplicators.this.global.CaseDef]">filter</a> <a href="#1037332" title="Duplicators.this.global.CaseDef" class="delimiter">{</a>
              <span class="keyword">case</span> CaseDef<span class="delimiter">(</span>Bind<a href="../../../reflect/internal/Trees.scala.html#410180" title="Duplicators.this.global.Tree" id="3364249" class="delimiter">(</a><a href="../../../reflect/internal/Trees.scala.html#410157" title="Duplicators.this.global.Name" id="3364247">_</a>, <a href="../../../reflect/internal/Trees.scala.html#410159" title="Duplicators.this.global.Tree" id="1037346">pat</a> @ Typed<a href="#1037346" title="Boolean" id="3364252" class="delimiter">(</a><a href="../../../reflect/internal/Trees.scala.html#410055" title="Duplicators.this.global.Tree" id="3364250">_</a>, <a href="../../../reflect/internal/Trees.scala.html#410057" title="Duplicators.this.global.Tree" id="1037349">tpt</a><span class="delimiter">)</span><span class="delimiter">)</span>, <a href="../../../reflect/internal/Trees.scala.html#410182" title="Duplicators.this.global.Tree" id="3364260">EmptyTree</a>, <a href="../../../reflect/internal/Trees.scala.html#410184" title="Duplicators.this.global.Tree" id="1037350">body</a><span class="delimiter">)</span> =&gt;
                // the typed pattern is not incompatible with the scrutinee type
                <a href="#1037312" title="Duplicators.this.global.Type">scrutTpe</a> <a href="#3364263" title="(x: Boolean)Boolean">matchesPattern</a> <a href="#1006657" title="(tpe: Duplicators.this.global.Type)Duplicators.this.global.Type">fixType</a><span class="delimiter">(</span><a href="#1037349" title="Duplicators.this.global.Tree">tpt</a>.<a href="../../../reflect/internal/Trees.scala.html#408573" title="=&gt; Duplicators.this.global.Type">tpe</a><span class="delimiter">)</span>
              <span class="keyword">case</span> CaseDef<span class="delimiter">(</span>Typed<a href="../../../reflect/internal/Trees.scala.html#410180" title="Duplicators.this.global.Tree" id="3364258" class="delimiter">(</a><a href="../../../reflect/internal/Trees.scala.html#410055" title="Duplicators.this.global.Tree" id="3364256">_</a>, <a href="../../../reflect/internal/Trees.scala.html#410057" title="Duplicators.this.global.Tree" id="1037359">tpt</a><span class="delimiter">)</span>, <a href="../../../reflect/internal/Trees.scala.html#410182" title="Duplicators.this.global.Tree" id="3364261">EmptyTree</a>, <a href="../../../reflect/internal/Trees.scala.html#410184" title="Duplicators.this.global.Tree" id="1037360">body</a><span class="delimiter">)</span> =&gt;
                // the typed pattern is not incompatible with the scrutinee type
                <a href="#1037312" title="Duplicators.this.global.Type">scrutTpe</a> <a href="#3364263" title="(x: Boolean)Boolean">matchesPattern</a> <a href="#1006657" title="(tpe: Duplicators.this.global.Type)Duplicators.this.global.Type">fixType</a><span class="delimiter">(</span><a href="#1037359" title="Duplicators.this.global.Tree">tpt</a>.<a href="../../../reflect/internal/Trees.scala.html#408573" title="=&gt; Duplicators.this.global.Type">tpe</a><span class="delimiter">)</span>
              <span class="keyword">case</span> _ =&gt; <a href="#3364263" title="(x: Boolean)Boolean" class="keyword">true</a>
            <span class="delimiter">}</span>
            // Without this, AnyRef specializations crash on patterns like
            //   case _: Boolean =&gt; ...
            // Not at all sure this is safe.
            <span class="keyword">else</span> <span title="List[Duplicators.this.global.CaseDef]" class="keyword">if</span> <span class="delimiter">(</span><a href="#1037312" title="Duplicators.this.global.Type">scrutTpe</a> <a href="../../../reflect/internal/Types.scala.html#408481" title="(that: Duplicators.this.global.Type)Boolean">&lt;:&lt;</a> <a href="../../../reflect/internal/Definitions.scala.html#408669" title="=&gt; Duplicators.this.global.AliasTypeSymbol">AnyRefClass</a>.<a href="../../../reflect/internal/Symbols.scala.html#411559" title="=&gt; Duplicators.this.global.Type">tpe</a><span class="delimiter">)</span>
              <a href="#1037310" title="List[Duplicators.this.global.CaseDef]">cases</a> <a href="../../../collection/TraversableLike.scala.html#58074" title="(p: Duplicators.this.global.CaseDef =&gt; Boolean)List[Duplicators.this.global.CaseDef]">filterNot</a> <span class="delimiter">(</span><a href="#1037366" title="Duplicators.this.global.CaseDef">_</a>.<a href="../../../reflect/internal/Trees.scala.html#410180" title="=&gt; Duplicators.this.global.Tree">pat</a>.<a href="../../../reflect/internal/Trees.scala.html#408573" title="=&gt; Duplicators.this.global.Type">tpe</a> <a href="../../../reflect/internal/Types.scala.html#408481" title="(that: Duplicators.this.global.Type)Boolean">&lt;:&lt;</a> <a href="../../../reflect/internal/Definitions.scala.html#408682" title="=&gt; Duplicators.this.global.ClassSymbol">AnyValClass</a>.<a href="../../../reflect/internal/Symbols.scala.html#411559" title="=&gt; Duplicators.this.global.Type">tpe</a><span class="delimiter">)</span>
            <span class="keyword">else</span>
              <a href="#1037310" title="List[Duplicators.this.global.CaseDef]">cases</a>
          <span class="delimiter">}</span>

          <a href="#979851" title="Duplicators.this.BodyDuplicator" class="keyword">super</a>.<a href="Typers.scala.html#538702" title="(pos: Duplicators.this.global.Position, mode: Int, pt: Duplicators.this.global.Type)(tree: Duplicators.this.global.Tree)Duplicators.this.global.Tree">typedPos</a><span class="delimiter">(</span><a href="#1035549" title="Duplicators.this.global.Tree">tree</a>.<a href="../../../reflect/internal/Trees.scala.html#408571" title="=&gt; Duplicators.this.global.Position">pos</a>, <a href="#1035550" title="Int">mode</a>, <a href="#1035551" title="Duplicators.this.global.Type">pt</a><span class="delimiter">)</span><span class="delimiter">(</span><a href="../../../reflect/internal/Trees.scala.html#453592" title="(selector: Duplicators.this.global.Tree, cases: List[Duplicators.this.global.CaseDef])Duplicators.this.global.Match">Match</a><span class="delimiter">(</span><a href="#1037309" title="Duplicators.this.global.Tree">scrut</a>, <a href="#1037313" title="List[Duplicators.this.global.CaseDef]">cases1</a><span class="delimiter">)</span><span class="delimiter">)</span>

        <span class="keyword">case</span> <a href="../../../reflect/internal/Trees.scala.html#407946" title="Duplicators.this.global.Tree" id="3364319">EmptyTree</a> =&gt;
          // no need to do anything, in particular, don't set the type to null, EmptyTree.tpe_= asserts
          <a href="#3364323" title="(x: Duplicators.this.global.Tree)Duplicators.this.global.Tree">tree</a>

        <span class="keyword">case</span> _ =&gt;
          <a href="../Global.scala.html#537517" title="(msg: =&gt; String)Unit">debuglog</a><span class="delimiter">(</span><span title="String(&quot;Duplicators default case: &quot;)" class="string">&quot;Duplicators default case: &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#1035549" title="Duplicators.this.global.Tree">tree</a>.<a href="../../../reflect/internal/Trees.scala.html#408567" title="=&gt; String">summaryString</a><span class="delimiter">)</span>
          <a href="../Global.scala.html#537517" title="(msg: =&gt; String)Unit">debuglog</a><span class="delimiter">(</span><span title="String(&quot; ---&gt; &quot;)" class="string">&quot; ---&gt; &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#1035549" title="Duplicators.this.global.Tree">tree</a><span class="delimiter">)</span>
          <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#1035549" title="Duplicators.this.global.Tree">tree</a>.<a href="../../../reflect/internal/Trees.scala.html#408580" title="=&gt; Boolean">hasSymbol</a> <a href="../../../Boolean.scala.html#57826" title="(x: Boolean)Boolean">&amp;&amp;</a> <a href="#1035549" title="Duplicators.this.global.Tree">tree</a>.<a href="../../../reflect/internal/Trees.scala.html#408577" title="=&gt; Duplicators.this.global.Symbol">symbol</a> <span title="(x$1: AnyRef)Boolean">!=</span> <a href="../../../reflect/internal/Symbols.scala.html#407184" title="=&gt; Duplicators.this.global.NoSymbol">NoSymbol</a> <a href="../../../Boolean.scala.html#57826" title="(x: Boolean)Boolean">&amp;&amp;</a> <span class="delimiter">(</span><a href="#1035549" title="Duplicators.this.global.Tree">tree</a>.<a href="../../../reflect/internal/Trees.scala.html#408577" title="=&gt; Duplicators.this.global.Symbol">symbol</a>.<a href="../../../reflect/internal/Symbols.scala.html#411315" title="=&gt; Duplicators.this.global.Symbol">owner</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="../../../reflect/internal/Definitions.scala.html#407777" title="Duplicators.this.global.definitions.type">definitions</a>.<a href="../../../reflect/internal/Definitions.scala.html#408667" title="=&gt; Duplicators.this.global.ClassSymbol">AnyClass</a><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">{</span>
            <a href="#1035549" title="Duplicators.this.global.Tree">tree</a>.<a href="../../../reflect/internal/Trees.scala.html#408578" title="(sym: Duplicators.this.global.Symbol)Unit">symbol</a> = <a href="../../../reflect/internal/Symbols.scala.html#407184" title="=&gt; Duplicators.this.global.NoSymbol">NoSymbol</a> // maybe we can find a more specific member in a subclass of Any (see AnyVal members, like ==)
          <span class="delimiter">}</span>
          <span class="keyword">val</span> <a title="Duplicators.this.global.Tree" id="1037377">ntree</a> = <a href="#1006663" title="(tree: Duplicators.this.global.Tree, pt: Duplicators.this.global.Type)Duplicators.this.global.Tree">castType</a><span class="delimiter">(</span><a href="#1035549" title="Duplicators.this.global.Tree">tree</a>, <a href="#1035551" title="Duplicators.this.global.Type">pt</a><span class="delimiter">)</span>
          <a href="#979851" title="Duplicators.this.BodyDuplicator" class="keyword">super</a>.<a href="Typers.scala.html#538698" title="(tree: Duplicators.this.global.Tree, mode: Int, pt: Duplicators.this.global.Type)Duplicators.this.global.Tree">typed</a><span class="delimiter">(</span><a href="#1037377" title="Duplicators.this.global.Tree">ntree</a>, <a href="#1035550" title="Int">mode</a>, <a href="#1035551" title="Duplicators.this.global.Type">pt</a><span class="delimiter">)</span>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>

  <span class="delimiter">}</span>
<span class="delimiter">}</span>


        </pre>
    </body>
</html>