<?xml version="1.0" encoding="utf-8"?>
      <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <meta http-equiv="Expires" content="0" />
        <title>scala/tools/nsc/typechecker/Tags.scala</title>
        <script type="text/javascript" src="../../../../jquery-all.js"></script>
        <script type="text/javascript" src="../../../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../../../style.css" title="Style"></link>
    </head>
    <body>
        <pre>
<span class="keyword">package</span> scala.tools.nsc
<span class="keyword">package</span> typechecker

<span class="keyword">trait</span> <a title="trait Tags extends Object" id="47324">Tags</a> <a href="../../../Unit.scala.html#1515" title="Unit" class="delimiter">{</a>
  self: Analyzer =&gt;

  <span class="keyword">import</span> <a href="Analyzer.scala.html#537962" title="=&gt; scala.tools.nsc.Global">global</a>._
  <span class="keyword">import</span> <a href="../../../reflect/internal/Definitions.scala.html#407777" title="Tags.this.global.definitions.type">definitions</a>._

  <span class="keyword">trait</span> <a title="trait Tag extends Object" id="538127">Tag</a> <a href="../../../Unit.scala.html#1515" title="Unit" class="delimiter">{</a>
    self: Typer =&gt;

    <span class="keyword">private</span> <span class="keyword">def</span> <a title="(pos: Tags.this.global.Position, taggedTp: Tags.this.global.Type, allowMaterialization: Boolean)Tags.this.global.Tree" id="538730">resolveTag</a><span class="delimiter">(</span><a title="Tags.this.global.Position" id="1104280">pos</a>: <a href="../../../reflect/internal/util/Position.scala.html#22953" title="Tags.this.global.Position">Position</a>, <a title="Tags.this.global.Type" id="1104281">taggedTp</a>: <a href="../../../reflect/internal/Types.scala.html#407270" title="Tags.this.global.Type">Type</a>, <a title="Boolean" id="1104282">allowMaterialization</a>: <a href="../../../Boolean.scala.html#1425" title="Boolean">Boolean</a><span class="delimiter">)</span> = <a href="../Global.scala.html#537732" title="(op: =&gt; Tags.this.global.Tree)Tags.this.global.Tree">beforeTyper</a> <span class="delimiter">{</span>
      <span class="keyword">def</span> <a title="(tree: =&gt; Tags.this.global.Tree)Tags.this.global.Tree" id="1104285">wrapper</a> <span class="delimiter">(</span><a title="=&gt; Tags.this.global.Tree" id="1104286">tree</a>: =&gt; Tree<span class="delimiter">)</span>: <a href="../../../reflect/internal/Trees.scala.html#407938" title="Tags.this.global.Tree">Tree</a> = <span title="Tags.this.global.Tree" class="keyword">if</span> <span class="delimiter">(</span><a href="#1104282" title="Boolean">allowMaterialization</a><span class="delimiter">)</span> <span class="delimiter">(</span><a href="Typers.scala.html#538560" title="=&gt; Tags.this.Context">context</a>.<a href="Contexts.scala.html#538857" title="[T](op: =&gt; T)T">withMacrosEnabled</a><span title="(op: =&gt; Tags.this.global.Tree)Tags.this.global.Tree" class="delimiter">[</span><a href="../../../reflect/internal/Trees.scala.html#407938" title="Tags.this.global.Tree">Tree</a><span class="delimiter">]</span><span class="delimiter">(</span><a href="#1104286" title="=&gt; Tags.this.global.Tree">tree</a><span class="delimiter">)</span><span class="delimiter">)</span> <span class="keyword">else</span> <span class="delimiter">(</span><a href="Typers.scala.html#538560" title="=&gt; Tags.this.Context">context</a>.<a href="Contexts.scala.html#538860" title="[T](op: =&gt; T)T">withMacrosDisabled</a><span title="(op: =&gt; Tags.this.global.Tree)Tags.this.global.Tree" class="delimiter">[</span><a href="../../../reflect/internal/Trees.scala.html#407938" title="Tags.this.global.Tree">Tree</a><span class="delimiter">]</span><span class="delimiter">(</span><a href="#1104286" title="=&gt; Tags.this.global.Tree">tree</a><span class="delimiter">)</span><span class="delimiter">)</span>
      <a href="#1104285" title="(tree: =&gt; Tags.this.global.Tree)Tags.this.global.Tree">wrapper</a><span class="delimiter">(</span><a href="Implicits.scala.html#538179" title="(tree: Tags.this.global.Tree, pt: Tags.this.global.Type, reportAmbiguous: Boolean, isView: Boolean, context: Tags.this.Context, saveAmbiguousDivergent: Boolean, pos: Tags.this.global.Position)Tags.this.SearchResult">inferImplicit</a><span class="delimiter">(</span>
        <a href="../../../reflect/internal/Trees.scala.html#407946" title="Tags.this.global.EmptyTree.type">EmptyTree</a>,
        <a href="#1104281" title="Tags.this.global.Type">taggedTp</a>,
        /*reportAmbiguous =*/ <span title="Boolean(true)" class="keyword">true</span>,
        /*isView =*/ <span title="Boolean(false)" class="keyword">false</span>,
        /*context =*/ <a href="Typers.scala.html#538560" title="=&gt; Tags.this.Context">context</a>,
        /*saveAmbiguousDivergent =*/ <span title="Boolean(true)" class="keyword">true</span>,
        /*pos =*/ <a href="#1104280" title="Tags.this.global.Position">pos</a>
      <span class="delimiter">)</span>.<a href="Implicits.scala.html#541693" title="=&gt; Tags.this.global.Tree">tree</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>

    /** Finds in scope or materializes a ClassTag.
     *  Should be used instead of ClassManifest every time compiler needs to persist an erasure.
     *
     *  Once upon a time, we had an `ErasureTag` which was to `ClassTag` the same that `WeakTypeTag` is for `TypeTag`.
     *  However we found out that we don't really need this concept, so it got removed.
     *
     *  @param   pos                    Position for error reporting. Please, provide meaningful value.
     *  @param   tp                     Type we're looking a ClassTag for, e.g. resolveClassTag(pos, IntClass.tpe) will look for ClassTag[Int].
     *  @param   allowMaterialization   If true (default) then the resolver is allowed to launch materialization macros when there's no class tag in scope.
     *                                  If false then materialization macros are prohibited from running.
     *
     *  @returns Tree that represents an `scala.reflect.ClassTag` for `tp` if everything is okay.
     *           EmptyTree if the result contains unresolved (i.e. not spliced) type parameters and abstract type members.
     *           EmptyTree if `allowMaterialization` is false, and there is no class tag in scope.
     */
    <span class="keyword">def</span> <a title="(pos: Tags.this.global.Position, tp: Tags.this.global.Type, allowMaterialization: Boolean)Tags.this.global.Tree" id="538731">resolveClassTag</a><span class="delimiter">(</span><a title="Tags.this.global.Position" id="552153">pos</a>: <a href="../../../reflect/internal/util/Position.scala.html#22953" title="Tags.this.global.Position">Position</a>, <a title="Tags.this.global.Type" id="552154">tp</a>: <a href="../../../reflect/internal/Types.scala.html#407270" title="Tags.this.global.Type">Type</a>, <a title="Boolean" id="552156">allowMaterialization</a>: <a href="../../../Boolean.scala.html#1425" title="Boolean">Boolean</a> = <span title="Boolean(true)" class="keyword">true</span><span class="delimiter">)</span>: <a href="../../../reflect/internal/Trees.scala.html#407938" title="Tags.this.global.Tree">Tree</a> = <span class="delimiter">{</span>
      <span class="keyword">val</span> <a title="Tags.this.global.Type" id="1104312">taggedTp</a> = <a href="../../../reflect/internal/Types.scala.html#407408" title="(tycon: Tags.this.global.Type, args: List[Tags.this.global.Type])Tags.this.global.Type">appliedType</a><span class="delimiter">(</span><a href="../../../reflect/internal/Definitions.scala.html#408914" title="=&gt; Tags.this.global.ClassSymbol">ClassTagClass</a>.<a href="../../../reflect/internal/Symbols.scala.html#411561" title="=&gt; Tags.this.global.Type">typeConstructor</a>, <a href="../../../collection/immutable/List.scala.html#62451" title="(xs: Tags.this.global.Type*)List[Tags.this.global.Type]">List</a><span class="delimiter">(</span><a href="#552154" title="Tags.this.global.Type">tp</a><span class="delimiter">)</span><span class="delimiter">)</span>
      <a href="#538730" title="(pos: Tags.this.global.Position, taggedTp: Tags.this.global.Type, allowMaterialization: Boolean)Tags.this.global.Tree">resolveTag</a><span class="delimiter">(</span><a href="#552153" title="Tags.this.global.Position">pos</a>, <a href="#1104312" title="Tags.this.global.Type">taggedTp</a>, <a href="#552156" title="Boolean">allowMaterialization</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>

    /** Finds in scope or materializes an WeakTypeTag (if `concrete` is false) or a TypeTag (if `concrete` is true).
     *
     *  @param   pos                    Position for error reporting. Please, provide meaningful value.
     *  @param   pre                    Prefix that represents a universe this type tag will be bound to.
     *                                  If `pre` is set to `NoType`, then any type tag in scope will do, regardless of its affiliation.
     *                                  If `pre` is set to `NoType`, and tag resolution involves materialization, then `mkRuntimeUniverseRef` will be used.
     *  @param   tp                     Type we're looking a TypeTag for, e.g. resolveTypeTag(pos, mkRuntimeUniverseRef, IntClass.tpe, false) will look for scala.reflect.runtime.universe.TypeTag[Int].
     *  @param   concrete               If true then the result must not contain unresolved (i.e. not spliced) type parameters and abstract type members.
     *                                  If false then the function will always succeed (abstract types will be reified as free types).
     *  @param   allowMaterialization   If true (default) then the resolver is allowed to launch materialization macros when there's no type tag in scope.
     *                                  If false then materialization macros are prohibited from running.
     *
     *  @returns Tree that represents a `scala.reflect.TypeTag` for `tp` if everything is okay.
     *           EmptyTree if `concrete` is true and the result contains unresolved (i.e. not spliced) type parameters and abstract type members.
     *           EmptyTree if `allowMaterialization` is false, and there is no array tag in scope.
     */
    <span class="keyword">def</span> <a title="(pos: Tags.this.global.Position, pre: Tags.this.global.Type, tp: Tags.this.global.Type, concrete: Boolean, allowMaterialization: Boolean)Tags.this.global.Tree" id="538732">resolveTypeTag</a><span class="delimiter">(</span><a title="Tags.this.global.Position" id="549863">pos</a>: <a href="../../../reflect/internal/util/Position.scala.html#22953" title="Tags.this.global.Position">Position</a>, <a title="Tags.this.global.Type" id="549864">pre</a>: <a href="../../../reflect/internal/Types.scala.html#407270" title="Tags.this.global.Type">Type</a>, <a title="Tags.this.global.Type" id="549865">tp</a>: <a href="../../../reflect/internal/Types.scala.html#407270" title="Tags.this.global.Type">Type</a>, <a title="Boolean" id="549866">concrete</a>: <a href="../../../Boolean.scala.html#1425" title="Boolean">Boolean</a>, <a title="Boolean" id="549868">allowMaterialization</a>: <a href="../../../Boolean.scala.html#1425" title="Boolean">Boolean</a> = <span title="Boolean(true)" class="keyword">true</span><span class="delimiter">)</span>: <a href="../../../reflect/internal/Trees.scala.html#407938" title="Tags.this.global.Tree">Tree</a> =
      // if someone requests a type tag, but scala-reflect.jar isn't on the library classpath, then bail
      <span title="Tags.this.global.Tree" class="keyword">if</span> <span class="delimiter">(</span><a href="#549864" title="Tags.this.global.Type">pre</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="../../../reflect/internal/Types.scala.html#407284" title="Tags.this.global.NoType.type">NoType</a> <a href="../../../Boolean.scala.html#57826" title="(x: Boolean)Boolean">&amp;&amp;</a> <a href="../../../reflect/internal/Definitions.scala.html#408929" title="=&gt; Tags.this.global.Symbol">ApiUniverseClass</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="../../../reflect/internal/Symbols.scala.html#407184" title="=&gt; Tags.this.global.NoSymbol">NoSymbol</a><span class="delimiter">)</span> <a href="../../../reflect/internal/Trees.scala.html#407946" title="Tags.this.global.EmptyTree.type">EmptyTree</a>
      <span class="keyword">else</span> <span class="delimiter">{</span>
        <span class="keyword">val</span> <a title="Definitions extends Tags.this.global.Symbol" id="1104338">tagSym</a> = <span title="Definitions extends Tags.this.global.Symbol" class="keyword">if</span> <span class="delimiter">(</span><a href="#549866" title="Boolean">concrete</a><span class="delimiter">)</span> <a href="../../../reflect/internal/Definitions.scala.html#408922" title="=&gt; Tags.this.global.Symbol{def name: Tags.this.global.Name{type ThisNameType &gt;: Tags.this.global.TypeName with Tags.this.global.TermName &lt;: Tags.this.global.Name}; def rawname: Tags.this.global.Name{type ThisNameType &gt;: Tags.this.global.TypeName with Tags.this.global.TermName &lt;: Tags.this.global.Name}; type TypeOfClonedSymbol &gt;: Tags.this.global.ClassSymbol with Tags.this.global.NoSymbol &lt;: Tags.this.global.Symbol{type TypeOfClonedSymbol &gt;: Tags.this.global.ClassSymbol with Tags.this.global.NoSymbol &lt;: Tags.this.global.Symbol; type NameType &gt;: Tags.this.global.TypeName with Tags.this.global.TermName &lt;: Tags.this.global.Name}; type NameType &gt;: Tags.this.global.TypeName with Tags.this.global.TermName &lt;: Tags.this.global.Name{type ThisNameType &gt;: Tags.this.global.TypeName with Tags.this.global.TermName &lt;: Tags.this.global.Name}}">TypeTagClass</a> <span class="keyword">else</span> <a href="../../../reflect/internal/Definitions.scala.html#408918" title="=&gt; Tags.this.global.Symbol{def name: Tags.this.global.Name{type ThisNameType &gt;: Tags.this.global.TypeName with Tags.this.global.TermName &lt;: Tags.this.global.Name}; def rawname: Tags.this.global.Name{type ThisNameType &gt;: Tags.this.global.TypeName with Tags.this.global.TermName &lt;: Tags.this.global.Name}; type TypeOfClonedSymbol &gt;: Tags.this.global.ClassSymbol with Tags.this.global.NoSymbol &lt;: Tags.this.global.Symbol{type TypeOfClonedSymbol &gt;: Tags.this.global.ClassSymbol with Tags.this.global.NoSymbol &lt;: Tags.this.global.Symbol; type NameType &gt;: Tags.this.global.TypeName with Tags.this.global.TermName &lt;: Tags.this.global.Name}; type NameType &gt;: Tags.this.global.TypeName with Tags.this.global.TermName &lt;: Tags.this.global.Name{type ThisNameType &gt;: Tags.this.global.TypeName with Tags.this.global.TermName &lt;: Tags.this.global.Name}}">WeakTypeTagClass</a>
        <span class="keyword">val</span> <a title="Tags.this.global.Type" id="1104339">tagTp</a> =  <span title="Tags.this.global.Type" class="keyword">if</span> <span class="delimiter">(</span><a href="#549864" title="Tags.this.global.Type">pre</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="../../../reflect/internal/Types.scala.html#407284" title="Tags.this.global.NoType.type">NoType</a><span class="delimiter">)</span> <a href="../../../reflect/internal/Types.scala.html#415106" title="(pre: Tags.this.global.Type, sym: Tags.this.global.Symbol, args: List[Tags.this.global.Type])Tags.this.global.Type">TypeRef</a><span class="delimiter">(</span><a href="../../../reflect/internal/Definitions.scala.html#408929" title="=&gt; Tags.this.global.Symbol">ApiUniverseClass</a>.<a href="../../../reflect/internal/Symbols.scala.html#411071" title="=&gt; Tags.this.global.Type">toTypeConstructor</a>, <a href="#1104338" title="Definitions extends Tags.this.global.Symbol">tagSym</a>, <a href="../../../collection/immutable/List.scala.html#62451" title="(xs: Tags.this.global.Type*)List[Tags.this.global.Type]">List</a><span class="delimiter">(</span><a href="#549865" title="Tags.this.global.Type">tp</a><span class="delimiter">)</span><span class="delimiter">)</span> <span class="keyword">else</span> <a href="../../../reflect/internal/Types.scala.html#407398" title="(pre: Tags.this.global.Type, sym: Tags.this.global.Symbol)Tags.this.global.Type">singleType</a><span class="delimiter">(</span><a href="#549864" title="Tags.this.global.Type">pre</a>, <a href="#549864" title="Tags.this.global.Type">pre</a> <a href="../../../reflect/internal/Types.scala.html#408451" title="(name: Tags.this.global.Name)Tags.this.global.Symbol">member</a> <a href="#1104338" title="Definitions extends Tags.this.global.Symbol">tagSym</a>.<a href="../../../reflect/internal/Definitions.scala.html#1104376" title="=&gt; Tags.this.global.Name{type ThisNameType &gt;: Tags.this.global.TypeName with Tags.this.global.TermName &lt;: Tags.this.global.Name}">name</a><span class="delimiter">)</span>
        <span class="keyword">val</span> <a title="Tags.this.global.Type" id="1104340">taggedTp</a> = <a href="../../../reflect/internal/Types.scala.html#407408" title="(tycon: Tags.this.global.Type, args: List[Tags.this.global.Type])Tags.this.global.Type">appliedType</a><span class="delimiter">(</span><a href="#1104339" title="Tags.this.global.Type">tagTp</a>, <a href="../../../collection/immutable/List.scala.html#62451" title="(xs: Tags.this.global.Type*)List[Tags.this.global.Type]">List</a><span class="delimiter">(</span><a href="#549865" title="Tags.this.global.Type">tp</a><span class="delimiter">)</span><span class="delimiter">)</span>
        <a href="#538730" title="(pos: Tags.this.global.Position, taggedTp: Tags.this.global.Type, allowMaterialization: Boolean)Tags.this.global.Tree">resolveTag</a><span class="delimiter">(</span><a href="#549863" title="Tags.this.global.Position">pos</a>, <a href="#1104340" title="Tags.this.global.Type">taggedTp</a>, <a href="#549868" title="Boolean">allowMaterialization</a><span class="delimiter">)</span>
      <span class="delimiter">}</span>
  <span class="delimiter">}</span>
<span title="Object" class="delimiter">}</span>
        </pre>
    </body>
</html>