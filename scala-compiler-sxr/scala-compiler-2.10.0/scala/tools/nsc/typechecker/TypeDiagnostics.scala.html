<?xml version="1.0" encoding="utf-8"?>
      <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <meta http-equiv="Expires" content="0" />
        <title>scala/tools/nsc/typechecker/TypeDiagnostics.scala</title>
        <script type="text/javascript" src="../../../../jquery-all.js"></script>
        <script type="text/javascript" src="../../../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../../../style.css" title="Style"></link>
    </head>
    <body>
        <pre>
/* NSC -- new Scala compiler
 * Copyright 2005-2013 LAMP/EPFL
 * @author  Paul Phillips
 */

<span class="keyword">package</span> scala.tools.nsc
<span class="keyword">package</span> typechecker

<span class="keyword">import</span> scala.collection.mutable
<span class="keyword">import</span> scala.collection.mutable.ListBuffer
<span class="keyword">import</span> scala.util.control.ControlThrowable
<span class="keyword">import</span> scala.util.control.<a href="../../../util/control/Exception.scala.html#52177" title="scala.util.control.Exception.type">Exception</a>.ultimately
<span class="keyword">import</span> symtab.<a href="../symtab/package.scala.html#55820" title="=&gt; reflect.internal.Flags.type">Flags</a>._
<span class="keyword">import</span> <a href="../../../PartialFunction.scala.html#130" title="PartialFunction.type">PartialFunction</a>._

/** An interface to enable higher configurability of diagnostic messages
 *  regarding type errors.  This is barely a beginning as error messages are
 *  distributed far and wide across the codebase.  The plan is to partition
 *  error messages into some broad groups and provide some mechanism for
 *  being more or less verbose on a selective basis.  Possible groups include
 *  such examples as
 *
 *    arity errors
 *    kind errors
 *    variance errors
 *    ambiguity errors
 *    volatility/stability errors
 *    implementation restrictions
 *
 *  And more, and there is plenty of overlap, so it'll be a process.
 *
 *  @author Paul Phillips
 *  @version 1.0
 */
<span class="keyword">trait</span> <a title="trait TypeDiagnostics extends Object" id="49559">TypeDiagnostics</a> <a href="../../../Unit.scala.html#1515" title="Unit" class="delimiter">{</a>
  self: Analyzer =&gt;

  <span class="keyword">import</span> <a href="Analyzer.scala.html#537962" title="=&gt; scala.tools.nsc.Global">global</a>._
  <span class="keyword">import</span> <a href="../../../reflect/internal/Definitions.scala.html#407777" title="TypeDiagnostics.this.global.definitions.type">definitions</a>._
  <span class="keyword">import</span> <a href="Analyzer.scala.html#537962" title="=&gt; scala.tools.nsc.Global">global</a>.<a href="../Global.scala.html#537612" title="TypeDiagnostics.this.global.typer.type">typer</a>.<span class="delimiter">{</span> infer, context <span class="delimiter">}</span>

  /** The common situation of making sure nothing is erroneous could be
   *  nicer if Symbols, Types, and Trees all implemented some common interface
   *  in which isErroneous and similar would be placed.
   */
  <span class="keyword">def</span> <a title="(tps: TypeDiagnostics.this.global.Type*)Boolean" id="538424">noErroneousTypes</a><span class="delimiter">(</span><a title="TypeDiagnostics.this.global.Type*" id="1105737">tps</a>: <span title="TypeDiagnostics.this.global.Type*">Type</span>*<span class="delimiter">)</span>    = <a href="#1105737" title="TypeDiagnostics.this.global.Type*">tps</a> <a href="../../../collection/IterableLike.scala.html#58565" title="(p: TypeDiagnostics.this.global.Type =&gt; Boolean)Boolean">forall</a> <span class="delimiter">(</span><a title="TypeDiagnostics.this.global.Type" id="1105743">x</a> =&gt; <a href="../../../Boolean.scala.html#57822" title="=&gt; Boolean">!</a><a href="#1105743" title="TypeDiagnostics.this.global.Type">x</a>.<a href="../../../reflect/internal/Types.scala.html#408402" title="=&gt; Boolean">isErroneous</a><span class="delimiter">)</span>
  <span class="keyword">def</span> <a title="(syms: TypeDiagnostics.this.global.Symbol*)Boolean" id="538425">noErroneousSyms</a><span class="delimiter">(</span><a title="TypeDiagnostics.this.global.Symbol*" id="1105744">syms</a>: <span title="TypeDiagnostics.this.global.Symbol*">Symbol</span>*<span class="delimiter">)</span>  = <a href="#1105744" title="TypeDiagnostics.this.global.Symbol*">syms</a> <a href="../../../collection/IterableLike.scala.html#58565" title="(p: TypeDiagnostics.this.global.Symbol =&gt; Boolean)Boolean">forall</a> <span class="delimiter">(</span><a title="TypeDiagnostics.this.global.Symbol" id="1105750">x</a> =&gt; <a href="../../../Boolean.scala.html#57822" title="=&gt; Boolean">!</a><a href="#1105750" title="TypeDiagnostics.this.global.Symbol">x</a>.<a href="../../../reflect/internal/Symbols.scala.html#411249" title="=&gt; Boolean">isErroneous</a><span class="delimiter">)</span>
  <span class="keyword">def</span> <a title="(trees: TypeDiagnostics.this.global.Tree*)Boolean" id="538426">noErroneousTrees</a><span class="delimiter">(</span><a title="TypeDiagnostics.this.global.Tree*" id="1105751">trees</a>: <span title="TypeDiagnostics.this.global.Tree*">Tree</span>*<span class="delimiter">)</span>  = <a href="#1105751" title="TypeDiagnostics.this.global.Tree*">trees</a> <a href="../../../collection/IterableLike.scala.html#58565" title="(p: TypeDiagnostics.this.global.Tree =&gt; Boolean)Boolean">forall</a> <span class="delimiter">(</span><a title="TypeDiagnostics.this.global.Tree" id="1105757">x</a> =&gt; <a href="../../../Boolean.scala.html#57822" title="=&gt; Boolean">!</a><a href="#1105757" title="TypeDiagnostics.this.global.Tree">x</a>.<a href="../../../reflect/internal/Trees.scala.html#408559" title="=&gt; Boolean">isErroneous</a><span class="delimiter">)</span>

  /** For errors which are artifacts of the implementation: such messages
   *  indicate that the restriction may be lifted in the future.
   */
  <span class="keyword">def</span> <a title="(pos: TypeDiagnostics.this.global.Position, unit: TypeDiagnostics.this.global.CompilationUnit, msg: String)Unit" id="538427">restrictionWarning</a><span class="delimiter">(</span><a title="TypeDiagnostics.this.global.Position" id="1105758">pos</a>: <a href="../../../reflect/internal/util/Position.scala.html#22953" title="TypeDiagnostics.this.global.Position">Position</a>, <a title="TypeDiagnostics.this.global.CompilationUnit" id="1105759">unit</a>: <a href="../CompilationUnits.scala.html#537766" title="TypeDiagnostics.this.global.CompilationUnit">CompilationUnit</a>, <a title="String" id="1105760">msg</a>: <span title="String">String</span><span class="delimiter">)</span>: <a href="../../../Unit.scala.html#1515" title="Unit">Unit</a> =
    <a href="#1105759" title="TypeDiagnostics.this.global.CompilationUnit">unit</a>.<a href="../CompilationUnits.scala.html#539299" title="(pos: TypeDiagnostics.this.global.Position, msg: String)Unit">warning</a><span class="delimiter">(</span><a href="#1105758" title="TypeDiagnostics.this.global.Position">pos</a>, <span title="String(&quot;Implementation restriction: &quot;)" class="string">&quot;Implementation restriction: &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#1105760" title="String">msg</a><span class="delimiter">)</span>
  <span class="keyword">def</span> <a title="(pos: TypeDiagnostics.this.global.Position, unit: TypeDiagnostics.this.global.CompilationUnit, msg: String)Unit" id="538428">restrictionError</a><span class="delimiter">(</span><a title="TypeDiagnostics.this.global.Position" id="1101891">pos</a>: <a href="../../../reflect/internal/util/Position.scala.html#22953" title="TypeDiagnostics.this.global.Position">Position</a>, <a title="TypeDiagnostics.this.global.CompilationUnit" id="1101892">unit</a>: <a href="../CompilationUnits.scala.html#537766" title="TypeDiagnostics.this.global.CompilationUnit">CompilationUnit</a>, <a title="String" id="1101893">msg</a>: <span title="String">String</span><span class="delimiter">)</span>: <a href="../../../Unit.scala.html#1515" title="Unit">Unit</a> =
    <a href="#1101892" title="TypeDiagnostics.this.global.CompilationUnit">unit</a>.<a href="../CompilationUnits.scala.html#539298" title="(pos: TypeDiagnostics.this.global.Position, msg: String)Unit">error</a><span class="delimiter">(</span><a href="#1101891" title="TypeDiagnostics.this.global.Position">pos</a>, <span title="String(&quot;Implementation restriction: &quot;)" class="string">&quot;Implementation restriction: &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#1101893" title="String">msg</a><span class="delimiter">)</span>

  /** A map of Positions to addendums - if an error involves a position in
   *  the map, the addendum should also be printed.
   */
  <span class="keyword">private</span> <span class="keyword">var</span> <a title="scala.collection.mutable.HashMap[TypeDiagnostics.this.global.Position,() =&gt; String]" id="538430">addendums</a> = <a href="../../../reflect/internal/SymbolTable.scala.html#406696" title="TypeDiagnostics.this.global.perRunCaches.type">perRunCaches</a>.<a href="../../../reflect/internal/SymbolTable.scala.html#471987" title="[K, V]()scala.collection.mutable.HashMap[K,V]">newMap</a><span title="()scala.collection.mutable.HashMap[TypeDiagnostics.this.global.Position,() =&gt; String]" class="delimiter">[</span><a href="../../../reflect/internal/util/Position.scala.html#22953" title="TypeDiagnostics.this.global.Position">Position</a>, <span class="delimiter">(</span><span class="delimiter">)</span> =&gt; String<span class="delimiter">]</span><span class="delimiter">(</span><span class="delimiter">)</span>
  <span class="keyword">private</span> <span class="keyword">var</span> <a title="Boolean" id="538433">isTyperInPattern</a> = <span title="Boolean(false)" class="keyword">false</span>

  /** Devising new ways of communicating error info out of
   *  desperation to work on error messages.  This is used
   *  by typedPattern to wrap its business so we can generate
   *  a sensible error message when things go south.
   */
  <span class="keyword">def</span> <a title="[T](body: =&gt; T)T" id="538435">typingInPattern</a><span class="delimiter">[</span><a title="" id="538437">T</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="=&gt; T" id="1105765">body</a>: =&gt; T<span class="delimiter">)</span>: <a href="#538437" title="T">T</a> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="Boolean" id="1105767">saved</a> = <a href="#538433" title="=&gt; Boolean">isTyperInPattern</a>
    <a href="#538433" title="(x$1: Boolean)Unit">isTyperInPattern</a> = <span title="Boolean(true)" class="keyword">true</span>
    <span class="keyword">try</span> <a href="#1105765" title="=&gt; T">body</a>
    <span class="keyword">finally</span> <a href="#538433" title="(x$1: Boolean)Unit">isTyperInPattern</a> = <a href="#1105767" title="Boolean">saved</a>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="(pos: TypeDiagnostics.this.global.Position, msg: () =&gt; String)Unit" id="538438">setAddendum</a><span class="delimiter">(</span><a title="TypeDiagnostics.this.global.Position" id="1041786">pos</a>: <a href="../../../reflect/internal/util/Position.scala.html#22953" title="TypeDiagnostics.this.global.Position">Position</a>, <a title="() =&gt; String" id="1041787">msg</a>: <span class="delimiter">(</span><span class="delimiter">)</span> =&gt; String<span class="delimiter">)</span> =
    <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#1041786" title="TypeDiagnostics.this.global.Position">pos</a> <span title="(x$1: AnyRef)Boolean">!=</span> <a href="../../../reflect/internal/Positions.scala.html#408302" title="=&gt; reflect.internal.util.NoPosition.type">NoPosition</a><span class="delimiter">)</span>
      <a href="../../../collection/mutable/HashMap.scala.html#88248" title="(key: TypeDiagnostics.this.global.Position, value: () =&gt; String)Unit">addendums</a><span class="delimiter">(</span><a href="#1041786" title="TypeDiagnostics.this.global.Position">pos</a><span class="delimiter">)</span> = <a href="#1041787" title="() =&gt; String">msg</a>

  <span class="keyword">def</span> <a title="(pos: TypeDiagnostics.this.global.Position)String =&gt; String" id="538439">withAddendum</a><span class="delimiter">(</span><a title="TypeDiagnostics.this.global.Position" id="1029507">pos</a>: <a href="../../../reflect/internal/util/Position.scala.html#22953" title="TypeDiagnostics.this.global.Position">Position</a><span class="delimiter">)</span> = <span class="delimiter">(</span><a href="#1029509" title="String">_</a>: <span title="String">String</span><span class="delimiter">)</span> <span title="(x$1: Any)String">+</span> <a href="#538430" title="=&gt; scala.collection.mutable.HashMap[TypeDiagnostics.this.global.Position,() =&gt; String]">addendums</a>.<a href="../../../collection/MapLike.scala.html#87532" title="(key: TypeDiagnostics.this.global.Position, default: =&gt; () =&gt; String)() =&gt; String">getOrElse</a><a href="../../../Function0.scala.html#65930" title="()String" class="delimiter">(</a><a href="#1029507" title="TypeDiagnostics.this.global.Position">pos</a>, <span class="delimiter">(</span><span class="delimiter">)</span> =&gt; <span title="String(&quot;&quot;)" class="string">&quot;&quot;</span><span class="delimiter">)</span><span class="delimiter">(</span><span class="delimiter">)</span>

  <span class="keyword">def</span> <a title="(name: TypeDiagnostics.this.global.Name, owner: TypeDiagnostics.this.global.Symbol)String" id="538440">decodeWithKind</a><span class="delimiter">(</span><a title="TypeDiagnostics.this.global.Name" id="1029580">name</a>: <a href="../../../reflect/internal/Names.scala.html#406868" title="TypeDiagnostics.this.global.Name">Name</a>, <a title="TypeDiagnostics.this.global.Symbol" id="1029581">owner</a>: <a href="../../../reflect/internal/Symbols.scala.html#407146" title="TypeDiagnostics.this.global.Symbol">Symbol</a><span class="delimiter">)</span>: <span title="String">String</span> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="String" id="1105768">prefix</a> = <span class="delimiter">(</span>
      <span title="String" class="keyword">if</span> <span class="delimiter">(</span><a href="#1029580" title="TypeDiagnostics.this.global.Name">name</a>.<a href="../../../reflect/internal/Names.scala.html#410378" title="=&gt; Boolean">isTypeName</a><span class="delimiter">)</span> <span title="String(&quot;type &quot;)" class="string">&quot;type &quot;</span>
      <span class="keyword">else</span> <span title="String" class="keyword">if</span> <span class="delimiter">(</span><a href="#1029581" title="TypeDiagnostics.this.global.Symbol">owner</a>.<a href="../../../reflect/internal/Symbols.scala.html#411219" title="=&gt; Boolean">isPackageClass</a><span class="delimiter">)</span> <span title="String(&quot;object &quot;)" class="string">&quot;object &quot;</span>
      <span class="keyword">else</span> <span title="String(&quot;value &quot;)" class="string">&quot;value &quot;</span>
    <span class="delimiter">)</span>
    <a href="#1105768" title="String">prefix</a> <span title="(x$1: Any)String">+</span> <a href="#1029580" title="TypeDiagnostics.this.global.Name">name</a>.<a href="../../../reflect/internal/Names.scala.html#410422" title="=&gt; String">decode</a>
  <span class="delimiter">}</span>

  /** Does the positioned line assigned to t1 precede that of t2?
   */
  <span class="keyword">def</span> <a title="(p1: TypeDiagnostics.this.global.Position, p2: TypeDiagnostics.this.global.Position)Boolean" id="538441">posPrecedes</a><span class="delimiter">(</span><a title="TypeDiagnostics.this.global.Position" id="1029675">p1</a>: <a href="../../../reflect/internal/util/Position.scala.html#22953" title="TypeDiagnostics.this.global.Position">Position</a>, <a title="TypeDiagnostics.this.global.Position" id="1029676">p2</a>: <a href="../../../reflect/internal/util/Position.scala.html#22953" title="TypeDiagnostics.this.global.Position">Position</a><span class="delimiter">)</span> = <a href="#1029675" title="TypeDiagnostics.this.global.Position">p1</a>.<a href="../../../reflect/internal/util/Position.scala.html#409666" title="=&gt; Boolean">isDefined</a> <a href="../../../Boolean.scala.html#57826" title="(x: Boolean)Boolean">&amp;&amp;</a> <a href="#1029676" title="TypeDiagnostics.this.global.Position">p2</a>.<a href="../../../reflect/internal/util/Position.scala.html#409666" title="=&gt; Boolean">isDefined</a> <a href="../../../Boolean.scala.html#57826" title="(x: Boolean)Boolean">&amp;&amp;</a> <a href="#1029675" title="TypeDiagnostics.this.global.Position">p1</a>.<a href="../../../reflect/internal/util/Position.scala.html#409692" title="=&gt; Int">line</a> <a href="../../../Int.scala.html#57111" title="(x: Int)Boolean">&lt;</a> <a href="#1029676" title="TypeDiagnostics.this.global.Position">p2</a>.<a href="../../../reflect/internal/util/Position.scala.html#409692" title="=&gt; Int">line</a>
  <span class="keyword">def</span> <a title="(t1: TypeDiagnostics.this.global.Tree, t2: TypeDiagnostics.this.global.Tree)Boolean" id="538442">linePrecedes</a><span class="delimiter">(</span><a title="TypeDiagnostics.this.global.Tree" id="1029673">t1</a>: <a href="../../../reflect/internal/Trees.scala.html#407938" title="TypeDiagnostics.this.global.Tree">Tree</a>, <a title="TypeDiagnostics.this.global.Tree" id="1029674">t2</a>: <a href="../../../reflect/internal/Trees.scala.html#407938" title="TypeDiagnostics.this.global.Tree">Tree</a><span class="delimiter">)</span> = <a href="#538441" title="(p1: TypeDiagnostics.this.global.Position, p2: TypeDiagnostics.this.global.Position)Boolean">posPrecedes</a><span class="delimiter">(</span><a href="#1029673" title="TypeDiagnostics.this.global.Tree">t1</a>.<a href="../../../reflect/internal/Trees.scala.html#408571" title="=&gt; TypeDiagnostics.this.global.Position">pos</a>, <a href="#1029674" title="TypeDiagnostics.this.global.Tree">t2</a>.<a href="../../../reflect/internal/Trees.scala.html#408571" title="=&gt; TypeDiagnostics.this.global.Position">pos</a><span class="delimiter">)</span>

  <span class="keyword">private</span> <span class="keyword">object</span> <a title="TypeDiagnostics.this.DealiasedType.type" id="538443">DealiasedType</a> <a href="#538444" title="TypeDiagnostics.this.DealiasedType.type" class="keyword">extends</a> <a href="../../../reflect/internal/Types.scala.html#407460" title="TypeDiagnostics.this.global.TypeMap">TypeMap</a> <span class="delimiter">{</span>
    <span class="keyword">def</span> <a title="(tp: TypeDiagnostics.this.global.Type)TypeDiagnostics.this.global.Type" id="1105770">apply</a><span class="delimiter">(</span><a title="TypeDiagnostics.this.global.Type" id="1105772">tp</a>: <a href="../../../reflect/internal/Types.scala.html#407270" title="TypeDiagnostics.this.global.Type">Type</a><span class="delimiter">)</span>: <a href="../../../reflect/internal/Types.scala.html#407270" title="TypeDiagnostics.this.global.Type">Type</a> = <a href="#1105772" title="TypeDiagnostics.this.global.Type">tp</a> <span class="keyword">match</span> <span class="delimiter">{</span>
      // Avoid &quot;explaining&quot; that String is really java.lang.String,
      // while still dealiasing types from non-default namespaces.
      <span class="keyword">case</span> TypeRef<a href="#3372246" title="TypeDiagnostics.this.global.Type" id="3372248" class="delimiter">(</a><a href="../../../reflect/internal/Types.scala.html#410887" title="TypeDiagnostics.this.global.Type" id="1105780">pre</a>, <a href="../../../reflect/internal/Types.scala.html#410889" title="TypeDiagnostics.this.global.Symbol" id="1105781">sym</a>, <a href="../../../reflect/internal/Types.scala.html#410891" title="List[TypeDiagnostics.this.global.Type]" id="1105782">args</a><span class="delimiter">)</span> <span class="keyword">if</span> <a href="#1105781" title="TypeDiagnostics.this.global.Symbol">sym</a>.<a href="../../../reflect/internal/Symbols.scala.html#411170" title="=&gt; Boolean">isAliasType</a> <a href="../../../Boolean.scala.html#57826" title="(x: Boolean)Boolean">&amp;&amp;</a> <a href="../../../Boolean.scala.html#57822" title="=&gt; Boolean">!</a><a href="#1105781" title="TypeDiagnostics.this.global.Symbol">sym</a>.<a href="../../../reflect/internal/Symbols.scala.html#411258" title="=&gt; Boolean">isInDefaultNamespace</a> =&gt;
        <a href="../../../reflect/internal/Types.scala.html#441772" title="(tp: TypeDiagnostics.this.global.Type)TypeDiagnostics.this.global.Type">mapOver</a><a href="#3372250" title="(x: TypeDiagnostics.this.global.Type)TypeDiagnostics.this.global.Type" class="delimiter">(</a><a href="#1105772" title="TypeDiagnostics.this.global.Type">tp</a>.<a href="../../../reflect/internal/Types.scala.html#408439" title="=&gt; TypeDiagnostics.this.global.Type">dealias</a><span class="delimiter">)</span>
      <span class="keyword">case</span> _ =&gt;
        <a href="../../../reflect/internal/Types.scala.html#441772" title="(tp: TypeDiagnostics.this.global.Type)TypeDiagnostics.this.global.Type">mapOver</a><a href="#3372250" title="(x: TypeDiagnostics.this.global.Type)TypeDiagnostics.this.global.Type" class="delimiter">(</a><a href="#1105772" title="TypeDiagnostics.this.global.Type">tp</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  /** An explanatory note to be added to error messages
   *  when there's a problem with abstract var defs */
  <span class="keyword">def</span> <a title="(sym: TypeDiagnostics.this.global.Symbol)String" id="538445">abstractVarMessage</a><span class="delimiter">(</span><a title="TypeDiagnostics.this.global.Symbol" id="1032506">sym</a>: <a href="../../../reflect/internal/Symbols.scala.html#407146" title="TypeDiagnostics.this.global.Symbol">Symbol</a><span class="delimiter">)</span>: <span title="String">String</span> =
    <span title="String" class="keyword">if</span> <span class="delimiter">(</span><a href="#538449" title="(member: TypeDiagnostics.this.global.Symbol)TypeDiagnostics.this.global.Symbol">underlyingSymbol</a><span class="delimiter">(</span><a href="#1032506" title="TypeDiagnostics.this.global.Symbol">sym</a><span class="delimiter">)</span>.<a href="../../../reflect/internal/Symbols.scala.html#411211" title="=&gt; Boolean">isVariable</a><span class="delimiter">)</span>
      <span title="String(&quot;\n(Note that variables need to be initialized to be defined)&quot;)" class="string">&quot;\n(Note that variables need to be initialized to be defined)&quot;</span>
    <span class="keyword">else</span> <span title="String(&quot;&quot;)" class="string">&quot;&quot;</span>

  /** Only prints the parameter names if they're not synthetic,
   *  since &quot;x$1: Int&quot; does not offer any more information than &quot;Int&quot;.
   */
  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(tp: TypeDiagnostics.this.global.Type)String" id="538446">methodTypeErrorString</a><span class="delimiter">(</span><a title="TypeDiagnostics.this.global.Type" id="1105835">tp</a>: <a href="../../../reflect/internal/Types.scala.html#407270" title="TypeDiagnostics.this.global.Type">Type</a><span class="delimiter">)</span> = <a href="#1105835" title="TypeDiagnostics.this.global.Type">tp</a> <span class="keyword">match</span> <span class="delimiter">{</span>
    <span class="keyword">case</span> mt @ MethodType<a href="#3372255" title="String" id="3372257" class="delimiter">(</a><a href="../../../reflect/internal/Types.scala.html#410769" title="List[TypeDiagnostics.this.global.Symbol]" id="1105839">params</a>, <a href="../../../reflect/internal/Types.scala.html#410771" title="TypeDiagnostics.this.global.Type" id="1105840">resultType</a><span class="delimiter">)</span>  =&gt;
      <span class="keyword">def</span> <a title="=&gt; List[Object]" id="1105841">forString</a> =
        <span title="List[Object]" class="keyword">if</span> <span class="delimiter">(</span><a href="#1105839" title="List[TypeDiagnostics.this.global.Symbol]">params</a> <a href="../../../collection/LinearSeqOptimized.scala.html#86379" title="(p: TypeDiagnostics.this.global.Symbol =&gt; Boolean)Boolean">exists</a> <span class="delimiter">(</span><a href="#1105848" title="TypeDiagnostics.this.global.Symbol">_</a>.<a href="../../../reflect/internal/HasFlags.scala.html#409872" title="=&gt; Boolean">isSynthetic</a><span class="delimiter">)</span><span class="delimiter">)</span> <a href="#1105839" title="List[TypeDiagnostics.this.global.Symbol]">params</a> <a href="../../../collection/TraversableLike.scala.html#58063" title="(f: TypeDiagnostics.this.global.Symbol =&gt; TypeDiagnostics.this.global.Type)(implicit bf: scala.collection.generic.CanBuildFrom[List[TypeDiagnostics.this.global.Symbol],TypeDiagnostics.this.global.Type,List[TypeDiagnostics.this.global.Type]])List[TypeDiagnostics.this.global.Type]">map</a> <span class="delimiter">(</span><a href="#1105865" title="TypeDiagnostics.this.global.Symbol">_</a>.<a href="../../../reflect/internal/Symbols.scala.html#411365" title="=&gt; TypeDiagnostics.this.global.Type">tpe</a><span class="delimiter">)</span>
        <span class="keyword">else</span> <a href="#1105839" title="List[TypeDiagnostics.this.global.Symbol]">params</a> <a href="../../../collection/TraversableLike.scala.html#58063" title="(f: TypeDiagnostics.this.global.Symbol =&gt; String)(implicit bf: scala.collection.generic.CanBuildFrom[List[TypeDiagnostics.this.global.Symbol],String,List[String]])List[String]">map</a> <span class="delimiter">(</span><a href="#1105904" title="TypeDiagnostics.this.global.Symbol">_</a>.<a href="../../../reflect/internal/Symbols.scala.html#411516" title="=&gt; String">defString</a><span class="delimiter">)</span>

       <a href="#1105841" title="=&gt; List[Object]">forString</a>.<a href="../../../collection/TraversableOnce.scala.html#58282" title="(start: String, sep: String, end: String)String">mkString</a><span class="delimiter">(</span><span title="String(&quot;(&quot;)" class="string">&quot;(&quot;</span>, <span title="String(&quot;,&quot;)" class="string">&quot;,&quot;</span>, <span title="String(&quot;)&quot;)" class="string">&quot;)&quot;</span><span class="delimiter">)</span> <span title="(x$1: Any)String">+</span> <a href="#1105840" title="TypeDiagnostics.this.global.Type">resultType</a>
    <span class="keyword">case</span> x                                    =&gt; x.<a href="#3372259" title="(x: String)String">toString</a>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="(tree: TypeDiagnostics.this.global.Tree)List[TypeDiagnostics.this.global.Type]" id="538447">alternatives</a><span class="delimiter">(</span><a title="TypeDiagnostics.this.global.Tree" id="1031272">tree</a>: <a href="../../../reflect/internal/Trees.scala.html#407938" title="TypeDiagnostics.this.global.Tree">Tree</a><span class="delimiter">)</span>: <a href="../../../collection/immutable/List.scala.html#11952" title="List[TypeDiagnostics.this.global.Type]">List</a><span class="delimiter">[</span>Type<span class="delimiter">]</span> = <a href="#1031272" title="TypeDiagnostics.this.global.Tree">tree</a>.<a href="../../../reflect/internal/Trees.scala.html#408573" title="=&gt; TypeDiagnostics.this.global.Type">tpe</a> <span class="keyword">match</span> <span class="delimiter">{</span>
    <span class="keyword">case</span> OverloadedType<a href="#3372264" title="List[TypeDiagnostics.this.global.Type]" id="3372266" class="delimiter">(</a><a href="../../../reflect/internal/Types.scala.html#450705" title="TypeDiagnostics.this.global.Type" id="1109429">pre</a>, <a href="../../../reflect/internal/Types.scala.html#450707" title="List[TypeDiagnostics.this.global.Symbol]" id="1109430">alternatives</a><span class="delimiter">)</span>  =&gt; <a href="#1109430" title="List[TypeDiagnostics.this.global.Symbol]">alternatives</a> <a href="#3372268" title="(x: List[TypeDiagnostics.this.global.Type])List[TypeDiagnostics.this.global.Type]">map</a> <a href="#1109429" title="TypeDiagnostics.this.global.Type">pre</a>.<a href="../../../reflect/internal/Types.scala.html#408462" title="(sym: TypeDiagnostics.this.global.Symbol)TypeDiagnostics.this.global.Type">memberType</a>
    <span class="keyword">case</span> _                                  =&gt; <a href="#3372268" title="(x: List[TypeDiagnostics.this.global.Type])List[TypeDiagnostics.this.global.Type]">Nil</a>
  <span class="delimiter">}</span>
  <span class="keyword">def</span> <a title="(tree: TypeDiagnostics.this.global.Tree)String" id="538448">alternativesString</a><span class="delimiter">(</span><a title="TypeDiagnostics.this.global.Tree" id="1109481">tree</a>: <a href="../../../reflect/internal/Trees.scala.html#407938" title="TypeDiagnostics.this.global.Tree">Tree</a><span class="delimiter">)</span> =
    <a href="#538447" title="(tree: TypeDiagnostics.this.global.Tree)List[TypeDiagnostics.this.global.Type]">alternatives</a><span class="delimiter">(</span><a href="#1109481" title="TypeDiagnostics.this.global.Tree">tree</a><span class="delimiter">)</span> <a href="../../../collection/TraversableLike.scala.html#58063" title="(f: TypeDiagnostics.this.global.Type =&gt; String)(implicit bf: scala.collection.generic.CanBuildFrom[List[TypeDiagnostics.this.global.Type],String,List[String]])List[String]">map</a> <span class="delimiter">(</span><a title="TypeDiagnostics.this.global.Type" id="1109501">x</a> =&gt; <span title="String(&quot;  &quot;)" class="string">&quot;  &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#538446" title="(tp: TypeDiagnostics.this.global.Type)String">methodTypeErrorString</a><span class="delimiter">(</span><a href="#1109501" title="TypeDiagnostics.this.global.Type">x</a><span class="delimiter">)</span><span class="delimiter">)</span> <a href="../../../collection/TraversableOnce.scala.html#58282" title="(start: String, sep: String, end: String)String">mkString</a> <span class="delimiter">(</span><span title="String(&quot;&quot;)" class="string">&quot;&quot;</span>, <span title="String(&quot; &lt;and&gt;\n&quot;)" class="string">&quot; &lt;and&gt;\n&quot;</span>, <span title="String(&quot;\n&quot;)" class="string">&quot;\n&quot;</span><span class="delimiter">)</span>

  /** The symbol which the given accessor represents (possibly in part).
   *  This is used for error messages, where we want to speak in terms
   *  of the actual declaration or definition, not in terms of the generated setters
   *  and getters.
   */
  <span class="keyword">def</span> <a title="(member: TypeDiagnostics.this.global.Symbol)TypeDiagnostics.this.global.Symbol" id="538449">underlyingSymbol</a><span class="delimiter">(</span><a title="TypeDiagnostics.this.global.Symbol" id="1031570">member</a>: <a href="../../../reflect/internal/Symbols.scala.html#407146" title="TypeDiagnostics.this.global.Symbol">Symbol</a><span class="delimiter">)</span>: <a href="../../../reflect/internal/Symbols.scala.html#407146" title="TypeDiagnostics.this.global.Symbol">Symbol</a> =
    <span title="TypeDiagnostics.this.global.Symbol" class="keyword">if</span> <span class="delimiter">(</span><a href="../../../Boolean.scala.html#57822" title="=&gt; Boolean">!</a><a href="#1031570" title="TypeDiagnostics.this.global.Symbol">member</a>.<a href="../../../reflect/internal/HasFlags.scala.html#409839" title="=&gt; Boolean">hasAccessorFlag</a><span class="delimiter">)</span> <a href="#1031570" title="TypeDiagnostics.this.global.Symbol">member</a>
    <span class="keyword">else</span> <span title="TypeDiagnostics.this.global.Symbol" class="keyword">if</span> <span class="delimiter">(</span><a href="../../../Boolean.scala.html#57822" title="=&gt; Boolean">!</a><a href="#1031570" title="TypeDiagnostics.this.global.Symbol">member</a>.<a href="../../../reflect/internal/HasFlags.scala.html#409850" title="=&gt; Boolean">isDeferred</a><span class="delimiter">)</span> <a href="#1031570" title="TypeDiagnostics.this.global.Symbol">member</a>.<a href="../../../reflect/internal/Symbols.scala.html#411430" title="=&gt; TypeDiagnostics.this.global.Symbol">accessed</a>
    <span class="keyword">else</span> <span class="delimiter">{</span>
      <span class="keyword">val</span> <a title="TypeDiagnostics.this.global.Symbol" id="1109536">getter</a> = <span title="TypeDiagnostics.this.global.Symbol" class="keyword">if</span> <span class="delimiter">(</span><a href="#1031570" title="TypeDiagnostics.this.global.Symbol">member</a>.<a href="../../../reflect/internal/Symbols.scala.html#411207" title="=&gt; Boolean">isSetter</a><span class="delimiter">)</span> <a href="#1031570" title="TypeDiagnostics.this.global.Symbol">member</a>.<a href="../../../reflect/internal/Symbols.scala.html#411469" title="(base: TypeDiagnostics.this.global.Symbol)TypeDiagnostics.this.global.Symbol">getter</a><span class="delimiter">(</span><a href="#1031570" title="TypeDiagnostics.this.global.Symbol">member</a>.<a href="../../../reflect/internal/Symbols.scala.html#411315" title="=&gt; TypeDiagnostics.this.global.Symbol">owner</a><span class="delimiter">)</span> <span class="keyword">else</span> <a href="#1031570" title="TypeDiagnostics.this.global.Symbol">member</a>
      <span class="keyword">val</span> <a title="Int" id="1109537">flags</a>  = <span title="Int" class="keyword">if</span> <span class="delimiter">(</span><a href="#1109536" title="TypeDiagnostics.this.global.Symbol">getter</a>.<a href="../../../reflect/internal/Symbols.scala.html#411471" title="(base: TypeDiagnostics.this.global.Symbol)TypeDiagnostics.this.global.Symbol">setter</a><span class="delimiter">(</span><a href="#1031570" title="TypeDiagnostics.this.global.Symbol">member</a>.<a href="../../../reflect/internal/Symbols.scala.html#411315" title="=&gt; TypeDiagnostics.this.global.Symbol">owner</a><span class="delimiter">)</span> <span title="(x$1: AnyRef)Boolean">!=</span> <a href="../../../reflect/internal/Symbols.scala.html#407184" title="=&gt; TypeDiagnostics.this.global.NoSymbol">NoSymbol</a><span class="delimiter">)</span> DEFERRED <span title="Int(4112)">|</span> MUTABLE <span class="keyword">else</span> <span title="Int(16)">DEFERRED</span>

      <a href="#1109536" title="TypeDiagnostics.this.global.Symbol">getter</a>.<a href="../../../reflect/internal/Symbols.scala.html#411315" title="=&gt; TypeDiagnostics.this.global.Symbol">owner</a>.<a href="../../../reflect/internal/Symbols.scala.html#411109" title="(name: TypeDiagnostics.this.global.TermName, pos: TypeDiagnostics.this.global.Position, newFlags: Long)TypeDiagnostics.this.global.TermSymbol">newValue</a><span class="delimiter">(</span><a href="#1109536" title="TypeDiagnostics.this.global.Symbol">getter</a>.<a href="../../../reflect/internal/Symbols.scala.html#411087" title="=&gt; getter.NameType">name</a>.<a href="../../../reflect/internal/Names.scala.html#410379" title="=&gt; TypeDiagnostics.this.global.TermName">toTermName</a>, <a href="#1109536" title="TypeDiagnostics.this.global.Symbol">getter</a>.<a href="../../../reflect/internal/StdAttachments.scala.html#409602" title="=&gt; TypeDiagnostics.this.global.Position">pos</a>, <a href="../../../Int.scala.html#57081" title="=&gt; Long">flags</a><span class="delimiter">)</span> <a href="../../../reflect/internal/Symbols.scala.html#411369" title="(info: TypeDiagnostics.this.global.Type)TypeDiagnostics.this.global.TermSymbol">setInfo</a> <a href="#1109536" title="TypeDiagnostics.this.global.Symbol">getter</a>.<a href="../../../reflect/internal/Symbols.scala.html#411365" title="=&gt; TypeDiagnostics.this.global.Type">tpe</a>.<a href="../../../reflect/internal/Types.scala.html#408423" title="=&gt; TypeDiagnostics.this.global.Type">resultType</a>
    <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="(tree: TypeDiagnostics.this.global.Tree)String" id="538450">treeSymTypeMsg</a><span class="delimiter">(</span><a title="TypeDiagnostics.this.global.Tree" id="1029776">tree</a>: <a href="../../../reflect/internal/Trees.scala.html#407938" title="TypeDiagnostics.this.global.Tree">Tree</a><span class="delimiter">)</span>: <span title="String">String</span> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="TypeDiagnostics.this.global.Symbol" id="1109569">sym</a>               = <a href="#1029776" title="TypeDiagnostics.this.global.Tree">tree</a>.<a href="../../../reflect/internal/Trees.scala.html#408577" title="=&gt; TypeDiagnostics.this.global.Symbol">symbol</a>
    <span class="keyword">def</span> <a title="=&gt; Boolean" id="1109570">hasParams</a>         = <a href="#1029776" title="TypeDiagnostics.this.global.Tree">tree</a>.<a href="../../../reflect/internal/Trees.scala.html#408573" title="=&gt; TypeDiagnostics.this.global.Type">tpe</a>.<a href="../../../reflect/internal/Types.scala.html#408428" title="=&gt; Int">paramSectionCount</a> <a href="../../../Int.scala.html#57125" title="(x: Int)Boolean">&gt;</a> <span title="Int(0)" class="int">0</span>
    <span class="keyword">def</span> <a title="=&gt; String" id="1109571">preResultString</a>   = <span title="String" class="keyword">if</span> <span class="delimiter">(</span><a href="#1109570" title="=&gt; Boolean">hasParams</a><span class="delimiter">)</span> <span title="String(&quot;: &quot;)" class="string">&quot;: &quot;</span> <span class="keyword">else</span> <span title="String(&quot; of type &quot;)" class="string">&quot; of type &quot;</span>

    <span class="keyword">def</span> <a title="=&gt; String" id="1109572">patternMessage</a>    = <span title="String(&quot;pattern &quot;)" class="string">&quot;pattern &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#1029776" title="TypeDiagnostics.this.global.Tree">tree</a>.<a href="../../../reflect/internal/Trees.scala.html#408573" title="=&gt; TypeDiagnostics.this.global.Type">tpe</a>.<a href="../../../reflect/internal/Types.scala.html#408427" title="=&gt; TypeDiagnostics.this.global.Type">finalResultType</a> <span title="(x$1: Any)String">+</span> <a href="../../../reflect/internal/Definitions.scala.html#409082" title="(tp: TypeDiagnostics.this.global.Type)String">valueParamsString</a><span class="delimiter">(</span><a href="#1029776" title="TypeDiagnostics.this.global.Tree">tree</a>.<a href="../../../reflect/internal/Trees.scala.html#408573" title="=&gt; TypeDiagnostics.this.global.Type">tpe</a><span class="delimiter">)</span>
    <span class="keyword">def</span> <a title="=&gt; String" id="1109573">exprMessage</a>       = <span title="String(&quot;expression of type &quot;)" class="string">&quot;expression of type &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#1029776" title="TypeDiagnostics.this.global.Tree">tree</a>.<a href="../../../reflect/internal/Trees.scala.html#408573" title="=&gt; TypeDiagnostics.this.global.Type">tpe</a>
    <span class="keyword">def</span> <a title="=&gt; String" id="1109574">overloadedMessage</a> = <a href="../../../StringContext.scala.html#56629" title="(args: Any*)String">s</a>&quot;overloaded method $<a href="#1109569" title="TypeDiagnostics.this.global.Symbol">sym</a><span class="string"> with alternatives:\n&quot;</span> <span title="(x$1: Any)String">+</span> <a href="#538448" title="(tree: TypeDiagnostics.this.global.Tree)String">alternativesString</a><span class="delimiter">(</span><a href="#1029776" title="TypeDiagnostics.this.global.Tree">tree</a><span class="delimiter">)</span>
    <span class="keyword">def</span> <a title="=&gt; String" id="1109575">moduleMessage</a>     = <span title="String(&quot;&quot;)" class="string">&quot;&quot;</span> <span title="(x$1: Any)String">+</span> <a href="#1109569" title="TypeDiagnostics.this.global.Symbol">sym</a>
    <span class="keyword">def</span> <a title="=&gt; String" id="1109576">defaultMessage</a>    = <a href="#1109575" title="=&gt; String">moduleMessage</a> <span title="(x$1: Any)String">+</span> <a href="#1109571" title="=&gt; String">preResultString</a> <span title="(x$1: Any)String">+</span> <a href="#1029776" title="TypeDiagnostics.this.global.Tree">tree</a>.<a href="../../../reflect/internal/Trees.scala.html#408573" title="=&gt; TypeDiagnostics.this.global.Type">tpe</a>
    <span class="keyword">def</span> <a title="=&gt; String" id="1109577">applyMessage</a>      = <a href="#1109576" title="=&gt; String">defaultMessage</a> <span title="(x$1: Any)String">+</span> <a href="#1029776" title="TypeDiagnostics.this.global.Tree">tree</a>.<a href="../../../reflect/internal/Trees.scala.html#408577" title="=&gt; TypeDiagnostics.this.global.Symbol">symbol</a>.<a href="../../../reflect/internal/Symbols.scala.html#411509" title="=&gt; String">locationString</a>

    <span title="String" class="keyword">if</span> <span class="delimiter">(</span><span class="delimiter">(</span><a href="#1109569" title="TypeDiagnostics.this.global.Symbol">sym</a> <span title="(x$1: AnyRef)Boolean">eq</span> <span title="Null(null)" class="keyword">null</span><span class="delimiter">)</span> <a href="../../../Boolean.scala.html#57825" title="(x: Boolean)Boolean">||</a> <span class="delimiter">(</span><a href="#1109569" title="TypeDiagnostics.this.global.Symbol">sym</a> <span title="(x$1: AnyRef)Boolean">eq</span> <a href="../../../reflect/internal/Symbols.scala.html#407184" title="=&gt; TypeDiagnostics.this.global.NoSymbol">NoSymbol</a><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">{</span>
      <span title="String" class="keyword">if</span> <span class="delimiter">(</span><a href="#538433" title="=&gt; Boolean">isTyperInPattern</a><span class="delimiter">)</span> <a href="#1109572" title="=&gt; String">patternMessage</a>
      <span class="keyword">else</span> <a href="#1109573" title="=&gt; String">exprMessage</a>
    <span class="delimiter">}</span>
    <span class="keyword">else</span> <span title="String" class="keyword">if</span> <span class="delimiter">(</span><a href="#1109569" title="TypeDiagnostics.this.global.Symbol">sym</a>.<a href="../../../reflect/internal/Symbols.scala.html#411206" title="=&gt; Boolean">isOverloaded</a><span class="delimiter">)</span> <a href="#1109574" title="=&gt; String">overloadedMessage</a>
    <span class="keyword">else</span> <span title="String" class="keyword">if</span> <span class="delimiter">(</span><a href="#1109569" title="TypeDiagnostics.this.global.Symbol">sym</a>.<a href="../../../reflect/api/Symbols.scala.html#402401" title="=&gt; Boolean">isModule</a><span class="delimiter">)</span> <a href="#1109575" title="=&gt; String">moduleMessage</a>
    <span class="keyword">else</span> <span title="String" class="keyword">if</span> <span class="delimiter">(</span><a href="#1109569" title="TypeDiagnostics.this.global.Symbol">sym</a>.<a href="../../../reflect/internal/Symbols.scala.html#411087" title="=&gt; sym.NameType">name</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="../../../reflect/internal/StdNames.scala.html#407871" title="TypeDiagnostics.this.global.nme.type">nme</a>.<a href="../../../reflect/internal/StdNames.scala.html#414263" title="=&gt; TypeDiagnostics.this.global.nme.NameType">apply</a><span class="delimiter">)</span> <a href="#1109577" title="=&gt; String">applyMessage</a>
    <span class="keyword">else</span> <a href="#1109576" title="=&gt; String">defaultMessage</a>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="(ss: List[String])List[String]" id="538451">disambiguate</a><span class="delimiter">(</span><a title="List[String]" id="1109588">ss</a>: <a href="../../../collection/immutable/List.scala.html#11952" title="List[String]">List</a><span class="delimiter">[</span>String<span class="delimiter">]</span><span class="delimiter">)</span> = <a href="#1109588" title="List[String]">ss</a> <span class="keyword">match</span> <span class="delimiter">{</span>
    <span class="keyword">case</span> <a href="../../../collection/immutable/List.scala.html#11188" title="List[String]" id="3372289">Nil</a>      =&gt; <a href="#3372291" title="(x: List[String])List[String]">Nil</a>
    <span class="keyword">case</span> <a href="../../../collection/immutable/List.scala.html#206583" title="String" id="1109591">s</a> <a href="#3372286" title="List[String]" id="3372288">::</a> <a href="../../../collection/immutable/List.scala.html#206584" title="List[String]" id="1109592">ss</a>  =&gt; <a href="#1109591" title="String">s</a> <a href="#3372291" title="(x: List[String])List[String]">::</a> <span class="delimiter">(</span><a href="#1109592" title="List[String]">ss</a> <a href="../../../collection/TraversableLike.scala.html#58063" title="(f: String =&gt; String)(implicit bf: scala.collection.generic.CanBuildFrom[List[String],String,List[String]])List[String]">map</a> <a href="#1109610" title="String" class="delimiter">{</a> <span class="keyword">case</span> <a href="#1109591" title="String" id="3372276">`s`</a> =&gt; <span title="String(&quot;(some other)&quot;)" class="string">&quot;(some other)&quot;</span><a href="#3372278" title="(x: String)String">+</a><a href="#1109591" title="String">s</a> ; <span class="keyword">case</span> x =&gt; <a href="#3372278" title="(x: String)String">x</a> <span class="delimiter">}</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  // todo: use also for other error messages
  <span class="keyword">def</span> <a title="(tp: TypeDiagnostics.this.global.Type)String" id="538452">existentialContext</a><span class="delimiter">(</span><a title="TypeDiagnostics.this.global.Type" id="1109645">tp</a>: <a href="../../../reflect/internal/Types.scala.html#407270" title="TypeDiagnostics.this.global.Type">Type</a><span class="delimiter">)</span> = <a href="#1109645" title="TypeDiagnostics.this.global.Type">tp</a>.<a href="../../../reflect/internal/Types.scala.html#408508" title="=&gt; List[TypeDiagnostics.this.global.Symbol]">skolemsExceptMethodTypeParams</a> <span class="keyword">match</span> <span class="delimiter">{</span>
    <span class="keyword">case</span> <a href="../../../collection/immutable/List.scala.html#11188" title="String" id="3372301">Nil</a>  =&gt; <a href="#3372303" title="(x: String)String" class="string">&quot;&quot;</a>
    <span class="keyword">case</span> xs   =&gt; <span title="String(&quot; where &quot;)" class="string">&quot; where &quot;</span> <a href="#3372303" title="(x: String)String">+</a> <span class="delimiter">(</span><a href="#538451" title="(ss: List[String])List[String]">disambiguate</a><span class="delimiter">(</span>xs <a href="../../../collection/TraversableLike.scala.html#58063" title="(f: TypeDiagnostics.this.global.Symbol =&gt; String)(implicit bf: scala.collection.generic.CanBuildFrom[List[TypeDiagnostics.this.global.Symbol],String,List[String]])List[String]">map</a> <span class="delimiter">(</span><a href="#1109663" title="TypeDiagnostics.this.global.Symbol">_</a>.<a href="../../../reflect/internal/Symbols.scala.html#411520" title="=&gt; String">existentialToString</a><span class="delimiter">)</span><span class="delimiter">)</span> <a href="../../../collection/TraversableOnce.scala.html#58283" title="(sep: String)String">mkString</a> <span title="String(&quot;, &quot;)" class="string">&quot;, &quot;</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="(sym: TypeDiagnostics.this.global.Symbol)String" id="538453">varianceWord</a><span class="delimiter">(</span><a title="TypeDiagnostics.this.global.Symbol" id="1109695">sym</a>: <a href="../../../reflect/internal/Symbols.scala.html#407146" title="TypeDiagnostics.this.global.Symbol">Symbol</a><span class="delimiter">)</span>: <span title="String">String</span> =
    <span title="String" class="keyword">if</span> <span class="delimiter">(</span><a href="#1109695" title="TypeDiagnostics.this.global.Symbol">sym</a>.<a href="../../../reflect/internal/Symbols.scala.html#411313" title="=&gt; Int">variance</a> <a href="../../../Int.scala.html#57097" title="(x: Int)Boolean">==</a> <span title="Int(1)" class="int">1</span><span class="delimiter">)</span> <span title="String(&quot;covariant&quot;)" class="string">&quot;covariant&quot;</span>
    <span class="keyword">else</span> <span title="String" class="keyword">if</span> <span class="delimiter">(</span><a href="#1109695" title="TypeDiagnostics.this.global.Symbol">sym</a>.<a href="../../../reflect/internal/Symbols.scala.html#411313" title="=&gt; Int">variance</a> <a href="../../../Int.scala.html#57097" title="(x: Int)Boolean">==</a> -<span title="Int(-1)" class="int">1</span><span class="delimiter">)</span> <span title="String(&quot;contravariant&quot;)" class="string">&quot;contravariant&quot;</span>
    <span class="keyword">else</span> <span title="String(&quot;invariant&quot;)" class="string">&quot;invariant&quot;</span>

  <span class="keyword">def</span> <a title="(tp: TypeDiagnostics.this.global.Type)String" id="538454">explainAlias</a><span class="delimiter">(</span><a title="TypeDiagnostics.this.global.Type" id="1109706">tp</a>: <a href="../../../reflect/internal/Types.scala.html#407270" title="TypeDiagnostics.this.global.Type">Type</a><span class="delimiter">)</span> = <span class="delimiter">{</span>
    // Don't automatically normalize standard aliases; they still will be
    // expanded if necessary to disambiguate simple identifiers.
    <span title="String" class="keyword">if</span> <span class="delimiter">(</span><span class="delimiter">(</span><a href="#1109706" title="TypeDiagnostics.this.global.Type">tp</a> <span title="(x$1: AnyRef)Boolean">eq</span> <a href="#1109706" title="TypeDiagnostics.this.global.Type">tp</a>.<a href="../../../reflect/internal/Types.scala.html#408438" title="=&gt; TypeDiagnostics.this.global.Type">normalize</a><span class="delimiter">)</span> <a href="../../../Boolean.scala.html#57825" title="(x: Boolean)Boolean">||</a> <a href="#1109706" title="TypeDiagnostics.this.global.Type">tp</a>.<a href="../../../reflect/internal/Types.scala.html#408409" title="=&gt; TypeDiagnostics.this.global.Symbol">typeSymbolDirect</a>.<a href="../../../reflect/internal/Symbols.scala.html#411258" title="=&gt; Boolean">isInDefaultNamespace</a><span class="delimiter">)</span> <span title="String(&quot;&quot;)" class="string">&quot;&quot;</span>
    <span class="keyword">else</span> <span class="delimiter">{</span>
      // A sanity check against expansion being identical to original.
      <span class="keyword">val</span> <a title="String" id="1109707">s</a> = <span title="String(&quot;&quot;)" class="string">&quot;&quot;</span> <span title="(x$1: Any)String">+</span> <a href="#1105770" title="(tp: TypeDiagnostics.this.global.Type)TypeDiagnostics.this.global.Type">DealiasedType</a><span class="delimiter">(</span><a href="#1109706" title="TypeDiagnostics.this.global.Type">tp</a><span class="delimiter">)</span>
      <span title="String" class="keyword">if</span> <span class="delimiter">(</span><a href="#1109707" title="String">s</a> <span title="(x$1: AnyRef)Boolean">==</span> <span title="String(&quot;&quot;)" class="string">&quot;&quot;</span> <span title="(x$1: Any)String">+</span> <a href="#1109706" title="TypeDiagnostics.this.global.Type">tp</a><span class="delimiter">)</span> <span title="String(&quot;&quot;)" class="string">&quot;&quot;</span>
      <span class="keyword">else</span> <span title="String(&quot;\n    (which expands to)  &quot;)" class="string">&quot;\n    (which expands to)  &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#1109707" title="String">s</a>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  /** Look through the base types of the found type for any which
   *  might have been valid subtypes if given conformant type arguments.
   *  Examine those for situations where the type error would have been
   *  eliminated if the variance were different.  In such cases, append
   *  an additional explanatory message.
   *
   *  TODO: handle type aliases better.
   */
  <span class="keyword">def</span> <a title="(found: TypeDiagnostics.this.global.Type, req: TypeDiagnostics.this.global.Type)String" id="538455">explainVariance</a><span class="delimiter">(</span><a title="TypeDiagnostics.this.global.Type" id="1109714">found</a>: <a href="../../../reflect/internal/Types.scala.html#407270" title="TypeDiagnostics.this.global.Type">Type</a>, <a title="TypeDiagnostics.this.global.Type" id="1109715">req</a>: <a href="../../../reflect/internal/Types.scala.html#407270" title="TypeDiagnostics.this.global.Type">Type</a><span class="delimiter">)</span>: <span title="String">String</span> = <span class="delimiter">{</span>
    <a href="#1109714" title="TypeDiagnostics.this.global.Type">found</a>.<a href="../../../reflect/internal/Types.scala.html#408489" title="=&gt; TypeDiagnostics.this.global.BaseTypeSeq">baseTypeSeq</a>.<a href="../../../reflect/internal/BaseTypeSeqs.scala.html#415203" title="=&gt; List[TypeDiagnostics.this.global.Type]">toList</a> <a href="../../../collection/immutable/List.scala.html#62719" title="(f: TypeDiagnostics.this.global.Type =&gt; Unit)Unit">foreach</a> <span class="delimiter">{</span> <a title="TypeDiagnostics.this.global.Type" id="1109738">tp</a> =&gt;
      <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#1109738" title="TypeDiagnostics.this.global.Type">tp</a>.<a href="../../../reflect/internal/Types.scala.html#408407" title="=&gt; TypeDiagnostics.this.global.Symbol">typeSymbol</a> <a href="../../../reflect/internal/Symbols.scala.html#411410" title="(that: TypeDiagnostics.this.global.Symbol)Boolean">isSubClass</a> <a href="#1109715" title="TypeDiagnostics.this.global.Type">req</a>.<a href="../../../reflect/internal/Types.scala.html#408407" title="=&gt; TypeDiagnostics.this.global.Symbol">typeSymbol</a><span class="delimiter">)</span> <span class="delimiter">{</span>
        <span class="keyword">val</span> <a title="List[TypeDiagnostics.this.global.Type]" id="1109740">foundArgs</a> = <a href="#1109738" title="TypeDiagnostics.this.global.Type">tp</a>.<a href="../../../reflect/internal/Types.scala.html#408421" title="=&gt; List[TypeDiagnostics.this.global.Type]">typeArgs</a>
        <span class="keyword">val</span> <a title="List[TypeDiagnostics.this.global.Type]" id="1109741">reqArgs</a>   = <a href="#1109715" title="TypeDiagnostics.this.global.Type">req</a>.<a href="../../../reflect/internal/Types.scala.html#408421" title="=&gt; List[TypeDiagnostics.this.global.Type]">typeArgs</a>
        <span class="keyword">val</span> <a title="List[TypeDiagnostics.this.global.Symbol]" id="1109742">params</a>    = <a href="#1109715" title="TypeDiagnostics.this.global.Type">req</a>.<a href="../../../reflect/internal/Types.scala.html#408420" title="=&gt; TypeDiagnostics.this.global.Type">typeConstructor</a>.<a href="../../../reflect/internal/Types.scala.html#408432" title="=&gt; List[TypeDiagnostics.this.global.Symbol]">typeParams</a>

        <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#1109740" title="List[TypeDiagnostics.this.global.Type]">foundArgs</a>.<a href="../../../collection/TraversableOnce.scala.html#58191" title="=&gt; Boolean">nonEmpty</a> <a href="../../../Boolean.scala.html#57826" title="(x: Boolean)Boolean">&amp;&amp;</a> <a href="#1109740" title="List[TypeDiagnostics.this.global.Type]">foundArgs</a>.<a href="../../../collection/LinearSeqOptimized.scala.html#86373" title="=&gt; Int">length</a> <a href="../../../Int.scala.html#57097" title="(x: Int)Boolean">==</a> <a href="#1109741" title="List[TypeDiagnostics.this.global.Type]">reqArgs</a>.<a href="../../../collection/LinearSeqOptimized.scala.html#86373" title="=&gt; Int">length</a><span class="delimiter">)</span> <span class="delimiter">{</span>
          <span class="keyword">val</span> <a title="List[Option[String]]" id="1109748">relationships</a> = <a href="../../../Predef.scala.html#7536" title="(x: (List[TypeDiagnostics.this.global.Type], List[TypeDiagnostics.this.global.Type], List[TypeDiagnostics.this.global.Symbol]))runtime.Tuple3Zipped.Ops[List[TypeDiagnostics.this.global.Type],List[TypeDiagnostics.this.global.Type],List[TypeDiagnostics.this.global.Symbol]]" class="delimiter">(</a><a href="#1109740" title="List[TypeDiagnostics.this.global.Type]">foundArgs</a>, <a href="#1109741" title="List[TypeDiagnostics.this.global.Type]">reqArgs</a>, <a href="#1109742" title="List[TypeDiagnostics.this.global.Symbol]">params</a><span class="delimiter">)</span>.<a href="../../../runtime/Tuple3Zipped.scala.html#60547" title="(implicit w1: List[TypeDiagnostics.this.global.Type] =&gt; scala.collection.TraversableLike[TypeDiagnostics.this.global.Type,List[TypeDiagnostics.this.global.Type]], implicit w2: List[TypeDiagnostics.this.global.Type] =&gt; scala.collection.IterableLike[TypeDiagnostics.this.global.Type,List[TypeDiagnostics.this.global.Type]], implicit w3: List[TypeDiagnostics.this.global.Symbol] =&gt; scala.collection.IterableLike[TypeDiagnostics.this.global.Symbol,List[TypeDiagnostics.this.global.Symbol]])scala.runtime.Tuple3Zipped[TypeDiagnostics.this.global.Type,List[TypeDiagnostics.this.global.Type],TypeDiagnostics.this.global.Type,List[TypeDiagnostics.this.global.Type],TypeDiagnostics.this.global.Symbol,List[TypeDiagnostics.this.global.Symbol]]">zipped</a> <a href="../../../runtime/Tuple3Zipped.scala.html#583973" title="(f: (TypeDiagnostics.this.global.Type, TypeDiagnostics.this.global.Type, TypeDiagnostics.this.global.Symbol) =&gt; Option[String])(implicit cbf: scala.collection.generic.CanBuildFrom[List[TypeDiagnostics.this.global.Type],Option[String],List[Option[String]]])List[Option[String]]">map</a> <a href="../../../Tuple3.scala.html#63169" title="(_1: TypeDiagnostics.this.global.Type, _2: TypeDiagnostics.this.global.Type, _3: TypeDiagnostics.this.global.Symbol)(TypeDiagnostics.this.global.Type, TypeDiagnostics.this.global.Type, TypeDiagnostics.this.global.Symbol)" class="delimiter">{</a>
            <span class="keyword">case</span> <span class="delimiter">(</span><a href="../../../Tuple3.scala.html#60576" title="TypeDiagnostics.this.global.Type" id="1109844">arg</a>, <a href="../../../Tuple3.scala.html#60578" title="TypeDiagnostics.this.global.Type" id="1109845">reqArg</a>, <a href="../../../Tuple3.scala.html#60580" title="TypeDiagnostics.this.global.Symbol" id="1109846">param</a><span class="delimiter">)</span> =&gt;
              <span class="keyword">def</span> <a title="(isSubtype: Boolean)Some[String]" id="1109847">mkMsg</a><span class="delimiter">(</span><a title="Boolean" id="1109850">isSubtype</a>: <a href="../../../Boolean.scala.html#1425" title="Boolean">Boolean</a><span class="delimiter">)</span> = <span class="delimiter">{</span>
                <span class="keyword">val</span> <a title="String" id="1109851">op</a>      = <span title="String" class="keyword">if</span> <span class="delimiter">(</span><a href="#1109850" title="Boolean">isSubtype</a><span class="delimiter">)</span> <span title="String(&quot;&lt;:&quot;)" class="string">&quot;&lt;:&quot;</span> <span class="keyword">else</span> <span title="String(&quot;&gt;:&quot;)" class="string">&quot;&gt;:&quot;</span>
                <span class="keyword">val</span> <a title="String" id="1109852">suggest</a> = <span title="String" class="keyword">if</span> <span class="delimiter">(</span><a href="#1109850" title="Boolean">isSubtype</a><span class="delimiter">)</span> <span title="String(&quot;+&quot;)" class="string">&quot;+&quot;</span> <span class="keyword">else</span> <span title="String(&quot;-&quot;)" class="string">&quot;-&quot;</span>
                <span class="keyword">val</span> <a title="TypeDiagnostics.this.global.Symbol" id="1109853">reqsym</a>  = <a href="#1109715" title="TypeDiagnostics.this.global.Type">req</a>.<a href="../../../reflect/internal/Types.scala.html#408407" title="=&gt; TypeDiagnostics.this.global.Symbol">typeSymbol</a>
                <span class="keyword">def</span> <a title="=&gt; Boolean" id="1109854">isJava</a>  = <a href="#1109853" title="TypeDiagnostics.this.global.Symbol">reqsym</a>.<a href="../../../reflect/internal/HasFlags.scala.html#409855" title="=&gt; Boolean">isJavaDefined</a>
                <span class="keyword">def</span> <a title="=&gt; Boolean" id="1109855">isScala</a> = <a href="#1109853" title="TypeDiagnostics.this.global.Symbol">reqsym</a> <a href="../../../reflect/internal/Symbols.scala.html#411321" title="(sym: TypeDiagnostics.this.global.Symbol)Boolean">hasTransOwner</a> <a href="../../../reflect/internal/Definitions.scala.html#408642" title="=&gt; TypeDiagnostics.this.global.ClassSymbol">ScalaPackageClass</a>

                <span class="keyword">val</span> <a title="String" id="1109856">explainFound</a> = <a href="../../../Predef.scala.html#7604" title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps" class="string">&quot;%s %s %s%s, but &quot;</a>.<a href="../../../collection/immutable/StringLike.scala.html#59882" title="(args: Any*)String">format</a><span class="delimiter">(</span>
                  <a href="#1109844" title="TypeDiagnostics.this.global.Type">arg</a>, <a href="#1109851" title="String">op</a>, <a href="#1109845" title="TypeDiagnostics.this.global.Type">reqArg</a>,
                  // If the message involves a type from the base type sequence rather than the
                  // actual found type, we need to explain why we're talking about it.  Less brute
                  // force measures than comparing normalized Strings were producing error messages
                  // like &quot;and java.util.ArrayList[String] &lt;: java.util.ArrayList[String]&quot; but there
                  // should be a cleaner way to do this.
                  <span title="Any" class="keyword">if</span> <span class="delimiter">(</span><a href="#1109714" title="TypeDiagnostics.this.global.Type">found</a>.<a href="../../../reflect/internal/Types.scala.html#408438" title="=&gt; TypeDiagnostics.this.global.Type">normalize</a>.<a href="../../../reflect/internal/Types.scala.html#408499" title="()String">toString</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="#1109738" title="TypeDiagnostics.this.global.Type">tp</a>.<a href="../../../reflect/internal/Types.scala.html#408438" title="=&gt; TypeDiagnostics.this.global.Type">normalize</a>.<a href="../../../reflect/internal/Types.scala.html#408499" title="()String">toString</a><span class="delimiter">)</span> <span title="String(&quot;&quot;)" class="string">&quot;&quot;</span>
                  <span class="keyword">else</span> <a href="../../../Predef.scala.html#7604" title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps" class="string">&quot; (and %s &lt;: %s)&quot;</a>.<a href="../../../collection/immutable/StringLike.scala.html#59882" title="(args: Any*)String">format</a><span class="delimiter">(</span><a href="#1109714" title="TypeDiagnostics.this.global.Type">found</a>, <a href="#1109738" title="TypeDiagnostics.this.global.Type">tp</a><span class="delimiter">)</span>
                <span class="delimiter">)</span>
                <span class="keyword">val</span> <a title="String" id="1109857">explainDef</a> = <span class="delimiter">{</span>
                  <span class="keyword">val</span> <a title="String" id="1109873">prepend</a> = <span title="String" class="keyword">if</span> <span class="delimiter">(</span><a href="#1109854" title="=&gt; Boolean">isJava</a><span class="delimiter">)</span> <span title="String(&quot;Java-defined &quot;)" class="string">&quot;Java-defined &quot;</span> <span class="keyword">else</span> <span title="String(&quot;&quot;)" class="string">&quot;&quot;</span>
                  <a href="../../../Predef.scala.html#7604" title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps" class="string">&quot;%s%s is %s in %s.&quot;</a>.<a href="../../../collection/immutable/StringLike.scala.html#59882" title="(args: Any*)String">format</a><span class="delimiter">(</span><a href="#1109873" title="String">prepend</a>, <a href="#1109853" title="TypeDiagnostics.this.global.Symbol">reqsym</a>, <a href="#538453" title="(sym: TypeDiagnostics.this.global.Symbol)String">varianceWord</a><span class="delimiter">(</span><a href="#1109846" title="TypeDiagnostics.this.global.Symbol">param</a><span class="delimiter">)</span>, <a href="#1109846" title="TypeDiagnostics.this.global.Symbol">param</a><span class="delimiter">)</span>
                <span class="delimiter">}</span>
                // Don't suggest they change the class declaration if it's somewhere
                // under scala.* or defined in a java class, because attempting either
                // would be fruitless.
                <span class="keyword">val</span> <a title="String" id="1109858">suggestChange</a> = <span title="String(&quot;\nYou may wish to &quot;)" class="string">&quot;\nYou may wish to &quot;</span> <span title="(x$1: Any)String">+</span> <span class="delimiter">(</span>
                  <span title="String" class="keyword">if</span> <span class="delimiter">(</span><a href="#1109855" title="=&gt; Boolean">isScala</a> <a href="../../../Boolean.scala.html#57825" title="(x: Boolean)Boolean">||</a> <a href="#1109854" title="=&gt; Boolean">isJava</a><span class="delimiter">)</span>
                    <a href="../../../Predef.scala.html#7604" title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps" class="string">&quot;investigate a wildcard type such as `_ %s %s`. (SLS 3.2.10)&quot;</a>.<a href="../../../collection/immutable/StringLike.scala.html#59882" title="(args: Any*)String">format</a><span class="delimiter">(</span><a href="#1109851" title="String">op</a>, <a href="#1109845" title="TypeDiagnostics.this.global.Type">reqArg</a><span class="delimiter">)</span>
                  <span class="keyword">else</span>
                    <a href="../../../Predef.scala.html#7604" title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps" class="string">&quot;define %s as %s%s instead. (SLS 4.5)&quot;</a>.<a href="../../../collection/immutable/StringLike.scala.html#59882" title="(args: Any*)String">format</a><span class="delimiter">(</span><a href="#1109846" title="TypeDiagnostics.this.global.Symbol">param</a>.<a href="../../../reflect/internal/Symbols.scala.html#411087" title="=&gt; param.NameType">name</a>, <a href="#1109852" title="String">suggest</a>, <a href="#1109846" title="TypeDiagnostics.this.global.Symbol">param</a>.<a href="../../../reflect/internal/Symbols.scala.html#411087" title="=&gt; param.NameType">name</a><span class="delimiter">)</span>
                <span class="delimiter">)</span>

                <a href="../../../Option.scala.html#63128" title="(x: String)Some[String]">Some</a><span class="delimiter">(</span><span title="String(&quot;Note: &quot;)" class="string">&quot;Note: &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#1109856" title="String">explainFound</a> <span title="(x$1: Any)String">+</span> <a href="#1109857" title="String">explainDef</a> <span title="(x$1: Any)String">+</span> <a href="#1109858" title="String">suggestChange</a><span class="delimiter">)</span>
              <span class="delimiter">}</span>
              // In these cases the arg is OK and needs no explanation.
              <span class="keyword">val</span> <a title="Boolean" id="1109848">conforms</a> = <span class="delimiter">(</span>
                   <span class="delimiter">(</span><a href="#1109844" title="TypeDiagnostics.this.global.Type">arg</a> <a href="../../../reflect/internal/Types.scala.html#408485" title="(that: TypeDiagnostics.this.global.Type)Boolean">=:=</a> <a href="#1109845" title="TypeDiagnostics.this.global.Type">reqArg</a><span class="delimiter">)</span>
                <a href="../../../Boolean.scala.html#57825" title="(x: Boolean)Boolean">||</a> <span class="delimiter">(</span><span class="delimiter">(</span><a href="#1109844" title="TypeDiagnostics.this.global.Type">arg</a> <a href="../../../reflect/internal/Types.scala.html#408481" title="(that: TypeDiagnostics.this.global.Type)Boolean">&lt;:&lt;</a> <a href="#1109845" title="TypeDiagnostics.this.global.Type">reqArg</a><span class="delimiter">)</span> <a href="../../../Boolean.scala.html#57826" title="(x: Boolean)Boolean">&amp;&amp;</a> <a href="#1109846" title="TypeDiagnostics.this.global.Symbol">param</a>.<a href="../../../reflect/internal/Symbols.scala.html#411187" title="=&gt; Boolean">isCovariant</a><span class="delimiter">)</span>
                <a href="../../../Boolean.scala.html#57825" title="(x: Boolean)Boolean">||</a> <span class="delimiter">(</span><span class="delimiter">(</span><a href="#1109845" title="TypeDiagnostics.this.global.Type">reqArg</a> <a href="../../../reflect/internal/Types.scala.html#408481" title="(that: TypeDiagnostics.this.global.Type)Boolean">&lt;:&lt;</a> <a href="#1109844" title="TypeDiagnostics.this.global.Type">arg</a><span class="delimiter">)</span> <a href="../../../Boolean.scala.html#57826" title="(x: Boolean)Boolean">&amp;&amp;</a> <a href="#1109846" title="TypeDiagnostics.this.global.Symbol">param</a>.<a href="../../../reflect/internal/Symbols.scala.html#411186" title="=&gt; Boolean">isContravariant</a><span class="delimiter">)</span>
              <span class="delimiter">)</span>
              <span class="keyword">val</span> <a title="Boolean" id="1109849">invariant</a> = <a href="#1109846" title="TypeDiagnostics.this.global.Symbol">param</a>.<a href="../../../reflect/internal/Symbols.scala.html#411313" title="=&gt; Int">variance</a> <a href="../../../Int.scala.html#57097" title="(x: Int)Boolean">==</a> <span title="Int(0)" class="int">0</span>

              <span title="Option[String]" class="keyword">if</span> <span class="delimiter">(</span><a href="#1109848" title="Boolean">conforms</a><span class="delimiter">)</span>                             <a href="../../../Option.scala.html#63128" title="(x: String)Some[String]">Some</a><span class="delimiter">(</span><span title="String(&quot;&quot;)" class="string">&quot;&quot;</span><span class="delimiter">)</span>
              <span class="keyword">else</span> <span title="Option[String]" class="keyword">if</span> <span class="delimiter">(</span><span class="delimiter">(</span><a href="#1109844" title="TypeDiagnostics.this.global.Type">arg</a> <a href="../../../reflect/internal/Types.scala.html#408481" title="(that: TypeDiagnostics.this.global.Type)Boolean">&lt;:&lt;</a> <a href="#1109845" title="TypeDiagnostics.this.global.Type">reqArg</a><span class="delimiter">)</span> <a href="../../../Boolean.scala.html#57826" title="(x: Boolean)Boolean">&amp;&amp;</a> <a href="#1109849" title="Boolean">invariant</a><span class="delimiter">)</span>   <a href="#1109847" title="(isSubtype: Boolean)Some[String]">mkMsg</a><span class="delimiter">(</span><span title="Boolean(true)" class="keyword">true</span><span class="delimiter">)</span>   // covariant relationship
              <span class="keyword">else</span> <span title="Option[String]" class="keyword">if</span> <span class="delimiter">(</span><span class="delimiter">(</span><a href="#1109845" title="TypeDiagnostics.this.global.Type">reqArg</a> <a href="../../../reflect/internal/Types.scala.html#408481" title="(that: TypeDiagnostics.this.global.Type)Boolean">&lt;:&lt;</a> <a href="#1109844" title="TypeDiagnostics.this.global.Type">arg</a><span class="delimiter">)</span> <a href="../../../Boolean.scala.html#57826" title="(x: Boolean)Boolean">&amp;&amp;</a> <a href="#1109849" title="Boolean">invariant</a><span class="delimiter">)</span>   <a href="#1109847" title="(isSubtype: Boolean)Some[String]">mkMsg</a><span class="delimiter">(</span><span title="Boolean(false)" class="keyword">false</span><span class="delimiter">)</span>  // contravariant relationship
              <span class="keyword">else</span> <a href="../../../Option.scala.html#1585" title="None.type">None</a> // we assume in other cases our ham-fisted advice will merely serve to confuse
          <span class="delimiter">}</span>
          <span class="keyword">val</span> <a title="List[String]" id="1109749">messages</a> = <a href="#1109748" title="List[Option[String]]">relationships</a>.<a href="../../../collection/generic/GenericTraversableTemplate.scala.html#58488" title="(implicit asTraversable: Option[String] =&gt; scala.collection.GenTraversableOnce[String])List[String]">flatten</a>
          // the condition verifies no type argument came back None
          <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#1109749" title="List[String]">messages</a>.<a href="../../../collection/SeqLike.scala.html#58788" title="=&gt; Int">size</a> <a href="../../../Int.scala.html#57097" title="(x: Int)Boolean">==</a> <a href="#1109740" title="List[TypeDiagnostics.this.global.Type]">foundArgs</a>.<a href="../../../collection/SeqLike.scala.html#58788" title="=&gt; Int">size</a><span class="delimiter">)</span>
            <span title="Nothing" class="keyword">return</span> <a href="#1109749" title="List[String]">messages</a> <a href="../../../collection/TraversableLike.scala.html#58074" title="(p: String =&gt; Boolean)List[String]">filterNot</a> <span class="delimiter">(</span><a href="#1109964" title="String">_</a> <span title="(x$1: AnyRef)Boolean">==</span> <span title="String(&quot;&quot;)" class="string">&quot;&quot;</span><span class="delimiter">)</span> <a href="../../../collection/TraversableOnce.scala.html#58282" title="(start: String, sep: String, end: String)String">mkString</a> <span class="delimiter">(</span><span title="String(&quot;\n&quot;)" class="string">&quot;\n&quot;</span>, <span title="String(&quot;\n&quot;)" class="string">&quot;\n&quot;</span>, <span title="String(&quot;&quot;)" class="string">&quot;&quot;</span><span class="delimiter">)</span>
        <span class="delimiter">}</span>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>
    <span title="String(&quot;&quot;)" class="string">&quot;&quot;</span>    // no elaborable variance situation found
  <span class="delimiter">}</span>

  // For found/required errors where AnyRef would have sufficed:
  // explain in greater detail.
  <span class="keyword">def</span> <a title="(found: TypeDiagnostics.this.global.Type, req: TypeDiagnostics.this.global.Type)String" id="538456">explainAnyVsAnyRef</a><span class="delimiter">(</span><a title="TypeDiagnostics.this.global.Type" id="1109973">found</a>: <a href="../../../reflect/internal/Types.scala.html#407270" title="TypeDiagnostics.this.global.Type">Type</a>, <a title="TypeDiagnostics.this.global.Type" id="1109974">req</a>: <a href="../../../reflect/internal/Types.scala.html#407270" title="TypeDiagnostics.this.global.Type">Type</a><span class="delimiter">)</span>: <span title="String">String</span> = <span class="delimiter">{</span>
    <span title="String" class="keyword">if</span> <span class="delimiter">(</span><a href="../../../reflect/internal/Definitions.scala.html#408669" title="=&gt; TypeDiagnostics.this.global.AliasTypeSymbol">AnyRefClass</a>.<a href="../../../reflect/internal/Symbols.scala.html#411559" title="=&gt; TypeDiagnostics.this.global.Type">tpe</a> <a href="../../../reflect/internal/Types.scala.html#408481" title="(that: TypeDiagnostics.this.global.Type)Boolean">&lt;:&lt;</a> <a href="#1109974" title="TypeDiagnostics.this.global.Type">req</a><span class="delimiter">)</span> <a href="ContextErrors.scala.html#538498" title="(found: TypeDiagnostics.this.global.Type)String">notAnyRefMessage</a><span class="delimiter">(</span><a href="#1109973" title="TypeDiagnostics.this.global.Type">found</a><span class="delimiter">)</span> <span class="keyword">else</span> <span title="String(&quot;&quot;)" class="string">&quot;&quot;</span>
  <span class="delimiter">}</span>

  // TODO - figure out how to avoid doing any work at all
  // when the message will never be seen.  I though context.reportErrors
  // being false would do that, but if I return &quot;&lt;suppressed&gt;&quot; under
  // that condition, I see it.
  <span class="keyword">def</span> <a title="(found: TypeDiagnostics.this.global.Type, req: TypeDiagnostics.this.global.Type)String" id="538457">foundReqMsg</a><span class="delimiter">(</span><a title="TypeDiagnostics.this.global.Type" id="1029322">found</a>: <a href="../../../reflect/internal/Types.scala.html#407270" title="TypeDiagnostics.this.global.Type">Type</a>, <a title="TypeDiagnostics.this.global.Type" id="1029323">req</a>: <a href="../../../reflect/internal/Types.scala.html#407270" title="TypeDiagnostics.this.global.Type">Type</a><span class="delimiter">)</span>: <span title="String">String</span> = <span class="delimiter">{</span>
    <span class="keyword">def</span> <a title="=&gt; String" id="1109980">baseMessage</a> = <span class="delimiter">(</span>
      <span title="String(&quot;;\n found   : &quot;)" class="string">&quot;;\n found   : &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#1029322" title="TypeDiagnostics.this.global.Type">found</a>.<a href="../../../reflect/internal/Types.scala.html#408501" title="=&gt; String">toLongString</a> <span title="(x$1: Any)String">+</span> <a href="#538452" title="(tp: TypeDiagnostics.this.global.Type)String">existentialContext</a><span class="delimiter">(</span><a href="#1029322" title="TypeDiagnostics.this.global.Type">found</a><span class="delimiter">)</span> <span title="(x$1: Any)String">+</span> <a href="#538454" title="(tp: TypeDiagnostics.this.global.Type)String">explainAlias</a><span class="delimiter">(</span><a href="#1029322" title="TypeDiagnostics.this.global.Type">found</a><span class="delimiter">)</span> <span title="(x$1: Any)String">+</span>
       <span title="String(&quot;\n required: &quot;)" class="string">&quot;\n required: &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#1029323" title="TypeDiagnostics.this.global.Type">req</a> <span title="(x$1: Any)String">+</span> <a href="#538452" title="(tp: TypeDiagnostics.this.global.Type)String">existentialContext</a><span class="delimiter">(</span><a href="#1029323" title="TypeDiagnostics.this.global.Type">req</a><span class="delimiter">)</span> <span title="(x$1: Any)String">+</span> <a href="#538454" title="(tp: TypeDiagnostics.this.global.Type)String">explainAlias</a><span class="delimiter">(</span><a href="#1029323" title="TypeDiagnostics.this.global.Type">req</a><span class="delimiter">)</span>
    <span class="delimiter">)</span>
    <span class="delimiter">(</span>   <a href="#538465" title="(locals: List[TypeDiagnostics.this.global.Symbol], types: TypeDiagnostics.this.global.Type*)(op: =&gt; String)String">withDisambiguation</a><span class="delimiter">(</span><a href="../../../collection/immutable/List.scala.html#11188" title="scala.collection.immutable.Nil.type">Nil</a>, <a href="#1029322" title="TypeDiagnostics.this.global.Type">found</a>, <a href="#1029323" title="TypeDiagnostics.this.global.Type">req</a><span class="delimiter">)</span><span class="delimiter">(</span><a href="#1109980" title="=&gt; String">baseMessage</a><span class="delimiter">)</span>
      <span title="(x$1: Any)String">+</span> <a href="#538455" title="(found: TypeDiagnostics.this.global.Type, req: TypeDiagnostics.this.global.Type)String">explainVariance</a><span class="delimiter">(</span><a href="#1029322" title="TypeDiagnostics.this.global.Type">found</a>, <a href="#1029323" title="TypeDiagnostics.this.global.Type">req</a><span class="delimiter">)</span>
      <span title="(x$1: Any)String">+</span> <a href="#538456" title="(found: TypeDiagnostics.this.global.Type, req: TypeDiagnostics.this.global.Type)String">explainAnyVsAnyRef</a><span class="delimiter">(</span><a href="#1029322" title="TypeDiagnostics.this.global.Type">found</a>, <a href="#1029323" title="TypeDiagnostics.this.global.Type">req</a><span class="delimiter">)</span>
    <span class="delimiter">)</span>
  <span class="delimiter">}</span>

  case <span class="keyword">class</span> <a title="class TypeDiag extends AnyRef with Ordered[TypeDiagnostics.this.TypeDiag] with Product with Serializable" id="1110807">TypeDiag</a><a href="../../../Product.scala.html#186" title="Product" class="delimiter">(</a><a title="TypeDiagnostics.this.global.Type" id="1110198">tp</a>: <a href="../../../reflect/internal/Types.scala.html#407270" title="TypeDiagnostics.this.global.Type">Type</a>, <a title="TypeDiagnostics.this.global.Symbol" id="1110199">sym</a>: <a href="../../../reflect/internal/Symbols.scala.html#407146" title="TypeDiagnostics.this.global.Symbol">Symbol</a><span class="delimiter">)</span> <span class="keyword">extends</span> <a href="../../../math/Ordered.scala.html#17410" title="Ordered[TypeDiagnostics.this.TypeDiag]">Ordered</a><span class="delimiter">[</span>TypeDiag<span class="delimiter">]</span> <span class="delimiter">{</span>
    // save the name because it will be mutated until it has been
    // distinguished from the other types in the same error message
    <span class="keyword">private</span> <span class="keyword">val</span> <a title="TypeDiag.this.sym.NameType" id="1109994">savedName</a> = <a href="#1110199" title="=&gt; TypeDiagnostics.this.global.Symbol">sym</a>.<a href="../../../reflect/internal/Symbols.scala.html#411087" title="=&gt; TypeDiag.this.sym.NameType">name</a>
    <span class="keyword">def</span> <a title="()Unit" id="1109996">restoreName</a><span class="delimiter">(</span><span class="delimiter">)</span>     = <a href="#1110199" title="=&gt; TypeDiagnostics.this.global.Symbol">sym</a>.<a href="../../../reflect/internal/Symbols.scala.html#411088" title="(n: TypeDiagnostics.this.global.Name)Unit">name</a> = <a href="#1109994" title="=&gt; TypeDiag.this.sym.NameType">savedName</a>
    <span class="keyword">def</span> <a title="=&gt; Boolean" id="1109997">isAltered</a>         = <a href="#1110199" title="=&gt; TypeDiagnostics.this.global.Symbol">sym</a>.<a href="../../../reflect/internal/Symbols.scala.html#411087" title="=&gt; TypeDiag.this.sym.NameType">name</a> <span title="(x$1: AnyRef)Boolean">!=</span> <a href="#1109994" title="=&gt; TypeDiag.this.sym.NameType">savedName</a>
    <span class="keyword">def</span> <a title="(f: String =&gt; String)TypeDiagnostics.this.global.Symbol" id="1109998">modifyName</a><span class="delimiter">(</span><a title="String =&gt; String" id="1110029">f</a>: String =&gt; String<span class="delimiter">)</span> = <a href="#1110199" title="=&gt; TypeDiagnostics.this.global.Symbol">sym</a> <a href="../../../reflect/internal/Symbols.scala.html#411099" title="(name: TypeDiagnostics.this.global.Name)TypeDiag.this.sym.type">setName</a> <a href="../../../reflect/internal/Names.scala.html#406860" title="(s: String)TypeDiagnostics.this.global.TypeName">newTypeName</a><span class="delimiter">(</span><a href="../../../Function1.scala.html#58642" title="(v1: String)String">f</a><span class="delimiter">(</span><a href="#1110199" title="=&gt; TypeDiagnostics.this.global.Symbol">sym</a>.<a href="../../../reflect/internal/Symbols.scala.html#411087" title="=&gt; TypeDiag.this.sym.NameType">name</a>.<span title="()String">toString</span><span class="delimiter">)</span><span class="delimiter">)</span>

    /** Prepend java.lang, scala., or Predef. if this type originated
     *  in one of those.
     */
    <span class="keyword">def</span> <a title="()Any" id="1109999">qualifyDefaultNamespaces</a><span class="delimiter">(</span><span class="delimiter">)</span> = <span class="delimiter">{</span>
      <span class="keyword">val</span> <a title="scala.collection.immutable.Set[TypeDiagnostics.this.global.Symbol]" id="1110042">intersect</a> = <a href="../../../collection/generic/GenericCompanion.scala.html#59933" title="(elems: TypeDiagnostics.this.global.Symbol*)scala.collection.immutable.Set[TypeDiagnostics.this.global.Symbol]">Set</a><span class="delimiter">(</span><a href="#1110004" title="=&gt; TypeDiagnostics.this.global.Symbol">trueOwner</a>, <a href="#1110005" title="=&gt; TypeDiagnostics.this.global.Symbol">aliasOwner</a><span class="delimiter">)</span> <a href="../../../collection/GenSetLike.scala.html#66404" title="(that: scala.collection.GenSet[TypeDiagnostics.this.global.Symbol])scala.collection.immutable.Set[TypeDiagnostics.this.global.Symbol]">intersect</a> <a href="../../../reflect/internal/Definitions.scala.html#408736" title="=&gt; scala.collection.immutable.Set[TypeDiagnostics.this.global.Symbol]">UnqualifiedOwners</a>
      <span title="Any" class="keyword">if</span> <span class="delimiter">(</span><a href="#1110042" title="scala.collection.immutable.Set[TypeDiagnostics.this.global.Symbol]">intersect</a>.<a href="../../../collection/TraversableOnce.scala.html#58191" title="=&gt; Boolean">nonEmpty</a><span class="delimiter">)</span> <a href="#1110000" title="()TypeDiagnostics.this.global.Symbol">preQualify</a><span class="delimiter">(</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>

    // functions to manipulate the name
    <span class="keyword">def</span> <a title="()TypeDiagnostics.this.global.Symbol" id="1110000">preQualify</a><span class="delimiter">(</span><span class="delimiter">)</span>   = <a href="#1109998" title="(f: String =&gt; String)TypeDiagnostics.this.global.Symbol">modifyName</a><span class="delimiter">(</span><a href="#1110004" title="=&gt; TypeDiagnostics.this.global.Symbol">trueOwner</a>.<a href="../../../reflect/internal/Symbols.scala.html#411334" title="=&gt; String">fullName</a> <span title="(x$1: Any)String">+</span> <span title="String(&quot;.&quot;)" class="string">&quot;.&quot;</span> <span title="(x$1: Any)String">+</span> <a href="#1110056" title="String">_</a><span class="delimiter">)</span>
    <span class="keyword">def</span> <a title="()TypeDiagnostics.this.global.Symbol" id="1110001">postQualify</a><span class="delimiter">(</span><span class="delimiter">)</span>  = <a href="#1109998" title="(f: String =&gt; String)TypeDiagnostics.this.global.Symbol">modifyName</a><span class="delimiter">(</span><a href="#1110068" title="String">_</a> <span title="(x$1: Any)String">+</span> <span title="String(&quot;(in &quot;)" class="string">&quot;(in &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#1110004" title="=&gt; TypeDiagnostics.this.global.Symbol">trueOwner</a> <span title="(x$1: Any)String">+</span> <span title="String(&quot;)&quot;)" class="string">&quot;)&quot;</span><span class="delimiter">)</span>
    <span class="keyword">def</span> <a title="()Any" id="1110002">typeQualify</a><span class="delimiter">(</span><span class="delimiter">)</span>  = <span title="Any" class="keyword">if</span> <span class="delimiter">(</span><a href="#1110199" title="=&gt; TypeDiagnostics.this.global.Symbol">sym</a>.<a href="../../../reflect/internal/Symbols.scala.html#411193" title="=&gt; Boolean">isTypeParameterOrSkolem</a><span class="delimiter">)</span> <a href="#1110001" title="()TypeDiagnostics.this.global.Symbol">postQualify</a><span class="delimiter">(</span><span class="delimiter">)</span>
    <span class="keyword">def</span> <a title="()TypeDiagnostics.this.global.Symbol" id="1110003">nameQualify</a><span class="delimiter">(</span><span class="delimiter">)</span>  = <span title="TypeDiagnostics.this.global.Symbol" class="keyword">if</span> <span class="delimiter">(</span><a href="#1110004" title="=&gt; TypeDiagnostics.this.global.Symbol">trueOwner</a>.<a href="../../../reflect/internal/Symbols.scala.html#411219" title="=&gt; Boolean">isPackageClass</a><span class="delimiter">)</span> <a href="#1110000" title="()TypeDiagnostics.this.global.Symbol">preQualify</a><span class="delimiter">(</span><span class="delimiter">)</span> <span class="keyword">else</span> <a href="#1110001" title="()TypeDiagnostics.this.global.Symbol">postQualify</a><span class="delimiter">(</span><span class="delimiter">)</span>

    <span class="keyword">def</span> <a title="=&gt; TypeDiagnostics.this.global.Symbol" id="1110004">trueOwner</a>  = <a href="#1110198" title="=&gt; TypeDiagnostics.this.global.Type">tp</a>.<a href="../../../reflect/internal/Types.scala.html#408407" title="=&gt; TypeDiagnostics.this.global.Symbol">typeSymbol</a>.<a href="../../../reflect/internal/Symbols.scala.html#411259" title="=&gt; TypeDiagnostics.this.global.Symbol">effectiveOwner</a>
    <span class="keyword">def</span> <a title="=&gt; TypeDiagnostics.this.global.Symbol" id="1110005">aliasOwner</a> = <a href="#1110198" title="=&gt; TypeDiagnostics.this.global.Type">tp</a>.<a href="../../../reflect/internal/Types.scala.html#408409" title="=&gt; TypeDiagnostics.this.global.Symbol">typeSymbolDirect</a>.<a href="../../../reflect/internal/Symbols.scala.html#411259" title="=&gt; TypeDiagnostics.this.global.Symbol">effectiveOwner</a>

    <span class="keyword">def</span> <a title="(other: TypeDiagnostics.this.TypeDiag)Boolean" id="1110006">sym_==</a><span class="delimiter">(</span><a title="TypeDiagnostics.this.TypeDiag" id="1110079">other</a>: <a href="#1110807" title="TypeDiagnostics.this.TypeDiag">TypeDiag</a><span class="delimiter">)</span>     = <a href="#1110198" title="=&gt; TypeDiagnostics.this.global.Type">tp</a>.<a href="../../../reflect/internal/Types.scala.html#408407" title="=&gt; TypeDiagnostics.this.global.Symbol">typeSymbol</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="#1110079" title="TypeDiagnostics.this.TypeDiag">other</a>.<a href="#1110198" title="=&gt; TypeDiagnostics.this.global.Type">tp</a>.<a href="../../../reflect/internal/Types.scala.html#408407" title="=&gt; TypeDiagnostics.this.global.Symbol">typeSymbol</a>
    <span class="keyword">def</span> <a title="(other: TypeDiagnostics.this.TypeDiag)Boolean" id="1110007">owner_==</a><span class="delimiter">(</span><a title="TypeDiagnostics.this.TypeDiag" id="1110087">other</a>: <a href="#1110807" title="TypeDiagnostics.this.TypeDiag">TypeDiag</a><span class="delimiter">)</span>   = <a href="#1110004" title="=&gt; TypeDiagnostics.this.global.Symbol">trueOwner</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="#1110087" title="TypeDiagnostics.this.TypeDiag">other</a>.<a href="#1110004" title="=&gt; TypeDiagnostics.this.global.Symbol">trueOwner</a>
    <span class="keyword">def</span> <a title="(other: TypeDiagnostics.this.TypeDiag)Boolean" id="1110008">string_==</a><span class="delimiter">(</span><a title="TypeDiagnostics.this.TypeDiag" id="1110095">other</a>: <a href="#1110807" title="TypeDiagnostics.this.TypeDiag">TypeDiag</a><span class="delimiter">)</span>  = <a href="#1110198" title="=&gt; TypeDiagnostics.this.global.Type">tp</a>.<a href="../../../reflect/internal/Types.scala.html#408499" title="()String">toString</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="#1110095" title="TypeDiagnostics.this.TypeDiag">other</a>.<a href="#1110198" title="=&gt; TypeDiagnostics.this.global.Type">tp</a>.<a href="../../../reflect/internal/Types.scala.html#408499" title="()String">toString</a>
    <span class="keyword">def</span> <a title="(other: TypeDiagnostics.this.TypeDiag)Boolean" id="1110009">name_==</a><span class="delimiter">(</span><a title="TypeDiagnostics.this.TypeDiag" id="1110103">other</a>: <a href="#1110807" title="TypeDiagnostics.this.TypeDiag">TypeDiag</a><span class="delimiter">)</span>    = <a href="#1110199" title="=&gt; TypeDiagnostics.this.global.Symbol">sym</a>.<a href="../../../reflect/internal/Symbols.scala.html#411087" title="=&gt; TypeDiag.this.sym.NameType">name</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="#1110103" title="TypeDiagnostics.this.TypeDiag">other</a>.<a href="#1110199" title="=&gt; TypeDiagnostics.this.global.Symbol">sym</a>.<a href="../../../reflect/internal/Symbols.scala.html#411087" title="=&gt; other.sym.NameType">name</a>

    <span class="keyword">def</span> <a title="(other: TypeDiagnostics.this.TypeDiag)Int" id="1110010">compare</a><span class="delimiter">(</span><a title="TypeDiagnostics.this.TypeDiag" id="1110111">other</a>: <a href="#1110807" title="TypeDiagnostics.this.TypeDiag">TypeDiag</a><span class="delimiter">)</span> =
      <span title="Int" class="keyword">if</span> <span class="delimiter">(</span><a href="#1110807" title="TypeDiag.this.type" class="keyword">this</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="#1110111" title="TypeDiagnostics.this.TypeDiag">other</a><span class="delimiter">)</span> <span title="Int(0)" class="int">0</span>
      <span class="keyword">else</span> <span title="Int" class="keyword">if</span> <span class="delimiter">(</span><a href="#1110199" title="=&gt; TypeDiagnostics.this.global.Symbol">sym</a> <a href="../../../reflect/internal/Symbols.scala.html#411407" title="(that: TypeDiagnostics.this.global.Symbol)Boolean">isLess</a> <a href="#1110111" title="TypeDiagnostics.this.TypeDiag">other</a>.<a href="#1110199" title="=&gt; TypeDiagnostics.this.global.Symbol">sym</a><span class="delimiter">)</span> -<span title="Int(-1)" class="int">1</span>
      <span class="keyword">else</span> <span title="Int(1)" class="int">1</span>

    <span class="keyword">override</span> <span class="keyword">def</span> <a title="()String" id="1110011">toString</a> = <span class="delimiter">{</span>
      <a href="../../../Predef.scala.html#7604" title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps" class="string">&quot;&quot;&quot;
      |tp = %s
      |tp.typeSymbol = %s
      |tp.typeSymbol.owner = %s
      |tp.typeSymbolDirect = %s
      |tp.typeSymbolDirect.owner = %s
      &quot;&quot;&quot;</a>.<a href="../../../Predef.scala.html#7604" title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps">stripMargin</a>.<a href="../../../collection/immutable/StringLike.scala.html#59882" title="(args: Any*)String">format</a><span class="delimiter">(</span>
        <a href="#1110198" title="=&gt; TypeDiagnostics.this.global.Type">tp</a>, <a href="#1110198" title="=&gt; TypeDiagnostics.this.global.Type">tp</a>.<a href="../../../reflect/internal/Types.scala.html#408407" title="=&gt; TypeDiagnostics.this.global.Symbol">typeSymbol</a>, <a href="#1110198" title="=&gt; TypeDiagnostics.this.global.Type">tp</a>.<a href="../../../reflect/internal/Types.scala.html#408407" title="=&gt; TypeDiagnostics.this.global.Symbol">typeSymbol</a>.<a href="../../../reflect/internal/Symbols.scala.html#411315" title="=&gt; TypeDiagnostics.this.global.Symbol">owner</a>, <a href="#1110198" title="=&gt; TypeDiagnostics.this.global.Type">tp</a>.<a href="../../../reflect/internal/Types.scala.html#408409" title="=&gt; TypeDiagnostics.this.global.Symbol">typeSymbolDirect</a>, <a href="#1110198" title="=&gt; TypeDiagnostics.this.global.Type">tp</a>.<a href="../../../reflect/internal/Types.scala.html#408409" title="=&gt; TypeDiagnostics.this.global.Symbol">typeSymbolDirect</a>.<a href="../../../reflect/internal/Symbols.scala.html#411315" title="=&gt; TypeDiagnostics.this.global.Symbol">owner</a>
      <span class="delimiter">)</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>
  /** This is tricky stuff - we need to traverse types deeply to
   *  explain name ambiguities, which may occur anywhere.  However
   *  when lub explosions come through it knocks us into an n^2
   *  disaster, see SI-5580.  This is trying to perform the initial
   *  filtering of possibly ambiguous types in a sufficiently
   *  aggressive way that the state space won't explode.
   */
  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(locals: List[TypeDiagnostics.this.global.Symbol], types0: TypeDiagnostics.this.global.Type*)List[TypeDiagnostics.this.TypeDiag]" id="538461">typeDiags</a><span class="delimiter">(</span><a title="List[TypeDiagnostics.this.global.Symbol]" id="1110174">locals</a>: <a href="../../../collection/immutable/List.scala.html#11952" title="List[TypeDiagnostics.this.global.Symbol]">List</a><span class="delimiter">[</span>Symbol<span class="delimiter">]</span>, <a title="TypeDiagnostics.this.global.Type*" id="1110175">types0</a>: <span title="TypeDiagnostics.this.global.Type*">Type</span>*<span class="delimiter">)</span>: <a href="../../../collection/immutable/List.scala.html#11952" title="List[TypeDiagnostics.this.TypeDiag]">List</a><span class="delimiter">[</span>TypeDiag<span class="delimiter">]</span> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="List[TypeDiagnostics.this.global.Type]" id="1110176">types</a>   = <a href="#1110175" title="TypeDiagnostics.this.global.Type*">types0</a>.<a href="../../../collection/TraversableOnce.scala.html#58263" title="=&gt; List[TypeDiagnostics.this.global.Type]">toList</a>
    // If two different type diag instances are seen for a given
    // key (either the string representation of a type, or the simple
    // name of a symbol) then keep them for disambiguation.
    <span class="keyword">val</span> <a title="scala.collection.mutable.Map[String,scala.collection.immutable.Set[TypeDiagnostics.this.TypeDiag]]" id="1110177">strings</a> = mutable.<a href="../../../collection/generic/GenMapFactory.scala.html#60744" title="[A, B](elems: (A, B)*)scala.collection.mutable.Map[A,B]">Map</a><span title="(elems: (String, Set[TypeDiagnostics.this.TypeDiag])*)scala.collection.mutable.Map[String,Set[TypeDiagnostics.this.TypeDiag]]" class="delimiter">[</span><span title="String">String</span>, <a href="../../../collection/immutable/Set.scala.html#11919" title="Set[TypeDiagnostics.this.TypeDiag]">Set</a><span class="delimiter">[</span>TypeDiag<span class="delimiter">]</span><span class="delimiter">]</span><span class="delimiter">(</span><span class="delimiter">)</span> <a href="../../../collection/mutable/Map.scala.html#87604" title="(d: scala.collection.immutable.Set[TypeDiagnostics.this.TypeDiag])scala.collection.mutable.Map[String,scala.collection.immutable.Set[TypeDiagnostics.this.TypeDiag]]">withDefaultValue</a> <a href="../../../collection/generic/GenericCompanion.scala.html#59933" title="(elems: TypeDiagnostics.this.TypeDiag*)scala.collection.immutable.Set[TypeDiagnostics.this.TypeDiag]">Set</a><span class="delimiter">(</span><span class="delimiter">)</span>
    <span class="keyword">val</span> <a title="scala.collection.mutable.Map[TypeDiagnostics.this.global.Name,scala.collection.immutable.Set[TypeDiagnostics.this.TypeDiag]]" id="1110178">names</a>   = mutable.<a href="../../../collection/generic/GenMapFactory.scala.html#60744" title="[A, B](elems: (A, B)*)scala.collection.mutable.Map[A,B]">Map</a><span title="(elems: (TypeDiagnostics.this.global.Name, Set[TypeDiagnostics.this.TypeDiag])*)scala.collection.mutable.Map[TypeDiagnostics.this.global.Name,Set[TypeDiagnostics.this.TypeDiag]]" class="delimiter">[</span><a href="../../../reflect/internal/Names.scala.html#406868" title="TypeDiagnostics.this.global.Name">Name</a>, <a href="../../../collection/immutable/Set.scala.html#11919" title="Set[TypeDiagnostics.this.TypeDiag]">Set</a><span class="delimiter">[</span>TypeDiag<span class="delimiter">]</span><span class="delimiter">]</span><span class="delimiter">(</span><span class="delimiter">)</span> <a href="../../../collection/mutable/Map.scala.html#87604" title="(d: scala.collection.immutable.Set[TypeDiagnostics.this.TypeDiag])scala.collection.mutable.Map[TypeDiagnostics.this.global.Name,scala.collection.immutable.Set[TypeDiagnostics.this.TypeDiag]]">withDefaultValue</a> <a href="../../../collection/generic/GenericCompanion.scala.html#59933" title="(elems: TypeDiagnostics.this.TypeDiag*)scala.collection.immutable.Set[TypeDiagnostics.this.TypeDiag]">Set</a><span class="delimiter">(</span><span class="delimiter">)</span>

    <span class="keyword">def</span> <a title="(t: TypeDiagnostics.this.global.Type, sym: TypeDiagnostics.this.global.Symbol)Unit" id="1110179">record</a><span class="delimiter">(</span><a title="TypeDiagnostics.this.global.Type" id="1110191">t</a>: <a href="../../../reflect/internal/Types.scala.html#407270" title="TypeDiagnostics.this.global.Type">Type</a>, <a title="TypeDiagnostics.this.global.Symbol" id="1110192">sym</a>: <a href="../../../reflect/internal/Symbols.scala.html#407146" title="TypeDiagnostics.this.global.Symbol">Symbol</a><span class="delimiter">)</span> = <span class="delimiter">{</span>
      <span class="keyword">val</span> <a title="TypeDiagnostics.this.TypeDiag" id="1110193">diag</a> = <a href="#1110807" title="(tp: TypeDiagnostics.this.global.Type, sym: TypeDiagnostics.this.global.Symbol)TypeDiagnostics.this.TypeDiag">TypeDiag</a><span class="delimiter">(</span><a href="#1110191" title="TypeDiagnostics.this.global.Type">t</a>, <a href="#1110192" title="TypeDiagnostics.this.global.Symbol">sym</a><span class="delimiter">)</span>

      <a href="../../../collection/mutable/MapLike.scala.html#87611" title="(key: String, value: scala.collection.immutable.Set[TypeDiagnostics.this.TypeDiag])Unit">strings</a><span class="delimiter">(</span><span title="String(&quot;&quot;)" class="string">&quot;&quot;</span> <a href="#1110223" title="(x$1: Any)String">+</a> <a href="#1110191" title="TypeDiagnostics.this.global.Type">t</a><span class="delimiter">)</span> <a href="../../../collection/SetLike.scala.html#66443" title="(elem: TypeDiagnostics.this.TypeDiag)scala.collection.immutable.Set[TypeDiagnostics.this.TypeDiag]">+=</a> <a href="#1110193" title="TypeDiagnostics.this.TypeDiag">diag</a>
      <a href="../../../collection/mutable/MapLike.scala.html#87611" title="(key: TypeDiagnostics.this.global.Name, value: scala.collection.immutable.Set[TypeDiagnostics.this.TypeDiag])Unit">names</a><span class="delimiter">(</span><a href="#1110192" title="TypeDiagnostics.this.global.Symbol">sym</a>.<a href="../../../reflect/internal/Symbols.scala.html#411087" title="=&gt; sym.NameType">name</a><span class="delimiter">)</span> <a href="../../../collection/SetLike.scala.html#66443" title="(elem: TypeDiagnostics.this.TypeDiag)scala.collection.immutable.Set[TypeDiagnostics.this.TypeDiag]">+=</a> <a href="#1110193" title="TypeDiagnostics.this.TypeDiag">diag</a>
    <span class="delimiter">}</span>
    <span class="keyword">for</span> <span class="delimiter">(</span><a title="TypeDiagnostics.this.global.Type" id="1110296">tpe</a> &lt;- <a href="../../../collection/immutable/List.scala.html#62719" title="(f: TypeDiagnostics.this.global.Type =&gt; Unit)Unit">types</a> ; <a title="TypeDiagnostics.this.global.Type" id="1110300">t</a> &lt;- <a href="../../../reflect/internal/Types.scala.html#408473" title="(f: TypeDiagnostics.this.global.Type =&gt; Unit)Unit">tpe</a><span class="delimiter">)</span> <span class="delimiter">{</span>
      <a href="#1110300" title="TypeDiagnostics.this.global.Type">t</a> <span class="keyword">match</span> <span class="delimiter">{</span>
        <span class="keyword">case</span> ConstantType<a href="#3372612" title="Unit" id="3372615" class="delimiter">(</a><a href="../../../reflect/internal/Types.scala.html#410960" title="TypeDiagnostics.this.global.Constant" id="3372613">_</a><span class="delimiter">)</span>    =&gt; <a href="#1110179" title="(t: TypeDiagnostics.this.global.Type, sym: TypeDiagnostics.this.global.Symbol)Unit">record</a><a href="#3372621" title="(x: Unit)Unit" class="delimiter">(</a><a href="#1110300" title="TypeDiagnostics.this.global.Type">t</a>, <a href="#1110300" title="TypeDiagnostics.this.global.Type">t</a>.<a href="../../../reflect/internal/Types.scala.html#408410" title="=&gt; TypeDiagnostics.this.global.Type">underlying</a>.<a href="../../../reflect/internal/Types.scala.html#408407" title="=&gt; TypeDiagnostics.this.global.Symbol">typeSymbol</a><span class="delimiter">)</span>
        <span class="keyword">case</span> TypeRef<a href="#3372612" title="Unit" id="3372619" class="delimiter">(</a><a href="../../../reflect/internal/Types.scala.html#410887" title="TypeDiagnostics.this.global.Type" id="3372616">_</a>, <a href="../../../reflect/internal/Types.scala.html#410889" title="TypeDiagnostics.this.global.Symbol" id="1110306">sym</a>, <a href="../../../reflect/internal/Types.scala.html#410891" title="List[TypeDiagnostics.this.global.Type]" id="3372617">_</a><span class="delimiter">)</span> =&gt; <a href="#1110179" title="(t: TypeDiagnostics.this.global.Type, sym: TypeDiagnostics.this.global.Symbol)Unit">record</a><a href="#3372621" title="(x: Unit)Unit" class="delimiter">(</a><a href="#1110300" title="TypeDiagnostics.this.global.Type">t</a>, <a href="#1110306" title="TypeDiagnostics.this.global.Symbol">sym</a><span class="delimiter">)</span>
        <span class="keyword">case</span> _                  =&gt; <a href="#3372621" title="(x: Unit)Unit" class="delimiter">(</a><span class="delimiter">)</span>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>

    <span class="keyword">val</span> <a title="Iterable[scala.collection.immutable.Set[TypeDiagnostics.this.TypeDiag]]" id="1110180">collisions</a> = <a href="#1110177" title="scala.collection.mutable.Map[String,scala.collection.immutable.Set[TypeDiagnostics.this.TypeDiag]]">strings</a>.<a href="../../../collection/MapLike.scala.html#87542" title="=&gt; Iterable[scala.collection.immutable.Set[TypeDiagnostics.this.TypeDiag]]">values</a> <a href="../../../collection/TraversableLike.scala.html#58048" title="(that: scala.collection.GenTraversableOnce[scala.collection.immutable.Set[TypeDiagnostics.this.TypeDiag]])(implicit bf: scala.collection.generic.CanBuildFrom[Iterable[scala.collection.immutable.Set[TypeDiagnostics.this.TypeDiag]],scala.collection.immutable.Set[TypeDiagnostics.this.TypeDiag],Iterable[scala.collection.immutable.Set[TypeDiagnostics.this.TypeDiag]]])Iterable[scala.collection.immutable.Set[TypeDiagnostics.this.TypeDiag]]">++</a> <a href="#1110178" title="scala.collection.mutable.Map[TypeDiagnostics.this.global.Name,scala.collection.immutable.Set[TypeDiagnostics.this.TypeDiag]]">names</a>.<a href="../../../collection/MapLike.scala.html#87542" title="=&gt; Iterable[scala.collection.immutable.Set[TypeDiagnostics.this.TypeDiag]]">values</a> <a href="../../../collection/TraversableLike.scala.html#58073" title="(p: scala.collection.immutable.Set[TypeDiagnostics.this.TypeDiag] =&gt; Boolean)Iterable[scala.collection.immutable.Set[TypeDiagnostics.this.TypeDiag]]">filter</a> <span class="delimiter">(</span><a href="#1110363" title="scala.collection.immutable.Set[TypeDiagnostics.this.TypeDiag]">_</a>.<a href="../../../collection/TraversableOnce.scala.html#58190" title="=&gt; Int">size</a> <a href="../../../Int.scala.html#57125" title="(x: Int)Boolean">&gt;</a> <span title="Int(1)" class="int">1</span><span class="delimiter">)</span>
    <a href="#1110180" title="Iterable[scala.collection.immutable.Set[TypeDiagnostics.this.TypeDiag]]">collisions</a>.<a href="../../../collection/generic/GenericTraversableTemplate.scala.html#58488" title="(implicit asTraversable: scala.collection.immutable.Set[TypeDiagnostics.this.TypeDiag] =&gt; scala.collection.GenTraversableOnce[TypeDiagnostics.this.TypeDiag])Iterable[TypeDiagnostics.this.TypeDiag]">flatten</a>.<a href="../../../collection/TraversableOnce.scala.html#58263" title="=&gt; List[TypeDiagnostics.this.TypeDiag]">toList</a>
  <span class="delimiter">}</span>

  /** The distinct pairs from an ordered list. */
  <span class="keyword">private</span> <span class="keyword">def</span> <a title="[T &lt;: Ordered[T]](xs: Seq[T])Seq[(T, T)]" id="538462">pairs</a><span class="delimiter">[</span><a title=" &lt;: Ordered[T]" id="538464">T</a> &lt;: Ordered<span class="delimiter">[</span>T<span class="delimiter">]</span><span class="delimiter">]</span><span class="delimiter">(</span><a title="Seq[T]" id="1110377">xs</a>: <a href="../../../collection/Seq.scala.html#4340" title="Seq[T]">Seq</a><span class="delimiter">[</span>T<span class="delimiter">]</span><span class="delimiter">)</span>: <a href="../../../collection/Seq.scala.html#4340" title="Seq[(T, T)]">Seq</a><span class="delimiter">[</span><span class="delimiter">(</span>T, T<span class="delimiter">)</span><span class="delimiter">]</span> = <span class="delimiter">{</span>
    <span class="keyword">for</span> <span class="delimiter">(</span><a title="T" id="1110395">el1</a> &lt;- <a href="../../../collection/TraversableLike.scala.html#58068" title="(f: T =&gt; scala.collection.GenTraversableOnce[(T, T)])(implicit bf: scala.collection.generic.CanBuildFrom[Seq[T],(T, T),Seq[(T, T)]])Seq[(T, T)]">xs</a> ; <a title="T" id="1110409">el2</a> &lt;- <a href="../../../collection/generic/FilterMonadic.scala.html#58161" title="(f: T =&gt; (T, T))(implicit bf: scala.collection.generic.CanBuildFrom[Seq[T],(T, T),Seq[(T, T)]])Seq[(T, T)]">xs</a> ; <span class="keyword">if</span> <a href="#1110395" title="T">el1</a> <a href="../../../math/Ordered.scala.html#56747" title="(that: T)Boolean">&lt;</a> <a href="#1110409" title="T">el2</a><span class="delimiter">)</span> <span class="keyword">yield</span>
      <span class="delimiter">(</span><a href="../../../Tuple2.scala.html#62849" title="(_1: T, _2: T)(T, T)" class="delimiter">(</a><a href="#1110395" title="T">el1</a>, <a href="#1110409" title="T">el2</a><span class="delimiter">)</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  /** Given any number of types, alters the name information in the symbols
   *  until they can be distinguished from one another: then executes the given
   *  code.  The names are restored and the result is returned.
   */
  <span class="keyword">def</span> <a title="[T](locals: List[TypeDiagnostics.this.global.Symbol], types: TypeDiagnostics.this.global.Type*)(op: =&gt; T)T" id="538465">withDisambiguation</a><span class="delimiter">[</span><a title="" id="538467">T</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="List[TypeDiagnostics.this.global.Symbol]" id="1031483">locals</a>: <a href="../../../collection/immutable/List.scala.html#11952" title="List[TypeDiagnostics.this.global.Symbol]">List</a><span class="delimiter">[</span>Symbol<span class="delimiter">]</span>, <a title="TypeDiagnostics.this.global.Type*" id="1031484">types</a>: <span title="TypeDiagnostics.this.global.Type*">Type</span>*<span class="delimiter">)</span><span class="delimiter">(</span><a title="=&gt; T" id="1031485">op</a>: =&gt; T<span class="delimiter">)</span>: <a href="#538467" title="T">T</a> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="List[TypeDiagnostics.this.TypeDiag]" id="1110466">typeRefs</a> = <a href="#538461" title="(locals: List[TypeDiagnostics.this.global.Symbol], types0: TypeDiagnostics.this.global.Type*)List[TypeDiagnostics.this.TypeDiag]">typeDiags</a><span class="delimiter">(</span><a href="#1031483" title="List[TypeDiagnostics.this.global.Symbol]">locals</a>, <a href="#1031484" title="TypeDiagnostics.this.global.Type*">types</a>: _*<span class="delimiter">)</span>
    <span class="keyword">val</span> <a title="Seq[(TypeDiagnostics.this.TypeDiag, TypeDiagnostics.this.TypeDiag)]" id="1110467">toCheck</a>  = <a href="#538462" title="(xs: Seq[TypeDiagnostics.this.TypeDiag])Seq[(TypeDiagnostics.this.TypeDiag, TypeDiagnostics.this.TypeDiag)]">pairs</a><span class="delimiter">(</span><a href="#1110466" title="List[TypeDiagnostics.this.TypeDiag]">typeRefs</a><span class="delimiter">)</span> <a href="../../../collection/TraversableLike.scala.html#58074" title="(p: ((TypeDiagnostics.this.TypeDiag, TypeDiagnostics.this.TypeDiag)) =&gt; Boolean)Seq[(TypeDiagnostics.this.TypeDiag, TypeDiagnostics.this.TypeDiag)]">filterNot</a> <a href="#1110490" title="(TypeDiagnostics.this.TypeDiag, TypeDiagnostics.this.TypeDiag)" class="delimiter">{</a> <span class="keyword">case</span> <span class="delimiter">(</span><a href="../../../Tuple2.scala.html#60635" title="TypeDiagnostics.this.TypeDiag" id="1110493">td1</a>, <a href="../../../Tuple2.scala.html#60637" title="TypeDiagnostics.this.TypeDiag" id="1110494">td2</a><span class="delimiter">)</span> =&gt; <a href="#1110493" title="TypeDiagnostics.this.TypeDiag">td1</a> <a href="#3372629" title="(x: Boolean)Boolean">sym_==</a> <a href="#1110494" title="TypeDiagnostics.this.TypeDiag">td2</a> <span class="delimiter">}</span>

    <a href="../../../util/control/Exception.scala.html#391594" title="(body: =&gt; Unit)util.control.Exception.Catch[Nothing]">ultimately</a><a href="../../../util/control/Exception.scala.html#391651" title="(body: =&gt; T)T" class="delimiter">(</a><a href="#1110466" title="List[TypeDiagnostics.this.TypeDiag]">typeRefs</a> <a href="../../../collection/immutable/List.scala.html#62719" title="(f: TypeDiagnostics.this.TypeDiag =&gt; Unit)Unit">foreach</a> <span class="delimiter">(</span><a href="#1110517" title="TypeDiagnostics.this.TypeDiag">_</a>.<a href="#1109996" title="()Unit">restoreName</a><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">{</span>
      <span class="keyword">for</span> <span class="delimiter">(</span><span class="delimiter">(</span><a href="../../../Tuple2.scala.html#60635" title="TypeDiagnostics.this.TypeDiag" id="1110546">td1</a>, <a href="../../../Tuple2.scala.html#60637" title="TypeDiagnostics.this.TypeDiag" id="1110547">td2</a><span class="delimiter">)</span> &lt;- <a href="../../../collection/IterableLike.scala.html#58562" title="(f: ((TypeDiagnostics.this.TypeDiag, TypeDiagnostics.this.TypeDiag)) =&gt; Any)Unit">toCheck</a><span class="delimiter">)</span> <a href="#3372635" title="(x: Any)Any" class="delimiter">{</a>
        <span class="keyword">val</span> <a title="List[TypeDiagnostics.this.TypeDiag]" id="1110548">tds</a> = <a href="../../../collection/immutable/List.scala.html#62451" title="(xs: TypeDiagnostics.this.TypeDiag*)List[TypeDiagnostics.this.TypeDiag]">List</a><span class="delimiter">(</span><a href="#1110546" title="TypeDiagnostics.this.TypeDiag">td1</a>, <a href="#1110547" title="TypeDiagnostics.this.TypeDiag">td2</a><span class="delimiter">)</span>

        // If the types print identically, qualify them:
        //   a) If the dealiased owner is a package, the full path
        //   b) Otherwise, append (in &lt;owner&gt;)
        <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#1110546" title="TypeDiagnostics.this.TypeDiag">td1</a> <a href="#1110008" title="(other: TypeDiagnostics.this.TypeDiag)Boolean">string_==</a> <a href="#1110547" title="TypeDiagnostics.this.TypeDiag">td2</a><span class="delimiter">)</span>
          <a href="#1110548" title="List[TypeDiagnostics.this.TypeDiag]">tds</a> <a href="../../../collection/immutable/List.scala.html#62719" title="(f: TypeDiagnostics.this.TypeDiag =&gt; TypeDiagnostics.this.global.Symbol)Unit">foreach</a> <span class="delimiter">(</span><a href="#1110576" title="TypeDiagnostics.this.TypeDiag">_</a>.<a href="#1110003" title="()TypeDiagnostics.this.global.Symbol">nameQualify</a><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span>

        // If they have the same simple name, and either of them is in the
        // scala package or predef, qualify with scala so it is not confusing why
        // e.g. java.util.Iterator and Iterator are different types.
        <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#1110546" title="TypeDiagnostics.this.TypeDiag">td1</a> <a href="#1110009" title="(other: TypeDiagnostics.this.TypeDiag)Boolean">name_==</a> <a href="#1110547" title="TypeDiagnostics.this.TypeDiag">td2</a><span class="delimiter">)</span>
          <a href="#1110548" title="List[TypeDiagnostics.this.TypeDiag]">tds</a> <a href="../../../collection/immutable/List.scala.html#62719" title="(f: TypeDiagnostics.this.TypeDiag =&gt; Any)Unit">foreach</a> <span class="delimiter">(</span><a href="#1110589" title="TypeDiagnostics.this.TypeDiag">_</a>.<a href="#1109999" title="()Any">qualifyDefaultNamespaces</a><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span>

        // If they still print identically:
        //   a) If they are type parameters with different owners, append (in &lt;owner&gt;)
        //   b) Failing that, the best we can do is append &quot;(some other)&quot; to the latter.
        <span title="Any" class="keyword">if</span> <span class="delimiter">(</span><a href="#1110546" title="TypeDiagnostics.this.TypeDiag">td1</a> <a href="#1110008" title="(other: TypeDiagnostics.this.TypeDiag)Boolean">string_==</a> <a href="#1110547" title="TypeDiagnostics.this.TypeDiag">td2</a><span class="delimiter">)</span> <span class="delimiter">{</span>
          <span title="Any" class="keyword">if</span> <span class="delimiter">(</span><a href="#1110546" title="TypeDiagnostics.this.TypeDiag">td1</a> <a href="#1110007" title="(other: TypeDiagnostics.this.TypeDiag)Boolean">owner_==</a> <a href="#1110547" title="TypeDiagnostics.this.TypeDiag">td2</a><span class="delimiter">)</span>
            <a href="#1110547" title="TypeDiagnostics.this.TypeDiag">td2</a>.<a href="#1109998" title="(f: String =&gt; String)TypeDiagnostics.this.global.Symbol">modifyName</a><span class="delimiter">(</span><span title="String(&quot;(some other)&quot;)" class="string">&quot;(some other)&quot;</span> <span title="(x$1: Any)String">+</span> <a href="#1110592" title="String">_</a><span class="delimiter">)</span>
          <span class="keyword">else</span>
            <a href="#1110548" title="List[TypeDiagnostics.this.TypeDiag]">tds</a> <a href="../../../collection/immutable/List.scala.html#62719" title="(f: TypeDiagnostics.this.TypeDiag =&gt; Any)Unit">foreach</a> <span class="delimiter">(</span><a href="#1110604" title="TypeDiagnostics.this.TypeDiag">_</a>.<a href="#1110002" title="()Any">typeQualify</a><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span>
        <span class="delimiter">}</span>
      <span class="delimiter">}</span>
      // performing the actual operation
      <a href="#1031485" title="=&gt; T">op</a>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="keyword">trait</span> <a title="trait TyperDiagnostics extends Object" id="538468">TyperDiagnostics</a> <a href="../../../Unit.scala.html#1515" title="Unit" class="delimiter">{</a>
    self: Typer =&gt;

    <span class="keyword">private</span> <span class="keyword">def</span> <a title="(context0: scala.tools.nsc.typechecker.Analyzer#Context, pos: TypeDiagnostics.this.global.Position, msg: String)Unit" id="538534">contextError</a><span class="delimiter">(</span><a title="scala.tools.nsc.typechecker.Analyzer#Context" id="1110614">context0</a>: Analyzer#<a href="Contexts.scala.html#537993" title="scala.tools.nsc.typechecker.Analyzer#Context">Context</a>, <a title="TypeDiagnostics.this.global.Position" id="1110615">pos</a>: <a href="../../../reflect/internal/util/Position.scala.html#22953" title="TypeDiagnostics.this.global.Position">Position</a>, <a title="String" id="1110616">msg</a>: <span title="String">String</span><span class="delimiter">)</span> = <a href="#1110614" title="scala.tools.nsc.typechecker.Analyzer#Context">context0</a>.<a href="Contexts.scala.html#538882" title="(pos: scala.reflect.internal.util.Position, msg: String)Unit">error</a><span class="delimiter">(</span><a href="#1110615" title="TypeDiagnostics.this.global.Position">pos</a>, <a href="#1110616" title="String">msg</a><span class="delimiter">)</span>
    <span class="keyword">private</span> <span class="keyword">def</span> <a title="(context0: scala.tools.nsc.typechecker.Analyzer#Context, pos: TypeDiagnostics.this.global.Position, err: Throwable)Unit" id="538535">contextError</a><span class="delimiter">(</span><a title="scala.tools.nsc.typechecker.Analyzer#Context" id="1110642">context0</a>: Analyzer#<a href="Contexts.scala.html#537993" title="scala.tools.nsc.typechecker.Analyzer#Context">Context</a>, <a title="TypeDiagnostics.this.global.Position" id="1110643">pos</a>: <a href="../../../reflect/internal/util/Position.scala.html#22953" title="TypeDiagnostics.this.global.Position">Position</a>, <a title="Throwable" id="1110644">err</a>: <span title="Throwable">Throwable</span><span class="delimiter">)</span> = <a href="#1110642" title="scala.tools.nsc.typechecker.Analyzer#Context">context0</a>.<a href="Contexts.scala.html#538881" title="(pos: scala.reflect.internal.util.Position, err: Throwable)Unit">error</a><span class="delimiter">(</span><a href="#1110643" title="TypeDiagnostics.this.global.Position">pos</a>, <a href="#1110644" title="Throwable">err</a><span class="delimiter">)</span>
    <span class="keyword">private</span> <span class="keyword">def</span> <a title="(pos: TypeDiagnostics.this.global.Position, msg: String)Unit" id="538536">contextWarning</a><span class="delimiter">(</span><a title="TypeDiagnostics.this.global.Position" id="1062774">pos</a>: <a href="../../../reflect/internal/util/Position.scala.html#22953" title="TypeDiagnostics.this.global.Position">Position</a>, <a title="String" id="1062775">msg</a>: <span title="String">String</span><span class="delimiter">)</span> = <a href="Typers.scala.html#538560" title="=&gt; TypeDiagnostics.this.Context">context</a>.<a href="Contexts.scala.html#538743" title="=&gt; TypeDiagnostics.this.global.CompilationUnit">unit</a>.<a href="../CompilationUnits.scala.html#539299" title="(pos: TypeDiagnostics.this.global.Position, msg: String)Unit">warning</a><span class="delimiter">(</span><a href="#1062774" title="TypeDiagnostics.this.global.Position">pos</a>, <a href="#1062775" title="String">msg</a><span class="delimiter">)</span>

    <span class="keyword">def</span> <a title="(pos: TypeDiagnostics.this.global.Position, hidden: TypeDiagnostics.this.global.Name, defn: TypeDiagnostics.this.global.Symbol)Unit" id="538537">permanentlyHiddenWarning</a><span class="delimiter">(</span><a title="TypeDiagnostics.this.global.Position" id="1062771">pos</a>: <a href="../../../reflect/internal/util/Position.scala.html#22953" title="TypeDiagnostics.this.global.Position">Position</a>, <a title="TypeDiagnostics.this.global.Name" id="1062772">hidden</a>: <a href="../../../reflect/internal/Names.scala.html#406868" title="TypeDiagnostics.this.global.Name">Name</a>, <a title="TypeDiagnostics.this.global.Symbol" id="1062773">defn</a>: <a href="../../../reflect/internal/Symbols.scala.html#407146" title="TypeDiagnostics.this.global.Symbol">Symbol</a><span class="delimiter">)</span> =
      <a href="#538536" title="(pos: TypeDiagnostics.this.global.Position, msg: String)Unit">contextWarning</a><span class="delimiter">(</span><a href="#1062771" title="TypeDiagnostics.this.global.Position">pos</a>, <a href="../../../Predef.scala.html#7604" title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps" class="string">&quot;imported `%s' is permanently hidden by definition of %s&quot;</a>.<a href="../../../collection/immutable/StringLike.scala.html#59882" title="(args: Any*)String">format</a><span class="delimiter">(</span><a href="#1062772" title="TypeDiagnostics.this.global.Name">hidden</a>, <a href="#1062773" title="TypeDiagnostics.this.global.Symbol">defn</a>.<a href="../../../reflect/internal/Symbols.scala.html#411510" title="=&gt; String">fullLocationString</a><span class="delimiter">)</span><span class="delimiter">)</span>

    <span class="keyword">object</span> <a title="TyperDiagnostics.this.checkDead.type" id="538538">checkDead</a> <a href="#538539" title="TyperDiagnostics.this.checkDead.type" class="delimiter">{</a>
      <span class="keyword">private</span> <span class="keyword">var</span> <a title="TypeDiagnostics.this.global.Symbol" id="1110672">expr</a>: <a href="../../../reflect/internal/Symbols.scala.html#407146" title="TypeDiagnostics.this.global.Symbol">Symbol</a> = <a href="../../../reflect/internal/Symbols.scala.html#407184" title="=&gt; TypeDiagnostics.this.global.NoSymbol">NoSymbol</a>

      <span class="keyword">private</span> <span class="keyword">def</span> <a title="=&gt; Boolean" id="1110674">exprOK</a> =
        <span class="delimiter">(</span><a href="#1110672" title="=&gt; TypeDiagnostics.this.global.Symbol">expr</a> <span title="(x$1: AnyRef)Boolean">!=</span> <a href="../../../reflect/internal/Definitions.scala.html#409097" title="=&gt; TypeDiagnostics.this.global.MethodSymbol">Object_synchronized</a><span class="delimiter">)</span> <a href="../../../Boolean.scala.html#57826" title="(x: Boolean)Boolean">&amp;&amp;</a>
        <a href="../../../Boolean.scala.html#57822" title="=&gt; Boolean">!</a><span class="delimiter">(</span><a href="#1110672" title="=&gt; TypeDiagnostics.this.global.Symbol">expr</a>.<a href="../../../reflect/internal/Symbols.scala.html#411218" title="=&gt; Boolean">isLabel</a> <a href="../../../Boolean.scala.html#57826" title="(x: Boolean)Boolean">&amp;&amp;</a> <a href="../ast/Trees.scala.html#537807" title="TypeDiagnostics.this.global.treeInfo.type">treeInfo</a>.<a href="../../../reflect/internal/TreeInfo.scala.html#479245" title="(sym: TypeDiagnostics.this.global.treeInfo.global.Symbol)Boolean">isSynthCaseSymbol</a><span class="delimiter">(</span><a href="#1110672" title="=&gt; TypeDiagnostics.this.global.Symbol">expr</a><span class="delimiter">)</span><span class="delimiter">)</span> // it's okay to jump to matchEnd (or another case) with an argument of type nothing

      <span class="keyword">private</span> <span class="keyword">def</span> <a title="(tree: TypeDiagnostics.this.global.Tree)Boolean" id="1110675">treeOK</a><span class="delimiter">(</span><a title="TypeDiagnostics.this.global.Tree" id="1110688">tree</a>: <a href="../../../reflect/internal/Trees.scala.html#407938" title="TypeDiagnostics.this.global.Tree">Tree</a><span class="delimiter">)</span> = <a href="#1110688" title="TypeDiagnostics.this.global.Tree">tree</a>.<a href="../../../reflect/internal/Trees.scala.html#408573" title="=&gt; TypeDiagnostics.this.global.Type">tpe</a> <span title="(x$1: AnyRef)Boolean">!=</span> <span title="Null(null)" class="keyword">null</span> <a href="../../../Boolean.scala.html#57826" title="(x: Boolean)Boolean">&amp;&amp;</a> <a href="#1110688" title="TypeDiagnostics.this.global.Tree">tree</a>.<a href="../../../reflect/internal/Trees.scala.html#408573" title="=&gt; TypeDiagnostics.this.global.Type">tpe</a>.<a href="../../../reflect/internal/Types.scala.html#408407" title="=&gt; TypeDiagnostics.this.global.Symbol">typeSymbol</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="../../../reflect/internal/Definitions.scala.html#408692" title="TypeDiagnostics.this.global.definitions.NothingClass.type">NothingClass</a>

      <span class="keyword">def</span> <a title="(fn: TypeDiagnostics.this.global.Tree)Unit" id="1110676">updateExpr</a><span class="delimiter">(</span><a title="TypeDiagnostics.this.global.Tree" id="1110700">fn</a>: <a href="../../../reflect/internal/Trees.scala.html#407938" title="TypeDiagnostics.this.global.Tree">Tree</a><span class="delimiter">)</span> = <span class="delimiter">{</span>
        <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#1110700" title="TypeDiagnostics.this.global.Tree">fn</a>.<a href="../../../reflect/internal/Trees.scala.html#408577" title="=&gt; TypeDiagnostics.this.global.Symbol">symbol</a> <span title="(x$1: AnyRef)Boolean">!=</span> <span title="Null(null)" class="keyword">null</span> <a href="../../../Boolean.scala.html#57826" title="(x: Boolean)Boolean">&amp;&amp;</a> <a href="#1110700" title="TypeDiagnostics.this.global.Tree">fn</a>.<a href="../../../reflect/internal/Trees.scala.html#408577" title="=&gt; TypeDiagnostics.this.global.Symbol">symbol</a>.<a href="../../../reflect/api/Symbols.scala.html#402398" title="=&gt; Boolean">isMethod</a> <a href="../../../Boolean.scala.html#57826" title="(x: Boolean)Boolean">&amp;&amp;</a> <a href="../../../Boolean.scala.html#57822" title="=&gt; Boolean">!</a><a href="#1110700" title="TypeDiagnostics.this.global.Tree">fn</a>.<a href="../../../reflect/internal/Trees.scala.html#408577" title="=&gt; TypeDiagnostics.this.global.Symbol">symbol</a>.<a href="../../../reflect/internal/Symbols.scala.html#411201" title="=&gt; Boolean">isConstructor</a><span class="delimiter">)</span>
          <a href="#538538" title="TyperDiagnostics.this.checkDead.type">checkDead</a>.<a href="#1110672" title="(x$1: TypeDiagnostics.this.global.Symbol)Unit">expr</a> = <a href="#1110700" title="TypeDiagnostics.this.global.Tree">fn</a>.<a href="../../../reflect/internal/Trees.scala.html#408577" title="=&gt; TypeDiagnostics.this.global.Symbol">symbol</a>
      <span class="delimiter">}</span>
      <span class="keyword">def</span> <a title="(tree: TypeDiagnostics.this.global.Tree)TypeDiagnostics.this.global.Tree" id="1110677">apply</a><span class="delimiter">(</span><a title="TypeDiagnostics.this.global.Tree" id="1110706">tree</a>: <a href="../../../reflect/internal/Trees.scala.html#407938" title="TypeDiagnostics.this.global.Tree">Tree</a><span class="delimiter">)</span>: <a href="../../../reflect/internal/Trees.scala.html#407938" title="TypeDiagnostics.this.global.Tree">Tree</a> = <span class="delimiter">{</span>
        // Error suppression will squash some of these warnings unless we circumvent it.
        // It is presumed if you are using a -Y option you would really like to hear
        // the warnings you've requested.
        <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="../Global.scala.html#537448" title="=&gt; scala.tools.nsc.Settings">settings</a>.<a href="../settings/Warnings.scala.html#540247" title="=&gt; scala.tools.nsc.Settings#BooleanSetting">warnDeadCode</a>.<a href="../settings/MutableSettings.scala.html#541066" title="=&gt; Boolean">value</a> <a href="../../../Boolean.scala.html#57826" title="(x: Boolean)Boolean">&amp;&amp;</a> <a href="Typers.scala.html#538560" title="=&gt; TypeDiagnostics.this.Context">context</a>.<a href="Contexts.scala.html#538743" title="=&gt; TypeDiagnostics.this.global.CompilationUnit">unit</a>.<a href="../CompilationUnits.scala.html#539281" title="=&gt; Boolean">exists</a> <a href="../../../Boolean.scala.html#57826" title="(x: Boolean)Boolean">&amp;&amp;</a> <a href="#1110675" title="(tree: TypeDiagnostics.this.global.Tree)Boolean">treeOK</a><span class="delimiter">(</span><a href="#1110706" title="TypeDiagnostics.this.global.Tree">tree</a><span class="delimiter">)</span> <a href="../../../Boolean.scala.html#57826" title="(x: Boolean)Boolean">&amp;&amp;</a> <a href="#1110674" title="=&gt; Boolean">exprOK</a><span class="delimiter">)</span>
          <a href="Typers.scala.html#538560" title="=&gt; TypeDiagnostics.this.Context">context</a>.<a href="Contexts.scala.html#538884" title="(pos: TypeDiagnostics.this.global.Position, msg: String, force: Boolean)Unit">warning</a><span class="delimiter">(</span><a href="#1110706" title="TypeDiagnostics.this.global.Tree">tree</a>.<a href="../../../reflect/internal/Trees.scala.html#408571" title="=&gt; TypeDiagnostics.this.global.Position">pos</a>, <span title="String(&quot;dead code following this construct&quot;)" class="string">&quot;dead code following this construct&quot;</span>, <span title="Boolean(true)" class="keyword">true</span><span class="delimiter">)</span>
        <a href="#1110706" title="TypeDiagnostics.this.global.Tree">tree</a>
      <span class="delimiter">}</span>

      // The checkDead call from typedArg is more selective.
      <span class="keyword">def</span> <a title="(mode: Int, tree: TypeDiagnostics.this.global.Tree)TypeDiagnostics.this.global.Tree" id="1110678">inMode</a><span class="delimiter">(</span><a title="Int" id="1110717">mode</a>: <a href="../../../Int.scala.html#321" title="Int">Int</a>, <a title="TypeDiagnostics.this.global.Tree" id="1110718">tree</a>: <a href="../../../reflect/internal/Trees.scala.html#407938" title="TypeDiagnostics.this.global.Tree">Tree</a><span class="delimiter">)</span>: <a href="../../../reflect/internal/Trees.scala.html#407938" title="TypeDiagnostics.this.global.Tree">Tree</a> = <span class="delimiter">{</span>
        <span class="keyword">val</span> <a title="Boolean" id="1110719">modeOK</a> = <span class="delimiter">(</span><a href="#1110717" title="Int">mode</a> <a href="../../../Int.scala.html#57144" title="(x: Int)Int">&amp;</a> <span class="delimiter">(</span>EXPRmode | BYVALmode <span title="Int(32801)">|</span> POLYmode<span class="delimiter">)</span><span class="delimiter">)</span> <a href="../../../Int.scala.html#57097" title="(x: Int)Boolean">==</a> <span class="delimiter">(</span>EXPRmode <span title="Int(32769)">|</span> BYVALmode<span class="delimiter">)</span>
        <span title="TypeDiagnostics.this.global.Tree" class="keyword">if</span> <span class="delimiter">(</span><a href="#1110719" title="Boolean">modeOK</a><span class="delimiter">)</span> <a href="#1110677" title="(tree: TypeDiagnostics.this.global.Tree)TypeDiagnostics.this.global.Tree">apply</a><span class="delimiter">(</span><a href="#1110718" title="TypeDiagnostics.this.global.Tree">tree</a><span class="delimiter">)</span>
        <span class="keyword">else</span> <a href="#1110718" title="TypeDiagnostics.this.global.Tree">tree</a>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>

    <span class="keyword">private</span> <span class="keyword">def</span> <a title="(sym: TypeDiagnostics.this.global.Symbol)Boolean" id="538540">symWasOverloaded</a><span class="delimiter">(</span><a title="TypeDiagnostics.this.global.Symbol" id="1032353">sym</a>: <a href="../../../reflect/internal/Symbols.scala.html#407146" title="TypeDiagnostics.this.global.Symbol">Symbol</a><span class="delimiter">)</span> = <a href="#1032353" title="TypeDiagnostics.this.global.Symbol">sym</a>.<a href="../../../reflect/internal/Symbols.scala.html#411315" title="=&gt; TypeDiagnostics.this.global.Symbol">owner</a>.<a href="../../../reflect/api/Symbols.scala.html#402403" title="=&gt; Boolean">isClass</a> <a href="../../../Boolean.scala.html#57826" title="(x: Boolean)Boolean">&amp;&amp;</a> <a href="#1032353" title="TypeDiagnostics.this.global.Symbol">sym</a>.<a href="../../../reflect/internal/Symbols.scala.html#411315" title="=&gt; TypeDiagnostics.this.global.Symbol">owner</a>.<a href="../../../reflect/internal/Symbols.scala.html#411367" title="=&gt; TypeDiagnostics.this.global.Type">info</a>.<a href="../../../reflect/internal/Types.scala.html#408451" title="(name: TypeDiagnostics.this.global.Name)TypeDiagnostics.this.global.Symbol">member</a><span class="delimiter">(</span><a href="#1032353" title="TypeDiagnostics.this.global.Symbol">sym</a>.<a href="../../../reflect/internal/Symbols.scala.html#411087" title="=&gt; sym.NameType">name</a><span class="delimiter">)</span>.<a href="../../../reflect/internal/Symbols.scala.html#411206" title="=&gt; Boolean">isOverloaded</a>
    <span class="keyword">private</span> <span class="keyword">def</span> <a title="(sym: TypeDiagnostics.this.global.Symbol)String" id="538541">cyclicAdjective</a><span class="delimiter">(</span><a title="TypeDiagnostics.this.global.Symbol" id="1032352">sym</a>: <a href="../../../reflect/internal/Symbols.scala.html#407146" title="TypeDiagnostics.this.global.Symbol">Symbol</a><span class="delimiter">)</span>  = <span title="String" class="keyword">if</span> <span class="delimiter">(</span><a href="#538540" title="(sym: TypeDiagnostics.this.global.Symbol)Boolean">symWasOverloaded</a><span class="delimiter">(</span><a href="#1032352" title="TypeDiagnostics.this.global.Symbol">sym</a><span class="delimiter">)</span><span class="delimiter">)</span> <span title="String(&quot;overloaded&quot;)" class="string">&quot;overloaded&quot;</span> <span class="keyword">else</span> <span title="String(&quot;recursive&quot;)" class="string">&quot;recursive&quot;</span>

    /** Returns Some(msg) if the given tree is untyped apparently due
     *  to a cyclic reference, and None otherwise.
     */
    <span class="keyword">def</span> <a title="(sym: TypeDiagnostics.this.global.Symbol, tree: TypeDiagnostics.this.global.Tree)Option[String]" id="538542">cyclicReferenceMessage</a><span class="delimiter">(</span><a title="TypeDiagnostics.this.global.Symbol" id="1032267">sym</a>: <a href="../../../reflect/internal/Symbols.scala.html#407146" title="TypeDiagnostics.this.global.Symbol">Symbol</a>, <a title="TypeDiagnostics.this.global.Tree" id="1032268">tree</a>: <a href="../../../reflect/internal/Trees.scala.html#407938" title="TypeDiagnostics.this.global.Tree">Tree</a><span class="delimiter">)</span> = <a href="../../../PartialFunction.scala.html#77051" title="(x: TypeDiagnostics.this.global.Tree)(pf: PartialFunction[TypeDiagnostics.this.global.Tree,String])Option[String]">condOpt</a><span class="delimiter">(</span><a href="#1032268" title="TypeDiagnostics.this.global.Tree">tree</a><span class="delimiter">)</span> <a title="anonymous class $anonfun extends scala.runtime.AbstractPartialFunction[TypeDiagnostics.this.global.Tree,String] with Serializable" id="1032378" class="delimiter">{</a>
      <span class="keyword">case</span> ValDef<a href="#3372639" title="B1" id="3372667" class="delimiter">(</a><a href="../../../reflect/internal/Trees.scala.html#410298" title="TypeDiagnostics.this.global.Modifiers" id="3372663">_</a>, <a href="../../../reflect/internal/Trees.scala.html#410300" title="TypeDiagnostics.this.global.TermName" id="3372664">_</a>, <a href="../../../reflect/internal/Trees.scala.html#410302" title="TypeDiagnostics.this.global.Tree" id="1032387">tpt</a>, <a href="../../../reflect/internal/Trees.scala.html#410304" title="TypeDiagnostics.this.global.Tree" id="3372665">_</a><span class="delimiter">)</span> <span class="keyword">if</span> <a href="#1032387" title="TypeDiagnostics.this.global.Tree">tpt</a>.<a href="../../../reflect/internal/Trees.scala.html#408573" title="=&gt; TypeDiagnostics.this.global.Type">tpe</a> <span title="(x$1: AnyRef)Boolean">==</span> <span title="Null(null)" class="keyword">null</span>        =&gt; <span title="String(&quot;recursive &quot;)" class="string">&quot;recursive &quot;</span><span title="(x$1: Any)String">+</span><a href="#1032267" title="TypeDiagnostics.this.global.Symbol">sym</a><a href="#3372655" title="(x: B1)B1">+</a><span title="String(&quot; needs type&quot;)" class="string">&quot; needs type&quot;</span>
      <span class="keyword">case</span> DefDef<a href="#3372639" title="B1" id="3372674" class="delimiter">(</a><a href="../../../reflect/internal/Trees.scala.html#410278" title="TypeDiagnostics.this.global.Modifiers" id="3372668">_</a>, <a href="../../../reflect/internal/Trees.scala.html#410280" title="TypeDiagnostics.this.global.Name" id="3372669">_</a>, <a href="../../../reflect/internal/Trees.scala.html#410282" title="List[TypeDiagnostics.this.global.TypeDef]" id="3372670">_</a>, <a href="../../../reflect/internal/Trees.scala.html#410284" title="List[List[TypeDiagnostics.this.global.ValDef]]" id="3372671">_</a>, <a href="../../../reflect/internal/Trees.scala.html#410286" title="TypeDiagnostics.this.global.Tree" id="1032401">tpt</a>, <a href="../../../reflect/internal/Trees.scala.html#410288" title="TypeDiagnostics.this.global.Tree" id="3372672">_</a><span class="delimiter">)</span> <span class="keyword">if</span> <a href="#1032401" title="TypeDiagnostics.this.global.Tree">tpt</a>.<a href="../../../reflect/internal/Trees.scala.html#408573" title="=&gt; TypeDiagnostics.this.global.Type">tpe</a> <span title="(x$1: AnyRef)Boolean">==</span> <span title="Null(null)" class="keyword">null</span>  =&gt; <a href="../../../collection/immutable/List.scala.html#62451" title="(xs: Object*)List[Object]">List</a><span class="delimiter">(</span><a href="#538541" title="(sym: TypeDiagnostics.this.global.Symbol)String">cyclicAdjective</a><span class="delimiter">(</span><a href="#1032267" title="TypeDiagnostics.this.global.Symbol">sym</a><span class="delimiter">)</span>, <a href="#1032267" title="TypeDiagnostics.this.global.Symbol">sym</a>, <span title="String(&quot;needs result type&quot;)" class="string">&quot;needs result type&quot;</span><span class="delimiter">)</span> <a href="#3372655" title="(x: B1)B1">mkString</a> <span title="String(&quot; &quot;)" class="string">&quot; &quot;</span>
      <span class="keyword">case</span> Import<a href="#3372639" title="B1" id="3372676" class="delimiter">(</a><a href="../../../reflect/internal/Trees.scala.html#410214" title="TypeDiagnostics.this.global.Tree" id="1032409">expr</a>, <a href="../../../reflect/internal/Trees.scala.html#410216" title="List[TypeDiagnostics.this.global.ImportSelector]" id="1032410">selectors</a><span class="delimiter">)</span>                        =&gt;
        <span class="delimiter">(</span> <span class="string">&quot;encountered unrecoverable cycle resolving import.&quot;</span> +
          <span class="string">&quot;\nNote: this is often due in part to a class depending on a definition nested within its companion.&quot;</span> <a href="#3372655" title="(x: B1)B1">+</a>
          <span class="string">&quot;\nIf applicable, you may wish to try moving some members into another object.&quot;</span>
        <span class="delimiter">)</span>
    <span class="delimiter">}</span>

    /** Report a type error.
     *
     *  @param pos0   The position where to report the error
     *  @param ex     The exception that caused the error
     */
    <span class="keyword">def</span> <a title="(context0: TypeDiagnostics.this.Context, pos: TypeDiagnostics.this.global.Position, ex: TypeDiagnostics.this.global.TypeError)Unit" id="538543">reportTypeError</a><span class="delimiter">(</span><a title="TypeDiagnostics.this.Context" id="1052345">context0</a>: <a href="Contexts.scala.html#537993" title="TypeDiagnostics.this.Context">Context</a>, <a title="TypeDiagnostics.this.global.Position" id="1052346">pos</a>: <a href="../../../reflect/internal/util/Position.scala.html#22953" title="TypeDiagnostics.this.global.Position">Position</a>, <a title="TypeDiagnostics.this.global.TypeError" id="1052347">ex</a>: <a href="../../../reflect/internal/Types.scala.html#407625" title="TypeDiagnostics.this.global.TypeError">TypeError</a><span class="delimiter">)</span> <span class="delimiter">{</span>
      <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#1052347" title="TypeDiagnostics.this.global.TypeError">ex</a>.<a href="../../../reflect/internal/Types.scala.html#416070" title="=&gt; TypeDiagnostics.this.global.Position">pos</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="../../../reflect/internal/Positions.scala.html#408302" title="=&gt; reflect.internal.util.NoPosition.type">NoPosition</a><span class="delimiter">)</span> <a href="#1052347" title="TypeDiagnostics.this.global.TypeError">ex</a>.<a href="../../../reflect/internal/Types.scala.html#416071" title="(x$1: TypeDiagnostics.this.global.Position)Unit">pos</a> = <a href="#1052346" title="TypeDiagnostics.this.global.Position">pos</a>
      // TODO: should be replaced by throwErrors
      // but it seems that throwErrors excludes some of the errors that should actually be
      // buffered, causing TypeErrors to fly around again. This needs some more investigation.
      <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="../../../Boolean.scala.html#57822" title="=&gt; Boolean">!</a><a href="#1052345" title="TypeDiagnostics.this.Context">context0</a>.<a href="Contexts.scala.html#538835" title="=&gt; Boolean">reportErrors</a><span class="delimiter">)</span> <span title="Nothing" class="keyword">throw</span> <a href="#1052347" title="TypeDiagnostics.this.global.TypeError">ex</a>
      <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="../Global.scala.html#537448" title="=&gt; scala.tools.nsc.Settings">settings</a>.<a href="../settings/ScalaSettings.scala.html#540057" title="=&gt; scala.tools.nsc.Settings#BooleanSetting">debug</a>.<a href="../settings/MutableSettings.scala.html#541066" title="=&gt; Boolean">value</a><span class="delimiter">)</span> <a href="#1052347" title="TypeDiagnostics.this.global.TypeError">ex</a>.<span title="()Unit">printStackTrace</span><span class="delimiter">(</span><span class="delimiter">)</span>

      <a href="#1052347" title="TypeDiagnostics.this.global.TypeError">ex</a> <span class="keyword">match</span> <span class="delimiter">{</span>
        <span class="keyword">case</span> CyclicReference<a href="#3372694" title="Unit" id="3372696" class="delimiter">(</a><a href="../../../reflect/internal/Symbols.scala.html#474566" title="TypeDiagnostics.this.global.Symbol" id="1110755">sym</a>, <a href="../../../reflect/internal/Symbols.scala.html#474568" title="TypeDiagnostics.this.global.Type" id="1110756">info</a>: TypeCompleter<span class="delimiter">)</span> =&gt;
          <a href="#3372700" title="(x: Unit)Unit" class="keyword">if</a> <span class="delimiter">(</span><a href="#1052345" title="TypeDiagnostics.this.Context">context0</a>.<a href="Contexts.scala.html#538749" title="=&gt; TypeDiagnostics.this.global.Symbol">owner</a>.<a href="../../../reflect/internal/Symbols.scala.html#411213" title="=&gt; Boolean">isTermMacro</a><span class="delimiter">)</span> <span class="delimiter">{</span>
            // see comments to TypeSigError for an explanation of this special case
            <span title="Nothing" class="keyword">throw</span> <a href="#1052347" title="TypeDiagnostics.this.global.TypeError">ex</a>
          <span class="delimiter">}</span> <span class="keyword">else</span> <span class="delimiter">{</span>
            <span class="keyword">val</span> <a title="TypeDiagnostics.this.global.Position" id="1110757">pos</a> = info.<a href="Namers.scala.html#1032265" title="=&gt; TypeDiagnostics.this.global.Tree">tree</a> <span class="keyword">match</span> <span class="delimiter">{</span>
              <span class="keyword">case</span> Import<a href="#3372684" title="TypeDiagnostics.this.global.Position" id="3372687" class="delimiter">(</a><a href="../../../reflect/internal/Trees.scala.html#410214" title="TypeDiagnostics.this.global.Tree" id="1110760">expr</a>, <a href="../../../reflect/internal/Trees.scala.html#410216" title="List[TypeDiagnostics.this.global.ImportSelector]" id="3372685">_</a><span class="delimiter">)</span>  =&gt; <a href="#1110760" title="TypeDiagnostics.this.global.Tree">expr</a>.<a href="#3372689" title="(x: TypeDiagnostics.this.global.Position)TypeDiagnostics.this.global.Position">pos</a>
              <span class="keyword">case</span> _                =&gt; <a href="#1052347" title="TypeDiagnostics.this.global.TypeError">ex</a>.<a href="#3372689" title="(x: TypeDiagnostics.this.global.Position)TypeDiagnostics.this.global.Position">pos</a>
            <span class="delimiter">}</span>
            <a href="#538534" title="(context0: scala.tools.nsc.typechecker.Analyzer#Context, pos: TypeDiagnostics.this.global.Position, msg: String)Unit">contextError</a><span class="delimiter">(</span><a href="#1052345" title="TypeDiagnostics.this.Context">context0</a>, <a href="#1110757" title="TypeDiagnostics.this.global.Position">pos</a>, <a href="#538542" title="(sym: TypeDiagnostics.this.global.Symbol, tree: TypeDiagnostics.this.global.Tree)Option[String]">cyclicReferenceMessage</a><span class="delimiter">(</span><a href="#1110755" title="TypeDiagnostics.this.global.Symbol">sym</a>, info.<a href="Namers.scala.html#1032265" title="=&gt; TypeDiagnostics.this.global.Tree">tree</a><span class="delimiter">)</span> <a href="../../../Option.scala.html#62859" title="(default: =&gt; String)String">getOrElse</a> <a href="#1052347" title="TypeDiagnostics.this.global.TypeError">ex</a>.<span title="()String">getMessage</span><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span>

            <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#1110755" title="TypeDiagnostics.this.global.Symbol">sym</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="../../../reflect/internal/Definitions.scala.html#408671" title="=&gt; TypeDiagnostics.this.global.ClassSymbol">ObjectClass</a><span class="delimiter">)</span>
              <span title="Nothing" class="keyword">throw</span> <span title="scala.reflect.internal.FatalError" class="keyword">new</span> <a href="../package.scala.html#55808" title="scala.reflect.internal.FatalError">FatalError</a><span class="delimiter">(</span><span title="String(&quot;cannot redefine root &quot;)" class="string">&quot;cannot redefine root &quot;</span><span title="(x$1: Any)String">+</span><a href="#1110755" title="TypeDiagnostics.this.global.Symbol">sym</a><span class="delimiter">)</span>
          <span class="delimiter">}</span>
        <span class="keyword">case</span> _ =&gt;
          <a href="#538535" title="(context0: scala.tools.nsc.typechecker.Analyzer#Context, pos: TypeDiagnostics.this.global.Position, err: Throwable)Unit">contextError</a><a href="#3372700" title="(x: Unit)Unit" class="delimiter">(</a><a href="#1052345" title="TypeDiagnostics.this.Context">context0</a>, <a href="#1052347" title="TypeDiagnostics.this.global.TypeError">ex</a>.<a href="../../../reflect/internal/Types.scala.html#416070" title="=&gt; TypeDiagnostics.this.global.Position">pos</a>, <a href="#1052347" title="TypeDiagnostics.this.global.TypeError">ex</a><span class="delimiter">)</span>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>
<span title="Object" class="delimiter">}</span>

        </pre>
    </body>
</html>