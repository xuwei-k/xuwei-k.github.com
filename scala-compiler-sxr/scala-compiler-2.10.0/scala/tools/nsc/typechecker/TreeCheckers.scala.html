<?xml version="1.0" encoding="utf-8"?>
      <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <meta http-equiv="Expires" content="0" />
        <title>scala/tools/nsc/typechecker/TreeCheckers.scala</title>
        <script type="text/javascript" src="../../../../jquery-all.js"></script>
        <script type="text/javascript" src="../../../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../../../style.css" title="Style"></link>
    </head>
    <body>
        <pre>
/* NSC -- new Scala compiler
 * Copyright 2005-2013 LAMP/EPFL
 * @author  Martin Odersky
 */

<span class="keyword">package</span> scala.tools.nsc
<span class="keyword">package</span> typechecker

<span class="keyword">import</span> scala.tools.nsc.symtab.<a href="../symtab/package.scala.html#55820" title="=&gt; reflect.internal.Flags.type">Flags</a>._
<span class="keyword">import</span> scala.collection.mutable
<span class="keyword">import</span> mutable.ListBuffer
<span class="keyword">import</span> util.returning

<span class="keyword">abstract</span> <span class="keyword">class</span> <a title="class TreeCheckers extends Object with scala.tools.nsc.typechecker.Analyzer" id="48467">TreeCheckers</a> <a href="#48467" title="scala.tools.nsc.typechecker.TreeCheckers" class="keyword">extends</a> <a href="Analyzer.scala.html#44858" title="scala.tools.nsc.typechecker.Analyzer">Analyzer</a> <span class="delimiter">{</span>
  <span class="keyword">import</span> <a href="Analyzer.scala.html#537962" title="=&gt; scala.tools.nsc.Global">global</a>._

  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(x: AnyRef)String" id="623664">classstr</a><span class="delimiter">(</span><a title="AnyRef" id="1104457">x</a>: <span title="AnyRef">AnyRef</span><span class="delimiter">)</span> = <span class="delimiter">(</span><a href="#1104457" title="AnyRef">x</a>.<span title="()Class[_]">getClass</span>.<span title="()String">getName</span> <a href="../../../Predef.scala.html#7555" title="(xs: Array[String])scala.collection.mutable.ArrayOps[String]">split</a> <span title="String(&quot;\\\\.|\\\\$&quot;)" class="string">&quot;&quot;&quot;\\.|\\$&quot;&quot;&quot;</span><span class="delimiter">)</span>.<a href="../../../collection/IndexedSeqOptimized.scala.html#59160" title="=&gt; String">last</a>
  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(x: TreeCheckers.this.global.Type)String" id="623665">typestr</a><span class="delimiter">(</span><a title="TreeCheckers.this.global.Type" id="1104533">x</a>: <a href="../../../reflect/internal/Types.scala.html#407270" title="TreeCheckers.this.global.Type">Type</a><span class="delimiter">)</span>    = <span title="String(&quot; (tpe = &quot;)" class="string">&quot; (tpe = &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#1104533" title="TreeCheckers.this.global.Type">x</a> <span title="(x$1: Any)String">+</span> <span title="String(&quot;)&quot;)" class="string">&quot;)&quot;</span>
  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(t: TreeCheckers.this.global.Tree)String" id="623666">treestr</a><span class="delimiter">(</span><a title="TreeCheckers.this.global.Tree" id="1104536">t</a>: <a href="../../../reflect/internal/Trees.scala.html#407938" title="TreeCheckers.this.global.Tree">Tree</a><span class="delimiter">)</span>    = <a href="../../../Predef.scala.html#7605" title="implicit scala.Predef.any2stringadd : (x: Any)scala.runtime.StringAdd">t</a> <a href="../../../runtime/StringAdd.scala.html#60046" title="(other: String)String">+</a> <span title="String(&quot; [&quot;)" class="string">&quot; [&quot;</span> <span title="(x$1: Any)String">+</span> <a href="#623664" title="(x: AnyRef)String">classstr</a><span class="delimiter">(</span><a href="#1104536" title="TreeCheckers.this.global.Tree">t</a><span class="delimiter">)</span> <span title="(x$1: Any)String">+</span> <span title="String(&quot;]&quot;)" class="string">&quot;]&quot;</span> <span title="(x$1: Any)String">+</span> <a href="#623665" title="(x: TreeCheckers.this.global.Type)String">typestr</a><span class="delimiter">(</span><a href="#1104536" title="TreeCheckers.this.global.Tree">t</a>.<a href="../../../reflect/internal/Trees.scala.html#408573" title="=&gt; TreeCheckers.this.global.Type">tpe</a><span class="delimiter">)</span>
  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(s: TreeCheckers.this.global.Symbol)String" id="623667">ownerstr</a><span class="delimiter">(</span><a title="TreeCheckers.this.global.Symbol" id="1104541">s</a>: <a href="../../../reflect/internal/Symbols.scala.html#407146" title="TreeCheckers.this.global.Symbol">Symbol</a><span class="delimiter">)</span> = <span title="String(&quot;\'&quot;)" class="string">&quot;'&quot;</span> <span title="(x$1: Any)String">+</span> <a href="#1104541" title="TreeCheckers.this.global.Symbol">s</a> <span title="(x$1: Any)String">+</span> <span title="String(&quot;\'&quot;)" class="string">&quot;'&quot;</span> <span title="(x$1: Any)String">+</span> <a href="#1104541" title="TreeCheckers.this.global.Symbol">s</a>.<a href="../../../reflect/internal/Symbols.scala.html#411509" title="=&gt; String">locationString</a>
  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(t: TreeCheckers.this.global.Tree)String" id="623668">wholetreestr</a><span class="delimiter">(</span><a title="TreeCheckers.this.global.Tree" id="1104544">t</a>: <a href="../../../reflect/internal/Trees.scala.html#407938" title="TreeCheckers.this.global.Tree">Tree</a><span class="delimiter">)</span> = <a href="../../../Function1.scala.html#58642" title="(v1: TreeCheckers.this.global.nodePrinters.global.Tree)String">nodeToString</a><span class="delimiter">(</span><a href="#1104544" title="TreeCheckers.this.global.Tree">t</a><span class="delimiter">)</span> <span title="(x$1: Any)String">+</span> <span title="String(&quot;\n&quot;)" class="string">&quot;\n&quot;</span>

  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(t: TreeCheckers.this.global.Tree)String" id="623669">beststr</a><span class="delimiter">(</span><a title="TreeCheckers.this.global.Tree" id="1104548">t</a>: <a href="../../../reflect/internal/Trees.scala.html#407938" title="TreeCheckers.this.global.Tree">Tree</a><span class="delimiter">)</span> = <span title="String(&quot;&lt;&quot;)" class="string">&quot;&lt;&quot;</span> <span title="(x$1: Any)String">+</span> <span class="delimiter">{</span>
    <span title="Any" class="keyword">if</span> <span class="delimiter">(</span><a href="#1104548" title="TreeCheckers.this.global.Tree">t</a>.<a href="../../../reflect/internal/Trees.scala.html#408577" title="=&gt; TreeCheckers.this.global.Symbol">symbol</a> <span title="(x$1: AnyRef)Boolean">!=</span> <span title="Null(null)" class="keyword">null</span> <a href="../../../Boolean.scala.html#57826" title="(x: Boolean)Boolean">&amp;&amp;</a> <a href="#1104548" title="TreeCheckers.this.global.Tree">t</a>.<a href="../../../reflect/internal/Trees.scala.html#408577" title="=&gt; TreeCheckers.this.global.Symbol">symbol</a> <span title="(x$1: AnyRef)Boolean">!=</span> <a href="../../../reflect/internal/Symbols.scala.html#407184" title="=&gt; TreeCheckers.this.global.NoSymbol">NoSymbol</a><span class="delimiter">)</span> <span title="String(&quot;sym=&quot;)" class="string">&quot;sym=&quot;</span> <span title="(x$1: Any)String">+</span> <a href="#623667" title="(s: TreeCheckers.this.global.Symbol)String">ownerstr</a><span class="delimiter">(</span><a href="#1104548" title="TreeCheckers.this.global.Tree">t</a>.<a href="../../../reflect/internal/Trees.scala.html#408577" title="=&gt; TreeCheckers.this.global.Symbol">symbol</a><span class="delimiter">)</span>
    <span class="keyword">else</span> <span title="Any" class="keyword">if</span> <span class="delimiter">(</span><a href="#1104548" title="TreeCheckers.this.global.Tree">t</a>.<a href="../../../reflect/internal/Trees.scala.html#408573" title="=&gt; TreeCheckers.this.global.Type">tpe</a>.<a href="../../../reflect/internal/Types.scala.html#408404" title="=&gt; Boolean">isComplete</a><span class="delimiter">)</span> <span title="String(&quot;tpe=&quot;)" class="string">&quot;tpe=&quot;</span> <span title="(x$1: Any)String">+</span> <a href="#623665" title="(x: TreeCheckers.this.global.Type)String">typestr</a><span class="delimiter">(</span><a href="#1104548" title="TreeCheckers.this.global.Tree">t</a>.<a href="../../../reflect/internal/Trees.scala.html#408573" title="=&gt; TreeCheckers.this.global.Type">tpe</a><span class="delimiter">)</span>
    <span class="keyword">else</span> <a href="#1104548" title="TreeCheckers.this.global.Tree">t</a> <span class="keyword">match</span> <span class="delimiter">{</span>
      <span class="keyword">case</span> <a href="#3372106" title="Any" id="3372109">x</a>: DefTree =&gt; <span title="String(&quot;name=&quot;)" class="string">&quot;name=&quot;</span> <a href="#3372112" title="(x: Any)Any">+</a> x.<a href="../../../reflect/internal/Trees.scala.html#410153" title="=&gt; TreeCheckers.this.global.Name">name</a>
      <span class="keyword">case</span> <a href="#3372106" title="Any" id="3372110">x</a>: RefTree =&gt; <span title="String(&quot;reference=&quot;)" class="string">&quot;reference=&quot;</span> <a href="#3372112" title="(x: Any)Any">+</a> x.<a href="../../../reflect/internal/Trees.scala.html#409943" title="=&gt; TreeCheckers.this.global.Name">name</a>
      <span class="keyword">case</span> _          =&gt; <span title="String(&quot;clazz=&quot;)" class="string">&quot;clazz=&quot;</span> <a href="#3372112" title="(x: Any)Any">+</a> <a href="#623664" title="(x: AnyRef)String">classstr</a><span class="delimiter">(</span><a href="#1104548" title="TreeCheckers.this.global.Tree">t</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span> <span title="(x$1: Any)String">+</span> <span title="String(&quot;&gt;&quot;)" class="string">&quot;&gt;&quot;</span>

  /** This is a work in progress, don't take it too seriously.
   */
  <span class="keyword">object</span> <a title="TreeCheckers.this.SymbolTracker.type" id="623670">SymbolTracker</a> <a href="#623671" title="TreeCheckers.this.SymbolTracker.type" class="keyword">extends</a> <a href="../../../reflect/api/Trees.scala.html#56467" title="TreeCheckers.this.global.Traverser">Traverser</a> <span class="delimiter">{</span>
    <span class="keyword">type</span> <a title="scala.collection.mutable.HashMap[TreeCheckers.this.global.Symbol,List[TreeCheckers.this.global.Tree]]" id="1104564">PhaseMap</a> = mutable.<a href="../../../collection/mutable/HashMap.scala.html#12447" title="scala.collection.mutable.HashMap[TreeCheckers.this.global.Symbol,List[TreeCheckers.this.global.Tree]]">HashMap</a><span class="delimiter">[</span>Symbol, List<span class="delimiter">[</span>Tree<span class="delimiter">]</span><span class="delimiter">]</span>

    <span class="keyword">val</span> <a title="scala.collection.mutable.ListBuffer[(scala.reflect.internal.Phase, scala.collection.mutable.HashMap[TreeCheckers.this.global.Symbol,List[TreeCheckers.this.global.Tree]])]" id="1104565">maps</a>          = <a href="../../../collection/generic/GenericCompanion.scala.html#59933" title="[A](elems: A*)scala.collection.mutable.ListBuffer[A]">ListBuffer</a><span title="(elems: (scala.tools.nsc.Phase, scala.tools.nsc.typechecker.TreeCheckers.SymbolTracker.PhaseMap)*)scala.collection.mutable.ListBuffer[(scala.tools.nsc.Phase, scala.tools.nsc.typechecker.TreeCheckers.SymbolTracker.PhaseMap)]" class="delimiter">[</span><a href="../../../Tuple2.scala.html#783" title="(scala.tools.nsc.Phase, scala.tools.nsc.typechecker.TreeCheckers.SymbolTracker.PhaseMap)" class="delimiter">(</a>Phase, PhaseMap<span class="delimiter">)</span><span class="delimiter">]</span><span class="delimiter">(</span><span class="delimiter">)</span>
    <span class="keyword">def</span> <a title="=&gt; scala.collection.mutable.HashMap[TreeCheckers.this.global.Symbol,List[TreeCheckers.this.global.Tree]]" id="1104567">prev</a>          = <a href="#1104565" title="=&gt; scala.collection.mutable.ListBuffer[(scala.reflect.internal.Phase, scala.collection.mutable.HashMap[TreeCheckers.this.global.Symbol,List[TreeCheckers.this.global.Tree]])]">maps</a>.<a href="../../../collection/TraversableLike.scala.html#58107" title="=&gt; scala.collection.mutable.ListBuffer[(scala.reflect.internal.Phase, scala.collection.mutable.HashMap[TreeCheckers.this.global.Symbol,List[TreeCheckers.this.global.Tree]])]">init</a>.<a href="../../../collection/generic/TraversableForwarder.scala.html#79906" title="=&gt; (scala.reflect.internal.Phase, scala.collection.mutable.HashMap[TreeCheckers.this.global.Symbol,List[TreeCheckers.this.global.Tree]])">last</a>.<a href="../../../Tuple2.scala.html#60637" title="=&gt; scala.collection.mutable.HashMap[TreeCheckers.this.global.Symbol,List[TreeCheckers.this.global.Tree]]">_2</a>
    <span class="keyword">def</span> <a title="=&gt; scala.collection.mutable.HashMap[TreeCheckers.this.global.Symbol,List[TreeCheckers.this.global.Tree]]" id="1104568">latest</a>        = <a href="#1104565" title="=&gt; scala.collection.mutable.ListBuffer[(scala.reflect.internal.Phase, scala.collection.mutable.HashMap[TreeCheckers.this.global.Symbol,List[TreeCheckers.this.global.Tree]])]">maps</a>.<a href="../../../collection/generic/TraversableForwarder.scala.html#79906" title="=&gt; (scala.reflect.internal.Phase, scala.collection.mutable.HashMap[TreeCheckers.this.global.Symbol,List[TreeCheckers.this.global.Tree]])">last</a>.<a href="../../../Tuple2.scala.html#60637" title="=&gt; scala.collection.mutable.HashMap[TreeCheckers.this.global.Symbol,List[TreeCheckers.this.global.Tree]]">_2</a>
    <span class="keyword">val</span> <a title="scala.collection.mutable.HashMap[TreeCheckers.this.global.Symbol,List[TreeCheckers.this.global.DefTree]]" id="1104569">defSyms</a>       = mutable.<a href="../../../collection/generic/GenMapFactory.scala.html#60744" title="[A, B](elems: (A, B)*)scala.collection.mutable.HashMap[A,B]">HashMap</a><span title="(elems: (TreeCheckers.this.global.Symbol, List[TreeCheckers.this.global.DefTree])*)scala.collection.mutable.HashMap[TreeCheckers.this.global.Symbol,List[TreeCheckers.this.global.DefTree]]" class="delimiter">[</span><a href="../../../reflect/internal/Symbols.scala.html#407146" title="TreeCheckers.this.global.Symbol">Symbol</a>, <a href="../../../collection/immutable/List.scala.html#11952" title="List[TreeCheckers.this.global.DefTree]">List</a><span class="delimiter">[</span>DefTree<span class="delimiter">]</span><span class="delimiter">]</span><span class="delimiter">(</span><span class="delimiter">)</span>
    <span class="keyword">val</span> <a title="scala.collection.mutable.HashSet[TreeCheckers.this.global.Symbol]" id="1104571">newSyms</a>       = mutable.<a href="../../../collection/generic/GenericCompanion.scala.html#59933" title="[A](elems: A*)scala.collection.mutable.HashSet[A]">HashSet</a><span title="(elems: TreeCheckers.this.global.Symbol*)scala.collection.mutable.HashSet[TreeCheckers.this.global.Symbol]" class="delimiter">[</span><a href="../../../reflect/internal/Symbols.scala.html#407146" title="TreeCheckers.this.global.Symbol">Symbol</a><span class="delimiter">]</span><span class="delimiter">(</span><span class="delimiter">)</span>
    <span class="keyword">val</span> <a title="scala.collection.mutable.ListBuffer[String]" id="1104573">movedMsgs</a>     = <span title="scala.collection.mutable.ListBuffer[String]" class="keyword">new</span> <a href="../../../collection/mutable/ListBuffer.scala.html#13347" title="scala.collection.mutable.ListBuffer[String]">ListBuffer</a><span class="delimiter">[</span>String<span class="delimiter">]</span>
    <span class="keyword">def</span> <a title="=&gt; List[TreeCheckers.this.global.Symbol]" id="1104575">sortedNewSyms</a> = <a href="#1104571" title="=&gt; scala.collection.mutable.HashSet[TreeCheckers.this.global.Symbol]">newSyms</a>.<a href="../../../collection/TraversableOnce.scala.html#58263" title="=&gt; List[TreeCheckers.this.global.Symbol]">toList</a>.<a href="../../../collection/SeqLike.scala.html#58839" title="=&gt; List[TreeCheckers.this.global.Symbol]">distinct</a> <a href="../../../collection/SeqLike.scala.html#58869" title="(f: TreeCheckers.this.global.Symbol =&gt; String)(implicit ord: scala.math.Ordering[String])List[TreeCheckers.this.global.Symbol]">sortBy</a> <span class="delimiter">(</span><a href="#1104603" title="TreeCheckers.this.global.Symbol">_</a>.<a href="../../../reflect/internal/Symbols.scala.html#411087" title="=&gt; x$1.NameType">name</a>.<span title="()String">toString</span><span class="delimiter">)</span>

    <span class="keyword">def</span> <a title="(sym: TreeCheckers.this.global.Symbol)Boolean" id="1104576">inPrev</a><span class="delimiter">(</span><a title="TreeCheckers.this.global.Symbol" id="1104661">sym</a>: <a href="../../../reflect/internal/Symbols.scala.html#407146" title="TreeCheckers.this.global.Symbol">Symbol</a><span class="delimiter">)</span> = <span class="delimiter">{</span>
      <span class="delimiter">(</span><a href="#1104565" title="=&gt; scala.collection.mutable.ListBuffer[(scala.reflect.internal.Phase, scala.collection.mutable.HashMap[TreeCheckers.this.global.Symbol,List[TreeCheckers.this.global.Tree]])]">maps</a>.<a href="../../../collection/mutable/ListBuffer.scala.html#79762" title="=&gt; Int">size</a> <a href="../../../Int.scala.html#57132" title="(x: Int)Boolean">&gt;=</a> <span title="Int(2)" class="int">2</span><span class="delimiter">)</span> <a href="../../../Boolean.scala.html#57826" title="(x: Boolean)Boolean">&amp;&amp;</a> <span class="delimiter">(</span><a href="#1104567" title="=&gt; scala.collection.mutable.HashMap[TreeCheckers.this.global.Symbol,List[TreeCheckers.this.global.Tree]]">prev</a> <a href="../../../collection/mutable/HashMap.scala.html#88244" title="(key: TreeCheckers.this.global.Symbol)Boolean">contains</a> <a href="#1104661" title="TreeCheckers.this.global.Symbol">sym</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>
    <span class="keyword">def</span> <a title="(sym: TreeCheckers.this.global.Symbol, tree: TreeCheckers.this.global.Tree)Any" id="1104577">record</a><span class="delimiter">(</span><a title="TreeCheckers.this.global.Symbol" id="1104677">sym</a>: <a href="../../../reflect/internal/Symbols.scala.html#407146" title="TreeCheckers.this.global.Symbol">Symbol</a>, <a title="TreeCheckers.this.global.Tree" id="1104678">tree</a>: <a href="../../../reflect/internal/Trees.scala.html#407938" title="TreeCheckers.this.global.Tree">Tree</a><span class="delimiter">)</span> = <span class="delimiter">{</span>
      <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#1104568" title="=&gt; scala.collection.mutable.HashMap[TreeCheckers.this.global.Symbol,List[TreeCheckers.this.global.Tree]]">latest</a> <a href="../../../collection/mutable/HashMap.scala.html#88244" title="(key: TreeCheckers.this.global.Symbol)Boolean">contains</a> <a href="#1104677" title="TreeCheckers.this.global.Symbol">sym</a><span class="delimiter">)</span> <a href="../../../collection/mutable/HashMap.scala.html#88248" title="(key: TreeCheckers.this.global.Symbol, value: List[TreeCheckers.this.global.Tree])Unit">latest</a><span class="delimiter">(</span><a href="#1104677" title="TreeCheckers.this.global.Symbol">sym</a><span class="delimiter">)</span> = <a href="../../../collection/mutable/HashMap.scala.html#88245" title="(key: TreeCheckers.this.global.Symbol)List[TreeCheckers.this.global.Tree]">latest</a><span class="delimiter">(</span><a href="#1104677" title="TreeCheckers.this.global.Symbol">sym</a><span class="delimiter">)</span> <a href="../../../collection/SeqLike.scala.html#58855" title="(elem: TreeCheckers.this.global.Tree)(implicit bf: scala.collection.generic.CanBuildFrom[List[TreeCheckers.this.global.Tree],TreeCheckers.this.global.Tree,List[TreeCheckers.this.global.Tree]])List[TreeCheckers.this.global.Tree]">:+</a> <a href="#1104678" title="TreeCheckers.this.global.Tree">tree</a>
      <span class="keyword">else</span> <a href="../../../collection/mutable/HashMap.scala.html#88248" title="(key: TreeCheckers.this.global.Symbol, value: List[TreeCheckers.this.global.Tree])Unit">latest</a><span class="delimiter">(</span><a href="#1104677" title="TreeCheckers.this.global.Symbol">sym</a><span class="delimiter">)</span> = <a href="../../../collection/immutable/List.scala.html#62451" title="(xs: TreeCheckers.this.global.Tree*)List[TreeCheckers.this.global.Tree]">List</a><span class="delimiter">(</span><a href="#1104678" title="TreeCheckers.this.global.Tree">tree</a><span class="delimiter">)</span>

      <span title="Any" class="keyword">if</span> <span class="delimiter">(</span><a href="#1104576" title="(sym: TreeCheckers.this.global.Symbol)Boolean">inPrev</a><span class="delimiter">(</span><a href="#1104677" title="TreeCheckers.this.global.Symbol">sym</a><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">{</span>
        <span class="keyword">val</span> <a title="List[TreeCheckers.this.global.Tree]" id="1104777">prevTrees</a> = <a href="../../../collection/mutable/HashMap.scala.html#88245" title="(key: TreeCheckers.this.global.Symbol)List[TreeCheckers.this.global.Tree]">prev</a><span class="delimiter">(</span><a href="#1104677" title="TreeCheckers.this.global.Symbol">sym</a><span class="delimiter">)</span>

        <span title="Any" class="keyword">if</span> <span class="delimiter">(</span><a href="#1104777" title="List[TreeCheckers.this.global.Tree]">prevTrees</a> <a href="../../../collection/LinearSeqOptimized.scala.html#86379" title="(p: TreeCheckers.this.global.Tree =&gt; Boolean)Boolean">exists</a> <span class="delimiter">(</span><a title="TreeCheckers.this.global.Tree" id="1104805">t</a> =&gt; <span class="delimiter">(</span><a href="#1104805" title="TreeCheckers.this.global.Tree">t</a> <span title="(x$1: AnyRef)Boolean">eq</span> <a href="#1104678" title="TreeCheckers.this.global.Tree">tree</a><span class="delimiter">)</span> <a href="../../../Boolean.scala.html#57825" title="(x: Boolean)Boolean">||</a> <span class="delimiter">(</span><a href="#1104805" title="TreeCheckers.this.global.Tree">t</a>.<a href="../../../reflect/internal/Trees.scala.html#408577" title="=&gt; TreeCheckers.this.global.Symbol">symbol</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="#1104677" title="TreeCheckers.this.global.Symbol">sym</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span> <span title="Unit" class="delimiter">(</span><span class="delimiter">)</span>
        <span class="keyword">else</span> <span title="Any" class="keyword">if</span> <span class="delimiter">(</span><a href="#1104777" title="List[TreeCheckers.this.global.Tree]">prevTrees</a> <a href="../../../collection/LinearSeqOptimized.scala.html#86379" title="(p: TreeCheckers.this.global.Tree =&gt; Boolean)Boolean">exists</a> <span class="delimiter">(</span><a href="#1104812" title="TreeCheckers.this.global.Tree">_</a>.<a href="../../../reflect/internal/Trees.scala.html#408577" title="=&gt; TreeCheckers.this.global.Symbol">symbol</a>.<a href="../../../reflect/internal/Symbols.scala.html#411315" title="=&gt; TreeCheckers.this.global.Symbol">owner</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="#1104677" title="TreeCheckers.this.global.Symbol">sym</a>.<a href="../../../reflect/internal/Symbols.scala.html#411315" title="=&gt; TreeCheckers.this.global.Symbol">owner</a>.<a href="../../../reflect/internal/Symbols.scala.html#411433" title="=&gt; TreeCheckers.this.global.Symbol">implClass</a><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">{</span>
          <a href="#623675" title="(msg: Any)Unit">errorFn</a><span class="delimiter">(</span><span title="String(&quot;Noticed &quot;)" class="string">&quot;Noticed &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#623667" title="(s: TreeCheckers.this.global.Symbol)String">ownerstr</a><span class="delimiter">(</span><a href="#1104677" title="TreeCheckers.this.global.Symbol">sym</a><span class="delimiter">)</span> <span title="(x$1: Any)String">+</span> <span title="String(&quot; moving to implementation class.&quot;)" class="string">&quot; moving to implementation class.&quot;</span><span class="delimiter">)</span>
        <span class="delimiter">}</span>
        <span class="keyword">else</span> <span class="delimiter">{</span>
          <span class="keyword">val</span> <a title="List[String]" id="1104828">s1</a> = <span class="delimiter">(</span><a href="#1104777" title="List[TreeCheckers.this.global.Tree]">prevTrees</a> <a href="../../../collection/TraversableLike.scala.html#58063" title="(f: TreeCheckers.this.global.Tree =&gt; String)(implicit bf: scala.collection.generic.CanBuildFrom[List[TreeCheckers.this.global.Tree],String,List[String]])List[String]">map</a> <a href="#623668" title="(t: TreeCheckers.this.global.Tree)String">wholetreestr</a><span class="delimiter">)</span>.<a href="../../../collection/SeqLike.scala.html#58872" title="(implicit ord: scala.math.Ordering[String])List[String]">sorted</a>.<a href="../../../collection/SeqLike.scala.html#58839" title="=&gt; List[String]">distinct</a>
          <span class="keyword">val</span> <a title="String" id="1104829">s2</a> = <a href="#623668" title="(t: TreeCheckers.this.global.Tree)String">wholetreestr</a><span class="delimiter">(</span><a href="#1104678" title="TreeCheckers.this.global.Tree">tree</a><span class="delimiter">)</span>
          <span title="Any" class="keyword">if</span> <span class="delimiter">(</span><a href="#1104828" title="List[String]">s1</a> <a href="../../../collection/LinearSeqOptimized.scala.html#86380" title="(elem: Any)Boolean">contains</a> <a href="#1104829" title="String">s2</a><span class="delimiter">)</span> <span title="Unit" class="delimiter">(</span><span class="delimiter">)</span>
          <span class="keyword">else</span> <a href="#1104573" title="=&gt; scala.collection.mutable.ListBuffer[String]">movedMsgs</a> <a href="../../../collection/mutable/ListBuffer.scala.html#79765" title="(x: String)scala.tools.nsc.typechecker.TreeCheckers.SymbolTracker.movedMsgs.type">+=</a> <span class="delimiter">(</span><a href="../../../Predef.scala.html#7604" title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps" class="string">&quot;\n** %s moved:\n** Previously:\n%s\n** Currently:\n%s&quot;</a>.<a href="../../../collection/immutable/StringLike.scala.html#59882" title="(args: Any*)String">format</a><span class="delimiter">(</span><a href="#623667" title="(s: TreeCheckers.this.global.Symbol)String">ownerstr</a><span class="delimiter">(</span><a href="#1104677" title="TreeCheckers.this.global.Symbol">sym</a><span class="delimiter">)</span>, <a href="#1104828" title="List[String]">s1</a> <a href="../../../collection/TraversableOnce.scala.html#58283" title="(sep: String)String">mkString</a> <span title="String(&quot;, &quot;)" class="string">&quot;, &quot;</span>, <a href="#1104829" title="String">s2</a><span class="delimiter">)</span><span class="delimiter">)</span>
        <span class="delimiter">}</span>
      <span class="delimiter">}</span>
      <span class="keyword">else</span> <a href="#1104571" title="=&gt; scala.collection.mutable.HashSet[TreeCheckers.this.global.Symbol]">newSyms</a> <a href="../../../collection/mutable/HashSet.scala.html#125963" title="(elem: TreeCheckers.this.global.Symbol)scala.tools.nsc.typechecker.TreeCheckers.SymbolTracker.newSyms.type">+=</a> <a href="#1104677" title="TreeCheckers.this.global.Symbol">sym</a>
    <span class="delimiter">}</span>
    <span class="keyword">def</span> <a title="()Unit" id="1104578">reportChanges</a><span class="delimiter">(</span><span class="delimiter">)</span>: <a href="../../../Unit.scala.html#1515" title="Unit">Unit</a> = <span class="delimiter">{</span>
      // new symbols
      <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#1104571" title="=&gt; scala.collection.mutable.HashSet[TreeCheckers.this.global.Symbol]">newSyms</a>.<a href="../../../collection/TraversableOnce.scala.html#58191" title="=&gt; Boolean">nonEmpty</a><span class="delimiter">)</span> <span class="delimiter">{</span>
        <a href="#623677" title="(msg: Any)Unit">informFn</a><span class="delimiter">(</span><a href="#1104571" title="=&gt; scala.collection.mutable.HashSet[TreeCheckers.this.global.Symbol]">newSyms</a>.<a href="../../../collection/mutable/HashSet.scala.html#125961" title="=&gt; Int">size</a> <a href="../../../Int.scala.html#57087" title="(x: String)String">+</a> <span title="String(&quot; new symbols.&quot;)" class="string">&quot; new symbols.&quot;</span><span class="delimiter">)</span>
        <span class="keyword">val</span> <a title="String" id="1104961">toPrint</a> = <span title="String" class="keyword">if</span> <span class="delimiter">(</span><a href="../Global.scala.html#537448" title="=&gt; scala.tools.nsc.Settings">settings</a>.<a href="../settings/ScalaSettings.scala.html#540057" title="=&gt; scala.tools.nsc.Settings#BooleanSetting">debug</a>.<a href="../settings/MutableSettings.scala.html#541066" title="=&gt; Boolean">value</a><span class="delimiter">)</span> <a href="#1104575" title="=&gt; List[TreeCheckers.this.global.Symbol]">sortedNewSyms</a> <a href="../../../collection/TraversableOnce.scala.html#58283" title="(sep: String)String">mkString</a> <span title="String(&quot; &quot;)" class="string">&quot; &quot;</span> <span class="keyword">else</span> <span title="String(&quot;&quot;)" class="string">&quot;&quot;</span>

        <a href="#1104571" title="=&gt; scala.collection.mutable.HashSet[TreeCheckers.this.global.Symbol]">newSyms</a>.<a href="../../../collection/mutable/HashSet.scala.html#125968" title="()Unit">clear</a><span class="delimiter">(</span><span class="delimiter">)</span>
        <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#1104961" title="String">toPrint</a> <span title="(x$1: AnyRef)Boolean">!=</span> <span title="String(&quot;&quot;)" class="string">&quot;&quot;</span><span class="delimiter">)</span>
          <a href="#623677" title="(msg: Any)Unit">informFn</a><span class="delimiter">(</span><a href="#1104961" title="String">toPrint</a><span class="delimiter">)</span>
      <span class="delimiter">}</span>

      // moved symbols
      <a href="#1104573" title="=&gt; scala.collection.mutable.ListBuffer[String]">movedMsgs</a> <a href="../../../collection/generic/TraversableForwarder.scala.html#79857" title="(f: String =&gt; Unit)Unit">foreach</a> <a href="#623675" title="(msg: Any)Unit">errorFn</a>
      <a href="#1104573" title="=&gt; scala.collection.mutable.ListBuffer[String]">movedMsgs</a>.<a href="../../../collection/mutable/ListBuffer.scala.html#79768" title="()Unit">clear</a><span class="delimiter">(</span><span class="delimiter">)</span>

      // duplicate defs
      <span class="keyword">for</span> <span class="delimiter">(</span><span class="delimiter">(</span><a href="../../../Tuple2.scala.html#60635" title="TreeCheckers.this.global.Symbol" id="1105026">sym</a>, <a href="../../../Tuple2.scala.html#60637" title="List[TreeCheckers.this.global.DefTree]" id="1105027">defs</a><span class="delimiter">)</span> &lt;- <a href="../../../collection/generic/FilterMonadic.scala.html#58171" title="(f: ((TreeCheckers.this.global.Symbol, List[TreeCheckers.this.global.DefTree])) =&gt; Unit)Unit">defSyms</a> ; <span class="keyword">if</span> <a href="#1105027" title="List[TreeCheckers.this.global.DefTree]">defs</a>.<a href="../../../collection/SeqLike.scala.html#58788" title="=&gt; Int">size</a> <a href="#3372120" title="(x: Boolean)Boolean">&gt;</a> <span title="Int(1)" class="int">1</span><span class="delimiter">)</span> <span class="delimiter">{</span>
        <a href="#623675" title="(msg: Any)Unit">errorFn</a><a href="#3372126" title="(x: Unit)Unit" class="delimiter">(</a><a href="../../../Predef.scala.html#7604" title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps" class="string">&quot;%s DefTrees with symbol '%s': %s&quot;</a>.<a href="../../../collection/immutable/StringLike.scala.html#59882" title="(args: Any*)String">format</a><span class="delimiter">(</span><a href="#1105027" title="List[TreeCheckers.this.global.DefTree]">defs</a>.<a href="../../../collection/SeqLike.scala.html#58788" title="=&gt; Int">size</a>, <a href="#623667" title="(s: TreeCheckers.this.global.Symbol)String">ownerstr</a><span class="delimiter">(</span><a href="#1105026" title="TreeCheckers.this.global.Symbol">sym</a><span class="delimiter">)</span>, <a href="#1105027" title="List[TreeCheckers.this.global.DefTree]">defs</a> <a href="../../../collection/TraversableLike.scala.html#58063" title="(f: TreeCheckers.this.global.DefTree =&gt; String)(implicit bf: scala.collection.generic.CanBuildFrom[List[TreeCheckers.this.global.DefTree],String,List[String]])List[String]">map</a> <a href="#623669" title="(t: TreeCheckers.this.global.Tree)String">beststr</a> <a href="../../../collection/TraversableOnce.scala.html#58283" title="(sep: String)String">mkString</a> <span title="String(&quot;, &quot;)" class="string">&quot;, &quot;</span><span class="delimiter">)</span><span class="delimiter">)</span>
      <span class="delimiter">}</span>
      <a href="#1104569" title="=&gt; scala.collection.mutable.HashMap[TreeCheckers.this.global.Symbol,List[TreeCheckers.this.global.DefTree]]">defSyms</a>.<a href="../../../collection/mutable/HashMap.scala.html#88240" title="()Unit">clear</a><span class="delimiter">(</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>

    <span class="keyword">def</span> <a title="(ph: scala.tools.nsc.Phase, unit: TreeCheckers.this.global.CompilationUnit)Unit" id="1104579">check</a><span class="delimiter">(</span><a title="scala.tools.nsc.Phase" id="1105084">ph</a>: <a href="../../../reflect/internal/Phase.scala.html#19756" title="scala.tools.nsc.Phase">Phase</a>, <a title="TreeCheckers.this.global.CompilationUnit" id="1105085">unit</a>: <a href="../CompilationUnits.scala.html#537766" title="TreeCheckers.this.global.CompilationUnit">CompilationUnit</a><span class="delimiter">)</span>: <a href="../../../Unit.scala.html#1515" title="Unit">Unit</a> = <span class="delimiter">{</span>
      <span title="Any" class="keyword">if</span> <span class="delimiter">(</span><a href="#1104565" title="=&gt; scala.collection.mutable.ListBuffer[(scala.reflect.internal.Phase, scala.collection.mutable.HashMap[TreeCheckers.this.global.Symbol,List[TreeCheckers.this.global.Tree]])]">maps</a>.<a href="../../../collection/generic/TraversableForwarder.scala.html#79860" title="=&gt; Boolean">isEmpty</a> <a href="../../../Boolean.scala.html#57825" title="(x: Boolean)Boolean">||</a> <a href="#1104565" title="=&gt; scala.collection.mutable.ListBuffer[(scala.reflect.internal.Phase, scala.collection.mutable.HashMap[TreeCheckers.this.global.Symbol,List[TreeCheckers.this.global.Tree]])]">maps</a>.<a href="../../../collection/generic/TraversableForwarder.scala.html#79906" title="=&gt; (scala.reflect.internal.Phase, scala.collection.mutable.HashMap[TreeCheckers.this.global.Symbol,List[TreeCheckers.this.global.Tree]])">last</a>.<a href="../../../Tuple2.scala.html#60635" title="=&gt; scala.reflect.internal.Phase">_1</a> <span title="(x$1: AnyRef)Boolean">!=</span> <a href="#1105084" title="scala.tools.nsc.Phase">ph</a><span class="delimiter">)</span>
        <a href="#1104565" title="=&gt; scala.collection.mutable.ListBuffer[(scala.reflect.internal.Phase, scala.collection.mutable.HashMap[TreeCheckers.this.global.Symbol,List[TreeCheckers.this.global.Tree]])]">maps</a> <a href="../../../collection/mutable/ListBuffer.scala.html#79765" title="(x: (scala.reflect.internal.Phase, scala.collection.mutable.HashMap[TreeCheckers.this.global.Symbol,List[TreeCheckers.this.global.Tree]]))scala.tools.nsc.typechecker.TreeCheckers.SymbolTracker.maps.type">+=</a> <span class="delimiter">(</span><a href="../../../Tuple2.scala.html#62849" title="(_1: scala.tools.nsc.Phase, _2: scala.collection.mutable.HashMap[TreeCheckers.this.global.Symbol,List[TreeCheckers.this.global.Tree]])(scala.tools.nsc.Phase, scala.collection.mutable.HashMap[TreeCheckers.this.global.Symbol,List[TreeCheckers.this.global.Tree]])" class="delimiter">(</a><a href="#1105084" title="scala.tools.nsc.Phase">ph</a>, <a href="../../../collection/mutable/HashMap.scala.html#88242" title="()scala.collection.mutable.HashMap[TreeCheckers.this.global.Symbol,List[TreeCheckers.this.global.Tree]]" class="keyword">new</a> <a href="#1104564" title="scala.collection.mutable.HashMap[TreeCheckers.this.global.Symbol,List[TreeCheckers.this.global.Tree]]">PhaseMap</a><span class="delimiter">)</span><span class="delimiter">)</span>

      <a href="#1104580" title="(tree: TreeCheckers.this.global.Tree)Unit">traverse</a><span class="delimiter">(</span><a href="#1105085" title="TreeCheckers.this.global.CompilationUnit">unit</a>.<a href="../CompilationUnits.scala.html#539278" title="=&gt; TreeCheckers.this.global.Tree">body</a><span class="delimiter">)</span>
      <a href="#1104578" title="()Unit">reportChanges</a><span class="delimiter">(</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>
    <span class="keyword">override</span> <span class="keyword">def</span> <a title="(tree: TreeCheckers.this.global.Tree)Unit" id="1104580">traverse</a><span class="delimiter">(</span><a title="TreeCheckers.this.global.Tree" id="1105120">tree</a>: <a href="../../../reflect/internal/Trees.scala.html#407938" title="TreeCheckers.this.global.Tree">Tree</a><span class="delimiter">)</span>: <a href="../../../Unit.scala.html#1515" title="Unit">Unit</a> = <span class="delimiter">{</span>
      <span class="keyword">val</span> <a title="TreeCheckers.this.global.Symbol" id="1105122">sym</a>    = <a href="#1105120" title="TreeCheckers.this.global.Tree">tree</a>.<a href="../../../reflect/internal/Trees.scala.html#408577" title="=&gt; TreeCheckers.this.global.Symbol">symbol</a>
      <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#1105122" title="TreeCheckers.this.global.Symbol">sym</a> <span title="(x$1: AnyRef)Boolean">!=</span> <span title="Null(null)" class="keyword">null</span> <a href="../../../Boolean.scala.html#57826" title="(x: Boolean)Boolean">&amp;&amp;</a> <a href="#1105122" title="TreeCheckers.this.global.Symbol">sym</a> <span title="(x$1: AnyRef)Boolean">!=</span> <a href="../../../reflect/internal/Symbols.scala.html#407184" title="=&gt; TreeCheckers.this.global.NoSymbol">NoSymbol</a><span class="delimiter">)</span> <span class="delimiter">{</span>
        <a href="#1104577" title="(sym: TreeCheckers.this.global.Symbol, tree: TreeCheckers.this.global.Tree)Any">record</a><span class="delimiter">(</span><a href="#1105122" title="TreeCheckers.this.global.Symbol">sym</a>, <a href="#1105120" title="TreeCheckers.this.global.Tree">tree</a><span class="delimiter">)</span>
        <a href="#1105120" title="TreeCheckers.this.global.Tree">tree</a> <span class="keyword">match</span> <span class="delimiter">{</span>
          <span class="keyword">case</span> <a href="#3372130" title="Unit" id="3372132">x</a>: DefTree =&gt;
            <a href="#3372134" title="(x: Unit)Unit" class="keyword">if</a> <span class="delimiter">(</span><a href="#1104569" title="=&gt; scala.collection.mutable.HashMap[TreeCheckers.this.global.Symbol,List[TreeCheckers.this.global.DefTree]]">defSyms</a> <a href="../../../collection/mutable/HashMap.scala.html#88244" title="(key: TreeCheckers.this.global.Symbol)Boolean">contains</a> <a href="#1105122" title="TreeCheckers.this.global.Symbol">sym</a><span class="delimiter">)</span> <a href="../../../collection/mutable/HashMap.scala.html#88248" title="(key: TreeCheckers.this.global.Symbol, value: List[TreeCheckers.this.global.DefTree])Unit">defSyms</a><span class="delimiter">(</span><a href="#1105122" title="TreeCheckers.this.global.Symbol">sym</a><span class="delimiter">)</span> = <a href="../../../collection/mutable/HashMap.scala.html#88245" title="(key: TreeCheckers.this.global.Symbol)List[TreeCheckers.this.global.DefTree]">defSyms</a><span class="delimiter">(</span><a href="#1105122" title="TreeCheckers.this.global.Symbol">sym</a><span class="delimiter">)</span> <a href="../../../collection/SeqLike.scala.html#58855" title="(elem: TreeCheckers.this.global.DefTree)(implicit bf: scala.collection.generic.CanBuildFrom[List[TreeCheckers.this.global.DefTree],TreeCheckers.this.global.DefTree,List[TreeCheckers.this.global.DefTree]])List[TreeCheckers.this.global.DefTree]">:+</a> x
            <span class="keyword">else</span> <a href="../../../collection/mutable/HashMap.scala.html#88248" title="(key: TreeCheckers.this.global.Symbol, value: List[TreeCheckers.this.global.DefTree])Unit">defSyms</a><span class="delimiter">(</span><a href="#1105122" title="TreeCheckers.this.global.Symbol">sym</a><span class="delimiter">)</span> = <a href="../../../collection/immutable/List.scala.html#62451" title="(xs: TreeCheckers.this.global.DefTree*)List[TreeCheckers.this.global.DefTree]">List</a><span class="delimiter">(</span>x<span class="delimiter">)</span>
          <span class="keyword">case</span> _ =&gt; <a href="#3372134" title="(x: Unit)Unit" class="delimiter">(</a><span class="delimiter">)</span>
        <span class="delimiter">}</span>
      <span class="delimiter">}</span>

      <span class="keyword">super</span>.<a href="../../../reflect/api/Trees.scala.html#405544" title="(tree: TreeCheckers.this.global.Tree)Unit">traverse</a><span class="delimiter">(</span><a href="#1105120" title="TreeCheckers.this.global.Tree">tree</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="scala.collection.mutable.HashMap[TreeCheckers.this.global.Tree,TreeCheckers.this.global.Type]" id="623673">tpeOfTree</a> = mutable.<a href="../../../collection/generic/GenMapFactory.scala.html#60744" title="[A, B](elems: (A, B)*)scala.collection.mutable.HashMap[A,B]">HashMap</a><span title="(elems: (TreeCheckers.this.global.Tree, TreeCheckers.this.global.Type)*)scala.collection.mutable.HashMap[TreeCheckers.this.global.Tree,TreeCheckers.this.global.Type]" class="delimiter">[</span><a href="../../../reflect/internal/Trees.scala.html#407938" title="TreeCheckers.this.global.Tree">Tree</a>, <a href="../../../reflect/internal/Types.scala.html#407270" title="TreeCheckers.this.global.Type">Type</a><span class="delimiter">]</span><span class="delimiter">(</span><span class="delimiter">)</span>

  <span class="keyword">def</span> <a title="(p: TreeCheckers.this.global.Position)String" id="623674">posstr</a><span class="delimiter">(</span><a title="TreeCheckers.this.global.Position" id="1105224">p</a>: <a href="../../../reflect/internal/util/Position.scala.html#22953" title="TreeCheckers.this.global.Position">Position</a><span class="delimiter">)</span> =
    <span class="keyword">try</span> <a href="#1105224" title="TreeCheckers.this.global.Position">p</a>.<a href="../../../reflect/internal/util/Position.scala.html#409665" title="=&gt; scala.reflect.internal.util.SourceFile">source</a>.<a href="../../../reflect/internal/util/SourceFile.scala.html#403765" title="=&gt; String">path</a> <span title="(x$1: Any)String">+</span> <span title="String(&quot;:&quot;)" class="string">&quot;:&quot;</span> <span title="(x$1: Any)String">+</span> <a href="#1105224" title="TreeCheckers.this.global.Position">p</a>.<a href="../../../reflect/internal/util/Position.scala.html#409692" title="=&gt; Int">line</a>
    <span class="keyword">catch</span> <span class="delimiter">{</span> <span class="keyword">case</span> <span title="String">_</span>: <span title="UnsupportedOperationException">UnsupportedOperationException</span> =&gt; <a href="#1105224" title="TreeCheckers.this.global.Position">p</a>.<span title="()String">toString</span> <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="(msg: Any)Unit" id="623675">errorFn</a><span class="delimiter">(</span><a title="Any" id="1104826">msg</a>: <span title="Any">Any</span><span class="delimiter">)</span>: <a href="../../../Unit.scala.html#1515" title="Unit">Unit</a>                = <a href="../../../Predef.scala.html#7514" title="(x: Any)Unit">println</a><span class="delimiter">(</span><a href="../../../Predef.scala.html#7604" title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps" class="string">&quot;[check: %s] %s&quot;</a>.<a href="../../../collection/immutable/StringLike.scala.html#59882" title="(args: Any*)String">format</a><span class="delimiter">(</span><a href="../../../reflect/internal/SymbolTable.scala.html#406659" title="=&gt; scala.reflect.internal.Phase">phase</a>.<a href="../../../reflect/internal/Phase.scala.html#419691" title="=&gt; scala.reflect.internal.Phase">prev</a>, <a href="#1104826" title="Any">msg</a><span class="delimiter">)</span><span class="delimiter">)</span>
  <span class="keyword">def</span> <a title="(pos: TreeCheckers.this.global.Position, msg: Any)Unit" id="623676">errorFn</a><span class="delimiter">(</span><a title="TreeCheckers.this.global.Position" id="1104823">pos</a>: <a href="../../../reflect/internal/util/Position.scala.html#22953" title="TreeCheckers.this.global.Position">Position</a>, <a title="Any" id="1104824">msg</a>: <span title="Any">Any</span><span class="delimiter">)</span>: <a href="../../../Unit.scala.html#1515" title="Unit">Unit</a> = <a href="#623675" title="(msg: Any)Unit">errorFn</a><span class="delimiter">(</span><a href="#623674" title="(p: TreeCheckers.this.global.Position)String">posstr</a><span class="delimiter">(</span><a href="#1104823" title="TreeCheckers.this.global.Position">pos</a><span class="delimiter">)</span> <span title="(x$1: Any)String">+</span> <span title="String(&quot;: &quot;)" class="string">&quot;: &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#1104824" title="Any">msg</a><span class="delimiter">)</span>
  <span class="keyword">def</span> <a title="(msg: Any)Unit" id="623677">informFn</a><span class="delimiter">(</span><a title="Any" id="1104962">msg</a>: <span title="Any">Any</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="../Global.scala.html#537448" title="=&gt; scala.tools.nsc.Settings">settings</a>.<a href="../settings/StandardScalaSettings.scala.html#540228" title="=&gt; scala.tools.nsc.Settings#BooleanSetting">verbose</a>.<a href="../settings/MutableSettings.scala.html#541066" title="=&gt; Boolean">value</a> <a href="../../../Boolean.scala.html#57825" title="(x: Boolean)Boolean">||</a> <a href="../Global.scala.html#537448" title="=&gt; scala.tools.nsc.Settings">settings</a>.<a href="../settings/ScalaSettings.scala.html#540057" title="=&gt; scala.tools.nsc.Settings#BooleanSetting">debug</a>.<a href="../settings/MutableSettings.scala.html#541066" title="=&gt; Boolean">value</a><span class="delimiter">)</span>
      <a href="../../../Predef.scala.html#7514" title="(x: Any)Unit">println</a><span class="delimiter">(</span><a href="../../../Predef.scala.html#7604" title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps" class="string">&quot;[check: %s] %s&quot;</a>.<a href="../../../collection/immutable/StringLike.scala.html#59882" title="(args: Any*)String">format</a><span class="delimiter">(</span><a href="../../../reflect/internal/SymbolTable.scala.html#406659" title="=&gt; scala.reflect.internal.Phase">phase</a>.<a href="../../../reflect/internal/Phase.scala.html#419691" title="=&gt; scala.reflect.internal.Phase">prev</a>, <a href="#1104962" title="Any">msg</a><span class="delimiter">)</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="(cond: Boolean, msg: =&gt; Any)Unit" id="623678">assertFn</a><span class="delimiter">(</span><a title="Boolean" id="1105249">cond</a>: <a href="../../../Boolean.scala.html#1425" title="Boolean">Boolean</a>, <a title="=&gt; Any" id="1105250">msg</a>: =&gt; Any<span class="delimiter">)</span> =
    <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="../../../Boolean.scala.html#57822" title="=&gt; Boolean">!</a><a href="#1105249" title="Boolean">cond</a><span class="delimiter">)</span> <a href="#623675" title="(msg: Any)Unit">errorFn</a><span class="delimiter">(</span><a href="#1105250" title="=&gt; Any">msg</a><span class="delimiter">)</span>

  <span class="keyword">private</span> <span class="keyword">def</span> <a title="[T](msg: =&gt; Any)(body: =&gt; Unit)Unit" id="623679">wrap</a><span class="delimiter">[</span><a title="" id="623681">T</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="=&gt; Any" id="1105257">msg</a>: =&gt; Any<span class="delimiter">)</span><span class="delimiter">(</span><a title="=&gt; Unit" id="1105258">body</a>: =&gt; Unit<span class="delimiter">)</span> <span class="delimiter">{</span>
    <span class="keyword">try</span> <a href="#1105258" title="=&gt; Unit">body</a>
    <span class="keyword">catch</span> <span class="delimiter">{</span> <span class="keyword">case</span> <a title="Unit" id="1105260">x</a>: <span title="Throwable">Throwable</span> =&gt;
      <a href="../../../Console.scala.html#136" title="Console.type">Console</a>.<a href="../../../Console.scala.html#63314" title="(x: Any)Unit">println</a><span class="delimiter">(</span><span title="String(&quot;Caught &quot;)" class="string">&quot;Caught &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#1105260" title="Throwable">x</a><span class="delimiter">)</span>
      <a href="../../../Console.scala.html#136" title="Console.type">Console</a>.<a href="../../../Console.scala.html#63314" title="(x: Any)Unit">println</a><span class="delimiter">(</span><a href="#1105257" title="=&gt; Any">msg</a><span class="delimiter">)</span>
      <a href="#1105260" title="Throwable">x</a>.<span title="()Unit">printStackTrace</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="()Unit" id="623682">checkTrees</a><span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="../Global.scala.html#537448" title="=&gt; scala.tools.nsc.Settings">settings</a>.<a href="../settings/StandardScalaSettings.scala.html#540228" title="=&gt; scala.tools.nsc.Settings#BooleanSetting">verbose</a>.<a href="../settings/MutableSettings.scala.html#541066" title="=&gt; Boolean">value</a><span class="delimiter">)</span>
      <a href="../../../Console.scala.html#136" title="Console.type">Console</a>.<a href="../../../Console.scala.html#63314" title="(x: Any)Unit">println</a><span class="delimiter">(</span><span title="String(&quot;[consistency check at the beginning of phase &quot;)" class="string">&quot;[consistency check at the beginning of phase &quot;</span> <span title="(x$1: Any)String">+</span> <a href="../../../reflect/internal/SymbolTable.scala.html#406659" title="=&gt; scala.reflect.internal.Phase">phase</a> <span title="(x$1: Any)String">+</span> <span title="String(&quot;]&quot;)" class="string">&quot;]&quot;</span><span class="delimiter">)</span>

    <a href="../Global.scala.html#537672" title="=&gt; TreeCheckers.this.global.Run">currentRun</a>.<a href="../Global.scala.html#539421" title="=&gt; Iterator[TreeCheckers.this.global.CompilationUnit]">units</a> <a href="../../../collection/Iterator.scala.html#66797" title="(f: TreeCheckers.this.global.CompilationUnit =&gt; Unit)Unit">foreach</a> <span class="delimiter">(</span><a title="TreeCheckers.this.global.CompilationUnit" id="1105284">x</a> =&gt; <a href="#623679" title="(msg: =&gt; Any)(body: =&gt; Unit)Unit">wrap</a><span class="delimiter">(</span><a href="#1105284" title="TreeCheckers.this.global.CompilationUnit">x</a><span class="delimiter">)</span><span class="delimiter">(</span><a href="#623689" title="(unit: TreeCheckers.this.global.CompilationUnit)Unit">check</a><span class="delimiter">(</span><a href="#1105284" title="TreeCheckers.this.global.CompilationUnit">x</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="[T](body: =&gt; T)T" id="623683">printingTypings</a><span class="delimiter">[</span><a title="" id="623685">T</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="=&gt; T" id="1105289">body</a>: =&gt; T<span class="delimiter">)</span>: <a href="#623685" title="T">T</a> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="Boolean" id="1105292">saved</a> = <a href="Analyzer.scala.html#537962" title="=&gt; scala.tools.nsc.Global">global</a>.<a href="../Global.scala.html#537542" title="=&gt; Boolean">printTypings</a>
    <a href="Analyzer.scala.html#537962" title="=&gt; scala.tools.nsc.Global">global</a>.<a href="../Global.scala.html#537543" title="(x$1: Boolean)Unit">printTypings</a> = <span title="Boolean(true)" class="keyword">true</span>
    <span class="keyword">val</span> <a title="T" id="1105293">result</a> = <a href="#1105289" title="=&gt; T">body</a>
    <a href="Analyzer.scala.html#537962" title="=&gt; scala.tools.nsc.Global">global</a>.<a href="../Global.scala.html#537543" title="(x$1: Boolean)Unit">printTypings</a> = <a href="#1105292" title="Boolean">saved</a>
    <a href="#1105293" title="T">result</a>
  <span class="delimiter">}</span>
  <span class="keyword">def</span> <a title="[T](unit: TreeCheckers.this.global.CompilationUnit)(body: =&gt; Unit)Unit" id="623686">runWithUnit</a><span class="delimiter">[</span><a title="" id="623688">T</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="TreeCheckers.this.global.CompilationUnit" id="1105294">unit</a>: <a href="../CompilationUnits.scala.html#537766" title="TreeCheckers.this.global.CompilationUnit">CompilationUnit</a><span class="delimiter">)</span><span class="delimiter">(</span><a title="=&gt; Unit" id="1105295">body</a>: =&gt; Unit<span class="delimiter">)</span>: <a href="../../../Unit.scala.html#1515" title="Unit">Unit</a> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="TreeCheckers.this.global.CompilationUnit" id="1105297">unit0</a> = <a href="../Global.scala.html#537673" title="=&gt; TreeCheckers.this.global.CompilationUnit">currentUnit</a>
    <a href="../Global.scala.html#537672" title="=&gt; TreeCheckers.this.global.Run">currentRun</a>.<a href="../Global.scala.html#539316" title="(x$1: TreeCheckers.this.global.CompilationUnit)Unit">currentUnit</a> = <a href="#1105294" title="TreeCheckers.this.global.CompilationUnit">unit</a>
    <a href="#1105295" title="=&gt; Unit">body</a>
    <a href="../Global.scala.html#537672" title="=&gt; TreeCheckers.this.global.Run">currentRun</a>.<a href="../Global.scala.html#539368" title="()Unit">advanceUnit</a>
    <a href="#623678" title="(cond: Boolean, msg: =&gt; Any)Unit">assertFn</a><span class="delimiter">(</span><a href="../Global.scala.html#537673" title="=&gt; TreeCheckers.this.global.CompilationUnit">currentUnit</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="#1105294" title="TreeCheckers.this.global.CompilationUnit">unit</a>, <span title="String(&quot;currentUnit is &quot;)" class="string">&quot;currentUnit is &quot;</span> <span title="(x$1: Any)String">+</span> <a href="../Global.scala.html#537673" title="=&gt; TreeCheckers.this.global.CompilationUnit">currentUnit</a> <span title="(x$1: Any)String">+</span> <span title="String(&quot;, but unit is &quot;)" class="string">&quot;, but unit is &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#1105294" title="TreeCheckers.this.global.CompilationUnit">unit</a><span class="delimiter">)</span>
    <a href="../Global.scala.html#537672" title="=&gt; TreeCheckers.this.global.Run">currentRun</a>.<a href="../Global.scala.html#539316" title="(x$1: TreeCheckers.this.global.CompilationUnit)Unit">currentUnit</a> = <a href="#1105297" title="TreeCheckers.this.global.CompilationUnit">unit0</a>
  <span class="delimiter">}</span>
  <span class="keyword">def</span> <a title="(unit: TreeCheckers.this.global.CompilationUnit)Unit" id="623689">check</a><span class="delimiter">(</span><a title="TreeCheckers.this.global.CompilationUnit" id="1105286">unit</a>: <a href="../CompilationUnits.scala.html#537766" title="TreeCheckers.this.global.CompilationUnit">CompilationUnit</a><span class="delimiter">)</span> <span class="delimiter">{</span>
    <a href="../Global.scala.html#537506" title="(msg: String)Unit">informProgress</a><span class="delimiter">(</span><span title="String(&quot;checking &quot;)" class="string">&quot;checking &quot;</span><span title="(x$1: Any)String">+</span><a href="#1105286" title="TreeCheckers.this.global.CompilationUnit">unit</a><span class="delimiter">)</span>
    <span class="keyword">val</span> <a title="TreeCheckers.this.Context" id="1105306">context</a> = <a href="Contexts.scala.html#537987" title="(unit: TreeCheckers.this.global.CompilationUnit)TreeCheckers.this.Context">rootContext</a><span class="delimiter">(</span><a href="#1105286" title="TreeCheckers.this.global.CompilationUnit">unit</a><span class="delimiter">)</span>
    <a href="#1105306" title="TreeCheckers.this.Context">context</a>.<a href="Contexts.scala.html#538810" title="(x$1: Boolean)Unit">checking</a> = <span title="Boolean(true)" class="keyword">true</span>
    <a href="#623672" title="=&gt; scala.collection.mutable.HashMap[TreeCheckers.this.global.Tree,TreeCheckers.this.global.Type]">tpeOfTree</a>.<a href="../../../collection/mutable/HashMap.scala.html#88240" title="()Unit">clear</a>
    <a href="#623670" title="TreeCheckers.this.SymbolTracker.type">SymbolTracker</a>.<a href="#1104579" title="(ph: scala.tools.nsc.Phase, unit: TreeCheckers.this.global.CompilationUnit)Unit">check</a><span class="delimiter">(</span><a href="../../../reflect/internal/SymbolTable.scala.html#406659" title="=&gt; scala.reflect.internal.Phase">phase</a>, <a href="#1105286" title="TreeCheckers.this.global.CompilationUnit">unit</a><span class="delimiter">)</span>
    <span class="keyword">val</span> <a title="TreeCheckers.this.TreeChecker" id="1105307">checker</a> = <span title="TreeCheckers.this.TreeChecker" class="keyword">new</span> <a href="#623691" title="TreeCheckers.this.TreeChecker">TreeChecker</a><span class="delimiter">(</span><a href="#1105306" title="TreeCheckers.this.Context">context</a><span class="delimiter">)</span>
    <a href="#623686" title="(unit: TreeCheckers.this.global.CompilationUnit)(body: =&gt; Unit)Unit">runWithUnit</a><span class="delimiter">(</span><a href="#1105286" title="TreeCheckers.this.global.CompilationUnit">unit</a><span class="delimiter">)</span> <span class="delimiter">{</span>
      <a href="#1105307" title="TreeCheckers.this.TreeChecker">checker</a>.<a href="#1105329" title="checker.precheck.type">precheck</a>.<a href="#1105336" title="(tree: TreeCheckers.this.global.Tree)Unit">traverse</a><span class="delimiter">(</span><a href="#1105286" title="TreeCheckers.this.global.CompilationUnit">unit</a>.<a href="../CompilationUnits.scala.html#539278" title="=&gt; TreeCheckers.this.global.Tree">body</a><span class="delimiter">)</span>
      <a href="#1105307" title="TreeCheckers.this.TreeChecker">checker</a>.<a href="Typers.scala.html#538701" title="(tree: TreeCheckers.this.global.Tree)TreeCheckers.this.global.Tree">typed</a><span class="delimiter">(</span><a href="#1105286" title="TreeCheckers.this.global.CompilationUnit">unit</a>.<a href="../CompilationUnits.scala.html#539278" title="=&gt; TreeCheckers.this.global.Tree">body</a><span class="delimiter">)</span>
      <a href="#1105307" title="TreeCheckers.this.TreeChecker">checker</a>.<a href="#1105331" title="checker.postcheck.type">postcheck</a>.<a href="#1105359" title="(tree: TreeCheckers.this.global.Tree)Unit">traverse</a><span class="delimiter">(</span><a href="#1105286" title="TreeCheckers.this.global.CompilationUnit">unit</a>.<a href="../CompilationUnits.scala.html#539278" title="=&gt; TreeCheckers.this.global.Tree">body</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="keyword">override</span> <span class="keyword">def</span> <a title="(context: TreeCheckers.this.Context)TreeCheckers.this.Typer" id="623690">newTyper</a><span class="delimiter">(</span><a title="TreeCheckers.this.Context" id="1105363">context</a>: <a href="Contexts.scala.html#537993" title="TreeCheckers.this.Context">Context</a><span class="delimiter">)</span>: <a href="Typers.scala.html#538117" title="TreeCheckers.this.Typer">Typer</a> = <span title="TreeCheckers.this.TreeChecker" class="keyword">new</span> <a href="#623691" title="TreeCheckers.this.TreeChecker">TreeChecker</a><span class="delimiter">(</span><a href="#1105363" title="TreeCheckers.this.Context">context</a><span class="delimiter">)</span>

  <span class="keyword">class</span> <a title="class TreeChecker extends TreeCheckers.this.Typer" id="623691">TreeChecker</a><a href="#623691" title="TreeCheckers.this.TreeChecker" class="delimiter">(</a><a title="TreeCheckers.this.Context" id="1105333">context0</a>: <a href="Contexts.scala.html#537993" title="TreeCheckers.this.Context">Context</a><span class="delimiter">)</span> <span class="keyword">extends</span> <a href="Typers.scala.html#538117" title="TreeCheckers.this.Typer">Typer</a><span class="delimiter">(</span><a href="#1105333" title="TreeCheckers.this.Context">context0</a><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span class="keyword">override</span> <span class="keyword">protected</span> <span class="keyword">def</span> <a title="(templ: TreeCheckers.this.global.Template, clazz: TreeCheckers.this.global.Symbol, context: TreeCheckers.this.Context)TreeCheckers.this.global.Template" id="1105321">finishMethodSynthesis</a><span class="delimiter">(</span><a title="TreeCheckers.this.global.Template" id="1105369">templ</a>: <a href="../../../reflect/internal/Trees.scala.html#407978" title="TreeCheckers.this.global.Template">Template</a>, <a title="TreeCheckers.this.global.Symbol" id="1105370">clazz</a>: <a href="../../../reflect/internal/Symbols.scala.html#407146" title="TreeCheckers.this.global.Symbol">Symbol</a>, <a title="TreeCheckers.this.Context" id="1105371">context</a>: <a href="Contexts.scala.html#537993" title="TreeCheckers.this.Context">Context</a><span class="delimiter">)</span>: <a href="../../../reflect/internal/Trees.scala.html#407978" title="TreeCheckers.this.global.Template">Template</a> = <span class="delimiter">{</span>
      // If we don't intercept this all the synthetics get added at every phase,
      // with predictably unfortunate results.
      <a href="#1105369" title="TreeCheckers.this.global.Template">templ</a>
    <span class="delimiter">}</span>

    // XXX check for tree.original on TypeTrees.
    <span class="keyword">private</span> <span class="keyword">def</span> <a title="(t1: TreeCheckers.this.global.Tree, t2: TreeCheckers.this.global.Tree)Unit" id="1105322">treesDiffer</a><span class="delimiter">(</span><a title="TreeCheckers.this.global.Tree" id="1105379">t1</a>: <a href="../../../reflect/internal/Trees.scala.html#407938" title="TreeCheckers.this.global.Tree">Tree</a>, <a title="TreeCheckers.this.global.Tree" id="1105380">t2</a>: <a href="../../../reflect/internal/Trees.scala.html#407938" title="TreeCheckers.this.global.Tree">Tree</a><span class="delimiter">)</span> =
      <a href="#623676" title="(pos: TreeCheckers.this.global.Position, msg: Any)Unit">errorFn</a><span class="delimiter">(</span><a href="#1105379" title="TreeCheckers.this.global.Tree">t1</a>.<a href="../../../reflect/internal/Trees.scala.html#408571" title="=&gt; TreeCheckers.this.global.Position">pos</a>, <span title="String(&quot;trees differ\n old: &quot;)" class="string">&quot;trees differ\n old: &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#623666" title="(t: TreeCheckers.this.global.Tree)String">treestr</a><span class="delimiter">(</span><a href="#1105379" title="TreeCheckers.this.global.Tree">t1</a><span class="delimiter">)</span> <span title="(x$1: Any)String">+</span> <span title="String(&quot;\n new: &quot;)" class="string">&quot;\n new: &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#623666" title="(t: TreeCheckers.this.global.Tree)String">treestr</a><span class="delimiter">(</span><a href="#1105380" title="TreeCheckers.this.global.Tree">t2</a><span class="delimiter">)</span><span class="delimiter">)</span>
    <span class="keyword">private</span> <span class="keyword">def</span> <a title="(tree: TreeCheckers.this.global.Tree, tp1: TreeCheckers.this.global.Type, tp2: TreeCheckers.this.global.Type)Unit" id="1105323">typesDiffer</a><span class="delimiter">(</span><a title="TreeCheckers.this.global.Tree" id="1105386">tree</a>: <a href="../../../reflect/internal/Trees.scala.html#407938" title="TreeCheckers.this.global.Tree">Tree</a>, <a title="TreeCheckers.this.global.Type" id="1105387">tp1</a>: <a href="../../../reflect/internal/Types.scala.html#407270" title="TreeCheckers.this.global.Type">Type</a>, <a title="TreeCheckers.this.global.Type" id="1105388">tp2</a>: <a href="../../../reflect/internal/Types.scala.html#407270" title="TreeCheckers.this.global.Type">Type</a><span class="delimiter">)</span> =
      <a href="#623676" title="(pos: TreeCheckers.this.global.Position, msg: Any)Unit">errorFn</a><span class="delimiter">(</span><a href="#1105386" title="TreeCheckers.this.global.Tree">tree</a>.<a href="../../../reflect/internal/Trees.scala.html#408571" title="=&gt; TreeCheckers.this.global.Position">pos</a>, <span title="String(&quot;types differ\n old: &quot;)" class="string">&quot;types differ\n old: &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#1105387" title="TreeCheckers.this.global.Type">tp1</a> <span title="(x$1: Any)String">+</span> <span title="String(&quot;\n new: &quot;)" class="string">&quot;\n new: &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#1105388" title="TreeCheckers.this.global.Type">tp2</a> <span title="(x$1: Any)String">+</span> <span title="String(&quot;\n tree: &quot;)" class="string">&quot;\n tree: &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#1105386" title="TreeCheckers.this.global.Tree">tree</a><span class="delimiter">)</span>
    <span class="keyword">private</span> <span class="keyword">def</span> <a title="(tree: TreeCheckers.this.global.Tree, shouldBe: TreeCheckers.this.global.Symbol)Unit" id="1105324">ownersDiffer</a><span class="delimiter">(</span><a title="TreeCheckers.this.global.Tree" id="1105394">tree</a>: <a href="../../../reflect/internal/Trees.scala.html#407938" title="TreeCheckers.this.global.Tree">Tree</a>, <a title="TreeCheckers.this.global.Symbol" id="1105395">shouldBe</a>: <a href="../../../reflect/internal/Symbols.scala.html#407146" title="TreeCheckers.this.global.Symbol">Symbol</a><span class="delimiter">)</span> = <span class="delimiter">{</span>
      <span class="keyword">val</span> <a title="TreeCheckers.this.global.Symbol" id="1105396">sym</a> = <a href="#1105394" title="TreeCheckers.this.global.Tree">tree</a>.<a href="../../../reflect/internal/Trees.scala.html#408577" title="=&gt; TreeCheckers.this.global.Symbol">symbol</a>
      <a href="#623676" title="(pos: TreeCheckers.this.global.Position, msg: Any)Unit">errorFn</a><span class="delimiter">(</span><a href="#1105394" title="TreeCheckers.this.global.Tree">tree</a>.<a href="../../../reflect/internal/Trees.scala.html#408571" title="=&gt; TreeCheckers.this.global.Position">pos</a>, <a href="../../../Predef.scala.html#7605" title="implicit scala.Predef.any2stringadd : (x: Any)scala.runtime.StringAdd">sym</a> <a href="../../../runtime/StringAdd.scala.html#60046" title="(other: String)String">+</a> <span title="String(&quot; has wrong owner: &quot;)" class="string">&quot; has wrong owner: &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#623667" title="(s: TreeCheckers.this.global.Symbol)String">ownerstr</a><span class="delimiter">(</span><a href="#1105396" title="TreeCheckers.this.global.Symbol">sym</a>.<a href="../../../reflect/internal/Symbols.scala.html#411315" title="=&gt; TreeCheckers.this.global.Symbol">owner</a><span class="delimiter">)</span> <span title="(x$1: Any)String">+</span> <span title="String(&quot;, should be: &quot;)" class="string">&quot;, should be: &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#623667" title="(s: TreeCheckers.this.global.Symbol)String">ownerstr</a><span class="delimiter">(</span><a href="#1105395" title="TreeCheckers.this.global.Symbol">shouldBe</a><span class="delimiter">)</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>

    /** XXX Disabled reporting of position errors until there is less noise. */
    <span class="keyword">private</span> <span class="keyword">def</span> <a title="(t: TreeCheckers.this.global.Tree)Unit" id="1105325">noPos</a><span class="delimiter">(</span><a title="TreeCheckers.this.global.Tree" id="1105404">t</a>: <a href="../../../reflect/internal/Trees.scala.html#407938" title="TreeCheckers.this.global.Tree">Tree</a><span class="delimiter">)</span> =
      <span title="Unit" class="delimiter">(</span><span class="delimiter">)</span> // errorFn(&quot;no pos: &quot; + treestr(t))
    <span class="keyword">private</span> <span class="keyword">def</span> <a title="(t: TreeCheckers.this.global.Tree)Unit" id="1105326">noType</a><span class="delimiter">(</span><a title="TreeCheckers.this.global.Tree" id="1105405">t</a>: <a href="../../../reflect/internal/Trees.scala.html#407938" title="TreeCheckers.this.global.Tree">Tree</a><span class="delimiter">)</span> =
      <a href="#623676" title="(pos: TreeCheckers.this.global.Position, msg: Any)Unit">errorFn</a><span class="delimiter">(</span><a href="#1105405" title="TreeCheckers.this.global.Tree">t</a>.<a href="../../../reflect/internal/Trees.scala.html#408571" title="=&gt; TreeCheckers.this.global.Position">pos</a>, <span title="String(&quot;no type: &quot;)" class="string">&quot;no type: &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#623666" title="(t: TreeCheckers.this.global.Tree)String">treestr</a><span class="delimiter">(</span><a href="#1105405" title="TreeCheckers.this.global.Tree">t</a><span class="delimiter">)</span><span class="delimiter">)</span>

    <span class="keyword">private</span> <span class="keyword">def</span> <a title="(t: TreeCheckers.this.global.Tree)Unit" id="1105327">checkSym</a><span class="delimiter">(</span><a title="TreeCheckers.this.global.Tree" id="1105411">t</a>: <a href="../../../reflect/internal/Trees.scala.html#407938" title="TreeCheckers.this.global.Tree">Tree</a><span class="delimiter">)</span> =
      <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#1105411" title="TreeCheckers.this.global.Tree">t</a>.<a href="../../../reflect/internal/Trees.scala.html#408577" title="=&gt; TreeCheckers.this.global.Symbol">symbol</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="../../../reflect/internal/Symbols.scala.html#407184" title="=&gt; TreeCheckers.this.global.NoSymbol">NoSymbol</a><span class="delimiter">)</span>
        <a href="#623676" title="(pos: TreeCheckers.this.global.Position, msg: Any)Unit">errorFn</a><span class="delimiter">(</span><a href="#1105411" title="TreeCheckers.this.global.Tree">t</a>.<a href="../../../reflect/internal/Trees.scala.html#408571" title="=&gt; TreeCheckers.this.global.Position">pos</a>, <span title="String(&quot;no symbol: &quot;)" class="string">&quot;no symbol: &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#623666" title="(t: TreeCheckers.this.global.Tree)String">treestr</a><span class="delimiter">(</span><a href="#1105411" title="TreeCheckers.this.global.Tree">t</a><span class="delimiter">)</span><span class="delimiter">)</span>

    <span class="keyword">override</span> <span class="keyword">def</span> <a title="(tree: TreeCheckers.this.global.Tree, mode: Int, pt: TreeCheckers.this.global.Type)TreeCheckers.this.global.Tree" id="1105328">typed</a><span class="delimiter">(</span><a title="TreeCheckers.this.global.Tree" id="1105340">tree</a>: <a href="../../../reflect/internal/Trees.scala.html#407938" title="TreeCheckers.this.global.Tree">Tree</a>, <a title="Int" id="1105341">mode</a>: <a href="../../../Int.scala.html#321" title="Int">Int</a>, <a title="TreeCheckers.this.global.Type" id="1105342">pt</a>: <a href="../../../reflect/internal/Types.scala.html#407270" title="TreeCheckers.this.global.Type">Type</a><span class="delimiter">)</span>: <a href="../../../reflect/internal/Trees.scala.html#407938" title="TreeCheckers.this.global.Tree">Tree</a> = <a href="../util/package.scala.html#55835" title="(x: TreeCheckers.this.global.Tree)(f: TreeCheckers.this.global.Tree =&gt; Unit)TreeCheckers.this.global.Tree">returning</a><span class="delimiter">(</span><a href="#1105340" title="TreeCheckers.this.global.Tree">tree</a><span class="delimiter">)</span> <a href="#1105430" title="TreeCheckers.this.global.Tree" class="delimiter">{</a>
      <span class="keyword">case</span> <a href="../../../reflect/internal/Trees.scala.html#407946" title="Unit" id="3372153">EmptyTree</a> | TypeTree<a href="#3372149" title="Boolean" id="3372152" class="delimiter">(</a><span class="delimiter">)</span> =&gt; <a href="#3372155" title="(x: Unit)Unit" class="delimiter">(</a><span class="delimiter">)</span>
      <span class="keyword">case</span> _ <span class="keyword">if</span> <a href="#1105340" title="TreeCheckers.this.global.Tree">tree</a>.<a href="../../../reflect/internal/Trees.scala.html#408573" title="=&gt; TreeCheckers.this.global.Type">tpe</a> <span title="(x$1: AnyRef)Boolean">!=</span> <span title="Null(null)" class="keyword">null</span>  =&gt;
        <a href="#623672" title="=&gt; scala.collection.mutable.HashMap[TreeCheckers.this.global.Tree,TreeCheckers.this.global.Type]">tpeOfTree</a>.<a href="../../../collection/mutable/MapLike.scala.html#87629" title="(key: TreeCheckers.this.global.Tree, op: =&gt; TreeCheckers.this.global.Type)TreeCheckers.this.global.Type">getOrElseUpdate</a><span class="delimiter">(</span><a href="#1105340" title="TreeCheckers.this.global.Tree">tree</a>, <span class="delimiter">{</span>
          <span class="keyword">val</span> <a title="TreeCheckers.this.global.Type" id="1105442">saved</a> = <a href="#1105340" title="TreeCheckers.this.global.Tree">tree</a>.<a href="../../../reflect/internal/Trees.scala.html#408573" title="=&gt; TreeCheckers.this.global.Type">tpe</a>
          <a href="#1105340" title="TreeCheckers.this.global.Tree">tree</a>.<a href="../../../reflect/internal/Trees.scala.html#408574" title="(t: TreeCheckers.this.global.Type)Unit">tpe</a> = <span title="Null(null)" class="keyword">null</span>
          <a href="#1105442" title="TreeCheckers.this.global.Type">saved</a>
        <span class="delimiter">}</span><span class="delimiter">)</span>
        <a href="#623679" title="(msg: =&gt; Any)(body: =&gt; Unit)Unit">wrap</a><span class="delimiter">(</span><a href="#1105340" title="TreeCheckers.this.global.Tree">tree</a><span class="delimiter">)</span><span class="delimiter">(</span><a href="#623691" title="TreeCheckers.this.TreeChecker" class="keyword">super</a>.<a href="Typers.scala.html#538698" title="(tree: TreeCheckers.this.global.Tree, mode: Int, pt: TreeCheckers.this.global.Type)TreeCheckers.this.global.Tree">typed</a><a href="#3372139" title="Unit" class="delimiter">(</a><a href="#1105340" title="TreeCheckers.this.global.Tree">tree</a>, <a href="#1105341" title="Int">mode</a>, <a href="#1105342" title="TreeCheckers.this.global.Type">pt</a><span class="delimiter">)</span> <span class="keyword">match</span> <span class="delimiter">{</span>
          <span class="keyword">case</span> _: Literal     =&gt; <a href="#3372143" title="(x: Unit)Unit" class="delimiter">(</a><span class="delimiter">)</span>
          <span class="keyword">case</span> x <span class="keyword">if</span> x <span title="(x$1: AnyRef)Boolean">ne</span> <a href="#1105340" title="TreeCheckers.this.global.Tree">tree</a> =&gt; <a href="#1105322" title="(t1: TreeCheckers.this.global.Tree, t2: TreeCheckers.this.global.Tree)Unit">treesDiffer</a><a href="#3372143" title="(x: Unit)Unit" class="delimiter">(</a><a href="#1105340" title="TreeCheckers.this.global.Tree">tree</a>, x<span class="delimiter">)</span>
          <span class="keyword">case</span> _              =&gt; <a href="#3372143" title="(x: Unit)Unit" class="delimiter">(</a><span class="delimiter">)</span>
        <span class="delimiter">}</span><span class="delimiter">)</span>
      <span class="keyword">case</span> _ =&gt; <a href="#3372155" title="(x: Unit)Unit" class="delimiter">(</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>

    <span class="keyword">object</span> <a title="TreeChecker.this.precheck.type" id="1105329">precheck</a> <a href="#1105330" title="TreeChecker.this.precheck.type" class="keyword">extends</a> <a href="../../../reflect/api/Trees.scala.html#56467" title="TreeCheckers.this.global.Traverser">Traverser</a> <span class="delimiter">{</span>
      <span class="keyword">override</span> <span class="keyword">def</span> <a title="(tree: TreeCheckers.this.global.Tree)Unit" id="1105336">traverse</a><span class="delimiter">(</span><a title="TreeCheckers.this.global.Tree" id="1105337">tree</a>: <a href="../../../reflect/internal/Trees.scala.html#407938" title="TreeCheckers.this.global.Tree">Tree</a><span class="delimiter">)</span> <span class="delimiter">{</span>
        <span class="keyword">val</span> <a title="TreeCheckers.this.global.Symbol" id="1105456">sym</a> = <a href="#1105337" title="TreeCheckers.this.global.Tree">tree</a>.<a href="../../../reflect/internal/Trees.scala.html#408577" title="=&gt; TreeCheckers.this.global.Symbol">symbol</a>
        <span class="keyword">def</span> <a title="=&gt; TreeCheckers.this.global.Symbol" id="1105457">accessed</a> = <a href="#1105456" title="TreeCheckers.this.global.Symbol">sym</a>.<a href="../../../reflect/internal/Symbols.scala.html#411430" title="=&gt; TreeCheckers.this.global.Symbol">accessed</a>
        <span class="keyword">def</span> <a title="(msg: String)Unit" id="1105458">fail</a><span class="delimiter">(</span><a title="String" id="1105462">msg</a>: <span title="String">String</span><span class="delimiter">)</span> = <a href="#623676" title="(pos: TreeCheckers.this.global.Position, msg: Any)Unit">errorFn</a><span class="delimiter">(</span><a href="#1105337" title="TreeCheckers.this.global.Tree">tree</a>.<a href="../../../reflect/internal/Trees.scala.html#408571" title="=&gt; TreeCheckers.this.global.Position">pos</a>, <a href="#1105462" title="String">msg</a> <span title="(x$1: Any)String">+</span> <a href="#623664" title="(x: AnyRef)String">classstr</a><span class="delimiter">(</span><a href="#1105337" title="TreeCheckers.this.global.Tree">tree</a><span class="delimiter">)</span> <span title="(x$1: Any)String">+</span> <span title="String(&quot; / &quot;)" class="string">&quot; / &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#1105337" title="TreeCheckers.this.global.Tree">tree</a><span class="delimiter">)</span>

        <a href="#1105337" title="TreeCheckers.this.global.Tree">tree</a> <span class="keyword">match</span> <span class="delimiter">{</span>
          <span class="keyword">case</span> DefDef<a href="#3372178" title="Unit" id="3372186" class="delimiter">(</a><a href="../../../reflect/internal/Trees.scala.html#410278" title="TreeCheckers.this.global.Modifiers" id="3372179">_</a>, <a href="../../../reflect/internal/Trees.scala.html#410280" title="TreeCheckers.this.global.Name" id="3372180">_</a>, <a href="../../../reflect/internal/Trees.scala.html#410282" title="List[TreeCheckers.this.global.TypeDef]" id="3372181">_</a>, <a href="../../../reflect/internal/Trees.scala.html#410284" title="List[List[TreeCheckers.this.global.ValDef]]" id="3372182">_</a>, <a href="../../../reflect/internal/Trees.scala.html#410286" title="TreeCheckers.this.global.Tree" id="3372183">_</a>, <a href="../../../reflect/internal/Trees.scala.html#410288" title="TreeCheckers.this.global.Tree" id="3372184">_</a><span class="delimiter">)</span> =&gt;
            <a href="#3372205" title="(x: Unit)Unit" class="keyword">if</a> <span class="delimiter">(</span><a href="#1105456" title="TreeCheckers.this.global.Symbol">sym</a>.<a href="../../../reflect/internal/HasFlags.scala.html#409839" title="=&gt; Boolean">hasAccessorFlag</a> <a href="../../../Boolean.scala.html#57826" title="(x: Boolean)Boolean">&amp;&amp;</a> <a href="../../../Boolean.scala.html#57822" title="=&gt; Boolean">!</a><a href="#1105456" title="TreeCheckers.this.global.Symbol">sym</a>.<a href="../../../reflect/internal/HasFlags.scala.html#409850" title="=&gt; Boolean">isDeferred</a><span class="delimiter">)</span> <span class="delimiter">{</span>
              <a href="#1105456" title="TreeCheckers.this.global.Symbol">sym</a>.<a href="../../../reflect/internal/Symbols.scala.html#411365" title="=&gt; TreeCheckers.this.global.Type">tpe</a>.<a href="../../../reflect/internal/Types.scala.html#408423" title="=&gt; TreeCheckers.this.global.Type">resultType</a> <span class="keyword">match</span> <span class="delimiter">{</span>
                <span class="keyword">case</span> _: ConstantType  =&gt; <a href="#3372173" title="(x: Unit)Unit" class="delimiter">(</a><span class="delimiter">)</span>
                <span class="keyword">case</span> _                =&gt;
                  <a href="#1105327" title="(t: TreeCheckers.this.global.Tree)Unit">checkSym</a><span class="delimiter">(</span><a href="#1105337" title="TreeCheckers.this.global.Tree">tree</a><span class="delimiter">)</span>
                  /** XXX: lots of syms show up here with accessed == NoSymbol. */
                  <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#1105457" title="=&gt; TreeCheckers.this.global.Symbol">accessed</a> <span title="(x$1: AnyRef)Boolean">!=</span> <a href="../../../reflect/internal/Symbols.scala.html#407184" title="=&gt; TreeCheckers.this.global.NoSymbol">NoSymbol</a><span class="delimiter">)</span> <span class="delimiter">{</span>
                    <span class="keyword">val</span> <a title="TreeCheckers.this.global.Symbol" id="1105512">agetter</a> = <a href="#1105457" title="=&gt; TreeCheckers.this.global.Symbol">accessed</a>.<a href="../../../reflect/internal/Symbols.scala.html#411469" title="(base: TreeCheckers.this.global.Symbol)TreeCheckers.this.global.Symbol">getter</a><span class="delimiter">(</span><a href="#1105456" title="TreeCheckers.this.global.Symbol">sym</a>.<a href="../../../reflect/internal/Symbols.scala.html#411315" title="=&gt; TreeCheckers.this.global.Symbol">owner</a><span class="delimiter">)</span>
                    <span class="keyword">val</span> <a title="TreeCheckers.this.global.Symbol" id="1105513">asetter</a> = <a href="#1105457" title="=&gt; TreeCheckers.this.global.Symbol">accessed</a>.<a href="../../../reflect/internal/Symbols.scala.html#411471" title="(base: TreeCheckers.this.global.Symbol)TreeCheckers.this.global.Symbol">setter</a><span class="delimiter">(</span><a href="#1105456" title="TreeCheckers.this.global.Symbol">sym</a>.<a href="../../../reflect/internal/Symbols.scala.html#411315" title="=&gt; TreeCheckers.this.global.Symbol">owner</a><span class="delimiter">)</span>

                    <a href="#623678" title="(cond: Boolean, msg: =&gt; Any)Unit">assertFn</a><span class="delimiter">(</span><a href="#1105512" title="TreeCheckers.this.global.Symbol">agetter</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="#1105456" title="TreeCheckers.this.global.Symbol">sym</a> <a href="../../../Boolean.scala.html#57825" title="(x: Boolean)Boolean">||</a> <a href="#1105513" title="TreeCheckers.this.global.Symbol">asetter</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="#1105456" title="TreeCheckers.this.global.Symbol">sym</a>,
                      <a href="../../../Predef.scala.html#7605" title="implicit scala.Predef.any2stringadd : (x: Any)scala.runtime.StringAdd">sym</a> <a href="../../../runtime/StringAdd.scala.html#60046" title="(other: String)String">+</a> <span title="String(&quot; is getter or setter, but accessed sym &quot;)" class="string">&quot; is getter or setter, but accessed sym &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#1105457" title="=&gt; TreeCheckers.this.global.Symbol">accessed</a> <span title="(x$1: Any)String">+</span> <span title="String(&quot; shows &quot;)" class="string">&quot; shows &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#1105512" title="TreeCheckers.this.global.Symbol">agetter</a> <span title="(x$1: Any)String">+</span> <span title="String(&quot; and &quot;)" class="string">&quot; and &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#1105513" title="TreeCheckers.this.global.Symbol">asetter</a>
                    <span class="delimiter">)</span>
                  <span class="delimiter">}</span>
              <span class="delimiter">}</span>
            <span class="delimiter">}</span>
          <span class="keyword">case</span> ValDef<a href="#3372178" title="Unit" id="3372192" class="delimiter">(</a><a href="../../../reflect/internal/Trees.scala.html#410298" title="TreeCheckers.this.global.Modifiers" id="3372187">_</a>, <a href="../../../reflect/internal/Trees.scala.html#410300" title="TreeCheckers.this.global.TermName" id="3372188">_</a>, <a href="../../../reflect/internal/Trees.scala.html#410302" title="TreeCheckers.this.global.Tree" id="3372189">_</a>, <a href="../../../reflect/internal/Trees.scala.html#410304" title="TreeCheckers.this.global.Tree" id="3372190">_</a><span class="delimiter">)</span> =&gt;
            <a href="#3372205" title="(x: Unit)Unit" class="keyword">if</a> <span class="delimiter">(</span><a href="#1105456" title="TreeCheckers.this.global.Symbol">sym</a>.<a href="../../../reflect/internal/Symbols.scala.html#411244" title="=&gt; Boolean">hasGetter</a> <a href="../../../Boolean.scala.html#57826" title="(x: Boolean)Boolean">&amp;&amp;</a> <a href="../../../Boolean.scala.html#57822" title="=&gt; Boolean">!</a><a href="#1105456" title="TreeCheckers.this.global.Symbol">sym</a>.<a href="../../../reflect/internal/Symbols.scala.html#411285" title="=&gt; Boolean">isOuterField</a> <a href="../../../Boolean.scala.html#57826" title="(x: Boolean)Boolean">&amp;&amp;</a> <a href="../../../Boolean.scala.html#57822" title="=&gt; Boolean">!</a><a href="#1105456" title="TreeCheckers.this.global.Symbol">sym</a>.<a href="../../../reflect/internal/Symbols.scala.html#411284" title="=&gt; Boolean">isOuterAccessor</a><span class="delimiter">)</span> <span class="delimiter">{</span>
              <a href="#623678" title="(cond: Boolean, msg: =&gt; Any)Unit">assertFn</a><span class="delimiter">(</span><a href="#1105456" title="TreeCheckers.this.global.Symbol">sym</a>.<a href="../../../reflect/internal/Symbols.scala.html#411469" title="(base: TreeCheckers.this.global.Symbol)TreeCheckers.this.global.Symbol">getter</a><span class="delimiter">(</span><a href="#1105456" title="TreeCheckers.this.global.Symbol">sym</a>.<a href="../../../reflect/internal/Symbols.scala.html#411315" title="=&gt; TreeCheckers.this.global.Symbol">owner</a><span class="delimiter">)</span> <span title="(x$1: AnyRef)Boolean">!=</span> <a href="../../../reflect/internal/Symbols.scala.html#407184" title="=&gt; TreeCheckers.this.global.NoSymbol">NoSymbol</a>, <a href="#623667" title="(s: TreeCheckers.this.global.Symbol)String">ownerstr</a><span class="delimiter">(</span><a href="#1105456" title="TreeCheckers.this.global.Symbol">sym</a><span class="delimiter">)</span> <span title="(x$1: Any)String">+</span> <span title="String(&quot; has getter but cannot be found. &quot;)" class="string">&quot; has getter but cannot be found. &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#1105456" title="TreeCheckers.this.global.Symbol">sym</a>.<a href="../../../reflect/internal/Symbols.scala.html#411317" title="=&gt; List[TreeCheckers.this.global.Symbol]">ownerChain</a><span class="delimiter">)</span>
            <span class="delimiter">}</span>
          <span class="keyword">case</span> Apply<a href="#3372178" title="Unit" id="3372194" class="delimiter">(</a><a href="../../../reflect/internal/Trees.scala.html#410031" title="TreeCheckers.this.global.Tree" id="1105566">fn</a>, <a href="../../../reflect/internal/Trees.scala.html#410033" title="List[TreeCheckers.this.global.Tree]" id="1105567">args</a><span class="delimiter">)</span> =&gt;
            <a href="#3372205" title="(x: Unit)Unit" class="keyword">if</a> <span class="delimiter">(</span><a href="#1105567" title="List[TreeCheckers.this.global.Tree]">args</a> <a href="../../../collection/LinearSeqOptimized.scala.html#86379" title="(p: TreeCheckers.this.global.Tree =&gt; Boolean)Boolean">exists</a> <span class="delimiter">(</span><a href="#1105574" title="TreeCheckers.this.global.Tree">_</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="../../../reflect/internal/Trees.scala.html#407946" title="TreeCheckers.this.global.EmptyTree.type">EmptyTree</a><span class="delimiter">)</span><span class="delimiter">)</span>
              <a href="#623676" title="(pos: TreeCheckers.this.global.Position, msg: Any)Unit">errorFn</a><span class="delimiter">(</span><a href="#1105337" title="TreeCheckers.this.global.Tree">tree</a>.<a href="../../../reflect/internal/Trees.scala.html#408571" title="=&gt; TreeCheckers.this.global.Position">pos</a>, <span title="String(&quot;Apply arguments to &quot;)" class="string">&quot;Apply arguments to &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#1105566" title="TreeCheckers.this.global.Tree">fn</a> <span title="(x$1: Any)String">+</span> <span title="String(&quot; contains an empty tree: &quot;)" class="string">&quot; contains an empty tree: &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#1105567" title="List[TreeCheckers.this.global.Tree]">args</a><span class="delimiter">)</span>

          <span class="keyword">case</span> Select<a href="#3372178" title="Unit" id="3372196" class="delimiter">(</a><a href="../../../reflect/internal/Trees.scala.html#409999" title="TreeCheckers.this.global.Tree" id="1105596">qual</a>, <a href="../../../reflect/internal/Trees.scala.html#410001" title="TreeCheckers.this.global.Name" id="1105597">name</a><span class="delimiter">)</span> =&gt;
            <a href="#1105327" title="(t: TreeCheckers.this.global.Tree)Unit">checkSym</a><a href="#3372205" title="(x: Unit)Unit" class="delimiter">(</a><a href="#1105337" title="TreeCheckers.this.global.Tree">tree</a><span class="delimiter">)</span>
          <span class="keyword">case</span> This<a href="#3372178" title="Unit" id="3372199" class="delimiter">(</a><a href="../../../reflect/internal/Trees.scala.html#410008" title="TreeCheckers.this.global.TypeName" id="3372197">_</a><span class="delimiter">)</span> =&gt;
            <a href="#1105327" title="(t: TreeCheckers.this.global.Tree)Unit">checkSym</a><span class="delimiter">(</span><a href="#1105337" title="TreeCheckers.this.global.Tree">tree</a><span class="delimiter">)</span>
            <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#1105456" title="TreeCheckers.this.global.Symbol">sym</a>.<a href="../../../reflect/internal/Symbols.scala.html#411293" title="=&gt; Boolean">isStatic</a> <a href="../../../Boolean.scala.html#57826" title="(x: Boolean)Boolean">&amp;&amp;</a> <a href="#1105456" title="TreeCheckers.this.global.Symbol">sym</a>.<a href="../../../reflect/internal/HasFlags.scala.html#409842" title="=&gt; Boolean">hasModuleFlag</a><span class="delimiter">)</span> <span title="Unit" class="delimiter">(</span><span class="delimiter">)</span>
            <span class="keyword">else</span> <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="../../../reflect/api/Trees.scala.html#405541" title="=&gt; TreeCheckers.this.global.Symbol">currentOwner</a>.<a href="../../../reflect/internal/Symbols.scala.html#411317" title="=&gt; List[TreeCheckers.this.global.Symbol]">ownerChain</a> <a href="../../../collection/immutable/List.scala.html#62713" title="(p: TreeCheckers.this.global.Symbol =&gt; Boolean)List[TreeCheckers.this.global.Symbol]">takeWhile</a> <span class="delimiter">(</span><a href="#1105611" title="TreeCheckers.this.global.Symbol">_</a> <span title="(x$1: AnyRef)Boolean">!=</span> <a href="#1105456" title="TreeCheckers.this.global.Symbol">sym</a><span class="delimiter">)</span> <a href="../../../collection/LinearSeqOptimized.scala.html#86379" title="(p: TreeCheckers.this.global.Symbol =&gt; Boolean)Boolean">exists</a> <span class="delimiter">(</span><a href="#1105624" title="TreeCheckers.this.global.Symbol">_</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="../../../reflect/internal/Symbols.scala.html#407184" title="=&gt; TreeCheckers.this.global.NoSymbol">NoSymbol</a><span class="delimiter">)</span><span class="delimiter">)</span>
              <span title="Nothing" class="keyword">return</span> <a href="#1105458" title="(msg: String)Unit">fail</a><span class="delimiter">(</span><span title="String(&quot;tree symbol &quot;)" class="string">&quot;tree symbol &quot;</span><span title="(x$1: Any)String">+</span><a href="#1105456" title="TreeCheckers.this.global.Symbol">sym</a><span title="(x$1: Any)String">+</span><span title="String(&quot; does not point to enclosing class; tree = &quot;)" class="string">&quot; does not point to enclosing class; tree = &quot;</span><span class="delimiter">)</span>

          /** XXX: temporary while Import nodes are arriving untyped. */
          <span class="keyword">case</span> Import<a href="#3372178" title="Unit" id="3372203" class="delimiter">(</a><a href="../../../reflect/internal/Trees.scala.html#410214" title="TreeCheckers.this.global.Tree" id="3372200">_</a>, <a href="../../../reflect/internal/Trees.scala.html#410216" title="List[TreeCheckers.this.global.ImportSelector]" id="3372201">_</a><span class="delimiter">)</span> =&gt;
            <a href="#3372205" title="(x: Unit)Unit" class="keyword">return</a>
          <span class="keyword">case</span> _ =&gt;
        <span class="delimiter">}</span>

        <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#1105337" title="TreeCheckers.this.global.Tree">tree</a>.<a href="../../../reflect/internal/Trees.scala.html#408571" title="=&gt; TreeCheckers.this.global.Position">pos</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="../../../reflect/internal/Positions.scala.html#408302" title="=&gt; reflect.internal.util.NoPosition.type">NoPosition</a> <a href="../../../Boolean.scala.html#57826" title="(x: Boolean)Boolean">&amp;&amp;</a> <a href="#1105337" title="TreeCheckers.this.global.Tree">tree</a> <span title="(x$1: AnyRef)Boolean">!=</span> <a href="../../../reflect/internal/Trees.scala.html#407946" title="TreeCheckers.this.global.EmptyTree.type">EmptyTree</a><span class="delimiter">)</span>
          <a href="#1105325" title="(t: TreeCheckers.this.global.Tree)Unit">noPos</a><span class="delimiter">(</span><a href="#1105337" title="TreeCheckers.this.global.Tree">tree</a><span class="delimiter">)</span>
        <span class="keyword">else</span> <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#1105337" title="TreeCheckers.this.global.Tree">tree</a>.<a href="../../../reflect/internal/Trees.scala.html#408573" title="=&gt; TreeCheckers.this.global.Type">tpe</a> <span title="(x$1: AnyRef)Boolean">==</span> <span title="Null(null)" class="keyword">null</span> <a href="../../../Boolean.scala.html#57826" title="(x: Boolean)Boolean">&amp;&amp;</a> <a href="../../../reflect/internal/SymbolTable.scala.html#406659" title="=&gt; scala.reflect.internal.Phase">phase</a>.<a href="../../../reflect/internal/Phase.scala.html#419695" title="=&gt; Int">id</a> <a href="../../../Int.scala.html#57125" title="(x: Int)Boolean">&gt;</a> <a href="../Global.scala.html#537672" title="=&gt; TreeCheckers.this.global.Run">currentRun</a>.<a href="../Global.scala.html#539378" title="=&gt; scala.tools.nsc.Phase">typerPhase</a>.<a href="../../../reflect/internal/Phase.scala.html#419695" title="=&gt; Int">id</a><span class="delimiter">)</span>
          <a href="#1105326" title="(t: TreeCheckers.this.global.Tree)Unit">noType</a><span class="delimiter">(</span><a href="#1105337" title="TreeCheckers.this.global.Tree">tree</a><span class="delimiter">)</span>
        <span class="keyword">else</span> <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#1105337" title="TreeCheckers.this.global.Tree">tree</a>.<a href="../../../reflect/internal/Trees.scala.html#408581" title="=&gt; Boolean">isDef</a><span class="delimiter">)</span> <span class="delimiter">{</span>
          <a href="#1105327" title="(t: TreeCheckers.this.global.Tree)Unit">checkSym</a><span class="delimiter">(</span><a href="#1105337" title="TreeCheckers.this.global.Tree">tree</a><span class="delimiter">)</span>

          <a href="#1105337" title="TreeCheckers.this.global.Tree">tree</a> <span class="keyword">match</span> <span class="delimiter">{</span>
            <span class="keyword">case</span> <a href="#3372215" title="Unit" id="3372217">x</a>: PackageDef    =&gt;
              <a href="#3372219" title="(x: Unit)Unit" class="keyword">if</a> <span class="delimiter">(</span><span class="delimiter">(</span><a href="#1105456" title="TreeCheckers.this.global.Symbol">sym</a>.<a href="../../../reflect/internal/Symbols.scala.html#411317" title="=&gt; List[TreeCheckers.this.global.Symbol]">ownerChain</a> <a href="../../../collection/LinearSeqOptimized.scala.html#86380" title="(elem: Any)Boolean">contains</a> <a href="../../../reflect/api/Trees.scala.html#405541" title="=&gt; TreeCheckers.this.global.Symbol">currentOwner</a><span class="delimiter">)</span> <a href="../../../Boolean.scala.html#57825" title="(x: Boolean)Boolean">||</a> <a href="../../../reflect/api/Trees.scala.html#405541" title="=&gt; TreeCheckers.this.global.Symbol">currentOwner</a>.<a href="../../../reflect/internal/Symbols.scala.html#411228" title="=&gt; Boolean">isEmptyPackageClass</a><span class="delimiter">)</span> <span title="Unit" class="delimiter">(</span><span class="delimiter">)</span>
              <span class="keyword">else</span> <a href="#1105458" title="(msg: String)Unit">fail</a><span class="delimiter">(</span><a href="../../../Predef.scala.html#7605" title="implicit scala.Predef.any2stringadd : (x: Any)scala.runtime.StringAdd">sym</a> <a href="../../../runtime/StringAdd.scala.html#60046" title="(other: String)String">+</a> <span title="String(&quot; owner chain does not contain currentOwner &quot;)" class="string">&quot; owner chain does not contain currentOwner &quot;</span> <span title="(x$1: Any)String">+</span> <a href="../../../reflect/api/Trees.scala.html#405541" title="=&gt; TreeCheckers.this.global.Symbol">currentOwner</a> <span title="(x$1: Any)String">+</span> <a href="#1105456" title="TreeCheckers.this.global.Symbol">sym</a>.<a href="../../../reflect/internal/Symbols.scala.html#411317" title="=&gt; List[TreeCheckers.this.global.Symbol]">ownerChain</a><span class="delimiter">)</span>
            <span class="keyword">case</span> _ =&gt;
              <span class="keyword">def</span> <a title="(s: TreeCheckers.this.global.Symbol)Boolean" id="1105657">cond</a><span class="delimiter">(</span><a title="TreeCheckers.this.global.Symbol" id="1105658">s</a>: <a href="../../../reflect/internal/Symbols.scala.html#407146" title="TreeCheckers.this.global.Symbol">Symbol</a><span class="delimiter">)</span> = <a href="../../../Boolean.scala.html#57822" title="=&gt; Boolean">!</a><a href="#1105658" title="TreeCheckers.this.global.Symbol">s</a>.<a href="../../../reflect/api/Symbols.scala.html#402396" title="=&gt; Boolean">isTerm</a> <a href="../../../Boolean.scala.html#57825" title="(x: Boolean)Boolean">||</a> <a href="#1105658" title="TreeCheckers.this.global.Symbol">s</a>.<a href="../../../reflect/api/Symbols.scala.html#402398" title="=&gt; Boolean">isMethod</a> <a href="../../../Boolean.scala.html#57825" title="(x: Boolean)Boolean">||</a> <a href="#1105658" title="TreeCheckers.this.global.Symbol">s</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="#1105456" title="TreeCheckers.this.global.Symbol">sym</a>.<a href="../../../reflect/internal/Symbols.scala.html#411315" title="=&gt; TreeCheckers.this.global.Symbol">owner</a>

              <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#1105456" title="TreeCheckers.this.global.Symbol">sym</a>.<a href="../../../reflect/internal/Symbols.scala.html#411315" title="=&gt; TreeCheckers.this.global.Symbol">owner</a> <span title="(x$1: AnyRef)Boolean">!=</span> <a href="../../../reflect/api/Trees.scala.html#405541" title="=&gt; TreeCheckers.this.global.Symbol">currentOwner</a><span class="delimiter">)</span> <span class="delimiter">{</span>
                <span class="keyword">val</span> <a title="Any" id="1105668">expected</a> = <a href="../../../reflect/api/Trees.scala.html#405541" title="=&gt; TreeCheckers.this.global.Symbol">currentOwner</a>.<a href="../../../reflect/internal/Symbols.scala.html#411317" title="=&gt; List[TreeCheckers.this.global.Symbol]">ownerChain</a> <a href="../../../collection/LinearSeqOptimized.scala.html#86381" title="(p: TreeCheckers.this.global.Symbol =&gt; Boolean)Option[TreeCheckers.this.global.Symbol]">find</a> <span class="delimiter">(</span><a title="TreeCheckers.this.global.Symbol" id="1105677">x</a> =&gt; <a href="#1105657" title="(s: TreeCheckers.this.global.Symbol)Boolean">cond</a><span class="delimiter">(</span><a href="#1105677" title="TreeCheckers.this.global.Symbol">x</a><span class="delimiter">)</span><span class="delimiter">)</span> <a href="../../../Option.scala.html#62859" title="(default: =&gt; Any)Any">getOrElse</a> <a href="#1105458" title="(msg: String)Unit">fail</a><span class="delimiter">(</span><span title="String(&quot;DefTree can\'t find owner: &quot;)" class="string">&quot;DefTree can't find owner: &quot;</span><span class="delimiter">)</span>
                <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#1105456" title="TreeCheckers.this.global.Symbol">sym</a>.<a href="../../../reflect/internal/Symbols.scala.html#411315" title="=&gt; TreeCheckers.this.global.Symbol">owner</a> <span title="(x$1: Any)Boolean">!=</span> <a href="#1105668" title="Any">expected</a><span class="delimiter">)</span>
                  <a href="#1105458" title="(msg: String)Unit">fail</a><span class="delimiter">(</span><a href="../../../Predef.scala.html#7604" title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps" class="string">&quot;&quot;&quot;|
                          | currentOwner chain: %s
                          |       symbol chain: %s&quot;&quot;&quot;</a>.<a href="../../../Predef.scala.html#7604" title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps">stripMargin</a>.<a href="../../../collection/immutable/StringLike.scala.html#59882" title="(args: Any*)String">format</a><span class="delimiter">(</span>
                            <a href="../../../reflect/api/Trees.scala.html#405541" title="=&gt; TreeCheckers.this.global.Symbol">currentOwner</a>.<a href="../../../reflect/internal/Symbols.scala.html#411317" title="=&gt; List[TreeCheckers.this.global.Symbol]">ownerChain</a> <a href="../../../collection/immutable/List.scala.html#62708" title="(n: Int)List[TreeCheckers.this.global.Symbol]">take</a> <span title="Int(3)" class="int">3</span> <a href="../../../collection/TraversableOnce.scala.html#58283" title="(sep: String)String">mkString</a> <span title="String(&quot; -&gt; &quot;)" class="string">&quot; -&gt; &quot;</span>,
                            <a href="#1105456" title="TreeCheckers.this.global.Symbol">sym</a>.<a href="../../../reflect/internal/Symbols.scala.html#411317" title="=&gt; List[TreeCheckers.this.global.Symbol]">ownerChain</a> <a href="../../../collection/TraversableOnce.scala.html#58283" title="(sep: String)String">mkString</a> <span title="String(&quot; -&gt; &quot;)" class="string">&quot; -&gt; &quot;</span><span class="delimiter">)</span>
                      <span class="delimiter">)</span>
              <span class="delimiter">}</span>
          <span class="delimiter">}</span>
        <span class="delimiter">}</span>
        <span class="keyword">super</span>.<a href="../../../reflect/api/Trees.scala.html#405544" title="(tree: TreeCheckers.this.global.Tree)Unit">traverse</a><span class="delimiter">(</span><a href="#1105337" title="TreeCheckers.this.global.Tree">tree</a><span class="delimiter">)</span>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>

    <span class="keyword">object</span> <a title="TreeChecker.this.postcheck.type" id="1105331">postcheck</a> <a href="#1105332" title="TreeChecker.this.postcheck.type" class="keyword">extends</a> <a href="../../../reflect/api/Trees.scala.html#56467" title="TreeCheckers.this.global.Traverser">Traverser</a> <span class="delimiter">{</span>
      <span class="keyword">override</span> <span class="keyword">def</span> <a title="(tree: TreeCheckers.this.global.Tree)Unit" id="1105359">traverse</a><span class="delimiter">(</span><a title="TreeCheckers.this.global.Tree" id="1105360">tree</a>: <a href="../../../reflect/internal/Trees.scala.html#407938" title="TreeCheckers.this.global.Tree">Tree</a><span class="delimiter">)</span> <span class="delimiter">{</span>
        <a href="#1105360" title="TreeCheckers.this.global.Tree">tree</a> <span class="keyword">match</span> <span class="delimiter">{</span>
          <span class="keyword">case</span> <a href="../../../reflect/internal/Trees.scala.html#407946" title="Unit" id="3372228">EmptyTree</a> | TypeTree<a href="#3372224" title="Boolean" id="3372227" class="delimiter">(</a><span class="delimiter">)</span> =&gt; <a href="#3372230" title="(x: Unit)Unit" class="delimiter">(</a><span class="delimiter">)</span>
          <span class="keyword">case</span> _ =&gt;
            <a href="#623672" title="=&gt; scala.collection.mutable.HashMap[TreeCheckers.this.global.Tree,TreeCheckers.this.global.Type]">tpeOfTree</a> <a href="../../../collection/mutable/HashMap.scala.html#88246" title="(key: TreeCheckers.this.global.Tree)Option[TreeCheckers.this.global.Type]">get</a> <a href="#1105360" title="TreeCheckers.this.global.Tree">tree</a> <a href="#3372230" title="(x: Unit)Unit">foreach</a> <span class="delimiter">{</span> <a title="TreeCheckers.this.global.Type" id="1105724">oldtpe</a> =&gt;
              <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#1105724" title="TreeCheckers.this.global.Type">oldtpe</a> <a href="../../../reflect/internal/Types.scala.html#408485" title="(that: TreeCheckers.this.global.Type)Boolean">=:=</a> <a href="#1105360" title="TreeCheckers.this.global.Tree">tree</a>.<a href="../../../reflect/internal/Trees.scala.html#408573" title="=&gt; TreeCheckers.this.global.Type">tpe</a><span class="delimiter">)</span> <span title="Unit" class="delimiter">(</span><span class="delimiter">)</span>
              <span class="keyword">else</span> <a href="#1105323" title="(tree: TreeCheckers.this.global.Tree, tp1: TreeCheckers.this.global.Type, tp2: TreeCheckers.this.global.Type)Unit">typesDiffer</a><span class="delimiter">(</span><a href="#1105360" title="TreeCheckers.this.global.Tree">tree</a>, <a href="#1105724" title="TreeCheckers.this.global.Type">oldtpe</a>, <a href="#1105360" title="TreeCheckers.this.global.Tree">tree</a>.<a href="../../../reflect/internal/Trees.scala.html#408573" title="=&gt; TreeCheckers.this.global.Type">tpe</a><span class="delimiter">)</span>

              <a href="#1105360" title="TreeCheckers.this.global.Tree">tree</a>.<a href="../../../reflect/internal/Trees.scala.html#408574" title="(t: TreeCheckers.this.global.Type)Unit">tpe</a> = <a href="#1105724" title="TreeCheckers.this.global.Type">oldtpe</a>
              <span class="keyword">super</span>.<a href="../../../reflect/api/Trees.scala.html#405544" title="(tree: TreeCheckers.this.global.Tree)Unit">traverse</a><span class="delimiter">(</span><a href="#1105360" title="TreeCheckers.this.global.Tree">tree</a><span class="delimiter">)</span>
            <span class="delimiter">}</span>
        <span class="delimiter">}</span>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>
<span class="delimiter">}</span>

        </pre>
    </body>
</html>