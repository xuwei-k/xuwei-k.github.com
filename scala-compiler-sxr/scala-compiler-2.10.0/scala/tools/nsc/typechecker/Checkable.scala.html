<?xml version="1.0" encoding="utf-8"?>
      <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <meta http-equiv="Expires" content="0" />
        <title>scala/tools/nsc/typechecker/Checkable.scala</title>
        <script type="text/javascript" src="../../../../jquery-all.js"></script>
        <script type="text/javascript" src="../../../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../../../style.css" title="Style"></link>
    </head>
    <body>
        <pre>
/* NSC -- new Scala compiler
 * Copyright 2005-2013 LAMP/EPFL
 * @author  Paul Phillips
 */

<span class="keyword">package</span> scala.tools.nsc
<span class="keyword">package</span> typechecker

<span class="keyword">import</span> scala.collection.<span class="delimiter">{</span> mutable, immutable <span class="delimiter">}</span>
<span class="keyword">import</span> scala.collection.mutable.ListBuffer
<span class="keyword">import</span> scala.util.control.ControlThrowable
<span class="keyword">import</span> symtab.<a href="../symtab/package.scala.html#55820" title="=&gt; reflect.internal.Flags.type">Flags</a>._
<span class="keyword">import</span> scala.annotation.tailrec
<span class="keyword">import</span> <a href="#49206" title="scala.tools.nsc.typechecker.Checkability.type">Checkability</a>._

/** On pattern matcher checkability:
 *
 *  Consider a pattern match of this form: (x: X) match { case _: P =&gt; }
 *
 *  There are four possibilities to consider:
 *     [P1] X will always conform to P
 *     [P2] x will never conform to P
 *     [P3] X &lt;: P if some runtime test is true
 *     [P4] X cannot be checked against P
 *
 *  The first two cases correspond to those when there is enough
 *  static information to say X &lt;: P or that (x ∈ X) ⇒ (x ∉ P).
 *  The fourth case includes unknown abstract types or structural
 *  refinements appearing within a pattern.
 *
 *  The third case is the interesting one.  We designate another type, XR,
 *  which is essentially the intersection of X and |P|, where |P| is
 *  the erasure of P.  If XR &lt;: P, then no warning is emitted.
 *
 *  Examples of how this info is put to use:
 *  sealed trait A[T] ; class B[T] extends A[T]
 *    def f(x: B[Int]) = x match { case _: A[Int] if true =&gt; }
 *    def g(x: A[Int]) = x match { case _: B[Int] =&gt; }
 *
 *  `f` requires no warning because X=B[Int], P=A[Int], and B[Int] &lt;:&lt; A[Int].
 *  `g` requires no warning because X=A[Int], P=B[Int], XR=B[Int], and B[Int] &lt;:&lt; B[Int].
 *      XR=B[Int] because a value of type A[Int] which is tested to be a B can
 *      only be a B[Int], due to the definition of B (B[T] extends A[T].)
 *
 *  This is something like asSeenFrom, only rather than asking what a type looks
 *  like from the point of view of one of its base classes, we ask what it looks
 *  like from the point of view of one of its subclasses.
 */
<span class="keyword">trait</span> <a title="trait Checkable extends Object" id="47699">Checkable</a> <a href="../../../Unit.scala.html#1515" title="Unit" class="delimiter">{</a>
  self: Analyzer =&gt;

  <span class="keyword">import</span> <a href="Analyzer.scala.html#537962" title="=&gt; scala.tools.nsc.Global">global</a>._
  <span class="keyword">import</span> <a href="../../../reflect/internal/Definitions.scala.html#407777" title="Checkable.this.global.definitions.type">definitions</a>._
  <span class="keyword">import</span> <a href="#538139" title="Checkable.this.CheckabilityChecker.type">CheckabilityChecker</a>.<span class="delimiter">{</span> isNeverSubType, isNeverSubClass <span class="delimiter">}</span>

  /** The applied type of class 'to' after inferring anything
   *  possible from the knowledge that 'to' must also be of the
   *  type given in 'from'.
   */
  <span class="keyword">def</span> <a title="(from: Checkable.this.global.Type, to: Checkable.this.global.Symbol)Checkable.this.global.Type" id="538133">propagateKnownTypes</a><span class="delimiter">(</span><a title="Checkable.this.global.Type" id="1027524">from</a>: <a href="../../../reflect/internal/Types.scala.html#407270" title="Checkable.this.global.Type">Type</a>, <a title="Checkable.this.global.Symbol" id="1027525">to</a>: <a href="../../../reflect/internal/Symbols.scala.html#407146" title="Checkable.this.global.Symbol">Symbol</a><span class="delimiter">)</span>: <a href="../../../reflect/internal/Types.scala.html#407270" title="Checkable.this.global.Type">Type</a> = <span class="delimiter">{</span>
    <span class="keyword">def</span> <a title="=&gt; List[Checkable.this.global.Symbol]" id="1027526">tparams</a>  = <a href="#1027525" title="Checkable.this.global.Symbol">to</a>.<a href="../../../reflect/internal/Symbols.scala.html#411389" title="=&gt; List[Checkable.this.global.Symbol]">typeParams</a>
    <span class="keyword">val</span> <a title="List[Checkable.this.global.TypeVar]" id="1027527">tvars</a>    = <a href="#1027526" title="=&gt; List[Checkable.this.global.Symbol]">tparams</a> <a href="../../../collection/TraversableLike.scala.html#58063" title="(f: Checkable.this.global.Symbol =&gt; Checkable.this.global.TypeVar)(implicit bf: scala.collection.generic.CanBuildFrom[List[Checkable.this.global.Symbol],Checkable.this.global.TypeVar,List[Checkable.this.global.TypeVar]])List[Checkable.this.global.TypeVar]">map</a> <span class="delimiter">(</span><a title="Checkable.this.global.Symbol" id="1027550">p</a> =&gt; <a href="../../../reflect/internal/Types.scala.html#450940" title="(tparam: Checkable.this.global.Symbol)Checkable.this.global.TypeVar">TypeVar</a><span class="delimiter">(</span><a href="#1027550" title="Checkable.this.global.Symbol">p</a><span class="delimiter">)</span><span class="delimiter">)</span>
    <span class="keyword">val</span> <a title="Checkable.this.global.Type" id="1027528">tvarType</a> = <a href="../../../reflect/internal/Types.scala.html#407409" title="(tyconSym: Checkable.this.global.Symbol, args: Checkable.this.global.Type*)Checkable.this.global.Type">appliedType</a><span class="delimiter">(</span><a href="#1027525" title="Checkable.this.global.Symbol">to</a>, <a href="#1027527" title="List[Checkable.this.global.TypeVar]">tvars</a>: _*<span class="delimiter">)</span>
    <span class="keyword">val</span> <a title="List[Checkable.this.global.Symbol]" id="1027529">bases</a>    = <a href="#1027524" title="Checkable.this.global.Type">from</a>.<a href="../../../reflect/internal/Types.scala.html#408491" title="=&gt; List[Checkable.this.global.Symbol]">baseClasses</a> <a href="../../../collection/TraversableLike.scala.html#58073" title="(p: Checkable.this.global.Symbol =&gt; Boolean)List[Checkable.this.global.Symbol]">filter</a> <span class="delimiter">(</span><a href="#1027525" title="Checkable.this.global.Symbol">to</a>.<a href="../../../reflect/internal/Symbols.scala.html#411063" title="=&gt; List[Checkable.this.global.Symbol]">baseClasses</a> <a href="../../../collection/LinearSeqOptimized.scala.html#86380" title="(elem: Any)Boolean">contains</a> <a href="#1027615" title="Checkable.this.global.Symbol">_</a><span class="delimiter">)</span>

    <a href="#1027529" title="List[Checkable.this.global.Symbol]">bases</a> <a href="../../../collection/immutable/List.scala.html#62719" title="(f: Checkable.this.global.Symbol =&gt; Unit)Unit">foreach</a> <span class="delimiter">{</span> <a title="Checkable.this.global.Symbol" id="1027637">bc</a> =&gt;
      <span class="keyword">val</span> <a title="List[Checkable.this.global.Type]" id="1027638">tps1</a> = <span class="delimiter">(</span><a href="#1027524" title="Checkable.this.global.Type">from</a> <a href="../../../reflect/internal/Types.scala.html#408459" title="(clazz: Checkable.this.global.Symbol)Checkable.this.global.Type">baseType</a> <a href="#1027637" title="Checkable.this.global.Symbol">bc</a><span class="delimiter">)</span>.<a href="../../../reflect/internal/Types.scala.html#408421" title="=&gt; List[Checkable.this.global.Type]">typeArgs</a>
      <span class="keyword">val</span> <a title="List[Checkable.this.global.Type]" id="1027639">tps2</a> = <span class="delimiter">(</span><a href="#1027528" title="Checkable.this.global.Type">tvarType</a> <a href="../../../reflect/internal/Types.scala.html#408459" title="(clazz: Checkable.this.global.Symbol)Checkable.this.global.Type">baseType</a> <a href="#1027637" title="Checkable.this.global.Symbol">bc</a><span class="delimiter">)</span>.<a href="../../../reflect/internal/Types.scala.html#408421" title="=&gt; List[Checkable.this.global.Type]">typeArgs</a>
      <a href="../../../Predef.scala.html#7531" title="(x: (List[Checkable.this.global.Type], List[Checkable.this.global.Type]))runtime.Tuple2Zipped.Ops[List[Checkable.this.global.Type],List[Checkable.this.global.Type]]" class="delimiter">(</a><a href="#1027638" title="List[Checkable.this.global.Type]">tps1</a>, <a href="#1027639" title="List[Checkable.this.global.Type]">tps2</a><span class="delimiter">)</span>.<a href="../../../runtime/Tuple2Zipped.scala.html#60613" title="(implicit w1: List[Checkable.this.global.Type] =&gt; scala.collection.TraversableLike[Checkable.this.global.Type,List[Checkable.this.global.Type]], implicit w2: List[Checkable.this.global.Type] =&gt; scala.collection.IterableLike[Checkable.this.global.Type,List[Checkable.this.global.Type]])scala.runtime.Tuple2Zipped[Checkable.this.global.Type,List[Checkable.this.global.Type],Checkable.this.global.Type,List[Checkable.this.global.Type]]">zipped</a> <a href="../../../runtime/Tuple2Zipped.scala.html#486057" title="(f: (Checkable.this.global.Type, Checkable.this.global.Type) =&gt; Boolean)Unit">foreach</a> <span class="delimiter">(</span><a href="#1027702" title="Checkable.this.global.Type">_</a> <a href="../../../reflect/internal/Types.scala.html#408485" title="(that: Checkable.this.global.Type)Boolean">=:=</a> <a href="#1027703" title="Checkable.this.global.Type">_</a><span class="delimiter">)</span>
      // Alternate, variance respecting formulation causes
      // neg/unchecked3.scala to fail (abstract types).  TODO -
      // figure it out. It seems there is more work to do if I
      // allow for variance, because the constraints accumulate
      // as bounds and &quot;tvar.instValid&quot; is false.
      //
      // foreach3(tps1, tps2, bc.typeParams)((tp1, tp2, tparam) =&gt;
      //   if (tparam.initialize.isCovariant) tp1 &lt;:&lt; tp2
      //   else if (tparam.isContravariant) tp2 &lt;:&lt; tp1
      //   else tp1 =:= tp2
      // )
    <span class="delimiter">}</span>

    <span class="keyword">val</span> <a title="List[Checkable.this.global.Type]" id="1027530">resArgs</a> = <a href="#1027526" title="=&gt; List[Checkable.this.global.Symbol]">tparams</a> <a href="../../../collection/IterableLike.scala.html#58590" title="(that: scala.collection.GenIterable[Checkable.this.global.TypeVar])(implicit bf: scala.collection.generic.CanBuildFrom[List[Checkable.this.global.Symbol],(Checkable.this.global.Symbol, Checkable.this.global.TypeVar),List[(Checkable.this.global.Symbol, Checkable.this.global.TypeVar)]])List[(Checkable.this.global.Symbol, Checkable.this.global.TypeVar)]">zip</a> <a href="#1027527" title="List[Checkable.this.global.TypeVar]">tvars</a> <a href="../../../collection/TraversableLike.scala.html#58063" title="(f: ((Checkable.this.global.Symbol, Checkable.this.global.TypeVar)) =&gt; Checkable.this.global.Type)(implicit bf: scala.collection.generic.CanBuildFrom[List[(Checkable.this.global.Symbol, Checkable.this.global.TypeVar)],Checkable.this.global.Type,List[Checkable.this.global.Type]])List[Checkable.this.global.Type]">map</a> <a href="#1027782" title="(Checkable.this.global.Symbol, Checkable.this.global.TypeVar)" class="delimiter">{</a>
      <span class="keyword">case</span> <span class="delimiter">(</span><a href="../../../Tuple2.scala.html#60635" title="Checkable.this.global.Symbol" id="3362339">_</a>, <a href="../../../Tuple2.scala.html#60637" title="Checkable.this.global.TypeVar" id="1027785">tvar</a><span class="delimiter">)</span> <span class="keyword">if</span> <a href="#1027785" title="Checkable.this.global.TypeVar">tvar</a>.<a href="../../../reflect/internal/Types.scala.html#450901" title="=&gt; Boolean">instValid</a> =&gt; <a href="#1027785" title="Checkable.this.global.TypeVar">tvar</a>.<a href="../../../reflect/internal/Types.scala.html#450893" title="=&gt; Checkable.this.global.TypeConstraint">constr</a>.<a href="#3362342" title="(x: Checkable.this.global.Type)Checkable.this.global.Type">inst</a>
      <span class="keyword">case</span> <span class="delimiter">(</span><a href="../../../Tuple2.scala.html#60635" title="Checkable.this.global.Symbol" id="1027788">tparam</a>, <a href="../../../Tuple2.scala.html#60637" title="Checkable.this.global.TypeVar" id="3362340">_</a><span class="delimiter">)</span>                 =&gt; <a href="#1027788" title="Checkable.this.global.Symbol">tparam</a>.<a href="#3362342" title="(x: Checkable.this.global.Type)Checkable.this.global.Type">tpe</a>
    <span class="delimiter">}</span>
    <a href="../../../reflect/internal/Types.scala.html#407409" title="(tyconSym: Checkable.this.global.Symbol, args: Checkable.this.global.Type*)Checkable.this.global.Type">appliedType</a><span class="delimiter">(</span><a href="#1027525" title="Checkable.this.global.Symbol">to</a>, <a href="#1027530" title="List[Checkable.this.global.Type]">resArgs</a>: _*<span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(sym: Checkable.this.global.Symbol)Boolean" id="538134">isUnwarnableTypeArgSymbol</a><span class="delimiter">(</span><a title="Checkable.this.global.Symbol" id="1027821">sym</a>: <a href="../../../reflect/internal/Symbols.scala.html#407146" title="Checkable.this.global.Symbol">Symbol</a><span class="delimiter">)</span> = <span class="delimiter">(</span>
       <a href="#1027821" title="Checkable.this.global.Symbol">sym</a>.<a href="../../../reflect/internal/Symbols.scala.html#411192" title="=&gt; Boolean">isTypeParameter</a>                     // dummy
    <a href="../../../Boolean.scala.html#57825" title="(x: Boolean)Boolean">||</a> <span class="delimiter">(</span><a href="#1027821" title="Checkable.this.global.Symbol">sym</a>.<a href="../../../reflect/internal/Symbols.scala.html#411087" title="=&gt; sym.NameType">name</a>.<a href="../../../reflect/internal/Names.scala.html#410379" title="=&gt; Checkable.this.global.TermName">toTermName</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="../../../reflect/internal/StdNames.scala.html#407871" title="Checkable.this.global.nme.type">nme</a>.<a href="../../../reflect/internal/StdNames.scala.html#413714" title="=&gt; Checkable.this.global.nme.NameType">WILDCARD</a><span class="delimiter">)</span>   // _
    <a href="../../../Boolean.scala.html#57825" title="(x: Boolean)Boolean">||</a> <a href="../../../reflect/internal/StdNames.scala.html#407871" title="Checkable.this.global.nme.type">nme</a>.<a href="../../../reflect/internal/StdNames.scala.html#414057" title="(name: Checkable.this.global.Name)Boolean">isVariableName</a><span class="delimiter">(</span><a href="#1027821" title="Checkable.this.global.Symbol">sym</a>.<a href="../../../reflect/internal/Symbols.scala.html#411087" title="=&gt; sym.NameType">name</a><span class="delimiter">)</span>            // type variable
  <span class="delimiter">)</span>
  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(arg: Checkable.this.global.Type)Boolean" id="538135">isUnwarnableTypeArg</a><span class="delimiter">(</span><a title="Checkable.this.global.Type" id="1027829">arg</a>: <a href="../../../reflect/internal/Types.scala.html#407270" title="Checkable.this.global.Type">Type</a><span class="delimiter">)</span> = <span class="delimiter">(</span>
       <a href="#538136" title="(tp: Checkable.this.global.Type)Boolean">uncheckedOk</a><span class="delimiter">(</span><a href="#1027829" title="Checkable.this.global.Type">arg</a><span class="delimiter">)</span>                                 // @unchecked T
    <a href="../../../Boolean.scala.html#57825" title="(x: Boolean)Boolean">||</a> <a href="#538134" title="(sym: Checkable.this.global.Symbol)Boolean">isUnwarnableTypeArgSymbol</a><span class="delimiter">(</span><a href="#1027829" title="Checkable.this.global.Type">arg</a>.<a href="../../../reflect/internal/Types.scala.html#408409" title="=&gt; Checkable.this.global.Symbol">typeSymbolDirect</a><span class="delimiter">)</span>  // has to be direct: see pos/t1439
  <span class="delimiter">)</span>
  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(tp: Checkable.this.global.Type)Boolean" id="538136">uncheckedOk</a><span class="delimiter">(</span><a title="Checkable.this.global.Type" id="1027830">tp</a>: <a href="../../../reflect/internal/Types.scala.html#407270" title="Checkable.this.global.Type">Type</a><span class="delimiter">)</span> = <a href="#1027830" title="Checkable.this.global.Type">tp</a> <a href="../../../reflect/internal/AnnotationInfos.scala.html#408615" title="(cls: Checkable.this.global.Symbol)Boolean">hasAnnotation</a> <a href="../../../reflect/internal/Definitions.scala.html#409205" title="=&gt; Checkable.this.global.ClassSymbol">UncheckedClass</a>

  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(tp: Checkable.this.global.Type)List[Checkable.this.global.Type]" id="538137">typeArgsInTopLevelType</a><span class="delimiter">(</span><a title="Checkable.this.global.Type" id="1027832">tp</a>: <a href="../../../reflect/internal/Types.scala.html#407270" title="Checkable.this.global.Type">Type</a><span class="delimiter">)</span>: <a href="../../../collection/immutable/List.scala.html#11952" title="List[Checkable.this.global.Type]">List</a><span class="delimiter">[</span>Type<span class="delimiter">]</span> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="List[Checkable.this.global.Type]" id="1027833">tps</a> = <a href="#1027832" title="Checkable.this.global.Type">tp</a> <span class="keyword">match</span> <span class="delimiter">{</span>
      <span class="keyword">case</span> RefinedType<a href="#3362347" title="List[Checkable.this.global.Type]" id="3362350" class="delimiter">(</a><a href="../../../reflect/internal/Types.scala.html#410866" title="List[Checkable.this.global.Type]" id="1027836">parents</a>, <a href="../../../reflect/internal/Types.scala.html#410868" title="Checkable.this.global.Scope" id="3362348">_</a><span class="delimiter">)</span>              =&gt; <a href="#1027836" title="List[Checkable.this.global.Type]">parents</a> <a href="#3362370" title="(x: List[Checkable.this.global.Type])List[Checkable.this.global.Type]">flatMap</a> <a href="#538137" title="(tp: Checkable.this.global.Type)List[Checkable.this.global.Type]">typeArgsInTopLevelType</a>
      <span class="keyword">case</span> TypeRef<a href="#3362347" title="Boolean" id="3362355" class="delimiter">(</a><a href="../../../reflect/internal/Types.scala.html#410887" title="Checkable.this.global.Type" id="3362351">_</a>, <a href="../../../reflect/internal/Types.scala.html#410889" title="Checkable.this.global.Symbol" id="3362365">ArrayClass</a>, <a href="../../../collection/immutable/List.scala.html#206583" title="Checkable.this.global.Type" id="1027887">arg</a> <a href="../../../reflect/internal/Types.scala.html#410891" title="List[Checkable.this.global.Type]" id="3362359">::</a> <a href="../../../collection/immutable/List.scala.html#206584" title="List[Checkable.this.global.Type]" id="3362366">Nil</a><span class="delimiter">)</span>   =&gt; <a href="#538137" title="(tp: Checkable.this.global.Type)List[Checkable.this.global.Type]">typeArgsInTopLevelType</a><a href="#3362370" title="(x: List[Checkable.this.global.Type])List[Checkable.this.global.Type]" class="delimiter">(</a><a href="#1027887" title="Checkable.this.global.Type">arg</a><span class="delimiter">)</span>
      <span class="keyword">case</span> TypeRef<span class="delimiter">(</span><a href="../../../reflect/internal/Types.scala.html#410887" title="Checkable.this.global.Type" id="1027891">pre</a>, <a href="../../../reflect/internal/Types.scala.html#410889" title="Checkable.this.global.Symbol" id="1027892">sym</a>, <a href="../../../reflect/internal/Types.scala.html#410891" title="List[Checkable.this.global.Type]" id="1027893">args</a><span class="delimiter">)</span>              =&gt; <a href="#538137" title="(tp: Checkable.this.global.Type)List[Checkable.this.global.Type]">typeArgsInTopLevelType</a><span class="delimiter">(</span><a href="#1027891" title="Checkable.this.global.Type">pre</a><span class="delimiter">)</span> <a href="#3362370" title="(x: List[Checkable.this.global.Type])List[Checkable.this.global.Type]">++</a> <a href="#1027893" title="List[Checkable.this.global.Type]">args</a>
      <span class="keyword">case</span> ExistentialType<a href="#3362347" title="List[Checkable.this.global.Type]" id="3362364" class="delimiter">(</a><a href="../../../reflect/internal/Types.scala.html#410683" title="List[Checkable.this.global.Symbol]" id="1027954">tparams</a>, <a href="../../../reflect/internal/Types.scala.html#410685" title="Checkable.this.global.Type" id="1027955">underlying</a><span class="delimiter">)</span> =&gt; <a href="#1027954" title="List[Checkable.this.global.Symbol]">tparams</a>.<a href="../../../collection/TraversableLike.scala.html#58063" title="(f: Checkable.this.global.Symbol =&gt; Checkable.this.global.Type)(implicit bf: scala.collection.generic.CanBuildFrom[List[Checkable.this.global.Symbol],Checkable.this.global.Type,List[Checkable.this.global.Type]])List[Checkable.this.global.Type]">map</a><a href="../../../collection/immutable/List.scala.html#62442" title="scala.collection.generic.CanBuildFrom[scala.collection.immutable.List.Coll,Checkable.this.global.Type,List[Checkable.this.global.Type]]" class="delimiter">(</a><a href="#1027972" title="Checkable.this.global.Symbol">_</a>.<a href="../../../reflect/internal/Symbols.scala.html#411365" title="=&gt; Checkable.this.global.Type">tpe</a><span class="delimiter">)</span> <a href="#3362370" title="(x: List[Checkable.this.global.Type])List[Checkable.this.global.Type]">++</a> <a href="#538137" title="(tp: Checkable.this.global.Type)List[Checkable.this.global.Type]">typeArgsInTopLevelType</a><span class="delimiter">(</span><a href="#1027955" title="Checkable.this.global.Type">underlying</a><span class="delimiter">)</span>
      <span class="keyword">case</span> _                                    =&gt; <a href="#3362370" title="(x: List[Checkable.this.global.Type])List[Checkable.this.global.Type]">Nil</a>
    <span class="delimiter">}</span>
    <a href="#1027833" title="List[Checkable.this.global.Type]">tps</a> <a href="../../../collection/TraversableLike.scala.html#58074" title="(p: Checkable.this.global.Type =&gt; Boolean)List[Checkable.this.global.Type]">filterNot</a> <a href="#538135" title="(arg: Checkable.this.global.Type)Boolean">isUnwarnableTypeArg</a>
  <span class="delimiter">}</span>

  <span class="keyword">private</span> <span class="keyword">class</span> <a title="class CheckabilityChecker extends Object" id="538138">CheckabilityChecker</a><a href="#538138" title="Checkable.this.CheckabilityChecker" class="delimiter">(</a><span class="keyword">val</span> <a title="Checkable.this.global.Type" id="1028174">X</a>: <a href="../../../reflect/internal/Types.scala.html#407270" title="Checkable.this.global.Type">Type</a>, <span class="keyword">val</span> <a title="Checkable.this.global.Type" id="1028175">P</a>: <a href="../../../reflect/internal/Types.scala.html#407270" title="Checkable.this.global.Type">Type</a><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span class="keyword">def</span> <a title="=&gt; Checkable.this.global.Symbol" id="1028070">Xsym</a> = <a href="#1028174" title="=&gt; Checkable.this.global.Type">X</a>.<a href="../../../reflect/internal/Types.scala.html#408407" title="=&gt; Checkable.this.global.Symbol">typeSymbol</a>
    <span class="keyword">def</span> <a title="=&gt; Checkable.this.global.Symbol" id="1028071">Psym</a> = <a href="#1028175" title="=&gt; Checkable.this.global.Type">P</a>.<a href="../../../reflect/internal/Types.scala.html#408407" title="=&gt; Checkable.this.global.Symbol">typeSymbol</a>
    <span class="keyword">def</span> <a title="=&gt; Checkable.this.global.Type" id="1028072">XR</a>   = <a href="#538133" title="(from: Checkable.this.global.Type, to: Checkable.this.global.Symbol)Checkable.this.global.Type">propagateKnownTypes</a><span class="delimiter">(</span><a href="#1028174" title="=&gt; Checkable.this.global.Type">X</a>, <a href="#1028071" title="=&gt; Checkable.this.global.Symbol">Psym</a><span class="delimiter">)</span>
    // sadly the spec says (new java.lang.Boolean(true)).isInstanceOf[scala.Boolean]
    <span class="keyword">def</span> <a title="=&gt; Boolean" id="1028073">P1</a>   = <a href="#1028174" title="=&gt; Checkable.this.global.Type">X</a> <a href="../../../reflect/internal/Types.scala.html#408482" title="(that: Checkable.this.global.Type)Boolean">matchesPattern</a> <a href="#1028175" title="=&gt; Checkable.this.global.Type">P</a>
    <span class="keyword">def</span> <a title="=&gt; Boolean" id="1028074">P2</a>   = <a href="../../../Boolean.scala.html#57822" title="=&gt; Boolean">!</a><a href="#1028071" title="=&gt; Checkable.this.global.Symbol">Psym</a>.<a href="../../../reflect/internal/Symbols.scala.html#411183" title="=&gt; Boolean">isPrimitiveValueClass</a> <a href="../../../Boolean.scala.html#57826" title="(x: Boolean)Boolean">&amp;&amp;</a> <a href="#1027523" title="(tp1: Checkable.this.global.Type, tp2: Checkable.this.global.Type)Boolean">isNeverSubType</a><span class="delimiter">(</span><a href="#1028174" title="=&gt; Checkable.this.global.Type">X</a>, <a href="#1028175" title="=&gt; Checkable.this.global.Type">P</a><span class="delimiter">)</span>
    <span class="keyword">def</span> <a title="=&gt; Boolean" id="1028075">P3</a>   = <a href="../../../reflect/internal/Types.scala.html#407564" title="(tpe: Checkable.this.global.Type)Boolean">isNonRefinementClassType</a><span class="delimiter">(</span><a href="#1028175" title="=&gt; Checkable.this.global.Type">P</a><span class="delimiter">)</span> <a href="../../../Boolean.scala.html#57826" title="(x: Boolean)Boolean">&amp;&amp;</a> <span class="delimiter">(</span><a href="#1028072" title="=&gt; Checkable.this.global.Type">XR</a> <a href="../../../reflect/internal/Types.scala.html#408482" title="(that: Checkable.this.global.Type)Boolean">matchesPattern</a> <a href="#1028175" title="=&gt; Checkable.this.global.Type">P</a><span class="delimiter">)</span>
    <span class="keyword">def</span> <a title="=&gt; Boolean" id="1028076">P4</a>   = <a href="../../../Boolean.scala.html#57822" title="=&gt; Boolean">!</a><span class="delimiter">(</span><a href="#1028073" title="=&gt; Boolean">P1</a> <a href="../../../Boolean.scala.html#57825" title="(x: Boolean)Boolean">||</a> <a href="#1028074" title="=&gt; Boolean">P2</a> <a href="../../../Boolean.scala.html#57825" title="(x: Boolean)Boolean">||</a> <a href="#1028075" title="=&gt; Boolean">P3</a><span class="delimiter">)</span>

    <span class="keyword">def</span> <a title="=&gt; String" id="1028077">summaryString</a> = <a href="../../../Predef.scala.html#7604" title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps">f</a>&quot;&quot;&quot;
      |Checking checkability of (x: $<a href="#1028174" title="Any" id="1028149">X</a>) against pattern $<a href="#1028175" title="Any" id="1028150">P</a>
      |[P1] $<a href="#1028073" title="Any" id="1028151">P1</a>%-6s X &lt;: P             // $<a href="#1028174" title="Any" id="1028152">X</a>  &lt;: $<a href="#1028175" title="Any" id="1028153">P</a>
      |[P2] $<a href="#1028074" title="Any" id="1028154">P2</a>%-6s x ∉ P              // (x ∈ $<a href="#1028174" title="Any" id="1028155">X</a>) ⇒ (x ∉ $<a href="#1028175" title="Any" id="1028156">P</a>)
      |[P3] $<a href="#1028075" title="Any" id="1028157">P3</a>%-6s XR &lt;: P            // $<a href="#1028072" title="Any" id="1028158">XR</a> &lt;: $<a href="#1028175" title="Any" id="1028159">P</a>
      |[P4] $<a href="#1028076" title="Any" id="1028160">P4</a><span class="string">%-6s None of the above  // !(P1 || P2 || P3)
    &quot;&quot;&quot;</span>.<a href="../../../collection/immutable/StringLike.scala.html#59864" title="=&gt; String">stripMargin</a>.<span title="()String">trim</span>

    <span class="keyword">val</span> <a title="scala.tools.nsc.typechecker.Checkability" id="1028078">result</a> = <span class="delimiter">(</span>
      <span title="scala.tools.nsc.typechecker.Checkability" class="keyword">if</span> <span class="delimiter">(</span><a href="#1028174" title="=&gt; Checkable.this.global.Type">X</a>.<a href="../../../reflect/internal/Types.scala.html#408402" title="=&gt; Boolean">isErroneous</a> <a href="../../../Boolean.scala.html#57825" title="(x: Boolean)Boolean">||</a> <a href="#1028175" title="=&gt; Checkable.this.global.Type">P</a>.<a href="../../../reflect/internal/Types.scala.html#408402" title="=&gt; Boolean">isErroneous</a><span class="delimiter">)</span> <a href="#1027513" title="=&gt; scala.tools.nsc.typechecker.Checkability">CheckabilityError</a>
      <span class="keyword">else</span> <span title="scala.tools.nsc.typechecker.Checkability" class="keyword">if</span> <span class="delimiter">(</span><a href="#1028073" title="=&gt; Boolean">P1</a><span class="delimiter">)</span> <a href="#1027505" title="=&gt; scala.tools.nsc.typechecker.Checkability">StaticallyTrue</a>
      <span class="keyword">else</span> <span title="scala.tools.nsc.typechecker.Checkability" class="keyword">if</span> <span class="delimiter">(</span><a href="#1028074" title="=&gt; Boolean">P2</a><span class="delimiter">)</span> <a href="#1027507" title="=&gt; scala.tools.nsc.typechecker.Checkability">StaticallyFalse</a>
      <span class="keyword">else</span> <span title="scala.tools.nsc.typechecker.Checkability" class="keyword">if</span> <span class="delimiter">(</span><a href="#1028075" title="=&gt; Boolean">P3</a><span class="delimiter">)</span> <a href="#1027509" title="=&gt; scala.tools.nsc.typechecker.Checkability">RuntimeCheckable</a>
      <span class="keyword">else</span> <span title="scala.tools.nsc.typechecker.Checkability" class="keyword">if</span> <span class="delimiter">(</span><a href="#1028080" title="=&gt; Checkable.this.global.Type">uncheckableType</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="../../../reflect/internal/Types.scala.html#407284" title="Checkable.this.global.NoType.type">NoType</a><span class="delimiter">)</span> <span class="delimiter">{</span>
        // Avoid warning (except ourselves) if we can't pinpoint the uncheckable type
        <a href="../Global.scala.html#537503" title="(msg: =&gt; String)Unit">debugwarn</a><span class="delimiter">(</span><span title="String(&quot;Checkability checker says \'Uncheckable\', but uncheckable type cannot be found:\n&quot;)" class="string">&quot;Checkability checker says 'Uncheckable', but uncheckable type cannot be found:\n&quot;</span> <span title="(x$1: Any)String">+</span> <a href="#1028077" title="=&gt; String">summaryString</a><span class="delimiter">)</span>
        <a href="#1027513" title="=&gt; scala.tools.nsc.typechecker.Checkability">CheckabilityError</a>
      <span class="delimiter">}</span>
      <span class="keyword">else</span> <a href="#1027511" title="=&gt; scala.tools.nsc.typechecker.Checkability">Uncheckable</a>
    <span class="delimiter">)</span>
    <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="Checkable.this.global.Type" id="1028081">uncheckableType</a> = <span title="Checkable.this.global.Type" class="keyword">if</span> <span class="delimiter">(</span><a href="#1028071" title="=&gt; Checkable.this.global.Symbol">Psym</a>.<a href="../../../reflect/internal/Symbols.scala.html#411171" title="=&gt; Boolean">isAbstractType</a><span class="delimiter">)</span> <a href="#1028175" title="=&gt; Checkable.this.global.Type">P</a> <span class="keyword">else</span> <span class="delimiter">{</span>
      <span class="keyword">val</span> <a title="scala.collection.immutable.Set[Checkable.this.global.Type]" id="1028099">possibles</a> = <a href="#538137" title="(tp: Checkable.this.global.Type)List[Checkable.this.global.Type]">typeArgsInTopLevelType</a><span class="delimiter">(</span><a href="#1028175" title="=&gt; Checkable.this.global.Type">P</a><span class="delimiter">)</span>.<a href="../../../collection/TraversableOnce.scala.html#58270" title="scala.collection.immutable.Set[Checkable.this.global.Type]">toSet</a>
      <span class="keyword">val</span> <a title="Option[Checkable.this.global.Type]" id="1028100">opt</a> = <a href="#1028099" title="scala.collection.immutable.Set[Checkable.this.global.Type]">possibles</a> <a href="../../../collection/IterableLike.scala.html#58567" title="(p: Checkable.this.global.Type =&gt; Boolean)Option[Checkable.this.global.Type]">find</a> <span class="delimiter">{</span> <a title="Checkable.this.global.Type" id="1028113">targ</a> =&gt;
        // Create a derived type with every possibly uncheckable type replaced
        // with a WildcardType, except for 'targ'. If !(XR &lt;: derived) then
        // 'targ' is uncheckable.
        <span class="keyword">val</span> <a title="Checkable.this.global.Type" id="1028114">derived</a> = <a href="#1028175" title="=&gt; Checkable.this.global.Type">P</a> <a href="../../../reflect/internal/Types.scala.html#408477" title="(f: Checkable.this.global.Type =&gt; Checkable.this.global.Type)Checkable.this.global.Type">map</a> <span class="delimiter">(</span><a title="Checkable.this.global.Type" id="1028118">tp</a> =&gt; <span title="Checkable.this.global.Type" class="keyword">if</span> <span class="delimiter">(</span><a href="../../../collection/GenSetLike.scala.html#66403" title="(elem: Checkable.this.global.Type)Boolean">possibles</a><span class="delimiter">(</span><a href="#1028118" title="Checkable.this.global.Type">tp</a><span class="delimiter">)</span> <a href="../../../Boolean.scala.html#57826" title="(x: Boolean)Boolean">&amp;&amp;</a> <a href="../../../Boolean.scala.html#57822" title="=&gt; Boolean">!</a><span class="delimiter">(</span><a href="#1028118" title="Checkable.this.global.Type">tp</a> <a href="../../../reflect/internal/Types.scala.html#408485" title="(that: Checkable.this.global.Type)Boolean">=:=</a> <a href="#1028113" title="Checkable.this.global.Type">targ</a><span class="delimiter">)</span><span class="delimiter">)</span> <a href="../../../reflect/internal/Types.scala.html#407279" title="Checkable.this.global.WildcardType.type">WildcardType</a> <span class="keyword">else</span> <a href="#1028118" title="Checkable.this.global.Type">tp</a><span class="delimiter">)</span>
        <a href="../../../Boolean.scala.html#57822" title="=&gt; Boolean">!</a><span class="delimiter">(</span><a href="#1028072" title="=&gt; Checkable.this.global.Type">XR</a> <a href="../../../reflect/internal/Types.scala.html#408481" title="(that: Checkable.this.global.Type)Boolean">&lt;:&lt;</a> <a href="#1028114" title="Checkable.this.global.Type">derived</a><span class="delimiter">)</span>
      <span class="delimiter">}</span>
      <a href="#1028100" title="Option[Checkable.this.global.Type]">opt</a> <a href="../../../Option.scala.html#62859" title="(default: =&gt; Checkable.this.global.Type)Checkable.this.global.Type">getOrElse</a> <a href="../../../reflect/internal/Types.scala.html#407284" title="Checkable.this.global.NoType.type">NoType</a>
    <span class="delimiter">}</span>

    <span class="keyword">def</span> <a title="=&gt; Boolean" id="1028082">neverSubClass</a> = <a href="#1027520" title="(sym1: Checkable.this.global.Symbol, sym2: Checkable.this.global.Symbol)Boolean">isNeverSubClass</a><span class="delimiter">(</span><a href="#1028070" title="=&gt; Checkable.this.global.Symbol">Xsym</a>, <a href="#1028071" title="=&gt; Checkable.this.global.Symbol">Psym</a><span class="delimiter">)</span>
    <span class="keyword">def</span> <a title="=&gt; Boolean" id="1028083">neverMatches</a>  = <a href="#1028078" title="=&gt; scala.tools.nsc.typechecker.Checkability">result</a> <span title="(x$1: Any)Boolean">==</span> <a href="#1027507" title="=&gt; scala.tools.nsc.typechecker.Checkability">StaticallyFalse</a>
    <span class="keyword">def</span> <a title="=&gt; Boolean" id="1028084">isUncheckable</a> = <a href="#1028078" title="=&gt; scala.tools.nsc.typechecker.Checkability">result</a> <span title="(x$1: Any)Boolean">==</span> <a href="#1027511" title="=&gt; scala.tools.nsc.typechecker.Checkability">Uncheckable</a>
    <span class="keyword">def</span> <a title="=&gt; String" id="1028085">uncheckableMessage</a> = <a href="#1028080" title="=&gt; Checkable.this.global.Type">uncheckableType</a> <span class="keyword">match</span> <span class="delimiter">{</span>
      <span class="keyword">case</span> <a href="../../../reflect/internal/Types.scala.html#407284" title="String" id="3362394">NoType</a>                                   =&gt; <a href="#3362396" title="(x: String)String" class="string">&quot;something&quot;</a>
      <span class="keyword">case</span> tp @ RefinedType<a href="#3362384" title="String" id="3362389" class="delimiter">(</a><a href="../../../reflect/internal/Types.scala.html#410866" title="List[Checkable.this.global.Type]" id="3362386">_</a>, <a href="../../../reflect/internal/Types.scala.html#410868" title="Checkable.this.global.Scope" id="3362387">_</a><span class="delimiter">)</span>                   =&gt; <span title="String(&quot;refinement &quot;)" class="string">&quot;refinement &quot;</span> <a href="#3362396" title="(x: String)String">+</a> tp
      <span class="keyword">case</span> TypeRef<a href="#3362384" title="String" id="3362393" class="delimiter">(</a><a href="../../../reflect/internal/Types.scala.html#410887" title="Checkable.this.global.Type" id="3362390">_</a>, <a href="../../../reflect/internal/Types.scala.html#410889" title="Checkable.this.global.Symbol" id="1028186">sym</a>, <a href="../../../reflect/internal/Types.scala.html#410891" title="List[Checkable.this.global.Type]" id="3362391">_</a><span class="delimiter">)</span> <span class="keyword">if</span> <a href="#1028186" title="Checkable.this.global.Symbol">sym</a>.<a href="../../../reflect/internal/Symbols.scala.html#411171" title="=&gt; Boolean">isAbstractType</a> =&gt; <span title="String(&quot;abstract type &quot;)" class="string">&quot;abstract type &quot;</span> <a href="#3362396" title="(x: String)String">+</a> <a href="#1028186" title="Checkable.this.global.Symbol">sym</a>.<a href="../../../reflect/internal/Symbols.scala.html#411087" title="=&gt; sym.NameType">name</a>
      <span class="keyword">case</span> tp                                       =&gt; <span title="String(&quot;non-variable type argument &quot;)" class="string">&quot;non-variable type argument &quot;</span> <a href="#3362396" title="(x: String)String">+</a> tp
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  /** X, P, [P1], etc. are all explained at the top of the file.
   */
  <span class="keyword">private</span> <span class="keyword">object</span> <a title="Checkable.this.CheckabilityChecker.type" id="538139">CheckabilityChecker</a> <a href="#538140" title="Checkable.this.CheckabilityChecker.type" class="delimiter">{</a>
    /** Are these symbols classes with no subclass relationship? */
    <span class="keyword">def</span> <a title="(sym1: Checkable.this.global.Symbol, sym2: Checkable.this.global.Symbol)Boolean" id="1027517">areUnrelatedClasses</a><span class="delimiter">(</span><a title="Checkable.this.global.Symbol" id="1028189">sym1</a>: <a href="../../../reflect/internal/Symbols.scala.html#407146" title="Checkable.this.global.Symbol">Symbol</a>, <a title="Checkable.this.global.Symbol" id="1028190">sym2</a>: <a href="../../../reflect/internal/Symbols.scala.html#407146" title="Checkable.this.global.Symbol">Symbol</a><span class="delimiter">)</span> = <span class="delimiter">(</span>
         <a href="#1028189" title="Checkable.this.global.Symbol">sym1</a>.<a href="../../../reflect/api/Symbols.scala.html#402403" title="=&gt; Boolean">isClass</a>
      <a href="../../../Boolean.scala.html#57826" title="(x: Boolean)Boolean">&amp;&amp;</a> <a href="#1028190" title="Checkable.this.global.Symbol">sym2</a>.<a href="../../../reflect/api/Symbols.scala.html#402403" title="=&gt; Boolean">isClass</a>
      <a href="../../../Boolean.scala.html#57826" title="(x: Boolean)Boolean">&amp;&amp;</a> <a href="../../../Boolean.scala.html#57822" title="=&gt; Boolean">!</a><span class="delimiter">(</span><a href="#1028189" title="Checkable.this.global.Symbol">sym1</a> <a href="../../../reflect/internal/Symbols.scala.html#411410" title="(that: Checkable.this.global.Symbol)Boolean">isSubClass</a> <a href="#1028190" title="Checkable.this.global.Symbol">sym2</a><span class="delimiter">)</span>
      <a href="../../../Boolean.scala.html#57826" title="(x: Boolean)Boolean">&amp;&amp;</a> <a href="../../../Boolean.scala.html#57822" title="=&gt; Boolean">!</a><span class="delimiter">(</span><a href="#1028190" title="Checkable.this.global.Symbol">sym2</a> <a href="../../../reflect/internal/Symbols.scala.html#411410" title="(that: Checkable.this.global.Symbol)Boolean">isSubClass</a> <a href="#1028189" title="Checkable.this.global.Symbol">sym1</a><span class="delimiter">)</span>
    <span class="delimiter">)</span>
    /** Are all children of these symbols pairwise irreconcilable? */
    <span class="keyword">def</span> <a title="(sym1: Checkable.this.global.Symbol, sym2: Checkable.this.global.Symbol)Boolean" id="1027518">allChildrenAreIrreconcilable</a><span class="delimiter">(</span><a title="Checkable.this.global.Symbol" id="1028193">sym1</a>: <a href="../../../reflect/internal/Symbols.scala.html#407146" title="Checkable.this.global.Symbol">Symbol</a>, <a title="Checkable.this.global.Symbol" id="1028194">sym2</a>: <a href="../../../reflect/internal/Symbols.scala.html#407146" title="Checkable.this.global.Symbol">Symbol</a><span class="delimiter">)</span> = <span class="delimiter">(</span>
      <a href="#1028193" title="Checkable.this.global.Symbol">sym1</a>.<a href="../../../reflect/internal/Symbols.scala.html#411487" title="=&gt; Set[Checkable.this.global.Symbol]">children</a>.<a href="../../../collection/TraversableOnce.scala.html#58263" title="=&gt; List[Checkable.this.global.Symbol]">toList</a> <a href="../../../collection/LinearSeqOptimized.scala.html#86378" title="(p: Checkable.this.global.Symbol =&gt; Boolean)Boolean">forall</a> <span class="delimiter">(</span><a title="Checkable.this.global.Symbol" id="1028208">c1</a> =&gt;
        <a href="#1028194" title="Checkable.this.global.Symbol">sym2</a>.<a href="../../../reflect/internal/Symbols.scala.html#411487" title="=&gt; Set[Checkable.this.global.Symbol]">children</a>.<a href="../../../collection/TraversableOnce.scala.html#58263" title="=&gt; List[Checkable.this.global.Symbol]">toList</a> <a href="../../../collection/LinearSeqOptimized.scala.html#86378" title="(p: Checkable.this.global.Symbol =&gt; Boolean)Boolean">forall</a> <span class="delimiter">(</span><a title="Checkable.this.global.Symbol" id="1028218">c2</a> =&gt;
          <a href="#1027519" title="(sym1: Checkable.this.global.Symbol, sym2: Checkable.this.global.Symbol)Boolean">areIrreconcilableAsParents</a><span class="delimiter">(</span><a href="#1028208" title="Checkable.this.global.Symbol">c1</a>, <a href="#1028218" title="Checkable.this.global.Symbol">c2</a><span class="delimiter">)</span>
        <span class="delimiter">)</span>
      <span class="delimiter">)</span>
    <span class="delimiter">)</span>
    /** Is it impossible for the given symbols to be parents in the same class?
     *  This means given A and B, can there be an instance of A with B? This is the
     *  case if neither A nor B is a subclass of the other, and one of the following
     *  additional conditions holds:
     *   - either A or B is effectively final
     *   - neither A nor B is a trait (i.e. both are actual classes, not eligible for mixin)
     *   - both A and B are sealed, and every possible pairing of their children is irreconcilable
     *
     *  TODO: the last two conditions of the last possibility (that the symbols are not of
     *  classes being compiled in the current run) are because this currently runs too early,
     *  and .children returns Nil for sealed classes because their children will not be
     *  populated until typer.  It was too difficult to move things around for the moment,
     *  so I will consult with moors about the optimal time to be doing this.
     */
    <span class="keyword">def</span> <a title="(sym1: Checkable.this.global.Symbol, sym2: Checkable.this.global.Symbol)Boolean" id="1027519">areIrreconcilableAsParents</a><span class="delimiter">(</span><a title="Checkable.this.global.Symbol" id="1028178">sym1</a>: <a href="../../../reflect/internal/Symbols.scala.html#407146" title="Checkable.this.global.Symbol">Symbol</a>, <a title="Checkable.this.global.Symbol" id="1028179">sym2</a>: <a href="../../../reflect/internal/Symbols.scala.html#407146" title="Checkable.this.global.Symbol">Symbol</a><span class="delimiter">)</span>: <a href="../../../Boolean.scala.html#1425" title="Boolean">Boolean</a> = <a href="#1027517" title="(sym1: Checkable.this.global.Symbol, sym2: Checkable.this.global.Symbol)Boolean">areUnrelatedClasses</a><span class="delimiter">(</span><a href="#1028178" title="Checkable.this.global.Symbol">sym1</a>, <a href="#1028179" title="Checkable.this.global.Symbol">sym2</a><span class="delimiter">)</span> <a href="../../../Boolean.scala.html#57826" title="(x: Boolean)Boolean">&amp;&amp;</a> <span class="delimiter">(</span>
         <a href="#1028178" title="Checkable.this.global.Symbol">sym1</a>.<a href="../../../reflect/internal/Symbols.scala.html#411380" title="=&gt; sym1.type">initialize</a>.<a href="../../../reflect/internal/Symbols.scala.html#411298" title="=&gt; Boolean">isEffectivelyFinal</a> // initialization important
      <a href="../../../Boolean.scala.html#57825" title="(x: Boolean)Boolean">||</a> <a href="#1028179" title="Checkable.this.global.Symbol">sym2</a>.<a href="../../../reflect/internal/Symbols.scala.html#411380" title="=&gt; sym2.type">initialize</a>.<a href="../../../reflect/internal/Symbols.scala.html#411298" title="=&gt; Boolean">isEffectivelyFinal</a>
      <a href="../../../Boolean.scala.html#57825" title="(x: Boolean)Boolean">||</a> <a href="../../../Boolean.scala.html#57822" title="=&gt; Boolean">!</a><a href="#1028178" title="Checkable.this.global.Symbol">sym1</a>.<a href="../../../reflect/internal/Symbols.scala.html#411185" title="=&gt; Boolean">isTrait</a> <a href="../../../Boolean.scala.html#57826" title="(x: Boolean)Boolean">&amp;&amp;</a> <a href="../../../Boolean.scala.html#57822" title="=&gt; Boolean">!</a><a href="#1028179" title="Checkable.this.global.Symbol">sym2</a>.<a href="../../../reflect/internal/Symbols.scala.html#411185" title="=&gt; Boolean">isTrait</a>
      <a href="../../../Boolean.scala.html#57825" title="(x: Boolean)Boolean">||</a> <a href="#1028178" title="Checkable.this.global.Symbol">sym1</a>.<a href="../../../reflect/internal/HasFlags.scala.html#409869" title="=&gt; Boolean">isSealed</a> <a href="../../../Boolean.scala.html#57826" title="(x: Boolean)Boolean">&amp;&amp;</a> <a href="#1028179" title="Checkable.this.global.Symbol">sym2</a>.<a href="../../../reflect/internal/HasFlags.scala.html#409869" title="=&gt; Boolean">isSealed</a> <a href="../../../Boolean.scala.html#57826" title="(x: Boolean)Boolean">&amp;&amp;</a> <a href="#1027518" title="(sym1: Checkable.this.global.Symbol, sym2: Checkable.this.global.Symbol)Boolean">allChildrenAreIrreconcilable</a><span class="delimiter">(</span><a href="#1028178" title="Checkable.this.global.Symbol">sym1</a>, <a href="#1028179" title="Checkable.this.global.Symbol">sym2</a><span class="delimiter">)</span> <a href="../../../Boolean.scala.html#57826" title="(x: Boolean)Boolean">&amp;&amp;</a> <a href="../../../Boolean.scala.html#57822" title="=&gt; Boolean">!</a><a href="../Global.scala.html#537672" title="=&gt; Checkable.this.global.Run">currentRun</a>.<a href="../Global.scala.html#539423" title="(sym: Checkable.this.global.Symbol)Boolean">compiles</a><span class="delimiter">(</span><a href="#1028178" title="Checkable.this.global.Symbol">sym1</a><span class="delimiter">)</span> <a href="../../../Boolean.scala.html#57826" title="(x: Boolean)Boolean">&amp;&amp;</a> <a href="../../../Boolean.scala.html#57822" title="=&gt; Boolean">!</a><a href="../Global.scala.html#537672" title="=&gt; Checkable.this.global.Run">currentRun</a>.<a href="../Global.scala.html#539423" title="(sym: Checkable.this.global.Symbol)Boolean">compiles</a><span class="delimiter">(</span><a href="#1028179" title="Checkable.this.global.Symbol">sym2</a><span class="delimiter">)</span>
    <span class="delimiter">)</span>
    <span class="keyword">def</span> <a title="(sym1: Checkable.this.global.Symbol, sym2: Checkable.this.global.Symbol)Boolean" id="1027520">isNeverSubClass</a><span class="delimiter">(</span><a title="Checkable.this.global.Symbol" id="1028176">sym1</a>: <a href="../../../reflect/internal/Symbols.scala.html#407146" title="Checkable.this.global.Symbol">Symbol</a>, <a title="Checkable.this.global.Symbol" id="1028177">sym2</a>: <a href="../../../reflect/internal/Symbols.scala.html#407146" title="Checkable.this.global.Symbol">Symbol</a><span class="delimiter">)</span> = <a href="#1027519" title="(sym1: Checkable.this.global.Symbol, sym2: Checkable.this.global.Symbol)Boolean">areIrreconcilableAsParents</a><span class="delimiter">(</span><a href="#1028176" title="Checkable.this.global.Symbol">sym1</a>, <a href="#1028177" title="Checkable.this.global.Symbol">sym2</a><span class="delimiter">)</span>

    <span class="keyword">private</span> <span class="keyword">def</span> <a title="(tps1: List[Checkable.this.global.Type], tps2: List[Checkable.this.global.Type], tparams: List[Checkable.this.global.Symbol])Boolean" id="1027521">isNeverSubArgs</a><span class="delimiter">(</span><a title="List[Checkable.this.global.Type]" id="1028220">tps1</a>: <a href="../../../collection/immutable/List.scala.html#11952" title="List[Checkable.this.global.Type]">List</a><span class="delimiter">[</span>Type<span class="delimiter">]</span>, <a title="List[Checkable.this.global.Type]" id="1028221">tps2</a>: <a href="../../../collection/immutable/List.scala.html#11952" title="List[Checkable.this.global.Type]">List</a><span class="delimiter">[</span>Type<span class="delimiter">]</span>, <a title="List[Checkable.this.global.Symbol]" id="1028222">tparams</a>: <a href="../../../collection/immutable/List.scala.html#11952" title="List[Checkable.this.global.Symbol]">List</a><span class="delimiter">[</span>Symbol<span class="delimiter">]</span><span class="delimiter">)</span>: <a href="../../../Boolean.scala.html#1425" title="Boolean">Boolean</a> = /*logResult(s&quot;isNeverSubArgs($tps1, $tps2, $tparams)&quot;)*/ <span class="delimiter">{</span>
      <span class="keyword">def</span> <a title="(t1: Checkable.this.global.Type, t2: Checkable.this.global.Type, variance: Int)Boolean" id="1028223">isNeverSubArg</a><span class="delimiter">(</span><a title="Checkable.this.global.Type" id="1028224">t1</a>: <a href="../../../reflect/internal/Types.scala.html#407270" title="Checkable.this.global.Type">Type</a>, <a title="Checkable.this.global.Type" id="1028225">t2</a>: <a href="../../../reflect/internal/Types.scala.html#407270" title="Checkable.this.global.Type">Type</a>, <a title="Int" id="1028226">variance</a>: <a href="../../../Int.scala.html#321" title="Int">Int</a><span class="delimiter">)</span> = <span class="delimiter">{</span>
        <span title="Boolean" class="keyword">if</span> <span class="delimiter">(</span><a href="#1028226" title="Int">variance</a> <a href="../../../Int.scala.html#57125" title="(x: Int)Boolean">&gt;</a> <span title="Int(0)" class="int">0</span><span class="delimiter">)</span> <a href="#1027523" title="(tp1: Checkable.this.global.Type, tp2: Checkable.this.global.Type)Boolean">isNeverSubType</a><span class="delimiter">(</span><a href="#1028225" title="Checkable.this.global.Type">t2</a>, <a href="#1028224" title="Checkable.this.global.Type">t1</a><span class="delimiter">)</span>
        <span class="keyword">else</span> <span title="Boolean" class="keyword">if</span> <span class="delimiter">(</span><a href="#1028226" title="Int">variance</a> <a href="../../../Int.scala.html#57111" title="(x: Int)Boolean">&lt;</a> <span title="Int(0)" class="int">0</span><span class="delimiter">)</span> <a href="#1027523" title="(tp1: Checkable.this.global.Type, tp2: Checkable.this.global.Type)Boolean">isNeverSubType</a><span class="delimiter">(</span><a href="#1028224" title="Checkable.this.global.Type">t1</a>, <a href="#1028225" title="Checkable.this.global.Type">t2</a><span class="delimiter">)</span>
        <span class="keyword">else</span> <a href="#1027522" title="(tp1: Checkable.this.global.Type, tp2: Checkable.this.global.Type)Boolean">isNeverSameType</a><span class="delimiter">(</span><a href="#1028224" title="Checkable.this.global.Type">t1</a>, <a href="#1028225" title="Checkable.this.global.Type">t2</a><span class="delimiter">)</span>
      <span class="delimiter">}</span>
      <a href="../../../reflect/internal/util/Collections.scala.html#406809" title="(xs1: List[Checkable.this.global.Type], xs2: List[Checkable.this.global.Type], xs3: List[Int])(f: (Checkable.this.global.Type, Checkable.this.global.Type, Int) =&gt; Boolean)Boolean">exists3</a><span class="delimiter">(</span><a href="#1028220" title="List[Checkable.this.global.Type]">tps1</a>, <a href="#1028221" title="List[Checkable.this.global.Type]">tps2</a>, <a href="#1028222" title="List[Checkable.this.global.Symbol]">tparams</a> <a href="../../../collection/TraversableLike.scala.html#58063" title="(f: Checkable.this.global.Symbol =&gt; Int)(implicit bf: scala.collection.generic.CanBuildFrom[List[Checkable.this.global.Symbol],Int,List[Int]])List[Int]">map</a> <span class="delimiter">(</span><a href="#1028261" title="Checkable.this.global.Symbol">_</a>.<a href="../../../reflect/internal/Symbols.scala.html#411313" title="=&gt; Int">variance</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">(</span><a href="#1028223" title="(t1: Checkable.this.global.Type, t2: Checkable.this.global.Type, variance: Int)Boolean">isNeverSubArg</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>
    <span class="keyword">private</span> <span class="keyword">def</span> <a title="(tp1: Checkable.this.global.Type, tp2: Checkable.this.global.Type)Boolean" id="1027522">isNeverSameType</a><span class="delimiter">(</span><a title="Checkable.this.global.Type" id="1028235">tp1</a>: <a href="../../../reflect/internal/Types.scala.html#407270" title="Checkable.this.global.Type">Type</a>, <a title="Checkable.this.global.Type" id="1028236">tp2</a>: <a href="../../../reflect/internal/Types.scala.html#407270" title="Checkable.this.global.Type">Type</a><span class="delimiter">)</span>: <a href="../../../Boolean.scala.html#1425" title="Boolean">Boolean</a> = <a href="../../../Tuple2.scala.html#62849" title="(_1: Checkable.this.global.Type, _2: Checkable.this.global.Type)(Checkable.this.global.Type, Checkable.this.global.Type)" class="delimiter">(</a><a href="#1028235" title="Checkable.this.global.Type">tp1</a>, <a href="#1028236" title="Checkable.this.global.Type">tp2</a><span class="delimiter">)</span> <span class="keyword">match</span> <span class="delimiter">{</span>
      <span class="keyword">case</span> <span class="delimiter">(</span>TypeRef<a href="../../../Tuple2.scala.html#60635" title="Checkable.this.global.Type" id="3362411" class="delimiter">(</a><a href="../../../reflect/internal/Types.scala.html#410887" title="Checkable.this.global.Type" id="3362409">_</a>, <a href="../../../reflect/internal/Types.scala.html#410889" title="Checkable.this.global.Symbol" id="1028322">sym1</a>, <a href="../../../reflect/internal/Types.scala.html#410891" title="List[Checkable.this.global.Type]" id="1028323">args1</a><span class="delimiter">)</span>, TypeRef<a href="../../../Tuple2.scala.html#60637" title="Checkable.this.global.Type" id="3362414" class="delimiter">(</a><a href="../../../reflect/internal/Types.scala.html#410887" title="Checkable.this.global.Type" id="3362412">_</a>, <a href="../../../reflect/internal/Types.scala.html#410889" title="Checkable.this.global.Symbol" id="1028327">sym2</a>, <a href="../../../reflect/internal/Types.scala.html#410891" title="List[Checkable.this.global.Type]" id="1028328">args2</a><span class="delimiter">)</span><span class="delimiter">)</span> =&gt;
        <a href="#1027520" title="(sym1: Checkable.this.global.Symbol, sym2: Checkable.this.global.Symbol)Boolean">isNeverSubClass</a><span class="delimiter">(</span><a href="#1028322" title="Checkable.this.global.Symbol">sym1</a>, <a href="#1028327" title="Checkable.this.global.Symbol">sym2</a><span class="delimiter">)</span> <a href="#3362416" title="(x: Boolean)Boolean">||</a> <span class="delimiter">(</span><span class="delimiter">(</span><a href="#1028322" title="Checkable.this.global.Symbol">sym1</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="#1028327" title="Checkable.this.global.Symbol">sym2</a><span class="delimiter">)</span> <a href="../../../Boolean.scala.html#57826" title="(x: Boolean)Boolean">&amp;&amp;</a> <a href="#1027521" title="(tps1: List[Checkable.this.global.Type], tps2: List[Checkable.this.global.Type], tparams: List[Checkable.this.global.Symbol])Boolean">isNeverSubArgs</a><span class="delimiter">(</span><a href="#1028323" title="List[Checkable.this.global.Type]">args1</a>, <a href="#1028328" title="List[Checkable.this.global.Type]">args2</a>, <a href="#1028322" title="Checkable.this.global.Symbol">sym1</a>.<a href="../../../reflect/internal/Symbols.scala.html#411389" title="=&gt; List[Checkable.this.global.Symbol]">typeParams</a><span class="delimiter">)</span><span class="delimiter">)</span>
      <span class="keyword">case</span> _ =&gt;
        <a href="#3362416" title="(x: Boolean)Boolean" class="keyword">false</a>
    <span class="delimiter">}</span>
    // Important to dealias at any entry point (this is the only one at this writing.)
    <span class="keyword">def</span> <a title="(tp1: Checkable.this.global.Type, tp2: Checkable.this.global.Type)Boolean" id="1027523">isNeverSubType</a><span class="delimiter">(</span><a title="Checkable.this.global.Type" id="1028095">tp1</a>: <a href="../../../reflect/internal/Types.scala.html#407270" title="Checkable.this.global.Type">Type</a>, <a title="Checkable.this.global.Type" id="1028096">tp2</a>: <a href="../../../reflect/internal/Types.scala.html#407270" title="Checkable.this.global.Type">Type</a><span class="delimiter">)</span>: <a href="../../../Boolean.scala.html#1425" title="Boolean">Boolean</a> = /*logResult(s&quot;isNeverSubType($tp1, $tp2)&quot;)*/<span class="delimiter">(</span><a href="../../../Tuple2.scala.html#62849" title="(_1: Checkable.this.global.Type, _2: Checkable.this.global.Type)(Checkable.this.global.Type, Checkable.this.global.Type)" class="delimiter">(</a><a href="#1028095" title="Checkable.this.global.Type">tp1</a>.<a href="../../../reflect/internal/Types.scala.html#408439" title="=&gt; Checkable.this.global.Type">dealias</a>, <a href="#1028096" title="Checkable.this.global.Type">tp2</a>.<a href="../../../reflect/internal/Types.scala.html#408439" title="=&gt; Checkable.this.global.Type">dealias</a><span class="delimiter">)</span> <span class="keyword">match</span> <span class="delimiter">{</span>
      <span class="keyword">case</span> <span class="delimiter">(</span>TypeRef<a href="../../../Tuple2.scala.html#60635" title="Checkable.this.global.Type" id="3362426" class="delimiter">(</a><a href="../../../reflect/internal/Types.scala.html#410887" title="Checkable.this.global.Type" id="3362424">_</a>, <a href="../../../reflect/internal/Types.scala.html#410889" title="Checkable.this.global.Symbol" id="1028344">sym1</a>, <a href="../../../reflect/internal/Types.scala.html#410891" title="List[Checkable.this.global.Type]" id="1028345">args1</a><span class="delimiter">)</span>, TypeRef<a href="../../../Tuple2.scala.html#60637" title="Checkable.this.global.Type" id="3362429" class="delimiter">(</a><a href="../../../reflect/internal/Types.scala.html#410887" title="Checkable.this.global.Type" id="3362427">_</a>, <a href="../../../reflect/internal/Types.scala.html#410889" title="Checkable.this.global.Symbol" id="1028349">sym2</a>, <a href="../../../reflect/internal/Types.scala.html#410891" title="List[Checkable.this.global.Type]" id="1028350">args2</a><span class="delimiter">)</span><span class="delimiter">)</span> =&gt;
        <a href="#1027520" title="(sym1: Checkable.this.global.Symbol, sym2: Checkable.this.global.Symbol)Boolean">isNeverSubClass</a><span class="delimiter">(</span><a href="#1028344" title="Checkable.this.global.Symbol">sym1</a>, <a href="#1028349" title="Checkable.this.global.Symbol">sym2</a><span class="delimiter">)</span> <a href="#3362431" title="(x: Boolean)Boolean">||</a> <span class="delimiter">{</span>
          <span class="delimiter">(</span><a href="#1028344" title="Checkable.this.global.Symbol">sym1</a> <a href="../../../reflect/internal/Symbols.scala.html#411410" title="(that: Checkable.this.global.Symbol)Boolean">isSubClass</a> <a href="#1028349" title="Checkable.this.global.Symbol">sym2</a><span class="delimiter">)</span> <a href="../../../Boolean.scala.html#57826" title="(x: Boolean)Boolean">&amp;&amp;</a> <span class="delimiter">{</span>
            <span class="keyword">val</span> <a title="Checkable.this.global.Type" id="1028352">tp1seen</a> = <a href="#1028095" title="Checkable.this.global.Type">tp1</a> <a href="../../../reflect/internal/Types.scala.html#408459" title="(clazz: Checkable.this.global.Symbol)Checkable.this.global.Type">baseType</a> <a href="#1028349" title="Checkable.this.global.Symbol">sym2</a>
            <a href="#1027521" title="(tps1: List[Checkable.this.global.Type], tps2: List[Checkable.this.global.Type], tparams: List[Checkable.this.global.Symbol])Boolean">isNeverSubArgs</a><span class="delimiter">(</span><a href="#1028352" title="Checkable.this.global.Type">tp1seen</a>.<a href="../../../reflect/internal/Types.scala.html#408421" title="=&gt; List[Checkable.this.global.Type]">typeArgs</a>, <a href="#1028350" title="List[Checkable.this.global.Type]">args2</a>, <a href="#1028349" title="Checkable.this.global.Symbol">sym2</a>.<a href="../../../reflect/internal/Symbols.scala.html#411389" title="=&gt; List[Checkable.this.global.Symbol]">typeParams</a><span class="delimiter">)</span>
          <span class="delimiter">}</span>
        <span class="delimiter">}</span>
      <span class="keyword">case</span> _ =&gt; <a href="#3362431" title="(x: Boolean)Boolean" class="keyword">false</a>
    <span class="delimiter">}</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">trait</span> <a title="trait InferCheckable extends Object" id="538141">InferCheckable</a> <a href="../../../Unit.scala.html#1515" title="Unit" class="delimiter">{</a>
    self: Inferencer =&gt;

    /** TODO: much better error positions.
     *  Kind of stuck right now because they just pass us the one tree.
     *  TODO: Eliminate inPattern, canRemedy, which have no place here.
     */
    <span class="keyword">def</span> <a title="(tree: Checkable.this.global.Tree, P0: Checkable.this.global.Type, X0: Checkable.this.global.Type, inPattern: Boolean, canRemedy: Boolean)Unit" id="541420">checkCheckable</a><span class="delimiter">(</span><a title="Checkable.this.global.Tree" id="1028356">tree</a>: <a href="../../../reflect/internal/Trees.scala.html#407938" title="Checkable.this.global.Tree">Tree</a>, <a title="Checkable.this.global.Type" id="1028357">P0</a>: <a href="../../../reflect/internal/Types.scala.html#407270" title="Checkable.this.global.Type">Type</a>, <a title="Checkable.this.global.Type" id="1028358">X0</a>: <a href="../../../reflect/internal/Types.scala.html#407270" title="Checkable.this.global.Type">Type</a>, <a title="Boolean" id="1028359">inPattern</a>: <a href="../../../Boolean.scala.html#1425" title="Boolean">Boolean</a>, <a title="Boolean" id="1028361">canRemedy</a>: <a href="../../../Boolean.scala.html#1425" title="Boolean">Boolean</a> = <span title="Boolean(false)" class="keyword">false</span><span class="delimiter">)</span> <span class="delimiter">{</span>
      <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#538136" title="(tp: Checkable.this.global.Type)Boolean">uncheckedOk</a><span class="delimiter">(</span><a href="#1028357" title="Checkable.this.global.Type">P0</a><span class="delimiter">)</span><span class="delimiter">)</span> <span title="Nothing" class="keyword">return</span>
      <span class="keyword">def</span> <a title="=&gt; String" id="1028362">where</a> = <span title="String" class="keyword">if</span> <span class="delimiter">(</span><a href="#1028359" title="Boolean">inPattern</a><span class="delimiter">)</span> <span title="String(&quot;pattern &quot;)" class="string">&quot;pattern &quot;</span> <span class="keyword">else</span> <span title="String(&quot;&quot;)" class="string">&quot;&quot;</span>

      // singleton types not considered here
      <span class="keyword">val</span> <a title="Checkable.this.global.Type" id="1028363">P</a> = <a href="#1028357" title="Checkable.this.global.Type">P0</a>.<a href="../../../reflect/internal/Types.scala.html#408411" title="=&gt; Checkable.this.global.Type">widen</a>
      <span class="keyword">val</span> <a title="Checkable.this.global.Type" id="1028364">X</a> = <a href="#1028358" title="Checkable.this.global.Type">X0</a>.<a href="../../../reflect/internal/Types.scala.html#408411" title="=&gt; Checkable.this.global.Type">widen</a>

      <a href="#1028363" title="Checkable.this.global.Type">P</a> <span class="keyword">match</span> <span class="delimiter">{</span>
        // Prohibit top-level type tests for these, but they are ok nested (e.g. case Foldable[Nothing] =&gt; ... )
        <span class="keyword">case</span> TypeRef<a href="#3362436" title="Boolean" id="3362441" class="delimiter">(</a><a href="../../../reflect/internal/Types.scala.html#410887" title="Checkable.this.global.Type" id="3362437">_</a>, <a href="../../../reflect/internal/Types.scala.html#410889" title="Checkable.this.global.Symbol" id="3362453">NothingClass</a> | <a href="../../../reflect/internal/Definitions.scala.html#408694" title="Boolean" id="3362454">NullClass</a> | <a href="../../../reflect/internal/Definitions.scala.html#408682" title="Boolean" id="3362455">AnyValClass</a>, <a href="../../../reflect/internal/Types.scala.html#410891" title="List[Checkable.this.global.Type]" id="3362439">_</a><span class="delimiter">)</span> =&gt;
          <a href="ContextErrors.scala.html#541350" title="InferCheckable.this.InferErrorGen.type">InferErrorGen</a>.<a href="ContextErrors.scala.html#541479" title="(tree: Checkable.this.global.Tree, tp: Checkable.this.global.Type)Unit">TypePatternOrIsInstanceTestError</a><a href="#3362459" title="(x: Unit)Unit" class="delimiter">(</a><a href="#1028356" title="Checkable.this.global.Tree">tree</a>, <a href="#1028363" title="Checkable.this.global.Type">P</a><span class="delimiter">)</span>
        // If top-level abstract types can be checked using a classtag extractor, don't warn about them
        <span class="keyword">case</span> TypeRef<span class="delimiter">(</span><a href="../../../reflect/internal/Types.scala.html#410887" title="Checkable.this.global.Type" id="3362446">_</a>, <a href="../../../reflect/internal/Types.scala.html#410889" title="Checkable.this.global.Symbol" id="1028378">sym</a>, <a href="../../../reflect/internal/Types.scala.html#410891" title="List[Checkable.this.global.Type]" id="3362447">_</a><span class="delimiter">)</span> <span class="keyword">if</span> <a href="#1028378" title="Checkable.this.global.Symbol">sym</a>.<a href="../../../reflect/internal/Symbols.scala.html#411171" title="=&gt; Boolean">isAbstractType</a> <a href="../../../Boolean.scala.html#57826" title="(x: Boolean)Boolean">&amp;&amp;</a> <a href="#1028361" title="Boolean">canRemedy</a> =&gt;
          ;
        // Matching on types like case _: AnyRef { def bippy: Int } =&gt; doesn't work -- yet.
        <span class="keyword">case</span> RefinedType<a href="#3362436" title="Unit" id="3362452" class="delimiter">(</a><a href="../../../reflect/internal/Types.scala.html#410866" title="List[Checkable.this.global.Type]" id="3362450">_</a>, <a href="../../../reflect/internal/Types.scala.html#410868" title="Checkable.this.global.Scope" id="1028381">decls</a><span class="delimiter">)</span> <span class="keyword">if</span> <a href="../../../Boolean.scala.html#57822" title="=&gt; Boolean">!</a><a href="#1028381" title="Checkable.this.global.Scope">decls</a>.<a href="../../../reflect/internal/Scopes.scala.html#410504" title="=&gt; Boolean">isEmpty</a> =&gt;
          <a href="Infer.scala.html#541359" title="=&gt; Checkable.this.Context">getContext</a>.<a href="Contexts.scala.html#538743" title="=&gt; Checkable.this.global.CompilationUnit">unit</a>.<a href="../CompilationUnits.scala.html#539299" title="(pos: Checkable.this.global.Position, msg: String)Unit">warning</a><a href="#3362459" title="(x: Unit)Unit" class="delimiter">(</a><a href="#1028356" title="Checkable.this.global.Tree">tree</a>.<a href="../../../reflect/internal/Trees.scala.html#408571" title="=&gt; Checkable.this.global.Position">pos</a>, <a href="../../../StringContext.scala.html#56629" title="(args: Any*)String">s</a><span class="string">&quot;a pattern match on a refinement type is unchecked&quot;</span><span class="delimiter">)</span>
        <span class="keyword">case</span> _ =&gt;
          <span class="keyword">val</span> <a title="Checkable.this.CheckabilityChecker" id="1028384">checker</a> = <span title="Checkable.this.CheckabilityChecker" class="keyword">new</span> <a href="#538138" title="Checkable.this.CheckabilityChecker">CheckabilityChecker</a><span class="delimiter">(</span><a href="#1028364" title="Checkable.this.global.Type">X</a>, <a href="#1028363" title="Checkable.this.global.Type">P</a><span class="delimiter">)</span>
          <a href="../Global.scala.html#537516" title="(msg: =&gt; AnyRef)Unit">log</a><span class="delimiter">(</span><a href="#1028384" title="Checkable.this.CheckabilityChecker">checker</a>.<a href="#1028077" title="=&gt; String">summaryString</a><span class="delimiter">)</span>
          <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#1028384" title="Checkable.this.CheckabilityChecker">checker</a>.<a href="#1028083" title="=&gt; Boolean">neverMatches</a><span class="delimiter">)</span> <span class="delimiter">{</span>
            <span class="keyword">val</span> <a title="String" id="1028385">addendum</a> = <span title="String" class="keyword">if</span> <span class="delimiter">(</span><a href="#1028384" title="Checkable.this.CheckabilityChecker">checker</a>.<a href="#1028082" title="=&gt; Boolean">neverSubClass</a><span class="delimiter">)</span> <span title="String(&quot;&quot;)" class="string">&quot;&quot;</span> <span class="keyword">else</span> <span title="String(&quot; (but still might match its erasure)&quot;)" class="string">&quot; (but still might match its erasure)&quot;</span>
            <a href="Infer.scala.html#541359" title="=&gt; Checkable.this.Context">getContext</a>.<a href="Contexts.scala.html#538743" title="=&gt; Checkable.this.global.CompilationUnit">unit</a>.<a href="../CompilationUnits.scala.html#539299" title="(pos: Checkable.this.global.Position, msg: String)Unit">warning</a><span class="delimiter">(</span><a href="#1028356" title="Checkable.this.global.Tree">tree</a>.<a href="../../../reflect/internal/Trees.scala.html#408571" title="=&gt; Checkable.this.global.Position">pos</a>, <a href="../../../StringContext.scala.html#56629" title="(args: Any*)String">s</a>&quot;fruitless type test: a value of type $<a href="#1028364" title="Checkable.this.global.Type">X</a> cannot also be a $<a href="#1028363" title="Checkable.this.global.Type">P</a>$<a href="#1028385" title="String">addendum</a><span class="string">&quot;</span><span class="delimiter">)</span>
          <span class="delimiter">}</span>
          <span class="keyword">else</span> <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#1028384" title="Checkable.this.CheckabilityChecker">checker</a>.<a href="#1028084" title="=&gt; Boolean">isUncheckable</a><span class="delimiter">)</span> <span class="delimiter">{</span>
            <span class="keyword">val</span> <a title="String" id="1028386">msg</a> = <span class="delimiter">(</span>
              <span title="String" class="keyword">if</span> <span class="delimiter">(</span><a href="#1028384" title="Checkable.this.CheckabilityChecker">checker</a>.<a href="#1028080" title="=&gt; Checkable.this.global.Type">uncheckableType</a> <a href="../../../reflect/internal/Types.scala.html#408485" title="(that: Checkable.this.global.Type)Boolean">=:=</a> <a href="#1028363" title="Checkable.this.global.Type">P</a><span class="delimiter">)</span> <a href="../../../StringContext.scala.html#56629" title="(args: Any*)String">s</a>&quot;abstract type $<a href="#1028362" title="=&gt; String">where</a>$<a href="#1028363" title="Checkable.this.global.Type">P</a><span class="string">&quot;</span>
              <span class="keyword">else</span> <a href="../../../StringContext.scala.html#56629" title="(args: Any*)String">s</a>&quot;$<span class="delimiter">{</span><a href="#1028384" title="Checkable.this.CheckabilityChecker">checker</a>.<a href="#1028085" title="=&gt; String">uncheckableMessage</a><span class="delimiter">}</span> in type $<a href="#1028362" title="=&gt; String">where</a>$<a href="#1028363" title="Checkable.this.global.Type">P</a><span class="string">&quot;</span>
            <span class="delimiter">)</span>
            <a href="Infer.scala.html#541359" title="=&gt; Checkable.this.Context">getContext</a>.<a href="Contexts.scala.html#538743" title="=&gt; Checkable.this.global.CompilationUnit">unit</a>.<a href="../CompilationUnits.scala.html#539299" title="(pos: Checkable.this.global.Position, msg: String)Unit">warning</a><span class="delimiter">(</span><a href="#1028356" title="Checkable.this.global.Tree">tree</a>.<a href="../../../reflect/internal/Trees.scala.html#408571" title="=&gt; Checkable.this.global.Position">pos</a>, <a href="../../../StringContext.scala.html#56629" title="(args: Any*)String">s</a>&quot;$<a href="#1028386" title="String">msg</a><span class="string"> is unchecked since it is eliminated by erasure&quot;</span><span class="delimiter">)</span>
          <span class="delimiter">}</span>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>
<span title="Object" class="delimiter">}</span>

<span title="Object" class="keyword">private</span><span class="delimiter">[</span>typechecker<span class="delimiter">]</span> <span class="keyword">final</span> <span class="keyword">class</span> <a href="#1028093" title="class Checkability extends AnyVal" id="1028392">Checkability</a><a href="#1028392" title="scala.tools.nsc.typechecker.Checkability" class="delimiter">(</a><span class="keyword">val</span> <a title="Int" id="1028093">value</a>: <a href="../../../Int.scala.html#321" title="Int">Int</a><span class="delimiter">)</span> <span class="keyword">extends</span> <a href="../../../AnyVal.scala.html#1278" title="AnyVal">AnyVal</a> <span class="delimiter">{</span> <span class="delimiter">}</span>
<span class="keyword">private</span><span class="delimiter">[</span>typechecker<span class="delimiter">]</span> <span class="keyword">object</span> <a title="scala.tools.nsc.typechecker.Checkability.type" id="49206">Checkability</a> <a href="#49207" title="scala.tools.nsc.typechecker.Checkability.type" class="delimiter">{</a>
  <span class="keyword">val</span> <a title="scala.tools.nsc.typechecker.Checkability" id="1027505">StaticallyTrue</a>    = <span title="scala.tools.nsc.typechecker.Checkability" class="keyword">new</span> <a href="#1028392" title="scala.tools.nsc.typechecker.Checkability">Checkability</a><span class="delimiter">(</span><span title="Int(0)" class="int">0</span><span class="delimiter">)</span>
  <span class="keyword">val</span> <a title="scala.tools.nsc.typechecker.Checkability" id="1027507">StaticallyFalse</a>   = <span title="scala.tools.nsc.typechecker.Checkability" class="keyword">new</span> <a href="#1028392" title="scala.tools.nsc.typechecker.Checkability">Checkability</a><span class="delimiter">(</span><span title="Int(1)" class="int">1</span><span class="delimiter">)</span>
  <span class="keyword">val</span> <a title="scala.tools.nsc.typechecker.Checkability" id="1027509">RuntimeCheckable</a>  = <span title="scala.tools.nsc.typechecker.Checkability" class="keyword">new</span> <a href="#1028392" title="scala.tools.nsc.typechecker.Checkability">Checkability</a><span class="delimiter">(</span><span title="Int(2)" class="int">2</span><span class="delimiter">)</span>
  <span class="keyword">val</span> <a title="scala.tools.nsc.typechecker.Checkability" id="1027511">Uncheckable</a>       = <span title="scala.tools.nsc.typechecker.Checkability" class="keyword">new</span> <a href="#1028392" title="scala.tools.nsc.typechecker.Checkability">Checkability</a><span class="delimiter">(</span><span title="Int(3)" class="int">3</span><span class="delimiter">)</span>
  <span class="keyword">val</span> <a title="scala.tools.nsc.typechecker.Checkability" id="1027513">CheckabilityError</a> = <span title="scala.tools.nsc.typechecker.Checkability" class="keyword">new</span> <a href="#1028392" title="scala.tools.nsc.typechecker.Checkability">Checkability</a><span class="delimiter">(</span><span title="Int(4)" class="int">4</span><span class="delimiter">)</span>
<span class="delimiter">}</span>

        </pre>
    </body>
</html>