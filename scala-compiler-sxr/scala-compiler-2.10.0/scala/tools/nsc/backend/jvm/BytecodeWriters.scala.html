<?xml version="1.0" encoding="utf-8"?>
      <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <meta http-equiv="Expires" content="0" />
        <title>scala/tools/nsc/backend/jvm/BytecodeWriters.scala</title>
        <script type="text/javascript" src="../../../../../jquery-all.js"></script>
        <script type="text/javascript" src="../../../../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../../../../style.css" title="Style"></link>
    </head>
    <body>
        <pre>
/* NSC -- new Scala compiler
 * Copyright 2005-2013 LAMP/EPFL
 * @author  Paul Phillips
 */

<span class="keyword">package</span> scala.tools.nsc
<span class="keyword">package</span> backend.jvm

<span class="keyword">import</span> java.io.<span class="delimiter">{</span> DataOutputStream, FileOutputStream, OutputStream, File =&gt; JFile <span class="delimiter">}</span>
<span class="keyword">import</span> scala.tools.nsc.io._
<span class="keyword">import</span> scala.tools.nsc.util.ScalaClassLoader
<span class="keyword">import</span> scala.tools.util.JavapClass
<span class="keyword">import</span> java.util.jar.<span class="delimiter">{</span> JarEntry, JarOutputStream, Attributes <span class="delimiter">}</span>
<span class="keyword">import</span> <span title="java.util.jar.Attributes.type">Attributes</span>.Name
<span class="keyword">import</span> scala.<a href="../../../../language.scala.html#1423" title="language.type">language</a>.postfixOps

/** For the last mile: turning generated bytecode in memory into
 *  something you can use.  Has implementations for writing to class
 *  files, jars, and disassembled/javap output.
 */
<span class="keyword">trait</span> <a title="trait BytecodeWriters extends Object" id="31662">BytecodeWriters</a> <a href="../../../../Unit.scala.html#1515" title="Unit" class="delimiter">{</a>
  <span class="keyword">val</span> <a title="=&gt; scala.tools.nsc.Global" id="623374">global</a>: <a href="../../Global.scala.html#27346" title="scala.tools.nsc.Global">Global</a>
  <span class="keyword">import</span> <a href="#623374" title="=&gt; scala.tools.nsc.Global">global</a>._

  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(sym: BytecodeWriters.this.global.Symbol)tools.nsc.io.AbstractFile" id="623376">outputDirectory</a><span class="delimiter">(</span><a title="BytecodeWriters.this.global.Symbol" id="728106">sym</a>: <a href="../../../../reflect/internal/Symbols.scala.html#407146" title="BytecodeWriters.this.global.Symbol">Symbol</a><span class="delimiter">)</span>: <a href="../../../../reflect/io/AbstractFile.scala.html#23215" title="tools.nsc.io.AbstractFile">AbstractFile</a> = <span class="delimiter">(</span>
    <a href="../../Global.scala.html#537448" title="=&gt; scala.tools.nsc.Settings">settings</a>.<a href="../../settings/MutableSettings.scala.html#539835" title="=&gt; scala.tools.nsc.Settings#OutputDirs">outputDirs</a>.<a href="../../settings/MutableSettings.scala.html#593274" title="(src: scala.tools.nsc.io.AbstractFile)scala.tools.nsc.io.AbstractFile">outputDirFor</a><span class="delimiter">(</span><a href="../../Global.scala.html#537714" title="(op: =&gt; scala.reflect.io.AbstractFile)scala.reflect.io.AbstractFile">beforeFlatten</a><span class="delimiter">(</span><a href="#728106" title="BytecodeWriters.this.global.Symbol">sym</a>.<a href="../../../../reflect/internal/Symbols.scala.html#411483" title="=&gt; scala.reflect.io.AbstractFile">sourceFile</a><span class="delimiter">)</span><span class="delimiter">)</span>
  <span class="delimiter">)</span>
  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(base: tools.nsc.io.AbstractFile, clsName: String, suffix: String)tools.nsc.io.AbstractFile" id="623377">getFile</a><span class="delimiter">(</span><a title="tools.nsc.io.AbstractFile" id="728110">base</a>: <a href="../../../../reflect/io/AbstractFile.scala.html#23215" title="tools.nsc.io.AbstractFile">AbstractFile</a>, /*cls.getName()*/ <a title="String" id="728111">clsName</a>: <span title="String">String</span>, <a title="String" id="728112">suffix</a>: <span title="String">String</span><span class="delimiter">)</span>: <a href="../../../../reflect/io/AbstractFile.scala.html#23215" title="tools.nsc.io.AbstractFile">AbstractFile</a> = <span class="delimiter">{</span>
    <span class="keyword">var</span> <a title="tools.nsc.io.AbstractFile" id="728113">dir</a> = <a href="#728110" title="tools.nsc.io.AbstractFile">base</a>
    <span class="keyword">val</span> <a title="List[String]" id="728114">pathParts</a> = <a href="#728111" title="String">clsName</a>.<span title="(x$1: String)Array[String]">split</span><a href="../../../../Predef.scala.html#7555" title="(xs: Array[String])scala.collection.mutable.ArrayOps[String]" class="delimiter">(</a><span title="String(&quot;[./]&quot;)" class="string">&quot;[./]&quot;</span><span class="delimiter">)</span>.<a href="../../../../collection/TraversableOnce.scala.html#58263" title="=&gt; List[String]">toList</a>
    <span class="keyword">for</span> <span class="delimiter">(</span><a title="String" id="728207">part</a> &lt;- <a href="#728114" title="List[String]">pathParts</a>.<a href="../../../../collection/immutable/List.scala.html#62719" title="(f: String =&gt; Unit)Unit">init</a><span class="delimiter">)</span> <span class="delimiter">{</span>
      <a href="#728113" title="tools.nsc.io.AbstractFile">dir</a> = <a href="#728113" title="tools.nsc.io.AbstractFile">dir</a>.<a href="../../../../reflect/io/AbstractFile.scala.html#404332" title="(name: String)scala.reflect.io.AbstractFile">subdirectoryNamed</a><span class="delimiter">(</span><a href="#728207" title="String">part</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>
    <a href="#728113" title="tools.nsc.io.AbstractFile">dir</a>.<a href="../../../../reflect/io/AbstractFile.scala.html#404331" title="(name: String)scala.reflect.io.AbstractFile">fileNamed</a><span class="delimiter">(</span><a href="#728114" title="List[String]">pathParts</a>.<a href="../../../../collection/LinearSeqOptimized.scala.html#86394" title="=&gt; String">last</a> <span title="(x$1: Any)String">+</span> <a href="#728112" title="String">suffix</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>
  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(sym: BytecodeWriters.this.global.Symbol, clsName: String, suffix: String)tools.nsc.io.AbstractFile" id="623378">getFile</a><span class="delimiter">(</span><a title="BytecodeWriters.this.global.Symbol" id="728209">sym</a>: <a href="../../../../reflect/internal/Symbols.scala.html#407146" title="BytecodeWriters.this.global.Symbol">Symbol</a>, <a title="String" id="728210">clsName</a>: <span title="String">String</span>, <a title="String" id="728211">suffix</a>: <span title="String">String</span><span class="delimiter">)</span>: <a href="../../../../reflect/io/AbstractFile.scala.html#23215" title="tools.nsc.io.AbstractFile">AbstractFile</a> =
    <a href="#623377" title="(base: tools.nsc.io.AbstractFile, clsName: String, suffix: String)tools.nsc.io.AbstractFile">getFile</a><span class="delimiter">(</span><a href="#623376" title="(sym: BytecodeWriters.this.global.Symbol)tools.nsc.io.AbstractFile">outputDirectory</a><span class="delimiter">(</span><a href="#728209" title="BytecodeWriters.this.global.Symbol">sym</a><span class="delimiter">)</span>, <a href="#728210" title="String">clsName</a>, <a href="#728211" title="String">suffix</a><span class="delimiter">)</span>

  <span class="keyword">trait</span> <a title="trait BytecodeWriter extends Object" id="623379">BytecodeWriter</a> <a href="../../../../Unit.scala.html#1515" title="Unit" class="delimiter">{</a>
    <span class="keyword">def</span> <a title="(label: String, jclassName: String, jclassBytes: Array[Byte], sym: BytecodeWriters.this.global.Symbol)Unit" id="728219">writeClass</a><span class="delimiter">(</span><a title="String" id="728222">label</a>: <span title="String">String</span>, <a title="String" id="728223">jclassName</a>: <span title="String">String</span>, <a title="Array[Byte]" id="728224">jclassBytes</a>: <a href="../../../../Array.scala.html#174" title="Array[Byte]">Array</a><span class="delimiter">[</span>Byte<span class="delimiter">]</span>, <a title="BytecodeWriters.this.global.Symbol" id="728225">sym</a>: <a href="../../../../reflect/internal/Symbols.scala.html#407146" title="BytecodeWriters.this.global.Symbol">Symbol</a><span class="delimiter">)</span>: <a href="../../../../Unit.scala.html#1515" title="Unit">Unit</a>
    <span class="keyword">def</span> <a title="()Unit" id="728220">close</a><span class="delimiter">(</span><span class="delimiter">)</span>: <a href="../../../../Unit.scala.html#1515" title="Unit">Unit</a> = <span title="Unit" class="delimiter">(</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">class</span> <a title="class DirectToJarfileWriter extends Object with BytecodeWriters.this.BytecodeWriter" id="623380">DirectToJarfileWriter</a><a href="#623380" title="BytecodeWriters.this.DirectToJarfileWriter" class="delimiter">(</a><a title="java.io.File" id="728308">jfile</a>: <span title="java.io.File">JFile</span><span class="delimiter">)</span> <span class="keyword">extends</span> <a href="#623379" title="BytecodeWriters.this.BytecodeWriter">BytecodeWriter</a> <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="List[(java.util.jar.Attributes.Name, String)]" id="728229">jarMainAttrs</a> = <span class="delimiter">(</span>
      <span title="List[(java.util.jar.Attributes.Name, String)]" class="keyword">if</span> <span class="delimiter">(</span><a href="../../Global.scala.html#537448" title="=&gt; scala.tools.nsc.Settings">settings</a>.<a href="../../settings/ScalaSettings.scala.html#540015" title="=&gt; scala.tools.nsc.Settings#StringSetting">mainClass</a>.<a href="../../../../reflect/internal/settings/MutableSettings.scala.html#423750" title="=&gt; Boolean">isDefault</a><span class="delimiter">)</span> <a href="../../../../collection/immutable/List.scala.html#11188" title="scala.collection.immutable.Nil.type">Nil</a>
      <span class="keyword">else</span> <a href="../../../../collection/immutable/List.scala.html#62451" title="(xs: (java.util.jar.Attributes.Name, String)*)List[(java.util.jar.Attributes.Name, String)]">List</a><span class="delimiter">(</span><span title="java.util.jar.Attributes.Name.type">Name</span>.<a href="../../../../Predef.scala.html#7509" title="(x: java.util.jar.Attributes.Name)ArrowAssoc[java.util.jar.Attributes.Name]">MAIN_CLASS</a> <a href="../../../../Predef.scala.html#62634" title="(y: String)(java.util.jar.Attributes.Name, String)">-&gt;</a> <a href="../../Global.scala.html#537448" title="=&gt; scala.tools.nsc.Settings">settings</a>.<a href="../../settings/ScalaSettings.scala.html#540015" title="=&gt; scala.tools.nsc.Settings#StringSetting">mainClass</a>.<a href="../../../../reflect/internal/settings/MutableSettings.scala.html#423752" title="=&gt; String">value</a><span class="delimiter">)</span>
    <span class="delimiter">)</span>
    <span class="keyword">val</span> <a title="scala.tools.nsc.io.JarWriter" id="728231">writer</a> = <a href="../../io/Jar.scala.html#635566" title="(jfile: scala.tools.nsc.io.JFile)scala.tools.nsc.io.Jar" class="keyword">new</a> <a href="../../io/Jar.scala.html#39951" title="scala.tools.nsc.io.Jar">Jar</a><span class="delimiter">(</span><a href="#728308" title="java.io.File">jfile</a><span class="delimiter">)</span>.<a href="../../io/Jar.scala.html#635579" title="(mainAttrs: (java.util.jar.Attributes.Name, String)*)scala.tools.nsc.io.JarWriter">jarWriter</a><span class="delimiter">(</span><a href="#728229" title="=&gt; List[(java.util.jar.Attributes.Name, String)]">jarMainAttrs</a>: _*<span class="delimiter">)</span>

    <span class="keyword">def</span> <a title="(label: String, jclassName: String, jclassBytes: Array[Byte], sym: BytecodeWriters.this.global.Symbol)Unit" id="728233">writeClass</a><span class="delimiter">(</span><a title="String" id="728309">label</a>: <span title="String">String</span>, <a title="String" id="728310">jclassName</a>: <span title="String">String</span>, <a title="Array[Byte]" id="728311">jclassBytes</a>: <a href="../../../../Array.scala.html#174" title="Array[Byte]">Array</a><span class="delimiter">[</span>Byte<span class="delimiter">]</span>, <a title="BytecodeWriters.this.global.Symbol" id="728312">sym</a>: <a href="../../../../reflect/internal/Symbols.scala.html#407146" title="BytecodeWriters.this.global.Symbol">Symbol</a><span class="delimiter">)</span> <span class="delimiter">{</span>
      <span class="keyword">val</span> <a title="String" id="728314">path</a> = <a href="#728310" title="String">jclassName</a> <span title="(x$1: Any)String">+</span> <span title="String(&quot;.class&quot;)" class="string">&quot;.class&quot;</span>
      <span class="keyword">val</span> <a title="java.io.DataOutputStream" id="728315">out</a>  = <a href="#728231" title="=&gt; scala.tools.nsc.io.JarWriter">writer</a>.<a href="../../io/Jar.scala.html#728284" title="(path: String)java.io.DataOutputStream">newOutputStream</a><span class="delimiter">(</span><a href="#728314" title="String">path</a><span class="delimiter">)</span>

      <span class="keyword">try</span> <a href="#728315" title="java.io.DataOutputStream">out</a>.<span title="(x$1: Array[Byte], x$2: Int, x$3: Int)Unit">write</span><span class="delimiter">(</span><a href="#728311" title="Array[Byte]">jclassBytes</a>, <span title="Int(0)" class="int">0</span>, <a href="#728311" title="Array[Byte]">jclassBytes</a>.<a href="../../../../Array.scala.html#56638" title="=&gt; Int">length</a><span class="delimiter">)</span>
      <span class="keyword">finally</span> <a href="#728315" title="java.io.DataOutputStream">out</a>.<span title="()Unit">flush</span><span class="delimiter">(</span><span class="delimiter">)</span>

      <a href="../../Global.scala.html#537506" title="(msg: String)Unit">informProgress</a><span class="delimiter">(</span><span title="String(&quot;added &quot;)" class="string">&quot;added &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#728309" title="String">label</a> <span title="(x$1: Any)String">+</span> <a href="#728314" title="String">path</a> <span title="(x$1: Any)String">+</span> <span title="String(&quot; to jar&quot;)" class="string">&quot; to jar&quot;</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>
    <span class="keyword">override</span> <span class="keyword">def</span> <a title="()Unit" id="728234">close</a><span class="delimiter">(</span><span class="delimiter">)</span> = <a href="#728231" title="=&gt; scala.tools.nsc.io.JarWriter">writer</a>.<a href="../../io/Jar.scala.html#728291" title="()Unit">close</a><span class="delimiter">(</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">trait</span> <a title="trait JavapBytecodeWriter extends Object with BytecodeWriters.this.BytecodeWriter" id="623381">JavapBytecodeWriter</a> <a href="../../../../Unit.scala.html#1515" title="Unit" class="keyword">extends</a> <a href="#623379" title="BytecodeWriters.this.BytecodeWriter">BytecodeWriter</a> <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="scala.reflect.io.Directory" id="728324">baseDir</a> = <a href="../../../../reflect/io/Directory.scala.html#531519" title="(path: scala.reflect.io.Path)scala.reflect.io.Directory">Directory</a><a title="scala.reflect.io.Directory" id="728334" class="delimiter">(</a><a href="../../Global.scala.html#537448" title="=&gt; scala.tools.nsc.Settings">settings</a>.<a href="../../settings/ScalaSettings.scala.html#540097" title="=&gt; scala.tools.nsc.Settings#StringSetting">Ygenjavap</a>.<a href="../../../../reflect/io/Path.scala.html#531009" title="implicit scala.reflect.io.Path.string2path : (s: String)scala.reflect.io.Path">value</a><span class="delimiter">)</span>.<a href="../../../../reflect/io/Path.scala.html#531598" title="Boolean" id="728336">createDirectory</a><span class="delimiter">(</span><span class="delimiter">)</span>

    <span class="keyword">def</span> <a title="(bytes: Array[Byte], javapFile: scala.tools.nsc.io.File)Unit" id="728326">emitJavap</a><span class="delimiter">(</span><a title="Array[Byte]" id="728338">bytes</a>: <a href="../../../../Array.scala.html#174" title="Array[Byte]">Array</a><span class="delimiter">[</span>Byte<span class="delimiter">]</span>, <a title="scala.tools.nsc.io.File" id="728339">javapFile</a>: io.<a href="../../../../reflect/io/File.scala.html#23254" title="scala.tools.nsc.io.File">File</a><span class="delimiter">)</span> <span class="delimiter">{</span>
      <span class="keyword">val</span> <a title="java.io.PrintWriter" id="728341">pw</a>    = <a href="#728339" title="scala.tools.nsc.io.File">javapFile</a>.<a href="../../../../reflect/io/File.scala.html#530959" title="()java.io.PrintWriter">printWriter</a><span class="delimiter">(</span><span class="delimiter">)</span>
      <span class="keyword">val</span> <a title="scala.tools.util.JavapClass" id="728342">javap</a> = <a href="#728345" title="scala.tools.util.JavapClass" class="keyword">new</a> <a href="../../../util/Javap.scala.html#51788" title="anonymous class $anon extends scala.tools.util.JavapClass" id="728345">JavapClass</a><span class="delimiter">(</span><a href="../../util/ScalaClassLoader.scala.html#50234" title="scala.tools.nsc.util.ScalaClassLoader.type">ScalaClassLoader</a>.<a href="../../util/ScalaClassLoader.scala.html#594223" title="=&gt; scala.tools.nsc.util.ScalaClassLoader">appLoader</a>, <a href="#728341" title="java.io.PrintWriter">pw</a><span class="delimiter">)</span> <span class="delimiter">{</span>
        <span class="keyword">override</span> <span class="keyword">def</span> <a title="(path: String)Array[Byte]" id="728374">findBytes</a><span class="delimiter">(</span><a title="String" id="728375">path</a>: <span title="String">String</span><span class="delimiter">)</span>: <a href="../../../../Array.scala.html#174" title="Array[Byte]">Array</a><span class="delimiter">[</span>Byte<span class="delimiter">]</span> = <a href="#728338" title="Array[Byte]">bytes</a>
      <span class="delimiter">}</span>

      <span class="keyword">try</span> <a href="../../../util/Javap.scala.html#728368" title="(args: Seq[String])List[scala.tools.util.Javap.JpResult]">javap</a><span class="delimiter">(</span><a href="../../../../collection/generic/GenericCompanion.scala.html#59933" title="(elems: String*)Seq[String]">Seq</a><span class="delimiter">(</span><span title="String(&quot;-verbose&quot;)" class="string">&quot;-verbose&quot;</span>, <span title="String(&quot;dummy&quot;)" class="string">&quot;dummy&quot;</span><span class="delimiter">)</span><span class="delimiter">)</span> <a href="../../../../collection/immutable/List.scala.html#62719" title="(f: scala.tools.util.Javap.JpResult =&gt; Unit)Unit">foreach</a> <span class="delimiter">(</span><a href="#728444" title="scala.tools.util.Javap.JpResult">_</a>.<a href="../../../util/Javap.scala.html#728448" title="()Unit">show</a><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span>
      <span class="keyword">finally</span> <a href="#728341" title="java.io.PrintWriter">pw</a>.<span title="()Unit">close</span><span class="delimiter">(</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>
    <span class="keyword">abstract</span> <span class="keyword">override</span> <span class="keyword">def</span> <a title="(label: String, jclassName: String, jclassBytes: Array[Byte], sym: BytecodeWriters.this.global.Symbol)Unit" id="728327">writeClass</a><span class="delimiter">(</span><a title="String" id="728450">label</a>: <span title="String">String</span>, <a title="String" id="728451">jclassName</a>: <span title="String">String</span>, <a title="Array[Byte]" id="728452">jclassBytes</a>: <a href="../../../../Array.scala.html#174" title="Array[Byte]">Array</a><span class="delimiter">[</span>Byte<span class="delimiter">]</span>, <a title="BytecodeWriters.this.global.Symbol" id="728453">sym</a>: <a href="../../../../reflect/internal/Symbols.scala.html#407146" title="BytecodeWriters.this.global.Symbol">Symbol</a><span class="delimiter">)</span> <span class="delimiter">{</span>
      <a href="#623381" title="BytecodeWriters.this.JavapBytecodeWriter" class="keyword">super</a>.<a href="#728219" title="(label: String, jclassName: String, jclassBytes: Array[Byte], sym: BytecodeWriters.this.global.Symbol)Unit">writeClass</a><span class="delimiter">(</span><a href="#728450" title="String">label</a>, <a href="#728451" title="String">jclassName</a>, <a href="#728452" title="Array[Byte]">jclassBytes</a>, <a href="#728453" title="BytecodeWriters.this.global.Symbol">sym</a><span class="delimiter">)</span>

      <span class="keyword">val</span> <a title="Array[Byte]" id="728455">bytes</a>     = <a href="#623378" title="(sym: BytecodeWriters.this.global.Symbol, clsName: String, suffix: String)tools.nsc.io.AbstractFile">getFile</a><span class="delimiter">(</span><a href="#728453" title="BytecodeWriters.this.global.Symbol">sym</a>, <a href="#728451" title="String">jclassName</a>, <span title="String(&quot;.class&quot;)" class="string">&quot;.class&quot;</span><span class="delimiter">)</span>.<a href="../../../../reflect/io/AbstractFile.scala.html#404323" title="=&gt; Array[Byte]">toByteArray</a>
      <span class="keyword">val</span> <a title="Array[String]" id="728456">segments</a>  = <a href="#728451" title="String">jclassName</a>.<span title="(x$1: String)Array[String]">split</span><span class="delimiter">(</span><span title="String(&quot;[./]&quot;)" class="string">&quot;[./]&quot;</span><span class="delimiter">)</span>
      <span class="keyword">val</span> <a title="scala.reflect.io.File" id="728457">javapFile</a> = <a href="../../../../Predef.scala.html#7555" title="(xs: Array[String])scala.collection.mutable.ArrayOps[String]">segments</a>.<a href="../../../../collection/IndexedSeqOptimized.scala.html#59133" title="(z: tools.nsc.io.Path)(op: (tools.nsc.io.Path, String) =&gt; tools.nsc.io.Path)tools.nsc.io.Path">foldLeft</a><span class="delimiter">(</span><a href="#728324" title="=&gt; scala.reflect.io.Directory">baseDir</a>: <a href="../../../../reflect/io/Path.scala.html#23164" title="tools.nsc.io.Path">Path</a><span class="delimiter">)</span><span class="delimiter">(</span><a href="#728754" title="tools.nsc.io.Path">_</a> <a href="../../../../reflect/io/Path.scala.html#530880" title="(child: scala.reflect.io.Path)scala.reflect.io.Path">/</a> <a href="../../../../reflect/io/Path.scala.html#531009" title="implicit scala.reflect.io.Path.string2path : (s: String)scala.reflect.io.Path">_</a><span class="delimiter">)</span> <a href="../../../../reflect/io/Path.scala.html#530899" title="(ext: String)scala.reflect.io.Path">changeExtension</a> <span title="String(&quot;javap&quot;)" class="string">&quot;javap&quot;</span> <a href="../../../../reflect/io/Path.scala.html#530873" title="=&gt; scala.reflect.io.File">toFile</a>;

      <a href="#728457" title="scala.reflect.io.File">javapFile</a>.<a href="../../../../reflect/io/Path.scala.html#530893" title="scala.reflect.io.Directory" id="728760">parent</a>.<a href="../../../../reflect/io/Path.scala.html#531598" title="Boolean" id="728762">createDirectory</a><span class="delimiter">(</span><span class="delimiter">)</span>
      <a href="#728326" title="(bytes: Array[Byte], javapFile: scala.tools.nsc.io.File)Unit">emitJavap</a><span class="delimiter">(</span><a href="#728455" title="Array[Byte]">bytes</a>, <a href="#728457" title="scala.reflect.io.File">javapFile</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="keyword">trait</span> <a title="trait ClassBytecodeWriter extends Object with BytecodeWriters.this.BytecodeWriter" id="623382">ClassBytecodeWriter</a> <a href="../../../../Unit.scala.html#1515" title="Unit" class="keyword">extends</a> <a href="#623379" title="BytecodeWriters.this.BytecodeWriter">BytecodeWriter</a> <span class="delimiter">{</span>
    <span class="keyword">def</span> <a title="(label: String, jclassName: String, jclassBytes: Array[Byte], sym: BytecodeWriters.this.global.Symbol)Unit" id="728764">writeClass</a><span class="delimiter">(</span><a title="String" id="728767">label</a>: <span title="String">String</span>, <a title="String" id="728768">jclassName</a>: <span title="String">String</span>, <a title="Array[Byte]" id="728769">jclassBytes</a>: <a href="../../../../Array.scala.html#174" title="Array[Byte]">Array</a><span class="delimiter">[</span>Byte<span class="delimiter">]</span>, <a title="BytecodeWriters.this.global.Symbol" id="728770">sym</a>: <a href="../../../../reflect/internal/Symbols.scala.html#407146" title="BytecodeWriters.this.global.Symbol">Symbol</a><span class="delimiter">)</span> <span class="delimiter">{</span>
      <span class="keyword">val</span> <a title="tools.nsc.io.AbstractFile" id="728772">outfile</a>   = <a href="#623378" title="(sym: BytecodeWriters.this.global.Symbol, clsName: String, suffix: String)tools.nsc.io.AbstractFile">getFile</a><span class="delimiter">(</span><a href="#728770" title="BytecodeWriters.this.global.Symbol">sym</a>, <a href="#728768" title="String">jclassName</a>, <span title="String(&quot;.class&quot;)" class="string">&quot;.class&quot;</span><span class="delimiter">)</span>
      <span class="keyword">val</span> <a title="java.io.DataOutputStream" id="728773">outstream</a> = <span title="java.io.DataOutputStream" class="keyword">new</span> <span title="java.io.DataOutputStream">DataOutputStream</span><span class="delimiter">(</span><a href="#728772" title="tools.nsc.io.AbstractFile">outfile</a>.<a href="../../../../reflect/io/AbstractFile.scala.html#404319" title="=&gt; java.io.BufferedOutputStream">bufferedOutput</a><span class="delimiter">)</span>

      <span class="keyword">try</span> <a href="#728773" title="java.io.DataOutputStream">outstream</a>.<span title="(x$1: Array[Byte], x$2: Int, x$3: Int)Unit">write</span><span class="delimiter">(</span><a href="#728769" title="Array[Byte]">jclassBytes</a>, <span title="Int(0)" class="int">0</span>, <a href="#728769" title="Array[Byte]">jclassBytes</a>.<a href="../../../../Array.scala.html#56638" title="=&gt; Int">length</a><span class="delimiter">)</span>
      <span class="keyword">finally</span> <a href="#728773" title="java.io.DataOutputStream">outstream</a>.<span title="()Unit">close</span><span class="delimiter">(</span><span class="delimiter">)</span>
      <a href="../../Global.scala.html#537506" title="(msg: String)Unit">informProgress</a><span class="delimiter">(</span><span title="String(&quot;wrote \'&quot;)" class="string">&quot;wrote '&quot;</span> <span title="(x$1: Any)String">+</span> <a href="#728767" title="String">label</a> <span title="(x$1: Any)String">+</span> <span title="String(&quot;\' to &quot;)" class="string">&quot;' to &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#728772" title="tools.nsc.io.AbstractFile">outfile</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="keyword">trait</span> <a title="trait DumpBytecodeWriter extends Object with BytecodeWriters.this.BytecodeWriter" id="623383">DumpBytecodeWriter</a> <a href="../../../../Unit.scala.html#1515" title="Unit" class="keyword">extends</a> <a href="#623379" title="BytecodeWriters.this.BytecodeWriter">BytecodeWriter</a> <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="scala.reflect.io.Directory" id="728783">baseDir</a> = <a href="../../../../reflect/io/Directory.scala.html#531519" title="(path: scala.reflect.io.Path)scala.reflect.io.Directory">Directory</a><a title="scala.reflect.io.Directory" id="728792" class="delimiter">(</a><a href="../../Global.scala.html#537448" title="=&gt; scala.tools.nsc.Settings">settings</a>.<a href="../../settings/ScalaSettings.scala.html#540099" title="=&gt; scala.tools.nsc.Settings#StringSetting">Ydumpclasses</a>.<a href="../../../../reflect/io/Path.scala.html#531009" title="implicit scala.reflect.io.Path.string2path : (s: String)scala.reflect.io.Path">value</a><span class="delimiter">)</span>.<a href="../../../../reflect/io/Path.scala.html#531598" title="Boolean" id="728794">createDirectory</a><span class="delimiter">(</span><span class="delimiter">)</span>

    <span class="keyword">abstract</span> <span class="keyword">override</span> <span class="keyword">def</span> <a title="(label: String, jclassName: String, jclassBytes: Array[Byte], sym: BytecodeWriters.this.global.Symbol)Unit" id="728785">writeClass</a><span class="delimiter">(</span><a title="String" id="728796">label</a>: <span title="String">String</span>, <a title="String" id="728797">jclassName</a>: <span title="String">String</span>, <a title="Array[Byte]" id="728798">jclassBytes</a>: <a href="../../../../Array.scala.html#174" title="Array[Byte]">Array</a><span class="delimiter">[</span>Byte<span class="delimiter">]</span>, <a title="BytecodeWriters.this.global.Symbol" id="728799">sym</a>: <a href="../../../../reflect/internal/Symbols.scala.html#407146" title="BytecodeWriters.this.global.Symbol">Symbol</a><span class="delimiter">)</span> <span class="delimiter">{</span>
      <a href="#623383" title="BytecodeWriters.this.DumpBytecodeWriter" class="keyword">super</a>.<a href="#728219" title="(label: String, jclassName: String, jclassBytes: Array[Byte], sym: BytecodeWriters.this.global.Symbol)Unit">writeClass</a><span class="delimiter">(</span><a href="#728796" title="String">label</a>, <a href="#728797" title="String">jclassName</a>, <a href="#728798" title="Array[Byte]">jclassBytes</a>, <a href="#728799" title="BytecodeWriters.this.global.Symbol">sym</a><span class="delimiter">)</span>

      <span class="keyword">val</span> <a title="String" id="728801">pathName</a> = <a href="#728797" title="String">jclassName</a>
      <span class="keyword">var</span> <a title="scala.reflect.io.File" id="728802">dumpFile</a> = <a href="#728801" title="String">pathName</a>.<span title="(x$1: String)Array[String]">split</span><a href="../../../../Predef.scala.html#7555" title="(xs: Array[String])scala.collection.mutable.ArrayOps[String]" class="delimiter">(</a><span title="String(&quot;[./]&quot;)" class="string">&quot;[./]&quot;</span><span class="delimiter">)</span>.<a href="../../../../collection/IndexedSeqOptimized.scala.html#59133" title="(z: tools.nsc.io.Path)(op: (tools.nsc.io.Path, String) =&gt; tools.nsc.io.Path)tools.nsc.io.Path">foldLeft</a><span class="delimiter">(</span><a href="#728783" title="=&gt; scala.reflect.io.Directory">baseDir</a>: <a href="../../../../reflect/io/Path.scala.html#23164" title="tools.nsc.io.Path">Path</a><span class="delimiter">)</span> <span class="delimiter">(</span><a href="#729094" title="tools.nsc.io.Path">_</a> <a href="../../../../reflect/io/Path.scala.html#530880" title="(child: scala.reflect.io.Path)scala.reflect.io.Path">/</a> <a href="../../../../reflect/io/Path.scala.html#531009" title="implicit scala.reflect.io.Path.string2path : (s: String)scala.reflect.io.Path">_</a><span class="delimiter">)</span> <a href="../../../../reflect/io/Path.scala.html#530899" title="(ext: String)scala.reflect.io.Path">changeExtension</a> <span title="String(&quot;class&quot;)" class="string">&quot;class&quot;</span> <a href="../../../../reflect/io/Path.scala.html#530873" title="=&gt; scala.reflect.io.File">toFile</a>;
      <a href="#728802" title="scala.reflect.io.File">dumpFile</a>.<a href="../../../../reflect/io/Path.scala.html#530893" title="scala.reflect.io.Directory" id="729100">parent</a>.<a href="../../../../reflect/io/Path.scala.html#531598" title="Boolean" id="729102">createDirectory</a><span class="delimiter">(</span><span class="delimiter">)</span>
      <span class="keyword">val</span> <a title="java.io.DataOutputStream" id="728803">outstream</a> = <span title="java.io.DataOutputStream" class="keyword">new</span> <span title="java.io.DataOutputStream">DataOutputStream</span><span class="delimiter">(</span><span title="java.io.FileOutputStream" class="keyword">new</span> <span title="java.io.FileOutputStream">FileOutputStream</span><span class="delimiter">(</span><a href="#728802" title="scala.reflect.io.File">dumpFile</a>.<a href="../../../../reflect/io/Path.scala.html#530886" title="=&gt; String">path</a><span class="delimiter">)</span><span class="delimiter">)</span>

      <span class="keyword">try</span> <a href="#728803" title="java.io.DataOutputStream">outstream</a>.<span title="(x$1: Array[Byte], x$2: Int, x$3: Int)Unit">write</span><span class="delimiter">(</span><a href="#728798" title="Array[Byte]">jclassBytes</a>, <span title="Int(0)" class="int">0</span>, <a href="#728798" title="Array[Byte]">jclassBytes</a>.<a href="../../../../Array.scala.html#56638" title="=&gt; Int">length</a><span class="delimiter">)</span>
      <span class="keyword">finally</span> <a href="#728803" title="java.io.DataOutputStream">outstream</a>.<span title="()Unit">close</span><span class="delimiter">(</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>
<span class="delimiter">}</span>

        </pre>
    </body>
</html>