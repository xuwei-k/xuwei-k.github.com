<?xml version="1.0" encoding="utf-8"?>
      <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <meta http-equiv="Expires" content="0" />
        <title>scala/tools/nsc/backend/icode/Linearizers.scala</title>
        <script type="text/javascript" src="../../../../../jquery-all.js"></script>
        <script type="text/javascript" src="../../../../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../../../../style.css" title="Style"></link>
    </head>
    <body>
        <pre>
/* NSC -- new scala compiler
 * Copyright 2005-2013 LAMP/EPFL
 * @author  Martin Odersky
 */


<span class="keyword">package</span> scala.tools.nsc
<span class="keyword">package</span> backend
<span class="keyword">package</span> icode

<span class="keyword">import</span> scala.tools.nsc.ast._
<span class="keyword">import</span> scala.collection.<span class="delimiter">{</span> mutable, immutable <span class="delimiter">}</span>
<span class="keyword">import</span> mutable.ListBuffer

<span class="keyword">trait</span> <a title="trait Linearizers extends Object" id="30678">Linearizers</a> <a href="../../../../Unit.scala.html#1515" title="Unit" class="delimiter">{</a>
  self: ICodes =&gt;

  <span class="keyword">import</span> <a href="ICodes.scala.html#614874" title="=&gt; scala.tools.nsc.Global">global</a>.debuglog
  <span class="keyword">import</span> <a href="Opcodes.scala.html#614967" title="Linearizers.this.opcodes.type">opcodes</a>._

  <span class="keyword">abstract</span> <span class="keyword">class</span> <a title="class Linearizer extends Object" id="615120">Linearizer</a> <a href="#615120" title="Linearizers.this.Linearizer" class="delimiter">{</a>
    <span class="keyword">def</span> <a title="(c: Linearizers.this.IMethod)List[Linearizers.this.BasicBlock]" id="712012">linearize</a><span class="delimiter">(</span><a title="Linearizers.this.IMethod" id="712348">c</a>: <a href="Members.scala.html#614927" title="Linearizers.this.IMethod">IMethod</a><span class="delimiter">)</span>: <a href="../../../../collection/immutable/List.scala.html#11952" title="List[Linearizers.this.BasicBlock]">List</a><span class="delimiter">[</span>BasicBlock<span class="delimiter">]</span>
    <span class="keyword">def</span> <a title="(c: Linearizers.this.IMethod, start: Linearizers.this.BasicBlock)List[Linearizers.this.BasicBlock]" id="712013">linearizeAt</a><span class="delimiter">(</span><a title="Linearizers.this.IMethod" id="712349">c</a>: <a href="Members.scala.html#614927" title="Linearizers.this.IMethod">IMethod</a>, <a title="Linearizers.this.BasicBlock" id="712350">start</a>: <a href="BasicBlocks.scala.html#614938" title="Linearizers.this.BasicBlock">BasicBlock</a><span class="delimiter">)</span>: <a href="../../../../collection/immutable/List.scala.html#11952" title="List[Linearizers.this.BasicBlock]">List</a><span class="delimiter">[</span>BasicBlock<span class="delimiter">]</span>
  <span class="delimiter">}</span>

  /**
   * A simple linearizer which predicts all branches to
   * take the 'success' branch and tries to schedule those
   * blocks immediately after the test. This is in sync with
   * how 'while' statements are translated (if the test is
   * 'true', the loop continues).
   */
  <span class="keyword">class</span> <a title="class NormalLinearizer extends Linearizers.this.Linearizer with scala.tools.nsc.backend.WorklistAlgorithm" id="615121">NormalLinearizer</a> <a href="#615121" title="Linearizers.this.NormalLinearizer" class="keyword">extends</a> <a href="#615120" title="Linearizers.this.Linearizer">Linearizer</a> <span class="keyword">with</span> <a href="../WorklistAlgorithm.scala.html#29537" title="scala.tools.nsc.backend.WorklistAlgorithm">WorklistAlgorithm</a> <span class="delimiter">{</span>
    <span class="keyword">type</span> <a title="Linearizers.this.BasicBlock" id="712047">Elem</a> = <a href="BasicBlocks.scala.html#614938" title="Linearizers.this.BasicBlock">BasicBlock</a>
    <span class="keyword">val</span> <a title="NormalLinearizer.this.WList" id="712048">worklist</a>: <a href="../../../../collection/mutable/Stack.scala.html#13293" title="NormalLinearizer.this.WList">WList</a> = <a href="../../../../collection/mutable/Stack.scala.html#298117" title="()scala.collection.mutable.Stack[NormalLinearizer.this.Elem]" class="keyword">new</a> mutable.<a href="../../../../collection/mutable/Stack.scala.html#13293" title="scala.collection.mutable.Stack[NormalLinearizer.this.Elem]">Stack</a><span class="delimiter">(</span><span class="delimiter">)</span>
    <span class="keyword">var</span> <a title="List[Linearizers.this.BasicBlock]" id="712051">blocks</a>: <a href="../../../../collection/immutable/List.scala.html#11952" title="List[Linearizers.this.BasicBlock]">List</a><span class="delimiter">[</span>BasicBlock<span class="delimiter">]</span> = <a href="../../../../collection/immutable/List.scala.html#11188" title="scala.collection.immutable.Nil.type">Nil</a>

    <span class="keyword">def</span> <a title="(m: Linearizers.this.IMethod)List[Linearizers.this.BasicBlock]" id="712053">linearize</a><span class="delimiter">(</span><a title="Linearizers.this.IMethod" id="712355">m</a>: <a href="Members.scala.html#614927" title="Linearizers.this.IMethod">IMethod</a><span class="delimiter">)</span>: <a href="../../../../collection/immutable/List.scala.html#11952" title="List[Linearizers.this.BasicBlock]">List</a><span class="delimiter">[</span>BasicBlock<span class="delimiter">]</span> = <span class="delimiter">{</span>
      <span class="keyword">val</span> <a title="Linearizers.this.BasicBlock" id="712357">b</a> = <a href="#712355" title="Linearizers.this.IMethod">m</a>.<a href="Members.scala.html#695993" title="=&gt; Linearizers.this.BasicBlock">startBlock</a>;
      <a href="#712051" title="(x$1: List[Linearizers.this.BasicBlock])Unit">blocks</a> = <a href="../../../../collection/immutable/List.scala.html#11188" title="scala.collection.immutable.Nil.type">Nil</a>;

      <a href="../WorklistAlgorithm.scala.html#695851" title="(initWorklist: =&gt; Unit)Unit">run</a> <span class="delimiter">{</span>
        <a href="#712048" title="=&gt; NormalLinearizer.this.WList">worklist</a> <a href="../../../../collection/mutable/Stack.scala.html#298125" title="(xs: scala.collection.TraversableOnce[NormalLinearizer.this.Elem])NormalLinearizer.this.worklist.type">pushAll</a> <span class="delimiter">(</span><a href="#712355" title="Linearizers.this.IMethod">m</a>.<a href="Members.scala.html#696006" title="=&gt; List[Linearizers.this.ExceptionHandler]">exh</a> <a href="../../../../collection/TraversableLike.scala.html#58063" title="(f: Linearizers.this.ExceptionHandler =&gt; Linearizers.this.BasicBlock)(implicit bf: scala.collection.generic.CanBuildFrom[List[Linearizers.this.ExceptionHandler],Linearizers.this.BasicBlock,scala.collection.TraversableOnce[NormalLinearizer.this.Elem]])scala.collection.TraversableOnce[NormalLinearizer.this.Elem]">map</a> <span class="delimiter">(</span><a href="#712382" title="Linearizers.this.ExceptionHandler">_</a>.<a href="ExceptionHandlers.scala.html#696225" title="=&gt; Linearizers.this.BasicBlock">startBlock</a><span class="delimiter">)</span><span class="delimiter">)</span>;
        <a href="#712048" title="=&gt; NormalLinearizer.this.WList">worklist</a>.<a href="../../../../collection/mutable/Stack.scala.html#298123" title="(elem: NormalLinearizer.this.Elem)NormalLinearizer.this.worklist.type">push</a><span title="Unit" class="delimiter">(</span><a href="#712357" title="Linearizers.this.BasicBlock">b</a><span class="delimiter">)</span>;
      <span class="delimiter">}</span>

      <a href="#712051" title="=&gt; List[Linearizers.this.BasicBlock]">blocks</a>.<a href="../../../../collection/immutable/List.scala.html#62716" title="=&gt; List[Linearizers.this.BasicBlock]">reverse</a>;
    <span class="delimiter">}</span>

    <span class="keyword">def</span> <a title="(m: Linearizers.this.IMethod, start: Linearizers.this.BasicBlock)List[Linearizers.this.BasicBlock]" id="712054">linearizeAt</a><span class="delimiter">(</span><a title="Linearizers.this.IMethod" id="712422">m</a>: <a href="Members.scala.html#614927" title="Linearizers.this.IMethod">IMethod</a>, <a title="Linearizers.this.BasicBlock" id="712423">start</a>: <a href="BasicBlocks.scala.html#614938" title="Linearizers.this.BasicBlock">BasicBlock</a><span class="delimiter">)</span>: <a href="../../../../collection/immutable/List.scala.html#11952" title="List[Linearizers.this.BasicBlock]">List</a><span class="delimiter">[</span>BasicBlock<span class="delimiter">]</span> = <span class="delimiter">{</span>
      <a href="#712051" title="(x$1: List[Linearizers.this.BasicBlock])Unit">blocks</a> = <a href="../../../../collection/immutable/List.scala.html#11188" title="scala.collection.immutable.Nil.type">Nil</a>
      <a href="#712048" title="=&gt; NormalLinearizer.this.WList">worklist</a>.<a href="../../../../collection/mutable/Stack.scala.html#298128" title="()Unit">clear</a><span class="delimiter">(</span><span class="delimiter">)</span>
      <a href="#712055" title="(startBlock: Linearizers.this.BasicBlock)List[Linearizers.this.BasicBlock]">linearize</a><span class="delimiter">(</span><a href="#712423" title="Linearizers.this.BasicBlock">start</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>

    /** Linearize another subtree and append it to the existing blocks. */
    <span class="keyword">def</span> <a title="(startBlock: Linearizers.this.BasicBlock)List[Linearizers.this.BasicBlock]" id="712055">linearize</a><span class="delimiter">(</span><a title="Linearizers.this.BasicBlock" id="712425">startBlock</a>: <a href="BasicBlocks.scala.html#614938" title="Linearizers.this.BasicBlock">BasicBlock</a><span class="delimiter">)</span>: <a href="../../../../collection/immutable/List.scala.html#11952" title="List[Linearizers.this.BasicBlock]">List</a><span class="delimiter">[</span>BasicBlock<span class="delimiter">]</span> = <span class="delimiter">{</span>
      //blocks = startBlock :: Nil;
      <a href="../WorklistAlgorithm.scala.html#695851" title="(initWorklist: =&gt; Unit)Unit">run</a><span class="delimiter">(</span> <span class="delimiter">{</span> <a href="#712048" title="=&gt; NormalLinearizer.this.WList">worklist</a>.<a href="../../../../collection/mutable/Stack.scala.html#298123" title="(elem: NormalLinearizer.this.Elem)NormalLinearizer.this.worklist.type">push</a><span title="Unit" class="delimiter">(</span><a href="#712425" title="Linearizers.this.BasicBlock">startBlock</a><span class="delimiter">)</span>; <span class="delimiter">}</span> <span class="delimiter">)</span>;
      <a href="#712051" title="=&gt; List[Linearizers.this.BasicBlock]">blocks</a>.<a href="../../../../collection/immutable/List.scala.html#62716" title="=&gt; List[Linearizers.this.BasicBlock]">reverse</a>;
    <span class="delimiter">}</span>

    <span class="keyword">def</span> <a title="(b: Linearizers.this.BasicBlock)Unit" id="712056">processElement</a><span class="delimiter">(</span><a title="Linearizers.this.BasicBlock" id="712436">b</a>: <a href="BasicBlocks.scala.html#614938" title="Linearizers.this.BasicBlock">BasicBlock</a><span class="delimiter">)</span> =
      <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#712436" title="Linearizers.this.BasicBlock">b</a>.<a href="BasicBlocks.scala.html#695957" title="=&gt; Boolean">nonEmpty</a><span class="delimiter">)</span> <span class="delimiter">{</span>
        <a href="#712058" title="(b: Linearizers.this.BasicBlock)Unit">add</a><span class="delimiter">(</span><a href="#712436" title="Linearizers.this.BasicBlock">b</a><span class="delimiter">)</span>;
        <a href="#712436" title="Linearizers.this.BasicBlock">b</a>.<a href="BasicBlocks.scala.html#695960" title="=&gt; Linearizers.this.Instruction">lastInstruction</a> <span class="keyword">match</span> <span class="delimiter">{</span>
          <span class="keyword">case</span> JUMP<a href="#3308197" title="Unit" id="3308199" class="delimiter">(</a><a href="Opcodes.scala.html#700755" title="Linearizers.this.BasicBlock" id="712451">whereto</a><span class="delimiter">)</span> =&gt;
            <a href="#712058" title="(b: Linearizers.this.BasicBlock)Unit">add</a><a href="#3308217" title="(x: Unit)Unit" class="delimiter">(</a><a href="#712451" title="Linearizers.this.BasicBlock">whereto</a><span class="delimiter">)</span>;
          <span class="keyword">case</span> CJUMP<a href="#3308197" title="Unit" id="3308203" class="delimiter">(</a><a href="Opcodes.scala.html#701128" title="Linearizers.this.BasicBlock" id="712462">success</a>, <a href="Opcodes.scala.html#701130" title="Linearizers.this.BasicBlock" id="712463">failure</a>, <a href="Opcodes.scala.html#701132" title="Linearizers.this.TestOp" id="3308200">_</a>, <a href="Opcodes.scala.html#701134" title="Linearizers.this.TypeKind" id="3308201">_</a><span class="delimiter">)</span> =&gt;
            <a href="#712058" title="(b: Linearizers.this.BasicBlock)Unit">add</a><span class="delimiter">(</span><a href="#712462" title="Linearizers.this.BasicBlock">success</a><span class="delimiter">)</span>;
            <a href="#712058" title="(b: Linearizers.this.BasicBlock)Unit">add</a><span class="delimiter">(</span><a href="#712463" title="Linearizers.this.BasicBlock">failure</a><span class="delimiter">)</span>;
          <span class="keyword">case</span> CZJUMP<a href="#3308197" title="Unit" id="3308207" class="delimiter">(</a><a href="Opcodes.scala.html#701202" title="Linearizers.this.BasicBlock" id="712480">success</a>, <a href="Opcodes.scala.html#701204" title="Linearizers.this.BasicBlock" id="712481">failure</a>, <a href="Opcodes.scala.html#701206" title="Linearizers.this.TestOp" id="3308204">_</a>, <a href="Opcodes.scala.html#701208" title="Linearizers.this.TypeKind" id="3308205">_</a><span class="delimiter">)</span> =&gt;
            <a href="#712058" title="(b: Linearizers.this.BasicBlock)Unit">add</a><span class="delimiter">(</span><a href="#712480" title="Linearizers.this.BasicBlock">success</a><span class="delimiter">)</span>;
            <a href="#712058" title="(b: Linearizers.this.BasicBlock)Unit">add</a><span class="delimiter">(</span><a href="#712481" title="Linearizers.this.BasicBlock">failure</a><span class="delimiter">)</span>;
          <span class="keyword">case</span> SWITCH<a href="#3308197" title="Unit" id="3308210" class="delimiter">(</a><a href="Opcodes.scala.html#701271" title="List[List[Int]]" id="3308208">_</a>, <a href="Opcodes.scala.html#701273" title="List[Linearizers.this.BasicBlock]" id="712496">labels</a><span class="delimiter">)</span> =&gt;
            <a href="#712059" title="(bs: List[Linearizers.this.BasicBlock])Unit">add</a><a href="#3308217" title="(x: Unit)Unit" class="delimiter">(</a><a href="#712496" title="List[Linearizers.this.BasicBlock]">labels</a><span class="delimiter">)</span>;
          <span class="keyword">case</span> RETURN<a href="#3308197" title="Unit" id="3308213" class="delimiter">(</a><a href="Opcodes.scala.html#700784" title="Linearizers.this.TypeKind" id="3308211">_</a><span class="delimiter">)</span> =&gt; <a href="#3308217" title="(x: Unit)Unit" class="delimiter">(</a><span class="delimiter">)</span>;
          <span class="keyword">case</span> THROW<a href="#3308197" title="Unit" id="3308215" class="delimiter">(</a><a href="Opcodes.scala.html#700813" title="Linearizers.this.global.Symbol" id="712505">clasz</a><span class="delimiter">)</span> =&gt;   <a href="#3308217" title="(x: Unit)Unit" class="delimiter">(</a><span class="delimiter">)</span>;
        <span class="delimiter">}</span>
      <span class="delimiter">}</span>

    <span class="keyword">def</span> <a title="=&gt; NormalLinearizer.this.Elem" id="712057">dequeue</a>: <a href="BasicBlocks.scala.html#614938" title="NormalLinearizer.this.Elem">Elem</a> = <a href="#712048" title="=&gt; NormalLinearizer.this.WList">worklist</a>.<a href="../../../../collection/mutable/Stack.scala.html#298127" title="()NormalLinearizer.this.Elem">pop</a>;

    /**
     * Prepend b to the list, if not already scheduled.
     * TODO: use better test than linear search
     */
    <span class="keyword">def</span> <a title="(b: Linearizers.this.BasicBlock)Unit" id="712058">add</a><span class="delimiter">(</span><a title="Linearizers.this.BasicBlock" id="712446">b</a>: <a href="BasicBlocks.scala.html#614938" title="Linearizers.this.BasicBlock">BasicBlock</a><span class="delimiter">)</span> <span class="delimiter">{</span>
      <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#712051" title="=&gt; List[Linearizers.this.BasicBlock]">blocks</a>.<a href="../../../../collection/LinearSeqOptimized.scala.html#86380" title="(elem: Any)Boolean">contains</a><span class="delimiter">(</span><a href="#712446" title="Linearizers.this.BasicBlock">b</a><span class="delimiter">)</span><span class="delimiter">)</span>
        <span title="Unit" class="delimiter">(</span><span class="delimiter">)</span>
      <span class="keyword">else</span> <span class="delimiter">{</span>
        <a href="#712051" title="(x$1: List[Linearizers.this.BasicBlock])Unit">blocks</a> = <a href="#712446" title="Linearizers.this.BasicBlock">b</a> <a href="../../../../collection/immutable/List.scala.html#62685" title="(x: Linearizers.this.BasicBlock)List[Linearizers.this.BasicBlock]">::</a> <a href="#712051" title="=&gt; List[Linearizers.this.BasicBlock]">blocks</a>;
        <a href="#712048" title="=&gt; NormalLinearizer.this.WList">worklist</a> <a href="../../../../collection/mutable/Stack.scala.html#298123" title="(elem: NormalLinearizer.this.Elem)NormalLinearizer.this.worklist.type">push</a> <a href="#712446" title="Linearizers.this.BasicBlock">b</a>;
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>

    <span class="keyword">def</span> <a title="(bs: List[Linearizers.this.BasicBlock])Unit" id="712059">add</a><span class="delimiter">(</span><a title="List[Linearizers.this.BasicBlock]" id="712444">bs</a>: <a href="../../../../collection/immutable/List.scala.html#11952" title="List[Linearizers.this.BasicBlock]">List</a><span class="delimiter">[</span>BasicBlock<span class="delimiter">]</span><span class="delimiter">)</span>: <a href="../../../../Unit.scala.html#1515" title="Unit">Unit</a> = <a href="#712444" title="List[Linearizers.this.BasicBlock]">bs</a> <a href="../../../../collection/immutable/List.scala.html#62719" title="(f: Linearizers.this.BasicBlock =&gt; Unit)Unit">foreach</a> <a href="#712058" title="(b: Linearizers.this.BasicBlock)Unit">add</a>;
  <span class="delimiter">}</span>

  /**
   * Linearize code using a depth first traversal.
   */
  <span class="keyword">class</span> <a title="class DepthFirstLinerizer extends Linearizers.this.Linearizer" id="615122">DepthFirstLinerizer</a> <a href="#615122" title="Linearizers.this.DepthFirstLinerizer" class="keyword">extends</a> <a href="#615120" title="Linearizers.this.Linearizer">Linearizer</a> <span class="delimiter">{</span>
    <span class="keyword">var</span> <a title="List[Linearizers.this.BasicBlock]" id="712040">blocks</a>: <a href="../../../../collection/immutable/List.scala.html#11952" title="List[Linearizers.this.BasicBlock]">List</a><span class="delimiter">[</span>BasicBlock<span class="delimiter">]</span> = <a href="../../../../collection/immutable/List.scala.html#11188" title="scala.collection.immutable.Nil.type">Nil</a>;

    <span class="keyword">def</span> <a title="(m: Linearizers.this.IMethod)List[Linearizers.this.BasicBlock]" id="712042">linearize</a><span class="delimiter">(</span><a title="Linearizers.this.IMethod" id="712549">m</a>: <a href="Members.scala.html#614927" title="Linearizers.this.IMethod">IMethod</a><span class="delimiter">)</span>: <a href="../../../../collection/immutable/List.scala.html#11952" title="List[Linearizers.this.BasicBlock]">List</a><span class="delimiter">[</span>BasicBlock<span class="delimiter">]</span> = <span class="delimiter">{</span>
      <a href="#712040" title="(x$1: List[Linearizers.this.BasicBlock])Unit">blocks</a> = <a href="../../../../collection/immutable/List.scala.html#11188" title="scala.collection.immutable.Nil.type">Nil</a>;

      <a href="#712044" title="(b: Linearizers.this.BasicBlock)Unit">dfs</a><span class="delimiter">(</span><a href="#712549" title="Linearizers.this.IMethod">m</a>.<a href="Members.scala.html#695993" title="=&gt; Linearizers.this.BasicBlock">startBlock</a><span class="delimiter">)</span>;
      <a href="#712549" title="Linearizers.this.IMethod">m</a>.<a href="Members.scala.html#696006" title="=&gt; List[Linearizers.this.ExceptionHandler]">exh</a> <a href="../../../../collection/immutable/List.scala.html#62719" title="(f: Linearizers.this.ExceptionHandler =&gt; Unit)Unit">foreach</a> <span class="delimiter">(</span><a title="Linearizers.this.ExceptionHandler" id="712573">b</a> =&gt; <a href="#712044" title="(b: Linearizers.this.BasicBlock)Unit">dfs</a><span class="delimiter">(</span><a href="#712573" title="Linearizers.this.ExceptionHandler">b</a>.<a href="ExceptionHandlers.scala.html#696225" title="=&gt; Linearizers.this.BasicBlock">startBlock</a><span class="delimiter">)</span><span class="delimiter">)</span>;

      <a href="#712040" title="=&gt; List[Linearizers.this.BasicBlock]">blocks</a>.<a href="../../../../collection/immutable/List.scala.html#62716" title="=&gt; List[Linearizers.this.BasicBlock]">reverse</a>
    <span class="delimiter">}</span>

    <span class="keyword">def</span> <a title="(m: Linearizers.this.IMethod, start: Linearizers.this.BasicBlock)List[Linearizers.this.BasicBlock]" id="712043">linearizeAt</a><span class="delimiter">(</span><a title="Linearizers.this.IMethod" id="712576">m</a>: <a href="Members.scala.html#614927" title="Linearizers.this.IMethod">IMethod</a>, <a title="Linearizers.this.BasicBlock" id="712577">start</a>: <a href="BasicBlocks.scala.html#614938" title="Linearizers.this.BasicBlock">BasicBlock</a><span class="delimiter">)</span>: <a href="../../../../collection/immutable/List.scala.html#11952" title="List[Linearizers.this.BasicBlock]">List</a><span class="delimiter">[</span>BasicBlock<span class="delimiter">]</span> = <span class="delimiter">{</span>
      <a href="#712040" title="(x$1: List[Linearizers.this.BasicBlock])Unit">blocks</a> = <a href="../../../../collection/immutable/List.scala.html#11188" title="scala.collection.immutable.Nil.type">Nil</a>
      <a href="#712044" title="(b: Linearizers.this.BasicBlock)Unit">dfs</a><span class="delimiter">(</span><a href="#712577" title="Linearizers.this.BasicBlock">start</a><span class="delimiter">)</span>
      <a href="#712040" title="=&gt; List[Linearizers.this.BasicBlock]">blocks</a>.<a href="../../../../collection/immutable/List.scala.html#62716" title="=&gt; List[Linearizers.this.BasicBlock]">reverse</a>
    <span class="delimiter">}</span>

    <span class="keyword">def</span> <a title="(b: Linearizers.this.BasicBlock)Unit" id="712044">dfs</a><span class="delimiter">(</span><a title="Linearizers.this.BasicBlock" id="712550">b</a>: <a href="BasicBlocks.scala.html#614938" title="Linearizers.this.BasicBlock">BasicBlock</a><span class="delimiter">)</span>: <a href="../../../../Unit.scala.html#1515" title="Unit">Unit</a> =
      <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#712550" title="Linearizers.this.BasicBlock">b</a>.<a href="BasicBlocks.scala.html#695957" title="=&gt; Boolean">nonEmpty</a> <a href="../../../../Boolean.scala.html#57826" title="(x: Boolean)Boolean">&amp;&amp;</a> <a href="#712045" title="(b: Linearizers.this.BasicBlock)Boolean">add</a><span class="delimiter">(</span><a href="#712550" title="Linearizers.this.BasicBlock">b</a><span class="delimiter">)</span><span class="delimiter">)</span>
        <a href="#712550" title="Linearizers.this.BasicBlock">b</a>.<a href="BasicBlocks.scala.html#695966" title="=&gt; List[Linearizers.this.BasicBlock]">successors</a> <a href="../../../../collection/immutable/List.scala.html#62719" title="(f: Linearizers.this.BasicBlock =&gt; Unit)Unit">foreach</a> <a href="#712044" title="(b: Linearizers.this.BasicBlock)Unit">dfs</a>;

    /**
     * Prepend b to the list, if not already scheduled.
     * TODO: use better test than linear search
     * @return Returns true if the block was added.
     */
    <span class="keyword">def</span> <a title="(b: Linearizers.this.BasicBlock)Boolean" id="712045">add</a><span class="delimiter">(</span><a title="Linearizers.this.BasicBlock" id="712579">b</a>: <a href="BasicBlocks.scala.html#614938" title="Linearizers.this.BasicBlock">BasicBlock</a><span class="delimiter">)</span>: <a href="../../../../Boolean.scala.html#1425" title="Boolean">Boolean</a> =
      <a href="../../../../Boolean.scala.html#57822" title="=&gt; Boolean">!</a><span class="delimiter">(</span><a href="#712040" title="=&gt; List[Linearizers.this.BasicBlock]">blocks</a> <a href="../../../../collection/LinearSeqOptimized.scala.html#86380" title="(elem: Any)Boolean">contains</a> <a href="#712579" title="Linearizers.this.BasicBlock">b</a><span class="delimiter">)</span> <a href="../../../../Boolean.scala.html#57826" title="(x: Boolean)Boolean">&amp;&amp;</a> <span class="delimiter">{</span>
        <a href="#712040" title="(x$1: List[Linearizers.this.BasicBlock])Unit">blocks</a> = <a href="#712579" title="Linearizers.this.BasicBlock">b</a> <a href="../../../../collection/immutable/List.scala.html#62685" title="(x: Linearizers.this.BasicBlock)List[Linearizers.this.BasicBlock]">::</a> <a href="#712040" title="=&gt; List[Linearizers.this.BasicBlock]">blocks</a>;
        <span title="Boolean(true)" class="keyword">true</span>
      <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  /**
   * Linearize code in reverse post order. In fact, it does
   * a post order traversal, prepending visited nodes to the list.
   * This way, it is constructed already in reverse post order.
   */
  <span class="keyword">class</span> <a title="class ReversePostOrderLinearizer extends Linearizers.this.Linearizer" id="615123">ReversePostOrderLinearizer</a> <a href="#615123" title="Linearizers.this.ReversePostOrderLinearizer" class="keyword">extends</a> <a href="#615120" title="Linearizers.this.Linearizer">Linearizer</a> <span class="delimiter">{</span>
    <span class="keyword">var</span> <a title="List[Linearizers.this.BasicBlock]" id="712028">blocks</a>: <a href="../../../../collection/immutable/List.scala.html#11952" title="List[Linearizers.this.BasicBlock]">List</a><span class="delimiter">[</span>BasicBlock<span class="delimiter">]</span> = <a href="../../../../collection/immutable/List.scala.html#11188" title="scala.collection.immutable.Nil.type">Nil</a>
    <span class="keyword">val</span> <a title="scala.collection.mutable.HashSet[Linearizers.this.BasicBlock]" id="712030">visited</a> = <a href="../../../../collection/mutable/HashSet.scala.html#125959" title="()scala.collection.mutable.HashSet[Linearizers.this.BasicBlock]" class="keyword">new</a> mutable.<a href="../../../../collection/mutable/HashSet.scala.html#13053" title="scala.collection.mutable.HashSet[Linearizers.this.BasicBlock]">HashSet</a><span class="delimiter">[</span>BasicBlock<span class="delimiter">]</span>
    <span class="keyword">val</span> <a title="scala.collection.mutable.BitSet" id="712032">added</a> = <a href="../../../../collection/mutable/BitSet.scala.html#90869" title="()scala.collection.mutable.BitSet" class="keyword">new</a> mutable.<a href="../../../../collection/mutable/BitSet.scala.html#12450" title="scala.collection.mutable.BitSet">BitSet</a>

    <span class="keyword">def</span> <a title="(m: Linearizers.this.IMethod)List[Linearizers.this.BasicBlock]" id="712034">linearize</a><span class="delimiter">(</span><a title="Linearizers.this.IMethod" id="712614">m</a>: <a href="Members.scala.html#614927" title="Linearizers.this.IMethod">IMethod</a><span class="delimiter">)</span>: <a href="../../../../collection/immutable/List.scala.html#11952" title="List[Linearizers.this.BasicBlock]">List</a><span class="delimiter">[</span>BasicBlock<span class="delimiter">]</span> = <span class="delimiter">{</span>
      <a href="#712028" title="(x$1: List[Linearizers.this.BasicBlock])Unit">blocks</a> = <a href="../../../../collection/immutable/List.scala.html#11188" title="scala.collection.immutable.Nil.type">Nil</a>;
      <a href="#712030" title="=&gt; scala.collection.mutable.HashSet[Linearizers.this.BasicBlock]">visited</a>.<a href="../../../../collection/mutable/HashSet.scala.html#125968" title="()Unit">clear</a><span class="delimiter">(</span><span class="delimiter">)</span>
      <a href="#712032" title="=&gt; scala.collection.mutable.BitSet">added</a>.<a href="../../../../collection/mutable/BitSet.scala.html#90878" title="()Unit">clear</a>;

      <a href="#712614" title="Linearizers.this.IMethod">m</a>.<a href="Members.scala.html#696006" title="=&gt; List[Linearizers.this.ExceptionHandler]">exh</a> <a href="../../../../collection/immutable/List.scala.html#62719" title="(f: Linearizers.this.ExceptionHandler =&gt; Unit)Unit">foreach</a> <span class="delimiter">(</span><a title="Linearizers.this.ExceptionHandler" id="712637">b</a> =&gt; <a href="#712036" title="(b: Linearizers.this.BasicBlock)Unit">rpo</a><span class="delimiter">(</span><a href="#712637" title="Linearizers.this.ExceptionHandler">b</a>.<a href="ExceptionHandlers.scala.html#696225" title="=&gt; Linearizers.this.BasicBlock">startBlock</a><span class="delimiter">)</span><span class="delimiter">)</span>;
      <a href="#712036" title="(b: Linearizers.this.BasicBlock)Unit">rpo</a><span class="delimiter">(</span><a href="#712614" title="Linearizers.this.IMethod">m</a>.<a href="Members.scala.html#695993" title="=&gt; Linearizers.this.BasicBlock">startBlock</a><span class="delimiter">)</span>;

      // if the start block has predecessors, it won't be the first one
      // in the linearization, so we need to enforce it here
      <span title="List[Linearizers.this.BasicBlock]" class="keyword">if</span> <span class="delimiter">(</span><a href="#712614" title="Linearizers.this.IMethod">m</a>.<a href="Members.scala.html#695993" title="=&gt; Linearizers.this.BasicBlock">startBlock</a>.<a href="BasicBlocks.scala.html#695968" title="=&gt; List[Linearizers.this.BasicBlock]">predecessors</a> <span title="(x$1: AnyRef)Boolean">eq</span> <a href="../../../../collection/immutable/List.scala.html#11188" title="scala.collection.immutable.Nil.type">Nil</a><span class="delimiter">)</span>
        <a href="#712028" title="=&gt; List[Linearizers.this.BasicBlock]">blocks</a>
      <span class="keyword">else</span>
        <a href="#712614" title="Linearizers.this.IMethod">m</a>.<a href="Members.scala.html#695993" title="=&gt; Linearizers.this.BasicBlock">startBlock</a> <a href="../../../../collection/immutable/List.scala.html#62685" title="(x: Linearizers.this.BasicBlock)List[Linearizers.this.BasicBlock]">::</a> <span class="delimiter">(</span><a href="#712028" title="=&gt; List[Linearizers.this.BasicBlock]">blocks</a>.<a href="../../../../collection/TraversableLike.scala.html#58074" title="(p: Linearizers.this.BasicBlock =&gt; Boolean)List[Linearizers.this.BasicBlock]">filterNot</a><span class="delimiter">(</span><a href="#712647" title="Linearizers.this.BasicBlock">_</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="#712614" title="Linearizers.this.IMethod">m</a>.<a href="Members.scala.html#695993" title="=&gt; Linearizers.this.BasicBlock">startBlock</a><span class="delimiter">)</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>

    <span class="keyword">def</span> <a title="(m: Linearizers.this.IMethod, start: Linearizers.this.BasicBlock)List[Linearizers.this.BasicBlock]" id="712035">linearizeAt</a><span class="delimiter">(</span><a title="Linearizers.this.IMethod" id="712657">m</a>: <a href="Members.scala.html#614927" title="Linearizers.this.IMethod">IMethod</a>, <a title="Linearizers.this.BasicBlock" id="712658">start</a>: <a href="BasicBlocks.scala.html#614938" title="Linearizers.this.BasicBlock">BasicBlock</a><span class="delimiter">)</span>: <a href="../../../../collection/immutable/List.scala.html#11952" title="List[Linearizers.this.BasicBlock]">List</a><span class="delimiter">[</span>BasicBlock<span class="delimiter">]</span> = <span class="delimiter">{</span>
      <a href="#712028" title="(x$1: List[Linearizers.this.BasicBlock])Unit">blocks</a> = <a href="../../../../collection/immutable/List.scala.html#11188" title="scala.collection.immutable.Nil.type">Nil</a>
      <a href="#712030" title="=&gt; scala.collection.mutable.HashSet[Linearizers.this.BasicBlock]">visited</a>.<a href="../../../../collection/mutable/HashSet.scala.html#125968" title="()Unit">clear</a><span class="delimiter">(</span><span class="delimiter">)</span>
      <a href="#712032" title="=&gt; scala.collection.mutable.BitSet">added</a>.<a href="../../../../collection/mutable/BitSet.scala.html#90878" title="()Unit">clear</a><span class="delimiter">(</span><span class="delimiter">)</span>

      <a href="#712036" title="(b: Linearizers.this.BasicBlock)Unit">rpo</a><span class="delimiter">(</span><a href="#712658" title="Linearizers.this.BasicBlock">start</a><span class="delimiter">)</span>
      <a href="#712028" title="=&gt; List[Linearizers.this.BasicBlock]">blocks</a>
    <span class="delimiter">}</span>

    <span class="keyword">def</span> <a title="(b: Linearizers.this.BasicBlock)Unit" id="712036">rpo</a><span class="delimiter">(</span><a title="Linearizers.this.BasicBlock" id="712638">b</a>: <a href="BasicBlocks.scala.html#614938" title="Linearizers.this.BasicBlock">BasicBlock</a><span class="delimiter">)</span>: <a href="../../../../Unit.scala.html#1515" title="Unit">Unit</a> =
      <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#712638" title="Linearizers.this.BasicBlock">b</a>.<a href="BasicBlocks.scala.html#695957" title="=&gt; Boolean">nonEmpty</a> <a href="../../../../Boolean.scala.html#57826" title="(x: Boolean)Boolean">&amp;&amp;</a> <a href="../../../../Boolean.scala.html#57822" title="=&gt; Boolean">!</a><a href="../../../../collection/GenSetLike.scala.html#66403" title="(elem: Linearizers.this.BasicBlock)Boolean">visited</a><span class="delimiter">(</span><a href="#712638" title="Linearizers.this.BasicBlock">b</a><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">{</span>
        <a href="#712030" title="=&gt; scala.collection.mutable.HashSet[Linearizers.this.BasicBlock]">visited</a> <a href="../../../../collection/mutable/HashSet.scala.html#125963" title="(elem: Linearizers.this.BasicBlock)ReversePostOrderLinearizer.this.visited.type">+=</a> <a href="#712638" title="Linearizers.this.BasicBlock">b</a>;
        <a href="#712638" title="Linearizers.this.BasicBlock">b</a>.<a href="BasicBlocks.scala.html#695966" title="=&gt; List[Linearizers.this.BasicBlock]">successors</a> <a href="../../../../collection/immutable/List.scala.html#62719" title="(f: Linearizers.this.BasicBlock =&gt; Unit)Unit">foreach</a> <a href="#712036" title="(b: Linearizers.this.BasicBlock)Unit">rpo</a>
        <a href="#712037" title="(b: Linearizers.this.BasicBlock)Unit">add</a><span class="delimiter">(</span><a href="#712638" title="Linearizers.this.BasicBlock">b</a><span class="delimiter">)</span>
      <span class="delimiter">}</span>

    /**
     * Prepend b to the list, if not already scheduled.
     * @return Returns true if the block was added.
     */
    <span class="keyword">def</span> <a title="(b: Linearizers.this.BasicBlock)Unit" id="712037">add</a><span class="delimiter">(</span><a title="Linearizers.this.BasicBlock" id="712709">b</a>: <a href="BasicBlocks.scala.html#614938" title="Linearizers.this.BasicBlock">BasicBlock</a><span class="delimiter">)</span> = <span class="delimiter">{</span>
      <a href="../../Global.scala.html#537517" title="(msg: =&gt; String)Unit">debuglog</a><span class="delimiter">(</span><span title="String(&quot;Linearizer adding block &quot;)" class="string">&quot;Linearizer adding block &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#712709" title="Linearizers.this.BasicBlock">b</a>.<a href="BasicBlocks.scala.html#695895" title="=&gt; Int">label</a><span class="delimiter">)</span>

      <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="../../../../Boolean.scala.html#57822" title="=&gt; Boolean">!</a><a href="../../../../collection/GenSetLike.scala.html#66403" title="(elem: Int)Boolean">added</a><span class="delimiter">(</span><a href="#712709" title="Linearizers.this.BasicBlock">b</a>.<a href="BasicBlocks.scala.html#695895" title="=&gt; Int">label</a><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">{</span>
        <a href="#712032" title="=&gt; scala.collection.mutable.BitSet">added</a> <a href="../../../../collection/mutable/BitSet.scala.html#90876" title="(elem: Int)ReversePostOrderLinearizer.this.added.type">+=</a> <a href="#712709" title="Linearizers.this.BasicBlock">b</a>.<a href="BasicBlocks.scala.html#695895" title="=&gt; Int">label</a>
        <a href="#712028" title="(x$1: List[Linearizers.this.BasicBlock])Unit">blocks</a> = <a href="#712709" title="Linearizers.this.BasicBlock">b</a> <a href="../../../../collection/immutable/List.scala.html#62685" title="(x: Linearizers.this.BasicBlock)List[Linearizers.this.BasicBlock]">::</a> <a href="#712028" title="=&gt; List[Linearizers.this.BasicBlock]">blocks</a>;
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  /** A 'dump' of the blocks in this method, which does not
   *  require any well-formedness of the basic blocks (like
   *  the last instruction being a jump).
   */
  <span class="keyword">class</span> <a title="class DumpLinearizer extends Linearizers.this.Linearizer" id="615124">DumpLinearizer</a> <a href="#615124" title="Linearizers.this.DumpLinearizer" class="keyword">extends</a> <a href="#615120" title="Linearizers.this.Linearizer">Linearizer</a> <span class="delimiter">{</span>
    <span class="keyword">def</span> <a title="(m: Linearizers.this.IMethod)List[Linearizers.this.BasicBlock]" id="712061">linearize</a><span class="delimiter">(</span><a title="Linearizers.this.IMethod" id="712747">m</a>: <a href="Members.scala.html#614927" title="Linearizers.this.IMethod">IMethod</a><span class="delimiter">)</span>: <a href="../../../../collection/immutable/List.scala.html#11952" title="List[Linearizers.this.BasicBlock]">List</a><span class="delimiter">[</span>BasicBlock<span class="delimiter">]</span> = <a href="#712747" title="Linearizers.this.IMethod">m</a>.<a href="Members.scala.html#695995" title="=&gt; List[Linearizers.this.BasicBlock]">blocks</a>
    <span class="keyword">def</span> <a title="(m: Linearizers.this.IMethod, start: Linearizers.this.BasicBlock)List[Linearizers.this.BasicBlock]" id="712062">linearizeAt</a><span class="delimiter">(</span><a title="Linearizers.this.IMethod" id="712748">m</a>: <a href="Members.scala.html#614927" title="Linearizers.this.IMethod">IMethod</a>, <a title="Linearizers.this.BasicBlock" id="712749">start</a>: <a href="BasicBlocks.scala.html#614938" title="Linearizers.this.BasicBlock">BasicBlock</a><span class="delimiter">)</span>: <a href="../../../../collection/immutable/List.scala.html#11952" title="List[Linearizers.this.BasicBlock]">List</a><span class="delimiter">[</span>BasicBlock<span class="delimiter">]</span> = sys.<a href="../../../../sys/package.scala.html#55658" title="(message: String)Nothing">error</a><span class="delimiter">(</span><span title="String(&quot;not implemented&quot;)" class="string">&quot;not implemented&quot;</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  /** The MSIL linearizer is used only for methods with at least one exception handler.
   *  It makes sure that all the blocks belonging to a `try`, `catch` or `finally` block
   *  are emitted in an order that allows the lexical nesting of try-catch-finally, just
   *  like in the source code.
   */
  <span class="keyword">class</span> <a title="class MSILLinearizer extends Linearizers.this.Linearizer" id="615125">MSILLinearizer</a> <a href="#615125" title="Linearizers.this.MSILLinearizer" class="keyword">extends</a> <a href="#615120" title="Linearizers.this.Linearizer">Linearizer</a> <span class="delimiter">{</span>
    /** The MSIL linearizer first calls a NormalLInearizer. This is because the ILGenerator checks
     *  the stack size before emitting instructions. For instance, to emit a `store`, there needs
     *  to be some value on the stack. This can blow up in situations like this:
     *       ...
     *       jump 3
     *    4: store_local 0
     *       jump 5
     *    3: load_value
     *       jump 4
     *    5: ...
     *  here, 3 must be scheduled first.
     *
     *  The NormalLinearizer also removes dead blocks (blocks without predecessor). This is important
     *  in the following example:
     *     try { throw new Exception }
     *     catch { case e =&gt; throw e }
     *  which adds a dead block containing just a &quot;throw&quot; (which, again, would blow up code generation
     *  because of the stack size; there's no value on the stack when emitting that `throw`)
     */
    <span class="keyword">val</span> <a title="Linearizers.this.NormalLinearizer" id="712751">normalLinearizer</a> = <span title="Linearizers.this.NormalLinearizer" class="keyword">new</span> <a href="#615121" title="Linearizers.this.NormalLinearizer">NormalLinearizer</a><span class="delimiter">(</span><span class="delimiter">)</span>

    <span class="keyword">def</span> <a title="(m: Linearizers.this.IMethod)List[Linearizers.this.BasicBlock]" id="712753">linearize</a><span class="delimiter">(</span><a title="Linearizers.this.IMethod" id="712758">m</a>: <a href="Members.scala.html#614927" title="Linearizers.this.IMethod">IMethod</a><span class="delimiter">)</span>: <a href="../../../../collection/immutable/List.scala.html#11952" title="List[Linearizers.this.BasicBlock]">List</a><span class="delimiter">[</span>BasicBlock<span class="delimiter">]</span> = <span class="delimiter">{</span>

      <span class="keyword">val</span> <a title="scala.collection.immutable.Map[scala.collection.immutable.Set[Linearizers.this.BasicBlock],List[Linearizers.this.ExceptionHandler]]" id="712759">handlersByCovered</a> = <a href="#712758" title="Linearizers.this.IMethod">m</a>.<a href="Members.scala.html#696006" title="=&gt; List[Linearizers.this.ExceptionHandler]">exh</a>.<a href="../../../../collection/TraversableLike.scala.html#58081" title="(f: Linearizers.this.ExceptionHandler =&gt; scala.collection.immutable.Set[Linearizers.this.BasicBlock])scala.collection.immutable.Map[scala.collection.immutable.Set[Linearizers.this.BasicBlock],List[Linearizers.this.ExceptionHandler]]">groupBy</a><span class="delimiter">(</span><a href="#712772" title="Linearizers.this.ExceptionHandler">_</a>.<a href="ExceptionHandlers.scala.html#696226" title="=&gt; scala.collection.immutable.Set[Linearizers.this.BasicBlock]">covered</a><span class="delimiter">)</span>

      // number of basic blocks covered by the entire try-catch expression
      <span class="keyword">def</span> <a title="(covered: scala.collection.immutable.Set[Linearizers.this.BasicBlock])Int" id="712760">size</a><span class="delimiter">(</span><a title="scala.collection.immutable.Set[Linearizers.this.BasicBlock]" id="712774">covered</a>: scala.collection.immutable.<a href="../../../../collection/immutable/Set.scala.html#11919" title="scala.collection.immutable.Set[Linearizers.this.BasicBlock]">Set</a><span class="delimiter">[</span>BasicBlock<span class="delimiter">]</span><span class="delimiter">)</span> = <span class="delimiter">{</span>
        <span class="keyword">val</span> <a title="List[Linearizers.this.ExceptionHandler]" id="712775">hs</a> = <a href="../../../../collection/MapLike.scala.html#87535" title="(key: scala.collection.immutable.Set[Linearizers.this.BasicBlock])List[Linearizers.this.ExceptionHandler]">handlersByCovered</a><span class="delimiter">(</span><a href="#712774" title="scala.collection.immutable.Set[Linearizers.this.BasicBlock]">covered</a><span class="delimiter">)</span>
        <a href="#712774" title="scala.collection.immutable.Set[Linearizers.this.BasicBlock]">covered</a>.<a href="../../../../collection/TraversableOnce.scala.html#58190" title="=&gt; Int">size</a> <a href="../../../../Int.scala.html#57154" title="(x: Int)Int">+</a> <span class="delimiter">(</span><a href="#712775" title="List[Linearizers.this.ExceptionHandler]">hs</a> <a href="../../../../collection/TraversableOnce.scala.html#58199" title="(z: Int)(op: (Linearizers.this.ExceptionHandler, Int) =&gt; Int)Int">:\</a> <span title="Int(0)" class="int">0</span><span class="delimiter">)</span><span class="delimiter">(</span><span class="delimiter">(</span><a title="Linearizers.this.ExceptionHandler" id="712817">h</a>, <a title="Int" id="712818">s</a><span class="delimiter">)</span> =&gt; <a href="#712817" title="Linearizers.this.ExceptionHandler">h</a>.<a href="ExceptionHandlers.scala.html#696231" title="=&gt; List[Linearizers.this.BasicBlock]">blocks</a>.<a href="../../../../collection/LinearSeqOptimized.scala.html#86373" title="=&gt; Int">length</a> <a href="../../../../Int.scala.html#57154" title="(x: Int)Int">+</a> <a href="#712818" title="Int">s</a><span class="delimiter">)</span>
      <span class="delimiter">}</span>

      <span class="keyword">val</span> <a title="List[scala.collection.immutable.Set[Linearizers.this.BasicBlock]]" id="712761">tryBlocks</a> = <a href="#712759" title="scala.collection.immutable.Map[scala.collection.immutable.Set[Linearizers.this.BasicBlock],List[Linearizers.this.ExceptionHandler]]">handlersByCovered</a>.<a href="../../../../collection/MapLike.scala.html#87541" title="=&gt; Iterable[scala.collection.immutable.Set[Linearizers.this.BasicBlock]]">keys</a>.<a href="../../../../collection/TraversableOnce.scala.html#58263" title="=&gt; List[scala.collection.immutable.Set[Linearizers.this.BasicBlock]]">toList</a> <a href="../../../../collection/SeqLike.scala.html#58869" title="(f: scala.collection.immutable.Set[Linearizers.this.BasicBlock] =&gt; Int)(implicit ord: scala.math.Ordering[Int])List[scala.collection.immutable.Set[Linearizers.this.BasicBlock]]">sortBy</a> <a href="#712760" title="(covered: scala.collection.immutable.Set[Linearizers.this.BasicBlock])Int">size</a>
      <span class="keyword">var</span> <a title="List[Linearizers.this.BasicBlock]" id="712762">result</a>    = <a href="#712751" title="=&gt; Linearizers.this.NormalLinearizer">normalLinearizer</a>.<a href="#712053" title="(m: Linearizers.this.IMethod)List[Linearizers.this.BasicBlock]">linearize</a><span class="delimiter">(</span><a href="#712758" title="Linearizers.this.IMethod">m</a><span class="delimiter">)</span>
      <span class="keyword">val</span> <a title="scala.collection.mutable.HashSet[Linearizers.this.BasicBlock]" id="712763">frozen</a>    = mutable.<a href="../../../../collection/generic/GenericCompanion.scala.html#59933" title="[A](elems: A*)scala.collection.mutable.HashSet[A]">HashSet</a><span title="(elems: Linearizers.this.BasicBlock*)scala.collection.mutable.HashSet[Linearizers.this.BasicBlock]" class="delimiter">[</span><a href="BasicBlocks.scala.html#614938" title="Linearizers.this.BasicBlock">BasicBlock</a><span class="delimiter">]</span><span class="delimiter">(</span><a href="#712762" title="List[Linearizers.this.BasicBlock]">result</a>.<a href="../../../../collection/IterableLike.scala.html#58577" title="=&gt; Linearizers.this.BasicBlock">head</a><span class="delimiter">)</span>

      <span class="keyword">for</span> <span class="delimiter">(</span><a title="scala.collection.immutable.Set[Linearizers.this.BasicBlock]" id="712915">tryBlock</a> &lt;- <a href="../../../../collection/immutable/List.scala.html#62719" title="(f: scala.collection.immutable.Set[Linearizers.this.BasicBlock] =&gt; Unit)Unit">tryBlocks</a><span class="delimiter">)</span> <span class="delimiter">{</span>
        <a href="#712762" title="List[Linearizers.this.BasicBlock]">result</a> = <a href="#712754" title="(method: Linearizers.this.IMethod, blocks: List[Linearizers.this.BasicBlock], handlers: List[Linearizers.this.ExceptionHandler], frozen: scala.collection.mutable.HashSet[Linearizers.this.BasicBlock])List[Linearizers.this.BasicBlock]">groupBlocks</a><span class="delimiter">(</span><a href="#712758" title="Linearizers.this.IMethod">m</a>, <a href="#712762" title="List[Linearizers.this.BasicBlock]">result</a>, <a href="../../../../collection/MapLike.scala.html#87535" title="(key: scala.collection.immutable.Set[Linearizers.this.BasicBlock])List[Linearizers.this.ExceptionHandler]">handlersByCovered</a><span class="delimiter">(</span><a href="#712915" title="scala.collection.immutable.Set[Linearizers.this.BasicBlock]">tryBlock</a><span class="delimiter">)</span>, <a href="#712763" title="scala.collection.mutable.HashSet[Linearizers.this.BasicBlock]">frozen</a><span class="delimiter">)</span>
      <span class="delimiter">}</span>
      <a href="#712762" title="List[Linearizers.this.BasicBlock]">result</a>
    <span class="delimiter">}</span>

    /** @param handlers a list of handlers covering the same blocks (same try, multiple catches)
     *  @param frozen blocks can't be moved (fist block of a method, blocks directly following a try-catch)
     */
    <span class="keyword">def</span> <a title="(method: Linearizers.this.IMethod, blocks: List[Linearizers.this.BasicBlock], handlers: List[Linearizers.this.ExceptionHandler], frozen: scala.collection.mutable.HashSet[Linearizers.this.BasicBlock])List[Linearizers.this.BasicBlock]" id="712754">groupBlocks</a><span class="delimiter">(</span><a title="Linearizers.this.IMethod" id="712916">method</a>: <a href="Members.scala.html#614927" title="Linearizers.this.IMethod">IMethod</a>, <a title="List[Linearizers.this.BasicBlock]" id="712917">blocks</a>: <a href="../../../../collection/immutable/List.scala.html#11952" title="List[Linearizers.this.BasicBlock]">List</a><span class="delimiter">[</span>BasicBlock<span class="delimiter">]</span>, <a title="List[Linearizers.this.ExceptionHandler]" id="712918">handlers</a>: <a href="../../../../collection/immutable/List.scala.html#11952" title="List[Linearizers.this.ExceptionHandler]">List</a><span class="delimiter">[</span>ExceptionHandler<span class="delimiter">]</span>, <a title="scala.collection.mutable.HashSet[Linearizers.this.BasicBlock]" id="712919">frozen</a>: mutable.<a href="../../../../collection/mutable/HashSet.scala.html#13053" title="scala.collection.mutable.HashSet[Linearizers.this.BasicBlock]">HashSet</a><span class="delimiter">[</span>BasicBlock<span class="delimiter">]</span><span class="delimiter">)</span> = <span class="delimiter">{</span>
      <a href="../../../../Predef.scala.html#7485" title="(assertion: Boolean, message: =&gt; Any)Unit">assert</a><span class="delimiter">(</span><a href="#712917" title="List[Linearizers.this.BasicBlock]">blocks</a>.<a href="../../../../collection/IterableLike.scala.html#58577" title="=&gt; Linearizers.this.BasicBlock">head</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="#712916" title="Linearizers.this.IMethod">method</a>.<a href="Members.scala.html#695993" title="=&gt; Linearizers.this.BasicBlock">startBlock</a>, <a href="#712916" title="Linearizers.this.IMethod">method</a><span class="delimiter">)</span>

      // blocks before the try, and blocks for the try
      <span class="keyword">val</span> <a title="scala.collection.mutable.ListBuffer[Linearizers.this.BasicBlock]" id="712920">beforeAndTry</a> = <span title="scala.collection.mutable.ListBuffer[Linearizers.this.BasicBlock]" class="keyword">new</span> <a href="../../../../collection/mutable/ListBuffer.scala.html#13347" title="scala.collection.mutable.ListBuffer[Linearizers.this.BasicBlock]">ListBuffer</a><span class="delimiter">[</span>BasicBlock<span class="delimiter">]</span><span class="delimiter">(</span><span class="delimiter">)</span>
      // blocks for the handlers
      <span class="keyword">val</span> <a title="List[scala.collection.mutable.ListBuffer[Linearizers.this.BasicBlock]]" id="712921">catches</a> = <a href="#712918" title="List[Linearizers.this.ExceptionHandler]">handlers</a> <a href="../../../../collection/TraversableLike.scala.html#58063" title="(f: Linearizers.this.ExceptionHandler =&gt; scala.collection.mutable.ListBuffer[Linearizers.this.BasicBlock])(implicit bf: scala.collection.generic.CanBuildFrom[List[Linearizers.this.ExceptionHandler],scala.collection.mutable.ListBuffer[Linearizers.this.BasicBlock],List[scala.collection.mutable.ListBuffer[Linearizers.this.BasicBlock]]])List[scala.collection.mutable.ListBuffer[Linearizers.this.BasicBlock]]">map</a> <span class="delimiter">(</span><a title="Linearizers.this.ExceptionHandler" id="712951">_</a> =&gt; <span title="scala.collection.mutable.ListBuffer[Linearizers.this.BasicBlock]" class="keyword">new</span> <a href="../../../../collection/mutable/ListBuffer.scala.html#13347" title="scala.collection.mutable.ListBuffer[Linearizers.this.BasicBlock]">ListBuffer</a><span class="delimiter">[</span>BasicBlock<span class="delimiter">]</span><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span>
      // blocks to be put at the end
      <span class="keyword">val</span> <a title="scala.collection.mutable.ListBuffer[Linearizers.this.BasicBlock]" id="712922">after</a> = <span title="scala.collection.mutable.ListBuffer[Linearizers.this.BasicBlock]" class="keyword">new</span> <a href="../../../../collection/mutable/ListBuffer.scala.html#13347" title="scala.collection.mutable.ListBuffer[Linearizers.this.BasicBlock]">ListBuffer</a><span class="delimiter">[</span>BasicBlock<span class="delimiter">]</span><span class="delimiter">(</span><span class="delimiter">)</span>

      <span class="keyword">var</span> <a title="Boolean" id="712923">beforeTry</a> = <span title="Boolean(true)" class="keyword">true</span>
      <span class="keyword">val</span> <a title="Linearizers.this.ExceptionHandler" id="712924">head</a> = <a href="#712918" title="List[Linearizers.this.ExceptionHandler]">handlers</a>.<a href="../../../../collection/IterableLike.scala.html#58577" title="=&gt; Linearizers.this.ExceptionHandler">head</a>

      <span class="keyword">for</span> <span class="delimiter">(</span><a title="Linearizers.this.BasicBlock" id="713007">b</a> &lt;- <a href="../../../../collection/immutable/List.scala.html#62719" title="(f: Linearizers.this.BasicBlock =&gt; scala.collection.mutable.ListBuffer[Linearizers.this.BasicBlock])Unit">blocks</a><span class="delimiter">)</span> <span class="delimiter">{</span>
        <span title="scala.collection.mutable.ListBuffer[Linearizers.this.BasicBlock]" class="keyword">if</span> <span class="delimiter">(</span><a href="#712924" title="Linearizers.this.ExceptionHandler">head</a> <a href="ExceptionHandlers.scala.html#696230" title="(b: Linearizers.this.BasicBlock)Boolean">covers</a> <a href="#713007" title="Linearizers.this.BasicBlock">b</a><span class="delimiter">)</span> <span class="delimiter">{</span>
          <a href="#712923" title="Boolean">beforeTry</a> = <span title="Boolean(false)" class="keyword">false</span>
          <a href="#712920" title="scala.collection.mutable.ListBuffer[Linearizers.this.BasicBlock]">beforeAndTry</a> <a href="../../../../collection/mutable/ListBuffer.scala.html#79765" title="(x: Linearizers.this.BasicBlock)beforeAndTry.type">+=</a> <a href="#713007" title="Linearizers.this.BasicBlock">b</a>
        <span class="delimiter">}</span> <span class="keyword">else</span> <span class="delimiter">{</span>
          <span class="keyword">val</span> <a title="Int" id="713018">handlerIndex</a> = <a href="#712918" title="List[Linearizers.this.ExceptionHandler]">handlers</a>.<a href="../../../../collection/GenSeqLike.scala.html#58688" title="(p: Linearizers.this.ExceptionHandler =&gt; Boolean)Int">indexWhere</a><span class="delimiter">(</span><a href="#713029" title="Linearizers.this.ExceptionHandler">_</a>.<a href="ExceptionHandlers.scala.html#696231" title="=&gt; List[Linearizers.this.BasicBlock]">blocks</a>.<a href="../../../../collection/LinearSeqOptimized.scala.html#86380" title="(elem: Any)Boolean">contains</a><span class="delimiter">(</span><a href="#713007" title="Linearizers.this.BasicBlock">b</a><span class="delimiter">)</span><span class="delimiter">)</span>
          <span title="scala.collection.mutable.ListBuffer[Linearizers.this.BasicBlock]" class="keyword">if</span> <span class="delimiter">(</span><a href="#713018" title="Int">handlerIndex</a> <a href="../../../../Int.scala.html#57132" title="(x: Int)Boolean">&gt;=</a> <span title="Int(0)" class="int">0</span><span class="delimiter">)</span> <span class="delimiter">{</span>
            <a href="../../../../collection/LinearSeqOptimized.scala.html#86374" title="(n: Int)scala.collection.mutable.ListBuffer[Linearizers.this.BasicBlock]">catches</a><span class="delimiter">(</span><a href="#713018" title="Int">handlerIndex</a><span class="delimiter">)</span> <a href="../../../../collection/mutable/ListBuffer.scala.html#79765" title="(x: Linearizers.this.BasicBlock)scala.collection.mutable.ListBuffer[Linearizers.this.BasicBlock]">+=</a> <a href="#713007" title="Linearizers.this.BasicBlock">b</a>
          <span class="delimiter">}</span> <span class="keyword">else</span> <span title="scala.collection.mutable.ListBuffer[Linearizers.this.BasicBlock]" class="keyword">if</span> <span class="delimiter">(</span><a href="#712923" title="Boolean">beforeTry</a><span class="delimiter">)</span> <span class="delimiter">{</span>
            <a href="#712920" title="scala.collection.mutable.ListBuffer[Linearizers.this.BasicBlock]">beforeAndTry</a> <a href="../../../../collection/mutable/ListBuffer.scala.html#79765" title="(x: Linearizers.this.BasicBlock)beforeAndTry.type">+=</a> <a href="#713007" title="Linearizers.this.BasicBlock">b</a>
          <span class="delimiter">}</span> <span class="keyword">else</span> <span class="delimiter">{</span>
            <a href="#712922" title="scala.collection.mutable.ListBuffer[Linearizers.this.BasicBlock]">after</a> <a href="../../../../collection/mutable/ListBuffer.scala.html#79765" title="(x: Linearizers.this.BasicBlock)after.type">+=</a> <a href="#713007" title="Linearizers.this.BasicBlock">b</a>
          <span class="delimiter">}</span>
        <span class="delimiter">}</span>
      <span class="delimiter">}</span>

      // reorder the blocks in &quot;catches&quot; so that the &quot;firstBlock&quot; is actually first
      <a href="../../../../Predef.scala.html#7531" title="(x: (List[scala.collection.mutable.ListBuffer[Linearizers.this.BasicBlock]], List[Linearizers.this.ExceptionHandler]))runtime.Tuple2Zipped.Ops[List[scala.collection.mutable.ListBuffer[Linearizers.this.BasicBlock]],List[Linearizers.this.ExceptionHandler]]" class="delimiter">(</a><a href="#712921" title="List[scala.collection.mutable.ListBuffer[Linearizers.this.BasicBlock]]">catches</a>, <a href="#712918" title="List[Linearizers.this.ExceptionHandler]">handlers</a><span class="delimiter">)</span>.<a href="../../../../runtime/Tuple2Zipped.scala.html#60613" title="(implicit w1: List[scala.collection.mutable.ListBuffer[Linearizers.this.BasicBlock]] =&gt; scala.collection.TraversableLike[scala.collection.mutable.ListBuffer[Linearizers.this.BasicBlock],List[scala.collection.mutable.ListBuffer[Linearizers.this.BasicBlock]]], implicit w2: List[Linearizers.this.ExceptionHandler] =&gt; scala.collection.IterableLike[Linearizers.this.ExceptionHandler,List[Linearizers.this.ExceptionHandler]])scala.runtime.Tuple2Zipped[scala.collection.mutable.ListBuffer[Linearizers.this.BasicBlock],List[scala.collection.mutable.ListBuffer[Linearizers.this.BasicBlock]],Linearizers.this.ExceptionHandler,List[Linearizers.this.ExceptionHandler]]">zipped</a> <a href="../../../../runtime/Tuple2Zipped.scala.html#486057" title="(f: (scala.collection.mutable.ListBuffer[Linearizers.this.BasicBlock], Linearizers.this.ExceptionHandler) =&gt; scala.collection.mutable.ListBuffer[Linearizers.this.BasicBlock])Unit">foreach</a> <span class="delimiter">{</span> <span class="delimiter">(</span><a title="scala.collection.mutable.ListBuffer[Linearizers.this.BasicBlock]" id="713151">lb</a>, <a title="Linearizers.this.ExceptionHandler" id="713152">handler</a><span class="delimiter">)</span> =&gt;
        <a href="#713151" title="scala.collection.mutable.ListBuffer[Linearizers.this.BasicBlock]">lb</a> <a href="../../../../collection/mutable/ListBuffer.scala.html#79776" title="(elem: Linearizers.this.BasicBlock)lb.type">-=</a> <a href="#713152" title="Linearizers.this.ExceptionHandler">handler</a>.<a href="ExceptionHandlers.scala.html#696225" title="=&gt; Linearizers.this.BasicBlock">startBlock</a>
        <a href="#713152" title="Linearizers.this.ExceptionHandler">handler</a>.<a href="ExceptionHandlers.scala.html#696225" title="=&gt; Linearizers.this.BasicBlock">startBlock</a> <a href="../../../../collection/mutable/ListBuffer.scala.html#79769" title="(x: Linearizers.this.BasicBlock)lb.type">+=:</a> <a href="#713151" title="scala.collection.mutable.ListBuffer[Linearizers.this.BasicBlock]">lb</a>
      <span class="delimiter">}</span>

      // The first block emitted after a try-catch must be the one that the try / catch
      // blocks jump to (because in msil, these jumps cannot be emitted manually)
      <span class="keyword">var</span> <a title="Option[Linearizers.this.BasicBlock]" id="712925">firstAfter</a>: <a href="../../../../Option.scala.html#978" title="Option[Linearizers.this.BasicBlock]">Option</a><span class="delimiter">[</span>BasicBlock<span class="delimiter">]</span> = <a href="../../../../Option.scala.html#1585" title="None.type">None</a>

      // Find the (hopefully) unique successor, look at the try and all catch blocks
      <span class="keyword">var</span> <a title="List[List[Linearizers.this.BasicBlock]]" id="712926">blks</a> = <a href="#712924" title="Linearizers.this.ExceptionHandler">head</a>.<a href="ExceptionHandlers.scala.html#696226" title="=&gt; scala.collection.immutable.Set[Linearizers.this.BasicBlock]">covered</a>.<a href="../../../../collection/TraversableOnce.scala.html#58263" title="=&gt; List[Linearizers.this.BasicBlock]">toList</a> <a href="../../../../collection/immutable/List.scala.html#62685" title="(x: List[Linearizers.this.BasicBlock])List[List[Linearizers.this.BasicBlock]]">::</a> <a href="#712918" title="List[Linearizers.this.ExceptionHandler]">handlers</a>.<a href="../../../../collection/TraversableLike.scala.html#58063" title="(f: Linearizers.this.ExceptionHandler =&gt; List[Linearizers.this.BasicBlock])(implicit bf: scala.collection.generic.CanBuildFrom[List[Linearizers.this.ExceptionHandler],List[Linearizers.this.BasicBlock],List[List[Linearizers.this.BasicBlock]]])List[List[Linearizers.this.BasicBlock]]">map</a><a href="../../../../collection/immutable/List.scala.html#62442" title="scala.collection.generic.CanBuildFrom[scala.collection.immutable.List.Coll,List[Linearizers.this.BasicBlock],List[List[Linearizers.this.BasicBlock]]]" class="delimiter">(</a><a href="#713185" title="Linearizers.this.ExceptionHandler">_</a>.<a href="ExceptionHandlers.scala.html#696231" title="=&gt; List[Linearizers.this.BasicBlock]">blocks</a><span class="delimiter">)</span>
      <span title="Unit" class="keyword">while</span> <span class="delimiter">(</span><a href="#712925" title="Option[Linearizers.this.BasicBlock]">firstAfter</a>.<a href="../../../../Option.scala.html#62856" title="=&gt; Boolean">isEmpty</a> <a href="../../../../Boolean.scala.html#57826" title="(x: Boolean)Boolean">&amp;&amp;</a> <a href="../../../../Boolean.scala.html#57822" title="=&gt; Boolean">!</a><a href="#712926" title="List[List[Linearizers.this.BasicBlock]]">blks</a>.<a href="../../../../collection/SeqLike.scala.html#58787" title="=&gt; Boolean">isEmpty</a><span class="delimiter">)</span> <a href="#712927" title="()Unit" class="delimiter">{</a>
        <span class="keyword">val</span> <a title="List[Linearizers.this.BasicBlock]" id="713224">b</a> = <a href="#712926" title="List[List[Linearizers.this.BasicBlock]]">blks</a>.<a href="../../../../collection/IterableLike.scala.html#58577" title="=&gt; List[Linearizers.this.BasicBlock]">head</a>
        <a href="#712926" title="List[List[Linearizers.this.BasicBlock]]">blks</a> = <a href="#712926" title="List[List[Linearizers.this.BasicBlock]]">blks</a>.<a href="../../../../collection/TraversableLike.scala.html#58104" title="=&gt; List[List[Linearizers.this.BasicBlock]]">tail</a>

        <span class="keyword">val</span> <a title="scala.collection.mutable.HashSet[Linearizers.this.BasicBlock]" id="713225">leaving</a> = <a href="#712755" title="(blocks: List[Linearizers.this.BasicBlock])scala.collection.mutable.HashSet[Linearizers.this.BasicBlock]">leavingBlocks</a><span class="delimiter">(</span><a href="#713224" title="List[Linearizers.this.BasicBlock]">b</a><span class="delimiter">)</span>
        // no leaving blocks when the try or catch ends with THROW or RET
        <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="../../../../Boolean.scala.html#57822" title="=&gt; Boolean">!</a><a href="#713225" title="scala.collection.mutable.HashSet[Linearizers.this.BasicBlock]">leaving</a>.<a href="../../../../collection/SetLike.scala.html#66447" title="=&gt; Boolean">isEmpty</a><span class="delimiter">)</span> <span class="delimiter">{</span>
          <a href="../../../../Predef.scala.html#7485" title="(assertion: Boolean, message: =&gt; Any)Unit">assert</a><span class="delimiter">(</span><a href="#713225" title="scala.collection.mutable.HashSet[Linearizers.this.BasicBlock]">leaving</a>.<a href="../../../../collection/mutable/HashSet.scala.html#125961" title="=&gt; Int">size</a> <a href="../../../../Int.scala.html#57118" title="(x: Int)Boolean">&lt;=</a> <span title="Int(1)" class="int">1</span>, <a href="#713225" title="scala.collection.mutable.HashSet[Linearizers.this.BasicBlock]">leaving</a><span class="delimiter">)</span>
          <a href="#712925" title="Option[Linearizers.this.BasicBlock]">firstAfter</a> = <a href="../../../../Option.scala.html#63128" title="(x: Linearizers.this.BasicBlock)Some[Linearizers.this.BasicBlock]">Some</a><span class="delimiter">(</span><a href="#713225" title="scala.collection.mutable.HashSet[Linearizers.this.BasicBlock]">leaving</a>.<a href="../../../../collection/IterableLike.scala.html#58577" title="=&gt; Linearizers.this.BasicBlock">head</a><span class="delimiter">)</span>
        <span class="delimiter">}</span>
      <span class="delimiter">}</span>
      <span title="Any" class="keyword">if</span> <span class="delimiter">(</span><a href="#712925" title="Option[Linearizers.this.BasicBlock]">firstAfter</a>.<a href="../../../../Option.scala.html#62857" title="=&gt; Boolean">isDefined</a><span class="delimiter">)</span> <span class="delimiter">{</span>
        <span class="keyword">val</span> <a title="Linearizers.this.BasicBlock" id="713287">b</a> = <a href="#712925" title="Option[Linearizers.this.BasicBlock]">firstAfter</a>.<a href="../../../../Option.scala.html#62858" title="=&gt; Linearizers.this.BasicBlock">get</a>
        <span title="Any" class="keyword">if</span> <span class="delimiter">(</span><a href="../../../../collection/GenSetLike.scala.html#66403" title="(elem: Linearizers.this.BasicBlock)Boolean">frozen</a><span class="delimiter">(</span><a href="#713287" title="Linearizers.this.BasicBlock">b</a><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">{</span>
          <a href="../../../../Predef.scala.html#7485" title="(assertion: Boolean, message: =&gt; Any)Unit">assert</a><span class="delimiter">(</span><a href="#712922" title="scala.collection.mutable.ListBuffer[Linearizers.this.BasicBlock]">after</a> <a href="../../../../collection/generic/SeqForwarder.scala.html#79844" title="(elem: Any)Boolean">contains</a> <a href="#713287" title="Linearizers.this.BasicBlock">b</a>, <a href="../../../../Predef.scala.html#7605" title="implicit scala.Predef.any2stringadd : (x: Any)scala.runtime.StringAdd">b</a> <a href="../../../../runtime/StringAdd.scala.html#60046" title="(other: String)String">+</a><span title="String(&quot;, &quot;)" class="string">&quot;, &quot;</span><span title="(x$1: Any)String">+</span> <a href="#712916" title="Linearizers.this.IMethod">method</a><span class="delimiter">)</span>
        <span class="delimiter">}</span> <span class="keyword">else</span> <span class="delimiter">{</span>
          <a href="#712919" title="scala.collection.mutable.HashSet[Linearizers.this.BasicBlock]">frozen</a> <a href="../../../../collection/mutable/HashSet.scala.html#125963" title="(elem: Linearizers.this.BasicBlock)frozen.type">+=</a> <a href="#713287" title="Linearizers.this.BasicBlock">b</a>
          <span title="beforeAndTry.type" class="keyword">if</span> <span class="delimiter">(</span><a href="#712920" title="scala.collection.mutable.ListBuffer[Linearizers.this.BasicBlock]">beforeAndTry</a> <a href="../../../../collection/generic/SeqForwarder.scala.html#79844" title="(elem: Any)Boolean">contains</a> <a href="#713287" title="Linearizers.this.BasicBlock">b</a><span class="delimiter">)</span> <span class="delimiter">{</span>
            <a href="#712920" title="scala.collection.mutable.ListBuffer[Linearizers.this.BasicBlock]">beforeAndTry</a> <a href="../../../../collection/mutable/ListBuffer.scala.html#79776" title="(elem: Linearizers.this.BasicBlock)beforeAndTry.type">-=</a> <a href="#713287" title="Linearizers.this.BasicBlock">b</a>
          <span class="delimiter">}</span> <span class="keyword">else</span> <span class="delimiter">{</span>
            <a href="../../../../Predef.scala.html#7485" title="(assertion: Boolean, message: =&gt; Any)Unit">assert</a><span class="delimiter">(</span><a href="#712922" title="scala.collection.mutable.ListBuffer[Linearizers.this.BasicBlock]">after</a> <a href="../../../../collection/generic/SeqForwarder.scala.html#79844" title="(elem: Any)Boolean">contains</a> <a href="#713287" title="Linearizers.this.BasicBlock">b</a>, <a href="#712922" title="scala.collection.mutable.ListBuffer[Linearizers.this.BasicBlock]">after</a><span class="delimiter">)</span>
            <a href="#712922" title="scala.collection.mutable.ListBuffer[Linearizers.this.BasicBlock]">after</a> <a href="../../../../collection/mutable/ListBuffer.scala.html#79776" title="(elem: Linearizers.this.BasicBlock)after.type">-=</a> <a href="#713287" title="Linearizers.this.BasicBlock">b</a>
          <span class="delimiter">}</span>
          <a href="#713287" title="Linearizers.this.BasicBlock">b</a> <a href="../../../../collection/mutable/ListBuffer.scala.html#79769" title="(x: Linearizers.this.BasicBlock)after.type">+=:</a> <a href="#712922" title="scala.collection.mutable.ListBuffer[Linearizers.this.BasicBlock]">after</a>
        <span class="delimiter">}</span>
      <span class="delimiter">}</span>

      <span class="keyword">for</span> <span class="delimiter">(</span><a title="scala.collection.mutable.ListBuffer[Linearizers.this.BasicBlock]" id="713382">lb</a> &lt;- <a href="../../../../collection/immutable/List.scala.html#62719" title="(f: scala.collection.mutable.ListBuffer[Linearizers.this.BasicBlock] =&gt; scala.collection.mutable.ListBuffer[Linearizers.this.BasicBlock])Unit">catches</a><span class="delimiter">)</span> <span class="delimiter">{</span> <a href="#712920" title="scala.collection.mutable.ListBuffer[Linearizers.this.BasicBlock]">beforeAndTry</a> <a href="../../../../collection/mutable/ListBuffer.scala.html#79766" title="(xs: scala.collection.TraversableOnce[Linearizers.this.BasicBlock])beforeAndTry.type">++=</a> <a href="#713382" title="scala.collection.mutable.ListBuffer[Linearizers.this.BasicBlock]">lb</a> <span class="delimiter">}</span>
      <a href="#712920" title="scala.collection.mutable.ListBuffer[Linearizers.this.BasicBlock]">beforeAndTry</a> <a href="../../../../collection/mutable/ListBuffer.scala.html#79766" title="(xs: scala.collection.TraversableOnce[Linearizers.this.BasicBlock])beforeAndTry.type">++=</a> <a href="#712922" title="scala.collection.mutable.ListBuffer[Linearizers.this.BasicBlock]">after</a>
      <a href="#712920" title="scala.collection.mutable.ListBuffer[Linearizers.this.BasicBlock]">beforeAndTry</a>.<a href="../../../../collection/mutable/ListBuffer.scala.html#79773" title="=&gt; List[Linearizers.this.BasicBlock]">toList</a>
    <span class="delimiter">}</span>

    /** Returns all direct successors of `blocks` wich are not part
     *  that list, i.e. successors outside the `blocks` list.
     */
    <span class="keyword">private</span> <span class="keyword">def</span> <a title="(blocks: List[Linearizers.this.BasicBlock])scala.collection.mutable.HashSet[Linearizers.this.BasicBlock]" id="712755">leavingBlocks</a><span class="delimiter">(</span><a title="List[Linearizers.this.BasicBlock]" id="713232">blocks</a>: <a href="../../../../collection/immutable/List.scala.html#11952" title="List[Linearizers.this.BasicBlock]">List</a><span class="delimiter">[</span>BasicBlock<span class="delimiter">]</span><span class="delimiter">)</span> = <span class="delimiter">{</span>
      <span class="keyword">val</span> <a title="scala.collection.mutable.HashSet[Linearizers.this.BasicBlock]" id="713233">res</a> = <a href="../../../../collection/mutable/HashSet.scala.html#125959" title="()scala.collection.mutable.HashSet[Linearizers.this.BasicBlock]" class="keyword">new</a> mutable.<a href="../../../../collection/mutable/HashSet.scala.html#13053" title="scala.collection.mutable.HashSet[Linearizers.this.BasicBlock]">HashSet</a><span class="delimiter">[</span>BasicBlock<span class="delimiter">]</span><span class="delimiter">(</span><span class="delimiter">)</span>
      <span class="keyword">for</span> <span class="delimiter">(</span><a title="Linearizers.this.BasicBlock" id="713255">b</a> &lt;- <a href="../../../../collection/immutable/List.scala.html#62719" title="(f: Linearizers.this.BasicBlock =&gt; Unit)Unit">blocks</a>; <a title="Linearizers.this.BasicBlock" id="713266">s</a> &lt;- <a href="#713255" title="Linearizers.this.BasicBlock">b</a>.<a href="../../../../collection/generic/FilterMonadic.scala.html#58171" title="(f: Linearizers.this.BasicBlock =&gt; scala.collection.mutable.HashSet[Linearizers.this.BasicBlock])Unit">directSuccessors</a>; <span class="keyword">if</span> <span class="delimiter">(</span><a href="../../../../Boolean.scala.html#57822" title="=&gt; Boolean">!</a><a href="#713232" title="List[Linearizers.this.BasicBlock]">blocks</a>.<a href="../../../../collection/LinearSeqOptimized.scala.html#86380" title="(elem: Any)Boolean">contains</a><span class="delimiter">(</span><a href="#713266" title="Linearizers.this.BasicBlock">s</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
        <a href="#713233" title="scala.collection.mutable.HashSet[Linearizers.this.BasicBlock]">res</a> <a href="../../../../collection/mutable/HashSet.scala.html#125963" title="(elem: Linearizers.this.BasicBlock)res.type">+=</a> <a href="#713266" title="Linearizers.this.BasicBlock">s</a>
      <a href="#713233" title="scala.collection.mutable.HashSet[Linearizers.this.BasicBlock]">res</a>
    <span class="delimiter">}</span>

    <span class="keyword">def</span> <a title="(m: Linearizers.this.IMethod, start: Linearizers.this.BasicBlock)List[Linearizers.this.BasicBlock]" id="712756">linearizeAt</a><span class="delimiter">(</span><a title="Linearizers.this.IMethod" id="713402">m</a>: <a href="Members.scala.html#614927" title="Linearizers.this.IMethod">IMethod</a>, <a title="Linearizers.this.BasicBlock" id="713403">start</a>: <a href="BasicBlocks.scala.html#614938" title="Linearizers.this.BasicBlock">BasicBlock</a><span class="delimiter">)</span>: <a href="../../../../collection/immutable/List.scala.html#11952" title="List[Linearizers.this.BasicBlock]">List</a><span class="delimiter">[</span>BasicBlock<span class="delimiter">]</span> = <span class="delimiter">{</span>
      sys.<a href="../../../../sys/package.scala.html#55658" title="(message: String)Nothing">error</a><span class="delimiter">(</span><span title="String(&quot;not implemented&quot;)" class="string">&quot;not implemented&quot;</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>
<span class="delimiter">}</span>

        </pre>
    </body>
</html>