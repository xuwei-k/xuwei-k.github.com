<?xml version="1.0" encoding="utf-8"?>
      <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <meta http-equiv="Expires" content="0" />
        <title>scala/tools/nsc/backend/opt/Inliners.scala</title>
        <script type="text/javascript" src="../../../../../jquery-all.js"></script>
        <script type="text/javascript" src="../../../../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../../../../style.css" title="Style"></link>
    </head>
    <body>
        <pre>
/* NSC -- new Scala compiler
 * Copyright 2005-2013 LAMP/EPFL
 * @author  Iulian Dragos
 */


<span class="keyword">package</span> scala.tools.nsc
<span class="keyword">package</span> backend.opt

<span class="keyword">import</span> scala.collection.mutable
<span class="keyword">import</span> scala.tools.nsc.symtab._
<span class="keyword">import</span> scala.reflect.internal.util.NoSourceFile

/**
 * Inliner balances two competing goals:
 *   (a) aggressive inlining of:
 *       (a.1) the apply methods of anonymous closures, so that their anon-classes can be eliminated;
 *       (a.2) higher-order-methods defined in an external library, e.g. `Range.foreach()` among many others.
 *   (b) circumventing the barrier to inter-library inlining that private accesses in the callee impose.
 *
 * Summing up the discussion in SI-5442 and SI-5891,
 * the current implementation achieves to a large degree both goals above, and
 * overcomes a problem exhibited by previous versions:
 *
 *   (1) Problem: Attempting to access a private member `p` at runtime resulting in an `IllegalAccessError`,
 *                where `p` is defined in a library L, and is accessed from a library C (for Client),
 *                where C was compiled against L', an optimized version of L where the inliner made `p` public at the bytecode level.
 *                The only such members are fields, either synthetic or isParamAccessor, and thus having a dollar sign in their name
 *                (the accesibility of methods and constructors isn't touched by the inliner).
 *
 * Thus we add one more goal to our list:
 *   (c) Compile C (either optimized or not) against any of L or L',
 *       so that it runs with either L or L' (in particular, compile against L' and run with L).
 *
 * The chosen strategy is described in some detail in the comments for `accessRequirements()` and `potentiallyPublicized()`.
 * Documentation at http://lamp.epfl.ch/~magarcia/ScalaCompilerCornerReloaded/2011Q4/Inliner.pdf
 *
 *  @author Iulian Dragos
 */
<span class="keyword">abstract</span> <span class="keyword">class</span> <a title="class Inliners extends scala.tools.nsc.SubComponent" id="32934">Inliners</a> <a href="#32934" title="scala.tools.nsc.backend.opt.Inliners" class="keyword">extends</a> <a href="../../SubComponent.scala.html#27133" title="scala.tools.nsc.SubComponent">SubComponent</a> <span class="delimiter">{</span>
  <span class="keyword">import</span> <a href="../../SubComponent.scala.html#620039" title="=&gt; scala.tools.nsc.Global">global</a>._
  <span class="keyword">import</span> <a href="../../Global.scala.html#537466" title="Inliners.this.global.icodes.type">icodes</a>._
  <span class="keyword">import</span> <a href="../../Global.scala.html#537466" title="Inliners.this.global.icodes.type">icodes</a>.<a href="../icode/Opcodes.scala.html#614967" title="Inliners.this.global.icodes.opcodes.type">opcodes</a>._
  <span class="keyword">import</span> <a href="../../../../reflect/internal/Definitions.scala.html#407777" title="Inliners.this.global.definitions.type">definitions</a>.<span class="delimiter">{</span>
    NullClass, NothingClass, ObjectClass,
    PredefModule, RuntimePackage, ScalaInlineClass, ScalaNoInlineClass,
    isFunctionType, isByNameParamType
  <span class="delimiter">}</span>

  <span class="keyword">val</span> <a title="String" id="622810">phaseName</a> = <span title="String(&quot;inliner&quot;)" class="string">&quot;inliner&quot;</span>

  /** Debug - for timing the inliner. */
  <span class="keyword">private</span> <span class="keyword">def</span> <a title="[T](s: String, body: =&gt; T)T" id="622812">timed</a><span class="delimiter">[</span><a title="" id="622814">T</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="String" id="764110">s</a>: <span title="String">String</span>, <a title="=&gt; T" id="764111">body</a>: =&gt; T<span class="delimiter">)</span>: <a href="#622814" title="T">T</a> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="Long" id="764114">t1</a> = <span title="System.type">System</span>.<span title="()Long">currentTimeMillis</span><span class="delimiter">(</span><span class="delimiter">)</span>
    <span class="keyword">val</span> <a title="T" id="764115">res</a> = <a href="#764111" title="=&gt; T">body</a>
    <span class="keyword">val</span> <a title="Long" id="764116">t2</a> = <span title="System.type">System</span>.<span title="()Long">currentTimeMillis</span><span class="delimiter">(</span><span class="delimiter">)</span>
    <span class="keyword">val</span> <a title="Int" id="764117">ms</a> = <span class="delimiter">(</span><a href="#764116" title="Long">t2</a> <a href="../../../../Long.scala.html#57528" title="(x: Long)Long">-</a> <a href="#764114" title="Long">t1</a><span class="delimiter">)</span>.<a href="../../../../Long.scala.html#57446" title="=&gt; Int">toInt</a>
    <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#764117" title="Int">ms</a> <a href="../../../../Int.scala.html#57132" title="(x: Int)Boolean">&gt;=</a> <span title="Int(2000)">MAX_INLINE_MILLIS</span><span class="delimiter">)</span>
      <a href="../../../../Predef.scala.html#7514" title="(x: Any)Unit">println</a><span class="delimiter">(</span><a href="../../../../Predef.scala.html#7604" title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps" class="string">&quot;%s: %d milliseconds&quot;</a>.<a href="../../../../collection/immutable/StringLike.scala.html#59882" title="(args: Any*)String">format</a><span class="delimiter">(</span><a href="#764110" title="String">s</a>, <a href="#764117" title="Int">ms</a><span class="delimiter">)</span><span class="delimiter">)</span>

    <a href="#764115" title="T">res</a>
  <span class="delimiter">}</span>

  /** Look up implementation of method 'sym in 'clazz'.
   */
  <span class="keyword">def</span> <a title="(sym: Inliners.this.global.Symbol, clazz: Inliners.this.global.Symbol)Inliners.this.global.Symbol" id="622815">lookupImplFor</a><span class="delimiter">(</span><a title="Inliners.this.global.Symbol" id="726947">sym</a>: <a href="../../../../reflect/internal/Symbols.scala.html#407146" title="Inliners.this.global.Symbol">Symbol</a>, <a title="Inliners.this.global.Symbol" id="726948">clazz</a>: <a href="../../../../reflect/internal/Symbols.scala.html#407146" title="Inliners.this.global.Symbol">Symbol</a><span class="delimiter">)</span>: <a href="../../../../reflect/internal/Symbols.scala.html#407146" title="Inliners.this.global.Symbol">Symbol</a> = <span class="delimiter">{</span>
    // TODO: verify that clazz.superClass is equivalent here to clazz.tpe.parents(0).typeSymbol (.tpe vs .info)
    <span class="keyword">def</span> <a title="=&gt; Boolean" id="764138">needsLookup</a> = <span class="delimiter">(</span>
         <span class="delimiter">(</span><a href="#726948" title="Inliners.this.global.Symbol">clazz</a> <span title="(x$1: AnyRef)Boolean">!=</span> <a href="../../../../reflect/internal/Symbols.scala.html#407184" title="=&gt; Inliners.this.global.NoSymbol">NoSymbol</a><span class="delimiter">)</span>
      <a href="../../../../Boolean.scala.html#57826" title="(x: Boolean)Boolean">&amp;&amp;</a> <span class="delimiter">(</span><a href="#726948" title="Inliners.this.global.Symbol">clazz</a> <span title="(x$1: AnyRef)Boolean">!=</span> <a href="#726947" title="Inliners.this.global.Symbol">sym</a>.<a href="../../../../reflect/internal/Symbols.scala.html#411315" title="=&gt; Inliners.this.global.Symbol">owner</a><span class="delimiter">)</span>
      <a href="../../../../Boolean.scala.html#57826" title="(x: Boolean)Boolean">&amp;&amp;</a> <a href="../../../../Boolean.scala.html#57822" title="=&gt; Boolean">!</a><a href="#726947" title="Inliners.this.global.Symbol">sym</a>.<a href="../../../../reflect/internal/Symbols.scala.html#411298" title="=&gt; Boolean">isEffectivelyFinal</a>
      <a href="../../../../Boolean.scala.html#57826" title="(x: Boolean)Boolean">&amp;&amp;</a> <a href="#726948" title="Inliners.this.global.Symbol">clazz</a>.<a href="../../../../reflect/internal/Symbols.scala.html#411298" title="=&gt; Boolean">isEffectivelyFinal</a>
    <span class="delimiter">)</span>
    <span class="keyword">def</span> <a title="(clazz: Inliners.this.global.Symbol)Inliners.this.global.Symbol" id="764139">lookup</a><span class="delimiter">(</span><a title="Inliners.this.global.Symbol" id="764148">clazz</a>: <a href="../../../../reflect/internal/Symbols.scala.html#407146" title="Inliners.this.global.Symbol">Symbol</a><span class="delimiter">)</span>: <a href="../../../../reflect/internal/Symbols.scala.html#407146" title="Inliners.this.global.Symbol">Symbol</a> = <span class="delimiter">{</span>
      // println(&quot;\t\tlooking up &quot; + meth + &quot; in &quot; + clazz.fullName + &quot; meth.owner = &quot; + meth.owner)
      <a href="../../Global.scala.html#537497" title="(assertion: Boolean, message: =&gt; Any)Unit">assert</a><span class="delimiter">(</span><a href="#764148" title="Inliners.this.global.Symbol">clazz</a> <span title="(x$1: AnyRef)Boolean">!=</span> <a href="../../../../reflect/internal/Symbols.scala.html#407184" title="=&gt; Inliners.this.global.NoSymbol">NoSymbol</a>, <span title="String(&quot;Walked up past Object.superClass looking for &quot;)" class="string">&quot;Walked up past Object.superClass looking for &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#726947" title="Inliners.this.global.Symbol">sym</a> <span title="(x$1: Any)String">+</span>
                                <span title="String(&quot;, most likely this reveals the TFA at fault (receiver and callee don\'t match).&quot;)" class="string">&quot;, most likely this reveals the TFA at fault (receiver and callee don't match).&quot;</span><span class="delimiter">)</span>
      <span title="Inliners.this.global.Symbol" class="keyword">if</span> <span class="delimiter">(</span><a href="#726947" title="Inliners.this.global.Symbol">sym</a>.<a href="../../../../reflect/internal/Symbols.scala.html#411315" title="=&gt; Inliners.this.global.Symbol">owner</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="#764148" title="Inliners.this.global.Symbol">clazz</a> <a href="../../../../Boolean.scala.html#57825" title="(x: Boolean)Boolean">||</a> <a href="#622826" title="(sym: Inliners.this.global.Symbol)Boolean">isBottomType</a><span class="delimiter">(</span><a href="#764148" title="Inliners.this.global.Symbol">clazz</a><span class="delimiter">)</span><span class="delimiter">)</span> <a href="#726947" title="Inliners.this.global.Symbol">sym</a>
      <span class="keyword">else</span> <a href="#726947" title="Inliners.this.global.Symbol">sym</a>.<a href="../../../../reflect/internal/Symbols.scala.html#411463" title="(ofclazz: Inliners.this.global.Symbol)Inliners.this.global.Symbol">overridingSymbol</a><span title="Inliners.this.global.Symbol" class="delimiter">(</span><a href="#764148" title="Inliners.this.global.Symbol">clazz</a><span class="delimiter">)</span> <span class="keyword">match</span> <span class="delimiter">{</span>
        <span class="keyword">case</span> <a href="../../../../reflect/internal/Symbols.scala.html#407184" title="Inliners.this.global.Symbol" id="3320143">NoSymbol</a>  =&gt; <a href="#3320146" title="(x: Inliners.this.global.Symbol)Inliners.this.global.Symbol" class="keyword">if</a> <span class="delimiter">(</span><a href="#726947" title="Inliners.this.global.Symbol">sym</a>.<a href="../../../../reflect/internal/Symbols.scala.html#411315" title="=&gt; Inliners.this.global.Symbol">owner</a>.<a href="../../../../reflect/internal/Symbols.scala.html#411185" title="=&gt; Boolean">isTrait</a><span class="delimiter">)</span> <a href="#726947" title="Inliners.this.global.Symbol">sym</a> <span class="keyword">else</span> <a href="#764139" title="(clazz: Inliners.this.global.Symbol)Inliners.this.global.Symbol">lookup</a><span class="delimiter">(</span><a href="#764148" title="Inliners.this.global.Symbol">clazz</a>.<a href="../../../../reflect/internal/Symbols.scala.html#411440" title="=&gt; Inliners.this.global.Symbol">superClass</a><span class="delimiter">)</span>
        <span class="keyword">case</span> imp       =&gt; <a href="#3320146" title="(x: Inliners.this.global.Symbol)Inliners.this.global.Symbol">imp</a>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>
    <span title="Inliners.this.global.Symbol" class="keyword">if</span> <span class="delimiter">(</span><a href="#764138" title="=&gt; Boolean">needsLookup</a><span class="delimiter">)</span> <span class="delimiter">{</span>
      <span class="keyword">val</span> <a title="Inliners.this.global.Symbol" id="764173">concreteMethod</a> = <a href="#764139" title="(clazz: Inliners.this.global.Symbol)Inliners.this.global.Symbol">lookup</a><span class="delimiter">(</span><a href="#726948" title="Inliners.this.global.Symbol">clazz</a><span class="delimiter">)</span>
      <a href="../../Global.scala.html#537517" title="(msg: =&gt; String)Unit">debuglog</a><span class="delimiter">(</span><span title="String(&quot;\tlooked up method: &quot;)" class="string">&quot;\tlooked up method: &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#764173" title="Inliners.this.global.Symbol">concreteMethod</a>.<a href="../../../../reflect/internal/Symbols.scala.html#411334" title="=&gt; String">fullName</a><span class="delimiter">)</span>

      <a href="#764173" title="Inliners.this.global.Symbol">concreteMethod</a>
    <span class="delimiter">}</span>
    <span class="keyword">else</span> <a href="#726947" title="Inliners.this.global.Symbol">sym</a>
  <span class="delimiter">}</span>

  /* A warning threshold */
  <span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">val</span> <a title="Int(2000)" id="622816">MAX_INLINE_MILLIS</a> = <span title="Int(2000)" class="int">2000</span>

  /** The maximum size in basic blocks of methods considered for inlining. */
  <span class="keyword">final</span> <span class="keyword">val</span> <a title="Int(16)" id="622818">MAX_INLINE_SIZE</a> = <span title="Int(16)" class="int">16</span>

  /** Maximum loop iterations. */
  <span class="keyword">final</span> <span class="keyword">val</span> <a title="Int(15)" id="622820">MAX_INLINE_RETRY</a> = <span title="Int(15)" class="int">15</span>

  /** Small method size (in blocks) */
  <span class="keyword">val</span> <a title="Int" id="622822">SMALL_METHOD_SIZE</a> = <span title="Int(1)" class="int">1</span>

  /** Create a new phase */
  <span class="keyword">override</span> <span class="keyword">def</span> <a title="(p: scala.tools.nsc.Phase)Inliners.this.InliningPhase" id="622824">newPhase</a><span class="delimiter">(</span><a title="scala.tools.nsc.Phase" id="624450">p</a>: <a href="../../../../reflect/internal/Phase.scala.html#19756" title="scala.tools.nsc.Phase">Phase</a><span class="delimiter">)</span> = <span title="Inliners.this.InliningPhase" class="keyword">new</span> <a href="#622825" title="Inliners.this.InliningPhase">InliningPhase</a><span class="delimiter">(</span><a href="#624450" title="scala.tools.nsc.Phase">p</a><span class="delimiter">)</span>

  /** The Inlining phase.
   */
  <span class="keyword">class</span> <a title="class InliningPhase extends Inliners.this.global.icodes.ICodePhase" id="622825">InliningPhase</a><a href="#622825" title="Inliners.this.InliningPhase" class="delimiter">(</a><a title="scala.tools.nsc.Phase" id="624463">prev</a>: <a href="../../../../reflect/internal/Phase.scala.html#19756" title="scala.tools.nsc.Phase">Phase</a><span class="delimiter">)</span> <span class="keyword">extends</span> <a href="../icode/ICodes.scala.html#614910" title="Inliners.this.global.icodes.ICodePhase">ICodePhase</a><span class="delimiter">(</span><a href="#624463" title="scala.tools.nsc.Phase">prev</a><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span class="keyword">def</span> <a title="=&gt; String" id="624454">name</a> = <a href="#622810" title="=&gt; String">phaseName</a>
    <span class="keyword">val</span> <a title="Inliners.this.Inliner" id="624455">inliner</a> = <span title="Inliners.this.Inliner" class="keyword">new</span> <a href="#622835" title="Inliners.this.Inliner">Inliner</a>

    <span class="keyword">object</span> <a title="InliningPhase.this.iclassOrdering.type" id="764313">iclassOrdering</a> <a href="#624458" title="InliningPhase.this.iclassOrdering.type" class="keyword">extends</a> <a href="../../../../math/Ordering.scala.html#17425" title="Ordering[Inliners.this.global.icodes.IClass]">Ordering</a><span class="delimiter">[</span>IClass<span class="delimiter">]</span> <span class="delimiter">{</span>
      <span class="keyword">def</span> <a title="(a: Inliners.this.global.icodes.IClass, b: Inliners.this.global.icodes.IClass)Int" id="764226">compare</a><span class="delimiter">(</span><a title="Inliners.this.global.icodes.IClass" id="764228">a</a>: <a href="../icode/Members.scala.html#614923" title="Inliners.this.global.icodes.IClass">IClass</a>, <a title="Inliners.this.global.icodes.IClass" id="764229">b</a>: <a href="../icode/Members.scala.html#614923" title="Inliners.this.global.icodes.IClass">IClass</a><span class="delimiter">)</span> = <span class="delimiter">{</span>
        <span class="keyword">val</span> <a title="Int" id="764244">sourceNamesComparison</a> = <span class="delimiter">(</span><a href="#764228" title="Inliners.this.global.icodes.IClass">a</a>.<a href="../icode/Members.scala.html#615197" title="=&gt; Inliners.this.global.icodes.global.CompilationUnit">cunit</a>.<a href="../../CompilationUnits.scala.html#539307" title="()String">toString</a><a href="../../../../Predef.scala.html#7604" title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps" class="delimiter">(</a><span class="delimiter">)</span> <a href="../../../../collection/immutable/StringLike.scala.html#59853" title="(other: String)Int">compare</a> <a href="#764229" title="Inliners.this.global.icodes.IClass">b</a>.<a href="../icode/Members.scala.html#615197" title="=&gt; Inliners.this.global.icodes.global.CompilationUnit">cunit</a>.<a href="../../CompilationUnits.scala.html#539307" title="()String">toString</a><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span>
        <span title="Int" class="keyword">if</span><span class="delimiter">(</span><a href="#764244" title="Int">sourceNamesComparison</a> <a href="../../../../Int.scala.html#57104" title="(x: Int)Boolean">!=</a> <span title="Int(0)" class="int">0</span><span class="delimiter">)</span> <a href="#764244" title="Int">sourceNamesComparison</a>
        <span class="keyword">else</span> <span class="delimiter">{</span>
          <span class="keyword">val</span> <a title="Int" id="764267">namesComparison</a> = <span class="delimiter">(</span><a href="#764228" title="Inliners.this.global.icodes.IClass">a</a>.<a href="../icode/Members.scala.html#615203" title="()String">toString</a><a href="../../../../Predef.scala.html#7604" title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps" class="delimiter">(</a><span class="delimiter">)</span> <a href="../../../../collection/immutable/StringLike.scala.html#59853" title="(other: String)Int">compare</a> <a href="#764229" title="Inliners.this.global.icodes.IClass">b</a>.<a href="../icode/Members.scala.html#615203" title="()String">toString</a><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span>
          <span title="Int" class="keyword">if</span><span class="delimiter">(</span><a href="#764267" title="Int">namesComparison</a> <a href="../../../../Int.scala.html#57104" title="(x: Int)Boolean">!=</a> <span title="Int(0)" class="int">0</span><span class="delimiter">)</span> <a href="#764267" title="Int">namesComparison</a>
          <span class="keyword">else</span> <span class="delimiter">{</span>
            <a href="#764228" title="Inliners.this.global.icodes.IClass">a</a>.<a href="../icode/Members.scala.html#615188" title="=&gt; Inliners.this.global.icodes.global.Symbol">symbol</a>.<a href="../../../../LowPriorityImplicits.scala.html#7395" title="implicit scala.LowPriorityImplicits.intWrapper : (x: Int)scala.runtime.RichInt">id</a> <a href="../../../../runtime/ScalaNumberProxy.scala.html#56744" title="(y: Int)Int">compare</a> <a href="#764229" title="Inliners.this.global.icodes.IClass">b</a>.<a href="../icode/Members.scala.html#615188" title="=&gt; Inliners.this.global.icodes.global.Symbol">symbol</a>.<a href="../../../../reflect/internal/Symbols.scala.html#411094" title="=&gt; Int">id</a>
          <span class="delimiter">}</span>
        <span class="delimiter">}</span>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>
    <span class="keyword">val</span> <a title="scala.collection.mutable.PriorityQueue[Inliners.this.global.icodes.IClass]" id="624459">queue</a> = <span title="scala.collection.mutable.PriorityQueue[Inliners.this.global.icodes.IClass]" class="keyword">new</span> mutable.<a href="../../../../collection/mutable/PriorityQueue.scala.html#12456" title="scala.collection.mutable.PriorityQueue[Inliners.this.global.icodes.IClass]">PriorityQueue</a><span class="delimiter">[</span>IClass<span class="delimiter">]</span><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">(</span><a href="#764313" title="InliningPhase.this.iclassOrdering.type">iclassOrdering</a><span class="delimiter">)</span>

    <span class="keyword">override</span> <span class="keyword">def</span> <a title="(c: Inliners.this.global.icodes.IClass)Unit" id="624461">apply</a><span class="delimiter">(</span><a title="Inliners.this.global.icodes.IClass" id="764314">c</a>: <a href="../icode/Members.scala.html#614923" title="Inliners.this.global.icodes.IClass">IClass</a><span class="delimiter">)</span> <span class="delimiter">{</span> <a href="#624459" title="=&gt; scala.collection.mutable.PriorityQueue[Inliners.this.global.icodes.IClass]">queue</a> <a href="../../../../collection/mutable/PriorityQueue.scala.html#294133" title="(elem: Inliners.this.global.icodes.IClass)InliningPhase.this.queue.type">+=</a> <a href="#764314" title="Inliners.this.global.icodes.IClass">c</a> <span class="delimiter">}</span>

    <span class="keyword">override</span> <span class="keyword">def</span> <a title="()Unit" id="624462">run</a><span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span>
      <a href="#622829" title="=&gt; scala.collection.mutable.Set[Inliners.this.global.Symbol]">knownLacksInline</a>.<a href="../../../../collection/mutable/SetLike.scala.html#90900" title="()Unit">clear</a><span class="delimiter">(</span><span class="delimiter">)</span>
      <a href="#622831" title="=&gt; scala.collection.mutable.Set[Inliners.this.global.Symbol]">knownHasInline</a>.<a href="../../../../collection/mutable/SetLike.scala.html#90900" title="()Unit">clear</a><span class="delimiter">(</span><span class="delimiter">)</span>
      <span class="keyword">try</span> <span class="delimiter">{</span>
        <a href="#622825" title="Inliners.this.InliningPhase" class="keyword">super</a>.<a href="../../Global.scala.html#620890" title="()Unit">run</a><span class="delimiter">(</span><span class="delimiter">)</span>
        <span class="keyword">for</span><span class="delimiter">(</span><a title="Inliners.this.global.icodes.IClass" id="764346">c</a> &lt;- <a href="../../../../collection/IterableLike.scala.html#58562" title="(f: Inliners.this.global.icodes.IClass =&gt; Unit)Unit">queue</a><span class="delimiter">)</span> <span class="delimiter">{</span> <a href="#624455" title="=&gt; Inliners.this.Inliner">inliner</a> <a href="#764195" title="(cls: Inliners.this.global.icodes.IClass)Unit">analyzeClass</a> <a href="#764346" title="Inliners.this.global.icodes.IClass">c</a> <span class="delimiter">}</span>
      <span class="delimiter">}</span> <span class="keyword">finally</span> <span class="delimiter">{</span>
        <a href="#624455" title="=&gt; Inliners.this.Inliner">inliner</a>.<a href="#764192" title="()Unit">clearCaches</a><span class="delimiter">(</span><span class="delimiter">)</span>
        <a href="#622829" title="=&gt; scala.collection.mutable.Set[Inliners.this.global.Symbol]">knownLacksInline</a>.<a href="../../../../collection/mutable/SetLike.scala.html#90900" title="()Unit">clear</a><span class="delimiter">(</span><span class="delimiter">)</span>
        <a href="#622831" title="=&gt; scala.collection.mutable.Set[Inliners.this.global.Symbol]">knownHasInline</a>.<a href="../../../../collection/mutable/SetLike.scala.html#90900" title="()Unit">clear</a><span class="delimiter">(</span><span class="delimiter">)</span>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="(sym: Inliners.this.global.Symbol)Boolean" id="622826">isBottomType</a><span class="delimiter">(</span><a title="Inliners.this.global.Symbol" id="764161">sym</a>: <a href="../../../../reflect/internal/Symbols.scala.html#407146" title="Inliners.this.global.Symbol">Symbol</a><span class="delimiter">)</span> = <a href="#764161" title="Inliners.this.global.Symbol">sym</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="../../../../reflect/internal/Definitions.scala.html#408694" title="Inliners.this.global.definitions.NullClass.type">NullClass</a> <a href="../../../../Boolean.scala.html#57825" title="(x: Boolean)Boolean">||</a> <a href="#764161" title="Inliners.this.global.Symbol">sym</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="../../../../reflect/internal/Definitions.scala.html#408692" title="Inliners.this.global.definitions.NothingClass.type">NothingClass</a>

  /** Is the given class a closure? */
  <span class="keyword">def</span> <a title="(cls: Inliners.this.global.Symbol)Boolean" id="622827">isClosureClass</a><span class="delimiter">(</span><a title="Inliners.this.global.Symbol" id="726951">cls</a>: <a href="../../../../reflect/internal/Symbols.scala.html#407146" title="Inliners.this.global.Symbol">Symbol</a><span class="delimiter">)</span>: <a href="../../../../Boolean.scala.html#1425" title="Boolean">Boolean</a> =
    <a href="#726951" title="Inliners.this.global.Symbol">cls</a>.<a href="../../../../reflect/internal/HasFlags.scala.html#409851" title="=&gt; Boolean">isFinal</a> <a href="../../../../Boolean.scala.html#57826" title="(x: Boolean)Boolean">&amp;&amp;</a> <a href="#726951" title="Inliners.this.global.Symbol">cls</a>.<a href="../../../../reflect/internal/HasFlags.scala.html#409872" title="=&gt; Boolean">isSynthetic</a> <a href="../../../../Boolean.scala.html#57826" title="(x: Boolean)Boolean">&amp;&amp;</a> <a href="../../../../Boolean.scala.html#57822" title="=&gt; Boolean">!</a><a href="#726951" title="Inliners.this.global.Symbol">cls</a>.<a href="../../../../reflect/api/Symbols.scala.html#402404" title="=&gt; Boolean">isModuleClass</a> <a href="../../../../Boolean.scala.html#57826" title="(x: Boolean)Boolean">&amp;&amp;</a> <a href="#726951" title="Inliners.this.global.Symbol">cls</a>.<a href="../../../../reflect/internal/Symbols.scala.html#411254" title="=&gt; Boolean">isAnonymousFunction</a>

  /*
      TODO now that Inliner runs faster we could consider additional &quot;monadic methods&quot; (in the limit, all those taking a closure as last arg)
      Any &quot;monadic method&quot; occurring in a given caller C that is not `isMonadicMethod()` will prevent CloseElim from eliminating
      any anonymous-closure-class any whose instances are given as argument to C invocations.
   */
  <span class="keyword">def</span> <a title="(sym: Inliners.this.global.Symbol)Boolean" id="622828">isMonadicMethod</a><span class="delimiter">(</span><a title="Inliners.this.global.Symbol" id="727038">sym</a>: <a href="../../../../reflect/internal/Symbols.scala.html#407146" title="Inliners.this.global.Symbol">Symbol</a><span class="delimiter">)</span> = <span class="delimiter">{</span>
    <a href="../../../../reflect/internal/StdNames.scala.html#407871" title="Inliners.this.global.nme.type">nme</a>.<a href="../../../../reflect/internal/StdNames.scala.html#414063" title="(name: Inliners.this.global.Name)Inliners.this.global.Name">unspecializedName</a><span title="Boolean" class="delimiter">(</span><a href="#727038" title="Inliners.this.global.Symbol">sym</a>.<a href="../../../../reflect/internal/Symbols.scala.html#411087" title="=&gt; sym.NameType">name</a><span class="delimiter">)</span> <span class="keyword">match</span> <span class="delimiter">{</span>
      <span class="keyword">case</span> <a href="../../../../reflect/internal/StdNames.scala.html#407871" title="Inliners.this.global.nme.type">nme</a>.<a href="../../../../reflect/internal/StdNames.scala.html#414377" title="Boolean" id="3320165">foreach</a> | <a href="../../../../reflect/internal/StdNames.scala.html#407871" title="Inliners.this.global.nme.type">nme</a>.<a href="../../../../reflect/internal/StdNames.scala.html#414367" title="Boolean" id="3320166">filter</a> | <a href="../../../../reflect/internal/StdNames.scala.html#407871" title="Inliners.this.global.nme.type">nme</a>.<a href="../../../../reflect/internal/StdNames.scala.html#414597" title="Boolean" id="3320167">withFilter</a> | <a href="../../../../reflect/internal/StdNames.scala.html#407871" title="Inliners.this.global.nme.type">nme</a>.<a href="../../../../reflect/internal/StdNames.scala.html#414439" title="Boolean" id="3320168">map</a> | <a href="../../../../reflect/internal/StdNames.scala.html#407871" title="Inliners.this.global.nme.type">nme</a>.<a href="../../../../reflect/internal/StdNames.scala.html#414375" title="Boolean" id="3320169">flatMap</a> =&gt; <a href="#3320181" title="(x: Boolean)Boolean" class="keyword">true</a>
      <span class="keyword">case</span> _                                                                 =&gt; <a href="#3320181" title="(x: Boolean)Boolean" class="keyword">false</a>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="keyword">val</span> <a title="scala.collection.mutable.Set[Inliners.this.global.Symbol]" id="622829">knownLacksInline</a> = mutable.<a href="../../../../collection/mutable/Set.scala.html#13129" title="scala.collection.mutable.Set.type">Set</a>.<a href="../../../../collection/mutable/Set.scala.html#295731" title="[A]=&gt; scala.collection.mutable.Set[A]">empty</a><span title="scala.collection.mutable.Set[Inliners.this.global.Symbol]" class="delimiter">[</span><a href="../../../../reflect/internal/Symbols.scala.html#407146" title="Inliners.this.global.Symbol">Symbol</a><span class="delimiter">]</span> // cache to avoid multiple inliner.hasInline() calls.
  <span class="keyword">val</span> <a title="scala.collection.mutable.Set[Inliners.this.global.Symbol]" id="622831">knownHasInline</a>   = mutable.<a href="../../../../collection/mutable/Set.scala.html#13129" title="scala.collection.mutable.Set.type">Set</a>.<a href="../../../../collection/mutable/Set.scala.html#295731" title="[A]=&gt; scala.collection.mutable.Set[A]">empty</a><span title="scala.collection.mutable.Set[Inliners.this.global.Symbol]" class="delimiter">[</span><a href="../../../../reflect/internal/Symbols.scala.html#407146" title="Inliners.this.global.Symbol">Symbol</a><span class="delimiter">]</span> // as above. Motivated by the need to warn on &quot;inliner failures&quot;.

  <span class="keyword">def</span> <a title="(sym: Inliners.this.global.Symbol)Boolean" id="622833">hasInline</a><span class="delimiter">(</span><a title="Inliners.this.global.Symbol" id="727041">sym</a>: <a href="../../../../reflect/internal/Symbols.scala.html#407146" title="Inliners.this.global.Symbol">Symbol</a><span class="delimiter">)</span>    = <span class="delimiter">{</span>
    <span title="Boolean" class="keyword">if</span>     <span class="delimiter">(</span><a href="../../../../collection/GenSetLike.scala.html#66403" title="(elem: Inliners.this.global.Symbol)Boolean">knownLacksInline</a><span class="delimiter">(</span><a href="#727041" title="Inliners.this.global.Symbol">sym</a><span class="delimiter">)</span><span class="delimiter">)</span> <span title="Boolean(false)" class="keyword">false</span>
    <span class="keyword">else</span> <span title="Boolean" class="keyword">if</span><span class="delimiter">(</span><a href="../../../../collection/GenSetLike.scala.html#66403" title="(elem: Inliners.this.global.Symbol)Boolean">knownHasInline</a><span class="delimiter">(</span><a href="#727041" title="Inliners.this.global.Symbol">sym</a><span class="delimiter">)</span><span class="delimiter">)</span>   <span title="Boolean(true)" class="keyword">true</span>
    <span class="keyword">else</span> <span class="delimiter">{</span>
      <span class="keyword">val</span> <a title="Boolean" id="727064">b</a> = <span class="delimiter">(</span><a href="#727041" title="Inliners.this.global.Symbol">sym</a> <a href="../../../../reflect/internal/AnnotationInfos.scala.html#408615" title="(cls: Inliners.this.global.Symbol)Boolean">hasAnnotation</a> <a href="../../../../reflect/internal/Definitions.scala.html#409193" title="=&gt; Inliners.this.global.ClassSymbol">ScalaInlineClass</a><span class="delimiter">)</span>
      <span title="scala.collection.mutable.Set[Inliners.this.global.Symbol]" class="keyword">if</span><span class="delimiter">(</span><a href="#727064" title="Boolean">b</a><span class="delimiter">)</span> <span class="delimiter">{</span> <a href="#622831" title="=&gt; scala.collection.mutable.Set[Inliners.this.global.Symbol]">knownHasInline</a>   <a href="../../../../collection/mutable/SetLike.scala.html#90897" title="(elem: Inliners.this.global.Symbol)Inliners.this.knownHasInline.type">+=</a> <a href="#727041" title="Inliners.this.global.Symbol">sym</a> <span class="delimiter">}</span>
      <span class="keyword">else</span>  <span class="delimiter">{</span> <a href="#622829" title="=&gt; scala.collection.mutable.Set[Inliners.this.global.Symbol]">knownLacksInline</a> <a href="../../../../collection/mutable/SetLike.scala.html#90897" title="(elem: Inliners.this.global.Symbol)Inliners.this.knownLacksInline.type">+=</a> <a href="#727041" title="Inliners.this.global.Symbol">sym</a> <span class="delimiter">}</span>

      <a href="#727064" title="Boolean">b</a>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="(sym: Inliners.this.global.Symbol)Boolean" id="622834">hasNoInline</a><span class="delimiter">(</span><a title="Inliners.this.global.Symbol" id="764358">sym</a>: <a href="../../../../reflect/internal/Symbols.scala.html#407146" title="Inliners.this.global.Symbol">Symbol</a><span class="delimiter">)</span>  = <a href="#764358" title="Inliners.this.global.Symbol">sym</a> <a href="../../../../reflect/internal/AnnotationInfos.scala.html#408615" title="(cls: Inliners.this.global.Symbol)Boolean">hasAnnotation</a> <a href="../../../../reflect/internal/Definitions.scala.html#409195" title="=&gt; Inliners.this.global.ClassSymbol">ScalaNoInlineClass</a>

  /**
   * Simple inliner.
   */
  <span class="keyword">class</span> <a title="class Inliner extends Object" id="622835">Inliner</a> <a href="#622835" title="Inliners.this.Inliner" class="delimiter">{</a>
    <span class="keyword">object</span> <a title="Inliner.this.NonPublicRefs.type" id="764179">NonPublicRefs</a> <a href="#764180" title="Inliner.this.NonPublicRefs.type" class="keyword">extends</a> <a href="../../../../Enumeration.scala.html#66" title="Enumeration">Enumeration</a> <span class="delimiter">{</span>
      <span class="keyword">val</span> <a title="scala.tools.nsc.backend.opt.Inliners.Inliner.NonPublicRefs.Value" id="764349">Private</a>, <a title="scala.tools.nsc.backend.opt.Inliners.Inliner.NonPublicRefs.Value" id="764351">Protected</a>, <a title="scala.tools.nsc.backend.opt.Inliners.Inliner.NonPublicRefs.Value" id="764353">Public</a> = <a href="../../../../Enumeration.scala.html#87250" title="=&gt; scala.tools.nsc.backend.opt.Inliners.Inliner.NonPublicRefs.Value">Value</a>

      /** Cache whether a method calls private members. */
      <span class="keyword">val</span> <a title="scala.collection.mutable.Map[Inliners.this.global.icodes.IMethod,scala.tools.nsc.backend.opt.Inliners.Inliner.NonPublicRefs.Value]" id="764355">usesNonPublics</a> = mutable.<a href="../../../../collection/mutable/Map.scala.html#12499" title="scala.collection.mutable.Map.type">Map</a>.<a href="../../../../collection/mutable/Map.scala.html#174225" title="[A, B]=&gt; scala.collection.mutable.Map[A,B]">empty</a><span title="scala.collection.mutable.Map[Inliners.this.global.icodes.IMethod,scala.tools.nsc.backend.opt.Inliners.Inliner.NonPublicRefs.Value]" class="delimiter">[</span><a href="../icode/Members.scala.html#614927" title="Inliners.this.global.icodes.IMethod">IMethod</a>, <a href="../../../../Enumeration.scala.html#87256" title="scala.tools.nsc.backend.opt.Inliners.Inliner.NonPublicRefs.Value">Value</a><span class="delimiter">]</span>
    <span class="delimiter">}</span>
    <span class="keyword">import</span> <a href="#764179" title="Inliner.this.NonPublicRefs.type">NonPublicRefs</a>._

    /** The current iclass */
    <span class="keyword">private</span> <span class="keyword">var</span> <a title="Inliners.this.global.icodes.IClass" id="764183">currentIClazz</a>: <a href="../icode/Members.scala.html#614923" title="Inliners.this.global.icodes.IClass">IClass</a> = _
    <span class="keyword">private</span> <span class="keyword">def</span> <a title="(pos: Inliners.this.global.Position, msg: String)Any" id="764185">warn</a><span class="delimiter">(</span><a title="Inliners.this.global.Position" id="764380">pos</a>: <a href="../../../../reflect/internal/util/Position.scala.html#22953" title="Inliners.this.global.Position">Position</a>, <a title="String" id="764381">msg</a>: <span title="String">String</span><span class="delimiter">)</span> = <a href="#764183" title="=&gt; Inliners.this.global.icodes.IClass">currentIClazz</a>.<a href="../icode/Members.scala.html#615197" title="=&gt; Inliners.this.global.icodes.global.CompilationUnit">cunit</a>.<a href="../../CompilationUnits.scala.html#539302" title="(pos: Inliners.this.global.icodes.global.Position, msg: String)Any">inlinerWarning</a><span class="delimiter">(</span><a href="#764380" title="Inliners.this.global.Position">pos</a>, <a href="#764381" title="String">msg</a><span class="delimiter">)</span>

    <span class="keyword">private</span> <span class="keyword">def</span> <a title="(sym: Inliners.this.global.Symbol)String" id="764186">ownedName</a><span class="delimiter">(</span><a title="Inliners.this.global.Symbol" id="764384">sym</a>: <a href="../../../../reflect/internal/Symbols.scala.html#407146" title="Inliners.this.global.Symbol">Symbol</a><span class="delimiter">)</span>: <span title="String">String</span> = <a href="../../Global.scala.html#537705" title="(op: =&gt; String)String">afterUncurry</a> <span class="delimiter">{</span>
      <span class="keyword">val</span> <a title="Int" id="764387">count</a> = <span class="delimiter">(</span>
        <span title="Int" class="keyword">if</span> <span class="delimiter">(</span><a href="../../../../Boolean.scala.html#57822" title="=&gt; Boolean">!</a><a href="#764384" title="Inliners.this.global.Symbol">sym</a>.<a href="../../../../reflect/api/Symbols.scala.html#402398" title="=&gt; Boolean">isMethod</a><span class="delimiter">)</span> <span title="Int(1)" class="int">1</span>
        <span class="keyword">else</span> <span title="Int" class="keyword">if</span> <span class="delimiter">(</span><a href="#764384" title="Inliners.this.global.Symbol">sym</a>.<a href="../../../../reflect/internal/Symbols.scala.html#411315" title="=&gt; Inliners.this.global.Symbol">owner</a>.<a href="../../../../reflect/internal/Symbols.scala.html#411254" title="=&gt; Boolean">isAnonymousFunction</a><span class="delimiter">)</span> <span title="Int(3)" class="int">3</span>
        <span class="keyword">else</span> <span title="Int(2)" class="int">2</span>
      <span class="delimiter">)</span>
      <span class="delimiter">(</span><a href="#764384" title="Inliners.this.global.Symbol">sym</a>.<a href="../../../../reflect/internal/Symbols.scala.html#411317" title="=&gt; List[Inliners.this.global.Symbol]">ownerChain</a> <a href="../../../../collection/immutable/List.scala.html#62708" title="(n: Int)List[Inliners.this.global.Symbol]">take</a> <a href="#764387" title="Int">count</a> <a href="../../../../collection/TraversableLike.scala.html#58074" title="(p: Inliners.this.global.Symbol =&gt; Boolean)List[Inliners.this.global.Symbol]">filterNot</a> <span class="delimiter">(</span><a href="#764398" title="Inliners.this.global.Symbol">_</a>.<a href="../../../../reflect/internal/Symbols.scala.html#411219" title="=&gt; Boolean">isPackageClass</a><span class="delimiter">)</span><span class="delimiter">)</span>.<a href="../../../../collection/SeqLike.scala.html#58797" title="(f: Inliners.this.global.Symbol =&gt; String)(implicit bf: scala.collection.generic.CanBuildFrom[List[Inliners.this.global.Symbol],String,List[String]])List[String]">reverseMap</a><a href="../../../../collection/immutable/List.scala.html#62442" title="scala.collection.generic.CanBuildFrom[scala.collection.immutable.List.Coll,String,List[String]]" class="delimiter">(</a><a href="#764414" title="Inliners.this.global.Symbol">_</a>.<a href="../../../../reflect/internal/Symbols.scala.html#411504" title="=&gt; String">nameString</a><span class="delimiter">)</span>.<a href="../../../../collection/TraversableOnce.scala.html#58283" title="(sep: String)String">mkString</a><span class="delimiter">(</span><span title="String(&quot;.&quot;)" class="string">&quot;.&quot;</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>
    <span class="keyword">private</span> <span class="keyword">def</span> <a title="(what: String, main: =&gt; String, comment: =&gt; String)Unit" id="764187">inlineLog</a><span class="delimiter">(</span><a title="String" id="764447">what</a>: <span title="String">String</span>, <a title="=&gt; String" id="764448">main</a>: =&gt; String, <a title="=&gt; String" id="764449">comment</a>: =&gt; String<span class="delimiter">)</span> <span class="delimiter">{</span>
      <span class="keyword">def</span> <a title="=&gt; String" id="764450">cstr</a> = <a href="#764449" title="=&gt; String">comment</a> <span class="keyword">match</span> <span class="delimiter">{</span>
        <span class="keyword">case</span> <a href="#3320209" title="String" id="3320212" class="string">&quot;&quot;</a>   =&gt; <a href="#3320214" title="(x: String)String" class="string">&quot;&quot;</a>
        <span class="keyword">case</span> str  =&gt; <span title="String(&quot; // &quot;)" class="string">&quot; // &quot;</span> <a href="#3320214" title="(x: String)String">+</a> str
      <span class="delimiter">}</span>
      <span class="keyword">val</span> <a title="Int" id="764451">width</a> = <span title="Int" class="keyword">if</span> <span class="delimiter">(</span><a href="#764183" title="=&gt; Inliners.this.global.icodes.IClass">currentIClazz</a> <span title="(x$1: AnyRef)Boolean">eq</span> <span title="Null(null)" class="keyword">null</span><span class="delimiter">)</span> <span title="Int(40)" class="int">40</span> <span class="keyword">else</span> <a href="#764183" title="=&gt; Inliners.this.global.icodes.IClass">currentIClazz</a>.<a href="../icode/Members.scala.html#615188" title="=&gt; Inliners.this.global.icodes.global.Symbol">symbol</a>.<a href="../../../../reflect/internal/Symbols.scala.html#411447" title="=&gt; Inliners.this.global.icodes.global.Symbol">enclosingPackage</a>.<a href="../../../../reflect/internal/Symbols.scala.html#411334" title="=&gt; String">fullName</a>.<span title="()Int">length</span> <a href="../../../../Int.scala.html#57154" title="(x: Int)Int">+</a> <span title="Int(25)" class="int">25</span>
      <span class="keyword">val</span> <a title="String" id="764452">fmt</a> = <span title="String(&quot;%8s  %-&quot;)" class="string">&quot;%8s  %-&quot;</span> <span title="(x$1: Any)String">+</span> <a href="#764451" title="Int">width</a> <span title="(x$1: Any)String">+</span> <span title="String(&quot;s&quot;)" class="string">&quot;s&quot;</span> <span title="(x$1: Any)String">+</span> <a href="#764450" title="=&gt; String">cstr</a>
      <a href="../../Global.scala.html#537516" title="(msg: =&gt; AnyRef)Unit">log</a><span class="delimiter">(</span><a href="../../../../Predef.scala.html#7604" title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps">fmt</a>.<a href="../../../../collection/immutable/StringLike.scala.html#59882" title="(args: Any*)String">format</a><span class="delimiter">(</span><a href="#764447" title="String">what</a>, <a href="#764448" title="=&gt; String">main</a><span class="delimiter">)</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>
    <span class="keyword">private</span> <span class="keyword">def</span> <a title="(what: String, main: Inliners.this.global.Symbol, comment: =&gt; String)Unit" id="764188">inlineLog</a><span class="delimiter">(</span><a title="String" id="764466">what</a>: <span title="String">String</span>, <a title="Inliners.this.global.Symbol" id="764467">main</a>: <a href="../../../../reflect/internal/Symbols.scala.html#407146" title="Inliners.this.global.Symbol">Symbol</a>, <a title="=&gt; String" id="764468">comment</a>: =&gt; String<span class="delimiter">)</span> <span class="delimiter">{</span>
      <a href="#764187" title="(what: String, main: =&gt; String, comment: =&gt; String)Unit">inlineLog</a><span class="delimiter">(</span><a href="#764466" title="String">what</a>, <a href="#764186" title="(sym: Inliners.this.global.Symbol)String">ownedName</a><span class="delimiter">(</span><a href="#764467" title="Inliners.this.global.Symbol">main</a><span class="delimiter">)</span>, <a href="#764468" title="=&gt; String">comment</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>

    <span class="keyword">val</span> <a title="scala.collection.mutable.Map[Inliners.this.global.Symbol,(Boolean, Inliners.this.global.analysis.MethodTFA)]" id="764189">recentTFAs</a> = mutable.<a href="../../../../collection/mutable/Map.scala.html#12499" title="scala.collection.mutable.Map.type">Map</a>.<a href="../../../../collection/mutable/Map.scala.html#174225" title="[A, B]=&gt; scala.collection.mutable.Map[A,B]">empty</a><span title="scala.collection.mutable.Map[Inliners.this.global.Symbol,(Boolean, Inliners.this.global.analysis.MethodTFA)]" class="delimiter">[</span><a href="../../../../reflect/internal/Symbols.scala.html#407146" title="Inliners.this.global.Symbol">Symbol</a>, <a href="../../../../Tuple2.scala.html#783" title="(Boolean, Inliners.this.global.analysis.MethodTFA)">Tuple2</a><span class="delimiter">[</span>Boolean, analysis.MethodTFA<span class="delimiter">]</span><span class="delimiter">]</span>

    <span class="keyword">private</span> <span class="keyword">def</span> <a title="(incm: Inliners.this.global.icodes.IMethod, forceable: Boolean)(Boolean, Inliners.this.global.analysis.MethodTFA)" id="764191">getRecentTFA</a><span class="delimiter">(</span><a title="Inliners.this.global.icodes.IMethod" id="764475">incm</a>: <a href="../icode/Members.scala.html#614927" title="Inliners.this.global.icodes.IMethod">IMethod</a>, <a title="Boolean" id="764476">forceable</a>: <a href="../../../../Boolean.scala.html#1425" title="Boolean">Boolean</a><span class="delimiter">)</span>: <a href="../../../../Tuple2.scala.html#783" title="(Boolean, Inliners.this.global.analysis.MethodTFA)" class="delimiter">(</a>Boolean, analysis.MethodTFA<span class="delimiter">)</span> = <span class="delimiter">{</span>

        <span class="keyword">def</span> <a title="(blocks: List[Inliners.this.global.icodes.BasicBlock])Boolean" id="764477">containsRETURN</a><span class="delimiter">(</span><a title="List[Inliners.this.global.icodes.BasicBlock]" id="764481">blocks</a>: <a href="../../../../collection/immutable/List.scala.html#11952" title="List[Inliners.this.global.icodes.BasicBlock]">List</a><span class="delimiter">[</span>BasicBlock<span class="delimiter">]</span><span class="delimiter">)</span> = <a href="#764481" title="List[Inliners.this.global.icodes.BasicBlock]">blocks</a> <a href="../../../../collection/LinearSeqOptimized.scala.html#86379" title="(p: Inliners.this.global.icodes.BasicBlock =&gt; Boolean)Boolean">exists</a> <span class="delimiter">{</span> <a title="Inliners.this.global.icodes.BasicBlock" id="764488">bb</a> =&gt; <a href="#764488" title="Inliners.this.global.icodes.BasicBlock">bb</a>.<a href="../icode/BasicBlocks.scala.html#695960" title="=&gt; Inliners.this.global.icodes.Instruction">lastInstruction</a>.<span title="[T0]=&gt; Boolean">isInstanceOf</span><span title="Boolean" class="delimiter">[</span><a href="../icode/Opcodes.scala.html#624340" title="Inliners.this.global.icodes.opcodes.RETURN">RETURN</a><span class="delimiter">]</span> <span class="delimiter">}</span>

      <span class="keyword">val</span> <a title="Option[(Boolean, Inliners.this.global.analysis.MethodTFA)]" id="764478">opt</a> = <a href="#764189" title="=&gt; scala.collection.mutable.Map[Inliners.this.global.Symbol,(Boolean, Inliners.this.global.analysis.MethodTFA)]">recentTFAs</a>.<a href="../../../../collection/MapLike.scala.html#87525" title="(key: Inliners.this.global.Symbol)Option[(Boolean, Inliners.this.global.analysis.MethodTFA)]">get</a><span class="delimiter">(</span><a href="#764475" title="Inliners.this.global.icodes.IMethod">incm</a>.<a href="../icode/Members.scala.html#695986" title="=&gt; Inliners.this.global.icodes.global.Symbol">symbol</a><span class="delimiter">)</span>
      <span title="Unit" class="keyword">if</span><span class="delimiter">(</span><a href="#764478" title="Option[(Boolean, Inliners.this.global.analysis.MethodTFA)]">opt</a>.<a href="../../../../Option.scala.html#62857" title="=&gt; Boolean">isDefined</a><span class="delimiter">)</span> <span class="delimiter">{</span>
        // FYI val cachedBBs = opt.get._2.in.keySet
        // FYI assert(incm.blocks.toSet == cachedBBs)
        // incm.code.touched plays no role here
        <span title="Nothing" class="keyword">return</span> <a href="#764478" title="Option[(Boolean, Inliners.this.global.analysis.MethodTFA)]">opt</a>.<a href="../../../../Option.scala.html#62858" title="=&gt; (Boolean, Inliners.this.global.analysis.MethodTFA)">get</a>
      <span class="delimiter">}</span>

      <span class="keyword">val</span> <a title="Boolean" id="764479">hasRETURN</a> = <a href="#764477" title="(blocks: List[Inliners.this.global.icodes.BasicBlock])Boolean">containsRETURN</a><span class="delimiter">(</span><a href="#764475" title="Inliners.this.global.icodes.IMethod">incm</a>.<a href="../icode/Members.scala.html#695989" title="=&gt; Inliners.this.global.icodes.Code">code</a>.<a href="../icode/Members.scala.html#696093" title="=&gt; List[Inliners.this.global.icodes.BasicBlock]">blocksList</a><span class="delimiter">)</span> <a href="../../../../Boolean.scala.html#57825" title="(x: Boolean)Boolean">||</a> <span class="delimiter">(</span><a href="#764475" title="Inliners.this.global.icodes.IMethod">incm</a>.<a href="../icode/Members.scala.html#696006" title="=&gt; List[Inliners.this.global.icodes.ExceptionHandler]">exh</a> <a href="../../../../collection/LinearSeqOptimized.scala.html#86379" title="(p: Inliners.this.global.icodes.ExceptionHandler =&gt; Boolean)Boolean">exists</a> <span class="delimiter">{</span> <a title="Inliners.this.global.icodes.ExceptionHandler" id="764503">eh</a> =&gt; <a href="#764477" title="(blocks: List[Inliners.this.global.icodes.BasicBlock])Boolean">containsRETURN</a><span class="delimiter">(</span><a href="#764503" title="Inliners.this.global.icodes.ExceptionHandler">eh</a>.<a href="../icode/ExceptionHandlers.scala.html#696231" title="=&gt; List[Inliners.this.global.icodes.BasicBlock]">blocks</a><span class="delimiter">)</span> <span class="delimiter">}</span><span class="delimiter">)</span>
      <span class="keyword">var</span> <a title="Inliners.this.global.analysis.MethodTFA" id="764480">a</a>: analysis.<a href="../icode/analysis/TypeFlowAnalysis.scala.html#619513" title="Inliners.this.global.analysis.MethodTFA">MethodTFA</a> = <span title="Null(null)" class="keyword">null</span>
      <span title="Unit" class="keyword">if</span><span class="delimiter">(</span><a href="#764479" title="Boolean">hasRETURN</a><span class="delimiter">)</span> <span class="delimiter">{</span> <a href="#764480" title="Inliners.this.global.analysis.MethodTFA">a</a> = <a href="../icode/analysis/TypeFlowAnalysis.scala.html#725525" title="(m: Inliners.this.global.analysis.global.icodes.IMethod)Inliners.this.global.analysis.MethodTFA" class="keyword">new</a> <a href="../../Global.scala.html#537472" title="Inliners.this.global.analysis.type">analysis</a>.<a href="../icode/analysis/TypeFlowAnalysis.scala.html#619513" title="Inliners.this.global.analysis.MethodTFA">MethodTFA</a><span class="delimiter">(</span><a href="#764475" title="Inliners.this.global.icodes.IMethod">incm</a><span class="delimiter">)</span>; <a href="#764480" title="Inliners.this.global.analysis.MethodTFA">a</a>.<a href="../icode/analysis/TypeFlowAnalysis.scala.html#725526" title="()Unit">run</a> <span class="delimiter">}</span>

      <span title="Any" class="keyword">if</span><span class="delimiter">(</span><a href="#764476" title="Boolean">forceable</a><span class="delimiter">)</span> <span class="delimiter">{</span> <a href="#764189" title="=&gt; scala.collection.mutable.Map[Inliners.this.global.Symbol,(Boolean, Inliners.this.global.analysis.MethodTFA)]">recentTFAs</a>.<a href="../../../../collection/mutable/MapLike.scala.html#87610" title="(key: Inliners.this.global.Symbol, value: (Boolean, Inliners.this.global.analysis.MethodTFA))Option[(Boolean, Inliners.this.global.analysis.MethodTFA)]">put</a><span class="delimiter">(</span><a href="#764475" title="Inliners.this.global.icodes.IMethod">incm</a>.<a href="../icode/Members.scala.html#695986" title="=&gt; Inliners.this.global.icodes.global.Symbol">symbol</a>, <a href="../../../../Tuple2.scala.html#62849" title="(_1: Boolean, _2: Inliners.this.global.analysis.MethodTFA)(Boolean, Inliners.this.global.analysis.MethodTFA)" class="delimiter">(</a><a href="#764479" title="Boolean">hasRETURN</a>, <a href="#764480" title="Inliners.this.global.analysis.MethodTFA">a</a><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">}</span>

      <a href="../../../../Tuple2.scala.html#62849" title="(_1: Boolean, _2: Inliners.this.global.analysis.MethodTFA)(Boolean, Inliners.this.global.analysis.MethodTFA)" class="delimiter">(</a><a href="#764479" title="Boolean">hasRETURN</a>, <a href="#764480" title="Inliners.this.global.analysis.MethodTFA">a</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>

    <span class="keyword">def</span> <a title="()Unit" id="764192">clearCaches</a><span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span>
      // methods
      <a href="#764179" title="Inliner.this.NonPublicRefs.type">NonPublicRefs</a>.<a href="#764355" title="=&gt; scala.collection.mutable.Map[Inliners.this.global.icodes.IMethod,Inliner.this.NonPublicRefs.Value]">usesNonPublics</a>.<a href="../../../../collection/mutable/MapLike.scala.html#87628" title="()Unit">clear</a><span class="delimiter">(</span><span class="delimiter">)</span>
      <a href="#764189" title="=&gt; scala.collection.mutable.Map[Inliners.this.global.Symbol,(Boolean, Inliners.this.global.analysis.MethodTFA)]">recentTFAs</a>.<a href="../../../../collection/mutable/MapLike.scala.html#87628" title="()Unit">clear</a>
      <a href="#764196" title="=&gt; Inliners.this.global.analysis.MTFAGrowable">tfa</a>.<a href="../icode/analysis/TypeFlowAnalysis.scala.html#726766" title="=&gt; scala.collection.mutable.Set[Inliners.this.global.analysis.global.Symbol]">knownUnsafe</a>.<a href="../../../../collection/mutable/SetLike.scala.html#90900" title="()Unit">clear</a><span class="delimiter">(</span><span class="delimiter">)</span>
      <a href="#764196" title="=&gt; Inliners.this.global.analysis.MTFAGrowable">tfa</a>.<a href="../icode/analysis/TypeFlowAnalysis.scala.html#726768" title="=&gt; scala.collection.mutable.Set[Inliners.this.global.analysis.global.Symbol]">knownSafe</a>.<a href="../../../../collection/mutable/SetLike.scala.html#90900" title="()Unit">clear</a><span class="delimiter">(</span><span class="delimiter">)</span>
      <a href="#764196" title="=&gt; Inliners.this.global.analysis.MTFAGrowable">tfa</a>.<a href="../icode/analysis/TypeFlowAnalysis.scala.html#726770" title="=&gt; scala.collection.mutable.Set[Inliners.this.global.analysis.global.Symbol]">knownNever</a>.<a href="../../../../collection/mutable/SetLike.scala.html#90900" title="()Unit">clear</a><span class="delimiter">(</span><span class="delimiter">)</span>
      // basic blocks
      <a href="#764196" title="=&gt; Inliners.this.global.analysis.MTFAGrowable">tfa</a>.<a href="../icode/analysis/TypeFlowAnalysis.scala.html#726752" title="=&gt; scala.collection.mutable.Set[Inliners.this.global.analysis.global.icodes.BasicBlock]">preCandidates</a>.<a href="../../../../collection/mutable/SetLike.scala.html#90900" title="()Unit">clear</a><span class="delimiter">(</span><span class="delimiter">)</span>
      <a href="#764196" title="=&gt; Inliners.this.global.analysis.MTFAGrowable">tfa</a>.<a href="../icode/analysis/TypeFlowAnalysis.scala.html#726773" title="=&gt; scala.collection.mutable.Set[Inliners.this.global.analysis.global.icodes.BasicBlock]">relevantBBs</a>.<a href="../../../../collection/mutable/SetLike.scala.html#90900" title="()Unit">clear</a><span class="delimiter">(</span><span class="delimiter">)</span>
      // callsites
      <a href="#764196" title="=&gt; Inliners.this.global.analysis.MTFAGrowable">tfa</a>.<a href="../icode/analysis/TypeFlowAnalysis.scala.html#726750" title="=&gt; scala.collection.mutable.Map[Inliners.this.global.analysis.global.icodes.opcodes.CALL_METHOD,Inliners.this.global.analysis.CallsiteInfo]">remainingCALLs</a>.<a href="../../../../collection/mutable/MapLike.scala.html#87628" title="()Unit">clear</a><span class="delimiter">(</span><span class="delimiter">)</span>
      <a href="#764196" title="=&gt; Inliners.this.global.analysis.MTFAGrowable">tfa</a>.<a href="../icode/analysis/TypeFlowAnalysis.scala.html#726762" title="=&gt; scala.collection.mutable.Set[Inliners.this.global.analysis.global.icodes.Instruction]">isOnWatchlist</a>.<a href="../../../../collection/mutable/SetLike.scala.html#90900" title="()Unit">clear</a><span class="delimiter">(</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>

    <span class="keyword">object</span> <a title="Inliner.this.imethodOrdering.type" id="764593">imethodOrdering</a> <a href="#764194" title="Inliner.this.imethodOrdering.type" class="keyword">extends</a> <a href="../../../../math/Ordering.scala.html#17425" title="Ordering[Inliners.this.global.icodes.IMethod]">Ordering</a><span class="delimiter">[</span>IMethod<span class="delimiter">]</span> <span class="delimiter">{</span>
      <span class="keyword">def</span> <a title="(a: Inliners.this.global.icodes.IMethod, b: Inliners.this.global.icodes.IMethod)Int" id="764528">compare</a><span class="delimiter">(</span><a title="Inliners.this.global.icodes.IMethod" id="764530">a</a>: <a href="../icode/Members.scala.html#614927" title="Inliners.this.global.icodes.IMethod">IMethod</a>, <a title="Inliners.this.global.icodes.IMethod" id="764531">b</a>: <a href="../icode/Members.scala.html#614927" title="Inliners.this.global.icodes.IMethod">IMethod</a><span class="delimiter">)</span> = <span class="delimiter">{</span>
        <span class="keyword">val</span> <a title="Int" id="764546">namesComparison</a> = <span class="delimiter">(</span><a href="#764530" title="Inliners.this.global.icodes.IMethod">a</a>.<a href="../icode/Members.scala.html#696038" title="()String">toString</a><a href="../../../../Predef.scala.html#7604" title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps" class="delimiter">(</a><span class="delimiter">)</span> <a href="../../../../collection/immutable/StringLike.scala.html#59853" title="(other: String)Int">compare</a> <a href="#764531" title="Inliners.this.global.icodes.IMethod">b</a>.<a href="../icode/Members.scala.html#696038" title="()String">toString</a><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span>
        <span title="Int" class="keyword">if</span><span class="delimiter">(</span><a href="#764546" title="Int">namesComparison</a> <a href="../../../../Int.scala.html#57104" title="(x: Int)Boolean">!=</a> <span title="Int(0)" class="int">0</span><span class="delimiter">)</span> <a href="#764546" title="Int">namesComparison</a>
        <span class="keyword">else</span> <span class="delimiter">{</span>
          <a href="#764530" title="Inliners.this.global.icodes.IMethod">a</a>.<a href="../icode/Members.scala.html#695986" title="=&gt; Inliners.this.global.icodes.global.Symbol">symbol</a>.<a href="../../../../LowPriorityImplicits.scala.html#7395" title="implicit scala.LowPriorityImplicits.intWrapper : (x: Int)scala.runtime.RichInt">id</a> <a href="../../../../runtime/ScalaNumberProxy.scala.html#56744" title="(y: Int)Int">compare</a> <a href="#764531" title="Inliners.this.global.icodes.IMethod">b</a>.<a href="../icode/Members.scala.html#695986" title="=&gt; Inliners.this.global.icodes.global.Symbol">symbol</a>.<a href="../../../../reflect/internal/Symbols.scala.html#411094" title="=&gt; Int">id</a>
        <span class="delimiter">}</span>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>

    <span class="keyword">def</span> <a title="(cls: Inliners.this.global.icodes.IClass)Unit" id="764195">analyzeClass</a><span class="delimiter">(</span><a title="Inliners.this.global.icodes.IClass" id="764347">cls</a>: <a href="../icode/Members.scala.html#614923" title="Inliners.this.global.icodes.IClass">IClass</a><span class="delimiter">)</span>: <a href="../../../../Unit.scala.html#1515" title="Unit">Unit</a> =
      <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="../../Global.scala.html#537448" title="=&gt; scala.tools.nsc.Settings">settings</a>.<a href="../../settings/ScalaSettings.scala.html#540061" title="=&gt; scala.tools.nsc.Settings#BooleanSetting">inline</a>.<a href="../../settings/MutableSettings.scala.html#541066" title="=&gt; Boolean">value</a><span class="delimiter">)</span> <span class="delimiter">{</span>
        <a href="#764187" title="(what: String, main: =&gt; String, comment: =&gt; String)Unit">inlineLog</a><span class="delimiter">(</span><span title="String(&quot;class&quot;)" class="string">&quot;class&quot;</span>, <a href="../../../../StringContext.scala.html#56629" title="(args: Any*)String">s</a>&quot;$<span class="delimiter">{</span><a href="#764347" title="Inliners.this.global.icodes.IClass">cls</a>.<a href="../icode/Members.scala.html#615188" title="=&gt; Inliners.this.global.icodes.global.Symbol">symbol</a>.<a href="../../../../reflect/internal/Symbols.scala.html#411324" title="=&gt; String">decodedName</a><span class="delimiter">}</span><span class="string">&quot;</span>, <a href="../../../../StringContext.scala.html#56629" title="(args: Any*)String">s</a>&quot;analyzing $<span class="delimiter">{</span><a href="#764347" title="Inliners.this.global.icodes.IClass">cls</a>.<a href="../icode/Members.scala.html#615194" title="=&gt; List[Inliners.this.global.icodes.IMethod]">methods</a>.<a href="../../../../collection/SeqLike.scala.html#58788" title="=&gt; Int">size</a><span class="delimiter">}</span> methods in $<a href="#764347" title="Inliners.this.global.icodes.IClass">cls</a><span class="string">&quot;</span><span class="delimiter">)</span>

        <a href="#622835" title="Inliner.this.type" class="keyword">this</a>.<a href="#764183" title="(x$1: Inliners.this.global.icodes.IClass)Unit">currentIClazz</a> = <a href="#764347" title="Inliners.this.global.icodes.IClass">cls</a>
        <span class="keyword">val</span> <a title="List[Inliners.this.global.icodes.IMethod]" id="764597">ms</a> = <a href="#764347" title="Inliners.this.global.icodes.IClass">cls</a>.<a href="../icode/Members.scala.html#615194" title="=&gt; List[Inliners.this.global.icodes.IMethod]">methods</a> <a href="../../../../collection/SeqLike.scala.html#58872" title="(implicit ord: scala.math.Ordering[Inliners.this.global.icodes.IMethod])List[Inliners.this.global.icodes.IMethod]">sorted</a> <a href="#764593" title="Inliner.this.imethodOrdering.type">imethodOrdering</a>
        <a href="#764597" title="List[Inliners.this.global.icodes.IMethod]">ms</a> <a href="../../../../collection/immutable/List.scala.html#62719" title="(f: Inliners.this.global.icodes.IMethod =&gt; Unit)Unit">foreach</a> <span class="delimiter">{</span> <a title="Inliners.this.global.icodes.IMethod" id="764630">im</a> =&gt;
          <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#622833" title="(sym: Inliners.this.global.Symbol)Boolean">hasInline</a><span class="delimiter">(</span><a href="#764630" title="Inliners.this.global.icodes.IMethod">im</a>.<a href="../icode/Members.scala.html#695986" title="=&gt; Inliners.this.global.icodes.global.Symbol">symbol</a><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">{</span>
            <a href="#764188" title="(what: String, main: Inliners.this.global.Symbol, comment: =&gt; String)Unit">inlineLog</a><span class="delimiter">(</span><span title="String(&quot;skip&quot;)" class="string">&quot;skip&quot;</span>, <a href="#764630" title="Inliners.this.global.icodes.IMethod">im</a>.<a href="../icode/Members.scala.html#695986" title="=&gt; Inliners.this.global.icodes.global.Symbol">symbol</a>, <span title="String(&quot;no inlining into @inline methods&quot;)" class="string">&quot;no inlining into @inline methods&quot;</span><span class="delimiter">)</span>
          <span class="delimiter">}</span>
          <span class="keyword">else</span> <span title="Unit" class="keyword">if</span><span class="delimiter">(</span><a href="#764630" title="Inliners.this.global.icodes.IMethod">im</a>.<a href="../icode/Members.scala.html#696027" title="=&gt; Boolean">hasCode</a> <a href="../../../../Boolean.scala.html#57826" title="(x: Boolean)Boolean">&amp;&amp;</a> <a href="../../../../Boolean.scala.html#57822" title="=&gt; Boolean">!</a><a href="#764630" title="Inliners.this.global.icodes.IMethod">im</a>.<a href="../icode/Members.scala.html#695986" title="=&gt; Inliners.this.global.icodes.global.Symbol">symbol</a>.<a href="../../../../reflect/internal/Symbols.scala.html#411198" title="=&gt; Boolean">isBridge</a><span class="delimiter">)</span> <span class="delimiter">{</span>
            <a href="#764204" title="(m: Inliners.this.global.icodes.IMethod)Unit">analyzeMethod</a><span class="delimiter">(</span><a href="#764630" title="Inliners.this.global.icodes.IMethod">im</a><span class="delimiter">)</span>
          <span class="delimiter">}</span>
        <span class="delimiter">}</span>
      <span class="delimiter">}</span>

    <span class="keyword">val</span> <a title="Inliners.this.global.analysis.MTFAGrowable" id="764196">tfa</a>   = <span title="Inliners.this.global.analysis.MTFAGrowable" class="keyword">new</span> <a href="../../Global.scala.html#537472" title="Inliners.this.global.analysis.type">analysis</a>.<a href="../icode/analysis/TypeFlowAnalysis.scala.html#619517" title="Inliners.this.global.analysis.MTFAGrowable">MTFAGrowable</a><span class="delimiter">(</span><span class="delimiter">)</span>
    <a href="#764196" title="=&gt; Inliners.this.global.analysis.MTFAGrowable">tfa</a>.<a href="../icode/analysis/DataFlowAnalysis.scala.html#720980" title="(x$1: Boolean)Unit">stat</a>  = <a href="../../SubComponent.scala.html#620039" title="=&gt; scala.tools.nsc.Global">global</a>.<a href="../../Global.scala.html#537522" title="Inliners.this.global.opt.type">opt</a>.<a href="../../settings/AestheticSettings.scala.html#545416" title="=&gt; Boolean">printStats</a>
    <span class="keyword">val</span> <a title="scala.collection.mutable.ListBuffer[Inliners.this.global.icodes.BasicBlock]" id="764198">staleOut</a>      = <span title="scala.collection.mutable.ListBuffer[Inliners.this.global.icodes.BasicBlock]" class="keyword">new</span> mutable.<a href="../../../../collection/mutable/ListBuffer.scala.html#13347" title="scala.collection.mutable.ListBuffer[Inliners.this.global.icodes.BasicBlock]">ListBuffer</a><span class="delimiter">[</span>BasicBlock<span class="delimiter">]</span>
    <span class="keyword">val</span> <a title="scala.collection.mutable.Set[Inliners.this.global.icodes.BasicBlock]" id="764200">splicedBlocks</a> = mutable.<a href="../../../../collection/mutable/Set.scala.html#13129" title="scala.collection.mutable.Set.type">Set</a>.<a href="../../../../collection/mutable/Set.scala.html#295731" title="[A]=&gt; scala.collection.mutable.Set[A]">empty</a><span title="scala.collection.mutable.Set[Inliners.this.global.icodes.BasicBlock]" class="delimiter">[</span><a href="../icode/BasicBlocks.scala.html#614938" title="Inliners.this.global.icodes.BasicBlock">BasicBlock</a><span class="delimiter">]</span>
    <span class="keyword">val</span> <a title="scala.collection.mutable.Set[Inliners.this.global.icodes.BasicBlock]" id="764202">staleIn</a>       = mutable.<a href="../../../../collection/mutable/Set.scala.html#13129" title="scala.collection.mutable.Set.type">Set</a>.<a href="../../../../collection/mutable/Set.scala.html#295731" title="[A]=&gt; scala.collection.mutable.Set[A]">empty</a><span title="scala.collection.mutable.Set[Inliners.this.global.icodes.BasicBlock]" class="delimiter">[</span><a href="../icode/BasicBlocks.scala.html#614938" title="Inliners.this.global.icodes.BasicBlock">BasicBlock</a><span class="delimiter">]</span>

    /**
     * A transformation local to the body of the IMethod received as argument.
     * An linining decision consists in replacing a callsite with the body of the callee.
     * Please notice that, because `analyzeMethod()` itself may modify a method body,
     * the particular callee bodies that end up being inlined depend on the particular order in which methods are visited
     * (no topological sorting over the call-graph is attempted).
     *
     * Making an inlining decision requires type-flow information for both caller and callee.
     * Regarding the caller, such information is needed only for basic blocks containing inlining candidates
     * (and their transitive predecessors). This observation leads to using a custom type-flow analysis (MTFAGrowable)
     * that can be re-inited, i.e. that reuses lattice elements (type-flow information computed in a previous iteration)
     * as starting point for faster convergence in a new iteration.
     *
     * The mechanics of inlining are iterative for a given invocation of `analyzeMethod(m)`,
     * and are affected by inlinings from previous iterations
     * (ie, &quot;heuristic&quot; rules are based on statistics tracked for that purpose):
     *
     *   (1) before the iterations proper start, so-called preinlining is performed.
     *       Those callsites whose (receiver, concreteMethod) are both known statically
     *       can be analyzed for inlining before computing a type-flow. Details in `preInline()`
     *
     *   (2) the first iteration computes type-flow information for basic blocks containing inlining candidates
     *       (and their transitive predecessors), so called `relevantBBs` basic blocks.
     *       The ensuing analysis of each candidate (performed by `analyzeInc()`)
     *       may result in a CFG isomorphic to that of the callee being inserted in place of the callsite
     *       (i.e. a CALL_METHOD instruction is replaced with a single-entry single-exit CFG,
     *        a substitution we call &quot;successful inlining&quot;).
     *
     *   (3) following iterations have `relevantBBs` updated to focus on the inlined basic blocks and their successors only.
     *       Details in `MTFAGrowable.reinit()`
     * */
    <span class="keyword">def</span> <a title="(m: Inliners.this.global.icodes.IMethod)Unit" id="764204">analyzeMethod</a><span class="delimiter">(</span><a title="Inliners.this.global.icodes.IMethod" id="764637">m</a>: <a href="../icode/Members.scala.html#614927" title="Inliners.this.global.icodes.IMethod">IMethod</a><span class="delimiter">)</span>: <a href="../../../../Unit.scala.html#1515" title="Unit">Unit</a> = <span class="delimiter">{</span>
      // m.normalize
      <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="../../Global.scala.html#537448" title="=&gt; scala.tools.nsc.Settings">settings</a>.<a href="../../settings/ScalaSettings.scala.html#540057" title="=&gt; scala.tools.nsc.Settings#BooleanSetting">debug</a>.<a href="../../settings/MutableSettings.scala.html#541066" title="=&gt; Boolean">value</a><span class="delimiter">)</span>
        <a href="#764187" title="(what: String, main: =&gt; String, comment: =&gt; String)Unit">inlineLog</a><span class="delimiter">(</span><span title="String(&quot;caller&quot;)" class="string">&quot;caller&quot;</span>, <a href="#764186" title="(sym: Inliners.this.global.Symbol)String">ownedName</a><span class="delimiter">(</span><a href="#764637" title="Inliners.this.global.icodes.IMethod">m</a>.<a href="../icode/Members.scala.html#695986" title="=&gt; Inliners.this.global.icodes.global.Symbol">symbol</a><span class="delimiter">)</span>, <span title="String(&quot;in &quot;)" class="string">&quot;in &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#764637" title="Inliners.this.global.icodes.IMethod">m</a>.<a href="../icode/Members.scala.html#695986" title="=&gt; Inliners.this.global.icodes.global.Symbol">symbol</a>.<a href="../../../../reflect/internal/Symbols.scala.html#411315" title="=&gt; Inliners.this.global.icodes.global.Symbol">owner</a>.<a href="../../../../reflect/internal/Symbols.scala.html#411334" title="=&gt; String">fullName</a><span class="delimiter">)</span>

      <span class="keyword">var</span> <a title="Int" id="764639">sizeBeforeInlining</a>  = <a href="#764637" title="Inliners.this.global.icodes.IMethod">m</a>.<a href="../icode/Members.scala.html#695989" title="=&gt; Inliners.this.global.icodes.Code">code</a>.<a href="../icode/Members.scala.html#696095" title="=&gt; Int">blockCount</a>
      <span class="keyword">var</span> <a title="Int" id="764640">instrBeforeInlining</a> = <a href="#764637" title="Inliners.this.global.icodes.IMethod">m</a>.<a href="../icode/Members.scala.html#695989" title="=&gt; Inliners.this.global.icodes.Code">code</a>.<a href="../icode/Members.scala.html#696096" title="=&gt; Int">instructionCount</a>
      <span class="keyword">var</span> <a title="Boolean" id="764641">retry</a> = <span title="Boolean(false)" class="keyword">false</span>
      <span class="keyword">var</span> <a title="Int" id="764642">count</a> = <span title="Int(0)" class="int">0</span>

      // fresh name counter
      <span class="keyword">val</span> <a title="scala.collection.mutable.Map[String,Int]" id="764643">fresh</a> = mutable.<a href="../../../../collection/mutable/HashMap.scala.html#12448" title="scala.collection.mutable.HashMap.type">HashMap</a>.<a href="../../../../collection/mutable/HashMap.scala.html#153384" title="[A, B]=&gt; scala.collection.mutable.HashMap[A,B]">empty</a><span title="scala.collection.mutable.HashMap[String,Int]" class="delimiter">[</span><span title="String">String</span>, <a href="../../../../Int.scala.html#321" title="Int">Int</a><span class="delimiter">]</span> <a href="../../../../collection/mutable/Map.scala.html#87604" title="(d: Int)scala.collection.mutable.Map[String,Int]">withDefaultValue</a> <span title="Int(0)" class="int">0</span>
      // how many times have we already inlined this method here?
      <span class="keyword">val</span> <a title="scala.collection.mutable.Map[Inliners.this.global.Symbol,Int]" id="764644">inlinedMethodCount</a> = mutable.<a href="../../../../collection/mutable/HashMap.scala.html#12448" title="scala.collection.mutable.HashMap.type">HashMap</a>.<a href="../../../../collection/mutable/HashMap.scala.html#153384" title="[A, B]=&gt; scala.collection.mutable.HashMap[A,B]">empty</a><span title="scala.collection.mutable.HashMap[Inliners.this.global.Symbol,Int]" class="delimiter">[</span><a href="../../../../reflect/internal/Symbols.scala.html#407146" title="Inliners.this.global.Symbol">Symbol</a>, <a href="../../../../Int.scala.html#321" title="Int">Int</a><span class="delimiter">]</span> <a href="../../../../collection/mutable/Map.scala.html#87604" title="(d: Int)scala.collection.mutable.Map[Inliners.this.global.Symbol,Int]">withDefaultValue</a> <span title="Int(0)" class="int">0</span>
      <span class="keyword">val</span> <a title="Inliner.this.IMethodInfo" id="764645">caller</a> = <span title="Inliner.this.IMethodInfo" class="keyword">new</span> <a href="#764207" title="Inliner.this.IMethodInfo">IMethodInfo</a><span class="delimiter">(</span><a href="#764637" title="Inliners.this.global.icodes.IMethod">m</a><span class="delimiter">)</span>
      <span class="keyword">def</span> <a title="=&gt; String" id="764646">analyzeMessage</a> = <a href="../../../../StringContext.scala.html#56629" title="(args: Any*)String">s</a>&quot;Analyzing $<span class="delimiter">{</span><a href="#764645" title="Inliner.this.IMethodInfo">caller</a>.<a href="#764688" title="=&gt; Int">length</a><span class="delimiter">}</span> blocks of $<a href="#764637" title="Inliners.this.global.icodes.IMethod">m</a><span class="string"> for inlining sites.&quot;</span>

      <span class="keyword">def</span> <a title="(isFirstRound: Boolean)Int" id="764647">preInline</a><span class="delimiter">(</span><a title="Boolean" id="764707">isFirstRound</a>: <a href="../../../../Boolean.scala.html#1425" title="Boolean">Boolean</a><span class="delimiter">)</span>: <a href="../../../../Int.scala.html#321" title="Int">Int</a> = <span class="delimiter">{</span>
        <span class="keyword">val</span> <a title="List[Inliners.this.global.icodes.BasicBlock]" id="764708">inputBlocks</a> = <a href="#764645" title="Inliner.this.IMethodInfo">caller</a>.<a href="#764705" title="=&gt; Inliners.this.global.icodes.IMethod">m</a>.<a href="../icode/Members.scala.html#695996" title="(lin: Inliners.this.global.icodes.Linearizer)List[Inliners.this.global.icodes.BasicBlock]">linearizedBlocks</a><span class="delimiter">(</span><span class="delimiter">)</span>
        <span class="keyword">val</span> <a title="Inliners.this.global.icodes.BasicBlock =&gt; List[Inliners.this.global.icodes.opcodes.CALL_METHOD]" id="764709">callsites</a>: <a href="../../../../Function1.scala.html#777" title="Inliners.this.global.icodes.BasicBlock =&gt; List[Inliners.this.global.icodes.opcodes.CALL_METHOD]">Function1</a><span class="delimiter">[</span>BasicBlock, List<span class="delimiter">[</span>opcodes.CALL_METHOD<span class="delimiter">]</span><span class="delimiter">]</span> = <span class="delimiter">{</span>
          <span title="Inliners.this.global.analysis.global.icodes.BasicBlock =&gt; List[Inliners.this.global.analysis.global.icodes.opcodes.CALL_METHOD]" class="keyword">if</span><span class="delimiter">(</span><a href="#764707" title="Boolean">isFirstRound</a><span class="delimiter">)</span> <a href="#764196" title="=&gt; Inliners.this.global.analysis.MTFAGrowable">tfa</a>.<a href="../icode/analysis/TypeFlowAnalysis.scala.html#726777" title="(b: Inliners.this.global.analysis.global.icodes.BasicBlock)List[Inliners.this.global.analysis.global.icodes.opcodes.CALL_METHOD]">conclusives</a> <span class="keyword">else</span> <a href="#764196" title="=&gt; Inliners.this.global.analysis.MTFAGrowable">tfa</a>.<a href="../icode/analysis/TypeFlowAnalysis.scala.html#726778" title="(b: Inliners.this.global.analysis.global.icodes.BasicBlock)List[Inliners.this.global.analysis.global.icodes.opcodes.CALL_METHOD]">knownBeforehand</a>
        <span class="delimiter">}</span>
        <a href="#764648" title="(inputBlocks: Traversable[Inliners.this.global.icodes.BasicBlock], callsites: Inliners.this.global.icodes.BasicBlock =&gt; List[Inliners.this.global.icodes.opcodes.CALL_METHOD])Int">inlineWithoutTFA</a><span class="delimiter">(</span><a href="#764708" title="List[Inliners.this.global.icodes.BasicBlock]">inputBlocks</a>, <a href="#764709" title="Inliners.this.global.icodes.BasicBlock =&gt; List[Inliners.this.global.icodes.opcodes.CALL_METHOD]">callsites</a><span class="delimiter">)</span>
      <span class="delimiter">}</span>

      /**
       *  Inline straightforward callsites (those that can be inlined without a TFA).
       *
       *  To perform inlining, all we need to know is listed as formal params in `analyzeInc()`:
       *    - callsite and block containing it
       *    - actual (ie runtime) class of the receiver
       *    - actual (ie runtime) method being invoked
       *    - stack length just before the callsite (to check whether enough arguments have been pushed).
       *  The assert below lists the conditions under which &quot;no TFA is needed&quot;
       *  (the statically known receiver and method are both final, thus, at runtime they can't be any others than those).
       *
       */
      <span class="keyword">def</span> <a title="(inputBlocks: Traversable[Inliners.this.global.icodes.BasicBlock], callsites: Inliners.this.global.icodes.BasicBlock =&gt; List[Inliners.this.global.icodes.opcodes.CALL_METHOD])Int" id="764648">inlineWithoutTFA</a><span class="delimiter">(</span><a title="Traversable[Inliners.this.global.icodes.BasicBlock]" id="764717">inputBlocks</a>: <a href="../../../../collection/Traversable.scala.html#4379" title="Traversable[Inliners.this.global.icodes.BasicBlock]">Traversable</a><span class="delimiter">[</span>BasicBlock<span class="delimiter">]</span>, <a title="Inliners.this.global.icodes.BasicBlock =&gt; List[Inliners.this.global.icodes.opcodes.CALL_METHOD]" id="764718">callsites</a>: <a href="../../../../Function1.scala.html#777" title="Inliners.this.global.icodes.BasicBlock =&gt; List[Inliners.this.global.icodes.opcodes.CALL_METHOD]">Function1</a><span class="delimiter">[</span>BasicBlock, List<span class="delimiter">[</span>opcodes.CALL_METHOD<span class="delimiter">]</span><span class="delimiter">]</span><span class="delimiter">)</span>: <a href="../../../../Int.scala.html#321" title="Int">Int</a> = <span class="delimiter">{</span>
        <span class="keyword">var</span> <a title="Int" id="764719">inlineCount</a> = <span title="Int(0)" class="int">0</span>
        <span class="keyword">import</span> scala.util.control.<a href="../../../../util/control/Breaks.scala.html#52267" title="scala.util.control.Breaks.type">Breaks</a>._
        <span class="keyword">for</span><span class="delimiter">(</span><a href="../../../../Tuple2.scala.html#62849" title="Inliners.this.global.icodes.BasicBlock" id="764799">x</a> &lt;- <a href="../../../../collection/TraversableLike.scala.html#58063" title="(f: Inliners.this.global.icodes.BasicBlock =&gt; (Inliners.this.global.icodes.BasicBlock, List[Inliners.this.global.icodes.opcodes.CALL_METHOD]))(implicit bf: scala.collection.generic.CanBuildFrom[Traversable[Inliners.this.global.icodes.BasicBlock],(Inliners.this.global.icodes.BasicBlock, List[Inliners.this.global.icodes.opcodes.CALL_METHOD]),Traversable[(Inliners.this.global.icodes.BasicBlock, List[Inliners.this.global.icodes.opcodes.CALL_METHOD])]])Traversable[(Inliners.this.global.icodes.BasicBlock, List[Inliners.this.global.icodes.opcodes.CALL_METHOD])]">inputBlocks</a>; <a title="List[Inliners.this.global.icodes.opcodes.CALL_METHOD]" id="764800">easyCake</a> = <a href="../../../../Function1.scala.html#58642" title="(v1: Inliners.this.global.icodes.BasicBlock)List[Inliners.this.global.icodes.opcodes.CALL_METHOD]">callsites</a><span class="delimiter">(</span><a href="#764799" title="Inliners.this.global.icodes.BasicBlock">x</a><span class="delimiter">)</span>; <span class="keyword">if</span> <a href="#764800" title="List[Inliners.this.global.icodes.opcodes.CALL_METHOD]">easyCake</a>.<a href="#3320224" title="(x: Boolean)Boolean">nonEmpty</a><span class="delimiter">)</span> <span class="delimiter">{</span>
          <a href="../../../../util/control/Breaks.scala.html#58511" title="(op: =&gt; Unit)Unit">breakable</a> <a href="#3320230" title="(x: Unit)Unit" class="delimiter">{</a>
            <span class="keyword">for</span><span class="delimiter">(</span><a title="Inliners.this.global.icodes.opcodes.CALL_METHOD" id="764821">ocm</a> &lt;- <a href="../../../../collection/immutable/List.scala.html#62719" title="(f: Inliners.this.global.icodes.opcodes.CALL_METHOD =&gt; Unit)Unit">easyCake</a><span class="delimiter">)</span> <span class="delimiter">{</span>
              <a href="../../Global.scala.html#537498" title="(assertion: Boolean)Unit">assert</a><span class="delimiter">(</span><a href="#764821" title="Inliners.this.global.icodes.opcodes.CALL_METHOD">ocm</a>.<a href="../icode/Opcodes.scala.html#705592" title="=&gt; Inliners.this.global.icodes.global.Symbol">method</a>.<a href="../../../../reflect/internal/Symbols.scala.html#411298" title="=&gt; Boolean">isEffectivelyFinal</a> <a href="../../../../Boolean.scala.html#57826" title="(x: Boolean)Boolean">&amp;&amp;</a> <a href="#764821" title="Inliners.this.global.icodes.opcodes.CALL_METHOD">ocm</a>.<a href="../icode/Opcodes.scala.html#705592" title="=&gt; Inliners.this.global.icodes.global.Symbol">method</a>.<a href="../../../../reflect/internal/Symbols.scala.html#411315" title="=&gt; Inliners.this.global.icodes.global.Symbol">owner</a>.<a href="../../../../reflect/internal/Symbols.scala.html#411298" title="=&gt; Boolean">isEffectivelyFinal</a><span class="delimiter">)</span>
              <span title="Unit" class="keyword">if</span><span class="delimiter">(</span><a href="#764649" title="(i: Inliners.this.global.icodes.opcodes.CALL_METHOD, bb: Inliners.this.global.icodes.BasicBlock, receiver: Inliners.this.global.Symbol, stackLength: Int, concreteMethod: Inliners.this.global.Symbol)Boolean">analyzeInc</a><span class="delimiter">(</span><a href="#764821" title="Inliners.this.global.icodes.opcodes.CALL_METHOD">ocm</a>, <a href="#764799" title="Inliners.this.global.icodes.BasicBlock">x</a>, <a href="#764821" title="Inliners.this.global.icodes.opcodes.CALL_METHOD">ocm</a>.<a href="../icode/Opcodes.scala.html#705592" title="=&gt; Inliners.this.global.icodes.global.Symbol">method</a>.<a href="../../../../reflect/internal/Symbols.scala.html#411315" title="=&gt; Inliners.this.global.icodes.global.Symbol">owner</a>, -<span title="Int(-1)" class="int">1</span>, <a href="#764821" title="Inliners.this.global.icodes.opcodes.CALL_METHOD">ocm</a>.<a href="../icode/Opcodes.scala.html#705592" title="=&gt; Inliners.this.global.icodes.global.Symbol">method</a><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">{</span>
                <a href="#764719" title="Int">inlineCount</a> <a href="../../../../Int.scala.html#57154" title="(x: Int)Int">+=</a> <span title="Int(1)" class="int">1</span>
                <a href="../../../../util/control/Breaks.scala.html#58517" title="()Nothing">break</a>
              <span class="delimiter">}</span>
            <span class="delimiter">}</span>
          <span class="delimiter">}</span>
        <span class="delimiter">}</span>

        <a href="#764719" title="Int">inlineCount</a>
      <span class="delimiter">}</span>

      /**
       *  Decides whether it's feasible and desirable to inline the body of the method given by `concreteMethod`
       *  at the program point given by `i` (a callsite). The boolean result indicates whether inlining was performed.
       *
       */
      <span class="keyword">def</span> <a title="(i: Inliners.this.global.icodes.opcodes.CALL_METHOD, bb: Inliners.this.global.icodes.BasicBlock, receiver: Inliners.this.global.Symbol, stackLength: Int, concreteMethod: Inliners.this.global.Symbol)Boolean" id="764649">analyzeInc</a><span class="delimiter">(</span><a title="Inliners.this.global.icodes.opcodes.CALL_METHOD" id="764825">i</a>: <a href="../icode/Opcodes.scala.html#624307" title="Inliners.this.global.icodes.opcodes.CALL_METHOD">CALL_METHOD</a>, <a title="Inliners.this.global.icodes.BasicBlock" id="764826">bb</a>: <a href="../icode/BasicBlocks.scala.html#614938" title="Inliners.this.global.icodes.BasicBlock">BasicBlock</a>, <a title="Inliners.this.global.Symbol" id="764827">receiver</a>: <a href="../../../../reflect/internal/Symbols.scala.html#407146" title="Inliners.this.global.Symbol">Symbol</a>, <a title="Int" id="764828">stackLength</a>: <a href="../../../../Int.scala.html#321" title="Int">Int</a>, <a title="Inliners.this.global.Symbol" id="764829">concreteMethod</a>: <a href="../../../../reflect/internal/Symbols.scala.html#407146" title="Inliners.this.global.Symbol">Symbol</a><span class="delimiter">)</span>: <a href="../../../../Boolean.scala.html#1425" title="Boolean">Boolean</a> = <span class="delimiter">{</span>
        <a href="../../Global.scala.html#537497" title="(assertion: Boolean, message: =&gt; Any)Unit">assert</a><span class="delimiter">(</span><a href="#764826" title="Inliners.this.global.icodes.BasicBlock">bb</a>.<a href="../icode/BasicBlocks.scala.html#695929" title="=&gt; List[Inliners.this.global.icodes.Instruction]">toList</a> <a href="../../../../collection/LinearSeqOptimized.scala.html#86380" title="(elem: Any)Boolean">contains</a> <a href="#764825" title="Inliners.this.global.icodes.opcodes.CALL_METHOD">i</a>, <span title="String(&quot;Candidate callsite does not belong to BasicBlock.&quot;)" class="string">&quot;Candidate callsite does not belong to BasicBlock.&quot;</span><span class="delimiter">)</span>
        <span class="keyword">val</span> <a title="Boolean" id="764838">shouldWarn</a> = <a href="#622833" title="(sym: Inliners.this.global.Symbol)Boolean">hasInline</a><span class="delimiter">(</span><a href="#764825" title="Inliners.this.global.icodes.opcodes.CALL_METHOD">i</a>.<a href="../icode/Opcodes.scala.html#705592" title="=&gt; Inliners.this.global.icodes.global.Symbol">method</a><span class="delimiter">)</span>

        <span class="keyword">def</span> <a title="(reason: String)Boolean" id="764839">warnNoInline</a><span class="delimiter">(</span><a title="String" id="764848">reason</a>: <span title="String">String</span><span class="delimiter">)</span>: <a href="../../../../Boolean.scala.html#1425" title="Boolean">Boolean</a> = <span class="delimiter">{</span>
          <span class="keyword">def</span> <a title="=&gt; String" id="764849">msg</a> = <a href="../../../../Predef.scala.html#7604" title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps" class="string">&quot;Could not inline required method %s because %s.&quot;</a>.<a href="../../../../collection/immutable/StringLike.scala.html#59882" title="(args: Any*)String">format</a><span class="delimiter">(</span><a href="#764825" title="Inliners.this.global.icodes.opcodes.CALL_METHOD">i</a>.<a href="../icode/Opcodes.scala.html#705592" title="=&gt; Inliners.this.global.icodes.global.Symbol">method</a>.<a href="../../../../reflect/internal/Symbols.scala.html#411322" title="=&gt; Inliners.this.global.icodes.global.Name">originalName</a>.<a href="../../../../reflect/internal/Names.scala.html#410422" title="=&gt; String">decode</a>, <a href="#764848" title="String">reason</a><span class="delimiter">)</span>
          <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="../../Global.scala.html#537448" title="=&gt; scala.tools.nsc.Settings">settings</a>.<a href="../../settings/ScalaSettings.scala.html#540057" title="=&gt; scala.tools.nsc.Settings#BooleanSetting">debug</a>.<a href="../../settings/MutableSettings.scala.html#541066" title="=&gt; Boolean">value</a><span class="delimiter">)</span>
            <a href="#764187" title="(what: String, main: =&gt; String, comment: =&gt; String)Unit">inlineLog</a><span class="delimiter">(</span><span title="String(&quot;fail&quot;)" class="string">&quot;fail&quot;</span>, <a href="#764825" title="Inliners.this.global.icodes.opcodes.CALL_METHOD">i</a>.<a href="../icode/Opcodes.scala.html#705592" title="=&gt; Inliners.this.global.icodes.global.Symbol">method</a>.<a href="../../../../reflect/internal/Symbols.scala.html#411334" title="=&gt; String">fullName</a>, <a href="#764848" title="String">reason</a><span class="delimiter">)</span>
          <span title="Any" class="keyword">if</span> <span class="delimiter">(</span><a href="#764838" title="Boolean">shouldWarn</a><span class="delimiter">)</span>
            <a href="#764185" title="(pos: Inliners.this.global.Position, msg: String)Any">warn</a><span class="delimiter">(</span><a href="#764825" title="Inliners.this.global.icodes.opcodes.CALL_METHOD">i</a>.<a href="../icode/Opcodes.scala.html#695883" title="=&gt; scala.reflect.internal.util.Position">pos</a>, <a href="#764849" title="=&gt; String">msg</a><span class="delimiter">)</span>

          <span title="Boolean(false)" class="keyword">false</span>
        <span class="delimiter">}</span>

        <span class="keyword">var</span> <a title="Boolean" id="764840">isAvailable</a> = <a href="../../Global.scala.html#537466" title="Inliners.this.global.icodes.type">icodes</a> <a href="../icode/Repository.scala.html#615138" title="(sym: Inliners.this.global.icodes.global.Symbol)Boolean">available</a> <a href="#764829" title="Inliners.this.global.Symbol">concreteMethod</a>.<a href="../../../../reflect/internal/Symbols.scala.html#411422" title="=&gt; Inliners.this.global.Symbol">enclClass</a>

        <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="../../../../Boolean.scala.html#57822" title="=&gt; Boolean">!</a><a href="#764840" title="Boolean">isAvailable</a> <a href="../../../../Boolean.scala.html#57826" title="(x: Boolean)Boolean">&amp;&amp;</a> <a href="#764206" title="(sym: Inliners.this.global.Symbol, receiver: Inliners.this.global.Symbol)Boolean">shouldLoadImplFor</a><span class="delimiter">(</span><a href="#764829" title="Inliners.this.global.Symbol">concreteMethod</a>, <a href="#764827" title="Inliners.this.global.Symbol">receiver</a><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">{</span>
          // Until r22824 this line was:
          //   icodes.icode(concreteMethod.enclClass, true)
          //
          // Changing it to
          //   icodes.load(concreteMethod.enclClass)
          // was the proximate cause for SI-3882:
          //   error: Illegal index: 0 overlaps List((variable par1,LONG))
          //   error: Illegal index: 0 overlaps List((variable par1,LONG))
          <a href="#764840" title="Boolean">isAvailable</a> = <a href="../../Global.scala.html#537466" title="Inliners.this.global.icodes.type">icodes</a>.<a href="../icode/Repository.scala.html#615141" title="(sym: Inliners.this.global.icodes.global.Symbol)Boolean">load</a><span class="delimiter">(</span><a href="#764829" title="Inliners.this.global.Symbol">concreteMethod</a>.<a href="../../../../reflect/internal/Symbols.scala.html#411422" title="=&gt; Inliners.this.global.Symbol">enclClass</a><span class="delimiter">)</span>
        <span class="delimiter">}</span>

        <span class="keyword">def</span> <a title="=&gt; Boolean" id="764841">isCandidate</a> = <span class="delimiter">(</span>
             <a href="#622827" title="(cls: Inliners.this.global.Symbol)Boolean">isClosureClass</a><span class="delimiter">(</span><a href="#764827" title="Inliners.this.global.Symbol">receiver</a><span class="delimiter">)</span>
          <a href="../../../../Boolean.scala.html#57825" title="(x: Boolean)Boolean">||</a> <a href="#764829" title="Inliners.this.global.Symbol">concreteMethod</a>.<a href="../../../../reflect/internal/Symbols.scala.html#411298" title="=&gt; Boolean">isEffectivelyFinal</a>
          <a href="../../../../Boolean.scala.html#57825" title="(x: Boolean)Boolean">||</a> <a href="#764827" title="Inliners.this.global.Symbol">receiver</a>.<a href="../../../../reflect/internal/Symbols.scala.html#411298" title="=&gt; Boolean">isEffectivelyFinal</a>
        <span class="delimiter">)</span>

        <span class="keyword">def</span> <a title="=&gt; Boolean" id="764842">isApply</a>     = <a href="#764829" title="Inliners.this.global.Symbol">concreteMethod</a>.<a href="../../../../reflect/internal/Symbols.scala.html#411087" title="=&gt; concreteMethod.NameType">name</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="../../../../reflect/internal/StdNames.scala.html#407871" title="Inliners.this.global.nme.type">nme</a>.<a href="../../../../reflect/internal/StdNames.scala.html#414263" title="=&gt; Inliners.this.global.nme.NameType">apply</a>

        <span class="keyword">def</span> <a title="=&gt; Boolean" id="764843">isCountable</a> = <a href="../../../../Boolean.scala.html#57822" title="=&gt; Boolean">!</a><span class="delimiter">(</span>
             <a href="#622827" title="(cls: Inliners.this.global.Symbol)Boolean">isClosureClass</a><span class="delimiter">(</span><a href="#764827" title="Inliners.this.global.Symbol">receiver</a><span class="delimiter">)</span>
          <a href="../../../../Boolean.scala.html#57825" title="(x: Boolean)Boolean">||</a> <a href="#764842" title="=&gt; Boolean">isApply</a>
          <a href="../../../../Boolean.scala.html#57825" title="(x: Boolean)Boolean">||</a> <a href="#622828" title="(sym: Inliners.this.global.Symbol)Boolean">isMonadicMethod</a><span class="delimiter">(</span><a href="#764829" title="Inliners.this.global.Symbol">concreteMethod</a><span class="delimiter">)</span>
          <a href="../../../../Boolean.scala.html#57825" title="(x: Boolean)Boolean">||</a> <a href="#764827" title="Inliners.this.global.Symbol">receiver</a>.<a href="../../../../reflect/internal/Symbols.scala.html#411447" title="=&gt; Inliners.this.global.Symbol">enclosingPackage</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="../../../../reflect/internal/Definitions.scala.html#407777" title="Inliners.this.global.definitions.type">definitions</a>.<a href="../../../../reflect/internal/Definitions.scala.html#408644" title="=&gt; Inliners.this.global.ModuleSymbol">RuntimePackage</a>
        <span class="delimiter">)</span>   // only count non-closures

        <a href="../../Global.scala.html#537517" title="(msg: =&gt; String)Unit">debuglog</a><span class="delimiter">(</span><span title="String(&quot;Treating &quot;)" class="string">&quot;Treating &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#764825" title="Inliners.this.global.icodes.opcodes.CALL_METHOD">i</a>
              <span title="(x$1: Any)String">+</span> <span title="String(&quot;\n\treceiver: &quot;)" class="string">&quot;\n\treceiver: &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#764827" title="Inliners.this.global.Symbol">receiver</a>
              <span title="(x$1: Any)String">+</span> <span title="String(&quot;\n\ticodes.available: &quot;)" class="string">&quot;\n\ticodes.available: &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#764840" title="Boolean">isAvailable</a>
              <span title="(x$1: Any)String">+</span> <span title="String(&quot;\n\tconcreteMethod.isEffectivelyFinal: &quot;)" class="string">&quot;\n\tconcreteMethod.isEffectivelyFinal: &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#764829" title="Inliners.this.global.Symbol">concreteMethod</a>.<a href="../../../../reflect/internal/Symbols.scala.html#411298" title="=&gt; Boolean">isEffectivelyFinal</a><span class="delimiter">)</span>

        <span title="Boolean" class="keyword">if</span> <span class="delimiter">(</span><a href="../../../../Boolean.scala.html#57822" title="=&gt; Boolean">!</a><a href="#764841" title="=&gt; Boolean">isCandidate</a><span class="delimiter">)</span> <a href="#764839" title="(reason: String)Boolean">warnNoInline</a><span class="delimiter">(</span><span title="String(&quot;it can be overridden&quot;)" class="string">&quot;it can be overridden&quot;</span><span class="delimiter">)</span>
        <span class="keyword">else</span> <span title="Boolean" class="keyword">if</span> <span class="delimiter">(</span><a href="../../../../Boolean.scala.html#57822" title="=&gt; Boolean">!</a><a href="#764840" title="Boolean">isAvailable</a><span class="delimiter">)</span> <a href="#764839" title="(reason: String)Boolean">warnNoInline</a><span class="delimiter">(</span><span title="String(&quot;bytecode unavailable&quot;)" class="string">&quot;bytecode unavailable&quot;</span><span class="delimiter">)</span>
        <span class="keyword">else</span> <a href="#764223" title="(meth: Inliners.this.global.Symbol, receiver: Inliners.this.global.Symbol)Option[Inliners.this.global.icodes.IMethod]">lookupIMethod</a><span class="delimiter">(</span><a href="#764829" title="Inliners.this.global.Symbol">concreteMethod</a>, <a href="#764827" title="Inliners.this.global.Symbol">receiver</a><span class="delimiter">)</span> <a href="../../../../Option.scala.html#62877" title="(p: Inliners.this.global.icodes.IMethod =&gt; Boolean)Option[Inliners.this.global.icodes.IMethod]">filter</a> <span class="delimiter">(</span><a title="Inliners.this.global.icodes.IMethod" id="764883">callee</a> =&gt; <a href="#764883" title="Inliners.this.global.icodes.IMethod">callee</a>.<a href="../icode/Members.scala.html#696027" title="=&gt; Boolean">hasCode</a> <a href="../../../../Boolean.scala.html#57825" title="(x: Boolean)Boolean">||</a> <a href="#764839" title="(reason: String)Boolean">warnNoInline</a><span class="delimiter">(</span><span title="String(&quot;callee has no code&quot;)" class="string">&quot;callee has no code&quot;</span><span class="delimiter">)</span><span class="delimiter">)</span> <a href="../../../../Option.scala.html#62882" title="(p: Inliners.this.global.icodes.IMethod =&gt; Boolean)Boolean">exists</a> <span class="delimiter">{</span> <a title="Inliners.this.global.icodes.IMethod" id="764886">callee</a> =&gt;
          <span class="keyword">val</span> <a title="Inliner.this.IMethodInfo" id="764887">inc</a>   = <span title="Inliner.this.IMethodInfo" class="keyword">new</span> <a href="#764207" title="Inliner.this.IMethodInfo">IMethodInfo</a><span class="delimiter">(</span><a href="#764886" title="Inliners.this.global.icodes.IMethod">callee</a><span class="delimiter">)</span>
          <span class="keyword">val</span> <a title="Inliner.this.CallerCalleeInfo" id="764888">pair</a>  = <span title="Inliner.this.CallerCalleeInfo" class="keyword">new</span> <a href="#764222" title="Inliner.this.CallerCalleeInfo">CallerCalleeInfo</a><span class="delimiter">(</span><a href="#764645" title="Inliner.this.IMethodInfo">caller</a>, <a href="#764887" title="Inliner.this.IMethodInfo">inc</a>, <a href="#764643" title="scala.collection.mutable.Map[String,Int]">fresh</a>, <a href="#764644" title="scala.collection.mutable.Map[Inliners.this.global.Symbol,Int]">inlinedMethodCount</a><span class="delimiter">)</span>

          <span title="Boolean" class="keyword">if</span> <span class="delimiter">(</span><a href="#764887" title="Inliner.this.IMethodInfo">inc</a>.<a href="#764694" title="=&gt; Boolean">hasHandlers</a> <a href="../../../../Boolean.scala.html#57826" title="(x: Boolean)Boolean">&amp;&amp;</a> <span class="delimiter">(</span><a href="#764828" title="Int">stackLength</a> <a href="../../../../Int.scala.html#57097" title="(x: Int)Boolean">==</a> -<span title="Int(-1)" class="int">1</span><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">{</span>
            // no inlining is done, yet don't warn about it, stackLength == -1 indicates we're trying to inlineWithoutTFA.
            // Shortly, a TFA will be computed and an error message reported if indeed inlining not possible.
            <span title="Boolean(false)" class="keyword">false</span>
          <span class="delimiter">}</span>
          <span class="keyword">else</span> <span class="delimiter">{</span>
            <span class="keyword">val</span> <a title="Boolean" id="764922">isSafe</a> = <a href="#764888" title="Inliner.this.CallerCalleeInfo">pair</a> <a href="#764908" title="(stackLength: Int)Inliner.this.InlineSafetyInfo">isStampedForInlining</a> <a href="#764828" title="Int">stackLength</a> <span class="keyword">match</span> <span class="delimiter">{</span>
              <span class="keyword">case</span> DontInlineHere<a href="#3320234" title="Boolean" id="3320236" class="delimiter">(</a><a href="#767121" title="String" id="764951">msg</a><span class="delimiter">)</span>                       =&gt; <a href="#764839" title="(reason: String)Boolean">warnNoInline</a><a href="#3320249" title="(x: Boolean)Boolean" class="delimiter">(</a><a href="#764951" title="String">msg</a><span class="delimiter">)</span>
              <span class="keyword">case</span> <a href="#765852" title="Boolean" id="3320245">NeverSafeToInline</a>                         =&gt; <a href="#3320249" title="(x: Boolean)Boolean" class="keyword">false</a>
              <span class="keyword">case</span> <a href="#765868" title="Boolean" id="3320246">InlineableAtThisCaller</a>                    =&gt; <a href="#3320249" title="(x: Boolean)Boolean" class="keyword">true</a>
              <span class="keyword">case</span> inl @ FeasibleInline<a href="#3320234" title="Boolean" id="3320242" class="delimiter">(</a><a href="#767231" title="Inliner.this.NonPublicRefs.Value" id="3320239">_</a>, <a href="#767232" title="List[Inliners.this.global.Symbol]" id="3320240">_</a><span class="delimiter">)</span> <span class="keyword">if</span> <a href="../../../../Boolean.scala.html#57822" title="=&gt; Boolean">!</a>inl.<a href="#764966" title="=&gt; Boolean">isSafe</a> =&gt; <a href="#3320249" title="(x: Boolean)Boolean" class="keyword">false</a>
              <span class="keyword">case</span> FeasibleInline<span class="delimiter">(</span><a href="#767231" title="Inliner.this.NonPublicRefs.Value" id="764998">required</a>, <a href="#767232" title="List[Inliners.this.global.Symbol]" id="764999">toPublicize</a><span class="delimiter">)</span>     =&gt;
                <span class="keyword">for</span> <span class="delimiter">(</span><a title="Inliners.this.global.Symbol" id="765020">f</a> &lt;- <a href="../../../../collection/immutable/List.scala.html#62719" title="(f: Inliners.this.global.Symbol =&gt; Inliners.this.global.Symbol)Unit">toPublicize</a><span class="delimiter">)</span> <span class="delimiter">{</span>
                  <a href="#764188" title="(what: String, main: Inliners.this.global.Symbol, comment: =&gt; String)Unit">inlineLog</a><span class="delimiter">(</span><span title="String(&quot;access&quot;)" class="string">&quot;access&quot;</span>, <a href="#765020" title="Inliners.this.global.Symbol">f</a>, <span title="String(&quot;making public&quot;)" class="string">&quot;making public&quot;</span><span class="delimiter">)</span>
                  <a href="#765020" title="Inliners.this.global.Symbol">f</a> <a href="../../../../reflect/internal/Symbols.scala.html#411236" title="(mask: Long)f.type">setFlag</a> <a href="../../symtab/package.scala.html#55820" title="=&gt; reflect.internal.Flags.type">Flags</a>.<a href="../../../../reflect/internal/Flags.scala.html#407029" title="=&gt; Long">notPRIVATE</a>
                  <a href="#765020" title="Inliners.this.global.Symbol">f</a> <a href="../../../../reflect/internal/Symbols.scala.html#411236" title="(mask: Long)f.type">setFlag</a> <a href="../../symtab/package.scala.html#55820" title="=&gt; reflect.internal.Flags.type">Flags</a>.<a href="../../../../reflect/internal/Flags.scala.html#407031" title="=&gt; Long">notPROTECTED</a>
                <span class="delimiter">}</span>
                // only add to `knownSafe` after all `toPublicize` fields actually made public.
                <span title="Any" class="keyword">if</span> <span class="delimiter">(</span><a href="#764998" title="Inliner.this.NonPublicRefs.Value">required</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="#764179" title="Inliner.this.NonPublicRefs.type">NonPublicRefs</a>.<a href="#764353" title="=&gt; Inliner.this.NonPublicRefs.Value">Public</a><span class="delimiter">)</span>
                  <a href="#764196" title="=&gt; Inliners.this.global.analysis.MTFAGrowable">tfa</a>.<a href="../icode/analysis/TypeFlowAnalysis.scala.html#726768" title="=&gt; scala.collection.mutable.Set[Inliners.this.global.analysis.global.Symbol]">knownSafe</a> <a href="../../../../collection/mutable/SetLike.scala.html#90897" title="(elem: Inliners.this.global.analysis.global.Symbol)Inliner.this.tfa.knownSafe.type">+=</a> <a href="#764887" title="Inliner.this.IMethodInfo">inc</a>.<a href="#764672" title="=&gt; Inliners.this.global.icodes.global.Symbol">sym</a>

                <span title="Boolean(true)" class="keyword">true</span>
            <span class="delimiter">}</span>
            <a href="#764922" title="Boolean">isSafe</a> <a href="../../../../Boolean.scala.html#57826" title="(x: Boolean)Boolean">&amp;&amp;</a> <span class="delimiter">{</span>
               <a href="#764641" title="Boolean">retry</a>   = <span title="Boolean(true)" class="keyword">true</span>
               <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#764843" title="=&gt; Boolean">isCountable</a><span class="delimiter">)</span> <a href="#764642" title="Int">count</a> <a href="../../../../Int.scala.html#57154" title="(x: Int)Int">+=</a> <span title="Int(1)" class="int">1</span>
               <a href="#764888" title="Inliner.this.CallerCalleeInfo">pair</a>.<a href="#764907" title="(block: Inliners.this.global.icodes.BasicBlock, instr: Inliners.this.global.icodes.opcodes.CALL_METHOD)Unit">doInline</a><span class="delimiter">(</span><a href="#764826" title="Inliners.this.global.icodes.BasicBlock">bb</a>, <a href="#764825" title="Inliners.this.global.icodes.opcodes.CALL_METHOD">i</a><span class="delimiter">)</span>
               <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="../../../../Boolean.scala.html#57822" title="=&gt; Boolean">!</a><a href="#764888" title="Inliner.this.CallerCalleeInfo">pair</a>.<a href="#764903" title="=&gt; Boolean">isInlineForced</a> <a href="../../../../Boolean.scala.html#57825" title="(x: Boolean)Boolean">||</a> <a href="#764887" title="Inliner.this.IMethodInfo">inc</a>.<a href="#764684" title="=&gt; Boolean">isMonadic</a><span class="delimiter">)</span> <a href="#764645" title="Inliner.this.IMethodInfo">caller</a>.<a href="#764699" title="(x$1: Int)Unit">inlinedCalls</a> <a href="../../../../Int.scala.html#57154" title="(x: Int)Int">+=</a> <span title="Int(1)" class="int">1</span>
               <a href="../../../../collection/mutable/MapLike.scala.html#87611" title="(key: Inliners.this.global.Symbol, value: Int)Unit">inlinedMethodCount</a><span class="delimiter">(</span><a href="#764887" title="Inliner.this.IMethodInfo">inc</a>.<a href="#764672" title="=&gt; Inliners.this.global.icodes.global.Symbol">sym</a><span class="delimiter">)</span> <a href="../../../../Int.scala.html#57154" title="(x: Int)Int">+=</a> <span title="Int(1)" class="int">1</span>

               // Remove the caller from the cache (this inlining might have changed its calls-private relation).
               <a href="#764355" title="=&gt; scala.collection.mutable.Map[Inliners.this.global.icodes.IMethod,Inliner.this.NonPublicRefs.Value]">usesNonPublics</a> <a href="../../../../collection/mutable/MapLike.scala.html#87626" title="(key: Inliners.this.global.icodes.IMethod)Inliner.this.NonPublicRefs.usesNonPublics.type">-=</a> <a href="#764637" title="Inliners.this.global.icodes.IMethod">m</a>
               <a href="#764189" title="=&gt; scala.collection.mutable.Map[Inliners.this.global.Symbol,(Boolean, Inliners.this.global.analysis.MethodTFA)]">recentTFAs</a>     <a href="../../../../collection/mutable/MapLike.scala.html#87626" title="(key: Inliners.this.global.Symbol)Inliner.this.recentTFAs.type">-=</a> <a href="#764637" title="Inliners.this.global.icodes.IMethod">m</a>.<a href="../icode/Members.scala.html#695986" title="=&gt; Inliners.this.global.icodes.global.Symbol">symbol</a>
               <span title="Boolean(true)" class="keyword">true</span>
            <span class="delimiter">}</span>
          <span class="delimiter">}</span>
        <span class="delimiter">}</span>
      <span class="delimiter">}</span>

      /* Pre-inlining consists in invoking the usual inlining subroutine with (receiver class, concrete method) pairs as input
       * where both method and receiver are final, which implies that the receiver computed via TFA will always match `concreteMethod.owner`.
       *
       * As with any invocation of `analyzeInc()` the inlining outcome is based on heuristics which favor inlining an isMonadicMethod before other methods.
       * That's why preInline() is invoked twice: any inlinings downplayed by the heuristics during the first round get an opportunity to rank higher during the second.
       *
       * As a whole, both `preInline()` invocations amount to priming the inlining process,
       * so that the first TFA that is run afterwards is able to gain more information as compared to a cold-start.
       */
      <span class="keyword">val</span> <a title="Int" id="764650">totalPreInlines</a> = <span class="delimiter">{</span>
        <span class="keyword">val</span> <a title="Int" id="765101">firstRound</a> = <a href="#764647" title="(isFirstRound: Boolean)Int">preInline</a><span class="delimiter">(</span><span title="Boolean(true)" class="keyword">true</span><span class="delimiter">)</span>
        <span title="Int" class="keyword">if</span><span class="delimiter">(</span><a href="#765101" title="Int">firstRound</a> <a href="../../../../Int.scala.html#57097" title="(x: Int)Boolean">==</a> <span title="Int(0)" class="int">0</span><span class="delimiter">)</span> <span title="Int(0)" class="int">0</span> <span class="keyword">else</span> <span class="delimiter">(</span><a href="#765101" title="Int">firstRound</a> <a href="../../../../Int.scala.html#57154" title="(x: Int)Int">+</a> <a href="#764647" title="(isFirstRound: Boolean)Int">preInline</a><span class="delimiter">(</span><span title="Boolean(false)" class="keyword">false</span><span class="delimiter">)</span><span class="delimiter">)</span>
      <span class="delimiter">}</span>
      <a href="#764198" title="=&gt; scala.collection.mutable.ListBuffer[Inliners.this.global.icodes.BasicBlock]">staleOut</a>.<a href="../../../../collection/mutable/ListBuffer.scala.html#79768" title="()Unit">clear</a><span class="delimiter">(</span><span class="delimiter">)</span>
      <a href="#764200" title="=&gt; scala.collection.mutable.Set[Inliners.this.global.icodes.BasicBlock]">splicedBlocks</a>.<a href="../../../../collection/mutable/SetLike.scala.html#90900" title="()Unit">clear</a><span class="delimiter">(</span><span class="delimiter">)</span>
      <a href="#764202" title="=&gt; scala.collection.mutable.Set[Inliners.this.global.icodes.BasicBlock]">staleIn</a>.<a href="../../../../collection/mutable/SetLike.scala.html#90900" title="()Unit">clear</a><span class="delimiter">(</span><span class="delimiter">)</span>

      <a href="#764651" title="Unit" class="keyword">do</a> <span class="delimiter">{</span>
        <a href="#764641" title="Boolean">retry</a> = <span title="Boolean(false)" class="keyword">false</span>
        <a href="../../Global.scala.html#537517" title="(msg: =&gt; String)Unit">debuglog</a><span class="delimiter">(</span><a href="#764646" title="=&gt; String">analyzeMessage</a><span class="delimiter">)</span>

        /* it's important not to inline in unreachable basic blocks. linearizedBlocks() returns only reachable ones. */
        <a href="#764196" title="=&gt; Inliners.this.global.analysis.MTFAGrowable">tfa</a>.<a href="../icode/analysis/TypeFlowAnalysis.scala.html#726755" title="(x$1: Traversable[Inliners.this.global.analysis.global.icodes.BasicBlock])Unit">callerLin</a> = <a href="#764645" title="Inliner.this.IMethodInfo">caller</a>.<a href="#764705" title="=&gt; Inliners.this.global.icodes.IMethod">m</a>.<a href="../icode/Members.scala.html#695996" title="(lin: Inliners.this.global.icodes.Linearizer)List[Inliners.this.global.icodes.BasicBlock]">linearizedBlocks</a><span class="delimiter">(</span><span class="delimiter">)</span>
           /* TODO Do we really want to inline inside exception handlers?
           *  Seems counterproductive (the larger the method the less likely it will be JITed).
            * The alternative would be `linearizer.linearizeAt(caller.m, caller.m.startBlock)`.
            * And, we would cut down on TFA iterations, too.
            * See also comment on the same topic in TypeFlowAnalysis. */

        <a href="#764196" title="=&gt; Inliners.this.global.analysis.MTFAGrowable">tfa</a>.<a href="../icode/analysis/TypeFlowAnalysis.scala.html#726791" title="(m: Inliners.this.global.analysis.global.icodes.IMethod, staleOut: List[Inliners.this.global.analysis.global.icodes.BasicBlock], inlined: scala.collection.Set[Inliners.this.global.analysis.global.icodes.BasicBlock], staleIn: scala.collection.Set[Inliners.this.global.analysis.global.icodes.BasicBlock])Unit">reinit</a><span class="delimiter">(</span><a href="#764637" title="Inliners.this.global.icodes.IMethod">m</a>, <a href="#764198" title="=&gt; scala.collection.mutable.ListBuffer[Inliners.this.global.icodes.BasicBlock]">staleOut</a>.<a href="../../../../collection/mutable/ListBuffer.scala.html#79773" title="=&gt; List[Inliners.this.global.icodes.BasicBlock]">toList</a>, <a href="#764200" title="=&gt; scala.collection.mutable.Set[Inliners.this.global.icodes.BasicBlock]">splicedBlocks</a>, <a href="#764202" title="=&gt; scala.collection.mutable.Set[Inliners.this.global.icodes.BasicBlock]">staleIn</a><span class="delimiter">)</span>
        <a href="#764196" title="=&gt; Inliners.this.global.analysis.MTFAGrowable">tfa</a>.<a href="../icode/analysis/TypeFlowAnalysis.scala.html#726757" title="()Unit">run</a>

        <a href="#764198" title="=&gt; scala.collection.mutable.ListBuffer[Inliners.this.global.icodes.BasicBlock]">staleOut</a>.<a href="../../../../collection/mutable/ListBuffer.scala.html#79768" title="()Unit">clear</a><span class="delimiter">(</span><span class="delimiter">)</span>
        <a href="#764200" title="=&gt; scala.collection.mutable.Set[Inliners.this.global.icodes.BasicBlock]">splicedBlocks</a>.<a href="../../../../collection/mutable/SetLike.scala.html#90900" title="()Unit">clear</a><span class="delimiter">(</span><span class="delimiter">)</span>
        <a href="#764202" title="=&gt; scala.collection.mutable.Set[Inliners.this.global.icodes.BasicBlock]">staleIn</a>.<a href="../../../../collection/mutable/SetLike.scala.html#90900" title="()Unit">clear</a><span class="delimiter">(</span><span class="delimiter">)</span>

        <span class="keyword">import</span> scala.util.control.<a href="../../../../util/control/Breaks.scala.html#52267" title="scala.util.control.Breaks.type">Breaks</a>._
        <span class="keyword">for</span><span class="delimiter">(</span><a title="Inliners.this.global.analysis.global.icodes.BasicBlock" id="765141">bb</a> &lt;- <a href="#764196" title="=&gt; Inliners.this.global.analysis.MTFAGrowable">tfa</a>.<a href="../../../../collection/generic/FilterMonadic.scala.html#58171" title="(f: Inliners.this.global.analysis.global.icodes.BasicBlock =&gt; Unit)Unit">callerLin</a>; <span class="keyword">if</span> <a href="#764196" title="=&gt; Inliners.this.global.analysis.MTFAGrowable">tfa</a>.<a href="../../../../collection/GenSetLike.scala.html#66403" title="(elem: Inliners.this.global.analysis.global.icodes.BasicBlock)Boolean">preCandidates</a><span class="delimiter">(</span><a href="#765141" title="Inliners.this.global.analysis.global.icodes.BasicBlock">bb</a><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">{</span>
          <span class="keyword">val</span> <a title="List[Inliners.this.global.icodes.opcodes.CALL_METHOD]" id="765142">cms</a> = <a href="#765141" title="Inliners.this.global.analysis.global.icodes.BasicBlock">bb</a>.<a href="../icode/BasicBlocks.scala.html#695929" title="=&gt; List[Inliners.this.global.analysis.global.icodes.Instruction]">toList</a> <a href="../../../../collection/TraversableLike.scala.html#58075" title="(pf: PartialFunction[Inliners.this.global.analysis.global.icodes.Instruction,Inliners.this.global.icodes.opcodes.CALL_METHOD])(implicit bf: scala.collection.generic.CanBuildFrom[List[Inliners.this.global.analysis.global.icodes.Instruction],Inliners.this.global.icodes.opcodes.CALL_METHOD,List[Inliners.this.global.icodes.opcodes.CALL_METHOD]])List[Inliners.this.global.icodes.opcodes.CALL_METHOD]">collect</a> <a title="anonymous class $anonfun extends scala.runtime.AbstractPartialFunction[Inliners.this.global.analysis.global.icodes.Instruction,Inliners.this.global.icodes.opcodes.CALL_METHOD] with Serializable" id="765169" class="delimiter">{</a> <span class="keyword">case</span> <a href="#3320263" title="B1" id="3320276">cm</a> : CALL_METHOD =&gt; <a href="#3320269" title="(x: B1)B1">cm</a> <span class="delimiter">}</span>
          <a href="../../../../util/control/Breaks.scala.html#58511" title="(op: =&gt; Unit)Unit">breakable</a> <span class="delimiter">{</span>
            <span class="keyword">for</span> <span class="delimiter">(</span><a title="Inliners.this.global.icodes.opcodes.CALL_METHOD" id="765234">cm</a> &lt;- <a href="../../../../collection/generic/FilterMonadic.scala.html#58171" title="(f: Inliners.this.global.icodes.opcodes.CALL_METHOD =&gt; Unit)Unit">cms</a>; <span class="keyword">if</span> <a href="#764196" title="=&gt; Inliners.this.global.analysis.MTFAGrowable">tfa</a>.<a href="../icode/analysis/TypeFlowAnalysis.scala.html#726750" title="=&gt; scala.collection.mutable.Map[Inliners.this.global.analysis.global.icodes.opcodes.CALL_METHOD,Inliners.this.global.analysis.CallsiteInfo]">remainingCALLs</a>.<a href="../../../../collection/MapLike.scala.html#87537" title="(key: Inliners.this.global.analysis.global.icodes.opcodes.CALL_METHOD)Boolean">isDefinedAt</a><span class="delimiter">(</span><a href="#765234" title="Inliners.this.global.icodes.opcodes.CALL_METHOD">cm</a><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">{</span>
              <span class="keyword">val</span> analysis.CallsiteInfo<a href="#3320285" title="(x: (Inliners.this.global.analysis.global.Symbol, Int, Inliners.this.global.analysis.global.Symbol))(Inliners.this.global.analysis.global.Symbol, Int, Inliners.this.global.analysis.global.Symbol)" class="delimiter">(</a><a href="../icode/analysis/TypeFlowAnalysis.scala.html#726671" title="Inliners.this.global.analysis.global.icodes.BasicBlock" id="3320283">_</a>, <a href="../icode/analysis/TypeFlowAnalysis.scala.html#726673" title="Inliners.this.global.analysis.global.Symbol" id="765236">receiver</a>, <a href="../icode/analysis/TypeFlowAnalysis.scala.html#726675" title="Int" id="765237">stackLength</a>, <a href="../icode/analysis/TypeFlowAnalysis.scala.html#726677" title="Inliners.this.global.analysis.global.Symbol" id="765238">concreteMethod</a><span class="delimiter">)</span> = <a href="#764196" title="=&gt; Inliners.this.global.analysis.MTFAGrowable">tfa</a>.<a href="../../../../collection/MapLike.scala.html#87535" title="(key: Inliners.this.global.analysis.global.icodes.opcodes.CALL_METHOD)Inliners.this.global.analysis.CallsiteInfo">remainingCALLs</a><a href="../icode/analysis/TypeFlowAnalysis.scala.html#619514" title="Inliners.this.global.analysis.CallsiteInfo @unchecked" class="delimiter">(</a><a href="#765234" title="Inliners.this.global.icodes.opcodes.CALL_METHOD">cm</a><span class="delimiter">)</span>
              <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#764649" title="(i: Inliners.this.global.icodes.opcodes.CALL_METHOD, bb: Inliners.this.global.icodes.BasicBlock, receiver: Inliners.this.global.Symbol, stackLength: Int, concreteMethod: Inliners.this.global.Symbol)Boolean">analyzeInc</a><span class="delimiter">(</span><a href="#765234" title="Inliners.this.global.icodes.opcodes.CALL_METHOD">cm</a>, <a href="#765141" title="Inliners.this.global.analysis.global.icodes.BasicBlock">bb</a>, <a href="#765236" title="Inliners.this.global.analysis.global.Symbol">receiver</a>, <a href="#765237" title="Int">stackLength</a>, <a href="#765238" title="Inliners.this.global.analysis.global.Symbol">concreteMethod</a><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">{</span>
                <a href="../../../../util/control/Breaks.scala.html#58517" title="()Nothing">break</a>
              <span class="delimiter">}</span>
            <span class="delimiter">}</span>
          <span class="delimiter">}</span>
        <span class="delimiter">}</span>

        /* As part of inlining, some instructions are moved to a new block.
         *     In detail: the instructions moved to a new block originally appeared after a (by now inlined) callsite.
         *     Their new home is an `afterBlock` created by `doInline()` to that effect.
         *     Each block in staleIn is one such `afterBlock`.
         *
         * Some of those instructions may be CALL_METHOD possibly tracked in `remainingCALLs`
         * (with an entry still noting the old containing block). However, that causes no problem:
         *
         *   (1) such callsites won't be analyzed for inlining by `analyzeInc()` (*in this iteration*)
         *       because of the `break` that abandons the original basic block where it was contained.
         *
         *   (2) Additionally, its new containing block won't be visited either (*in this iteration*)
         *       because the new blocks don't show up in the linearization computed before inlinings started:
         *       `for(bb &lt;- tfa.callerLin; if tfa.preCandidates(bb)) {`
         *
         * For a next iteration, the new home of any instructions that have moved
         * will be tracked properly in `remainingCALLs` after `MTFAGrowable.reinit()` puts on radar their new homes.
         *
         */
        <span title="Unit" class="keyword">if</span><span class="delimiter">(</span><a href="#764641" title="Boolean">retry</a><span class="delimiter">)</span> <span class="delimiter">{</span>
          <span class="keyword">for</span><span class="delimiter">(</span><a title="Inliners.this.global.icodes.BasicBlock" id="765289">afterBlock</a> &lt;- <a href="../../../../collection/IterableLike.scala.html#58562" title="(f: Inliners.this.global.icodes.BasicBlock =&gt; Unit)Unit">staleIn</a><span class="delimiter">)</span> <span class="delimiter">{</span>
            <span class="keyword">val</span> <a title="List[Inliners.this.global.icodes.opcodes.CALL_METHOD]" id="765290">justCALLsAfter</a> = <a href="#765289" title="Inliners.this.global.icodes.BasicBlock">afterBlock</a>.<a href="../icode/BasicBlocks.scala.html#695929" title="=&gt; List[Inliners.this.global.icodes.Instruction]">toList</a> <a href="../../../../collection/TraversableLike.scala.html#58075" title="(pf: PartialFunction[Inliners.this.global.icodes.Instruction,Inliners.this.global.icodes.opcodes.CALL_METHOD])(implicit bf: scala.collection.generic.CanBuildFrom[List[Inliners.this.global.icodes.Instruction],Inliners.this.global.icodes.opcodes.CALL_METHOD,List[Inliners.this.global.icodes.opcodes.CALL_METHOD]])List[Inliners.this.global.icodes.opcodes.CALL_METHOD]">collect</a> <a title="anonymous class $anonfun extends scala.runtime.AbstractPartialFunction[Inliners.this.global.icodes.Instruction,Inliners.this.global.icodes.opcodes.CALL_METHOD] with Serializable" id="765317" class="delimiter">{</a> <span class="keyword">case</span> <a href="#3320289" title="B1" id="3320302">c</a> : opcodes.CALL_METHOD =&gt; <a href="#3320295" title="(x: B1)B1">c</a> <span class="delimiter">}</span>
            <span class="keyword">for</span><span class="delimiter">(</span><a title="Inliners.this.global.icodes.opcodes.CALL_METHOD" id="765391">ia</a> &lt;- <a href="../../../../collection/immutable/List.scala.html#62719" title="(f: Inliners.this.global.icodes.opcodes.CALL_METHOD =&gt; Option[Inliners.this.global.analysis.CallsiteInfo])Unit">justCALLsAfter</a><span class="delimiter">)</span> <span class="delimiter">{</span> <a href="#764196" title="=&gt; Inliners.this.global.analysis.MTFAGrowable">tfa</a>.<a href="../icode/analysis/TypeFlowAnalysis.scala.html#726750" title="=&gt; scala.collection.mutable.Map[Inliners.this.global.analysis.global.icodes.opcodes.CALL_METHOD,Inliners.this.global.analysis.CallsiteInfo]">remainingCALLs</a>.<a href="../../../../collection/mutable/MapLike.scala.html#87625" title="(key: Inliners.this.global.analysis.global.icodes.opcodes.CALL_METHOD)Option[Inliners.this.global.analysis.CallsiteInfo]">remove</a><span class="delimiter">(</span><a href="#765391" title="Inliners.this.global.icodes.opcodes.CALL_METHOD">ia</a><span class="delimiter">)</span> <span class="delimiter">}</span>
          <span class="delimiter">}</span>
        <span class="delimiter">}</span>

        /*
        if(splicedBlocks.nonEmpty) { // TODO explore (saves time but leads to slightly different inlining decisions)
          // opportunistically perform straightforward inlinings before the next typeflow round
          val savedRetry = retry
          val savedStaleOut = staleOut.toSet; staleOut.clear()
          val savedStaleIn  = staleIn.toSet ; staleIn.clear()
          val howmany = inlineWithoutTFA(splicedBlocks, tfa.knownBeforehand)
          splicedBlocks ++= staleIn
          staleOut.clear(); staleOut ++= savedStaleOut;
          staleIn.clear();  staleIn  ++= savedStaleIn;
          retry = savedRetry
        }
        */

        <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#764196" title="=&gt; Inliners.this.global.analysis.MTFAGrowable">tfa</a>.<a href="../icode/analysis/DataFlowAnalysis.scala.html#720979" title="=&gt; Boolean">stat</a><span class="delimiter">)</span>
          <a href="../../Global.scala.html#537516" title="(msg: =&gt; AnyRef)Unit">log</a><span class="delimiter">(</span><a href="#764637" title="Inliners.this.global.icodes.IMethod">m</a>.<a href="../icode/Members.scala.html#695986" title="=&gt; Inliners.this.global.icodes.global.Symbol">symbol</a>.<a href="../../../../reflect/internal/Symbols.scala.html#411334" title="=&gt; String">fullName</a> <span title="(x$1: Any)String">+</span> <span title="String(&quot; iterations: &quot;)" class="string">&quot; iterations: &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#764196" title="=&gt; Inliners.this.global.analysis.MTFAGrowable">tfa</a>.<a href="../icode/analysis/DataFlowAnalysis.scala.html#720982" title="=&gt; Int">iterations</a> <span title="(x$1: Any)String">+</span> <span title="String(&quot; (size: &quot;)" class="string">&quot; (size: &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#764645" title="Inliner.this.IMethodInfo">caller</a>.<a href="#764688" title="=&gt; Int">length</a> <span title="(x$1: Any)String">+</span> <span title="String(&quot;)&quot;)" class="string">&quot;)&quot;</span><span class="delimiter">)</span>
      <span class="delimiter">}</span>
      <span class="keyword">while</span> <span class="delimiter">(</span><a href="#764641" title="Boolean">retry</a> <a href="../../../../Boolean.scala.html#57826" title="(x: Boolean)Boolean">&amp;&amp;</a> <a href="#764642" title="Int">count</a> <a href="../../../../Int.scala.html#57111" title="(x: Int)Boolean">&lt;</a> <span title="Int(15)">MAX_INLINE_RETRY</span><span class="delimiter">)</span>

      <span class="keyword">for</span><span class="delimiter">(</span><a title="Inliners.this.global.analysis.global.icodes.opcodes.CALL_METHOD" id="765417">inlFail</a> &lt;- <a href="#764196" title="=&gt; Inliners.this.global.analysis.MTFAGrowable">tfa</a>.<a href="../../../../collection/IterableLike.scala.html#58562" title="(f: Inliners.this.global.analysis.global.icodes.opcodes.CALL_METHOD =&gt; Any)Unit">warnIfInlineFails</a><span class="delimiter">)</span> <span class="delimiter">{</span>
        <a href="#764185" title="(pos: Inliners.this.global.Position, msg: String)Any">warn</a><span class="delimiter">(</span><a href="#765417" title="Inliners.this.global.analysis.global.icodes.opcodes.CALL_METHOD">inlFail</a>.<a href="../icode/Opcodes.scala.html#695883" title="=&gt; scala.reflect.internal.util.Position">pos</a>, <span title="String(&quot;At the end of the day, could not inline @inline-marked method &quot;)" class="string">&quot;At the end of the day, could not inline @inline-marked method &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#765417" title="Inliners.this.global.analysis.global.icodes.opcodes.CALL_METHOD">inlFail</a>.<a href="../icode/Opcodes.scala.html#705592" title="=&gt; Inliners.this.global.analysis.global.icodes.global.Symbol">method</a>.<a href="../../../../reflect/internal/Symbols.scala.html#411322" title="=&gt; Inliners.this.global.analysis.global.icodes.global.Name">originalName</a>.<a href="../../../../reflect/internal/Names.scala.html#410422" title="=&gt; String">decode</a><span class="delimiter">)</span>
      <span class="delimiter">}</span>

      <a href="#764637" title="Inliners.this.global.icodes.IMethod">m</a>.<a href="../icode/Members.scala.html#696042" title="()Unit">normalize</a>
      <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#764639" title="Int">sizeBeforeInlining</a> <a href="../../../../Int.scala.html#57125" title="(x: Int)Boolean">&gt;</a> <span title="Int(0)" class="int">0</span><span class="delimiter">)</span> <span class="delimiter">{</span>
        <span class="keyword">val</span> <a title="Int" id="765423">instrAfterInlining</a> = <a href="#764637" title="Inliners.this.global.icodes.IMethod">m</a>.<a href="../icode/Members.scala.html#695989" title="=&gt; Inliners.this.global.icodes.Code">code</a>.<a href="../icode/Members.scala.html#696096" title="=&gt; Int">instructionCount</a>
        <span class="keyword">val</span> <a title="String" id="765424">prefix</a> = <span title="String" class="keyword">if</span> <span class="delimiter">(</span><span class="delimiter">(</span><a href="#765423" title="Int">instrAfterInlining</a> <a href="../../../../Int.scala.html#57125" title="(x: Int)Boolean">&gt;</a> <span title="Int(2)" class="int">2</span> <a href="../../../../Int.scala.html#57168" title="(x: Int)Int">*</a> <a href="#764640" title="Int">instrBeforeInlining</a><span class="delimiter">)</span> <a href="../../../../Boolean.scala.html#57826" title="(x: Boolean)Boolean">&amp;&amp;</a> <span class="delimiter">(</span><a href="#765423" title="Int">instrAfterInlining</a> <a href="../../../../Int.scala.html#57125" title="(x: Int)Boolean">&gt;</a> <span title="Int(200)" class="int">200</span><span class="delimiter">)</span><span class="delimiter">)</span> <span title="String(&quot;!!&quot;)" class="string">&quot;!!&quot;</span> <span class="keyword">else</span> <span title="String(&quot;&quot;)" class="string">&quot;&quot;</span>
        <span class="keyword">val</span> <a title="Int" id="765425">inlinings</a> = <a href="#764645" title="Inliner.this.IMethodInfo">caller</a>.<a href="#764699" title="=&gt; Int">inlinedCalls</a>
        <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#765425" title="Int">inlinings</a> <a href="../../../../Int.scala.html#57125" title="(x: Int)Boolean">&gt;</a> <span title="Int(0)" class="int">0</span><span class="delimiter">)</span> <span class="delimiter">{</span>
          <span class="keyword">val</span> <a title="String" id="765442">s1</a>      = <a href="../../../../StringContext.scala.html#56629" title="(args: Any*)String">s</a>&quot;instructions $<a href="#764640" title="Int">instrBeforeInlining</a> -&gt; $<a href="#765423" title="Int">instrAfterInlining</a><span class="string">&quot;</span>
          <span class="keyword">val</span> <a title="String" id="765443">s2</a>      = <span title="String" class="keyword">if</span> <span class="delimiter">(</span><a href="#764639" title="Int">sizeBeforeInlining</a> <a href="../../../../Int.scala.html#57097" title="(x: Int)Boolean">==</a> <a href="#764637" title="Inliners.this.global.icodes.IMethod">m</a>.<a href="../icode/Members.scala.html#695989" title="=&gt; Inliners.this.global.icodes.Code">code</a>.<a href="../icode/Members.scala.html#696095" title="=&gt; Int">blockCount</a><span class="delimiter">)</span> <span title="String(&quot;&quot;)" class="string">&quot;&quot;</span> <span class="keyword">else</span> <a href="../../../../StringContext.scala.html#56629" title="(args: Any*)String">s</a>&quot;, blocks $<a href="#764639" title="Int">sizeBeforeInlining</a> -&gt; $<span class="delimiter">{</span><a href="#764637" title="Inliners.this.global.icodes.IMethod">m</a>.<a href="../icode/Members.scala.html#695989" title="=&gt; Inliners.this.global.icodes.Code">code</a>.<a href="../icode/Members.scala.html#696095" title="=&gt; Int">blockCount</a><span class="delimiter">}</span><span class="string">&quot;</span>
          <span class="keyword">val</span> <a title="List[String]" id="765444">callees</a> = <a href="#764644" title="scala.collection.mutable.Map[Inliners.this.global.Symbol,Int]">inlinedMethodCount</a>.<a href="../../../../collection/TraversableOnce.scala.html#58263" title="=&gt; List[(Inliners.this.global.Symbol, Int)]">toList</a> <a href="../../../../collection/TraversableLike.scala.html#58063" title="(f: ((Inliners.this.global.Symbol, Int)) =&gt; String)(implicit bf: scala.collection.generic.CanBuildFrom[List[(Inliners.this.global.Symbol, Int)],String,List[String]])List[String]">map</a> <a href="#765473" title="(Inliners.this.global.Symbol, Int)" class="delimiter">{</a> <span class="keyword">case</span> <span class="delimiter">(</span><a href="../../../../Tuple2.scala.html#60635" title="Inliners.this.global.Symbol" id="765476">k</a>, <a href="../../../../Tuple2.scala.html#60637" title="Int" id="765477">v</a><span class="delimiter">)</span> =&gt; <a href="#765476" title="Inliners.this.global.Symbol">k</a>.<a href="../../../../reflect/internal/Symbols.scala.html#411505" title="=&gt; String">fullNameString</a> <a href="#3320310" title="(x: String)String">+</a> <span class="delimiter">(</span> <span title="Any" class="keyword">if</span> <span class="delimiter">(</span><a href="#765477" title="Int">v</a> <a href="../../../../Int.scala.html#57097" title="(x: Int)Boolean">==</a> <span title="Int(1)" class="int">1</span><span class="delimiter">)</span> <span title="String(&quot;&quot;)" class="string">&quot;&quot;</span> <span class="keyword">else</span> <span title="String(&quot;/&quot;)" class="string">&quot;/&quot;</span> <span title="(x$1: Any)String">+</span> <a href="#765477" title="Int">v</a> <span class="delimiter">)</span> <span class="delimiter">}</span>

          <a href="#764187" title="(what: String, main: =&gt; String, comment: =&gt; String)Unit">inlineLog</a><span class="delimiter">(</span><span title="String(&quot;inlined&quot;)" class="string">&quot;inlined&quot;</span>, <a href="#764637" title="Inliners.this.global.icodes.IMethod">m</a>.<a href="../icode/Members.scala.html#695986" title="=&gt; Inliners.this.global.icodes.global.Symbol">symbol</a>.<a href="../../../../reflect/internal/Symbols.scala.html#411334" title="=&gt; String">fullName</a>, <a href="#765444" title="List[String]">callees</a>.<a href="../../../../collection/SeqLike.scala.html#58872" title="(implicit ord: scala.math.Ordering[String])List[String]">sorted</a>.<a href="../../../../collection/TraversableOnce.scala.html#58282" title="(start: String, sep: String, end: String)String">mkString</a><span class="delimiter">(</span><a href="#765425" title="Int">inlinings</a> <a href="../../../../Int.scala.html#57087" title="(x: String)String">+</a> <span title="String(&quot; inlined: &quot;)" class="string">&quot; inlined: &quot;</span>, <span title="String(&quot;, &quot;)" class="string">&quot;, &quot;</span>, <span title="String(&quot;&quot;)" class="string">&quot;&quot;</span><span class="delimiter">)</span><span class="delimiter">)</span>
          <a href="#764187" title="(what: String, main: =&gt; String, comment: =&gt; String)Unit">inlineLog</a><span class="delimiter">(</span><span title="String(&quot;&lt;&lt;tldr&gt;&gt;&quot;)" class="string">&quot;&lt;&lt;tldr&gt;&gt;&quot;</span>, <a href="#764637" title="Inliners.this.global.icodes.IMethod">m</a>.<a href="../icode/Members.scala.html#695986" title="=&gt; Inliners.this.global.icodes.global.Symbol">symbol</a>.<a href="../../../../reflect/internal/Symbols.scala.html#411334" title="=&gt; String">fullName</a>, <a href="../../../../StringContext.scala.html#56629" title="(args: Any*)String">s</a>&quot;$<span class="delimiter">{</span><a href="#764637" title="Inliners.this.global.icodes.IMethod">m</a>.<a href="../icode/Members.scala.html#695986" title="=&gt; Inliners.this.global.icodes.global.Symbol">symbol</a>.<a href="../../../../reflect/internal/Symbols.scala.html#411504" title="=&gt; String">nameString</a><span class="delimiter">}</span>: $<a href="#765442" title="String">s1</a>$<a href="#765443" title="String">s2</a><span class="string">&quot;</span><span class="delimiter">)</span>
        <span class="delimiter">}</span>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>

    <span class="keyword">private</span> <span class="keyword">def</span> <a title="(sym: Inliners.this.global.Symbol)Boolean" id="764205">isHigherOrderMethod</a><span class="delimiter">(</span><a title="Inliners.this.global.Symbol" id="765590">sym</a>: <a href="../../../../reflect/internal/Symbols.scala.html#407146" title="Inliners.this.global.Symbol">Symbol</a><span class="delimiter">)</span> = <span class="delimiter">(</span>
         <a href="#765590" title="Inliners.this.global.Symbol">sym</a>.<a href="../../../../reflect/api/Symbols.scala.html#402398" title="=&gt; Boolean">isMethod</a>
      <a href="../../../../Boolean.scala.html#57826" title="(x: Boolean)Boolean">&amp;&amp;</a> <a href="../../Global.scala.html#537711" title="(op: =&gt; Boolean)Boolean">beforeExplicitOuter</a><span class="delimiter">(</span><a href="#765590" title="Inliners.this.global.Symbol">sym</a>.<a href="../../../../reflect/internal/Symbols.scala.html#411367" title="=&gt; Inliners.this.global.Type">info</a>.<a href="../../../../reflect/internal/Types.scala.html#408431" title="=&gt; List[Inliners.this.global.Type]">paramTypes</a> <a href="../../../../collection/LinearSeqOptimized.scala.html#86379" title="(p: Inliners.this.global.Type =&gt; Boolean)Boolean">exists</a> <a href="../../../../reflect/internal/Definitions.scala.html#409021" title="(tp: Inliners.this.global.Type)Boolean">isFunctionType</a><span class="delimiter">)</span> // was &quot;at erasurePhase.prev&quot;
    <span class="delimiter">)</span>

    /** Should method 'sym' being called in 'receiver' be loaded from disk? */
    <span class="keyword">def</span> <a title="(sym: Inliners.this.global.Symbol, receiver: Inliners.this.global.Symbol)Boolean" id="764206">shouldLoadImplFor</a><span class="delimiter">(</span><a title="Inliners.this.global.Symbol" id="764866">sym</a>: <a href="../../../../reflect/internal/Symbols.scala.html#407146" title="Inliners.this.global.Symbol">Symbol</a>, <a title="Inliners.this.global.Symbol" id="764867">receiver</a>: <a href="../../../../reflect/internal/Symbols.scala.html#407146" title="Inliners.this.global.Symbol">Symbol</a><span class="delimiter">)</span>: <a href="../../../../Boolean.scala.html#1425" title="Boolean">Boolean</a> = <span class="delimiter">{</span>
      <span class="keyword">def</span> <a title="=&gt; Boolean" id="765608">alwaysLoad</a>    = <span class="delimiter">(</span><a href="#764867" title="Inliners.this.global.Symbol">receiver</a>.<a href="../../../../reflect/internal/Symbols.scala.html#411447" title="=&gt; Inliners.this.global.Symbol">enclosingPackage</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="../../../../reflect/internal/Definitions.scala.html#408644" title="=&gt; Inliners.this.global.ModuleSymbol">RuntimePackage</a><span class="delimiter">)</span> <a href="../../../../Boolean.scala.html#57825" title="(x: Boolean)Boolean">||</a> <span class="delimiter">(</span><a href="#764867" title="Inliners.this.global.Symbol">receiver</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="../../../../reflect/internal/Definitions.scala.html#408738" title="=&gt; Inliners.this.global.ModuleSymbol">PredefModule</a>.<a href="../../../../reflect/internal/Symbols.scala.html#411737" title="=&gt; Inliners.this.global.Symbol">moduleClass</a><span class="delimiter">)</span>
      <span class="keyword">def</span> <a title="=&gt; Boolean" id="765609">loadCondition</a> = <a href="#764866" title="Inliners.this.global.Symbol">sym</a>.<a href="../../../../reflect/internal/Symbols.scala.html#411298" title="=&gt; Boolean">isEffectivelyFinal</a> <a href="../../../../Boolean.scala.html#57826" title="(x: Boolean)Boolean">&amp;&amp;</a> <a href="#622828" title="(sym: Inliners.this.global.Symbol)Boolean">isMonadicMethod</a><span class="delimiter">(</span><a href="#764866" title="Inliners.this.global.Symbol">sym</a><span class="delimiter">)</span> <a href="../../../../Boolean.scala.html#57826" title="(x: Boolean)Boolean">&amp;&amp;</a> <a href="#764205" title="(sym: Inliners.this.global.Symbol)Boolean">isHigherOrderMethod</a><span class="delimiter">(</span><a href="#764866" title="Inliners.this.global.Symbol">sym</a><span class="delimiter">)</span>

      <span class="keyword">val</span> <a title="Boolean" id="765610">res</a> = <a href="#622833" title="(sym: Inliners.this.global.Symbol)Boolean">hasInline</a><span class="delimiter">(</span><a href="#764866" title="Inliners.this.global.Symbol">sym</a><span class="delimiter">)</span> <a href="../../../../Boolean.scala.html#57825" title="(x: Boolean)Boolean">||</a> <a href="#765608" title="=&gt; Boolean">alwaysLoad</a> <a href="../../../../Boolean.scala.html#57825" title="(x: Boolean)Boolean">||</a> <a href="#765609" title="=&gt; Boolean">loadCondition</a>
      <a href="../../Global.scala.html#537517" title="(msg: =&gt; String)Unit">debuglog</a><span class="delimiter">(</span><span title="String(&quot;shouldLoadImplFor: &quot;)" class="string">&quot;shouldLoadImplFor: &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#764867" title="Inliners.this.global.Symbol">receiver</a> <span title="(x$1: Any)String">+</span> <span title="String(&quot;.&quot;)" class="string">&quot;.&quot;</span> <span title="(x$1: Any)String">+</span> <a href="#764866" title="Inliners.this.global.Symbol">sym</a> <span title="(x$1: Any)String">+</span> <span title="String(&quot;: &quot;)" class="string">&quot;: &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#765610" title="Boolean">res</a><span class="delimiter">)</span>
      <a href="#765610" title="Boolean">res</a>
    <span class="delimiter">}</span>

    <span class="keyword">class</span> <a title="class IMethodInfo extends Object" id="764207">IMethodInfo</a><a href="#764207" title="Inliner.this.IMethodInfo" class="delimiter">(</a><span class="keyword">val</span> <a title="Inliners.this.global.icodes.IMethod" id="764705">m</a>: <a href="../icode/Members.scala.html#614927" title="Inliners.this.global.icodes.IMethod">IMethod</a><span class="delimiter">)</span> <span class="delimiter">{</span>
      <span class="keyword">override</span> <span class="keyword">def</span> <a title="()String" id="764671">toString</a> = <a href="#764705" title="=&gt; Inliners.this.global.icodes.IMethod">m</a>.<a href="../icode/Members.scala.html#696038" title="()String">toString</a>

      <span class="keyword">val</span> <a title="Inliners.this.global.icodes.global.Symbol" id="764672">sym</a>           = <a href="#764705" title="=&gt; Inliners.this.global.icodes.IMethod">m</a>.<a href="../icode/Members.scala.html#695986" title="=&gt; Inliners.this.global.icodes.global.Symbol">symbol</a>
      <span class="keyword">val</span> <a title="IMethodInfo.this.sym.NameType" id="764674">name</a>          = <a href="#764672" title="=&gt; Inliners.this.global.icodes.global.Symbol">sym</a>.<a href="../../../../reflect/internal/Symbols.scala.html#411087" title="=&gt; IMethodInfo.this.sym.NameType">name</a>
      <span class="keyword">def</span> <a title="=&gt; Inliners.this.global.icodes.global.Symbol" id="764676">owner</a>         = <a href="#764672" title="=&gt; Inliners.this.global.icodes.global.Symbol">sym</a>.<a href="../../../../reflect/internal/Symbols.scala.html#411315" title="=&gt; Inliners.this.global.icodes.global.Symbol">owner</a>
      <span class="keyword">def</span> <a title="=&gt; List[Inliners.this.global.icodes.global.Type]" id="764677">paramTypes</a>    = <a href="#764672" title="=&gt; Inliners.this.global.icodes.global.Symbol">sym</a>.<a href="../../../../reflect/internal/Symbols.scala.html#411367" title="=&gt; Inliners.this.global.icodes.global.Type">info</a>.<a href="../../../../reflect/internal/Types.scala.html#408431" title="=&gt; List[Inliners.this.global.icodes.global.Type]">paramTypes</a>
      <span class="keyword">def</span> <a title="=&gt; Int" id="764678">minimumStack</a>  = <a href="#764677" title="=&gt; List[Inliners.this.global.icodes.global.Type]">paramTypes</a>.<a href="../../../../collection/LinearSeqOptimized.scala.html#86373" title="=&gt; Int">length</a> <a href="../../../../Int.scala.html#57154" title="(x: Int)Int">+</a> <span title="Int(1)" class="int">1</span>

      <span class="keyword">def</span> <a title="=&gt; Boolean" id="764679">isBridge</a>      = <a href="#764672" title="=&gt; Inliners.this.global.icodes.global.Symbol">sym</a>.<a href="../../../../reflect/internal/Symbols.scala.html#411198" title="=&gt; Boolean">isBridge</a>
      <span class="keyword">val</span> <a title="Boolean" id="764680">isInClosure</a>   = <a href="#622827" title="(cls: Inliners.this.global.Symbol)Boolean">isClosureClass</a><span class="delimiter">(</span><a href="#764676" title="=&gt; Inliners.this.global.icodes.global.Symbol">owner</a><span class="delimiter">)</span>
      <span class="keyword">val</span> <a title="Boolean" id="764682">isHigherOrder</a> = <a href="#764205" title="(sym: Inliners.this.global.Symbol)Boolean">isHigherOrderMethod</a><span class="delimiter">(</span><a href="#764672" title="=&gt; Inliners.this.global.icodes.global.Symbol">sym</a><span class="delimiter">)</span>
      <span class="keyword">def</span> <a title="=&gt; Boolean" id="764684">isMonadic</a>     = <a href="#622828" title="(sym: Inliners.this.global.Symbol)Boolean">isMonadicMethod</a><span class="delimiter">(</span><a href="#764672" title="=&gt; Inliners.this.global.icodes.global.Symbol">sym</a><span class="delimiter">)</span>

      <span class="keyword">def</span> <a title="=&gt; List[Inliners.this.global.icodes.ExceptionHandler]" id="764685">handlers</a>      = <a href="#764705" title="=&gt; Inliners.this.global.icodes.IMethod">m</a>.<a href="../icode/Members.scala.html#696006" title="=&gt; List[Inliners.this.global.icodes.ExceptionHandler]">exh</a>
      <span class="keyword">def</span> <a title="=&gt; List[Inliners.this.global.icodes.BasicBlock]" id="764686">blocks</a>        = <a href="#764705" title="=&gt; Inliners.this.global.icodes.IMethod">m</a>.<a href="../icode/Members.scala.html#695995" title="=&gt; List[Inliners.this.global.icodes.BasicBlock]">blocks</a>
      <span class="keyword">def</span> <a title="=&gt; List[Inliners.this.global.icodes.Local]" id="764687">locals</a>        = <a href="#764705" title="=&gt; Inliners.this.global.icodes.IMethod">m</a>.<a href="../icode/Members.scala.html#696021" title="=&gt; List[Inliners.this.global.icodes.Local]">locals</a>
      <span class="keyword">def</span> <a title="=&gt; Int" id="764688">length</a>        = <a href="#764686" title="=&gt; List[Inliners.this.global.icodes.BasicBlock]">blocks</a>.<a href="../../../../collection/LinearSeqOptimized.scala.html#86373" title="=&gt; Int">length</a>
      <span class="keyword">def</span> <a title="=&gt; List[Inliners.this.global.icodes.BasicBlock]" id="764689">openBlocks</a>    = <a href="#764686" title="=&gt; List[Inliners.this.global.icodes.BasicBlock]">blocks</a> <a href="../../../../collection/TraversableLike.scala.html#58074" title="(p: Inliners.this.global.icodes.BasicBlock =&gt; Boolean)List[Inliners.this.global.icodes.BasicBlock]">filterNot</a> <span class="delimiter">(</span><a href="#765639" title="Inliners.this.global.icodes.BasicBlock">_</a>.<a href="../icode/BasicBlocks.scala.html#695907" title="=&gt; Boolean">closed</a><span class="delimiter">)</span>
      <span class="keyword">def</span> <a title="=&gt; List[Inliners.this.global.icodes.Instruction]" id="764690">instructions</a>  = <a href="#764705" title="=&gt; Inliners.this.global.icodes.IMethod">m</a>.<a href="../icode/Members.scala.html#695989" title="=&gt; Inliners.this.global.icodes.Code">code</a>.<a href="../icode/Members.scala.html#696094" title="=&gt; List[Inliners.this.global.icodes.Instruction]">instructions</a>
      // def linearized    = linearizer linearize m

      <span class="keyword">def</span> <a title="=&gt; Boolean" id="764691">isSmall</a>         = <span class="delimiter">(</span><a href="#764688" title="=&gt; Int">length</a> <a href="../../../../Int.scala.html#57118" title="(x: Int)Boolean">&lt;=</a> <a href="#622822" title="=&gt; Int">SMALL_METHOD_SIZE</a><span class="delimiter">)</span> <a href="../../../../Boolean.scala.html#57826" title="(x: Boolean)Boolean">&amp;&amp;</a> <a href="../../../../collection/LinearSeqOptimized.scala.html#86374" title="(n: Int)Inliners.this.global.icodes.BasicBlock">blocks</a><span class="delimiter">(</span><span title="Int(0)" class="int">0</span><span class="delimiter">)</span>.<a href="../icode/BasicBlocks.scala.html#695937" title="=&gt; Int">length</a> <a href="../../../../Int.scala.html#57111" title="(x: Int)Boolean">&lt;</a> <span title="Int(10)" class="int">10</span>
      <span class="keyword">def</span> <a title="=&gt; Boolean" id="764692">isLarge</a>         = <a href="#764688" title="=&gt; Int">length</a> <a href="../../../../Int.scala.html#57125" title="(x: Int)Boolean">&gt;</a> <span title="Int(16)">MAX_INLINE_SIZE</span>
      <span class="keyword">def</span> <a title="=&gt; Boolean" id="764693">isRecursive</a>     = <a href="#764705" title="=&gt; Inliners.this.global.icodes.IMethod">m</a>.<a href="../icode/Members.scala.html#696015" title="=&gt; Boolean">recursive</a>
      <span class="keyword">def</span> <a title="=&gt; Boolean" id="764694">hasHandlers</a>     = <a href="#764685" title="=&gt; List[Inliners.this.global.icodes.ExceptionHandler]">handlers</a>.<a href="../../../../collection/TraversableOnce.scala.html#58191" title="=&gt; Boolean">nonEmpty</a> <a href="../../../../Boolean.scala.html#57825" title="(x: Boolean)Boolean">||</a> <a href="#764705" title="=&gt; Inliners.this.global.icodes.IMethod">m</a>.<a href="../icode/Members.scala.html#696018" title="=&gt; Boolean">bytecodeHasEHs</a>
      <span class="keyword">def</span> <a title="=&gt; Boolean" id="764695">hasClosureParam</a> = <a href="#764677" title="=&gt; List[Inliners.this.global.icodes.global.Type]">paramTypes</a> <a href="../../../../collection/LinearSeqOptimized.scala.html#86379" title="(p: Inliners.this.global.icodes.global.Type =&gt; Boolean)Boolean">exists</a> <span class="delimiter">(</span><a title="Inliners.this.global.icodes.global.Type" id="765672">tp</a> =&gt; <a href="../../../../reflect/internal/Definitions.scala.html#408812" title="(tp: Inliners.this.global.Type)Boolean">isByNameParamType</a><span class="delimiter">(</span><a href="#765672" title="Inliners.this.global.icodes.global.Type">tp</a><span class="delimiter">)</span> <a href="../../../../Boolean.scala.html#57825" title="(x: Boolean)Boolean">||</a> <a href="../../../../reflect/internal/Definitions.scala.html#409021" title="(tp: Inliners.this.global.Type)Boolean">isFunctionType</a><span class="delimiter">(</span><a href="#765672" title="Inliners.this.global.icodes.global.Type">tp</a><span class="delimiter">)</span><span class="delimiter">)</span>

      <span class="keyword">def</span> <a title="=&gt; Boolean" id="764696">isSynchronized</a>         = <a href="#764672" title="=&gt; Inliners.this.global.icodes.global.Symbol">sym</a>.<a href="../../../../reflect/internal/Symbols.scala.html#411234" title="(mask: Long)Boolean">hasFlag</a><span class="delimiter">(</span>Flags.<span title="Long(35184372088832L)">SYNCHRONIZED</span><span class="delimiter">)</span>
      <span class="keyword">def</span> <a title="=&gt; Boolean" id="764697">hasNonFinalizerHandler</a> = <a href="#764685" title="=&gt; List[Inliners.this.global.icodes.ExceptionHandler]">handlers</a> <a href="../../../../collection/LinearSeqOptimized.scala.html#86379" title="(p: Inliners.this.global.icodes.ExceptionHandler =&gt; Boolean)Boolean">exists</a> <a href="#765682" title="Inliners.this.global.icodes.ExceptionHandler" class="delimiter">{</a>
        <span class="keyword">case</span> _: Finalizer =&gt; <a href="#3320318" title="(x: Boolean)Boolean" class="keyword">true</a>
        <span class="keyword">case</span> _            =&gt; <a href="#3320318" title="(x: Boolean)Boolean" class="keyword">false</a>
      <span class="delimiter">}</span>

      // the number of inlined calls in 'm', used by 'isScoreOK'
      <span class="keyword">var</span> <a title="Int" id="764699">inlinedCalls</a> = <span title="Int(0)" class="int">0</span>

      <span class="keyword">def</span> <a title="(ls: List[Inliners.this.global.icodes.Local])Unit" id="764701">addLocals</a><span class="delimiter">(</span><a title="List[Inliners.this.global.icodes.Local]" id="765683">ls</a>: <a href="../../../../collection/immutable/List.scala.html#11952" title="List[Inliners.this.global.icodes.Local]">List</a><span class="delimiter">[</span>Local<span class="delimiter">]</span><span class="delimiter">)</span>  = <a href="#764705" title="=&gt; Inliners.this.global.icodes.IMethod">m</a>.<a href="../icode/Members.scala.html#696022" title="(x$1: List[Inliners.this.global.icodes.Local])Unit">locals</a> <a href="../../../../collection/immutable/List.scala.html#62697" title="(that: scala.collection.GenTraversableOnce[Inliners.this.global.icodes.Local])(implicit bf: scala.collection.generic.CanBuildFrom[List[Inliners.this.global.icodes.Local],Inliners.this.global.icodes.Local,List[Inliners.this.global.icodes.Local]])List[Inliners.this.global.icodes.Local]">++=</a> <a href="#765683" title="List[Inliners.this.global.icodes.Local]">ls</a>
      <span class="keyword">def</span> <a title="(l: Inliners.this.global.icodes.Local)Unit" id="764702">addLocal</a><span class="delimiter">(</span><a title="Inliners.this.global.icodes.Local" id="765755">l</a>: <a href="../icode/Members.scala.html#614928" title="Inliners.this.global.icodes.Local">Local</a><span class="delimiter">)</span>          = <a href="#764701" title="(ls: List[Inliners.this.global.icodes.Local])Unit">addLocals</a><span class="delimiter">(</span><a href="../../../../collection/immutable/List.scala.html#62451" title="(xs: Inliners.this.global.icodes.Local*)List[Inliners.this.global.icodes.Local]">List</a><span class="delimiter">(</span><a href="#765755" title="Inliners.this.global.icodes.Local">l</a><span class="delimiter">)</span><span class="delimiter">)</span>
      <span class="keyword">def</span> <a title="(exhs: List[Inliners.this.global.icodes.ExceptionHandler])Unit" id="764703">addHandlers</a><span class="delimiter">(</span><a title="List[Inliners.this.global.icodes.ExceptionHandler]" id="765763">exhs</a>: <a href="../../../../collection/immutable/List.scala.html#11952" title="List[Inliners.this.global.icodes.ExceptionHandler]">List</a><span class="delimiter">[</span>ExceptionHandler<span class="delimiter">]</span><span class="delimiter">)</span> = <a href="#764705" title="=&gt; Inliners.this.global.icodes.IMethod">m</a>.<a href="../icode/Members.scala.html#696007" title="(x$1: List[Inliners.this.global.icodes.ExceptionHandler])Unit">exh</a> = <a href="#765763" title="List[Inliners.this.global.icodes.ExceptionHandler]">exhs</a> <a href="../../../../collection/immutable/List.scala.html#62688" title="(prefix: List[Inliners.this.global.icodes.ExceptionHandler])List[Inliners.this.global.icodes.ExceptionHandler]">:::</a> <a href="#764705" title="=&gt; Inliners.this.global.icodes.IMethod">m</a>.<a href="../icode/Members.scala.html#696006" title="=&gt; List[Inliners.this.global.icodes.ExceptionHandler]">exh</a>

      /**
       * This method inspects the callee's instructions, finding out the most restrictive accessibility implied by them.
       *
       * Rather than giving up upon encountering an access to a private field `p`, it provisorily admits `p` as &quot;can-be-made-public&quot;, provided:
       *   - `p` is being compiled as part of this compilation run, and
       *   - `p` is synthetic or param-accessor.
       *
       * This method is side-effect free, in particular it lets the invoker decide
       * whether the accessibility of the `toBecomePublic` fields should be changed or not.
       */
      <span class="keyword">def</span> <a title="=&gt; Inliner.this.AccessReq" id="764704">accessRequirements</a>: <a href="#767393" title="Inliner.this.AccessReq">AccessReq</a> = <span class="delimiter">{</span>

        <span class="keyword">var</span> <a title="List[Inliners.this.global.Symbol]" id="765785">toBecomePublic</a>: <a href="../../../../collection/immutable/List.scala.html#11952" title="List[Inliners.this.global.Symbol]">List</a><span class="delimiter">[</span>Symbol<span class="delimiter">]</span> = <a href="../../../../collection/immutable/List.scala.html#11188" title="scala.collection.immutable.Nil.type">Nil</a>

        <span class="keyword">def</span> <a title="(sym: Inliners.this.global.Symbol, cond: Boolean)Inliner.this.NonPublicRefs.Value" id="765786">check</a><span class="delimiter">(</span><a title="Inliners.this.global.Symbol" id="765795">sym</a>: <a href="../../../../reflect/internal/Symbols.scala.html#407146" title="Inliners.this.global.Symbol">Symbol</a>, <a title="Boolean" id="765796">cond</a>: <a href="../../../../Boolean.scala.html#1425" title="Boolean">Boolean</a><span class="delimiter">)</span> =
          <span title="Inliner.this.NonPublicRefs.Value" class="keyword">if</span> <span class="delimiter">(</span><a href="#765796" title="Boolean">cond</a><span class="delimiter">)</span> <a href="#764349" title="=&gt; Inliner.this.NonPublicRefs.Value">Private</a>
          <span class="keyword">else</span> <span title="Inliner.this.NonPublicRefs.Value" class="keyword">if</span> <span class="delimiter">(</span><a href="#765795" title="Inliners.this.global.Symbol">sym</a>.<a href="../../../../reflect/internal/HasFlags.scala.html#409866" title="=&gt; Boolean">isProtected</a><span class="delimiter">)</span> <a href="#764351" title="=&gt; Inliner.this.NonPublicRefs.Value">Protected</a>
          <span class="keyword">else</span> <a href="#764353" title="=&gt; Inliner.this.NonPublicRefs.Value">Public</a>

        <span class="keyword">def</span> <a title="(f: Inliners.this.global.Symbol)Boolean" id="765787">canMakePublic</a><span class="delimiter">(</span><a title="Inliners.this.global.Symbol" id="765797">f</a>: <a href="../../../../reflect/internal/Symbols.scala.html#407146" title="Inliners.this.global.Symbol">Symbol</a><span class="delimiter">)</span>: <a href="../../../../Boolean.scala.html#1425" title="Boolean">Boolean</a> =
          <span class="delimiter">(</span><a href="#764705" title="=&gt; Inliners.this.global.icodes.IMethod">m</a>.<a href="../icode/Members.scala.html#696009" title="=&gt; scala.reflect.internal.util.SourceFile">sourceFile</a> <span title="(x$1: AnyRef)Boolean">ne</span> <a href="../../../../reflect/internal/util/SourceFile.scala.html#22885" title="scala.reflect.internal.util.NoSourceFile.type">NoSourceFile</a><span class="delimiter">)</span> <a href="../../../../Boolean.scala.html#57826" title="(x: Boolean)Boolean">&amp;&amp;</a>
          <span class="delimiter">(</span><a href="#765797" title="Inliners.this.global.Symbol">f</a>.<a href="../../../../reflect/internal/HasFlags.scala.html#409872" title="=&gt; Boolean">isSynthetic</a> <a href="../../../../Boolean.scala.html#57825" title="(x: Boolean)Boolean">||</a> <a href="#765797" title="Inliners.this.global.Symbol">f</a>.<a href="../../../../reflect/internal/HasFlags.scala.html#409862" title="=&gt; Boolean">isParamAccessor</a><span class="delimiter">)</span> <a href="../../../../Boolean.scala.html#57826" title="(x: Boolean)Boolean">&amp;&amp;</a>
          <span class="delimiter">{</span> <a href="#765785" title="List[Inliners.this.global.Symbol]">toBecomePublic</a> = <a href="#765797" title="Inliners.this.global.Symbol">f</a> <a href="../../../../collection/immutable/List.scala.html#62685" title="(x: Inliners.this.global.Symbol)List[Inliners.this.global.Symbol]">::</a> <a href="#765785" title="List[Inliners.this.global.Symbol]">toBecomePublic</a>; <span title="Boolean(true)" class="keyword">true</span> <span class="delimiter">}</span>

        /* A safety check to consider as private, for the purposes of inlining, a public field that:
         *   (1) is defined in an external library, and
         *   (2) can be presumed synthetic (due to a dollar sign in its name).
         * Such field was made public by `doMakePublic()` and we don't want to rely on that,
         * because under other compilation conditions (ie no -optimize) that won't be the case anymore.
         *
         * This allows aggressive intra-library inlining (making public if needed)
         * that does not break inter-library scenarios (see comment for `Inliners`).
         *
         * TODO handle more robustly the case of a trait var changed at the source-level from public to private[this]
         *      (eg by having ICodeReader use unpickler, see SI-5442).

         DISABLED

        def potentiallyPublicized(f: Symbol): Boolean = {
          (m.sourceFile eq NoSourceFile) &amp;&amp; f.name.containsChar('$')
        }
        */

        <span class="keyword">def</span> <a title="(f: Inliners.this.global.Symbol)Inliner.this.NonPublicRefs.Value" id="765788">checkField</a><span class="delimiter">(</span><a title="Inliners.this.global.Symbol" id="765804">f</a>: <a href="../../../../reflect/internal/Symbols.scala.html#407146" title="Inliners.this.global.Symbol">Symbol</a><span class="delimiter">)</span>   = <a href="#765786" title="(sym: Inliners.this.global.Symbol, cond: Boolean)Inliner.this.NonPublicRefs.Value">check</a><span class="delimiter">(</span><a href="#765804" title="Inliners.this.global.Symbol">f</a>, <a href="#765804" title="Inliners.this.global.Symbol">f</a>.<a href="../../../../reflect/internal/HasFlags.scala.html#409863" title="=&gt; Boolean">isPrivate</a> <a href="../../../../Boolean.scala.html#57826" title="(x: Boolean)Boolean">&amp;&amp;</a> <a href="../../../../Boolean.scala.html#57822" title="=&gt; Boolean">!</a><a href="#765787" title="(f: Inliners.this.global.Symbol)Boolean">canMakePublic</a><span class="delimiter">(</span><a href="#765804" title="Inliners.this.global.Symbol">f</a><span class="delimiter">)</span><span class="delimiter">)</span>
        <span class="keyword">def</span> <a title="(n: Inliners.this.global.Symbol)Inliner.this.NonPublicRefs.Value" id="765789">checkSuper</a><span class="delimiter">(</span><a title="Inliners.this.global.Symbol" id="765805">n</a>: <a href="../../../../reflect/internal/Symbols.scala.html#407146" title="Inliners.this.global.Symbol">Symbol</a><span class="delimiter">)</span>   = <a href="#765786" title="(sym: Inliners.this.global.Symbol, cond: Boolean)Inliner.this.NonPublicRefs.Value">check</a><span class="delimiter">(</span><a href="#765805" title="Inliners.this.global.Symbol">n</a>, <a href="#765805" title="Inliners.this.global.Symbol">n</a>.<a href="../../../../reflect/internal/HasFlags.scala.html#409863" title="=&gt; Boolean">isPrivate</a> <a href="../../../../Boolean.scala.html#57825" title="(x: Boolean)Boolean">||</a> <a href="../../../../Boolean.scala.html#57822" title="=&gt; Boolean">!</a><a href="#765805" title="Inliners.this.global.Symbol">n</a>.<a href="../../../../reflect/internal/Symbols.scala.html#411200" title="=&gt; Boolean">isClassConstructor</a><span class="delimiter">)</span>
        <span class="keyword">def</span> <a title="(n: Inliners.this.global.Symbol)Inliner.this.NonPublicRefs.Value" id="765790">checkMethod</a><span class="delimiter">(</span><a title="Inliners.this.global.Symbol" id="765806">n</a>: <a href="../../../../reflect/internal/Symbols.scala.html#407146" title="Inliners.this.global.Symbol">Symbol</a><span class="delimiter">)</span>  = <a href="#765786" title="(sym: Inliners.this.global.Symbol, cond: Boolean)Inliner.this.NonPublicRefs.Value">check</a><span class="delimiter">(</span><a href="#765806" title="Inliners.this.global.Symbol">n</a>, <a href="#765806" title="Inliners.this.global.Symbol">n</a>.<a href="../../../../reflect/internal/HasFlags.scala.html#409863" title="=&gt; Boolean">isPrivate</a><span class="delimiter">)</span>

        <span class="keyword">def</span> <a title="(i: Inliners.this.global.icodes.Instruction)Inliner.this.NonPublicRefs.Value" id="765791">getAccess</a><span class="delimiter">(</span><a title="Inliners.this.global.icodes.Instruction" id="765807">i</a>: <a href="../icode/Opcodes.scala.html#614966" title="Inliners.this.global.icodes.Instruction">Instruction</a><span class="delimiter">)</span> = <a href="#765807" title="Inliners.this.global.icodes.Instruction">i</a> <span class="keyword">match</span> <span class="delimiter">{</span>
          <span class="keyword">case</span> CALL_METHOD<a href="#3320323" title="Boolean" id="3320326" class="delimiter">(</a><a href="../icode/Opcodes.scala.html#705592" title="Inliners.this.global.icodes.global.Symbol" id="765810">n</a>, SuperCall<a href="../icode/Opcodes.scala.html#705594" title="Inliners.this.global.icodes.opcodes.InvokeStyle" id="3320329" class="delimiter">(</a><a href="../icode/Opcodes.scala.html#705550" title="Inliners.this.global.icodes.global.Name" id="3320327">_</a><span class="delimiter">)</span><span class="delimiter">)</span> =&gt; <a href="#765789" title="(n: Inliners.this.global.Symbol)Inliner.this.NonPublicRefs.Value">checkSuper</a><a href="#3320341" title="(x: Inliner.this.NonPublicRefs.Value)Inliner.this.NonPublicRefs.Value" class="delimiter">(</a><a href="#765810" title="Inliners.this.global.icodes.global.Symbol">n</a><span class="delimiter">)</span>
          <span class="keyword">case</span> CALL_METHOD<span class="delimiter">(</span><a href="../icode/Opcodes.scala.html#705592" title="Inliners.this.global.icodes.global.Symbol" id="765814">n</a>, <a href="../icode/Opcodes.scala.html#705594" title="Inliners.this.global.icodes.opcodes.InvokeStyle" id="3320330">_</a><span class="delimiter">)</span>            =&gt; <a href="#765790" title="(n: Inliners.this.global.Symbol)Inliner.this.NonPublicRefs.Value">checkMethod</a><a href="#3320341" title="(x: Inliner.this.NonPublicRefs.Value)Inliner.this.NonPublicRefs.Value" class="delimiter">(</a><a href="#765814" title="Inliners.this.global.icodes.global.Symbol">n</a><span class="delimiter">)</span>
          <span class="keyword">case</span> LOAD_FIELD<a href="#3320323" title="Inliner.this.NonPublicRefs.Value" id="3320335" class="delimiter">(</a><a href="../icode/Opcodes.scala.html#706266" title="Inliners.this.global.icodes.global.Symbol" id="765817">f</a>, <a href="../icode/Opcodes.scala.html#706268" title="Boolean" id="3320333">_</a><span class="delimiter">)</span>             =&gt; <a href="#765788" title="(f: Inliners.this.global.Symbol)Inliner.this.NonPublicRefs.Value">checkField</a><a href="#3320341" title="(x: Inliner.this.NonPublicRefs.Value)Inliner.this.NonPublicRefs.Value" class="delimiter">(</a><a href="#765817" title="Inliners.this.global.icodes.global.Symbol">f</a><span class="delimiter">)</span>
          <span class="keyword">case</span> STORE_FIELD<a href="#3320323" title="Inliner.this.NonPublicRefs.Value" id="3320338" class="delimiter">(</a><a href="../icode/Opcodes.scala.html#702957" title="Inliners.this.global.icodes.global.Symbol" id="765820">f</a>, <a href="../icode/Opcodes.scala.html#702959" title="Boolean" id="3320336">_</a><span class="delimiter">)</span>            =&gt; <a href="#765788" title="(f: Inliners.this.global.Symbol)Inliner.this.NonPublicRefs.Value">checkField</a><a href="#3320341" title="(x: Inliner.this.NonPublicRefs.Value)Inliner.this.NonPublicRefs.Value" class="delimiter">(</a><a href="#765820" title="Inliners.this.global.icodes.global.Symbol">f</a><span class="delimiter">)</span>
          <span class="keyword">case</span> _                            =&gt; <a href="#3320341" title="(x: Inliner.this.NonPublicRefs.Value)Inliner.this.NonPublicRefs.Value">Public</a>
        <span class="delimiter">}</span>

        <span class="keyword">var</span> <a title="Inliner.this.NonPublicRefs.Value" id="765792">seen</a> = <a href="#764353" title="=&gt; Inliner.this.NonPublicRefs.Value">Public</a>
        <span class="keyword">val</span> <a title="Iterator[Inliners.this.global.icodes.Instruction]" id="765793">iter</a> = <a href="#764690" title="=&gt; List[Inliners.this.global.icodes.Instruction]">instructions</a>.<a href="../../../../collection/LinearSeqLike.scala.html#86318" title="=&gt; Iterator[Inliners.this.global.icodes.Instruction]">iterator</a>
        <span title="Unit" class="keyword">while</span><span class="delimiter">(</span><span class="delimiter">(</span><a href="#765792" title="Inliner.this.NonPublicRefs.Value">seen</a> <span title="(x$1: AnyRef)Boolean">ne</span> <a href="#764349" title="=&gt; Inliner.this.NonPublicRefs.Value">Private</a><span class="delimiter">)</span> <a href="../../../../Boolean.scala.html#57826" title="(x: Boolean)Boolean">&amp;&amp;</a> <a href="#765793" title="Iterator[Inliners.this.global.icodes.Instruction]">iter</a>.<a href="../../../../collection/Iterator.scala.html#66747" title="=&gt; Boolean">hasNext</a><span class="delimiter">)</span> <a href="#765794" title="()Unit" class="delimiter">{</a>
          <span class="keyword">val</span> <a title="Inliners.this.global.icodes.Instruction" id="765822">i</a> = <a href="#765793" title="Iterator[Inliners.this.global.icodes.Instruction]">iter</a>.<a href="../../../../collection/Iterator.scala.html#66748" title="()Inliners.this.global.icodes.Instruction">next</a><span class="delimiter">(</span><span class="delimiter">)</span>
          <a href="#765791" title="(i: Inliners.this.global.icodes.Instruction)Inliner.this.NonPublicRefs.Value">getAccess</a><span title="Unit" class="delimiter">(</span><a href="#765822" title="Inliners.this.global.icodes.Instruction">i</a><span class="delimiter">)</span> <span class="keyword">match</span> <span class="delimiter">{</span>
            <span class="keyword">case</span> <a href="#764349" title="Unit" id="3320354">Private</a>    =&gt;
              <a href="#764187" title="(what: String, main: =&gt; String, comment: =&gt; String)Unit">inlineLog</a><span class="delimiter">(</span><span title="String(&quot;access&quot;)" class="string">&quot;access&quot;</span>, <a href="../../../../StringContext.scala.html#56629" title="(args: Any*)String">s</a>&quot;instruction $<a href="#765822" title="Inliners.this.global.icodes.Instruction">i</a><span class="string"> requires private access&quot;</span>, <span title="String(&quot;pos=&quot;)" class="string">&quot;pos=&quot;</span> <span title="(x$1: Any)String">+</span> <a href="#765822" title="Inliners.this.global.icodes.Instruction">i</a>.<a href="../icode/Opcodes.scala.html#695883" title="=&gt; scala.reflect.internal.util.Position">pos</a><span class="delimiter">)</span>
              <a href="#765785" title="List[Inliners.this.global.Symbol]">toBecomePublic</a> = <a href="../../../../collection/immutable/List.scala.html#11188" title="scala.collection.immutable.Nil.type">Nil</a>
              <a href="#765792" title="Inliner.this.NonPublicRefs.Value">seen</a> = <a href="#764349" title="=&gt; Inliner.this.NonPublicRefs.Value">Private</a>
            <span class="keyword">case</span> <a href="#764351" title="Unit" id="3320355">Protected</a>  =&gt; <a href="#765792" title="Inliner.this.NonPublicRefs.Value">seen</a> = <a href="#764351" title="=&gt; Inliner.this.NonPublicRefs.Value">Protected</a>
            <span class="keyword">case</span> _          =&gt; <a href="#3320359" title="(x: Unit)Unit" class="delimiter">(</a><span class="delimiter">)</span>
          <span class="delimiter">}</span>
        <span class="delimiter">}</span>

        <a href="#767393" title="(accessNeeded: Inliner.this.NonPublicRefs.Value, toBecomePublic: List[Inliners.this.global.Symbol])Inliner.this.AccessReq">AccessReq</a><span class="delimiter">(</span><a href="#765792" title="Inliner.this.NonPublicRefs.Value">seen</a>, <a href="#765785" title="List[Inliners.this.global.Symbol]">toBecomePublic</a><span class="delimiter">)</span>
      <span class="delimiter">}</span>

    <span class="delimiter">}</span>

    /**
     * Classifies a pair (caller, callee) into one of four categories:
     *
     *   (a) inlining should be performed, classified in turn into:
     *       (a.1) `InlineableAtThisCaller`: unconditionally at this caller
     *       (a.2) `FeasibleInline`: it only remains for certain access requirements to be met (see `IMethodInfo.accessRequirements()`)
     *
     *   (b) inlining shouldn't be performed, classified in turn into:
     *       (b.1) `DontInlineHere`: indicates that this particular occurrence of the callee at the caller shouldn't be inlined.
     *                - Nothing is said about the outcome for other callers, or for other occurrences of the callee for the same caller.
     *                - In particular inlining might be possible, but heuristics gave a low score for it.
     *       (b.2) `NeverSafeToInline`: the callee can't be inlined anywhere, irrespective of caller.
     *
     * The classification above is computed by `isStampedForInlining()` based on which `analyzeInc()` goes on to:
     *   - either log the reason for failure --- case (b) ---,
     *   - or perform inlining --- case (a) ---.
     */
    <span class="keyword">sealed</span> <span class="keyword">abstract</span> <span class="keyword">class</span> <a title="class InlineSafetyInfo extends Object" id="764208">InlineSafetyInfo</a> <a href="#764208" title="Inliner.this.InlineSafetyInfo" class="delimiter">{</a>
      <span class="keyword">def</span> <a title="=&gt; Boolean" id="764928">isSafe</a>   = <span title="Boolean(false)" class="keyword">false</span>
      <span class="keyword">def</span> <a title="=&gt; Boolean" id="764929">isUnsafe</a> = <a href="../../../../Boolean.scala.html#57822" title="=&gt; Boolean">!</a><a href="#764928" title="=&gt; Boolean">isSafe</a>
    <span class="delimiter">}</span>
    case <span class="keyword">object</span> <a href="#765844" title="Inliner.this.NeverSafeToInline.type" id="765852">NeverSafeToInline</a>           <a href="../../../../Product.scala.html#186" title="Product" class="keyword">extends</a> <a href="#764208" title="Inliner.this.InlineSafetyInfo">InlineSafetyInfo</a>
    case <span class="keyword">object</span> <a href="#765860" title="Inliner.this.InlineableAtThisCaller.type" id="765868">InlineableAtThisCaller</a>      <a href="../../../../Product.scala.html#186" title="Product" class="keyword">extends</a> <a href="#764208" title="Inliner.this.InlineSafetyInfo">InlineSafetyInfo</a> <span class="delimiter">{</span> <span class="keyword">override</span> <span class="keyword">def</span> <a title="=&gt; Boolean" id="764954">isSafe</a> = <span title="Boolean(true)" class="keyword">true</span> <span class="delimiter">}</span>
    case <span class="keyword">class</span>  <a title="class DontInlineHere extends Inliner.this.InlineSafetyInfo with Product with Serializable" id="767363">DontInlineHere</a><a href="../../../../Product.scala.html#186" title="Product" class="delimiter">(</a><a title="String" id="767121">msg</a>: <span title="String">String</span><span class="delimiter">)</span> <span class="keyword">extends</span> <a href="#764208" title="Inliner.this.InlineSafetyInfo">InlineSafetyInfo</a>
    case <span class="keyword">class</span>  <a title="class FeasibleInline extends Inliner.this.InlineSafetyInfo with Product with Serializable" id="767367">FeasibleInline</a><a href="../../../../Product.scala.html#186" title="Product" class="delimiter">(</a><a title="Inliner.this.NonPublicRefs.Value" id="767231">accessNeeded</a>: NonPublicRefs.<a href="../../../../Enumeration.scala.html#87256" title="Inliner.this.NonPublicRefs.Value">Value</a>,
                               <a title="List[Inliners.this.global.Symbol]" id="767232">toBecomePublic</a>: <a href="../../../../collection/immutable/List.scala.html#11952" title="List[Inliners.this.global.Symbol]">List</a><span class="delimiter">[</span>Symbol<span class="delimiter">]</span><span class="delimiter">)</span> <span class="keyword">extends</span> <a href="#764208" title="Inliner.this.InlineSafetyInfo">InlineSafetyInfo</a> <span class="delimiter">{</span>
      <span class="keyword">override</span> <span class="keyword">def</span> <a title="=&gt; Boolean" id="764966">isSafe</a> = <span title="Boolean(true)" class="keyword">true</span>
    <span class="delimiter">}</span>

    case <span class="keyword">class</span> <a title="class AccessReq extends AnyRef with Product with Serializable" id="767393">AccessReq</a><a href="../../../../Product.scala.html#186" title="Product" class="delimiter">(</a>
      <a title="Inliner.this.NonPublicRefs.Value" id="765833">accessNeeded</a>:   NonPublicRefs.<a href="../../../../Enumeration.scala.html#87256" title="Inliner.this.NonPublicRefs.Value">Value</a>,
      <a title="List[Inliners.this.global.Symbol]" id="765834">toBecomePublic</a>: <a href="../../../../collection/immutable/List.scala.html#11952" title="List[Inliners.this.global.Symbol]">List</a><span class="delimiter">[</span>Symbol<span class="delimiter">]</span>
    <span class="delimiter">)</span>

    <span class="keyword">final</span> <span class="keyword">class</span> <a title="class CallerCalleeInfo extends Object" id="764222">CallerCalleeInfo</a><a href="#764222" title="Inliner.this.CallerCalleeInfo" class="delimiter">(</a><span class="keyword">val</span> <a title="Inliner.this.IMethodInfo" id="764913">caller</a>: <a href="#764207" title="Inliner.this.IMethodInfo">IMethodInfo</a>, <span class="keyword">val</span> <a title="Inliner.this.IMethodInfo" id="764914">inc</a>: <a href="#764207" title="Inliner.this.IMethodInfo">IMethodInfo</a>, <a title="scala.collection.mutable.Map[String,Int]" id="764915">fresh</a>: mutable.<a href="../../../../collection/mutable/Map.scala.html#12498" title="scala.collection.mutable.Map[String,Int]">Map</a><span class="delimiter">[</span>String, Int<span class="delimiter">]</span>, <a title="scala.collection.Map[Inliners.this.global.Symbol,Int]" id="764916">inlinedMethodCount</a>: scala.collection.<a href="../../../../collection/Map.scala.html#3509" title="scala.collection.Map[Inliners.this.global.Symbol,Int]">Map</a><span class="delimiter">[</span>Symbol, Int<span class="delimiter">]</span><span class="delimiter">)</span> <span class="delimiter">{</span>

      <a href="../../Global.scala.html#537497" title="(assertion: Boolean, message: =&gt; Any)Unit">assert</a><span class="delimiter">(</span><a href="../../../../Boolean.scala.html#57822" title="=&gt; Boolean">!</a><a href="#764913" title="=&gt; Inliner.this.IMethodInfo">caller</a>.<a href="#764679" title="=&gt; Boolean">isBridge</a> <a href="../../../../Boolean.scala.html#57826" title="(x: Boolean)Boolean">&amp;&amp;</a> <a href="#764914" title="=&gt; Inliner.this.IMethodInfo">inc</a>.<a href="#764705" title="=&gt; Inliners.this.global.icodes.IMethod">m</a>.<a href="../icode/Members.scala.html#696027" title="=&gt; Boolean">hasCode</a>,
             <span title="String(&quot;A guard in Inliner.analyzeClass() should have prevented from getting here.&quot;)" class="string">&quot;A guard in Inliner.analyzeClass() should have prevented from getting here.&quot;</span><span class="delimiter">)</span>

      <span class="keyword">def</span> <a title="=&gt; Boolean" id="764900">isLargeSum</a>  = <a href="#764913" title="=&gt; Inliner.this.IMethodInfo">caller</a>.<a href="#764688" title="=&gt; Int">length</a> <a href="../../../../Int.scala.html#57154" title="(x: Int)Int">+</a> <a href="#764914" title="=&gt; Inliner.this.IMethodInfo">inc</a>.<a href="#764688" title="=&gt; Int">length</a> <a href="../../../../Int.scala.html#57161" title="(x: Int)Int">-</a> <span title="Int(1)" class="int">1</span> <a href="../../../../Int.scala.html#57125" title="(x: Int)Boolean">&gt;</a> <a href="#622822" title="=&gt; Int">SMALL_METHOD_SIZE</a>

      <span class="keyword">private</span> <span class="keyword">def</span> <a title="(s: String)Inliners.this.global.TermName" id="764901">freshName</a><span class="delimiter">(</span><a title="String" id="766000">s</a>: <span title="String">String</span><span class="delimiter">)</span>: <a href="../../../../reflect/internal/Names.scala.html#406879" title="Inliners.this.global.TermName">TermName</a> = <span class="delimiter">{</span>
        <a href="../../../../collection/mutable/MapLike.scala.html#87611" title="(key: String, value: Int)Unit">fresh</a><span class="delimiter">(</span><a href="#766000" title="String">s</a><span class="delimiter">)</span> <a href="../../../../Int.scala.html#57154" title="(x: Int)Int">+=</a> <span title="Int(1)" class="int">1</span>
        <a href="../../../../reflect/internal/Names.scala.html#406859" title="(s: String)Inliners.this.global.TermName">newTermName</a><span class="delimiter">(</span><a href="#766000" title="String">s</a> <span title="(x$1: Any)String">+</span> <a href="../../../../collection/MapLike.scala.html#87535" title="(key: String)Int">fresh</a><span class="delimiter">(</span><a href="#766000" title="String">s</a><span class="delimiter">)</span><span class="delimiter">)</span>
      <span class="delimiter">}</span>

      <span class="keyword">private</span> <span class="keyword">def</span> <a title="=&gt; Boolean" id="764902">isKnownToInlineSafely</a>: <a href="../../../../Boolean.scala.html#1425" title="Boolean">Boolean</a> = <span class="delimiter">{</span> <a href="#764196" title="=&gt; Inliners.this.global.analysis.MTFAGrowable">tfa</a>.<a href="../../../../collection/GenSetLike.scala.html#66403" title="(elem: Inliners.this.global.analysis.global.Symbol)Boolean">knownSafe</a><span class="delimiter">(</span><a href="#764914" title="=&gt; Inliner.this.IMethodInfo">inc</a>.<a href="#764672" title="=&gt; Inliners.this.global.icodes.global.Symbol">sym</a><span class="delimiter">)</span> <span class="delimiter">}</span>

      <span class="keyword">val</span> <a title="Boolean" id="764903">isInlineForced</a>    = <a href="#622833" title="(sym: Inliners.this.global.Symbol)Boolean">hasInline</a><span class="delimiter">(</span><a href="#764914" title="=&gt; Inliner.this.IMethodInfo">inc</a>.<a href="#764672" title="=&gt; Inliners.this.global.icodes.global.Symbol">sym</a><span class="delimiter">)</span>
      <span class="keyword">val</span> <a title="Boolean" id="764905">isInlineForbidden</a> = <a href="#622834" title="(sym: Inliners.this.global.Symbol)Boolean">hasNoInline</a><span class="delimiter">(</span><a href="#764914" title="=&gt; Inliner.this.IMethodInfo">inc</a>.<a href="#764672" title="=&gt; Inliners.this.global.icodes.global.Symbol">sym</a><span class="delimiter">)</span>
      <a href="../../Global.scala.html#537497" title="(assertion: Boolean, message: =&gt; Any)Unit">assert</a><span class="delimiter">(</span><a href="../../../../Boolean.scala.html#57822" title="=&gt; Boolean">!</a><span class="delimiter">(</span><a href="#764903" title="=&gt; Boolean">isInlineForced</a> <a href="../../../../Boolean.scala.html#57826" title="(x: Boolean)Boolean">&amp;&amp;</a> <a href="#764905" title="=&gt; Boolean">isInlineForbidden</a><span class="delimiter">)</span>, <span title="String(&quot;method (&quot;)" class="string">&quot;method (&quot;</span><span title="(x$1: Any)String">+</span><a href="#764914" title="=&gt; Inliner.this.IMethodInfo">inc</a>.<a href="#764705" title="=&gt; Inliners.this.global.icodes.IMethod">m</a><span title="(x$1: Any)String">+</span><span title="String(&quot;) marked both @inline and @noinline.&quot;)" class="string">&quot;) marked both @inline and @noinline.&quot;</span><span class="delimiter">)</span>

      /** Inline 'inc' into 'caller' at the given block and instruction.
       *  The instruction must be a CALL_METHOD.
       */
      <span class="keyword">def</span> <a title="(block: Inliners.this.global.icodes.BasicBlock, instr: Inliners.this.global.icodes.opcodes.CALL_METHOD)Unit" id="764907">doInline</a><span class="delimiter">(</span><a title="Inliners.this.global.icodes.BasicBlock" id="765055">block</a>: <a href="../icode/BasicBlocks.scala.html#614938" title="Inliners.this.global.icodes.BasicBlock">BasicBlock</a>, <a title="Inliners.this.global.icodes.opcodes.CALL_METHOD" id="765056">instr</a>: <a href="../icode/Opcodes.scala.html#624307" title="Inliners.this.global.icodes.opcodes.CALL_METHOD">CALL_METHOD</a><span class="delimiter">)</span> <span class="delimiter">{</span>

        <a href="#764198" title="=&gt; scala.collection.mutable.ListBuffer[Inliners.this.global.icodes.BasicBlock]">staleOut</a> <a href="../../../../collection/mutable/ListBuffer.scala.html#79765" title="(x: Inliners.this.global.icodes.BasicBlock)Inliner.this.staleOut.type">+=</a> <a href="#765055" title="Inliners.this.global.icodes.BasicBlock">block</a>

        <a href="#764196" title="=&gt; Inliners.this.global.analysis.MTFAGrowable">tfa</a>.<a href="../icode/analysis/TypeFlowAnalysis.scala.html#726750" title="=&gt; scala.collection.mutable.Map[Inliners.this.global.analysis.global.icodes.opcodes.CALL_METHOD,Inliners.this.global.analysis.CallsiteInfo]">remainingCALLs</a>.<a href="../../../../collection/mutable/MapLike.scala.html#87625" title="(key: Inliners.this.global.analysis.global.icodes.opcodes.CALL_METHOD)Option[Inliners.this.global.analysis.CallsiteInfo]">remove</a><span class="delimiter">(</span><a href="#765056" title="Inliners.this.global.icodes.opcodes.CALL_METHOD">instr</a><span class="delimiter">)</span> // this bookkpeeping is done here and not in MTFAGrowable.reinit due to (1st) convenience and (2nd) necessity.
        <a href="#764196" title="=&gt; Inliners.this.global.analysis.MTFAGrowable">tfa</a>.<a href="../icode/analysis/TypeFlowAnalysis.scala.html#726762" title="=&gt; scala.collection.mutable.Set[Inliners.this.global.analysis.global.icodes.Instruction]">isOnWatchlist</a>.<a href="../../../../collection/mutable/SetLike.scala.html#90895" title="(elem: Inliners.this.global.analysis.global.icodes.Instruction)Boolean">remove</a><span class="delimiter">(</span><a href="#765056" title="Inliners.this.global.icodes.opcodes.CALL_METHOD">instr</a><span class="delimiter">)</span>  // ditto
        <a href="#764196" title="=&gt; Inliners.this.global.analysis.MTFAGrowable">tfa</a>.<a href="../icode/analysis/TypeFlowAnalysis.scala.html#726764" title="=&gt; scala.collection.mutable.Set[Inliners.this.global.analysis.global.icodes.opcodes.CALL_METHOD]">warnIfInlineFails</a>.<a href="../../../../collection/mutable/SetLike.scala.html#90895" title="(elem: Inliners.this.global.analysis.global.icodes.opcodes.CALL_METHOD)Boolean">remove</a><span class="delimiter">(</span><a href="#765056" title="Inliners.this.global.icodes.opcodes.CALL_METHOD">instr</a><span class="delimiter">)</span>

        <span class="keyword">val</span> <a title="scala.reflect.internal.util.Position" id="766072">targetPos</a> = <a href="#765056" title="Inliners.this.global.icodes.opcodes.CALL_METHOD">instr</a>.<a href="../icode/Opcodes.scala.html#695883" title="=&gt; scala.reflect.internal.util.Position">pos</a>

        <span class="keyword">def</span> <a title="(i: Inliners.this.global.icodes.Instruction)Unit" id="766073">blockEmit</a><span class="delimiter">(</span><a title="Inliners.this.global.icodes.Instruction" id="766105">i</a>: <a href="../icode/Opcodes.scala.html#614966" title="Inliners.this.global.icodes.Instruction">Instruction</a><span class="delimiter">)</span> = <a href="#765055" title="Inliners.this.global.icodes.BasicBlock">block</a>.<a href="../icode/BasicBlocks.scala.html#695948" title="(instr: Inliners.this.global.icodes.Instruction, pos: scala.reflect.internal.util.Position)Unit">emit</a><span class="delimiter">(</span><a href="#766105" title="Inliners.this.global.icodes.Instruction">i</a>, <a href="#766072" title="scala.reflect.internal.util.Position">targetPos</a><span class="delimiter">)</span>
        <span class="keyword">def</span> <a title="(baseName: String, kind: Inliners.this.global.icodes.TypeKind)Inliners.this.global.icodes.Local" id="766074">newLocal</a><span class="delimiter">(</span><a title="String" id="766112">baseName</a>: <span title="String">String</span>, <a title="Inliners.this.global.icodes.TypeKind" id="766113">kind</a>: <a href="../icode/TypeKinds.scala.html#614984" title="Inliners.this.global.icodes.TypeKind">TypeKind</a><span class="delimiter">)</span> =
          <span title="Inliners.this.global.icodes.Local" class="keyword">new</span> <a href="../icode/Members.scala.html#614928" title="Inliners.this.global.icodes.Local">Local</a><span class="delimiter">(</span><a href="#764913" title="=&gt; Inliner.this.IMethodInfo">caller</a>.<a href="#764672" title="=&gt; Inliners.this.global.icodes.global.Symbol">sym</a>.<a href="../../../../reflect/internal/Symbols.scala.html#411110" title="(name: Inliners.this.global.icodes.global.TermName, pos: Inliners.this.global.icodes.global.Position, newFlags: Long)Inliners.this.global.icodes.global.TermSymbol">newVariable</a><span class="delimiter">(</span><a href="#764901" title="(s: String)Inliners.this.global.TermName">freshName</a><span class="delimiter">(</span><a href="#766112" title="String">baseName</a><span class="delimiter">)</span>, <a href="#766072" title="scala.reflect.internal.util.Position">targetPos</a><span class="delimiter">)</span> <a href="../../../../reflect/internal/Symbols.scala.html#411369" title="(info: Inliners.this.global.icodes.global.Type)Inliners.this.global.icodes.global.TermSymbol">setInfo</a> <a href="#766113" title="Inliners.this.global.icodes.TypeKind">kind</a>.<a href="../icode/TypeKinds.scala.html#694375" title="=&gt; Inliners.this.global.icodes.global.Type">toType</a>, <a href="#766113" title="Inliners.this.global.icodes.TypeKind">kind</a>, <span title="Boolean(false)" class="keyword">false</span><span class="delimiter">)</span>

        <span class="keyword">val</span> <a href="#3320432" title="(x: (Boolean, Inliners.this.global.analysis.MethodTFA))(Boolean, Inliners.this.global.analysis.MethodTFA)" class="delimiter">(</a><a href="../../../../Tuple2.scala.html#60635" title="Boolean" id="766076">hasRETURN</a>, <a href="../../../../Tuple2.scala.html#60637" title="Inliners.this.global.analysis.MethodTFA" id="766077">a</a><span class="delimiter">)</span> = <a href="#764191" title="(incm: Inliners.this.global.icodes.IMethod, forceable: Boolean)(Boolean, Inliners.this.global.analysis.MethodTFA)">getRecentTFA</a><a href="../../../../Tuple2.scala.html#783" title="(Boolean, Inliners.this.global.analysis.MethodTFA) @unchecked" class="delimiter">(</a><a href="#764914" title="=&gt; Inliner.this.IMethodInfo">inc</a>.<a href="#764705" title="=&gt; Inliners.this.global.icodes.IMethod">m</a>, <a href="#764903" title="=&gt; Boolean">isInlineForced</a><span class="delimiter">)</span>

        /* The exception handlers that are active at the current block. */
        <span class="keyword">val</span> <a title="List[Inliners.this.global.icodes.ExceptionHandler]" id="766078">activeHandlers</a> = <a href="#764913" title="=&gt; Inliner.this.IMethodInfo">caller</a>.<a href="#764685" title="=&gt; List[Inliners.this.global.icodes.ExceptionHandler]">handlers</a> <a href="../../../../collection/TraversableLike.scala.html#58073" title="(p: Inliners.this.global.icodes.ExceptionHandler =&gt; Boolean)List[Inliners.this.global.icodes.ExceptionHandler]">filter</a> <span class="delimiter">(</span><a href="#766139" title="Inliners.this.global.icodes.ExceptionHandler">_</a> <a href="../../../../collection/GenSetLike.scala.html#66403" title="(elem: Inliners.this.global.icodes.BasicBlock)Boolean">covered</a> <a href="#765055" title="Inliners.this.global.icodes.BasicBlock">block</a><span class="delimiter">)</span>

        /* Map 'original' blocks to the ones inlined in the caller. */
        <span class="keyword">val</span> <a title="scala.collection.mutable.Map[Inliners.this.global.icodes.BasicBlock,Inliners.this.global.icodes.BasicBlock]" id="766079">inlinedBlock</a> = mutable.<a href="../../../../collection/generic/GenMapFactory.scala.html#60744" title="[A, B](elems: (A, B)*)scala.collection.mutable.Map[A,B]">Map</a><span title="(elems: (Inliners.this.global.icodes.BasicBlock, Inliners.this.global.icodes.BasicBlock)*)scala.collection.mutable.Map[Inliners.this.global.icodes.BasicBlock,Inliners.this.global.icodes.BasicBlock]" class="delimiter">[</span><a href="../icode/BasicBlocks.scala.html#614938" title="Inliners.this.global.icodes.BasicBlock">BasicBlock</a>, <a href="../icode/BasicBlocks.scala.html#614938" title="Inliners.this.global.icodes.BasicBlock">BasicBlock</a><span class="delimiter">]</span><span class="delimiter">(</span><span class="delimiter">)</span>

        <span class="keyword">val</span> <a title="scala.collection.mutable.HashSet[Inliners.this.global.icodes.Local]" id="766080">varsInScope</a> = mutable.<a href="../../../../collection/generic/GenericCompanion.scala.html#59933" title="[A](elems: A*)scala.collection.mutable.HashSet[A]">HashSet</a><span title="(elems: Inliners.this.global.icodes.Local*)scala.collection.mutable.HashSet[Inliners.this.global.icodes.Local]" class="delimiter">[</span><a href="../icode/Members.scala.html#614928" title="Inliners.this.global.icodes.Local">Local</a><span class="delimiter">]</span><span class="delimiter">(</span><span class="delimiter">)</span> <a href="../../../../collection/generic/Growable.scala.html#60003" title="(xs: scala.collection.TraversableOnce[Inliners.this.global.icodes.Local])scala.collection.mutable.HashSet[Inliners.this.global.icodes.Local]">++=</a> <a href="#765055" title="Inliners.this.global.icodes.BasicBlock">block</a>.<a href="../icode/BasicBlocks.scala.html#695920" title="=&gt; scala.collection.mutable.Set[Inliners.this.global.icodes.Local]">varsInScope</a>

        /** Side effects varsInScope when it sees SCOPE_ENTERs. */
        <span class="keyword">def</span> <a title="(i: Inliners.this.global.icodes.Instruction)Boolean" id="766081">instrBeforeFilter</a><span class="delimiter">(</span><a title="Inliners.this.global.icodes.Instruction" id="766162">i</a>: <a href="../icode/Opcodes.scala.html#614966" title="Inliners.this.global.icodes.Instruction">Instruction</a><span class="delimiter">)</span>: <a href="../../../../Boolean.scala.html#1425" title="Boolean">Boolean</a> = <span class="delimiter">{</span>
          <a href="#766162" title="Inliners.this.global.icodes.Instruction">i</a> <span class="keyword">match</span> <span class="delimiter">{</span> <span class="keyword">case</span> SCOPE_ENTER<a href="#3320436" title="Any" id="3320438" class="delimiter">(</a><a href="../icode/Opcodes.scala.html#705011" title="Inliners.this.global.icodes.Local" id="766164">l</a><span class="delimiter">)</span> =&gt; <a href="#766080" title="scala.collection.mutable.HashSet[Inliners.this.global.icodes.Local]">varsInScope</a> <a href="#3320440" title="(x: Any)Any">+=</a> <a href="#766164" title="Inliners.this.global.icodes.Local">l</a> ; <span class="keyword">case</span> _ =&gt; <a href="#3320440" title="(x: Any)Any" class="delimiter">(</a><span class="delimiter">)</span> <span class="delimiter">}</span>
          <a href="#766162" title="Inliners.this.global.icodes.Instruction">i</a> <span title="(x$1: AnyRef)Boolean">ne</span> <a href="#765056" title="Inliners.this.global.icodes.opcodes.CALL_METHOD">instr</a>
        <span class="delimiter">}</span>
        <span class="keyword">val</span> <a title="List[Inliners.this.global.icodes.Instruction]" id="766082">instrBefore</a> = <a href="#765055" title="Inliners.this.global.icodes.BasicBlock">block</a>.<a href="../icode/BasicBlocks.scala.html#695929" title="=&gt; List[Inliners.this.global.icodes.Instruction]">toList</a> <a href="../../../../collection/immutable/List.scala.html#62713" title="(p: Inliners.this.global.icodes.Instruction =&gt; Boolean)List[Inliners.this.global.icodes.Instruction]">takeWhile</a> <a href="#766081" title="(i: Inliners.this.global.icodes.Instruction)Boolean">instrBeforeFilter</a>
        <span class="keyword">val</span> <a title="List[Inliners.this.global.icodes.Instruction]" id="766083">instrAfter</a>  = <a href="#765055" title="Inliners.this.global.icodes.BasicBlock">block</a>.<a href="../icode/BasicBlocks.scala.html#695929" title="=&gt; List[Inliners.this.global.icodes.Instruction]">toList</a> <a href="../../../../collection/immutable/List.scala.html#62709" title="(n: Int)List[Inliners.this.global.icodes.Instruction]">drop</a> <span class="delimiter">(</span><a href="#766082" title="List[Inliners.this.global.icodes.Instruction]">instrBefore</a>.<a href="../../../../collection/LinearSeqOptimized.scala.html#86373" title="=&gt; Int">length</a> <a href="../../../../Int.scala.html#57154" title="(x: Int)Int">+</a> <span title="Int(1)" class="int">1</span><span class="delimiter">)</span>

        <a href="../../Global.scala.html#537497" title="(assertion: Boolean, message: =&gt; Any)Unit">assert</a><span class="delimiter">(</span><a href="../../../../Boolean.scala.html#57822" title="=&gt; Boolean">!</a><a href="#766083" title="List[Inliners.this.global.icodes.Instruction]">instrAfter</a>.<a href="../../../../collection/SeqLike.scala.html#58787" title="=&gt; Boolean">isEmpty</a>, <span title="String(&quot;CALL_METHOD cannot be the last instruction in block!&quot;)" class="string">&quot;CALL_METHOD cannot be the last instruction in block!&quot;</span><span class="delimiter">)</span>

        // store the '$this' into the special local
        <span class="keyword">val</span> <a title="Inliners.this.global.icodes.Local" id="766084">inlinedThis</a> = <a href="#766074" title="(baseName: String, kind: Inliners.this.global.icodes.TypeKind)Inliners.this.global.icodes.Local">newLocal</a><span class="delimiter">(</span><span title="String(&quot;$inlThis&quot;)" class="string">&quot;$inlThis&quot;</span>, <a href="../icode/TypeKinds.scala.html#694620" title="(cls: Inliners.this.global.icodes.global.Symbol)Inliners.this.global.icodes.REFERENCE">REFERENCE</a><span class="delimiter">(</span><a href="../../../../reflect/internal/Definitions.scala.html#408671" title="=&gt; Inliners.this.global.ClassSymbol">ObjectClass</a><span class="delimiter">)</span><span class="delimiter">)</span>

        /** buffer for the returned value */
        <span class="keyword">val</span> <a title="Inliners.this.global.icodes.Local" id="766085">retVal</a> = <a href="#764914" title="=&gt; Inliner.this.IMethodInfo">inc</a>.<a href="#764705" title="=&gt; Inliners.this.global.icodes.IMethod">m</a>.<a href="../icode/Members.scala.html#696012" title="=&gt; Inliners.this.global.icodes.TypeKind">returnType</a> <span class="keyword">match</span> <span class="delimiter">{</span>
          <span class="keyword">case</span> <a href="../icode/TypeKinds.scala.html#614990" title="Inliners.this.global.icodes.Local" id="3320447">UNIT</a>  =&gt; <a href="#3320449" title="(x: Inliners.this.global.icodes.Local)Inliners.this.global.icodes.Local" class="keyword">null</a>
          <span class="keyword">case</span> x     =&gt; <a href="#766074" title="(baseName: String, kind: Inliners.this.global.icodes.TypeKind)Inliners.this.global.icodes.Local">newLocal</a><a href="#3320449" title="(x: Inliners.this.global.icodes.Local)Inliners.this.global.icodes.Local" class="delimiter">(</a><span title="String(&quot;$retVal&quot;)" class="string">&quot;$retVal&quot;</span>, x<span class="delimiter">)</span>
        <span class="delimiter">}</span>

        <span class="keyword">val</span> <a title="scala.collection.mutable.HashMap[Inliners.this.global.icodes.Local,Inliners.this.global.icodes.Local]" id="766086">inlinedLocals</a> = mutable.<a href="../../../../collection/mutable/HashMap.scala.html#12448" title="scala.collection.mutable.HashMap.type">HashMap</a>.<a href="../../../../collection/mutable/HashMap.scala.html#153384" title="[A, B]=&gt; scala.collection.mutable.HashMap[A,B]">empty</a><span title="scala.collection.mutable.HashMap[Inliners.this.global.icodes.Local,Inliners.this.global.icodes.Local]" class="delimiter">[</span><a href="../icode/Members.scala.html#614928" title="Inliners.this.global.icodes.Local">Local</a>, <a href="../icode/Members.scala.html#614928" title="Inliners.this.global.icodes.Local">Local</a><span class="delimiter">]</span>

        /** Add a new block in the current context. */
        <span class="keyword">def</span> <a title="()Inliners.this.global.icodes.BasicBlock" id="766087">newBlock</a><span class="delimiter">(</span><span class="delimiter">)</span> = <span class="delimiter">{</span>
          <span class="keyword">val</span> <a title="Inliners.this.global.icodes.BasicBlock" id="766206">b</a> = <a href="#764913" title="=&gt; Inliner.this.IMethodInfo">caller</a>.<a href="#764705" title="=&gt; Inliners.this.global.icodes.IMethod">m</a>.<a href="../icode/Members.scala.html#695989" title="=&gt; Inliners.this.global.icodes.Code">code</a>.<a href="../icode/Members.scala.html#696102" title="()Inliners.this.global.icodes.BasicBlock">newBlock</a>
          <a href="#766078" title="List[Inliners.this.global.icodes.ExceptionHandler]">activeHandlers</a> <a href="../../../../collection/immutable/List.scala.html#62719" title="(f: Inliners.this.global.icodes.ExceptionHandler =&gt; Inliners.this.global.icodes.ExceptionHandler)Unit">foreach</a> <span class="delimiter">(</span><a href="#766227" title="Inliners.this.global.icodes.ExceptionHandler">_</a> <a href="../icode/ExceptionHandlers.scala.html#696229" title="(b: Inliners.this.global.icodes.BasicBlock)x$11.type">addCoveredBlock</a> <a href="#766206" title="Inliners.this.global.icodes.BasicBlock">b</a><span class="delimiter">)</span>
          <span title="Any" class="keyword">if</span> <span class="delimiter">(</span><a href="#766085" title="Inliners.this.global.icodes.Local">retVal</a> <span title="(x$1: AnyRef)Boolean">ne</span> <span title="Null(null)" class="keyword">null</span><span class="delimiter">)</span> <a href="#766206" title="Inliners.this.global.icodes.BasicBlock">b</a>.<a href="../icode/BasicBlocks.scala.html#695920" title="=&gt; scala.collection.mutable.Set[Inliners.this.global.icodes.Local]">varsInScope</a> <a href="../../../../collection/mutable/SetLike.scala.html#90897" title="(elem: Inliners.this.global.icodes.Local)b.varsInScope.type">+=</a> <a href="#766085" title="Inliners.this.global.icodes.Local">retVal</a>
          <a href="#766206" title="Inliners.this.global.icodes.BasicBlock">b</a>.<a href="../icode/BasicBlocks.scala.html#695920" title="=&gt; scala.collection.mutable.Set[Inliners.this.global.icodes.Local]">varsInScope</a> <a href="../../../../collection/mutable/SetLike.scala.html#90897" title="(elem: Inliners.this.global.icodes.Local)b.varsInScope.type">+=</a> <a href="#766084" title="Inliners.this.global.icodes.Local">inlinedThis</a>
          <a href="#766206" title="Inliners.this.global.icodes.BasicBlock">b</a>.<a href="../icode/BasicBlocks.scala.html#695920" title="=&gt; scala.collection.mutable.Set[Inliners.this.global.icodes.Local]">varsInScope</a> <a href="../../../../collection/generic/Growable.scala.html#60003" title="(xs: scala.collection.TraversableOnce[Inliners.this.global.icodes.Local])b.varsInScope.type">++=</a> <a href="#766080" title="scala.collection.mutable.HashSet[Inliners.this.global.icodes.Local]">varsInScope</a>
          <a href="#766206" title="Inliners.this.global.icodes.BasicBlock">b</a>
        <span class="delimiter">}</span>

        <span class="keyword">def</span> <a title="(e: Inliners.this.global.icodes.ExceptionHandler)Inliners.this.global.icodes.ExceptionHandler" id="766088">translateExh</a><span class="delimiter">(</span><a title="Inliners.this.global.icodes.ExceptionHandler" id="766254">e</a>: <a href="../icode/ExceptionHandlers.scala.html#615030" title="Inliners.this.global.icodes.ExceptionHandler">ExceptionHandler</a><span class="delimiter">)</span> = <span class="delimiter">{</span>
          <span class="keyword">val</span> <a title="Inliners.this.global.icodes.ExceptionHandler" id="766255">handler</a>: <a href="../icode/ExceptionHandlers.scala.html#615030" title="Inliners.this.global.icodes.ExceptionHandler">ExceptionHandler</a> = <a href="#766254" title="Inliners.this.global.icodes.ExceptionHandler">e</a>.<a href="../icode/ExceptionHandlers.scala.html#696237" title="=&gt; Inliners.this.global.icodes.ExceptionHandler">dup</a>
          <a href="#766255" title="Inliners.this.global.icodes.ExceptionHandler">handler</a>.<a href="../icode/ExceptionHandlers.scala.html#696227" title="(x$1: scala.collection.immutable.Set[Inliners.this.global.icodes.BasicBlock])Unit">covered</a> = <a href="#766255" title="Inliners.this.global.icodes.ExceptionHandler">handler</a>.<a href="../icode/ExceptionHandlers.scala.html#696226" title="=&gt; scala.collection.immutable.Set[Inliners.this.global.icodes.BasicBlock]">covered</a> <a href="../../../../collection/SetLike.scala.html#66437" title="(f: Inliners.this.global.icodes.BasicBlock =&gt; Inliners.this.global.icodes.BasicBlock)(implicit bf: scala.collection.generic.CanBuildFrom[scala.collection.immutable.Set[Inliners.this.global.icodes.BasicBlock],Inliners.this.global.icodes.BasicBlock,scala.collection.immutable.Set[Inliners.this.global.icodes.BasicBlock]])scala.collection.immutable.Set[Inliners.this.global.icodes.BasicBlock]">map</a> <a href="#766079" title="scala.collection.mutable.Map[Inliners.this.global.icodes.BasicBlock,Inliners.this.global.icodes.BasicBlock]">inlinedBlock</a>
          <a href="#766255" title="Inliners.this.global.icodes.ExceptionHandler">handler</a> <a href="../icode/ExceptionHandlers.scala.html#696224" title="(b: Inliners.this.global.icodes.BasicBlock)Unit">setStartBlock</a> <a href="../../../../collection/MapLike.scala.html#87535" title="(key: Inliners.this.global.icodes.BasicBlock)Inliners.this.global.icodes.BasicBlock">inlinedBlock</a><span class="delimiter">(</span><a href="#766254" title="Inliners.this.global.icodes.ExceptionHandler">e</a>.<a href="../icode/ExceptionHandlers.scala.html#696225" title="=&gt; Inliners.this.global.icodes.BasicBlock">startBlock</a><span class="delimiter">)</span>
          <a href="#766255" title="Inliners.this.global.icodes.ExceptionHandler">handler</a>
        <span class="delimiter">}</span>

        /** alfa-rename `l` in caller's context. */
        <span class="keyword">def</span> <a title="(l: Inliners.this.global.icodes.Local)Inliners.this.global.icodes.Local" id="766089">dupLocal</a><span class="delimiter">(</span><a title="Inliners.this.global.icodes.Local" id="766320">l</a>: <a href="../icode/Members.scala.html#614928" title="Inliners.this.global.icodes.Local">Local</a><span class="delimiter">)</span>: <a href="../icode/Members.scala.html#614928" title="Inliners.this.global.icodes.Local">Local</a> = <span class="delimiter">{</span>
          <span class="keyword">val</span> <a title="Inliners.this.global.icodes.global.TermSymbol" id="766321">sym</a> = <a href="#764913" title="=&gt; Inliner.this.IMethodInfo">caller</a>.<a href="#764672" title="=&gt; Inliners.this.global.icodes.global.Symbol">sym</a>.<a href="../../../../reflect/internal/Symbols.scala.html#411110" title="(name: Inliners.this.global.icodes.global.TermName, pos: Inliners.this.global.icodes.global.Position, newFlags: Long)Inliners.this.global.icodes.global.TermSymbol">newVariable</a><span class="delimiter">(</span><a href="#764901" title="(s: String)Inliners.this.global.TermName">freshName</a><span class="delimiter">(</span><a href="#766320" title="Inliners.this.global.icodes.Local">l</a>.<a href="../icode/Members.scala.html#696350" title="=&gt; Inliners.this.global.icodes.global.Symbol">sym</a>.<a href="../../../../reflect/internal/Symbols.scala.html#411087" title="=&gt; l.sym.NameType">name</a>.<span title="()String">toString</span><span class="delimiter">)</span>, <a href="#766320" title="Inliners.this.global.icodes.Local">l</a>.<a href="../icode/Members.scala.html#696350" title="=&gt; Inliners.this.global.icodes.global.Symbol">sym</a>.<a href="../../../../reflect/internal/StdAttachments.scala.html#409602" title="=&gt; Inliners.this.global.icodes.global.Position">pos</a><span class="delimiter">)</span>
          // sym.setInfo(l.sym.tpe)
          <span class="keyword">val</span> <a title="Inliners.this.global.icodes.Local" id="766322">dupped</a> = <span title="Inliners.this.global.icodes.Local" class="keyword">new</span> <a href="../icode/Members.scala.html#614928" title="Inliners.this.global.icodes.Local">Local</a><span class="delimiter">(</span><a href="#766321" title="Inliners.this.global.icodes.global.TermSymbol">sym</a>, <a href="#766320" title="Inliners.this.global.icodes.Local">l</a>.<a href="../icode/Members.scala.html#696352" title="=&gt; Inliners.this.global.icodes.TypeKind">kind</a>, <span title="Boolean(false)" class="keyword">false</span><span class="delimiter">)</span>
          <a href="../../../../collection/mutable/HashMap.scala.html#88248" title="(key: Inliners.this.global.icodes.Local, value: Inliners.this.global.icodes.Local)Unit">inlinedLocals</a><span class="delimiter">(</span><a href="#766320" title="Inliners.this.global.icodes.Local">l</a><span class="delimiter">)</span> = <a href="#766322" title="Inliners.this.global.icodes.Local">dupped</a>
          <a href="#766322" title="Inliners.this.global.icodes.Local">dupped</a>
        <span class="delimiter">}</span>

        <span class="keyword">val</span> <a title="Inliners.this.global.icodes.BasicBlock" id="766090">afterBlock</a> = <a href="#766087" title="()Inliners.this.global.icodes.BasicBlock">newBlock</a><span class="delimiter">(</span><span class="delimiter">)</span>

        /** Map from nw.init instructions to their matching NEW call */
        <span class="keyword">val</span> <a title="scala.collection.mutable.Map[Inliners.this.global.icodes.Instruction,Inliners.this.global.icodes.opcodes.NEW]" id="766091">pending</a>: mutable.<a href="../../../../collection/mutable/Map.scala.html#12498" title="scala.collection.mutable.Map[Inliners.this.global.icodes.Instruction,Inliners.this.global.icodes.opcodes.NEW]">Map</a><span class="delimiter">[</span>Instruction, NEW<span class="delimiter">]</span> = <a href="../../../../collection/mutable/HashMap.scala.html#88242" title="()scala.collection.mutable.HashMap[Inliners.this.global.icodes.Instruction,Inliners.this.global.icodes.opcodes.NEW]" class="keyword">new</a> mutable.<a href="../../../../collection/mutable/HashMap.scala.html#12447" title="scala.collection.mutable.HashMap[Inliners.this.global.icodes.Instruction,Inliners.this.global.icodes.opcodes.NEW]">HashMap</a>

        /** Map an instruction from the callee to one suitable for the caller. */
        <span class="keyword">def</span> <a title="(i: Inliners.this.global.icodes.Instruction)Inliners.this.global.icodes.Instruction" id="766092">map</a><span class="delimiter">(</span><a title="Inliners.this.global.icodes.Instruction" id="766331">i</a>: <a href="../icode/Opcodes.scala.html#614966" title="Inliners.this.global.icodes.Instruction">Instruction</a><span class="delimiter">)</span>: <a href="../icode/Opcodes.scala.html#614966" title="Inliners.this.global.icodes.Instruction">Instruction</a> = <span class="delimiter">{</span>
          <span class="keyword">def</span> <a title="(l: Inliners.this.global.icodes.Local)Inliners.this.global.icodes.Instruction" id="766332">assertLocal</a><span class="delimiter">(</span><a title="Inliners.this.global.icodes.Local" id="766335">l</a>: <a href="../icode/Members.scala.html#614928" title="Inliners.this.global.icodes.Local">Local</a><span class="delimiter">)</span> = <span class="delimiter">{</span>
            <a href="../../Global.scala.html#537497" title="(assertion: Boolean, message: =&gt; Any)Unit">assert</a><span class="delimiter">(</span><a href="#764913" title="=&gt; Inliner.this.IMethodInfo">caller</a>.<a href="#764687" title="=&gt; List[Inliners.this.global.icodes.Local]">locals</a> <a href="../../../../collection/LinearSeqOptimized.scala.html#86380" title="(elem: Any)Boolean">contains</a> <a href="#766335" title="Inliners.this.global.icodes.Local">l</a>, <span title="String(&quot;Could not find local \'&quot;)" class="string">&quot;Could not find local '&quot;</span> <span title="(x$1: Any)String">+</span> <a href="#766335" title="Inliners.this.global.icodes.Local">l</a> <span title="(x$1: Any)String">+</span> <span title="String(&quot;\' in locals, nor in inlinedLocals: &quot;)" class="string">&quot;' in locals, nor in inlinedLocals: &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#766086" title="scala.collection.mutable.HashMap[Inliners.this.global.icodes.Local,Inliners.this.global.icodes.Local]">inlinedLocals</a><span class="delimiter">)</span>
            <a href="#766331" title="Inliners.this.global.icodes.Instruction">i</a>
          <span class="delimiter">}</span>
          <span class="keyword">def</span> <a title="(l: Inliners.this.global.icodes.Local)Boolean" id="766333">isInlined</a><span class="delimiter">(</span><a title="Inliners.this.global.icodes.Local" id="766340">l</a>: <a href="../icode/Members.scala.html#614928" title="Inliners.this.global.icodes.Local">Local</a><span class="delimiter">)</span> = <a href="#766086" title="scala.collection.mutable.HashMap[Inliners.this.global.icodes.Local,Inliners.this.global.icodes.Local]">inlinedLocals</a> <a href="../../../../collection/MapLike.scala.html#87537" title="(key: Inliners.this.global.icodes.Local)Boolean">isDefinedAt</a> <a href="#766340" title="Inliners.this.global.icodes.Local">l</a>

          <span class="keyword">val</span> <a title="Inliners.this.global.icodes.Instruction" id="766334">newInstr</a> = <a href="#766331" title="Inliners.this.global.icodes.Instruction">i</a> <span class="keyword">match</span> <span class="delimiter">{</span>
            <span class="keyword">case</span> THIS<a href="#3320457" title="Inliners.this.global.icodes.Instruction" id="3320459" class="delimiter">(</a><a href="../icode/Opcodes.scala.html#705567" title="Inliners.this.global.icodes.global.Symbol" id="766345">clasz</a><span class="delimiter">)</span>                    =&gt; <a href="../icode/Opcodes.scala.html#703701" title="(local: Inliners.this.global.icodes.Local)Inliners.this.global.icodes.opcodes.LOAD_LOCAL">LOAD_LOCAL</a><a href="#3320500" title="(x: Inliners.this.global.icodes.Instruction)Inliners.this.global.icodes.Instruction" class="delimiter">(</a><a href="#766084" title="Inliners.this.global.icodes.Local">inlinedThis</a><span class="delimiter">)</span>
            <span class="keyword">case</span> STORE_THIS<a href="#3320457" title="Inliners.this.global.icodes.Instruction" id="3320462" class="delimiter">(</a><a href="../icode/Opcodes.scala.html#706867" title="Inliners.this.global.icodes.TypeKind" id="3320460">_</a><span class="delimiter">)</span>                  =&gt; <a href="../icode/Opcodes.scala.html#700870" title="(local: Inliners.this.global.icodes.Local)Inliners.this.global.icodes.opcodes.STORE_LOCAL">STORE_LOCAL</a><a href="#3320500" title="(x: Inliners.this.global.icodes.Instruction)Inliners.this.global.icodes.Instruction" class="delimiter">(</a><a href="#766084" title="Inliners.this.global.icodes.Local">inlinedThis</a><span class="delimiter">)</span>
            <span class="keyword">case</span> JUMP<a href="#3320457" title="Inliners.this.global.icodes.Instruction" id="3320464" class="delimiter">(</a><a href="../icode/Opcodes.scala.html#700755" title="Inliners.this.global.icodes.BasicBlock" id="766352">whereto</a><span class="delimiter">)</span>                  =&gt; <a href="../icode/Opcodes.scala.html#700753" title="(whereto: Inliners.this.global.icodes.BasicBlock)Inliners.this.global.icodes.opcodes.JUMP">JUMP</a><a href="#3320500" title="(x: Inliners.this.global.icodes.Instruction)Inliners.this.global.icodes.Instruction" class="delimiter">(</a><a href="../../../../collection/MapLike.scala.html#87535" title="(key: Inliners.this.global.icodes.BasicBlock)Inliners.this.global.icodes.BasicBlock">inlinedBlock</a><span class="delimiter">(</span><a href="#766352" title="Inliners.this.global.icodes.BasicBlock">whereto</a><span class="delimiter">)</span><span class="delimiter">)</span>
            <span class="keyword">case</span> CJUMP<a href="#3320457" title="Inliners.this.global.icodes.Instruction" id="3320466" class="delimiter">(</a><a href="../icode/Opcodes.scala.html#701128" title="Inliners.this.global.icodes.BasicBlock" id="766374">succ</a>, <a href="../icode/Opcodes.scala.html#701130" title="Inliners.this.global.icodes.BasicBlock" id="766375">fail</a>, <a href="../icode/Opcodes.scala.html#701132" title="Inliners.this.global.icodes.TestOp" id="766376">cond</a>, <a href="../icode/Opcodes.scala.html#701134" title="Inliners.this.global.icodes.TypeKind" id="766377">kind</a><span class="delimiter">)</span>  =&gt; <a href="../icode/Opcodes.scala.html#701123" title="(successBlock: Inliners.this.global.icodes.BasicBlock, failureBlock: Inliners.this.global.icodes.BasicBlock, cond: Inliners.this.global.icodes.TestOp, kind: Inliners.this.global.icodes.TypeKind)Inliners.this.global.icodes.opcodes.CJUMP">CJUMP</a><a href="#3320500" title="(x: Inliners.this.global.icodes.Instruction)Inliners.this.global.icodes.Instruction" class="delimiter">(</a><a href="../../../../collection/MapLike.scala.html#87535" title="(key: Inliners.this.global.icodes.BasicBlock)Inliners.this.global.icodes.BasicBlock">inlinedBlock</a><span class="delimiter">(</span><a href="#766374" title="Inliners.this.global.icodes.BasicBlock">succ</a><span class="delimiter">)</span>, <a href="../../../../collection/MapLike.scala.html#87535" title="(key: Inliners.this.global.icodes.BasicBlock)Inliners.this.global.icodes.BasicBlock">inlinedBlock</a><span class="delimiter">(</span><a href="#766375" title="Inliners.this.global.icodes.BasicBlock">fail</a><span class="delimiter">)</span>, <a href="#766376" title="Inliners.this.global.icodes.TestOp">cond</a>, <a href="#766377" title="Inliners.this.global.icodes.TypeKind">kind</a><span class="delimiter">)</span>
            <span class="keyword">case</span> CZJUMP<a href="#3320457" title="Inliners.this.global.icodes.Instruction" id="3320468" class="delimiter">(</a><a href="../icode/Opcodes.scala.html#701202" title="Inliners.this.global.icodes.BasicBlock" id="766420">succ</a>, <a href="../icode/Opcodes.scala.html#701204" title="Inliners.this.global.icodes.BasicBlock" id="766421">fail</a>, <a href="../icode/Opcodes.scala.html#701206" title="Inliners.this.global.icodes.TestOp" id="766422">cond</a>, <a href="../icode/Opcodes.scala.html#701208" title="Inliners.this.global.icodes.TypeKind" id="766423">kind</a><span class="delimiter">)</span> =&gt; <a href="../icode/Opcodes.scala.html#701197" title="(successBlock: Inliners.this.global.icodes.BasicBlock, failureBlock: Inliners.this.global.icodes.BasicBlock, cond: Inliners.this.global.icodes.TestOp, kind: Inliners.this.global.icodes.TypeKind)Inliners.this.global.icodes.opcodes.CZJUMP">CZJUMP</a><a href="#3320500" title="(x: Inliners.this.global.icodes.Instruction)Inliners.this.global.icodes.Instruction" class="delimiter">(</a><a href="../../../../collection/MapLike.scala.html#87535" title="(key: Inliners.this.global.icodes.BasicBlock)Inliners.this.global.icodes.BasicBlock">inlinedBlock</a><span class="delimiter">(</span><a href="#766420" title="Inliners.this.global.icodes.BasicBlock">succ</a><span class="delimiter">)</span>, <a href="../../../../collection/MapLike.scala.html#87535" title="(key: Inliners.this.global.icodes.BasicBlock)Inliners.this.global.icodes.BasicBlock">inlinedBlock</a><span class="delimiter">(</span><a href="#766421" title="Inliners.this.global.icodes.BasicBlock">fail</a><span class="delimiter">)</span>, <a href="#766422" title="Inliners.this.global.icodes.TestOp">cond</a>, <a href="#766423" title="Inliners.this.global.icodes.TypeKind">kind</a><span class="delimiter">)</span>
            <span class="keyword">case</span> SWITCH<a href="#3320457" title="Inliners.this.global.icodes.Instruction" id="3320470" class="delimiter">(</a><a href="../icode/Opcodes.scala.html#701271" title="List[List[Int]]" id="766464">tags</a>, <a href="../icode/Opcodes.scala.html#701273" title="List[Inliners.this.global.icodes.BasicBlock]" id="766465">labels</a><span class="delimiter">)</span>           =&gt; <a href="../icode/Opcodes.scala.html#701268" title="(tags: List[List[Int]], labels: List[Inliners.this.global.icodes.BasicBlock])Inliners.this.global.icodes.opcodes.SWITCH">SWITCH</a><a href="#3320500" title="(x: Inliners.this.global.icodes.Instruction)Inliners.this.global.icodes.Instruction" class="delimiter">(</a><a href="#766464" title="List[List[Int]]">tags</a>, <a href="#766465" title="List[Inliners.this.global.icodes.BasicBlock]">labels</a> <a href="../../../../collection/TraversableLike.scala.html#58063" title="(f: Inliners.this.global.icodes.BasicBlock =&gt; Inliners.this.global.icodes.BasicBlock)(implicit bf: scala.collection.generic.CanBuildFrom[List[Inliners.this.global.icodes.BasicBlock],Inliners.this.global.icodes.BasicBlock,List[Inliners.this.global.icodes.BasicBlock]])List[Inliners.this.global.icodes.BasicBlock]">map</a> <a href="#766079" title="scala.collection.mutable.Map[Inliners.this.global.icodes.BasicBlock,Inliners.this.global.icodes.BasicBlock]">inlinedBlock</a><span class="delimiter">)</span>
            <span class="keyword">case</span> RETURN<a href="#3320457" title="Inliners.this.global.icodes.Instruction" id="3320473" class="delimiter">(</a><a href="../icode/Opcodes.scala.html#700784" title="Inliners.this.global.icodes.TypeKind" id="3320471">_</a><span class="delimiter">)</span>                      =&gt; <a href="../icode/Opcodes.scala.html#700753" title="(whereto: Inliners.this.global.icodes.BasicBlock)Inliners.this.global.icodes.opcodes.JUMP">JUMP</a><a href="#3320500" title="(x: Inliners.this.global.icodes.Instruction)Inliners.this.global.icodes.Instruction" class="delimiter">(</a><a href="#766090" title="Inliners.this.global.icodes.BasicBlock">afterBlock</a><span class="delimiter">)</span>
            <span class="keyword">case</span> LOAD_LOCAL<a href="#3320457" title="Boolean" id="3320475" class="delimiter">(</a><a href="../icode/Opcodes.scala.html#703703" title="Inliners.this.global.icodes.Local" id="766520">l</a><span class="delimiter">)</span> <span class="keyword">if</span> <a href="#766333" title="(l: Inliners.this.global.icodes.Local)Boolean">isInlined</a><span class="delimiter">(</span><a href="#766520" title="Inliners.this.global.icodes.Local">l</a><span class="delimiter">)</span>  =&gt; <a href="../icode/Opcodes.scala.html#703701" title="(local: Inliners.this.global.icodes.Local)Inliners.this.global.icodes.opcodes.LOAD_LOCAL">LOAD_LOCAL</a><a href="#3320500" title="(x: Inliners.this.global.icodes.Instruction)Inliners.this.global.icodes.Instruction" class="delimiter">(</a><a href="../../../../collection/mutable/HashMap.scala.html#88245" title="(key: Inliners.this.global.icodes.Local)Inliners.this.global.icodes.Local">inlinedLocals</a><span class="delimiter">(</span><a href="#766520" title="Inliners.this.global.icodes.Local">l</a><span class="delimiter">)</span><span class="delimiter">)</span>
            <span class="keyword">case</span> STORE_LOCAL<a href="#3320457" title="Boolean" id="3320477" class="delimiter">(</a><a href="../icode/Opcodes.scala.html#700872" title="Inliners.this.global.icodes.Local" id="766548">l</a><span class="delimiter">)</span> <span class="keyword">if</span> <a href="#766333" title="(l: Inliners.this.global.icodes.Local)Boolean">isInlined</a><span class="delimiter">(</span><a href="#766548" title="Inliners.this.global.icodes.Local">l</a><span class="delimiter">)</span> =&gt; <a href="../icode/Opcodes.scala.html#700870" title="(local: Inliners.this.global.icodes.Local)Inliners.this.global.icodes.opcodes.STORE_LOCAL">STORE_LOCAL</a><a href="#3320500" title="(x: Inliners.this.global.icodes.Instruction)Inliners.this.global.icodes.Instruction" class="delimiter">(</a><a href="../../../../collection/mutable/HashMap.scala.html#88245" title="(key: Inliners.this.global.icodes.Local)Inliners.this.global.icodes.Local">inlinedLocals</a><span class="delimiter">(</span><a href="#766548" title="Inliners.this.global.icodes.Local">l</a><span class="delimiter">)</span><span class="delimiter">)</span>
            <span class="keyword">case</span> LOAD_LOCAL<span class="delimiter">(</span><a href="../icode/Opcodes.scala.html#703703" title="Inliners.this.global.icodes.Local" id="766570">l</a><span class="delimiter">)</span>                  =&gt; <a href="#766332" title="(l: Inliners.this.global.icodes.Local)Inliners.this.global.icodes.Instruction">assertLocal</a><a href="#3320500" title="(x: Inliners.this.global.icodes.Instruction)Inliners.this.global.icodes.Instruction" class="delimiter">(</a><a href="#766570" title="Inliners.this.global.icodes.Local">l</a><span class="delimiter">)</span>
            <span class="keyword">case</span> STORE_LOCAL<span class="delimiter">(</span><a href="../icode/Opcodes.scala.html#700872" title="Inliners.this.global.icodes.Local" id="766572">l</a><span class="delimiter">)</span>                 =&gt; <a href="#766332" title="(l: Inliners.this.global.icodes.Local)Inliners.this.global.icodes.Instruction">assertLocal</a><a href="#3320500" title="(x: Inliners.this.global.icodes.Instruction)Inliners.this.global.icodes.Instruction" class="delimiter">(</a><a href="#766572" title="Inliners.this.global.icodes.Local">l</a><span class="delimiter">)</span>
            <span class="keyword">case</span> SCOPE_ENTER<a href="#3320457" title="Inliners.this.global.icodes.Instruction" id="3320483" class="delimiter">(</a><a href="../icode/Opcodes.scala.html#705011" title="Inliners.this.global.icodes.Local" id="766574">l</a><span class="delimiter">)</span> <span class="keyword">if</span> <a href="#766333" title="(l: Inliners.this.global.icodes.Local)Boolean">isInlined</a><span class="delimiter">(</span><a href="#766574" title="Inliners.this.global.icodes.Local">l</a><span class="delimiter">)</span> =&gt; <a href="../icode/Opcodes.scala.html#705009" title="(lv: Inliners.this.global.icodes.Local)Inliners.this.global.icodes.opcodes.SCOPE_ENTER">SCOPE_ENTER</a><a href="#3320500" title="(x: Inliners.this.global.icodes.Instruction)Inliners.this.global.icodes.Instruction" class="delimiter">(</a><a href="../../../../collection/mutable/HashMap.scala.html#88245" title="(key: Inliners.this.global.icodes.Local)Inliners.this.global.icodes.Local">inlinedLocals</a><span class="delimiter">(</span><a href="#766574" title="Inliners.this.global.icodes.Local">l</a><span class="delimiter">)</span><span class="delimiter">)</span>
            <span class="keyword">case</span> SCOPE_EXIT<a href="#3320457" title="Inliners.this.global.icodes.Instruction" id="3320485" class="delimiter">(</a><a href="../icode/Opcodes.scala.html#700843" title="Inliners.this.global.icodes.Local" id="766597">l</a><span class="delimiter">)</span> <span class="keyword">if</span> <a href="#766333" title="(l: Inliners.this.global.icodes.Local)Boolean">isInlined</a><span class="delimiter">(</span><a href="#766597" title="Inliners.this.global.icodes.Local">l</a><span class="delimiter">)</span>  =&gt; <a href="../icode/Opcodes.scala.html#700841" title="(lv: Inliners.this.global.icodes.Local)Inliners.this.global.icodes.opcodes.SCOPE_EXIT">SCOPE_EXIT</a><a href="#3320500" title="(x: Inliners.this.global.icodes.Instruction)Inliners.this.global.icodes.Instruction" class="delimiter">(</a><a href="../../../../collection/mutable/HashMap.scala.html#88245" title="(key: Inliners.this.global.icodes.Local)Inliners.this.global.icodes.Local">inlinedLocals</a><span class="delimiter">(</span><a href="#766597" title="Inliners.this.global.icodes.Local">l</a><span class="delimiter">)</span><span class="delimiter">)</span>

            <span class="keyword">case</span> nw @ NEW<a href="#3320457" title="Inliners.this.global.icodes.Instruction" id="3320487" class="delimiter">(</a><a href="../icode/Opcodes.scala.html#705364" title="Inliners.this.global.icodes.REFERENCE" id="766621">sym</a><span class="delimiter">)</span> =&gt;
              <span class="keyword">val</span> <a title="Inliners.this.global.icodes.opcodes.NEW" id="766622">r</a> = <a href="../icode/Opcodes.scala.html#705362" title="(kind: Inliners.this.global.icodes.REFERENCE)Inliners.this.global.icodes.opcodes.NEW">NEW</a><span class="delimiter">(</span><a href="#766621" title="Inliners.this.global.icodes.REFERENCE">sym</a><span class="delimiter">)</span>
              <a href="../../../../collection/mutable/MapLike.scala.html#87611" title="(key: Inliners.this.global.icodes.Instruction, value: Inliners.this.global.icodes.opcodes.NEW)Unit">pending</a><span class="delimiter">(</span>nw.<a href="../icode/Opcodes.scala.html#705371" title="=&gt; Inliners.this.global.icodes.opcodes.CALL_METHOD">init</a><span class="delimiter">)</span> = <a href="#766622" title="Inliners.this.global.icodes.opcodes.NEW">r</a>
              <a href="#766622" title="Inliners.this.global.icodes.opcodes.NEW">r</a>

            <span class="keyword">case</span> CALL_METHOD<a href="#3320457" title="Inliners.this.global.icodes.Instruction" id="3320490" class="delimiter">(</a><a href="../icode/Opcodes.scala.html#705592" title="Inliners.this.global.icodes.global.Symbol" id="766629">meth</a>, Static<a href="../icode/Opcodes.scala.html#705594" title="Inliners.this.global.icodes.opcodes.InvokeStyle" id="3320493" class="delimiter">(</a><a href="../icode/Opcodes.scala.html#705893" title="Boolean" id="3320496" class="keyword">true</a><span class="delimiter">)</span><span class="delimiter">)</span> <span class="keyword">if</span> <a href="#766629" title="Inliners.this.global.icodes.global.Symbol">meth</a>.<a href="../../../../reflect/internal/Symbols.scala.html#411200" title="=&gt; Boolean">isClassConstructor</a> =&gt;
              <a href="../icode/Opcodes.scala.html#705589" title="(method: Inliners.this.global.icodes.global.Symbol, style: Inliners.this.global.icodes.opcodes.InvokeStyle)Inliners.this.global.icodes.opcodes.CALL_METHOD">CALL_METHOD</a><a href="#3320500" title="(x: Inliners.this.global.icodes.Instruction)Inliners.this.global.icodes.Instruction" class="delimiter">(</a><a href="#766629" title="Inliners.this.global.icodes.global.Symbol">meth</a>, <a href="../icode/Opcodes.scala.html#705891" title="(onInstance: Boolean)Inliners.this.global.icodes.opcodes.Static">Static</a><span class="delimiter">(</span><span title="Boolean(true)" class="keyword">true</span><span class="delimiter">)</span><span class="delimiter">)</span>

            <span class="keyword">case</span> _ =&gt; <a href="#766331" title="Inliners.this.global.icodes.Instruction">i</a>.<a href="../icode/Opcodes.scala.html#695888" title="()Inliners.this.global.icodes.Instruction">clone</a><a href="#3320500" title="(x: Inliners.this.global.icodes.Instruction)Inliners.this.global.icodes.Instruction" class="delimiter">(</a><span class="delimiter">)</span>
          <span class="delimiter">}</span>
          // check any pending NEW's
          <a href="#766091" title="scala.collection.mutable.Map[Inliners.this.global.icodes.Instruction,Inliners.this.global.icodes.opcodes.NEW]">pending</a> <a href="../../../../collection/mutable/MapLike.scala.html#87625" title="(key: Inliners.this.global.icodes.Instruction)Option[Inliners.this.global.icodes.opcodes.NEW]">remove</a> <a href="#766331" title="Inliners.this.global.icodes.Instruction">i</a> <a href="../../../../Option.scala.html#62884" title="(f: Inliners.this.global.icodes.opcodes.NEW =&gt; Unit)Unit">foreach</a> <span class="delimiter">(</span><a href="#766640" title="Inliners.this.global.icodes.opcodes.NEW">_</a>.<a href="../icode/Opcodes.scala.html#705372" title="(x$1: Inliners.this.global.icodes.opcodes.CALL_METHOD)Unit">init</a> = <a href="#766334" title="Inliners.this.global.icodes.Instruction">newInstr</a>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="Inliners.this.global.icodes.opcodes.CALL_METHOD" class="delimiter">[</span><a href="../icode/Opcodes.scala.html#624307" title="Inliners.this.global.icodes.opcodes.CALL_METHOD">CALL_METHOD</a><span class="delimiter">]</span><span class="delimiter">)</span>
          <a href="#766334" title="Inliners.this.global.icodes.Instruction">newInstr</a>
        <span class="delimiter">}</span>

        <a href="#764913" title="=&gt; Inliner.this.IMethodInfo">caller</a> <a href="#764701" title="(ls: List[Inliners.this.global.icodes.Local])Unit">addLocals</a> <span class="delimiter">(</span><a href="#764914" title="=&gt; Inliner.this.IMethodInfo">inc</a>.<a href="#764687" title="=&gt; List[Inliners.this.global.icodes.Local]">locals</a> <a href="../../../../collection/TraversableLike.scala.html#58063" title="(f: Inliners.this.global.icodes.Local =&gt; Inliners.this.global.icodes.Local)(implicit bf: scala.collection.generic.CanBuildFrom[List[Inliners.this.global.icodes.Local],Inliners.this.global.icodes.Local,List[Inliners.this.global.icodes.Local]])List[Inliners.this.global.icodes.Local]">map</a> <a href="#766089" title="(l: Inliners.this.global.icodes.Local)Inliners.this.global.icodes.Local">dupLocal</a><span class="delimiter">)</span>
        <a href="#764913" title="=&gt; Inliner.this.IMethodInfo">caller</a> <a href="#764702" title="(l: Inliners.this.global.icodes.Local)Unit">addLocal</a> <a href="#766084" title="Inliners.this.global.icodes.Local">inlinedThis</a>

        <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#766085" title="Inliners.this.global.icodes.Local">retVal</a> <span title="(x$1: AnyRef)Boolean">ne</span> <span title="Null(null)" class="keyword">null</span><span class="delimiter">)</span>
          <a href="#764913" title="=&gt; Inliner.this.IMethodInfo">caller</a> <a href="#764702" title="(l: Inliners.this.global.icodes.Local)Unit">addLocal</a> <a href="#766085" title="Inliners.this.global.icodes.Local">retVal</a>

        <a href="#764914" title="=&gt; Inliner.this.IMethodInfo">inc</a>.<a href="#764705" title="=&gt; Inliners.this.global.icodes.IMethod">m</a> <a href="../icode/Members.scala.html#695997" title="(f: Inliners.this.global.icodes.BasicBlock =&gt; scala.collection.mutable.Set[Inliners.this.global.icodes.Local])Unit">foreachBlock</a> <span class="delimiter">{</span> <a title="Inliners.this.global.icodes.BasicBlock" id="766695">b</a> =&gt;
          <a href="#766079" title="scala.collection.mutable.Map[Inliners.this.global.icodes.BasicBlock,Inliners.this.global.icodes.BasicBlock]">inlinedBlock</a> <a href="../../../../collection/mutable/MapLike.scala.html#87612" title="(kv: (Inliners.this.global.icodes.BasicBlock, Inliners.this.global.icodes.BasicBlock))inlinedBlock.type">+=</a> <span class="delimiter">(</span><a href="../../../../Predef.scala.html#7509" title="(x: Inliners.this.global.icodes.BasicBlock)ArrowAssoc[Inliners.this.global.icodes.BasicBlock]">b</a> <a href="../../../../Predef.scala.html#62634" title="(y: Inliners.this.global.icodes.BasicBlock)(Inliners.this.global.icodes.BasicBlock, Inliners.this.global.icodes.BasicBlock)">-&gt;</a> <a href="#766087" title="()Inliners.this.global.icodes.BasicBlock">newBlock</a><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span>
          <a href="../../../../collection/MapLike.scala.html#87535" title="(key: Inliners.this.global.icodes.BasicBlock)Inliners.this.global.icodes.BasicBlock">inlinedBlock</a><span class="delimiter">(</span><a href="#766695" title="Inliners.this.global.icodes.BasicBlock">b</a><span class="delimiter">)</span>.<a href="../icode/BasicBlocks.scala.html#695920" title="=&gt; scala.collection.mutable.Set[Inliners.this.global.icodes.Local]">varsInScope</a> <a href="../../../../collection/generic/Growable.scala.html#60003" title="(xs: scala.collection.TraversableOnce[Inliners.this.global.icodes.Local])scala.collection.mutable.Set[Inliners.this.global.icodes.Local]">++=</a> <span class="delimiter">(</span><a href="#766695" title="Inliners.this.global.icodes.BasicBlock">b</a>.<a href="../icode/BasicBlocks.scala.html#695920" title="=&gt; scala.collection.mutable.Set[Inliners.this.global.icodes.Local]">varsInScope</a> <a href="../../../../collection/SetLike.scala.html#66437" title="(f: Inliners.this.global.icodes.Local =&gt; Inliners.this.global.icodes.Local)(implicit bf: scala.collection.generic.CanBuildFrom[scala.collection.mutable.Set[Inliners.this.global.icodes.Local],Inliners.this.global.icodes.Local,scala.collection.TraversableOnce[Inliners.this.global.icodes.Local]])scala.collection.TraversableOnce[Inliners.this.global.icodes.Local]">map</a> <a href="#766086" title="scala.collection.mutable.HashMap[Inliners.this.global.icodes.Local,Inliners.this.global.icodes.Local]">inlinedLocals</a><span class="delimiter">)</span>
        <span class="delimiter">}</span>

        // re-emit the instructions before the call
        <a href="#765055" title="Inliners.this.global.icodes.BasicBlock">block</a>.<a href="../icode/BasicBlocks.scala.html#695954" title="()Unit">open</a>
        <a href="#765055" title="Inliners.this.global.icodes.BasicBlock">block</a>.<a href="../icode/BasicBlocks.scala.html#695955" title="()Unit">clear</a>
        <a href="#765055" title="Inliners.this.global.icodes.BasicBlock">block</a> <a href="../icode/BasicBlocks.scala.html#695949" title="(is: Seq[Inliners.this.global.icodes.Instruction])Unit">emit</a> <a href="#766082" title="List[Inliners.this.global.icodes.Instruction]">instrBefore</a>

        // store the arguments into special locals
        <a href="#764914" title="=&gt; Inliner.this.IMethodInfo">inc</a>.<a href="#764705" title="=&gt; Inliners.this.global.icodes.IMethod">m</a>.<a href="../icode/Members.scala.html#696024" title="=&gt; List[Inliners.this.global.icodes.Local]">params</a>.<a href="../../../../collection/immutable/List.scala.html#62716" title="=&gt; List[Inliners.this.global.icodes.Local]">reverse</a> <a href="../../../../collection/immutable/List.scala.html#62719" title="(f: Inliners.this.global.icodes.Local =&gt; Unit)Unit">foreach</a> <span class="delimiter">(</span><a title="Inliners.this.global.icodes.Local" id="766822">p</a> =&gt; <a href="#766073" title="(i: Inliners.this.global.icodes.Instruction)Unit">blockEmit</a><span class="delimiter">(</span><a href="../icode/Opcodes.scala.html#700870" title="(local: Inliners.this.global.icodes.Local)Inliners.this.global.icodes.opcodes.STORE_LOCAL">STORE_LOCAL</a><span class="delimiter">(</span><a href="../../../../collection/mutable/HashMap.scala.html#88245" title="(key: Inliners.this.global.icodes.Local)Inliners.this.global.icodes.Local">inlinedLocals</a><span class="delimiter">(</span><a href="#766822" title="Inliners.this.global.icodes.Local">p</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
        <a href="#766073" title="(i: Inliners.this.global.icodes.Instruction)Unit">blockEmit</a><span class="delimiter">(</span><a href="../icode/Opcodes.scala.html#700870" title="(local: Inliners.this.global.icodes.Local)Inliners.this.global.icodes.opcodes.STORE_LOCAL">STORE_LOCAL</a><span class="delimiter">(</span><a href="#766084" title="Inliners.this.global.icodes.Local">inlinedThis</a><span class="delimiter">)</span><span class="delimiter">)</span>

        // jump to the start block of the callee
        <a href="#766073" title="(i: Inliners.this.global.icodes.Instruction)Unit">blockEmit</a><span class="delimiter">(</span><a href="../icode/Opcodes.scala.html#700753" title="(whereto: Inliners.this.global.icodes.BasicBlock)Inliners.this.global.icodes.opcodes.JUMP">JUMP</a><span class="delimiter">(</span><a href="../../../../collection/MapLike.scala.html#87535" title="(key: Inliners.this.global.icodes.BasicBlock)Inliners.this.global.icodes.BasicBlock">inlinedBlock</a><span class="delimiter">(</span><a href="#764914" title="=&gt; Inliner.this.IMethodInfo">inc</a>.<a href="#764705" title="=&gt; Inliners.this.global.icodes.IMethod">m</a>.<a href="../icode/Members.scala.html#695993" title="=&gt; Inliners.this.global.icodes.BasicBlock">startBlock</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
        <a href="#765055" title="Inliners.this.global.icodes.BasicBlock">block</a>.<a href="../icode/BasicBlocks.scala.html#695953" title="()Unit">close</a>

        // duplicate the other blocks in the callee
        <span class="keyword">val</span> <a title="List[Inliners.this.global.icodes.BasicBlock]" id="766093">calleeLin</a> = <a href="#764914" title="=&gt; Inliner.this.IMethodInfo">inc</a>.<a href="#764705" title="=&gt; Inliners.this.global.icodes.IMethod">m</a>.<a href="../icode/Members.scala.html#695996" title="(lin: Inliners.this.global.icodes.Linearizer)List[Inliners.this.global.icodes.BasicBlock]">linearizedBlocks</a><span class="delimiter">(</span><span class="delimiter">)</span>
        <a href="#766093" title="List[Inliners.this.global.icodes.BasicBlock]">calleeLin</a> <a href="../../../../collection/immutable/List.scala.html#62719" title="(f: Inliners.this.global.icodes.BasicBlock =&gt; Unit)Unit">foreach</a> <span class="delimiter">{</span> <a title="Inliners.this.global.icodes.BasicBlock" id="766882">bb</a> =&gt;
          <span class="keyword">var</span> <a title="a.lattice.Elem" id="766883">info</a> = <span title="a.lattice.Elem" class="keyword">if</span><span class="delimiter">(</span><a href="#766076" title="Boolean">hasRETURN</a><span class="delimiter">)</span> <span class="delimiter">(</span><a href="#766077" title="Inliners.this.global.analysis.MethodTFA">a</a> <a href="../../../../collection/MapLike.scala.html#87535" title="(key: a.P)a.lattice.Elem">in</a> <a href="#766882" title="Inliners.this.global.icodes.BasicBlock">bb</a><span class="delimiter">)</span> <span class="keyword">else</span> <span title="Null(null)" class="keyword">null</span>
          <span class="keyword">def</span> <a title="(i: Inliners.this.global.icodes.Instruction)Unit" id="766884">emitInlined</a><span class="delimiter">(</span><a title="Inliners.this.global.icodes.Instruction" id="766901">i</a>: <a href="../icode/Opcodes.scala.html#614966" title="Inliners.this.global.icodes.Instruction">Instruction</a><span class="delimiter">)</span> = <a href="../../../../collection/MapLike.scala.html#87535" title="(key: Inliners.this.global.icodes.BasicBlock)Inliners.this.global.icodes.BasicBlock">inlinedBlock</a><span class="delimiter">(</span><a href="#766882" title="Inliners.this.global.icodes.BasicBlock">bb</a><span class="delimiter">)</span>.<a href="../icode/BasicBlocks.scala.html#695948" title="(instr: Inliners.this.global.icodes.Instruction, pos: scala.reflect.internal.util.Position)Unit">emit</a><span class="delimiter">(</span><a href="#766901" title="Inliners.this.global.icodes.Instruction">i</a>, <a href="#766072" title="scala.reflect.internal.util.Position">targetPos</a><span class="delimiter">)</span>
          <span class="keyword">def</span> <a title="(toDrop: Int)Unit" id="766885">emitDrops</a><span class="delimiter">(</span><a title="Int" id="766923">toDrop</a>: <a href="../../../../Int.scala.html#321" title="Int">Int</a><span class="delimiter">)</span>      = <a href="#766883" title="a.lattice.Elem">info</a>.<a href="../icode/analysis/SemiLattice.scala.html#723175" title="=&gt; Inliners.this.global.analysis.global.icodes.TypeStack">stack</a>.<a href="../icode/TypeStacks.scala.html#709017" title="=&gt; Inliners.this.global.analysis.global.icodes.Rep">types</a> <a href="../../../../collection/immutable/List.scala.html#62709" title="(n: Int)List[Inliners.this.global.analysis.global.icodes.TypeKind]">drop</a> <a href="#766923" title="Int">toDrop</a> <a href="../../../../collection/immutable/List.scala.html#62719" title="(f: Inliners.this.global.analysis.global.icodes.TypeKind =&gt; Unit)Unit">foreach</a> <span class="delimiter">(</span><a title="Inliners.this.global.analysis.global.icodes.TypeKind" id="766951">t</a> =&gt; <a href="#766884" title="(i: Inliners.this.global.icodes.Instruction)Unit">emitInlined</a><span class="delimiter">(</span><a href="../icode/Opcodes.scala.html#704125" title="(typ: Inliners.this.global.icodes.TypeKind)Inliners.this.global.icodes.opcodes.DROP">DROP</a><span class="delimiter">(</span><a href="#766951" title="Inliners.this.global.analysis.global.icodes.TypeKind">t</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>

          <span class="keyword">for</span> <span class="delimiter">(</span><a title="Inliners.this.global.icodes.Instruction" id="766959">i</a> &lt;- <a href="../icode/BasicBlocks.scala.html#695934" title="(f: Inliners.this.global.icodes.Instruction =&gt; Unit)Unit">bb</a><span class="delimiter">)</span> <span class="delimiter">{</span>
            <a href="#766959" title="Inliners.this.global.icodes.Instruction">i</a> <span class="keyword">match</span> <span class="delimiter">{</span>
              <span class="keyword">case</span> RETURN<a href="#3320522" title="Boolean" id="3320525" class="delimiter">(</a><a href="../icode/Opcodes.scala.html#700784" title="Inliners.this.global.icodes.TypeKind" id="3320529">UNIT</a><span class="delimiter">)</span> =&gt; <a href="#766885" title="(toDrop: Int)Unit">emitDrops</a><a href="#3320532" title="(x: Unit)Unit" class="delimiter">(</a><span title="Int(0)" class="int">0</span><span class="delimiter">)</span>
              <span class="keyword">case</span> RETURN<span class="delimiter">(</span><a href="../icode/Opcodes.scala.html#700784" title="Inliners.this.global.icodes.TypeKind" id="766962">kind</a><span class="delimiter">)</span> =&gt;
                <a href="#3320532" title="(x: Unit)Unit" class="keyword">if</a> <span class="delimiter">(</span><a href="#766883" title="a.lattice.Elem">info</a>.<a href="../icode/analysis/SemiLattice.scala.html#723175" title="=&gt; Inliners.this.global.analysis.global.icodes.TypeStack">stack</a>.<a href="../icode/TypeStacks.scala.html#709023" title="=&gt; Int">length</a> <a href="../../../../Int.scala.html#57125" title="(x: Int)Boolean">&gt;</a> <span title="Int(1)" class="int">1</span><span class="delimiter">)</span> <span class="delimiter">{</span>
                  <a href="#766884" title="(i: Inliners.this.global.icodes.Instruction)Unit">emitInlined</a><span class="delimiter">(</span><a href="../icode/Opcodes.scala.html#700870" title="(local: Inliners.this.global.icodes.Local)Inliners.this.global.icodes.opcodes.STORE_LOCAL">STORE_LOCAL</a><span class="delimiter">(</span><a href="#766085" title="Inliners.this.global.icodes.Local">retVal</a><span class="delimiter">)</span><span class="delimiter">)</span>
                  <a href="#766885" title="(toDrop: Int)Unit">emitDrops</a><span class="delimiter">(</span><span title="Int(1)" class="int">1</span><span class="delimiter">)</span>
                  <a href="#766884" title="(i: Inliners.this.global.icodes.Instruction)Unit">emitInlined</a><span class="delimiter">(</span><a href="../icode/Opcodes.scala.html#703701" title="(local: Inliners.this.global.icodes.Local)Inliners.this.global.icodes.opcodes.LOAD_LOCAL">LOAD_LOCAL</a><span class="delimiter">(</span><a href="#766085" title="Inliners.this.global.icodes.Local">retVal</a><span class="delimiter">)</span><span class="delimiter">)</span>
                <span class="delimiter">}</span>
              <span class="keyword">case</span> _            =&gt; <a href="#3320532" title="(x: Unit)Unit" class="delimiter">(</a><span class="delimiter">)</span>
            <span class="delimiter">}</span>
            <a href="#766884" title="(i: Inliners.this.global.icodes.Instruction)Unit">emitInlined</a><span class="delimiter">(</span><a href="#766092" title="(i: Inliners.this.global.icodes.Instruction)Inliners.this.global.icodes.Instruction">map</a><span class="delimiter">(</span><a href="#766959" title="Inliners.this.global.icodes.Instruction">i</a><span class="delimiter">)</span><span class="delimiter">)</span>
            <a href="#766883" title="a.lattice.Elem">info</a> = <span title="a.lattice.Elem" class="keyword">if</span><span class="delimiter">(</span><a href="#766076" title="Boolean">hasRETURN</a><span class="delimiter">)</span> <a href="#766077" title="Inliners.this.global.analysis.MethodTFA">a</a>.<a href="../icode/analysis/TypeFlowAnalysis.scala.html#725528" title="(in: Inliners.this.global.analysis.typeFlowLattice.Elem, i: Inliners.this.global.analysis.global.icodes.Instruction)Inliners.this.global.analysis.typeFlowLattice.Elem">interpret</a><span class="delimiter">(</span><a href="#766883" title="a.lattice.Elem">info</a>, <a href="#766959" title="Inliners.this.global.icodes.Instruction">i</a><span class="delimiter">)</span> <span class="keyword">else</span> <span title="Null(null)" class="keyword">null</span>
          <span class="delimiter">}</span>
          <a href="../../../../collection/MapLike.scala.html#87535" title="(key: Inliners.this.global.icodes.BasicBlock)Inliners.this.global.icodes.BasicBlock">inlinedBlock</a><span class="delimiter">(</span><a href="#766882" title="Inliners.this.global.icodes.BasicBlock">bb</a><span class="delimiter">)</span>.<a href="../icode/BasicBlocks.scala.html#695953" title="()Unit">close</a>
        <span class="delimiter">}</span>

        <a href="#766090" title="Inliners.this.global.icodes.BasicBlock">afterBlock</a> <a href="../icode/BasicBlocks.scala.html#695949" title="(is: Seq[Inliners.this.global.icodes.Instruction])Unit">emit</a> <a href="#766083" title="List[Inliners.this.global.icodes.Instruction]">instrAfter</a>
        <a href="#766090" title="Inliners.this.global.icodes.BasicBlock">afterBlock</a>.<a href="../icode/BasicBlocks.scala.html#695953" title="()Unit">close</a>

        <a href="#764202" title="=&gt; scala.collection.mutable.Set[Inliners.this.global.icodes.BasicBlock]">staleIn</a>        <a href="../../../../collection/mutable/SetLike.scala.html#90897" title="(elem: Inliners.this.global.icodes.BasicBlock)Inliner.this.staleIn.type">+=</a> <a href="#766090" title="Inliners.this.global.icodes.BasicBlock">afterBlock</a>
        <a href="#764200" title="=&gt; scala.collection.mutable.Set[Inliners.this.global.icodes.BasicBlock]">splicedBlocks</a> <a href="../../../../collection/generic/Growable.scala.html#60003" title="(xs: scala.collection.TraversableOnce[Inliners.this.global.icodes.BasicBlock])Inliner.this.splicedBlocks.type">++=</a> <span class="delimiter">(</span><a href="#766093" title="List[Inliners.this.global.icodes.BasicBlock]">calleeLin</a> <a href="../../../../collection/TraversableLike.scala.html#58063" title="(f: Inliners.this.global.icodes.BasicBlock =&gt; Inliners.this.global.icodes.BasicBlock)(implicit bf: scala.collection.generic.CanBuildFrom[List[Inliners.this.global.icodes.BasicBlock],Inliners.this.global.icodes.BasicBlock,scala.collection.TraversableOnce[Inliners.this.global.icodes.BasicBlock]])scala.collection.TraversableOnce[Inliners.this.global.icodes.BasicBlock]">map</a> <a href="#766079" title="scala.collection.mutable.Map[Inliners.this.global.icodes.BasicBlock,Inliners.this.global.icodes.BasicBlock]">inlinedBlock</a><span class="delimiter">)</span>

        // add exception handlers of the callee
        <a href="#764913" title="=&gt; Inliner.this.IMethodInfo">caller</a> <a href="#764703" title="(exhs: List[Inliners.this.global.icodes.ExceptionHandler])Unit">addHandlers</a> <span class="delimiter">(</span><a href="#764914" title="=&gt; Inliner.this.IMethodInfo">inc</a>.<a href="#764685" title="=&gt; List[Inliners.this.global.icodes.ExceptionHandler]">handlers</a> <a href="../../../../collection/TraversableLike.scala.html#58063" title="(f: Inliners.this.global.icodes.ExceptionHandler =&gt; Inliners.this.global.icodes.ExceptionHandler)(implicit bf: scala.collection.generic.CanBuildFrom[List[Inliners.this.global.icodes.ExceptionHandler],Inliners.this.global.icodes.ExceptionHandler,List[Inliners.this.global.icodes.ExceptionHandler]])List[Inliners.this.global.icodes.ExceptionHandler]">map</a> <a href="#766088" title="(e: Inliners.this.global.icodes.ExceptionHandler)Inliners.this.global.icodes.ExceptionHandler">translateExh</a><span class="delimiter">)</span>
        <a href="../../Global.scala.html#537497" title="(assertion: Boolean, message: =&gt; Any)Unit">assert</a><span class="delimiter">(</span><a href="#766091" title="scala.collection.mutable.Map[Inliners.this.global.icodes.Instruction,Inliners.this.global.icodes.opcodes.NEW]">pending</a>.<a href="../../../../collection/MapLike.scala.html#87531" title="=&gt; Boolean">isEmpty</a>, <span title="String(&quot;Pending NEW elements: &quot;)" class="string">&quot;Pending NEW elements: &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#766091" title="scala.collection.mutable.Map[Inliners.this.global.icodes.Instruction,Inliners.this.global.icodes.opcodes.NEW]">pending</a><span class="delimiter">)</span>
        <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="../../Global.scala.html#537448" title="=&gt; scala.tools.nsc.Settings">settings</a>.<a href="../../settings/ScalaSettings.scala.html#540057" title="=&gt; scala.tools.nsc.Settings#BooleanSetting">debug</a>.<a href="../../settings/MutableSettings.scala.html#541066" title="=&gt; Boolean">value</a><span class="delimiter">)</span> <a href="../../Global.scala.html#537466" title="Inliners.this.global.icodes.type">icodes</a>.<a href="../icode/ICodes.scala.html#614889" title="(m: Inliners.this.global.icodes.IMethod)Unit">checkValid</a><span class="delimiter">(</span><a href="#764913" title="=&gt; Inliner.this.IMethodInfo">caller</a>.<a href="#764705" title="=&gt; Inliners.this.global.icodes.IMethod">m</a><span class="delimiter">)</span>
      <span class="delimiter">}</span>

      <span class="keyword">def</span> <a title="(stackLength: Int)Inliner.this.InlineSafetyInfo" id="764908">isStampedForInlining</a><span class="delimiter">(</span><a title="Int" id="764923">stackLength</a>: <a href="../../../../Int.scala.html#321" title="Int">Int</a><span class="delimiter">)</span>: <a href="#764208" title="Inliner.this.InlineSafetyInfo">InlineSafetyInfo</a> = <span class="delimiter">{</span>

        <span title="Unit" class="keyword">if</span><span class="delimiter">(</span><a href="#764196" title="=&gt; Inliners.this.global.analysis.MTFAGrowable">tfa</a>.<a href="../icode/analysis/TypeFlowAnalysis.scala.html#726772" title="(msym: Inliners.this.global.analysis.global.Symbol)Boolean">blackballed</a><span class="delimiter">(</span><a href="#764914" title="=&gt; Inliner.this.IMethodInfo">inc</a>.<a href="#764672" title="=&gt; Inliners.this.global.icodes.global.Symbol">sym</a><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">{</span> <span title="Nothing" class="keyword">return</span> <a href="#765852" title="Inliner.this.NeverSafeToInline.type">NeverSafeToInline</a> <span class="delimiter">}</span>

        <span title="Unit" class="keyword">if</span><span class="delimiter">(</span><a href="../../../../Boolean.scala.html#57822" title="=&gt; Boolean">!</a><a href="#764902" title="=&gt; Boolean">isKnownToInlineSafely</a><span class="delimiter">)</span> <span class="delimiter">{</span>

          <span title="Unit" class="keyword">if</span><span class="delimiter">(</span><a href="#764914" title="=&gt; Inliner.this.IMethodInfo">inc</a>.<a href="#764689" title="=&gt; List[Inliners.this.global.icodes.BasicBlock]">openBlocks</a>.<a href="../../../../collection/TraversableOnce.scala.html#58191" title="=&gt; Boolean">nonEmpty</a><span class="delimiter">)</span> <span class="delimiter">{</span>
            <span class="keyword">val</span> <a title="String" id="767111">msg</a> = <span class="delimiter">(</span><span title="String(&quot;Encountered &quot;)" class="string">&quot;Encountered &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#764914" title="=&gt; Inliner.this.IMethodInfo">inc</a>.<a href="#764689" title="=&gt; List[Inliners.this.global.icodes.BasicBlock]">openBlocks</a>.<a href="../../../../collection/SeqLike.scala.html#58788" title="=&gt; Int">size</a> <span title="(x$1: Any)String">+</span> <span title="String(&quot; open block(s) in isSafeToInline: this indicates a bug in the optimizer!\n&quot;)" class="string">&quot; open block(s) in isSafeToInline: this indicates a bug in the optimizer!\n&quot;</span> <span title="(x$1: Any)String">+</span>
                       <span title="String(&quot;  caller = &quot;)" class="string">&quot;  caller = &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#764913" title="=&gt; Inliner.this.IMethodInfo">caller</a>.<a href="#764705" title="=&gt; Inliners.this.global.icodes.IMethod">m</a> <span title="(x$1: Any)String">+</span> <span title="String(&quot;, callee = &quot;)" class="string">&quot;, callee = &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#764914" title="=&gt; Inliner.this.IMethodInfo">inc</a>.<a href="#764705" title="=&gt; Inliners.this.global.icodes.IMethod">m</a><span class="delimiter">)</span>
            <a href="#764185" title="(pos: Inliners.this.global.Position, msg: String)Any">warn</a><span class="delimiter">(</span><a href="#764914" title="=&gt; Inliner.this.IMethodInfo">inc</a>.<a href="#764672" title="=&gt; Inliners.this.global.icodes.global.Symbol">sym</a>.<a href="../../../../reflect/internal/StdAttachments.scala.html#409602" title="=&gt; Inliners.this.global.icodes.global.Position">pos</a>, <a href="#767111" title="String">msg</a><span class="delimiter">)</span>
            <a href="#764196" title="=&gt; Inliners.this.global.analysis.MTFAGrowable">tfa</a>.<a href="../icode/analysis/TypeFlowAnalysis.scala.html#726770" title="=&gt; scala.collection.mutable.Set[Inliners.this.global.analysis.global.Symbol]">knownNever</a> <a href="../../../../collection/mutable/SetLike.scala.html#90897" title="(elem: Inliners.this.global.analysis.global.Symbol)Inliner.this.tfa.knownNever.type">+=</a> <a href="#764914" title="=&gt; Inliner.this.IMethodInfo">inc</a>.<a href="#764672" title="=&gt; Inliners.this.global.icodes.global.Symbol">sym</a>
            <span title="Nothing" class="keyword">return</span> <a href="#767363" title="(msg: String)Inliner.this.DontInlineHere">DontInlineHere</a><span class="delimiter">(</span><span title="String(&quot;Open blocks in &quot;)" class="string">&quot;Open blocks in &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#764914" title="=&gt; Inliner.this.IMethodInfo">inc</a>.<a href="#764705" title="=&gt; Inliners.this.global.icodes.IMethod">m</a><span class="delimiter">)</span>
          <span class="delimiter">}</span>

          <span class="keyword">val</span> <a title="String" id="767109">reasonWhyNever</a>: <span title="String">String</span> = <span class="delimiter">{</span>
            <span class="keyword">var</span> <a title="List[String]" id="767124">rs</a>: <a href="../../../../collection/immutable/List.scala.html#11952" title="List[String]">List</a><span class="delimiter">[</span>String<span class="delimiter">]</span> = <a href="../../../../collection/immutable/List.scala.html#11188" title="scala.collection.immutable.Nil.type">Nil</a>
            <span title="Unit" class="keyword">if</span><span class="delimiter">(</span><a href="#764914" title="=&gt; Inliner.this.IMethodInfo">inc</a>.<a href="#764693" title="=&gt; Boolean">isRecursive</a><span class="delimiter">)</span>    <span class="delimiter">{</span> <a href="#767124" title="List[String]">rs</a> <a href="../../../../collection/immutable/List.scala.html#62685" title="(x: String)List[String]">::=</a> <span title="String(&quot;is recursive&quot;)" class="string">&quot;is recursive&quot;</span>           <span class="delimiter">}</span>
            <span title="Unit" class="keyword">if</span><span class="delimiter">(</span><a href="#764905" title="=&gt; Boolean">isInlineForbidden</a><span class="delimiter">)</span>  <span class="delimiter">{</span> <a href="#767124" title="List[String]">rs</a> <a href="../../../../collection/immutable/List.scala.html#62685" title="(x: String)List[String]">::=</a> <span title="String(&quot;is annotated @noinline&quot;)" class="string">&quot;is annotated @noinline&quot;</span> <span class="delimiter">}</span>
            <span title="Unit" class="keyword">if</span><span class="delimiter">(</span><a href="#764914" title="=&gt; Inliner.this.IMethodInfo">inc</a>.<a href="#764696" title="=&gt; Boolean">isSynchronized</a><span class="delimiter">)</span> <span class="delimiter">{</span> <a href="#767124" title="List[String]">rs</a> <a href="../../../../collection/immutable/List.scala.html#62685" title="(x: String)List[String]">::=</a> <span title="String(&quot;is synchronized method&quot;)" class="string">&quot;is synchronized method&quot;</span> <span class="delimiter">}</span>
            <span title="Unit" class="keyword">if</span><span class="delimiter">(</span><a href="#764914" title="=&gt; Inliner.this.IMethodInfo">inc</a>.<a href="#764705" title="=&gt; Inliners.this.global.icodes.IMethod">m</a>.<a href="../icode/Members.scala.html#696018" title="=&gt; Boolean">bytecodeHasEHs</a><span class="delimiter">)</span> <span class="delimiter">{</span> <a href="#767124" title="List[String]">rs</a> <a href="../../../../collection/immutable/List.scala.html#62685" title="(x: String)List[String]">::=</a> <span title="String(&quot;bytecode contains exception handlers / finally clause&quot;)" class="string">&quot;bytecode contains exception handlers / finally clause&quot;</span> <span class="delimiter">}</span> // SI-6188
            <span title="String" class="keyword">if</span><span class="delimiter">(</span><a href="#767124" title="List[String]">rs</a>.<a href="../../../../collection/SeqLike.scala.html#58787" title="=&gt; Boolean">isEmpty</a><span class="delimiter">)</span> <span title="Null(null)" class="keyword">null</span> <span class="keyword">else</span> <a href="#767124" title="List[String]">rs</a>.<a href="../../../../collection/TraversableOnce.scala.html#58282" title="(start: String, sep: String, end: String)String">mkString</a><span class="delimiter">(</span><span title="String(&quot;&quot;)" class="string">&quot;&quot;</span>, <span title="String(&quot;, and &quot;)" class="string">&quot;, and &quot;</span>, <span title="String(&quot;&quot;)" class="string">&quot;&quot;</span><span class="delimiter">)</span>
          <span class="delimiter">}</span>

          <span title="Unit" class="keyword">if</span><span class="delimiter">(</span><a href="#767109" title="String">reasonWhyNever</a> <span title="(x$1: AnyRef)Boolean">!=</span> <span title="Null(null)" class="keyword">null</span><span class="delimiter">)</span> <span class="delimiter">{</span>
            <a href="#764196" title="=&gt; Inliners.this.global.analysis.MTFAGrowable">tfa</a>.<a href="../icode/analysis/TypeFlowAnalysis.scala.html#726770" title="=&gt; scala.collection.mutable.Set[Inliners.this.global.analysis.global.Symbol]">knownNever</a> <a href="../../../../collection/mutable/SetLike.scala.html#90897" title="(elem: Inliners.this.global.analysis.global.Symbol)Inliner.this.tfa.knownNever.type">+=</a> <a href="#764914" title="=&gt; Inliner.this.IMethodInfo">inc</a>.<a href="#764672" title="=&gt; Inliners.this.global.icodes.global.Symbol">sym</a>
            <a href="#764188" title="(what: String, main: Inliners.this.global.Symbol, comment: =&gt; String)Unit">inlineLog</a><span class="delimiter">(</span><span title="String(&quot;never&quot;)" class="string">&quot;never&quot;</span>, <a href="#764914" title="=&gt; Inliner.this.IMethodInfo">inc</a>.<a href="#764672" title="=&gt; Inliners.this.global.icodes.global.Symbol">sym</a>, <a href="#767109" title="String">reasonWhyNever</a><span class="delimiter">)</span>
            // next time around NeverSafeToInline is returned, thus skipping (duplicate) msg, this is intended.
            <span title="Nothing" class="keyword">return</span> <a href="#767363" title="(msg: String)Inliner.this.DontInlineHere">DontInlineHere</a><span class="delimiter">(</span><a href="#764914" title="=&gt; Inliner.this.IMethodInfo">inc</a>.<a href="../../../../Predef.scala.html#7605" title="implicit scala.Predef.any2stringadd : (x: Any)scala.runtime.StringAdd">m</a> <a href="../../../../runtime/StringAdd.scala.html#60046" title="(other: String)String">+</a> <span title="String(&quot; &quot;)" class="string">&quot; &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#767109" title="String">reasonWhyNever</a><span class="delimiter">)</span>
          <span class="delimiter">}</span>

          <span title="Unit" class="keyword">if</span><span class="delimiter">(</span><a href="#764910" title="=&gt; Boolean">sameSymbols</a><span class="delimiter">)</span> <span class="delimiter">{</span> // TODO but this also amounts to recursive, ie should lead to adding to tfa.knownNever, right?
            <a href="#764196" title="=&gt; Inliners.this.global.analysis.MTFAGrowable">tfa</a>.<a href="../icode/analysis/TypeFlowAnalysis.scala.html#726766" title="=&gt; scala.collection.mutable.Set[Inliners.this.global.analysis.global.Symbol]">knownUnsafe</a> <a href="../../../../collection/mutable/SetLike.scala.html#90897" title="(elem: Inliners.this.global.analysis.global.Symbol)Inliner.this.tfa.knownUnsafe.type">+=</a> <a href="#764914" title="=&gt; Inliner.this.IMethodInfo">inc</a>.<a href="#764672" title="=&gt; Inliners.this.global.icodes.global.Symbol">sym</a>;
            <span title="Nothing" class="keyword">return</span> <a href="#767363" title="(msg: String)Inliner.this.DontInlineHere">DontInlineHere</a><span class="delimiter">(</span><span title="String(&quot;sameSymbols (ie caller == callee)&quot;)" class="string">&quot;sameSymbols (ie caller == callee)&quot;</span><span class="delimiter">)</span>
          <span class="delimiter">}</span>

        <span class="delimiter">}</span>

        /*
         * From here on, two main categories of checks remain, (a) and (b) below:
         *   (a.1) either the scoring heuristics give green light; or
         *   (a.2) forced as candidate due to @inline.
         * After that, safety proper is checked:
         *   (b.1) the callee does not contain calls to private methods when called from another class
         *   (b.2) the callee is not going to be inlined into a position with non-empty stack,
         *         while having a top-level finalizer (see liftedTry problem)
         * As a result of (b), some synthetic private members can be chosen to become public.
         */

        <span class="keyword">val</span> <a title="Int" id="767104">score</a>    = <a href="#764912" title="=&gt; Int">inlinerScore</a>
        <span class="keyword">val</span> <a title="String" id="767105">scoreStr</a> = <span title="String" class="keyword">if</span> <span class="delimiter">(</span><a href="#767104" title="Int">score</a> <a href="../../../../Int.scala.html#57125" title="(x: Int)Boolean">&gt;</a> <span title="Int(0)" class="int">0</span><span class="delimiter">)</span> <span title="String(&quot;+&quot;)" class="string">&quot;+&quot;</span> <span title="(x$1: Any)String">+</span> <a href="#767104" title="Int">score</a> <span class="keyword">else</span> <span title="String(&quot;&quot;)" class="string">&quot;&quot;</span> <span title="(x$1: Any)String">+</span> <a href="#767104" title="Int">score</a>
        <span class="keyword">val</span> <a title="String" id="767106">what</a>     = <span title="String" class="keyword">if</span> <span class="delimiter">(</span><a href="#767104" title="Int">score</a> <a href="../../../../Int.scala.html#57125" title="(x: Int)Boolean">&gt;</a> <span title="Int(0)" class="int">0</span><span class="delimiter">)</span> <span title="String(&quot;ok to&quot;)" class="string">&quot;ok to&quot;</span> <span class="keyword">else</span> <span title="String(&quot;don\'t&quot;)" class="string">&quot;don't&quot;</span>
        <a href="#764188" title="(what: String, main: Inliners.this.global.Symbol, comment: =&gt; String)Unit">inlineLog</a><span class="delimiter">(</span><a href="#767105" title="String">scoreStr</a>, <a href="#764914" title="=&gt; Inliner.this.IMethodInfo">inc</a>.<a href="#764705" title="=&gt; Inliners.this.global.icodes.IMethod">m</a>.<a href="../icode/Members.scala.html#695986" title="=&gt; Inliners.this.global.icodes.global.Symbol">symbol</a>, <a href="../../../../StringContext.scala.html#56629" title="(args: Any*)String">s</a>&quot;$<a href="#767106" title="String">what</a> inline into $<span class="delimiter">{</span><a href="#764186" title="(sym: Inliners.this.global.Symbol)String">ownedName</a><span class="delimiter">(</span><a href="#764913" title="=&gt; Inliner.this.IMethodInfo">caller</a>.<a href="#764705" title="=&gt; Inliners.this.global.icodes.IMethod">m</a>.<a href="../icode/Members.scala.html#695986" title="=&gt; Inliners.this.global.icodes.global.Symbol">symbol</a><span class="delimiter">)</span><span class="delimiter">}</span><span class="string">&quot;</span><span class="delimiter">)</span>

        <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="../../../../Boolean.scala.html#57822" title="=&gt; Boolean">!</a><a href="#764903" title="=&gt; Boolean">isInlineForced</a> <a href="../../../../Boolean.scala.html#57826" title="(x: Boolean)Boolean">&amp;&amp;</a> <a href="#767104" title="Int">score</a> <a href="../../../../Int.scala.html#57118" title="(x: Int)Boolean">&lt;=</a> <span title="Int(0)" class="int">0</span><span class="delimiter">)</span> <span class="delimiter">{</span>
          // During inlining retry, a previous caller-callee pair that scored low may pass.
          // Thus, adding the callee to tfa.knownUnsafe isn't warranted.
          <span title="Nothing" class="keyword">return</span> <a href="#767363" title="(msg: String)Inliner.this.DontInlineHere">DontInlineHere</a><span class="delimiter">(</span><a href="../../../../StringContext.scala.html#56629" title="(args: Any*)String">s</a><span class="string">&quot;inliner heuristic&quot;</span><span class="delimiter">)</span>
        <span class="delimiter">}</span>

        <span title="Unit" class="keyword">if</span><span class="delimiter">(</span><a href="#764914" title="=&gt; Inliner.this.IMethodInfo">inc</a>.<a href="#764694" title="=&gt; Boolean">hasHandlers</a> <a href="../../../../Boolean.scala.html#57826" title="(x: Boolean)Boolean">&amp;&amp;</a> <span class="delimiter">(</span><a href="#764923" title="Int">stackLength</a> <a href="../../../../Int.scala.html#57125" title="(x: Int)Boolean">&gt;</a> <a href="#764914" title="=&gt; Inliner.this.IMethodInfo">inc</a>.<a href="#764678" title="=&gt; Int">minimumStack</a><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">{</span>
          <span title="Nothing" class="keyword">return</span> <a href="#767363" title="(msg: String)Inliner.this.DontInlineHere">DontInlineHere</a><span class="delimiter">(</span><span title="String(&quot;callee contains exception handlers / finally clause, and is invoked with non-empty operand stack&quot;)" class="string">&quot;callee contains exception handlers / finally clause, and is invoked with non-empty operand stack&quot;</span><span class="delimiter">)</span> // SI-6157
        <span class="delimiter">}</span>

        <span title="Unit" class="keyword">if</span><span class="delimiter">(</span><a href="#764902" title="=&gt; Boolean">isKnownToInlineSafely</a><span class="delimiter">)</span> <span class="delimiter">{</span> <span title="Nothing" class="keyword">return</span> <a href="#765868" title="Inliner.this.InlineableAtThisCaller.type">InlineableAtThisCaller</a> <span class="delimiter">}</span>

        <span title="Unit" class="keyword">if</span><span class="delimiter">(</span><a href="#764923" title="Int">stackLength</a> <a href="../../../../Int.scala.html#57125" title="(x: Int)Boolean">&gt;</a> <a href="#764914" title="=&gt; Inliner.this.IMethodInfo">inc</a>.<a href="#764678" title="=&gt; Int">minimumStack</a> <a href="../../../../Boolean.scala.html#57826" title="(x: Boolean)Boolean">&amp;&amp;</a> <a href="#764914" title="=&gt; Inliner.this.IMethodInfo">inc</a>.<a href="#764697" title="=&gt; Boolean">hasNonFinalizerHandler</a><span class="delimiter">)</span> <span class="delimiter">{</span>
          <span class="keyword">val</span> <a title="String" id="767211">msg</a> = <span title="String(&quot;method &quot;)" class="string">&quot;method &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#764914" title="=&gt; Inliner.this.IMethodInfo">inc</a>.<a href="#764672" title="=&gt; Inliners.this.global.icodes.global.Symbol">sym</a> <span title="(x$1: Any)String">+</span> <span title="String(&quot; is used on a non-empty stack with finalizer.&quot;)" class="string">&quot; is used on a non-empty stack with finalizer.&quot;</span>
          <a href="../../Global.scala.html#537517" title="(msg: =&gt; String)Unit">debuglog</a><span class="delimiter">(</span><a href="#767211" title="String">msg</a><span class="delimiter">)</span>
          // FYI: not reason enough to add inc.sym to tfa.knownUnsafe (because at other callsite in this caller, inlining might be ok)
          <span title="Nothing" class="keyword">return</span> <a href="#767363" title="(msg: String)Inliner.this.DontInlineHere">DontInlineHere</a><span class="delimiter">(</span><a href="#767211" title="String">msg</a><span class="delimiter">)</span>
        <span class="delimiter">}</span>

        <span class="keyword">val</span> <a title="Inliner.this.AccessReq" id="767107">accReq</a> = <a href="#764914" title="=&gt; Inliner.this.IMethodInfo">inc</a>.<a href="#764704" title="=&gt; Inliner.this.AccessReq">accessRequirements</a>
        <span title="Unit" class="keyword">if</span><span class="delimiter">(</span><a href="../../../../Boolean.scala.html#57822" title="=&gt; Boolean">!</a><a href="#764909" title="(level: Inliner.this.NonPublicRefs.Value)Boolean">canAccess</a><span class="delimiter">(</span><a href="#767107" title="Inliner.this.AccessReq">accReq</a>.<a href="#765833" title="=&gt; Inliner.this.NonPublicRefs.Value">accessNeeded</a><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">{</span>
          <a href="#764196" title="=&gt; Inliners.this.global.analysis.MTFAGrowable">tfa</a>.<a href="../icode/analysis/TypeFlowAnalysis.scala.html#726766" title="=&gt; scala.collection.mutable.Set[Inliners.this.global.analysis.global.Symbol]">knownUnsafe</a> <a href="../../../../collection/mutable/SetLike.scala.html#90897" title="(elem: Inliners.this.global.analysis.global.Symbol)Inliner.this.tfa.knownUnsafe.type">+=</a> <a href="#764914" title="=&gt; Inliner.this.IMethodInfo">inc</a>.<a href="#764672" title="=&gt; Inliners.this.global.icodes.global.Symbol">sym</a>
          <span class="keyword">val</span> <a title="String" id="767222">msg</a> = <span title="String(&quot;access level required by callee not matched by caller&quot;)" class="string">&quot;access level required by callee not matched by caller&quot;</span>
          <a href="#764188" title="(what: String, main: Inliners.this.global.Symbol, comment: =&gt; String)Unit">inlineLog</a><span class="delimiter">(</span><span title="String(&quot;fail&quot;)" class="string">&quot;fail&quot;</span>, <a href="#764914" title="=&gt; Inliner.this.IMethodInfo">inc</a>.<a href="#764672" title="=&gt; Inliners.this.global.icodes.global.Symbol">sym</a>, <a href="#767222" title="String">msg</a><span class="delimiter">)</span>
          <span title="Nothing" class="keyword">return</span> <a href="#767363" title="(msg: String)Inliner.this.DontInlineHere">DontInlineHere</a><span class="delimiter">(</span><a href="#767222" title="String">msg</a><span class="delimiter">)</span>
        <span class="delimiter">}</span>

        <a href="#767367" title="(accessNeeded: Inliner.this.NonPublicRefs.Value, toBecomePublic: List[Inliners.this.global.Symbol])Inliner.this.FeasibleInline">FeasibleInline</a><span class="delimiter">(</span><a href="#767107" title="Inliner.this.AccessReq">accReq</a>.<a href="#765833" title="=&gt; Inliner.this.NonPublicRefs.Value">accessNeeded</a>, <a href="#767107" title="Inliner.this.AccessReq">accReq</a>.<a href="#765834" title="=&gt; List[Inliners.this.global.Symbol]">toBecomePublic</a><span class="delimiter">)</span>

      <span class="delimiter">}</span>

      <span class="keyword">def</span> <a title="(level: Inliner.this.NonPublicRefs.Value)Boolean" id="764909">canAccess</a><span class="delimiter">(</span><a title="Inliner.this.NonPublicRefs.Value" id="767212">level</a>: NonPublicRefs.<a href="../../../../Enumeration.scala.html#87256" title="Inliner.this.NonPublicRefs.Value">Value</a><span class="delimiter">)</span> = <a href="#767212" title="Inliner.this.NonPublicRefs.Value">level</a> <span class="keyword">match</span> <span class="delimiter">{</span>
        <span class="keyword">case</span> <a href="#764349" title="Boolean" id="3320548">Private</a>    =&gt; <a href="#764913" title="=&gt; Inliner.this.IMethodInfo">caller</a>.<a href="#764676" title="=&gt; Inliners.this.global.icodes.global.Symbol">owner</a> <a href="#3320555" title="(x: Boolean)Boolean">==</a> <a href="#764914" title="=&gt; Inliner.this.IMethodInfo">inc</a>.<a href="#764676" title="=&gt; Inliners.this.global.icodes.global.Symbol">owner</a>
        <span class="keyword">case</span> <a href="#764351" title="Boolean" id="3320549">Protected</a>  =&gt; <a href="#764913" title="=&gt; Inliner.this.IMethodInfo">caller</a>.<a href="#764676" title="=&gt; Inliners.this.global.icodes.global.Symbol">owner</a>.<a href="../../../../reflect/internal/Symbols.scala.html#411365" title="=&gt; Inliners.this.global.icodes.global.Type">tpe</a> <a href="#3320555" title="(x: Boolean)Boolean">&lt;:&lt;</a> <a href="#764914" title="=&gt; Inliner.this.IMethodInfo">inc</a>.<a href="#764676" title="=&gt; Inliners.this.global.icodes.global.Symbol">owner</a>.<a href="../../../../reflect/internal/Symbols.scala.html#411365" title="=&gt; Inliners.this.global.icodes.global.Type">tpe</a>
        <span class="keyword">case</span> <a href="#764353" title="Boolean" id="3320550">Public</a>     =&gt; <a href="#3320555" title="(x: Boolean)Boolean" class="keyword">true</a>
      <span class="delimiter">}</span>
      <span class="keyword">private</span> <span class="keyword">def</span> <a title="=&gt; Boolean" id="764910">sameSymbols</a> = <a href="#764913" title="=&gt; Inliner.this.IMethodInfo">caller</a>.<a href="#764672" title="=&gt; Inliners.this.global.icodes.global.Symbol">sym</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="#764914" title="=&gt; Inliner.this.IMethodInfo">inc</a>.<a href="#764672" title="=&gt; Inliners.this.global.icodes.global.Symbol">sym</a>
      <span class="keyword">private</span> <span class="keyword">def</span> <a title="=&gt; Boolean" id="764911">sameOwner</a>   = <a href="#764913" title="=&gt; Inliner.this.IMethodInfo">caller</a>.<a href="#764676" title="=&gt; Inliners.this.global.icodes.global.Symbol">owner</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="#764914" title="=&gt; Inliner.this.IMethodInfo">inc</a>.<a href="#764676" title="=&gt; Inliners.this.global.icodes.global.Symbol">owner</a>

      /** Gives green light for inlining (which may still be vetoed later). Heuristics:
       *   - it's bad to make the caller larger (&gt; SMALL_METHOD_SIZE) if it was small
       *   - it's bad to inline large methods
       *   - it's good to inline higher order functions
       *   - it's good to inline closures functions.
       *   - it's bad (useless) to inline inside bridge methods
       */
      <span class="keyword">def</span> <a title="=&gt; Int" id="764912">inlinerScore</a>: <a href="../../../../Int.scala.html#321" title="Int">Int</a> = <span class="delimiter">{</span>
        <span class="keyword">var</span> <a title="Int" id="767242">score</a> = <span title="Int(0)" class="int">0</span>

        // better not inline inside closures, but hope that the closure itself is repeatedly inlined
        <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#764913" title="=&gt; Inliner.this.IMethodInfo">caller</a>.<a href="#764680" title="=&gt; Boolean">isInClosure</a><span class="delimiter">)</span>           <a href="#767242" title="Int">score</a> <a href="../../../../Int.scala.html#57161" title="(x: Int)Int">-=</a> <span title="Int(2)" class="int">2</span>
        <span class="keyword">else</span> <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#764913" title="=&gt; Inliner.this.IMethodInfo">caller</a>.<a href="#764699" title="=&gt; Int">inlinedCalls</a> <a href="../../../../Int.scala.html#57111" title="(x: Int)Boolean">&lt;</a> <span title="Int(1)" class="int">1</span><span class="delimiter">)</span> <a href="#767242" title="Int">score</a> <a href="../../../../Int.scala.html#57161" title="(x: Int)Int">-=</a> <span title="Int(1)" class="int">1</span> // only monadic methods can trigger the first inline

        <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#764914" title="=&gt; Inliner.this.IMethodInfo">inc</a>.<a href="#764691" title="=&gt; Boolean">isSmall</a><span class="delimiter">)</span> <a href="#767242" title="Int">score</a> <a href="../../../../Int.scala.html#57154" title="(x: Int)Int">+=</a> <span title="Int(1)" class="int">1</span>;
        // if (inc.hasClosureParam) score += 2
        <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#764914" title="=&gt; Inliner.this.IMethodInfo">inc</a>.<a href="#764692" title="=&gt; Boolean">isLarge</a><span class="delimiter">)</span> <a href="#767242" title="Int">score</a> <a href="../../../../Int.scala.html#57161" title="(x: Int)Int">-=</a> <span title="Int(1)" class="int">1</span>;
        <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#764913" title="=&gt; Inliner.this.IMethodInfo">caller</a>.<a href="#764691" title="=&gt; Boolean">isSmall</a> <a href="../../../../Boolean.scala.html#57826" title="(x: Boolean)Boolean">&amp;&amp;</a> <a href="#764900" title="=&gt; Boolean">isLargeSum</a><span class="delimiter">)</span> <span class="delimiter">{</span>
          <a href="#767242" title="Int">score</a> <a href="../../../../Int.scala.html#57161" title="(x: Int)Int">-=</a> <span title="Int(1)" class="int">1</span>
          <a href="../../Global.scala.html#537517" title="(msg: =&gt; String)Unit">debuglog</a><span class="delimiter">(</span><a href="../../../../StringContext.scala.html#56629" title="(args: Any*)String">s</a>&quot;inliner score decreased to $<a href="#767242" title="Int">score</a> because small caller $<a href="#764913" title="=&gt; Inliner.this.IMethodInfo">caller</a><span class="string"> would become large&quot;</span><span class="delimiter">)</span>
        <span class="delimiter">}</span>

        <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#764914" title="=&gt; Inliner.this.IMethodInfo">inc</a>.<a href="#764684" title="=&gt; Boolean">isMonadic</a><span class="delimiter">)</span>          <a href="#767242" title="Int">score</a> <a href="../../../../Int.scala.html#57154" title="(x: Int)Int">+=</a> <span title="Int(3)" class="int">3</span>
        <span class="keyword">else</span> <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#764914" title="=&gt; Inliner.this.IMethodInfo">inc</a>.<a href="#764682" title="=&gt; Boolean">isHigherOrder</a><span class="delimiter">)</span> <a href="#767242" title="Int">score</a> <a href="../../../../Int.scala.html#57154" title="(x: Int)Int">+=</a> <span title="Int(1)" class="int">1</span>

        <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#764914" title="=&gt; Inliner.this.IMethodInfo">inc</a>.<a href="#764680" title="=&gt; Boolean">isInClosure</a><span class="delimiter">)</span>                 <a href="#767242" title="Int">score</a> <a href="../../../../Int.scala.html#57154" title="(x: Int)Int">+=</a> <span title="Int(2)" class="int">2</span>
        <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="../../../../collection/MapLike.scala.html#87535" title="(key: Inliners.this.global.Symbol)Int">inlinedMethodCount</a><span class="delimiter">(</span><a href="#764914" title="=&gt; Inliner.this.IMethodInfo">inc</a>.<a href="#764672" title="=&gt; Inliners.this.global.icodes.global.Symbol">sym</a><span class="delimiter">)</span> <a href="../../../../Int.scala.html#57125" title="(x: Int)Boolean">&gt;</a> <span title="Int(2)" class="int">2</span><span class="delimiter">)</span> <a href="#767242" title="Int">score</a> <a href="../../../../Int.scala.html#57161" title="(x: Int)Int">-=</a> <span title="Int(2)" class="int">2</span>
        <a href="#767242" title="Int">score</a>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>

    <span class="keyword">def</span> <a title="(meth: Inliners.this.global.Symbol, receiver: Inliners.this.global.Symbol)Option[Inliners.this.global.icodes.IMethod]" id="764223">lookupIMethod</a><span class="delimiter">(</span><a title="Inliners.this.global.Symbol" id="764879">meth</a>: <a href="../../../../reflect/internal/Symbols.scala.html#407146" title="Inliners.this.global.Symbol">Symbol</a>, <a title="Inliners.this.global.Symbol" id="764880">receiver</a>: <a href="../../../../reflect/internal/Symbols.scala.html#407146" title="Inliners.this.global.Symbol">Symbol</a><span class="delimiter">)</span>: <a href="../../../../Option.scala.html#978" title="Option[Inliners.this.global.icodes.IMethod]">Option</a><span class="delimiter">[</span>IMethod<span class="delimiter">]</span> = <span class="delimiter">{</span>
      <span class="keyword">def</span> <a title="(sym: Inliners.this.global.Symbol)Option[Inliners.this.global.icodes.global.icodes.IMethod]" id="767320">tryParent</a><span class="delimiter">(</span><a title="Inliners.this.global.Symbol" id="767321">sym</a>: <a href="../../../../reflect/internal/Symbols.scala.html#407146" title="Inliners.this.global.Symbol">Symbol</a><span class="delimiter">)</span> = <a href="../../Global.scala.html#537466" title="Inliners.this.global.icodes.type">icodes</a> <a href="../icode/Repository.scala.html#615139" title="(sym: Inliners.this.global.icodes.global.Symbol)Option[Inliners.this.global.icodes.global.icodes.IClass]">icode</a> <a href="#767321" title="Inliners.this.global.Symbol">sym</a> <a href="../../../../Option.scala.html#62871" title="(f: Inliners.this.global.icodes.global.icodes.IClass =&gt; Option[Inliners.this.global.icodes.global.icodes.IMethod])Option[Inliners.this.global.icodes.global.icodes.IMethod]">flatMap</a> <span class="delimiter">(</span><a href="#767331" title="Inliners.this.global.icodes.global.icodes.IClass">_</a> <a href="../icode/Members.scala.html#615205" title="(s: Inliners.this.global.icodes.global.icodes.global.Symbol)Option[Inliners.this.global.icodes.global.icodes.IMethod]">lookupMethod</a> <a href="#764879" title="Inliners.this.global.Symbol">meth</a><span class="delimiter">)</span>

      <span class="delimiter">(</span><a href="#764880" title="Inliners.this.global.Symbol">receiver</a>.<a href="../../../../reflect/internal/Symbols.scala.html#411367" title="=&gt; Inliners.this.global.Type">info</a>.<a href="../../../../reflect/internal/Types.scala.html#408491" title="=&gt; List[Inliners.this.global.Symbol]">baseClasses</a>.<a href="../../../../collection/LinearSeqLike.scala.html#86318" title="=&gt; Iterator[Inliners.this.global.Symbol]">iterator</a> <a href="../../../../collection/Iterator.scala.html#66755" title="(f: Inliners.this.global.Symbol =&gt; Option[Inliners.this.global.icodes.global.icodes.IMethod])Iterator[Option[Inliners.this.global.icodes.global.icodes.IMethod]]">map</a> <a href="#767320" title="(sym: Inliners.this.global.Symbol)Option[Inliners.this.global.icodes.global.icodes.IMethod]">tryParent</a> <a href="../../../../collection/Iterator.scala.html#66803" title="(p: Option[Inliners.this.global.icodes.global.icodes.IMethod] =&gt; Boolean)Option[Option[Inliners.this.global.icodes.global.icodes.IMethod]]">find</a> <span class="delimiter">(</span><a href="#767353" title="Option[Inliners.this.global.icodes.global.icodes.IMethod]">_</a>.<a href="../../../../Option.scala.html#62857" title="=&gt; Boolean">isDefined</a><span class="delimiter">)</span><span class="delimiter">)</span>.<a href="../../../../Option.scala.html#62874" title="(implicit ev: &lt;:&lt;[Option[Inliners.this.global.icodes.global.icodes.IMethod],Option[Inliners.this.global.icodes.IMethod]])Option[Inliners.this.global.icodes.IMethod]">flatten</a>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span> /* class Inliner */
<span title="Object" class="delimiter">}</span> /* class Inliners */

        </pre>
    </body>
</html>