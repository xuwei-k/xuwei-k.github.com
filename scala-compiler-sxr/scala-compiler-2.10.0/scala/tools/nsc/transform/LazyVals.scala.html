<?xml version="1.0" encoding="utf-8"?>
      <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <meta http-equiv="Expires" content="0" />
        <title>scala/tools/nsc/transform/LazyVals.scala</title>
        <script type="text/javascript" src="../../../../jquery-all.js"></script>
        <script type="text/javascript" src="../../../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../../../style.css" title="Style"></link>
    </head>
    <body>
        <pre>
<span class="keyword">package</span> scala.tools.nsc
<span class="keyword">package</span> transform

<span class="keyword">import</span> scala.collection.<span class="delimiter">{</span> mutable, immutable <span class="delimiter">}</span>

<span class="keyword">abstract</span> <span class="keyword">class</span> <a title="class LazyVals extends scala.tools.nsc.SubComponent with scala.tools.nsc.transform.Transform with scala.tools.nsc.transform.TypingTransformers with scala.tools.nsc.ast.TreeDSL" id="43590">LazyVals</a> <a href="#43590" title="scala.tools.nsc.transform.LazyVals" class="keyword">extends</a> <a href="Transform.scala.html#43152" title="scala.tools.nsc.transform.Transform">Transform</a> <span class="keyword">with</span> <a href="TypingTransformers.scala.html#43407" title="scala.tools.nsc.transform.TypingTransformers">TypingTransformers</a> <span class="keyword">with</span> ast.<a href="../ast/TreeDSL.scala.html#28843" title="scala.tools.nsc.ast.TreeDSL">TreeDSL</a> <span class="delimiter">{</span>
  // inherits abstract value `global` and class `Phase` from Transform

  <span class="keyword">import</span> <a href="../ast/TreeDSL.scala.html#538231" title="=&gt; scala.tools.nsc.Global">global</a>._                  // the global environment
  <span class="keyword">import</span> <a href="../../../reflect/internal/Definitions.scala.html#407777" title="LazyVals.this.global.definitions.type">definitions</a>._             // standard classes and methods
  <span class="keyword">import</span> <a href="../Global.scala.html#537612" title="LazyVals.this.global.typer.type">typer</a>.<span class="delimiter">{</span>typed, atOwner<span class="delimiter">}</span>    // methods to type trees
  <span class="keyword">import</span> <a href="../ast/TreeDSL.scala.html#538235" title="LazyVals.this.CODE.type">CODE</a>._

  <span class="keyword">val</span> <a title="String" id="622385">phaseName</a>: <span title="String">String</span> = <span title="String(&quot;lazyvals&quot;)" class="string">&quot;lazyvals&quot;</span>
  <span class="keyword">private</span> <span class="keyword">val</span> <a title="Int" id="622387">FLAGS_PER_BYTE</a>: <a href="../../../Int.scala.html#321" title="Int">Int</a> = <span title="Int(8)" class="int">8</span> // Byte
  <span class="keyword">private</span> <span class="keyword">def</span> <a title="=&gt; LazyVals.this.global.ClassSymbol" id="622389">bitmapKind</a> = <a href="../../../reflect/internal/Definitions.scala.html#409355" title="=&gt; LazyVals.this.global.ClassSymbol">ByteClass</a>

  <span class="keyword">def</span> <a title="(unit: LazyVals.this.global.CompilationUnit)LazyVals.this.global.Transformer" id="622390">newTransformer</a><span class="delimiter">(</span><a title="LazyVals.this.global.CompilationUnit" id="991796">unit</a>: <a href="../CompilationUnits.scala.html#537766" title="LazyVals.this.global.CompilationUnit">CompilationUnit</a><span class="delimiter">)</span>: <a href="../ast/Trees.scala.html#537817" title="LazyVals.this.global.Transformer">Transformer</a> =
    <span title="LazyVals.this.LazyValues" class="keyword">new</span> <a href="#622394" title="LazyVals.this.LazyValues">LazyValues</a><span class="delimiter">(</span><a href="#991796" title="LazyVals.this.global.CompilationUnit">unit</a><span class="delimiter">)</span>

  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(sym: LazyVals.this.global.Symbol)Boolean" id="622391">lazyUnit</a><span class="delimiter">(</span><a title="LazyVals.this.global.Symbol" id="991815">sym</a>: <a href="../../../reflect/internal/Symbols.scala.html#407146" title="LazyVals.this.global.Symbol">Symbol</a><span class="delimiter">)</span> = <a href="#991815" title="LazyVals.this.global.Symbol">sym</a>.<a href="../../../reflect/internal/Symbols.scala.html#411365" title="=&gt; LazyVals.this.global.Type">tpe</a>.<a href="../../../reflect/internal/Types.scala.html#408423" title="=&gt; LazyVals.this.global.Type">resultType</a>.<a href="../../../reflect/internal/Types.scala.html#408407" title="=&gt; LazyVals.this.global.Symbol">typeSymbol</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="../../../reflect/internal/Definitions.scala.html#409353" title="=&gt; LazyVals.this.global.ClassSymbol">UnitClass</a>

  <span class="keyword">object</span> <a title="LazyVals.this.LocalLazyValFinder.type" id="622392">LocalLazyValFinder</a> <a href="#622393" title="LazyVals.this.LocalLazyValFinder.type" class="keyword">extends</a> <a href="../../../reflect/api/Trees.scala.html#56467" title="LazyVals.this.global.Traverser">Traverser</a> <span class="delimiter">{</span>
    <span class="keyword">var</span> <a title="Boolean" id="991829">result</a>: <a href="../../../Boolean.scala.html#1425" title="Boolean">Boolean</a>  = _

    <span class="keyword">def</span> <a title="(t: LazyVals.this.global.Tree)Boolean" id="991831">find</a><span class="delimiter">(</span><a title="LazyVals.this.global.Tree" id="991836">t</a>: <a href="../../../reflect/internal/Trees.scala.html#407938" title="LazyVals.this.global.Tree">Tree</a><span class="delimiter">)</span> = <span class="delimiter">{</span><a href="#991829" title="(x$1: Boolean)Unit">result</a> = <span title="Boolean(false)" class="keyword">false</span>; <a href="#991833" title="(t: LazyVals.this.global.Tree)Unit">traverse</a><span class="delimiter">(</span><a href="#991836" title="LazyVals.this.global.Tree">t</a><span class="delimiter">)</span>; <a href="#991829" title="=&gt; Boolean">result</a><span class="delimiter">}</span>
    <span class="keyword">def</span> <a title="(ts: List[LazyVals.this.global.Tree])Boolean" id="991832">find</a><span class="delimiter">(</span><a title="List[LazyVals.this.global.Tree]" id="991839">ts</a>: <a href="../../../collection/immutable/List.scala.html#11952" title="List[LazyVals.this.global.Tree]">List</a><span class="delimiter">[</span>Tree<span class="delimiter">]</span><span class="delimiter">)</span> = <span class="delimiter">{</span><a href="#991829" title="(x$1: Boolean)Unit">result</a> = <span title="Boolean(false)" class="keyword">false</span>; <a href="../../../reflect/api/Trees.scala.html#405545" title="(trees: List[LazyVals.this.global.Tree])Unit">traverseTrees</a><span class="delimiter">(</span><a href="#991839" title="List[LazyVals.this.global.Tree]">ts</a><span class="delimiter">)</span>; <a href="#991829" title="=&gt; Boolean">result</a><span class="delimiter">}</span>

    <span class="keyword">override</span> <span class="keyword">def</span> <a title="(t: LazyVals.this.global.Tree)Unit" id="991833">traverse</a><span class="delimiter">(</span><a title="LazyVals.this.global.Tree" id="991837">t</a>: <a href="../../../reflect/internal/Trees.scala.html#407938" title="LazyVals.this.global.Tree">Tree</a><span class="delimiter">)</span> <span class="delimiter">{</span>
      <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="../../../Boolean.scala.html#57822" title="=&gt; Boolean">!</a><a href="#991829" title="=&gt; Boolean">result</a><span class="delimiter">)</span>
        <a href="#991837" title="LazyVals.this.global.Tree">t</a> <span class="keyword">match</span> <span class="delimiter">{</span>
          <span class="keyword">case</span> v@ValDef<a href="#3359595" title="Unit" id="3359601" class="delimiter">(</a><a href="../../../reflect/internal/Trees.scala.html#410298" title="LazyVals.this.global.Modifiers" id="3359596">_</a>, <a href="../../../reflect/internal/Trees.scala.html#410300" title="LazyVals.this.global.TermName" id="3359597">_</a>, <a href="../../../reflect/internal/Trees.scala.html#410302" title="LazyVals.this.global.Tree" id="3359598">_</a>, <a href="../../../reflect/internal/Trees.scala.html#410304" title="LazyVals.this.global.Tree" id="3359599">_</a><span class="delimiter">)</span> <span class="keyword">if</span> v.<a href="../../../reflect/internal/Trees.scala.html#409939" title="=&gt; LazyVals.this.global.Symbol">symbol</a>.<a href="../../../reflect/internal/HasFlags.scala.html#409857" title="=&gt; Boolean">isLazy</a> =&gt;
            <a href="#991829" title="(x$1: Boolean)Unit">result</a> = <span title="Boolean(true)" class="keyword">true</span>

          <span class="keyword">case</span> d@DefDef<a href="#3359595" title="Unit" id="3359609" class="delimiter">(</a><a href="../../../reflect/internal/Trees.scala.html#410278" title="LazyVals.this.global.Modifiers" id="3359602">_</a>, <a href="../../../reflect/internal/Trees.scala.html#410280" title="LazyVals.this.global.Name" id="3359603">_</a>, <a href="../../../reflect/internal/Trees.scala.html#410282" title="List[LazyVals.this.global.TypeDef]" id="3359604">_</a>, <a href="../../../reflect/internal/Trees.scala.html#410284" title="List[List[LazyVals.this.global.ValDef]]" id="3359605">_</a>, <a href="../../../reflect/internal/Trees.scala.html#410286" title="LazyVals.this.global.Tree" id="3359606">_</a>, <a href="../../../reflect/internal/Trees.scala.html#410288" title="LazyVals.this.global.Tree" id="3359607">_</a><span class="delimiter">)</span> <span class="keyword">if</span> d.<a href="../../../reflect/internal/Trees.scala.html#409939" title="=&gt; LazyVals.this.global.Symbol">symbol</a>.<a href="../../../reflect/internal/HasFlags.scala.html#409857" title="=&gt; Boolean">isLazy</a> <a href="../../../Boolean.scala.html#57826" title="(x: Boolean)Boolean">&amp;&amp;</a> <a href="#622391" title="(sym: LazyVals.this.global.Symbol)Boolean">lazyUnit</a><span class="delimiter">(</span>d.<a href="../../../reflect/internal/Trees.scala.html#409939" title="=&gt; LazyVals.this.global.Symbol">symbol</a><span class="delimiter">)</span> =&gt;
            d.<a href="../../../reflect/internal/Trees.scala.html#409939" title="=&gt; LazyVals.this.global.Symbol">symbol</a>.<a href="../../../reflect/internal/Symbols.scala.html#411237" title="(mask: Long)LazyVals.this.global.Symbol">resetFlag</a><span class="delimiter">(</span>symtab.Flags.<span title="Long(2147483648L)">LAZY</span><span class="delimiter">)</span>
            <a href="#991829" title="(x$1: Boolean)Unit">result</a> = <span title="Boolean(true)" class="keyword">true</span>

          <span class="keyword">case</span> ClassDef<a href="#3359595" title="Unit" id="3359615" class="delimiter">(</a><a href="../../../reflect/internal/Trees.scala.html#410330" title="LazyVals.this.global.Modifiers" id="3359610">_</a>, <a href="../../../reflect/internal/Trees.scala.html#410332" title="LazyVals.this.global.TypeName" id="3359611">_</a>, <a href="../../../reflect/internal/Trees.scala.html#410334" title="List[LazyVals.this.global.TypeDef]" id="3359612">_</a>, <a href="../../../reflect/internal/Trees.scala.html#410336" title="LazyVals.this.global.Template" id="3359613">_</a><span class="delimiter">)</span> | DefDef<a href="#3359595" title="Boolean" id="3359623" class="delimiter">(</a><a href="../../../reflect/internal/Trees.scala.html#410278" title="LazyVals.this.global.Modifiers" id="3359616">_</a>, <a href="../../../reflect/internal/Trees.scala.html#410280" title="LazyVals.this.global.Name" id="3359617">_</a>, <a href="../../../reflect/internal/Trees.scala.html#410282" title="List[LazyVals.this.global.TypeDef]" id="3359618">_</a>, <a href="../../../reflect/internal/Trees.scala.html#410284" title="List[List[LazyVals.this.global.ValDef]]" id="3359619">_</a>, <a href="../../../reflect/internal/Trees.scala.html#410286" title="LazyVals.this.global.Tree" id="3359620">_</a>, <a href="../../../reflect/internal/Trees.scala.html#410288" title="LazyVals.this.global.Tree" id="3359621">_</a><span class="delimiter">)</span> | ModuleDef<a href="#3359595" title="Boolean" id="3359628" class="delimiter">(</a><a href="../../../reflect/internal/Trees.scala.html#410316" title="LazyVals.this.global.Modifiers" id="3359624">_</a>, <a href="../../../reflect/internal/Trees.scala.html#410318" title="LazyVals.this.global.TermName" id="3359625">_</a>, <a href="../../../reflect/internal/Trees.scala.html#410320" title="LazyVals.this.global.Template" id="3359626">_</a><span class="delimiter">)</span> =&gt;

          <span class="keyword">case</span> LabelDef<a href="#3359595" title="Unit" id="3359632" class="delimiter">(</a><a href="../../../reflect/internal/Trees.scala.html#410239" title="LazyVals.this.global.TermName" id="991937">name</a>, <a href="../../../reflect/internal/Trees.scala.html#410241" title="List[LazyVals.this.global.Ident]" id="3359629">_</a>, <a href="../../../reflect/internal/Trees.scala.html#410243" title="LazyVals.this.global.Tree" id="3359630">_</a><span class="delimiter">)</span> <span class="keyword">if</span> <a href="../../../reflect/internal/StdNames.scala.html#407871" title="LazyVals.this.global.nme.type">nme</a>.<a href="../../../reflect/internal/StdNames.scala.html#414049" title="(name: LazyVals.this.global.Name)Boolean">isLoopHeaderLabel</a><span class="delimiter">(</span><a href="#991937" title="LazyVals.this.global.TermName">name</a><span class="delimiter">)</span> =&gt;

          <span class="keyword">case</span> _ =&gt;
            <span class="keyword">super</span>.<a href="../../../reflect/api/Trees.scala.html#405544" title="(tree: LazyVals.this.global.Tree)Unit">traverse</a><a href="#3359634" title="(x: Unit)Unit" class="delimiter">(</a><a href="#991837" title="LazyVals.this.global.Tree">t</a><span class="delimiter">)</span>
        <span class="delimiter">}</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  /**
   * Transform local lazy accessors to check for the initialized bit.
   */
  <span class="keyword">class</span> <a title="class LazyValues extends LazyVals.this.TypingTransformer" id="622394">LazyValues</a><a href="#622394" title="LazyVals.this.LazyValues" class="delimiter">(</a><a title="LazyVals.this.global.CompilationUnit" id="991814">unit</a>: <a href="../CompilationUnits.scala.html#537766" title="LazyVals.this.global.CompilationUnit">CompilationUnit</a><span class="delimiter">)</span> <span class="keyword">extends</span> <a href="TypingTransformers.scala.html#621441" title="LazyVals.this.TypingTransformer">TypingTransformer</a><span class="delimiter">(</span><a href="#991814" title="LazyVals.this.global.CompilationUnit">unit</a><span class="delimiter">)</span> <span class="delimiter">{</span>
    /** map from method symbols to the number of lazy values it defines. */
    <span class="keyword">private</span> <span class="keyword">val</span> <a title="scala.collection.mutable.Map[LazyVals.this.global.Symbol,Int]" id="991802">lazyVals</a> = <a href="../../../reflect/internal/SymbolTable.scala.html#406696" title="LazyVals.this.global.perRunCaches.type">perRunCaches</a>.<a href="../../../reflect/internal/SymbolTable.scala.html#471987" title="[K, V]()scala.collection.mutable.HashMap[K,V]">newMap</a><span title="()scala.collection.mutable.HashMap[LazyVals.this.global.Symbol,Int]" class="delimiter">[</span><a href="../../../reflect/internal/Symbols.scala.html#407146" title="LazyVals.this.global.Symbol">Symbol</a>, <a href="../../../Int.scala.html#321" title="Int">Int</a><span class="delimiter">]</span><span class="delimiter">(</span><span class="delimiter">)</span> <a href="../../../collection/mutable/Map.scala.html#87604" title="(d: Int)scala.collection.mutable.Map[LazyVals.this.global.Symbol,Int]">withDefaultValue</a> <span title="Int(0)" class="int">0</span>

    <span class="keyword">import</span> symtab.<a href="../symtab/package.scala.html#55820" title="=&gt; reflect.internal.Flags.type">Flags</a>._

    /** Perform the following transformations:
     *  - for a lazy accessor inside a method, make it check the initialization bitmap
     *  - for all methods, add enough int vars to allow one flag per lazy local value
     *  - blocks in template bodies behave almost like methods. A single bitmaps section is
     *      added in the first block, for all lazy values defined in such blocks.
     *  - remove ACCESSOR flags: accessors in traits are not statically implemented,
     *    but moved to the host class. local lazy values should be statically implemented.
     */
    <span class="keyword">override</span> <span class="keyword">def</span> <a title="(tree: LazyVals.this.global.Tree)LazyVals.this.global.Tree" id="991805">transform</a><span class="delimiter">(</span><a title="LazyVals.this.global.Tree" id="991946">tree</a>: <a href="../../../reflect/internal/Trees.scala.html#407938" title="LazyVals.this.global.Tree">Tree</a><span class="delimiter">)</span>: <a href="../../../reflect/internal/Trees.scala.html#407938" title="LazyVals.this.global.Tree">Tree</a> = <span class="delimiter">{</span>
      <span class="keyword">val</span> <a title="LazyVals.this.global.Symbol" id="991951">sym</a> = <a href="#991946" title="LazyVals.this.global.Tree">tree</a>.<a href="../../../reflect/internal/Trees.scala.html#408577" title="=&gt; LazyVals.this.global.Symbol">symbol</a>
      <a href="TypingTransformers.scala.html#984460" title="(x$1: LazyVals.this.global.Tree)Unit">curTree</a> = <a href="#991946" title="LazyVals.this.global.Tree">tree</a>

      <a href="#991946" title="LazyVals.this.global.Tree">tree</a> <span class="keyword">match</span> <span class="delimiter">{</span>
        
        <span class="keyword">case</span> Block<a href="#3359754" title="LazyVals.this.global.Tree" id="3359758" class="delimiter">(</a><a href="../../../reflect/internal/Trees.scala.html#410192" title="List[LazyVals.this.global.Tree]" id="3359755">_</a>, <a href="../../../reflect/internal/Trees.scala.html#410194" title="LazyVals.this.global.Tree" id="3359756">_</a><span class="delimiter">)</span> =&gt;
          <span class="keyword">val</span> <a title="LazyVals.this.global.Tree" id="991960">block1</a> = <a href="#622394" title="LazyVals.this.LazyValues" class="keyword">super</a>.<a href="TypingTransformers.scala.html#984469" title="(tree: LazyVals.this.global.Tree)LazyVals.this.global.Tree">transform</a><span class="delimiter">(</span><a href="#991946" title="LazyVals.this.global.Tree">tree</a><span class="delimiter">)</span>
          <span class="keyword">val</span> Block<a href="#3359648" title="(List[LazyVals.this.global.Tree], LazyVals.this.global.Tree)" id="3359650" class="delimiter">(</a><a href="../../../reflect/internal/Trees.scala.html#410192" title="List[LazyVals.this.global.Tree]" id="991962">stats</a>, <a href="../../../reflect/internal/Trees.scala.html#410194" title="LazyVals.this.global.Tree" id="991963">expr</a><span class="delimiter">)</span> = <a href="#991960" title="LazyVals.this.global.Tree">block1</a>
          <span class="keyword">val</span> <a title="List[LazyVals.this.global.Tree]" id="991964">stats1</a> = <a href="#991962" title="List[LazyVals.this.global.Tree]">stats</a>.<a href="../../../collection/TraversableLike.scala.html#58068" title="(f: LazyVals.this.global.Tree =&gt; scala.collection.GenTraversableOnce[LazyVals.this.global.Tree])(implicit bf: scala.collection.generic.CanBuildFrom[List[LazyVals.this.global.Tree],LazyVals.this.global.Tree,List[LazyVals.this.global.Tree]])List[LazyVals.this.global.Tree]">flatMap</a><a href="../../../collection/immutable/List.scala.html#62442" title="scala.collection.generic.CanBuildFrom[scala.collection.immutable.List.Coll,LazyVals.this.global.Tree,List[LazyVals.this.global.Tree]]" class="delimiter">(</a><a href="#992000" title="LazyVals.this.global.Tree">_</a> <span class="keyword">match</span> <span class="delimiter">{</span>
            <span class="keyword">case</span> Block<a href="#3359656" title="List[LazyVals.this.global.Tree]" id="3359659" class="delimiter">(</a><a href="../../../collection/generic/SeqFactory.scala.html#59986" title="Option[List[LazyVals.this.global.Tree]]" id="3359682">List</a><a href="../../../reflect/internal/Trees.scala.html#410192" title="List[LazyVals.this.global.Tree]" id="3359657" class="delimiter">(</a><a title="LazyVals.this.global.Tree" id="992013">d1</a>@DefDef<a href="#992013" title="List[LazyVals.this.global.Tree]" id="3359669" class="delimiter">(</a><a href="../../../reflect/internal/Trees.scala.html#410278" title="LazyVals.this.global.Modifiers" id="3359663">_</a>, <a href="../../../reflect/internal/Trees.scala.html#410280" title="LazyVals.this.global.Name" id="992022">n1</a>, <a href="../../../reflect/internal/Trees.scala.html#410282" title="List[LazyVals.this.global.TypeDef]" id="3359664">_</a>, <a href="../../../reflect/internal/Trees.scala.html#410284" title="List[List[LazyVals.this.global.ValDef]]" id="3359665">_</a>, <a href="../../../reflect/internal/Trees.scala.html#410286" title="LazyVals.this.global.Tree" id="3359666">_</a>, <a href="../../../reflect/internal/Trees.scala.html#410288" title="LazyVals.this.global.Tree" id="3359667">_</a><span class="delimiter">)</span><span class="delimiter">)</span>, <a href="../../../reflect/internal/Trees.scala.html#410194" title="LazyVals.this.global.Tree" id="992023">d2</a>@DefDef<a href="#992023" title="List[LazyVals.this.global.Tree]" id="3359676" class="delimiter">(</a><a href="../../../reflect/internal/Trees.scala.html#410278" title="LazyVals.this.global.Modifiers" id="3359670">_</a>, <a href="../../../reflect/internal/Trees.scala.html#410280" title="LazyVals.this.global.Name" id="992032">n2</a>, <a href="../../../reflect/internal/Trees.scala.html#410282" title="List[LazyVals.this.global.TypeDef]" id="3359671">_</a>, <a href="../../../reflect/internal/Trees.scala.html#410284" title="List[List[LazyVals.this.global.ValDef]]" id="3359672">_</a>, <a href="../../../reflect/internal/Trees.scala.html#410286" title="LazyVals.this.global.Tree" id="3359673">_</a>, <a href="../../../reflect/internal/Trees.scala.html#410288" title="LazyVals.this.global.Tree" id="3359674">_</a><span class="delimiter">)</span><span class="delimiter">)</span> <span class="keyword">if</span> <span class="delimiter">(</span><a href="../../../reflect/internal/StdNames.scala.html#407871" title="LazyVals.this.global.nme.type">nme</a>.<a href="../../../reflect/internal/StdNames.scala.html#414625" title="(lzyValName: LazyVals.this.global.Name)LazyVals.this.global.Name with lzyValName.ThisNameType">newLazyValSlowComputeName</a><span class="delimiter">(</span><a href="#992032" title="LazyVals.this.global.Name">n2</a><span class="delimiter">)</span> <span title="(x$1: AnyRef)Boolean">==</span> <a href="#992022" title="LazyVals.this.global.Name">n1</a><span class="delimiter">)</span> =&gt;
              <a href="../../../collection/immutable/List.scala.html#62451" title="(xs: LazyVals.this.global.DefDef*)List[LazyVals.this.global.DefDef]">List</a><a href="#3359678" title="(x: List[LazyVals.this.global.Tree])List[LazyVals.this.global.Tree]" class="delimiter">(</a>d1, d2<span class="delimiter">)</span>
            <span class="keyword">case</span> stat =&gt;
              <a href="../../../collection/immutable/List.scala.html#62451" title="(xs: LazyVals.this.global.Tree*)List[LazyVals.this.global.Tree]">List</a><a href="#3359678" title="(x: List[LazyVals.this.global.Tree])List[LazyVals.this.global.Tree]" class="delimiter">(</a>stat<span class="delimiter">)</span>
          <span class="delimiter">}</span><span class="delimiter">)</span>
          <a href="../../../reflect/api/Trees.scala.html#405645" title="=&gt; LazyVals.this.global.TreeCopier">treeCopy</a>.<a href="../../../reflect/api/Trees.scala.html#405380" title="(tree: LazyVals.this.global.Tree, stats: List[LazyVals.this.global.Tree], expr: LazyVals.this.global.Tree)LazyVals.this.global.Block">Block</a><span class="delimiter">(</span><a href="#991960" title="LazyVals.this.global.Tree">block1</a>, <a href="#991964" title="List[LazyVals.this.global.Tree]">stats1</a>, <a href="#991963" title="LazyVals.this.global.Tree">expr</a><span class="delimiter">)</span>
          
        <span class="keyword">case</span> DefDef<a href="#3359754" title="LazyVals.this.global.Tree" id="3359765" class="delimiter">(</a><a href="../../../reflect/internal/Trees.scala.html#410278" title="LazyVals.this.global.Modifiers" id="3359759">_</a>, <a href="../../../reflect/internal/Trees.scala.html#410280" title="LazyVals.this.global.Name" id="3359760">_</a>, <a href="../../../reflect/internal/Trees.scala.html#410282" title="List[LazyVals.this.global.TypeDef]" id="3359761">_</a>, <a href="../../../reflect/internal/Trees.scala.html#410284" title="List[List[LazyVals.this.global.ValDef]]" id="3359762">_</a>, <a href="../../../reflect/internal/Trees.scala.html#410286" title="LazyVals.this.global.Tree" id="3359763">_</a>, <a href="../../../reflect/internal/Trees.scala.html#410288" title="LazyVals.this.global.Tree" id="992109">rhs</a><span class="delimiter">)</span> =&gt; <a href="TypingTransformers.scala.html#984463" title="(owner: LazyVals.this.global.Symbol)(trans: =&gt; LazyVals.this.global.Tree)LazyVals.this.global.Tree">atOwner</a><span class="delimiter">(</span><a href="#991946" title="LazyVals.this.global.Tree">tree</a>.<a href="../../../reflect/internal/Trees.scala.html#408577" title="=&gt; LazyVals.this.global.Symbol">symbol</a><span class="delimiter">)</span> <a href="#3359789" title="(x: LazyVals.this.global.Tree)LazyVals.this.global.Tree" class="delimiter">{</a>
          <span class="keyword">val</span> <a href="#3359703" title="(x: (LazyVals.this.global.Tree, LazyVals.this.global.Tree))(LazyVals.this.global.Tree, LazyVals.this.global.Tree)" class="delimiter">(</a><a href="../../../Tuple2.scala.html#60635" title="LazyVals.this.global.Tree" id="992131">res</a>, <a href="../../../Tuple2.scala.html#60637" title="LazyVals.this.global.Tree" id="992132">slowPathDef</a><span class="delimiter">)</span> = <a href="#3359701" title="(LazyVals.this.global.Tree, LazyVals.this.global.Tree)" class="keyword">if</a> <span class="delimiter">(</span><a href="../../../Boolean.scala.html#57822" title="=&gt; Boolean">!</a><a href="#991951" title="LazyVals.this.global.Symbol">sym</a>.<a href="../../../reflect/internal/Symbols.scala.html#411315" title="=&gt; LazyVals.this.global.Symbol">owner</a>.<a href="../../../reflect/api/Symbols.scala.html#402403" title="=&gt; Boolean">isClass</a> <a href="../../../Boolean.scala.html#57826" title="(x: Boolean)Boolean">&amp;&amp;</a> <a href="#991951" title="LazyVals.this.global.Symbol">sym</a>.<a href="../../../reflect/internal/HasFlags.scala.html#409857" title="=&gt; Boolean">isLazy</a><span class="delimiter">)</span> <span class="delimiter">{</span>
            <span class="keyword">val</span> <a title="LazyVals.this.global.Symbol" id="992134">enclosingClassOrDummyOrMethod</a> = <span class="delimiter">{</span>
              <span class="keyword">val</span> <a title="LazyVals.this.global.Symbol" id="992139">enclMethod</a> = <a href="#991951" title="LazyVals.this.global.Symbol">sym</a>.<a href="../../../reflect/internal/Symbols.scala.html#411423" title="=&gt; LazyVals.this.global.Symbol">enclMethod</a>

              <span title="LazyVals.this.global.Symbol" class="keyword">if</span> <span class="delimiter">(</span><a href="#992139" title="LazyVals.this.global.Symbol">enclMethod</a> <span title="(x$1: AnyRef)Boolean">!=</span> <a href="../../../reflect/internal/Symbols.scala.html#407184" title="=&gt; LazyVals.this.global.NoSymbol">NoSymbol</a> <span class="delimiter">)</span> <span class="delimiter">{</span>
                <span class="keyword">val</span> <a title="LazyVals.this.global.Symbol" id="992144">enclClass</a> = <a href="#991951" title="LazyVals.this.global.Symbol">sym</a>.<a href="../../../reflect/internal/Symbols.scala.html#411422" title="=&gt; LazyVals.this.global.Symbol">enclClass</a>
                <span title="LazyVals.this.global.Symbol" class="keyword">if</span> <span class="delimiter">(</span><a href="#992144" title="LazyVals.this.global.Symbol">enclClass</a> <span title="(x$1: AnyRef)Boolean">!=</span> <a href="../../../reflect/internal/Symbols.scala.html#407184" title="=&gt; LazyVals.this.global.NoSymbol">NoSymbol</a> <a href="../../../Boolean.scala.html#57826" title="(x: Boolean)Boolean">&amp;&amp;</a> <a href="#992139" title="LazyVals.this.global.Symbol">enclMethod</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="#992144" title="LazyVals.this.global.Symbol">enclClass</a>.<a href="../../../reflect/internal/Symbols.scala.html#411423" title="=&gt; LazyVals.this.global.Symbol">enclMethod</a><span class="delimiter">)</span>
                  <a href="#992144" title="LazyVals.this.global.Symbol">enclClass</a>
                <span class="keyword">else</span>
                  <a href="#992139" title="LazyVals.this.global.Symbol">enclMethod</a>
              <span class="delimiter">}</span> <span class="keyword">else</span>
                <a href="#991951" title="LazyVals.this.global.Symbol">sym</a>.<a href="../../../reflect/internal/Symbols.scala.html#411315" title="=&gt; LazyVals.this.global.Symbol">owner</a>
            <span class="delimiter">}</span>
            <span class="keyword">val</span> <a title="Int" id="992135">idx</a> = <a href="../../../collection/MapLike.scala.html#87535" title="(key: LazyVals.this.global.Symbol)Int">lazyVals</a><span class="delimiter">(</span><a href="#992134" title="LazyVals.this.global.Symbol">enclosingClassOrDummyOrMethod</a><span class="delimiter">)</span>
            <a href="../../../collection/mutable/MapLike.scala.html#87611" title="(key: LazyVals.this.global.Symbol, value: Int)Unit">lazyVals</a><span class="delimiter">(</span><a href="#992134" title="LazyVals.this.global.Symbol">enclosingClassOrDummyOrMethod</a><span class="delimiter">)</span> = <a href="#992135" title="Int">idx</a> <a href="../../../Int.scala.html#57154" title="(x: Int)Int">+</a> <span title="Int(1)" class="int">1</span>
            <span class="keyword">val</span> <a href="#3359697" title="(x: (LazyVals.this.global.Tree, LazyVals.this.global.Tree))(LazyVals.this.global.Tree, LazyVals.this.global.Tree)" class="delimiter">(</a><a href="../../../Tuple2.scala.html#60635" title="LazyVals.this.global.Tree" id="992137">rhs1</a>, <a href="../../../Tuple2.scala.html#60637" title="LazyVals.this.global.Tree" id="992138">sDef</a><span class="delimiter">)</span> = <a href="#991809" title="(methOrClass: LazyVals.this.global.Symbol, tree: LazyVals.this.global.Tree, offset: Int, lazyVal: LazyVals.this.global.Symbol)(LazyVals.this.global.Tree, LazyVals.this.global.Tree)">mkLazyDef</a><a href="../../../Tuple2.scala.html#783" title="(LazyVals.this.global.Tree, LazyVals.this.global.Tree) @unchecked" class="delimiter">(</a><a href="#992134" title="LazyVals.this.global.Symbol">enclosingClassOrDummyOrMethod</a>, <a href="#991805" title="(tree: LazyVals.this.global.Tree)LazyVals.this.global.Tree">transform</a><span class="delimiter">(</span><a href="#992109" title="LazyVals.this.global.Tree">rhs</a><span class="delimiter">)</span>, <a href="#992135" title="Int">idx</a>, <a href="#991951" title="LazyVals.this.global.Symbol">sym</a><span class="delimiter">)</span>
            <a href="#991951" title="LazyVals.this.global.Symbol">sym</a>.<a href="../../../reflect/internal/Symbols.scala.html#411237" title="(mask: Long)sym.type">resetFlag</a><span class="delimiter">(</span><span class="delimiter">(</span><span title="Long" class="keyword">if</span> <span class="delimiter">(</span><a href="#622391" title="(sym: LazyVals.this.global.Symbol)Boolean">lazyUnit</a><span class="delimiter">(</span><a href="#991951" title="LazyVals.this.global.Symbol">sym</a><span class="delimiter">)</span><span class="delimiter">)</span> <span title="Long(0L)" class="int">0</span> <span class="keyword">else</span> <span title="Long(2147483648L)">LAZY</span><span class="delimiter">)</span> <a href="../../../Long.scala.html#57505" title="(x: Int)Long">|</a> <span title="Int(134217728)">ACCESSOR</span><span class="delimiter">)</span>
            <a href="../../../Tuple2.scala.html#62849" title="(_1: LazyVals.this.global.Tree, _2: LazyVals.this.global.Tree)(LazyVals.this.global.Tree, LazyVals.this.global.Tree)" class="delimiter">(</a><a href="#992137" title="LazyVals.this.global.Tree">rhs1</a>, <a href="#992138" title="LazyVals.this.global.Tree">sDef</a><span class="delimiter">)</span>
          <span class="delimiter">}</span> <span class="keyword">else</span>            
            <a href="../../../Tuple2.scala.html#62849" title="(_1: LazyVals.this.global.Tree, _2: LazyVals.this.global.EmptyTree.type)(LazyVals.this.global.Tree, LazyVals.this.global.EmptyTree.type)" class="delimiter">(</a><a href="#991805" title="(tree: LazyVals.this.global.Tree)LazyVals.this.global.Tree">transform</a><span class="delimiter">(</span><a href="#992109" title="LazyVals.this.global.Tree">rhs</a><span class="delimiter">)</span>, <a href="../../../reflect/internal/Trees.scala.html#407946" title="LazyVals.this.global.EmptyTree.type">EmptyTree</a><span class="delimiter">)</span>
            
          <span class="keyword">val</span> <a title="LazyVals.this.global.DefDef" id="992133">ddef1</a> = <a href="../../../reflect/internal/Trees.scala.html#408156" title="(ddef: LazyVals.this.global.Tree)(applyToRhs: LazyVals.this.global.Tree =&gt; LazyVals.this.global.Tree)LazyVals.this.global.DefDef">deriveDefDef</a><span class="delimiter">(</span><a href="#991946" title="LazyVals.this.global.Tree">tree</a><span class="delimiter">)</span><span class="delimiter">(</span><a title="LazyVals.this.global.Tree" id="992220">_</a> =&gt; <span title="LazyVals.this.global.analyzer.global.Tree" class="keyword">if</span> <span class="delimiter">(</span><a href="#622392" title="LazyVals.this.LocalLazyValFinder.type">LocalLazyValFinder</a>.<a href="#991831" title="(t: LazyVals.this.global.Tree)Boolean">find</a><span class="delimiter">(</span><a href="#992131" title="LazyVals.this.global.Tree">res</a><span class="delimiter">)</span><span class="delimiter">)</span> <a href="../typechecker/Typers.scala.html#538701" title="(tree: LazyVals.this.global.analyzer.global.Tree)LazyVals.this.global.analyzer.global.Tree">typed</a><span class="delimiter">(</span><a href="#991806" title="(methSym: LazyVals.this.global.Symbol, rhs: LazyVals.this.global.Tree)LazyVals.this.global.Tree">addBitmapDefs</a><span class="delimiter">(</span><a href="#991951" title="LazyVals.this.global.Symbol">sym</a>, <a href="#992131" title="LazyVals.this.global.Tree">res</a><span class="delimiter">)</span><span class="delimiter">)</span> <span class="keyword">else</span> <a href="#992131" title="LazyVals.this.global.Tree">res</a><span class="delimiter">)</span>
          <span title="LazyVals.this.global.Tree" class="keyword">if</span> <span class="delimiter">(</span><a href="#992132" title="LazyVals.this.global.Tree">slowPathDef</a> <span title="(x$1: AnyRef)Boolean">!=</span> <a href="../../../reflect/internal/Trees.scala.html#407946" title="LazyVals.this.global.EmptyTree.type">EmptyTree</a><span class="delimiter">)</span> <a href="../../../reflect/internal/Trees.scala.html#408128" title="(stats: LazyVals.this.global.Tree*)LazyVals.this.global.Block">Block</a><span class="delimiter">(</span><a href="#992132" title="LazyVals.this.global.Tree">slowPathDef</a>, <a href="#992133" title="LazyVals.this.global.DefDef">ddef1</a><span class="delimiter">)</span> <span class="keyword">else</span> <a href="#992133" title="LazyVals.this.global.DefDef">ddef1</a>
        <span class="delimiter">}</span>

        <span class="keyword">case</span> Template<a href="#3359754" title="LazyVals.this.global.Tree" id="3359769" class="delimiter">(</a><a href="../../../reflect/internal/Trees.scala.html#410203" title="List[LazyVals.this.global.Tree]" id="3359766">_</a>, <a href="../../../reflect/internal/Trees.scala.html#410205" title="LazyVals.this.global.ValDef" id="3359767">_</a>, <a href="../../../reflect/internal/Trees.scala.html#410207" title="List[LazyVals.this.global.Tree]" id="992274">body</a><span class="delimiter">)</span> =&gt; <a href="TypingTransformers.scala.html#984463" title="(owner: LazyVals.this.global.Symbol)(trans: =&gt; LazyVals.this.global.Template)LazyVals.this.global.Template">atOwner</a><span class="delimiter">(</span><a href="../../../reflect/api/Trees.scala.html#405647" title="=&gt; LazyVals.this.global.Symbol">currentOwner</a><span class="delimiter">)</span> <a href="#3359789" title="(x: LazyVals.this.global.Tree)LazyVals.this.global.Tree" class="delimiter">{</a>
          <span class="keyword">val</span> <a title="List[LazyVals.this.global.Tree]" id="992291">body1</a> = <a href="#622394" title="LazyVals.this.LazyValues" class="keyword">super</a>.<a href="../../../reflect/api/Trees.scala.html#405653" title="(trees: List[LazyVals.this.global.Tree])List[LazyVals.this.global.Tree]">transformTrees</a><span class="delimiter">(</span><a href="#992274" title="List[LazyVals.this.global.Tree]">body</a><span class="delimiter">)</span>
          <span class="keyword">var</span> <a title="Boolean" id="992292">added</a> = <span title="Boolean(false)" class="keyword">false</span>
          <span class="keyword">val</span> <a title="List[LazyVals.this.global.analyzer.global.Tree]" id="992293">stats</a> =
            <span class="keyword">for</span> <span class="delimiter">(</span><a title="LazyVals.this.global.Tree" id="992312">stat</a> &lt;- <a href="../../../collection/TraversableLike.scala.html#58063" title="(f: LazyVals.this.global.Tree =&gt; LazyVals.this.global.analyzer.global.Tree)(implicit bf: scala.collection.generic.CanBuildFrom[List[LazyVals.this.global.Tree],LazyVals.this.global.analyzer.global.Tree,List[LazyVals.this.global.analyzer.global.Tree]])List[LazyVals.this.global.analyzer.global.Tree]">body1</a><span class="delimiter">)</span> <span class="keyword">yield</span> <a href="#992312" title="LazyVals.this.global.Tree">stat</a> <span class="keyword">match</span> <span class="delimiter">{</span>
              <span class="keyword">case</span> Block<a href="#3359707" title="LazyVals.this.global.analyzer.global.Tree" id="3359711" class="delimiter">(</a><a href="../../../reflect/internal/Trees.scala.html#410192" title="List[LazyVals.this.global.Tree]" id="3359708">_</a>, <a href="../../../reflect/internal/Trees.scala.html#410194" title="LazyVals.this.global.Tree" id="3359709">_</a><span class="delimiter">)</span> | Apply<a href="#3359707" title="Boolean" id="3359715" class="delimiter">(</a><a href="../../../reflect/internal/Trees.scala.html#410031" title="LazyVals.this.global.Tree" id="3359712">_</a>, <a href="../../../reflect/internal/Trees.scala.html#410033" title="List[LazyVals.this.global.Tree]" id="3359713">_</a><span class="delimiter">)</span> | If<a href="#3359707" title="Boolean" id="3359720" class="delimiter">(</a><a href="../../../reflect/internal/Trees.scala.html#410107" title="LazyVals.this.global.Tree" id="3359716">_</a>, <a href="../../../reflect/internal/Trees.scala.html#410109" title="LazyVals.this.global.Tree" id="3359717">_</a>, <a href="../../../reflect/internal/Trees.scala.html#410111" title="LazyVals.this.global.Tree" id="3359718">_</a><span class="delimiter">)</span> | Try<a href="#3359707" title="Boolean" id="3359725" class="delimiter">(</a><a href="../../../reflect/internal/Trees.scala.html#410079" title="LazyVals.this.global.Tree" id="3359721">_</a>, <a href="../../../reflect/internal/Trees.scala.html#410081" title="List[LazyVals.this.global.CaseDef]" id="3359722">_</a>, <a href="../../../reflect/internal/Trees.scala.html#410083" title="LazyVals.this.global.Tree" id="3359723">_</a><span class="delimiter">)</span> <span class="keyword">if</span> <a href="../../../Boolean.scala.html#57822" title="=&gt; Boolean">!</a><a href="#992292" title="Boolean">added</a> =&gt;
                // Avoid adding bitmaps when they are fully overshadowed by those
                // that are added inside loops
                <a href="#3359733" title="(x: LazyVals.this.global.analyzer.global.Tree)LazyVals.this.global.analyzer.global.Tree" class="keyword">if</a> <span class="delimiter">(</span><a href="#622392" title="LazyVals.this.LocalLazyValFinder.type">LocalLazyValFinder</a>.<a href="#991831" title="(t: LazyVals.this.global.Tree)Boolean">find</a><span class="delimiter">(</span><a href="#992312" title="LazyVals.this.global.Tree">stat</a><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">{</span>
                  <a href="#992292" title="Boolean">added</a> = <span title="Boolean(true)" class="keyword">true</span>
                  <a href="../typechecker/Typers.scala.html#538701" title="(tree: LazyVals.this.global.analyzer.global.Tree)LazyVals.this.global.analyzer.global.Tree">typed</a><span class="delimiter">(</span><a href="#991806" title="(methSym: LazyVals.this.global.Symbol, rhs: LazyVals.this.global.Tree)LazyVals.this.global.Tree">addBitmapDefs</a><span class="delimiter">(</span><a href="#991951" title="LazyVals.this.global.Symbol">sym</a>, <a href="#992312" title="LazyVals.this.global.Tree">stat</a><span class="delimiter">)</span><span class="delimiter">)</span>
                <span class="delimiter">}</span> <span class="keyword">else</span> <a href="#992312" title="LazyVals.this.global.Tree">stat</a>
              <span class="keyword">case</span> ValDef<a href="#3359707" title="LazyVals.this.global.analyzer.global.Tree" id="3359731" class="delimiter">(</a><a href="../../../reflect/internal/Trees.scala.html#410298" title="LazyVals.this.global.Modifiers" id="3359726">_</a>, <a href="../../../reflect/internal/Trees.scala.html#410300" title="LazyVals.this.global.TermName" id="3359727">_</a>, <a href="../../../reflect/internal/Trees.scala.html#410302" title="LazyVals.this.global.Tree" id="3359728">_</a>, <a href="../../../reflect/internal/Trees.scala.html#410304" title="LazyVals.this.global.Tree" id="3359729">_</a><span class="delimiter">)</span> =&gt;
                <a href="../typechecker/Typers.scala.html#538701" title="(tree: LazyVals.this.global.analyzer.global.Tree)LazyVals.this.global.analyzer.global.Tree">typed</a><a href="#3359733" title="(x: LazyVals.this.global.analyzer.global.Tree)LazyVals.this.global.analyzer.global.Tree" class="delimiter">(</a><a href="../../../reflect/internal/Trees.scala.html#408157" title="(vdef: LazyVals.this.global.Tree)(applyToRhs: LazyVals.this.global.Tree =&gt; LazyVals.this.global.Tree)LazyVals.this.global.ValDef">deriveValDef</a><span class="delimiter">(</span><a href="#992312" title="LazyVals.this.global.Tree">stat</a><span class="delimiter">)</span><span class="delimiter">(</span><a href="#991806" title="(methSym: LazyVals.this.global.Symbol, rhs: LazyVals.this.global.Tree)LazyVals.this.global.Tree">addBitmapDefs</a><span class="delimiter">(</span><a href="#992312" title="LazyVals.this.global.Tree">stat</a>.<a href="../../../reflect/internal/Trees.scala.html#408577" title="=&gt; LazyVals.this.global.Symbol">symbol</a>, <a href="#992354" title="LazyVals.this.global.Tree">_</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
              <span class="keyword">case</span> _ =&gt;
                <a href="#3359733" title="(x: LazyVals.this.global.analyzer.global.Tree)LazyVals.this.global.analyzer.global.Tree">stat</a>
            <span class="delimiter">}</span>
          <span class="keyword">val</span> <a title="List[LazyVals.this.global.analyzer.global.Tree]" id="992294">innerClassBitmaps</a> = <span title="List[LazyVals.this.global.analyzer.global.Tree]" class="keyword">if</span> <span class="delimiter">(</span><a href="../../../Boolean.scala.html#57822" title="=&gt; Boolean">!</a><a href="#992292" title="Boolean">added</a> <a href="../../../Boolean.scala.html#57826" title="(x: Boolean)Boolean">&amp;&amp;</a> <a href="../../../reflect/api/Trees.scala.html#405647" title="=&gt; LazyVals.this.global.Symbol">currentOwner</a>.<a href="../../../reflect/api/Symbols.scala.html#402403" title="=&gt; Boolean">isClass</a> <a href="../../../Boolean.scala.html#57826" title="(x: Boolean)Boolean">&amp;&amp;</a> <a href="#991811" title="=&gt; scala.collection.mutable.Map[LazyVals.this.global.Symbol,List[LazyVals.this.global.Symbol]]">bitmaps</a>.<a href="../../../collection/MapLike.scala.html#87536" title="(key: LazyVals.this.global.Symbol)Boolean">contains</a><span class="delimiter">(</span><a href="../../../reflect/api/Trees.scala.html#405647" title="=&gt; LazyVals.this.global.Symbol">currentOwner</a><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">{</span>
              // add bitmap to inner class if necessary
                <span class="keyword">val</span> <a title="List[LazyVals.this.global.analyzer.global.Tree]" id="992385">toAdd0</a> = <a href="../../../collection/MapLike.scala.html#87535" title="(key: LazyVals.this.global.Symbol)List[LazyVals.this.global.Symbol]">bitmaps</a><span class="delimiter">(</span><a href="../../../reflect/api/Trees.scala.html#405647" title="=&gt; LazyVals.this.global.Symbol">currentOwner</a><span class="delimiter">)</span>.<a href="../../../collection/TraversableLike.scala.html#58063" title="(f: LazyVals.this.global.Symbol =&gt; LazyVals.this.global.analyzer.global.Tree)(implicit bf: scala.collection.generic.CanBuildFrom[List[LazyVals.this.global.Symbol],LazyVals.this.global.analyzer.global.Tree,List[LazyVals.this.global.analyzer.global.Tree]])List[LazyVals.this.global.analyzer.global.Tree]">map</a><a href="../../../collection/immutable/List.scala.html#62442" title="scala.collection.generic.CanBuildFrom[scala.collection.immutable.List.Coll,LazyVals.this.global.analyzer.global.Tree,List[LazyVals.this.global.analyzer.global.Tree]]" class="delimiter">(</a><a title="LazyVals.this.global.Symbol" id="992420">s</a> =&gt; <a href="../typechecker/Typers.scala.html#538701" title="(tree: LazyVals.this.global.analyzer.global.Tree)LazyVals.this.global.analyzer.global.Tree">typed</a><span class="delimiter">(</span><a href="../../../reflect/internal/Trees.scala.html#408102" title="(sym: LazyVals.this.global.Symbol, rhs: LazyVals.this.global.Tree)LazyVals.this.global.ValDef">ValDef</a><span class="delimiter">(</span><a href="#992420" title="LazyVals.this.global.Symbol">s</a>, <a href="../ast/TreeDSL.scala.html#624558" title="=&gt; LazyVals.this.global.Literal">ZERO</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
                <a href="#992385" title="List[LazyVals.this.global.analyzer.global.Tree]">toAdd0</a>.<a href="../../../collection/immutable/List.scala.html#62719" title="(f: LazyVals.this.global.analyzer.global.Tree =&gt; Any)Unit">foreach</a><span class="delimiter">(</span><a title="LazyVals.this.global.analyzer.global.Tree" id="992485">t</a> =&gt; <span class="delimiter">{</span>
                    <span title="Any" class="keyword">if</span> <span class="delimiter">(</span><a href="../../../reflect/api/Trees.scala.html#405647" title="=&gt; LazyVals.this.global.Symbol">currentOwner</a>.<a href="../../../reflect/internal/Symbols.scala.html#411367" title="=&gt; LazyVals.this.global.Type">info</a>.<a href="../../../reflect/internal/Types.scala.html#408443" title="(name: LazyVals.this.global.Name)LazyVals.this.global.Symbol">decl</a><span class="delimiter">(</span><a href="#992485" title="LazyVals.this.global.analyzer.global.Tree">t</a>.<a href="../../../reflect/internal/Trees.scala.html#408577" title="=&gt; LazyVals.this.global.analyzer.global.Symbol">symbol</a>.<a href="../../../reflect/internal/Symbols.scala.html#411087" title="=&gt; LazyVals.this.global.analyzer.global.Symbol#NameType">name</a><span class="delimiter">)</span> <span title="(x$1: AnyRef)Boolean">==</span> <a href="../../../reflect/internal/Symbols.scala.html#407184" title="=&gt; LazyVals.this.global.NoSymbol">NoSymbol</a><span class="delimiter">)</span> <span class="delimiter">{</span>
                      <a href="#992485" title="LazyVals.this.global.analyzer.global.Tree">t</a>.<a href="../../../reflect/internal/Trees.scala.html#408577" title="=&gt; LazyVals.this.global.analyzer.global.Symbol">symbol</a>.<a href="../../../reflect/internal/Symbols.scala.html#411236" title="(mask: Long)LazyVals.this.global.analyzer.global.Symbol">setFlag</a><span class="delimiter">(</span><span title="Long(1L)">PROTECTED</span><span class="delimiter">)</span>
                      <a href="../../../reflect/api/Trees.scala.html#405647" title="=&gt; LazyVals.this.global.Symbol">currentOwner</a>.<a href="../../../reflect/internal/Symbols.scala.html#411367" title="=&gt; LazyVals.this.global.Type">info</a>.<a href="../../../reflect/internal/Types.scala.html#408442" title="=&gt; LazyVals.this.global.Scope">decls</a>.<a href="../../../reflect/internal/Scopes.scala.html#410508" title="(sym: LazyVals.this.global.analyzer.global.Symbol)LazyVals.this.global.analyzer.global.Symbol">enter</a><span class="delimiter">(</span><a href="#992485" title="LazyVals.this.global.analyzer.global.Tree">t</a>.<a href="../../../reflect/internal/Trees.scala.html#408577" title="=&gt; LazyVals.this.global.analyzer.global.Symbol">symbol</a><span class="delimiter">)</span>
                    <span class="delimiter">}</span>
                <span class="delimiter">}</span><span class="delimiter">)</span>
                <a href="#992385" title="List[LazyVals.this.global.analyzer.global.Tree]">toAdd0</a>
            <span class="delimiter">}</span> <span class="keyword">else</span> List<a href="../../../collection/immutable/List.scala.html#11188" title="scala.collection.immutable.Nil.type" class="delimiter">(</a><span class="delimiter">)</span>
          <a href="../../../reflect/internal/Trees.scala.html#408158" title="(templ: LazyVals.this.global.Tree)(applyToBody: List[LazyVals.this.global.Tree] =&gt; List[LazyVals.this.global.Tree])LazyVals.this.global.Template">deriveTemplate</a><span class="delimiter">(</span><a href="#991946" title="LazyVals.this.global.Tree">tree</a><span class="delimiter">)</span><span class="delimiter">(</span><a title="List[LazyVals.this.global.Tree]" id="992518">_</a> =&gt; <a href="#992294" title="List[LazyVals.this.global.analyzer.global.Tree]">innerClassBitmaps</a> <a href="../../../collection/immutable/List.scala.html#62697" title="(that: scala.collection.GenTraversableOnce[LazyVals.this.global.analyzer.global.Tree])(implicit bf: scala.collection.generic.CanBuildFrom[List[LazyVals.this.global.analyzer.global.Tree],LazyVals.this.global.analyzer.global.Tree,List[LazyVals.this.global.Tree]])List[LazyVals.this.global.Tree]">++</a> <a href="#992293" title="List[LazyVals.this.global.analyzer.global.Tree]">stats</a><span class="delimiter">)</span>
        <span class="delimiter">}</span>

        <span class="keyword">case</span> ValDef<a href="#3359754" title="LazyVals.this.global.Tree" id="3359775" class="delimiter">(</a><a href="../../../reflect/internal/Trees.scala.html#410298" title="LazyVals.this.global.Modifiers" id="3359770">_</a>, <a href="../../../reflect/internal/Trees.scala.html#410300" title="LazyVals.this.global.TermName" id="3359771">_</a>, <a href="../../../reflect/internal/Trees.scala.html#410302" title="LazyVals.this.global.Tree" id="3359772">_</a>, <a href="../../../reflect/internal/Trees.scala.html#410304" title="LazyVals.this.global.Tree" id="3359773">_</a><span class="delimiter">)</span> <span class="keyword">if</span> <a href="../../../Boolean.scala.html#57822" title="=&gt; Boolean">!</a><a href="#991951" title="LazyVals.this.global.Symbol">sym</a>.<a href="../../../reflect/internal/Symbols.scala.html#411315" title="=&gt; LazyVals.this.global.Symbol">owner</a>.<a href="../../../reflect/api/Symbols.scala.html#402401" title="=&gt; Boolean">isModule</a> <a href="../../../Boolean.scala.html#57826" title="(x: Boolean)Boolean">&amp;&amp;</a> <a href="../../../Boolean.scala.html#57822" title="=&gt; Boolean">!</a><a href="#991951" title="LazyVals.this.global.Symbol">sym</a>.<a href="../../../reflect/internal/Symbols.scala.html#411315" title="=&gt; LazyVals.this.global.Symbol">owner</a>.<a href="../../../reflect/api/Symbols.scala.html#402403" title="=&gt; Boolean">isClass</a> =&gt;
          <a href="../../../reflect/internal/Trees.scala.html#408157" title="(vdef: LazyVals.this.global.Tree)(applyToRhs: LazyVals.this.global.Tree =&gt; LazyVals.this.global.Tree)LazyVals.this.global.ValDef">deriveValDef</a><span class="delimiter">(</span><a href="#991946" title="LazyVals.this.global.Tree">tree</a><span class="delimiter">)</span> <a href="#3359789" title="(x: LazyVals.this.global.Tree)LazyVals.this.global.Tree" class="delimiter">{</a> <a title="LazyVals.this.global.Tree" id="992580">rhs0</a> =&gt;
            <span class="keyword">val</span> <a title="LazyVals.this.global.Tree" id="992581">rhs</a> = <a href="#991805" title="(tree: LazyVals.this.global.Tree)LazyVals.this.global.Tree">transform</a><span class="delimiter">(</span><a href="#992580" title="LazyVals.this.global.Tree">rhs0</a><span class="delimiter">)</span>
            <span title="LazyVals.this.global.analyzer.global.Tree" class="keyword">if</span> <span class="delimiter">(</span><a href="#622392" title="LazyVals.this.LocalLazyValFinder.type">LocalLazyValFinder</a>.<a href="#991831" title="(t: LazyVals.this.global.Tree)Boolean">find</a><span class="delimiter">(</span><a href="#992581" title="LazyVals.this.global.Tree">rhs</a><span class="delimiter">)</span><span class="delimiter">)</span> <a href="../typechecker/Typers.scala.html#538701" title="(tree: LazyVals.this.global.analyzer.global.Tree)LazyVals.this.global.analyzer.global.Tree">typed</a><span class="delimiter">(</span><a href="#991806" title="(methSym: LazyVals.this.global.Symbol, rhs: LazyVals.this.global.Tree)LazyVals.this.global.Tree">addBitmapDefs</a><span class="delimiter">(</span><a href="#991951" title="LazyVals.this.global.Symbol">sym</a>, <a href="#992581" title="LazyVals.this.global.Tree">rhs</a><span class="delimiter">)</span><span class="delimiter">)</span> <span class="keyword">else</span> <a href="#992581" title="LazyVals.this.global.Tree">rhs</a>
          <span class="delimiter">}</span>

        <span class="keyword">case</span> l@LabelDef<a href="#3359754" title="Boolean" id="3359777" class="delimiter">(</a><a href="../../../reflect/internal/Trees.scala.html#410239" title="LazyVals.this.global.TermName" id="992594">name0</a>, <a href="../../../reflect/internal/Trees.scala.html#410241" title="List[LazyVals.this.global.Ident]" id="992595">params0</a>, <a href="../../../reflect/internal/Trees.scala.html#410243" title="LazyVals.this.global.Tree" id="992596">ifp0</a>@If<a href="#992596" title="LazyVals.this.global.Tree" id="3359782" class="delimiter">(</a><a href="../../../reflect/internal/Trees.scala.html#410107" title="LazyVals.this.global.Tree" id="3359778">_</a>, <a href="../../../reflect/internal/Trees.scala.html#410109" title="LazyVals.this.global.Tree" id="3359779">_</a>, <a href="../../../reflect/internal/Trees.scala.html#410111" title="LazyVals.this.global.Tree" id="3359780">_</a><span class="delimiter">)</span><span class="delimiter">)</span> <span class="keyword">if</span> <a href="#992594" title="LazyVals.this.global.TermName">name0</a>.<a href="../../../reflect/internal/Names.scala.html#410410" title="(name: String)Boolean">startsWith</a><span class="delimiter">(</span><a href="../../../reflect/internal/StdNames.scala.html#407871" title="LazyVals.this.global.nme.type">nme</a>.<a href="../../../reflect/internal/StdNames.scala.html#413978" title="=&gt; String">WHILE_PREFIX</a><span class="delimiter">)</span> =&gt;
          <span class="keyword">val</span> <a title="LazyVals.this.global.Tree" id="992607">ifp1</a> = <a href="#622394" title="LazyVals.this.LazyValues" class="keyword">super</a>.<a href="TypingTransformers.scala.html#984469" title="(tree: LazyVals.this.global.Tree)LazyVals.this.global.Tree">transform</a><span class="delimiter">(</span>ifp0<span class="delimiter">)</span>
          <span class="keyword">val</span> If<a href="#3359746" title="(LazyVals.this.global.Tree, LazyVals.this.global.Tree, LazyVals.this.global.Tree)" id="3359748" class="delimiter">(</a><a href="../../../reflect/internal/Trees.scala.html#410107" title="LazyVals.this.global.Tree" id="992609">cond0</a>, <a href="../../../reflect/internal/Trees.scala.html#410109" title="LazyVals.this.global.Tree" id="992610">thenp0</a>, <a href="../../../reflect/internal/Trees.scala.html#410111" title="LazyVals.this.global.Tree" id="992611">elsep0</a><span class="delimiter">)</span> = <a href="#992607" title="LazyVals.this.global.Tree">ifp1</a>

          <span title="LazyVals.this.global.LabelDef" class="keyword">if</span> <span class="delimiter">(</span><a href="#622392" title="LazyVals.this.LocalLazyValFinder.type">LocalLazyValFinder</a>.<a href="#991831" title="(t: LazyVals.this.global.Tree)Boolean">find</a><span class="delimiter">(</span><a href="#992610" title="LazyVals.this.global.Tree">thenp0</a><span class="delimiter">)</span><span class="delimiter">)</span>
            <a href="../../../reflect/internal/Trees.scala.html#408162" title="(ldef: LazyVals.this.global.Tree)(applyToRhs: LazyVals.this.global.Tree =&gt; LazyVals.this.global.Tree)LazyVals.this.global.LabelDef">deriveLabelDef</a><span class="delimiter">(</span>l<span class="delimiter">)</span><span class="delimiter">(</span><a title="LazyVals.this.global.Tree" id="992636">_</a> =&gt; <a href="../../../reflect/api/Trees.scala.html#405645" title="=&gt; LazyVals.this.global.TreeCopier">treeCopy</a>.<a href="../../../reflect/api/Trees.scala.html#405389" title="(tree: LazyVals.this.global.Tree, cond: LazyVals.this.global.Tree, thenp: LazyVals.this.global.Tree, elsep: LazyVals.this.global.Tree)LazyVals.this.global.If">If</a><span class="delimiter">(</span><a href="#992607" title="LazyVals.this.global.Tree">ifp1</a>, <a href="#992609" title="LazyVals.this.global.Tree">cond0</a>, <a href="../typechecker/Typers.scala.html#538701" title="(tree: LazyVals.this.global.analyzer.global.Tree)LazyVals.this.global.analyzer.global.Tree">typed</a><span class="delimiter">(</span><a href="#991806" title="(methSym: LazyVals.this.global.Symbol, rhs: LazyVals.this.global.Tree)LazyVals.this.global.Tree">addBitmapDefs</a><span class="delimiter">(</span><a href="#991951" title="LazyVals.this.global.Symbol">sym</a>.<a href="../../../reflect/internal/Symbols.scala.html#411315" title="=&gt; LazyVals.this.global.Symbol">owner</a>, <a href="#992610" title="LazyVals.this.global.Tree">thenp0</a><span class="delimiter">)</span><span class="delimiter">)</span>, <a href="#992611" title="LazyVals.this.global.Tree">elsep0</a><span class="delimiter">)</span><span class="delimiter">)</span>
          <span class="keyword">else</span>
            l

        <span class="keyword">case</span> l@LabelDef<span class="delimiter">(</span><a href="../../../reflect/internal/Trees.scala.html#410239" title="LazyVals.this.global.TermName" id="992649">name0</a>, <a href="../../../reflect/internal/Trees.scala.html#410241" title="List[LazyVals.this.global.Ident]" id="992650">params0</a>, <a href="../../../reflect/internal/Trees.scala.html#410243" title="LazyVals.this.global.Tree" id="992651">block</a>@Block<a href="#992651" title="LazyVals.this.global.Tree" id="3359786" class="delimiter">(</a><a href="../../../reflect/internal/Trees.scala.html#410192" title="List[LazyVals.this.global.Tree]" id="992656">stats0</a>, <a href="../../../reflect/internal/Trees.scala.html#410194" title="LazyVals.this.global.Tree" id="992657">expr</a><span class="delimiter">)</span><span class="delimiter">)</span>
          <span class="keyword">if</span> <a href="#992649" title="LazyVals.this.global.TermName">name0</a>.<a href="../../../reflect/internal/Names.scala.html#410410" title="(name: String)Boolean">startsWith</a><span class="delimiter">(</span><a href="../../../reflect/internal/StdNames.scala.html#407871" title="LazyVals.this.global.nme.type">nme</a>.<a href="../../../reflect/internal/StdNames.scala.html#413978" title="=&gt; String">WHILE_PREFIX</a><span class="delimiter">)</span> <a href="../../../Boolean.scala.html#57825" title="(x: Boolean)Boolean">||</a> <a href="#992649" title="LazyVals.this.global.TermName">name0</a>.<a href="../../../reflect/internal/Names.scala.html#410410" title="(name: String)Boolean">startsWith</a><span class="delimiter">(</span><a href="../../../reflect/internal/StdNames.scala.html#407871" title="LazyVals.this.global.nme.type">nme</a>.<a href="../../../reflect/internal/StdNames.scala.html#413952" title="=&gt; String">DO_WHILE_PREFIX</a><span class="delimiter">)</span> =&gt;
          <span class="keyword">val</span> <a title="List[LazyVals.this.global.Tree]" id="992669">stats1</a> = <a href="#622394" title="LazyVals.this.LazyValues" class="keyword">super</a>.<a href="../../../reflect/api/Trees.scala.html#405653" title="(trees: List[LazyVals.this.global.Tree])List[LazyVals.this.global.Tree]">transformTrees</a><span class="delimiter">(</span><a href="#992656" title="List[LazyVals.this.global.Tree]">stats0</a><span class="delimiter">)</span>
          <span title="LazyVals.this.global.LabelDef" class="keyword">if</span> <span class="delimiter">(</span><a href="#622392" title="LazyVals.this.LocalLazyValFinder.type">LocalLazyValFinder</a>.<a href="#991832" title="(ts: List[LazyVals.this.global.Tree])Boolean">find</a><span class="delimiter">(</span><a href="#992669" title="List[LazyVals.this.global.Tree]">stats1</a><span class="delimiter">)</span><span class="delimiter">)</span>
            <a href="../../../reflect/internal/Trees.scala.html#408162" title="(ldef: LazyVals.this.global.Tree)(applyToRhs: LazyVals.this.global.Tree =&gt; LazyVals.this.global.Tree)LazyVals.this.global.LabelDef">deriveLabelDef</a><span class="delimiter">(</span>l<span class="delimiter">)</span><span class="delimiter">(</span><a title="LazyVals.this.global.Tree" id="992675">_</a> =&gt; <a href="../../../reflect/api/Trees.scala.html#405645" title="=&gt; LazyVals.this.global.TreeCopier">treeCopy</a>.<a href="../../../reflect/api/Trees.scala.html#405380" title="(tree: LazyVals.this.global.Tree, stats: List[LazyVals.this.global.Tree], expr: LazyVals.this.global.Tree)LazyVals.this.global.Block">Block</a><span class="delimiter">(</span>block, <a href="../typechecker/Typers.scala.html#538701" title="(tree: LazyVals.this.global.analyzer.global.Tree)LazyVals.this.global.analyzer.global.Tree">typed</a><span class="delimiter">(</span><a href="#991806" title="(methSym: LazyVals.this.global.Symbol, rhs: LazyVals.this.global.Tree)LazyVals.this.global.Tree">addBitmapDefs</a><span class="delimiter">(</span><a href="#991951" title="LazyVals.this.global.Symbol">sym</a>.<a href="../../../reflect/internal/Symbols.scala.html#411315" title="=&gt; LazyVals.this.global.Symbol">owner</a>, <a href="#992669" title="List[LazyVals.this.global.Tree]">stats1</a>.<a href="../../../collection/IterableLike.scala.html#58577" title="=&gt; LazyVals.this.global.Tree">head</a><span class="delimiter">)</span><span class="delimiter">)</span><a href="../../../collection/immutable/List.scala.html#62685" title="(x: LazyVals.this.global.Tree)List[LazyVals.this.global.Tree]">::</a><a href="#992669" title="List[LazyVals.this.global.Tree]">stats1</a>.<a href="../../../collection/TraversableLike.scala.html#58104" title="=&gt; List[LazyVals.this.global.Tree]">tail</a>, <a href="#992657" title="LazyVals.this.global.Tree">expr</a><span class="delimiter">)</span><span class="delimiter">)</span>
          <span class="keyword">else</span>
            l

        <span class="keyword">case</span> _ =&gt; <a href="#622394" title="LazyVals.this.LazyValues" class="keyword">super</a>.<a href="TypingTransformers.scala.html#984469" title="(tree: LazyVals.this.global.Tree)LazyVals.this.global.Tree">transform</a><a href="#3359789" title="(x: LazyVals.this.global.Tree)LazyVals.this.global.Tree" class="delimiter">(</a><a href="#991946" title="LazyVals.this.global.Tree">tree</a><span class="delimiter">)</span>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>

    /** Add the bitmap definitions to the rhs of a method definition.
     *  If the rhs has been tail-call transformed, insert the bitmap
     *  definitions inside the top-level label definition, so that each
     *  iteration has the lazy values un-initialized. Otherwise add them
     *  at the very beginning of the method.
     */
    <span class="keyword">private</span> <span class="keyword">def</span> <a title="(methSym: LazyVals.this.global.Symbol, rhs: LazyVals.this.global.Tree)LazyVals.this.global.Tree" id="991806">addBitmapDefs</a><span class="delimiter">(</span><a title="LazyVals.this.global.Symbol" id="992236">methSym</a>: <a href="../../../reflect/internal/Symbols.scala.html#407146" title="LazyVals.this.global.Symbol">Symbol</a>, <a title="LazyVals.this.global.Tree" id="992237">rhs</a>: <a href="../../../reflect/internal/Trees.scala.html#407938" title="LazyVals.this.global.Tree">Tree</a><span class="delimiter">)</span>: <a href="../../../reflect/internal/Trees.scala.html#407938" title="LazyVals.this.global.Tree">Tree</a> = <span class="delimiter">{</span>
      <span class="keyword">def</span> <a title="(stats: List[LazyVals.this.global.Tree], tree: LazyVals.this.global.Tree)LazyVals.this.global.Block" id="992686">prependStats</a><span class="delimiter">(</span><a title="List[LazyVals.this.global.Tree]" id="992689">stats</a>: <a href="../../../collection/immutable/List.scala.html#11952" title="List[LazyVals.this.global.Tree]">List</a><span class="delimiter">[</span>Tree<span class="delimiter">]</span>, <a title="LazyVals.this.global.Tree" id="992690">tree</a>: <a href="../../../reflect/internal/Trees.scala.html#407938" title="LazyVals.this.global.Tree">Tree</a><span class="delimiter">)</span>: <a href="../../../reflect/internal/Trees.scala.html#407981" title="LazyVals.this.global.Block">Block</a> = <a href="#992690" title="LazyVals.this.global.Tree">tree</a> <span class="keyword">match</span> <span class="delimiter">{</span>
        <span class="keyword">case</span> Block<a href="#3359799" title="LazyVals.this.global.Block" id="3359801" class="delimiter">(</a><a href="../../../reflect/internal/Trees.scala.html#410192" title="List[LazyVals.this.global.Tree]" id="992695">stats1</a>, <a href="../../../reflect/internal/Trees.scala.html#410194" title="LazyVals.this.global.Tree" id="992696">res</a><span class="delimiter">)</span> =&gt; <a href="../../../reflect/internal/Trees.scala.html#453067" title="(stats: List[LazyVals.this.global.Tree], expr: LazyVals.this.global.Tree)LazyVals.this.global.Block">Block</a><a href="#3359803" title="(x: LazyVals.this.global.Block)LazyVals.this.global.Block" class="delimiter">(</a><a href="#992689" title="List[LazyVals.this.global.Tree]">stats</a> <a href="../../../collection/immutable/List.scala.html#62688" title="(prefix: List[LazyVals.this.global.Tree])List[LazyVals.this.global.Tree]">:::</a> <a href="#992695" title="List[LazyVals.this.global.Tree]">stats1</a>, <a href="#992696" title="LazyVals.this.global.Tree">res</a><span class="delimiter">)</span>
        <span class="keyword">case</span> _ =&gt; <a href="../../../reflect/internal/Trees.scala.html#453067" title="(stats: List[LazyVals.this.global.Tree], expr: LazyVals.this.global.Tree)LazyVals.this.global.Block">Block</a><a href="#3359803" title="(x: LazyVals.this.global.Block)LazyVals.this.global.Block" class="delimiter">(</a><a href="#992689" title="List[LazyVals.this.global.Tree]">stats</a>, <a href="#992690" title="LazyVals.this.global.Tree">tree</a><span class="delimiter">)</span>
      <span class="delimiter">}</span>

      <span class="keyword">val</span> <a title="List[LazyVals.this.global.ValDef]" id="992687">bmps</a> = <a href="../../../collection/MapLike.scala.html#87535" title="(key: LazyVals.this.global.Symbol)List[LazyVals.this.global.Symbol]">bitmaps</a><span class="delimiter">(</span><a href="#992236" title="LazyVals.this.global.Symbol">methSym</a><span class="delimiter">)</span> <a href="../../../collection/TraversableLike.scala.html#58063" title="(f: LazyVals.this.global.Symbol =&gt; LazyVals.this.global.ValDef)(implicit bf: scala.collection.generic.CanBuildFrom[List[LazyVals.this.global.Symbol],LazyVals.this.global.ValDef,List[LazyVals.this.global.ValDef]])List[LazyVals.this.global.ValDef]">map</a> <span class="delimiter">(</span><a href="../../../reflect/internal/Trees.scala.html#408102" title="(sym: LazyVals.this.global.Symbol, rhs: LazyVals.this.global.Tree)LazyVals.this.global.ValDef">ValDef</a><span class="delimiter">(</span><a href="#992771" title="LazyVals.this.global.Symbol">_</a>, <a href="../ast/TreeDSL.scala.html#624558" title="=&gt; LazyVals.this.global.Literal">ZERO</a><span class="delimiter">)</span><span class="delimiter">)</span>

      <span class="keyword">def</span> <a title="(params: List[LazyVals.this.global.Ident])Boolean" id="992688">isMatch</a><span class="delimiter">(</span><a title="List[LazyVals.this.global.Ident]" id="992811">params</a>: <a href="../../../collection/immutable/List.scala.html#11952" title="List[LazyVals.this.global.Ident]">List</a><span class="delimiter">[</span>Ident<span class="delimiter">]</span><span class="delimiter">)</span> = <span class="delimiter">(</span><a href="#992811" title="List[LazyVals.this.global.Ident]">params</a>.<a href="../../../collection/TraversableLike.scala.html#58104" title="=&gt; List[LazyVals.this.global.Ident]">tail</a> <a href="../../../collection/LinearSeqLike.scala.html#86319" title="(that: scala.collection.GenSeq[LazyVals.this.global.Symbol])(p: (LazyVals.this.global.Ident, LazyVals.this.global.Symbol) =&gt; Boolean)Boolean">corresponds</a> <a href="#992236" title="LazyVals.this.global.Symbol">methSym</a>.<a href="../../../reflect/internal/Symbols.scala.html#411365" title="=&gt; LazyVals.this.global.Type">tpe</a>.<a href="../../../reflect/internal/Types.scala.html#408430" title="=&gt; List[LazyVals.this.global.Symbol]">params</a><span class="delimiter">)</span><span class="delimiter">(</span><a href="#992833" title="LazyVals.this.global.Ident">_</a>.<a href="../../../reflect/internal/Trees.scala.html#408573" title="=&gt; LazyVals.this.global.Type">tpe</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="#992834" title="LazyVals.this.global.Symbol">_</a>.<a href="../../../reflect/internal/Symbols.scala.html#411365" title="=&gt; LazyVals.this.global.Type">tpe</a><span class="delimiter">)</span>

      <span title="LazyVals.this.global.Tree" class="keyword">if</span> <span class="delimiter">(</span><a href="#992687" title="List[LazyVals.this.global.ValDef]">bmps</a>.<a href="../../../collection/SeqLike.scala.html#58787" title="=&gt; Boolean">isEmpty</a><span class="delimiter">)</span> <a href="#992237" title="LazyVals.this.global.Tree">rhs</a> <span class="keyword">else</span> <a href="#992237" title="LazyVals.this.global.Tree">rhs</a> <span class="keyword">match</span> <span class="delimiter">{</span>
        <span class="keyword">case</span> Block<a href="#3359808" title="LazyVals.this.global.Tree" id="3359810" class="delimiter">(</a><a href="../../../reflect/internal/Trees.scala.html#410192" title="List[LazyVals.this.global.Tree]" id="992844">assign</a>, <a href="../../../reflect/internal/Trees.scala.html#410194" title="LazyVals.this.global.Tree" id="992845">l</a> @ LabelDef<a href="#992845" title="LazyVals.this.global.Tree" id="3359813" class="delimiter">(</a><a href="../../../reflect/internal/Trees.scala.html#410239" title="LazyVals.this.global.TermName" id="992851">name</a>, <a href="../../../reflect/internal/Trees.scala.html#410241" title="List[LazyVals.this.global.Ident]" id="992852">params</a>, <a href="../../../reflect/internal/Trees.scala.html#410243" title="LazyVals.this.global.Tree" id="3359811">_</a><span class="delimiter">)</span><span class="delimiter">)</span>
          <span class="keyword">if</span> <a href="#992851" title="LazyVals.this.global.TermName">name</a>.<span title="()String">toString</span> <span title="(x$1: AnyRef)Boolean">==</span> <span class="delimiter">(</span><span title="String(&quot;_&quot;)" class="string">&quot;_&quot;</span> <span title="(x$1: Any)String">+</span> <a href="#992236" title="LazyVals.this.global.Symbol">methSym</a>.<a href="../../../reflect/internal/Symbols.scala.html#411087" title="=&gt; methSym.NameType">name</a><span class="delimiter">)</span> <a href="../../../Boolean.scala.html#57826" title="(x: Boolean)Boolean">&amp;&amp;</a> <a href="#992688" title="(params: List[LazyVals.this.global.Ident])Boolean">isMatch</a><span class="delimiter">(</span><a href="#992852" title="List[LazyVals.this.global.Ident]">params</a><span class="delimiter">)</span> =&gt;
            <a href="../../../reflect/internal/Trees.scala.html#453067" title="(stats: List[LazyVals.this.global.Tree], expr: LazyVals.this.global.Tree)LazyVals.this.global.Block">Block</a><a href="#3359815" title="(x: LazyVals.this.global.Tree)LazyVals.this.global.Tree" class="delimiter">(</a><a href="#992844" title="List[LazyVals.this.global.Tree]">assign</a>, <a href="../../../reflect/internal/Trees.scala.html#408162" title="(ldef: LazyVals.this.global.Tree)(applyToRhs: LazyVals.this.global.Tree =&gt; LazyVals.this.global.Tree)LazyVals.this.global.LabelDef">deriveLabelDef</a><span class="delimiter">(</span>l<span class="delimiter">)</span><span class="delimiter">(</span><a title="LazyVals.this.global.Tree" id="992867">rhs</a> =&gt; <a href="../typechecker/Typers.scala.html#538701" title="(tree: LazyVals.this.global.analyzer.global.Tree)LazyVals.this.global.analyzer.global.Tree">typed</a><span class="delimiter">(</span><a href="#992686" title="(stats: List[LazyVals.this.global.Tree], tree: LazyVals.this.global.Tree)LazyVals.this.global.Block">prependStats</a><span class="delimiter">(</span><a href="#992687" title="List[LazyVals.this.global.ValDef]">bmps</a>, <a href="#992867" title="LazyVals.this.global.Tree">rhs</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>

        <span class="keyword">case</span> _ =&gt; <a href="#992686" title="(stats: List[LazyVals.this.global.Tree], tree: LazyVals.this.global.Tree)LazyVals.this.global.Block">prependStats</a><a href="#3359815" title="(x: LazyVals.this.global.Tree)LazyVals.this.global.Tree" class="delimiter">(</a><a href="#992687" title="List[LazyVals.this.global.ValDef]">bmps</a>, <a href="#992237" title="LazyVals.this.global.Tree">rhs</a><span class="delimiter">)</span>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>
    
    <span class="keyword">def</span> <a title="(clazz: LazyVals.this.global.Symbol, lzyVal: LazyVals.this.global.Symbol, cond: LazyVals.this.global.Tree, syncBody: List[LazyVals.this.global.Tree], stats: List[LazyVals.this.global.Tree], retVal: LazyVals.this.global.Tree)LazyVals.this.global.Tree" id="991807">mkSlowPathDef</a><span class="delimiter">(</span><a title="LazyVals.this.global.Symbol" id="992878">clazz</a>: <a href="../../../reflect/internal/Symbols.scala.html#407146" title="LazyVals.this.global.Symbol">Symbol</a>, <a title="LazyVals.this.global.Symbol" id="992879">lzyVal</a>: <a href="../../../reflect/internal/Symbols.scala.html#407146" title="LazyVals.this.global.Symbol">Symbol</a>, <a title="LazyVals.this.global.Tree" id="992880">cond</a>: <a href="../../../reflect/internal/Trees.scala.html#407938" title="LazyVals.this.global.Tree">Tree</a>, <a title="List[LazyVals.this.global.Tree]" id="992881">syncBody</a>: <a href="../../../collection/immutable/List.scala.html#11952" title="List[LazyVals.this.global.Tree]">List</a><span class="delimiter">[</span>Tree<span class="delimiter">]</span>,
                      <a title="List[LazyVals.this.global.Tree]" id="992882">stats</a>: <a href="../../../collection/immutable/List.scala.html#11952" title="List[LazyVals.this.global.Tree]">List</a><span class="delimiter">[</span>Tree<span class="delimiter">]</span>, <a title="LazyVals.this.global.Tree" id="992883">retVal</a>: <a href="../../../reflect/internal/Trees.scala.html#407938" title="LazyVals.this.global.Tree">Tree</a><span class="delimiter">)</span>: <a href="../../../reflect/internal/Trees.scala.html#407938" title="LazyVals.this.global.Tree">Tree</a> = <span class="delimiter">{</span>
      <span class="keyword">val</span> <a title="LazyVals.this.global.MethodSymbol" id="992884">defSym</a> = <a href="#992878" title="LazyVals.this.global.Symbol">clazz</a>.<a href="../../../reflect/internal/Symbols.scala.html#411113" title="(name: LazyVals.this.global.TermName, pos: LazyVals.this.global.Position, newFlags: Long)LazyVals.this.global.MethodSymbol">newMethod</a><span class="delimiter">(</span><a href="../../../reflect/internal/StdNames.scala.html#407871" title="LazyVals.this.global.nme.type">nme</a>.<a href="../../../reflect/internal/StdNames.scala.html#414625" title="(lzyValName: LazyVals.this.global.Name)LazyVals.this.global.Name with lzyValName.ThisNameType">newLazyValSlowComputeName</a><a href="../../../reflect/internal/Names.scala.html#406832" title="implicit scala.reflect.internal.Names.promoteTermNamesAsNecessary : (name: LazyVals.this.global.Name)LazyVals.this.global.TermName" class="delimiter">(</a><a href="#992879" title="LazyVals.this.global.Symbol">lzyVal</a>.<a href="../../../reflect/internal/Symbols.scala.html#411087" title="=&gt; lzyVal.NameType">name</a><span class="delimiter">)</span>, <a href="#992879" title="LazyVals.this.global.Symbol">lzyVal</a>.<a href="../../../reflect/internal/StdAttachments.scala.html#409602" title="=&gt; LazyVals.this.global.Position">pos</a>, STABLE <span title="Long(4194308L)">|</span> PRIVATE<span class="delimiter">)</span>
      <a href="#992884" title="LazyVals.this.global.MethodSymbol">defSym</a> <a href="../../../reflect/internal/Symbols.scala.html#411369" title="(info: LazyVals.this.global.Type)defSym.type">setInfo</a> <a href="../../../reflect/internal/Types.scala.html#420479" title="(params: List[LazyVals.this.global.Symbol], resultType: LazyVals.this.global.Type)LazyVals.this.global.MethodType">MethodType</a><span class="delimiter">(</span>List<a href="../../../collection/immutable/List.scala.html#11188" title="scala.collection.immutable.Nil.type" class="delimiter">(</a><span class="delimiter">)</span>, <a href="#992879" title="LazyVals.this.global.Symbol">lzyVal</a>.<a href="../../../reflect/internal/Symbols.scala.html#411365" title="=&gt; LazyVals.this.global.Type">tpe</a>.<a href="../../../reflect/internal/Types.scala.html#408423" title="=&gt; LazyVals.this.global.Type">resultType</a><span class="delimiter">)</span>
      <a href="#992884" title="LazyVals.this.global.MethodSymbol">defSym</a>.<a href="../../../reflect/internal/Symbols.scala.html#411316" title="(owner: LazyVals.this.global.Symbol)Unit">owner</a> = <a href="#992879" title="LazyVals.this.global.Symbol">lzyVal</a>.<a href="../../../reflect/internal/Symbols.scala.html#411315" title="=&gt; LazyVals.this.global.Symbol">owner</a>
      <span title="Any" class="keyword">if</span> <span class="delimiter">(</span><a href="#991811" title="=&gt; scala.collection.mutable.Map[LazyVals.this.global.Symbol,List[LazyVals.this.global.Symbol]]">bitmaps</a>.<a href="../../../collection/MapLike.scala.html#87536" title="(key: LazyVals.this.global.Symbol)Boolean">contains</a><span class="delimiter">(</span><a href="#992879" title="LazyVals.this.global.Symbol">lzyVal</a><span class="delimiter">)</span><span class="delimiter">)</span>
        <a href="../../../collection/MapLike.scala.html#87535" title="(key: LazyVals.this.global.Symbol)List[LazyVals.this.global.Symbol]">bitmaps</a><span class="delimiter">(</span><a href="#992879" title="LazyVals.this.global.Symbol">lzyVal</a><span class="delimiter">)</span>.<a href="../../../collection/TraversableLike.scala.html#58063" title="(f: LazyVals.this.global.Symbol =&gt; Unit)(implicit bf: scala.collection.generic.CanBuildFrom[List[LazyVals.this.global.Symbol],Unit,List[Unit]])List[Unit]">map</a><a href="../../../collection/immutable/List.scala.html#62442" title="scala.collection.generic.CanBuildFrom[scala.collection.immutable.List.Coll,Unit,List[Unit]]" class="delimiter">(</a><a href="#992946" title="LazyVals.this.global.Symbol">_</a>.<a href="../../../reflect/internal/Symbols.scala.html#411316" title="(owner: LazyVals.this.global.Symbol)Unit">owner</a> = <a href="#992884" title="LazyVals.this.global.MethodSymbol">defSym</a><span class="delimiter">)</span>
      <span class="keyword">val</span> <a title="LazyVals.this.global.Tree" id="992885">rhs</a>: <a href="../../../reflect/internal/Trees.scala.html#407938" title="LazyVals.this.global.Tree">Tree</a> = <span class="delimiter">(</span><a href="../Global.scala.html#537460" title="LazyVals.this.global.gen.type">gen</a>.<a href="../ast/TreeGen.scala.html#543493" title="(clazz: LazyVals.this.global.gen.global.Symbol, cond: LazyVals.this.global.gen.global.Tree, syncBody: List[LazyVals.this.global.gen.global.Tree], stats: List[LazyVals.this.global.gen.global.Tree])LazyVals.this.global.gen.global.Tree">mkSynchronizedCheck</a><span class="delimiter">(</span><a href="#992878" title="LazyVals.this.global.Symbol">clazz</a>, <a href="#992880" title="LazyVals.this.global.Tree">cond</a>, <a href="#992881" title="List[LazyVals.this.global.Tree]">syncBody</a>, <a href="#992882" title="List[LazyVals.this.global.Tree]">stats</a><span class="delimiter">)</span><span class="delimiter">)</span>.<a href="../../../reflect/internal/Trees.scala.html#408563" title="(pairs: (LazyVals.this.global.gen.global.Symbol, LazyVals.this.global.gen.global.Symbol)*)LazyVals.this.global.gen.global.Tree">changeOwner</a><span class="delimiter">(</span><a href="../../../Predef.scala.html#7509" title="(x: LazyVals.this.global.Symbol)ArrowAssoc[LazyVals.this.global.Symbol]">currentOwner</a> <a href="../../../Predef.scala.html#62634" title="(y: LazyVals.this.global.MethodSymbol)(LazyVals.this.global.Symbol, LazyVals.this.global.MethodSymbol)">-&gt;</a> <a href="#992884" title="LazyVals.this.global.MethodSymbol">defSym</a><span class="delimiter">)</span>
      <a href="../ast/TreeDSL.scala.html#624593" title="(sym: LazyVals.this.global.Symbol)LazyVals.this.CODE.DefSymStart">DEF</a><span class="delimiter">(</span><a href="#992884" title="LazyVals.this.global.MethodSymbol">defSym</a><span class="delimiter">)</span>.<a href="../ast/TreeDSL.scala.html#663179" title="(rhs: LazyVals.this.global.Tree)LazyVals.this.global.DefDef">mkTree</a><span class="delimiter">(</span><a href="#991806" title="(methSym: LazyVals.this.global.Symbol, rhs: LazyVals.this.global.Tree)LazyVals.this.global.Tree">addBitmapDefs</a><span class="delimiter">(</span><a href="#992879" title="LazyVals.this.global.Symbol">lzyVal</a>, <a href="../ast/TreeDSL.scala.html#624607" title="(xs: LazyVals.this.global.Tree*)LazyVals.this.global.Block">BLOCK</a><span class="delimiter">(</span><a href="#992885" title="LazyVals.this.global.Tree">rhs</a>, <a href="#992883" title="LazyVals.this.global.Tree">retVal</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span> <a href="../../../reflect/internal/Trees.scala.html#408579" title="(sym: LazyVals.this.global.Symbol)LazyVals.this.global.DefDef">setSymbol</a> <a href="#992884" title="LazyVals.this.global.MethodSymbol">defSym</a>
    <span class="delimiter">}</span>
  
  
    <span class="keyword">def</span> <a title="(clazz: LazyVals.this.global.Symbol, lzyVal: LazyVals.this.global.Symbol, cond: LazyVals.this.global.Tree, syncBody: List[LazyVals.this.global.Tree], stats: List[LazyVals.this.global.Tree], retVal: LazyVals.this.global.Tree)(LazyVals.this.global.Tree, LazyVals.this.global.Tree)" id="991808">mkFastPathBody</a><span class="delimiter">(</span><a title="LazyVals.this.global.Symbol" id="993032">clazz</a>: <a href="../../../reflect/internal/Symbols.scala.html#407146" title="LazyVals.this.global.Symbol">Symbol</a>, <a title="LazyVals.this.global.Symbol" id="993033">lzyVal</a>: <a href="../../../reflect/internal/Symbols.scala.html#407146" title="LazyVals.this.global.Symbol">Symbol</a>, <a title="LazyVals.this.global.Tree" id="993034">cond</a>: <a href="../../../reflect/internal/Trees.scala.html#407938" title="LazyVals.this.global.Tree">Tree</a>, <a title="List[LazyVals.this.global.Tree]" id="993035">syncBody</a>: <a href="../../../collection/immutable/List.scala.html#11952" title="List[LazyVals.this.global.Tree]">List</a><span class="delimiter">[</span>Tree<span class="delimiter">]</span>,
                       <a title="List[LazyVals.this.global.Tree]" id="993036">stats</a>: <a href="../../../collection/immutable/List.scala.html#11952" title="List[LazyVals.this.global.Tree]">List</a><span class="delimiter">[</span>Tree<span class="delimiter">]</span>, <a title="LazyVals.this.global.Tree" id="993037">retVal</a>: <a href="../../../reflect/internal/Trees.scala.html#407938" title="LazyVals.this.global.Tree">Tree</a><span class="delimiter">)</span>: <a href="../../../Tuple2.scala.html#783" title="(LazyVals.this.global.Tree, LazyVals.this.global.Tree)" class="delimiter">(</a>Tree, Tree<span class="delimiter">)</span> = <span class="delimiter">{</span>
      <span class="keyword">val</span> <a title="LazyVals.this.global.Tree" id="993038">slowPathDef</a>: <a href="../../../reflect/internal/Trees.scala.html#407938" title="LazyVals.this.global.Tree">Tree</a> = <a href="#991807" title="(clazz: LazyVals.this.global.Symbol, lzyVal: LazyVals.this.global.Symbol, cond: LazyVals.this.global.Tree, syncBody: List[LazyVals.this.global.Tree], stats: List[LazyVals.this.global.Tree], retVal: LazyVals.this.global.Tree)LazyVals.this.global.Tree">mkSlowPathDef</a><span class="delimiter">(</span><a href="#993032" title="LazyVals.this.global.Symbol">clazz</a>, <a href="#993033" title="LazyVals.this.global.Symbol">lzyVal</a>, <a href="#993034" title="LazyVals.this.global.Tree">cond</a>, <a href="#993035" title="List[LazyVals.this.global.Tree]">syncBody</a>, <a href="#993036" title="List[LazyVals.this.global.Tree]">stats</a>, <a href="#993037" title="LazyVals.this.global.Tree">retVal</a><span class="delimiter">)</span>
      <a href="../../../Tuple2.scala.html#62849" title="(_1: LazyVals.this.global.If, _2: LazyVals.this.global.Tree)(LazyVals.this.global.If, LazyVals.this.global.Tree)" class="delimiter">(</a><a href="../../../reflect/internal/Trees.scala.html#453562" title="(cond: LazyVals.this.global.Tree, thenp: LazyVals.this.global.Tree, elsep: LazyVals.this.global.Tree)LazyVals.this.global.If">If</a><span class="delimiter">(</span><a href="#993034" title="LazyVals.this.global.Tree">cond</a>, <a href="../../../reflect/internal/Trees.scala.html#413581" title="(fun: LazyVals.this.global.Tree, args: List[LazyVals.this.global.Tree])LazyVals.this.global.Apply">Apply</a><span class="delimiter">(</span><a href="../ast/TreeDSL.scala.html#624611" title="(sym: LazyVals.this.global.Symbol)LazyVals.this.global.gen.global.Tree">ID</a><span class="delimiter">(</span><a href="#993038" title="LazyVals.this.global.Tree">slowPathDef</a>.<a href="../../../reflect/internal/Trees.scala.html#408577" title="=&gt; LazyVals.this.global.Symbol">symbol</a><span class="delimiter">)</span>, List<a href="../../../collection/immutable/List.scala.html#11188" title="scala.collection.immutable.Nil.type" class="delimiter">(</a><span class="delimiter">)</span><span class="delimiter">)</span>, <a href="#993037" title="LazyVals.this.global.Tree">retVal</a><span class="delimiter">)</span>, <a href="#993038" title="LazyVals.this.global.Tree">slowPathDef</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>

    /** return a 'lazified' version of rhs. Rhs should conform to the
     *  following schema:
     *  {
     *    l$ = &lt;rhs&gt;
     *    l$
     *  } or
     *  &lt;rhs&gt; when the lazy value has type Unit (for which there is no field
     *  to cache it's value.
     *
     *  Similarly as for normal lazy val members (see Mixin), the result will be a tree of the form
     *  { if ((bitmap&amp;n &amp; MASK) == 0) this.l$compute()
     *    else l$
     *    
     *    def l$compute() = { synchronized(enclosing_class_or_dummy) {
     *      if ((bitmap$n &amp; MASK) == 0) {
     *       l$ = &lt;rhs&gt;
     *       bitmap$n = bimap$n | MASK
     *      }}
     *      l$
     *    }
     *  }
     *  where bitmap$n is a byte value acting as a bitmap of initialized values. It is
     *  the 'n' is (offset / 8), the MASK is (1 &lt;&lt; (offset % 8)). If the value has type
     *  unit, no field is used to cache the value, so the l$compute will now look as following:
     *  {
     *    def l$compute() = { synchronized(enclosing_class_or_dummy) {
     *      if ((bitmap$n &amp; MASK) == 0) {
     *       &lt;rhs&gt;;
     *       bitmap$n = bimap$n | MASK
     *      }}
     *    ()
     *    }
     *  }
     */
    <span class="keyword">private</span> <span class="keyword">def</span> <a title="(methOrClass: LazyVals.this.global.Symbol, tree: LazyVals.this.global.Tree, offset: Int, lazyVal: LazyVals.this.global.Symbol)(LazyVals.this.global.Tree, LazyVals.this.global.Tree)" id="991809">mkLazyDef</a><span class="delimiter">(</span><a title="LazyVals.this.global.Symbol" id="992174">methOrClass</a>: <a href="../../../reflect/internal/Symbols.scala.html#407146" title="LazyVals.this.global.Symbol">Symbol</a>, <a title="LazyVals.this.global.Tree" id="992175">tree</a>: <a href="../../../reflect/internal/Trees.scala.html#407938" title="LazyVals.this.global.Tree">Tree</a>, <a title="Int" id="992176">offset</a>: <a href="../../../Int.scala.html#321" title="Int">Int</a>, <a title="LazyVals.this.global.Symbol" id="992177">lazyVal</a>: <a href="../../../reflect/internal/Symbols.scala.html#407146" title="LazyVals.this.global.Symbol">Symbol</a><span class="delimiter">)</span>: <a href="../../../Tuple2.scala.html#783" title="(LazyVals.this.global.Tree, LazyVals.this.global.Tree)" class="delimiter">(</a>Tree, Tree<span class="delimiter">)</span> = <span class="delimiter">{</span>
      <span class="keyword">val</span> <a title="LazyVals.this.global.Symbol" id="993079">bitmapSym</a>           = <a href="#991813" title="(meth: LazyVals.this.global.Symbol, offset: Int)LazyVals.this.global.Symbol">getBitmapFor</a><span class="delimiter">(</span><a href="#992174" title="LazyVals.this.global.Symbol">methOrClass</a>, <a href="#992176" title="Int">offset</a><span class="delimiter">)</span>
      <span class="keyword">val</span> <a title="LazyVals.this.global.Literal" id="993080">mask</a>                = <a href="../ast/TreeDSL.scala.html#662273" title="(x: Any)LazyVals.this.global.Literal">LIT</a><span class="delimiter">(</span><span title="Int(1)" class="int">1</span> <a href="../../../Int.scala.html#57088" title="(x: Int)Int">&lt;&lt;</a> <span class="delimiter">(</span><a href="#992176" title="Int">offset</a> <a href="../../../Int.scala.html#57182" title="(x: Int)Int">%</a> <a href="#622387" title="=&gt; Int">FLAGS_PER_BYTE</a><span class="delimiter">)</span><span class="delimiter">)</span>
      <span class="keyword">val</span> <a title="LazyVals extends LazyVals.this.global.RefTree with Serializable" id="993081">bitmapRef</a> = <span title="LazyVals extends LazyVals.this.global.RefTree with Serializable" class="keyword">if</span> <span class="delimiter">(</span><a href="#992174" title="LazyVals.this.global.Symbol">methOrClass</a>.<a href="../../../reflect/api/Symbols.scala.html#402403" title="=&gt; Boolean">isClass</a><span class="delimiter">)</span> <a href="../../../reflect/internal/Trees.scala.html#408125" title="(qualifier: LazyVals.this.global.Tree, sym: LazyVals.this.global.Symbol)LazyVals.this.global.Select">Select</a><span class="delimiter">(</span><a href="../../../reflect/internal/Trees.scala.html#408123" title="(sym: LazyVals.this.global.Symbol)LazyVals.this.global.Tree">This</a><span class="delimiter">(</span><a href="#992174" title="LazyVals.this.global.Symbol">methOrClass</a><span class="delimiter">)</span>, <a href="#993079" title="LazyVals.this.global.Symbol">bitmapSym</a><span class="delimiter">)</span> <span class="keyword">else</span> <a href="../../../reflect/internal/Trees.scala.html#408127" title="(sym: LazyVals.this.global.Symbol)LazyVals.this.global.Ident">Ident</a><span class="delimiter">(</span><a href="#993079" title="LazyVals.this.global.Symbol">bitmapSym</a><span class="delimiter">)</span>

      <span class="keyword">def</span> <a title="(stmt: LazyVals.this.global.Tree)LazyVals.this.global.Block" id="993082">mkBlock</a><span class="delimiter">(</span><a title="LazyVals.this.global.Tree" id="993275">stmt</a>: <a href="../../../reflect/internal/Trees.scala.html#407938" title="LazyVals.this.global.Tree">Tree</a><span class="delimiter">)</span> = <a href="../ast/TreeDSL.scala.html#624607" title="(xs: LazyVals.this.global.Tree*)LazyVals.this.global.Block">BLOCK</a><span class="delimiter">(</span><a href="#993275" title="LazyVals.this.global.Tree">stmt</a>, <a href="#991810" title="(bmp: LazyVals.this.global.Symbol, mask: LazyVals.this.global.Tree, bmpRef: LazyVals.this.global.Tree)LazyVals.this.global.Tree">mkSetFlag</a><span class="delimiter">(</span><a href="#993079" title="LazyVals.this.global.Symbol">bitmapSym</a>, <a href="#993080" title="LazyVals.this.global.Literal">mask</a>, <a href="#993081" title="LazyVals extends LazyVals.this.global.RefTree with Serializable">bitmapRef</a><span class="delimiter">)</span>, <a href="../ast/TreeDSL.scala.html#624561" title="=&gt; LazyVals.this.global.Literal">UNIT</a><span class="delimiter">)</span>

      <span class="keyword">val</span> <a href="#3359847" title="(x: (LazyVals.this.global.Block, LazyVals.this.global.Tree))(LazyVals.this.global.Block, LazyVals.this.global.Tree)" class="delimiter">(</a><a href="../../../Tuple2.scala.html#60635" title="LazyVals.this.global.Block" id="993084">block</a>, <a href="../../../Tuple2.scala.html#60637" title="LazyVals.this.global.Tree" id="993085">res</a><span class="delimiter">)</span> = <a href="#992175" title="LazyVals.this.global.Tree">tree</a> <a href="../../../Tuple2.scala.html#783" title="(LazyVals.this.global.Block, LazyVals.this.global.Tree) @unchecked" class="keyword">match</a> <span class="delimiter">{</span>
        <span class="keyword">case</span> Block<a href="#3359820" title="(LazyVals.this.global.Block, LazyVals.this.global.Tree)" id="3359823" class="delimiter">(</a><a href="../../../collection/generic/SeqFactory.scala.html#59986" title="Option[List[LazyVals.this.global.Tree]]" id="3359832">List</a><a href="../../../reflect/internal/Trees.scala.html#410192" title="List[LazyVals.this.global.Tree]" id="3359821" class="delimiter">(</a><a title="LazyVals.this.global.Tree" id="993291">assignment</a><span class="delimiter">)</span>, <a href="../../../reflect/internal/Trees.scala.html#410194" title="LazyVals.this.global.Tree" id="993292">res</a><span class="delimiter">)</span> <span class="keyword">if</span> <a href="../../../Boolean.scala.html#57822" title="=&gt; Boolean">!</a><a href="#622391" title="(sym: LazyVals.this.global.Symbol)Boolean">lazyUnit</a><span class="delimiter">(</span><a href="#992177" title="LazyVals.this.global.Symbol">lazyVal</a><span class="delimiter">)</span> =&gt;
          <a href="#3359828" title="(x: (LazyVals.this.global.Block, LazyVals.this.global.Tree))(LazyVals.this.global.Block, LazyVals.this.global.Tree)" class="delimiter">(</a><a href="#993082" title="(stmt: LazyVals.this.global.Tree)LazyVals.this.global.Block">mkBlock</a><span class="delimiter">(</span><a href="#993291" title="LazyVals.this.global.Tree">assignment</a><span class="delimiter">)</span>,  <a href="#993292" title="LazyVals.this.global.Tree">res</a><span class="delimiter">)</span>
        <span class="keyword">case</span> rhs                          =&gt;
          <a href="#3359828" title="(x: (LazyVals.this.global.Block, LazyVals.this.global.Tree))(LazyVals.this.global.Block, LazyVals.this.global.Tree)" class="delimiter">(</a><a href="#993082" title="(stmt: LazyVals.this.global.Tree)LazyVals.this.global.Block">mkBlock</a><span class="delimiter">(</span>rhs<span class="delimiter">)</span>,         <a href="../ast/TreeDSL.scala.html#624561" title="=&gt; LazyVals.this.global.Literal">UNIT</a><span class="delimiter">)</span>
      <span class="delimiter">}</span>

      <span class="keyword">val</span> <a title="LazyVals.this.global.Apply" id="993086">cond</a> = <span class="delimiter">(</span><a href="../ast/TreeDSL.scala.html#624616" title="implicit scala.tools.nsc.ast.TreeDSL.CODE.mkTreeMethods : (target: LazyVals.this.global.Tree)LazyVals.this.CODE.TreeMethods">bitmapRef</a> <a href="../ast/TreeDSL.scala.html#624616" title="implicit scala.tools.nsc.ast.TreeDSL.CODE.mkTreeMethods : (target: LazyVals.this.global.Tree)LazyVals.this.CODE.TreeMethods">GEN_&amp;</a> <span class="delimiter">(</span><a href="#993080" title="LazyVals.this.global.Literal">mask</a>, <a href="#622389" title="=&gt; LazyVals.this.global.ClassSymbol">bitmapKind</a><span class="delimiter">)</span><span class="delimiter">)</span> <a href="../ast/TreeDSL.scala.html#662332" title="(other: LazyVals.this.global.Tree, kind: LazyVals.this.global.ClassSymbol)LazyVals.this.global.Apply">GEN_==</a> <span class="delimiter">(</span><a href="../ast/TreeDSL.scala.html#624558" title="=&gt; LazyVals.this.global.Literal">ZERO</a>, <a href="#622389" title="=&gt; LazyVals.this.global.ClassSymbol">bitmapKind</a><span class="delimiter">)</span>
      <span class="keyword">val</span> <a title="(LazyVals.this.global.Tree, LazyVals.this.global.Tree)" id="993087">lazyDefs</a> = <a href="#991808" title="(clazz: LazyVals.this.global.Symbol, lzyVal: LazyVals.this.global.Symbol, cond: LazyVals.this.global.Tree, syncBody: List[LazyVals.this.global.Tree], stats: List[LazyVals.this.global.Tree], retVal: LazyVals.this.global.Tree)(LazyVals.this.global.Tree, LazyVals.this.global.Tree)">mkFastPathBody</a><span class="delimiter">(</span><a href="#992174" title="LazyVals.this.global.Symbol">methOrClass</a>.<a href="../../../reflect/internal/Symbols.scala.html#411422" title="=&gt; LazyVals.this.global.Symbol">enclClass</a>, <a href="#992177" title="LazyVals.this.global.Symbol">lazyVal</a>, <a href="#993086" title="LazyVals.this.global.Apply">cond</a>, <a href="../../../collection/immutable/List.scala.html#62451" title="(xs: LazyVals.this.global.Block*)List[LazyVals.this.global.Block]">List</a><span class="delimiter">(</span><a href="#993084" title="LazyVals.this.global.Block">block</a><span class="delimiter">)</span>, <a href="../../../collection/immutable/List.scala.html#11188" title="scala.collection.immutable.Nil.type">Nil</a>, <a href="#993085" title="LazyVals.this.global.Tree">res</a><span class="delimiter">)</span>
      <a href="../../../Tuple2.scala.html#62849" title="(_1: LazyVals.this.global.analyzer.global.Tree, _2: LazyVals.this.global.analyzer.global.Tree)(LazyVals.this.global.analyzer.global.Tree, LazyVals.this.global.analyzer.global.Tree)" class="delimiter">(</a><a href="../../../reflect/internal/Positions.scala.html#408315" title="(pos: LazyVals.this.global.Position)(tree: LazyVals.this.global.analyzer.global.Tree)LazyVals.this.global.analyzer.global.Tree">atPos</a><span class="delimiter">(</span><a href="#992175" title="LazyVals.this.global.Tree">tree</a>.<a href="../../../reflect/internal/Trees.scala.html#408571" title="=&gt; LazyVals.this.global.Position">pos</a><span class="delimiter">)</span><span class="delimiter">(</span><a href="TypingTransformers.scala.html#984456" title="=&gt; LazyVals.this.global.analyzer.Typer">localTyper</a>.<a href="../typechecker/Typers.scala.html#538701" title="(tree: LazyVals.this.global.analyzer.global.Tree)LazyVals.this.global.analyzer.global.Tree">typed</a> <span class="delimiter">{</span><a href="#993087" title="(LazyVals.this.global.Tree, LazyVals.this.global.Tree)">lazyDefs</a>.<a href="../../../Tuple2.scala.html#60635" title="=&gt; LazyVals.this.global.Tree">_1</a> <span class="delimiter">}</span><span class="delimiter">)</span>, <a href="../../../reflect/internal/Positions.scala.html#408315" title="(pos: LazyVals.this.global.Position)(tree: LazyVals.this.global.analyzer.global.Tree)LazyVals.this.global.analyzer.global.Tree">atPos</a><span class="delimiter">(</span><a href="#992175" title="LazyVals.this.global.Tree">tree</a>.<a href="../../../reflect/internal/Trees.scala.html#408571" title="=&gt; LazyVals.this.global.Position">pos</a><span class="delimiter">)</span><span class="delimiter">(</span><a href="TypingTransformers.scala.html#984456" title="=&gt; LazyVals.this.global.analyzer.Typer">localTyper</a>.<a href="../typechecker/Typers.scala.html#538701" title="(tree: LazyVals.this.global.analyzer.global.Tree)LazyVals.this.global.analyzer.global.Tree">typed</a> <span class="delimiter">{</span><a href="#993087" title="(LazyVals.this.global.Tree, LazyVals.this.global.Tree)">lazyDefs</a>.<a href="../../../Tuple2.scala.html#60637" title="=&gt; LazyVals.this.global.Tree">_2</a> <span class="delimiter">}</span><span class="delimiter">)</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>

    <span class="keyword">private</span> <span class="keyword">def</span> <a title="(bmp: LazyVals.this.global.Symbol, mask: LazyVals.this.global.Tree, bmpRef: LazyVals.this.global.Tree)LazyVals.this.global.Tree" id="991810">mkSetFlag</a><span class="delimiter">(</span><a title="LazyVals.this.global.Symbol" id="993276">bmp</a>: <a href="../../../reflect/internal/Symbols.scala.html#407146" title="LazyVals.this.global.Symbol">Symbol</a>, <a title="LazyVals.this.global.Tree" id="993277">mask</a>: <a href="../../../reflect/internal/Trees.scala.html#407938" title="LazyVals.this.global.Tree">Tree</a>, <a title="LazyVals.this.global.Tree" id="993278">bmpRef</a>: <a href="../../../reflect/internal/Trees.scala.html#407938" title="LazyVals.this.global.Tree">Tree</a><span class="delimiter">)</span>: <a href="../../../reflect/internal/Trees.scala.html#407938" title="LazyVals.this.global.Tree">Tree</a> =
      <a href="../ast/TreeDSL.scala.html#624616" title="implicit scala.tools.nsc.ast.TreeDSL.CODE.mkTreeMethods : (target: LazyVals.this.global.Tree)LazyVals.this.CODE.TreeMethods">bmpRef</a> <a href="../ast/TreeDSL.scala.html#662341" title="(rhs: LazyVals.this.global.Tree)LazyVals.this.global.Assign">===</a> <span class="delimiter">(</span><a href="../ast/TreeDSL.scala.html#624616" title="implicit scala.tools.nsc.ast.TreeDSL.CODE.mkTreeMethods : (target: LazyVals.this.global.Tree)LazyVals.this.CODE.TreeMethods">bmpRef</a> <a href="../ast/TreeDSL.scala.html#662330" title="(other: LazyVals.this.global.Tree, kind: LazyVals.this.global.ClassSymbol)LazyVals.this.global.Apply">GEN_|</a> <span class="delimiter">(</span><a href="#993277" title="LazyVals.this.global.Tree">mask</a>, <a href="#622389" title="=&gt; LazyVals.this.global.ClassSymbol">bitmapKind</a><span class="delimiter">)</span><span class="delimiter">)</span>

    <span class="keyword">val</span> <a title="scala.collection.mutable.Map[LazyVals.this.global.Symbol,List[LazyVals.this.global.Symbol]]" id="991811">bitmaps</a> = mutable.<a href="../../../collection/generic/GenMapFactory.scala.html#60744" title="[A, B](elems: (A, B)*)scala.collection.mutable.Map[A,B]">Map</a><span title="(elems: (LazyVals.this.global.Symbol, List[LazyVals.this.global.Symbol])*)scala.collection.mutable.Map[LazyVals.this.global.Symbol,List[LazyVals.this.global.Symbol]]" class="delimiter">[</span><a href="../../../reflect/internal/Symbols.scala.html#407146" title="LazyVals.this.global.Symbol">Symbol</a>, <a href="../../../collection/immutable/List.scala.html#11952" title="List[LazyVals.this.global.Symbol]">List</a><span class="delimiter">[</span>Symbol<span class="delimiter">]</span><span class="delimiter">]</span><span class="delimiter">(</span><span class="delimiter">)</span> <a href="../../../collection/mutable/Map.scala.html#87604" title="(d: List[LazyVals.this.global.Symbol])scala.collection.mutable.Map[LazyVals.this.global.Symbol,List[LazyVals.this.global.Symbol]]">withDefaultValue</a> <a href="../../../collection/immutable/List.scala.html#11188" title="scala.collection.immutable.Nil.type">Nil</a>

    /** Return the symbol corresponding of the right bitmap int inside meth,
     *  given offset.
     */
    <span class="keyword">private</span> <span class="keyword">def</span> <a title="(meth: LazyVals.this.global.Symbol, offset: Int)LazyVals.this.global.Symbol" id="991813">getBitmapFor</a><span class="delimiter">(</span><a title="LazyVals.this.global.Symbol" id="993088">meth</a>: <a href="../../../reflect/internal/Symbols.scala.html#407146" title="LazyVals.this.global.Symbol">Symbol</a>, <a title="Int" id="993089">offset</a>: <a href="../../../Int.scala.html#321" title="Int">Int</a><span class="delimiter">)</span>: <a href="../../../reflect/internal/Symbols.scala.html#407146" title="LazyVals.this.global.Symbol">Symbol</a> = <span class="delimiter">{</span>
      <span class="keyword">val</span> <a title="Int" id="993395">n</a> = <a href="#993089" title="Int">offset</a> <a href="../../../Int.scala.html#57175" title="(x: Int)Int">/</a> <a href="#622387" title="=&gt; Int">FLAGS_PER_BYTE</a>
      <span class="keyword">val</span> <a title="List[LazyVals.this.global.Symbol]" id="993396">bmps</a> = <a href="../../../collection/MapLike.scala.html#87535" title="(key: LazyVals.this.global.Symbol)List[LazyVals.this.global.Symbol]">bitmaps</a><span class="delimiter">(</span><a href="#993088" title="LazyVals.this.global.Symbol">meth</a><span class="delimiter">)</span>
      <span title="LazyVals.this.global.Symbol" class="keyword">if</span> <span class="delimiter">(</span><a href="#993396" title="List[LazyVals.this.global.Symbol]">bmps</a>.<a href="../../../collection/LinearSeqOptimized.scala.html#86373" title="=&gt; Int">length</a> <a href="../../../Int.scala.html#57125" title="(x: Int)Boolean">&gt;</a> <a href="#993395" title="Int">n</a><span class="delimiter">)</span>
        <a href="../../../collection/LinearSeqOptimized.scala.html#86374" title="(n: Int)LazyVals.this.global.Symbol">bmps</a><span class="delimiter">(</span><a href="#993395" title="Int">n</a><span class="delimiter">)</span>
      <span class="keyword">else</span> <span class="delimiter">{</span>
        <span class="keyword">val</span> <a title="LazyVals.this.global.TermSymbol" id="993427">sym</a> = <a href="#993088" title="LazyVals.this.global.Symbol">meth</a>.<a href="../../../reflect/internal/Symbols.scala.html#411110" title="(name: LazyVals.this.global.TermName, pos: LazyVals.this.global.Position, newFlags: Long)LazyVals.this.global.TermSymbol">newVariable</a><span class="delimiter">(</span><a href="../../../reflect/internal/StdNames.scala.html#407871" title="LazyVals.this.global.nme.type">nme</a>.<a href="../../../reflect/internal/StdNames.scala.html#414739" title="(bitmapPrefix: LazyVals.this.global.Name, n: Int)LazyVals.this.global.Name with bitmapPrefix.ThisNameType">newBitmapName</a><span class="delimiter">(</span><a href="../../../reflect/internal/StdNames.scala.html#407871" title="LazyVals.this.global.nme.type">nme</a>.<a href="../../../reflect/internal/StdNames.scala.html#414740" title="=&gt; LazyVals.this.global.nme.NameType">BITMAP_NORMAL</a>, <a href="#993395" title="Int">n</a><span class="delimiter">)</span>, <a href="#993088" title="LazyVals.this.global.Symbol">meth</a>.<a href="../../../reflect/internal/StdAttachments.scala.html#409602" title="=&gt; LazyVals.this.global.Position">pos</a><span class="delimiter">)</span>.<a href="../../../reflect/internal/Symbols.scala.html#411369" title="(info: LazyVals.this.global.Type)LazyVals.this.global.TermSymbol">setInfo</a><span class="delimiter">(</span><a href="../../../reflect/internal/Definitions.scala.html#409355" title="=&gt; LazyVals.this.global.ClassSymbol">ByteClass</a>.<a href="../../../reflect/internal/Symbols.scala.html#411559" title="=&gt; LazyVals.this.global.Type">tpe</a><span class="delimiter">)</span>
        <a href="../Global.scala.html#537732" title="(op: =&gt; LazyVals.this.global.TermSymbol)LazyVals.this.global.TermSymbol">beforeTyper</a> <span class="delimiter">{</span>
          <a href="#993427" title="LazyVals.this.global.TermSymbol">sym</a> <a href="../../../reflect/internal/Symbols.scala.html#411406" title="(sym: LazyVals.this.global.Symbol, args: LazyVals.this.global.Tree*)sym.type">addAnnotation</a> <a href="../../../reflect/internal/Definitions.scala.html#409209" title="=&gt; LazyVals.this.global.ClassSymbol">VolatileAttr</a>
        <span class="delimiter">}</span>

        <a href="../../../collection/mutable/MapLike.scala.html#87611" title="(key: LazyVals.this.global.Symbol, value: List[LazyVals.this.global.Symbol])Unit">bitmaps</a><span class="delimiter">(</span><a href="#993088" title="LazyVals.this.global.Symbol">meth</a><span class="delimiter">)</span> = <span class="delimiter">(</span><a href="#993427" title="LazyVals.this.global.TermSymbol">sym</a> <a href="../../../collection/immutable/List.scala.html#62685" title="(x: LazyVals.this.global.Symbol)List[LazyVals.this.global.Symbol]">::</a> <a href="#993396" title="List[LazyVals.this.global.Symbol]">bmps</a><span class="delimiter">)</span>.<a href="../../../collection/immutable/List.scala.html#62716" title="=&gt; List[LazyVals.this.global.Symbol]">reverse</a>
        <a href="#993427" title="LazyVals.this.global.TermSymbol">sym</a>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>
<span class="delimiter">}</span>

        </pre>
    </body>
</html>