<?xml version="1.0" encoding="utf-8"?>
      <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <meta http-equiv="Expires" content="0" />
        <title>scala/tools/scalap/scalax/rules/SeqRule.scala</title>
        <script type="text/javascript" src="../../../../../jquery-all.js"></script>
        <script type="text/javascript" src="../../../../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../../../../style.css" title="Style"></link>
    </head>
    <body>
        <pre>
// -----------------------------------------------------------------------------
//
//  Scalax - The Scala Community Library
//  Copyright (c) 2005-8 The Scalax Project. All rights reserved.
//
//  The primary distribution site is http://scalax.scalaforge.org/
//
//  This software is released under the terms of the Revised BSD License.
//  There is NO WARRANTY.  See the file LICENSE for the full text.
//
// -----------------------------------------------------------------------------

<span class="keyword">package</span> scala.tools.scalap
<span class="keyword">package</span> scalax
<span class="keyword">package</span> rules

/**
 * A workaround for the difficulties of dealing with
 * a contravariant 'In' parameter type...
 */
<span class="keyword">class</span> <a title="class InRule[In, +Out, +A, +X] extends Object" id="51503">InRule</a><span class="delimiter">[</span><a title="" id="51504">In</a>, +<a title="" id="51505">Out</a>, +<a title="" id="51506">A</a>, +<a title="" id="51507">X</a><span class="delimiter">]</span><a href="#51503" title="scala.tools.scalap.scalax.rules.InRule[In,Out,A,X]" class="delimiter">(</a><a title="scala.tools.scalap.scalax.rules.Rule[In,Out,A,X]" id="1200928">rule</a> : <a href="Rule.scala.html#51483" title="scala.tools.scalap.scalax.rules.Rule[In,Out,A,X]">Rule</a><span class="delimiter">[</span>In, Out, A, X<span class="delimiter">]</span><span class="delimiter">)</span> <span class="delimiter">{</span>

  <span class="keyword">def</span> <a title="[Out2, B, Y](f: scala.tools.scalap.scalax.rules.Result[Out,A,X] =&gt; (In =&gt; scala.tools.scalap.scalax.rules.Result[Out2,B,Y]))scala.tools.scalap.scalax.rules.Rule[In,Out2,B,Y]" id="1193525">mapRule</a><span class="delimiter">[</span><a title="" id="1193529">Out2</a>, <a title="" id="1193530">B</a>, <a title="" id="1193531">Y</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="scala.tools.scalap.scalax.rules.Result[Out,A,X] =&gt; (In =&gt; scala.tools.scalap.scalax.rules.Result[Out2,B,Y])" id="1201153">f</a> : Result<span class="delimiter">[</span>Out, A, X<span class="delimiter">]</span> =&gt; In =&gt; Result<span class="delimiter">[</span>Out2, B, Y<span class="delimiter">]</span><span class="delimiter">)</span> : <a href="Rule.scala.html#51483" title="scala.tools.scalap.scalax.rules.Rule[In,Out2,B,Y]">Rule</a><span class="delimiter">[</span>In, Out2, B, Y<span class="delimiter">]</span> = <a href="#1200928" title="scala.tools.scalap.scalax.rules.Rule[In,Out,A,X]">rule</a>.<a href="Rule.scala.html#1192578" title="=&gt; scala.tools.scalap.scalax.rules.Rules">factory</a>.<a href="Rules.scala.html#1192156" title="(f: In =&gt; scala.tools.scalap.scalax.rules.Result[Out2,B,Y])scala.tools.scalap.scalax.rules.Rule[In,Out2,B,Y]">rule</a> <span class="delimiter">{</span>
    in : <a href="#51504" title="In">In</a> =&gt; <a href="../../../../Function1.scala.html#58642" title="(v1: scala.tools.scalap.scalax.rules.Result[Out,A,X])In =&gt; scala.tools.scalap.scalax.rules.Result[Out2,B,Y]">f</a><a href="../../../../Function1.scala.html#58642" title="(v1: In)scala.tools.scalap.scalax.rules.Result[Out2,B,Y]" class="delimiter">(</a><a href="../../../../Function1.scala.html#58642" title="(v1: In)scala.tools.scalap.scalax.rules.Result[Out,A,X]">rule</a><span class="delimiter">(</span><a href="#1201713" title="In">in</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">(</span><a href="#1201713" title="In">in</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  /** Creates a rule that succeeds only if the original rule would fail on the given context. */
  <span class="keyword">def</span> <a title="=&gt; scala.tools.scalap.scalax.rules.Rule[In,In,Unit,Nothing]" id="1193532">unary_!</a> : <a href="Rule.scala.html#51483" title="scala.tools.scalap.scalax.rules.Rule[In,In,Unit,Nothing]">Rule</a><span class="delimiter">[</span>In, In, Unit, Nothing<span class="delimiter">]</span> = <a href="#1193525" title="(f: scala.tools.scalap.scalax.rules.Result[Out,A,X] =&gt; (In =&gt; scala.tools.scalap.scalax.rules.Result[In,Unit,Nothing]))scala.tools.scalap.scalax.rules.Rule[In,In,Unit,Nothing]">mapRule</a> <a href="#1201723" title="scala.tools.scalap.scalax.rules.Result[Out,A,X]" class="delimiter">{</a>
    <span class="keyword">case</span> Success<a href="#3379925" title="In =&gt; scala.tools.scalap.scalax.rules.Result[In,Unit,Nothing]" id="3379928" class="delimiter">(</a><a href="Result.scala.html#1192894" title="Out" id="3379926">_</a>, <a href="Result.scala.html#1192896" title="A" id="3379927">_</a><span class="delimiter">)</span> =&gt; in : <a href="#51504" title="In">In</a> =&gt; <a href="Result.scala.html#51471" title="scala.tools.scalap.scalax.rules.Failure.type">Failure</a>
    <span class="keyword">case</span> _ =&gt; in : <a href="#51504" title="In">In</a> =&gt; <a href="Result.scala.html#1192861" title="(out: In, value: Unit)scala.tools.scalap.scalax.rules.Success[In,Unit]">Success</a><span class="delimiter">(</span><a href="#1201729" title="In">in</a>, <span title="Unit" class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  /** Creates a rule that succeeds if the original rule succeeds, but returns the original input. */
  <span class="keyword">def</span> <a title="=&gt; scala.tools.scalap.scalax.rules.Rule[In,In,A,X]" id="1193533">&amp;</a> : <a href="Rule.scala.html#51483" title="scala.tools.scalap.scalax.rules.Rule[In,In,A,X]">Rule</a><span class="delimiter">[</span>In, In, A, X<span class="delimiter">]</span> = <a href="#1193525" title="(f: scala.tools.scalap.scalax.rules.Result[Out,A,X] =&gt; (In =&gt; scala.tools.scalap.scalax.rules.Result[In,A,X]))scala.tools.scalap.scalax.rules.Rule[In,In,A,X]">mapRule</a> <a href="#1201742" title="scala.tools.scalap.scalax.rules.Result[Out,A,X]" class="delimiter">{</a>
    <span class="keyword">case</span> Success<a href="#3379935" title="In =&gt; scala.tools.scalap.scalax.rules.Result[In,A,X]" id="3379937" class="delimiter">(</a><a href="Result.scala.html#1192894" title="Out" id="3379936">_</a>, <a href="Result.scala.html#1192896" title="A" id="1201745">a</a><span class="delimiter">)</span> =&gt; in : <a href="#51504" title="In">In</a> =&gt; <a href="Result.scala.html#1192861" title="(out: In, value: A)scala.tools.scalap.scalax.rules.Success[In,A]">Success</a><span class="delimiter">(</span><a href="#1201747" title="In">in</a>, <a href="#1201745" title="A">a</a><span class="delimiter">)</span>
    <span class="keyword">case</span> <a href="Result.scala.html#51471" title="In =&gt; scala.tools.scalap.scalax.rules.Result[In,A,X]" id="3379940">Failure</a> =&gt; in : <a href="#51504" title="In">In</a> =&gt; <a href="Result.scala.html#51471" title="scala.tools.scalap.scalax.rules.Failure.type">Failure</a>
    <span class="keyword">case</span> Error<a href="#3379935" title="In =&gt; scala.tools.scalap.scalax.rules.Result[In,A,X]" id="3379939" class="delimiter">(</a><a href="Result.scala.html#1193224" title="X" id="1201757">x</a><span class="delimiter">)</span> =&gt; in : <a href="#51504" title="In">In</a> =&gt; <a href="Result.scala.html#1193220" title="(error: X)scala.tools.scalap.scalax.rules.Error[X]">Error</a><span class="delimiter">(</span><a href="#1201757" title="X">x</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>
<span class="delimiter">}</span>

<span title="Object" class="keyword">class</span> <a title="class SeqRule[S, +A, +X] extends Object" id="51508">SeqRule</a><span class="delimiter">[</span><a title="" id="51509">S</a>, +<a title="" id="51510">A</a>, +<a title="" id="51511">X</a><span class="delimiter">]</span><a href="#51508" title="scala.tools.scalap.scalax.rules.SeqRule[S,A,X]" class="delimiter">(</a><a title="scala.tools.scalap.scalax.rules.Rule[S,S,A,X]" id="1200934">rule</a> : <a href="Rule.scala.html#51483" title="scala.tools.scalap.scalax.rules.Rule[S,S,A,X]">Rule</a><span class="delimiter">[</span>S, S, A, X<span class="delimiter">]</span><span class="delimiter">)</span> <span class="delimiter">{</span>
  <span class="keyword">import</span> <a href="#1200934" title="scala.tools.scalap.scalax.rules.Rule[S,S,A,X]">rule</a>.<a href="Rule.scala.html#1192578" title="=&gt; scala.tools.scalap.scalax.rules.Rules">factory</a>._

  <span class="keyword">def</span> <a title="=&gt; scala.tools.scalap.scalax.rules.Rule[S,S,Option[A],X]" id="1193484">?</a> = <a href="Rules.scala.html#1192165" title="(rule: scala.tools.scalap.scalax.rules.Rule[S,S,A,X])scala.tools.scalap.scalax.rules.InRule[S,S,A,X]">rule</a> <a href="#1193525" title="(f: scala.tools.scalap.scalax.rules.Result[S,A,X] =&gt; (S =&gt; scala.tools.scalap.scalax.rules.Result[S,Option[A],X]))scala.tools.scalap.scalax.rules.Rule[S,S,Option[A],X]">mapRule</a> <a href="#1201185" title="scala.tools.scalap.scalax.rules.Result[S,A,X]" class="delimiter">{</a>
    <span class="keyword">case</span> Success<a href="#3379951" title="S =&gt; Product with Serializable with scala.tools.scalap.scalax.rules.Result[S,Option[A],X]{def orElse[Out2 &gt;: S, B &gt;: Option[A]](other: =&gt; scala.tools.scalap.scalax.rules.Result[Out2,B,Nothing]): scala.tools.scalap.scalax.rules.Result[Out2,B,Nothing]}" id="3379952" class="delimiter">(</a><a href="Result.scala.html#1192894" title="S" id="1201188">out</a>, <a href="Result.scala.html#1192896" title="A" id="1201189">a</a><span class="delimiter">)</span> =&gt; in : <a href="#51509" title="S">S</a> =&gt; <a href="Result.scala.html#1192861" title="(out: S, value: Some[A])scala.tools.scalap.scalax.rules.Success[S,Some[A]]">Success</a><span class="delimiter">(</span><a href="#1201188" title="S">out</a>, <a href="../../../../Option.scala.html#63128" title="(x: A)Some[A]">Some</a><span class="delimiter">(</span><a href="#1201189" title="A">a</a><span class="delimiter">)</span><span class="delimiter">)</span>
    <span class="keyword">case</span> <a href="Result.scala.html#51471" title="S =&gt; Product with Serializable with scala.tools.scalap.scalax.rules.Result[S,Option[A],X]{def orElse[Out2 &gt;: S, B &gt;: Option[A]](other: =&gt; scala.tools.scalap.scalax.rules.Result[Out2,B,Nothing]): scala.tools.scalap.scalax.rules.Result[Out2,B,Nothing]}" id="3379955">Failure</a> =&gt; in : <a href="#51509" title="S">S</a> =&gt; <a href="Result.scala.html#1192861" title="(out: S, value: None.type)scala.tools.scalap.scalax.rules.Success[S,None.type]">Success</a><span class="delimiter">(</span><a href="#1201202" title="S">in</a>, <a href="../../../../Option.scala.html#1585" title="None.type">None</a><span class="delimiter">)</span>
    <span class="keyword">case</span> Error<a href="#3379951" title="S =&gt; Product with Serializable with scala.tools.scalap.scalax.rules.Result[S,Option[A],X]{def orElse[Out2 &gt;: S, B &gt;: Option[A]](other: =&gt; scala.tools.scalap.scalax.rules.Result[Out2,B,Nothing]): scala.tools.scalap.scalax.rules.Result[Out2,B,Nothing]}" id="3379954" class="delimiter">(</a><a href="Result.scala.html#1193224" title="X" id="1201210">x</a><span class="delimiter">)</span> =&gt; in : <a href="#51509" title="S">S</a> =&gt; <a href="Result.scala.html#1193220" title="(error: X)scala.tools.scalap.scalax.rules.Error[X]">Error</a><span class="delimiter">(</span><a href="#1201210" title="X">x</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  /** Creates a rule that always succeeds with a Boolean value.
   *  Value is 'true' if this rule succeeds, 'false' otherwise */
  <span class="keyword">def</span> <a title="=&gt; scala.tools.scalap.scalax.rules.Rule[S,S,Boolean,X]" id="1193485">-?</a> = <a href="#1193484" title="=&gt; scala.tools.scalap.scalax.rules.Rule[S,S,Option[A],X]">?</a> <a href="Rule.scala.html#1192588" title="(fa2b: Option[A] =&gt; Boolean)scala.tools.scalap.scalax.rules.Rule[S,S,Boolean,X]">map</a> <span class="delimiter">{</span> <a href="#1201770" title="Option[A]">_</a> <a href="../../../../Option.scala.html#62857" title="=&gt; Boolean">isDefined</a> <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="=&gt; scala.tools.scalap.scalax.rules.Rule[S,S,List[A],X]" id="1193486">*</a> = <a href="Rules.scala.html#1192181" title="[In]=&gt; Object{def apply[Out, A, X](f: In =&gt; scala.tools.scalap.scalax.rules.Result[Out,A,X]): scala.tools.scalap.scalax.rules.Rule[In,Out,A,X]}">from</a><a href="Rules.scala.html#1201794" title="(f: S =&gt; scala.tools.scalap.scalax.rules.Result[S,List[A],X])scala.tools.scalap.scalax.rules.Rule[S,S,List[A],X]" class="delimiter">[</a><a href="#51509" title="S">S</a><span class="delimiter">]</span> <span class="delimiter">{</span>
    // tail-recursive function with reverse list accumulator
    <span class="keyword">def</span> <a title="(in: S, acc: List[A])scala.tools.scalap.scalax.rules.Result[S,List[A],X]" id="1201804">rep</a><span class="delimiter">(</span><a title="S" id="1201805">in</a> : <a href="#51509" title="S">S</a>, <a title="List[A]" id="1201806">acc</a> : <a href="../../../../collection/immutable/List.scala.html#11952" title="List[A]">List</a><span class="delimiter">[</span>A<span class="delimiter">]</span><span class="delimiter">)</span> : <a href="Result.scala.html#51460" title="scala.tools.scalap.scalax.rules.Result[S,List[A],X]">Result</a><span class="delimiter">[</span>S, List<span class="delimiter">[</span>A<span class="delimiter">]</span>, X<span class="delimiter">]</span> = <a href="../../../../Function1.scala.html#58642" title="(v1: S)scala.tools.scalap.scalax.rules.Result[S,A,X]">rule</a><a href="#3380122" title="rules extends scala.tools.scalap.scalax.rules.Result[S,A,X] with scala.tools.scalap.scalax.rules.Error[_]" class="delimiter">(</a><a href="#1201805" title="S">in</a><span class="delimiter">)</span> <span class="keyword">match</span> <span class="delimiter">{</span>
       <span class="keyword">case</span> Success<a href="#3380116" title="scala.tools.scalap.scalax.rules.Result[S,List[A],X]" id="3380117" class="delimiter">(</a><a href="Result.scala.html#1192894" title="S" id="1201810">out</a>, <a href="Result.scala.html#1192896" title="A" id="1201811">a</a><span class="delimiter">)</span> =&gt; <a href="#1201804" title="(in: S, acc: List[A])scala.tools.scalap.scalax.rules.Result[S,List[A],X]">rep</a><a href="#3380124" title="(x: scala.tools.scalap.scalax.rules.Result[S,List[A],X])scala.tools.scalap.scalax.rules.Result[S,List[A],X]" class="delimiter">(</a><a href="#1201810" title="S">out</a>, <a href="#1201811" title="A">a</a> <a href="../../../../collection/immutable/List.scala.html#62685" title="(x: A)List[A]">::</a> <a href="#1201806" title="List[A]">acc</a><span class="delimiter">)</span>
       <span class="keyword">case</span> <a href="Result.scala.html#51471" title="scala.tools.scalap.scalax.rules.Result[S,List[A],X]" id="3380121">Failure</a> =&gt; <a href="Result.scala.html#1192861" title="(out: S, value: List[A])scala.tools.scalap.scalax.rules.Success[S,List[A]]">Success</a><a href="#3380124" title="(x: scala.tools.scalap.scalax.rules.Result[S,List[A],X])scala.tools.scalap.scalax.rules.Result[S,List[A],X]" class="delimiter">(</a><a href="#1201805" title="S">in</a>, <a href="#1201806" title="List[A]">acc</a>.<a href="../../../../collection/immutable/List.scala.html#62716" title="=&gt; List[A]">reverse</a><span class="delimiter">)</span>
       <span class="keyword">case</span> <a href="#3380116" title="scala.tools.scalap.scalax.rules.Result[S,List[A],X]" id="3380122">err</a> : Error<span class="delimiter">[</span>_<span class="delimiter">]</span> =&gt; <a href="#3380124" title="(x: scala.tools.scalap.scalax.rules.Result[S,List[A],X])scala.tools.scalap.scalax.rules.Result[S,List[A],X]">err</a>
    <span class="delimiter">}</span>
    <a title="S" id="1201827">in</a> =&gt; <a href="#1201804" title="(in: S, acc: List[A])scala.tools.scalap.scalax.rules.Result[S,List[A],X]">rep</a><span class="delimiter">(</span><a href="#1201827" title="S">in</a>, <a href="../../../../collection/immutable/List.scala.html#11188" title="scala.collection.immutable.Nil.type">Nil</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="=&gt; scala.tools.scalap.scalax.rules.Rule[S,S,List[A],X]" id="1193487">+</a> = <a href="#1200934" title="scala.tools.scalap.scalax.rules.Rule[S,S,A,X]">rule</a> <a href="Rule.scala.html#1192680" title="(next: =&gt; scala.tools.scalap.scalax.rules.Rule[S,S,Seq[A],X])scala.tools.scalap.scalax.rules.Rule[S,S,List[A],X]">~++</a> <a href="#1193486" title="=&gt; scala.tools.scalap.scalax.rules.Rule[S,S,List[A],X]">*</a>

  <span class="keyword">def</span> <a title="[B &gt;: A, X2 &gt;: X](f: =&gt; scala.tools.scalap.scalax.rules.Rule[S,S,B =&gt; B,X2])scala.tools.scalap.scalax.rules.Rule[S,S,B,X2]" id="1193488">~&gt;?</a><span class="delimiter">[</span><a title=" &gt;: A" id="1193491">B</a> &gt;: A, <a title=" &gt;: X" id="1193492">X2</a> &gt;: X<span class="delimiter">]</span><span class="delimiter">(</span><a title="=&gt; scala.tools.scalap.scalax.rules.Rule[S,S,B =&gt; B,X2]" id="1201839">f</a> : =&gt; Rule<span class="delimiter">[</span>S, S, B =&gt; B, X2<span class="delimiter">]</span><span class="delimiter">)</span> = <span class="keyword">for</span> <span class="delimiter">(</span><a title="A" id="1201850">a</a> &lt;- <a href="Rule.scala.html#1192581" title="(fa2ruleb: A =&gt; (S =&gt; scala.tools.scalap.scalax.rules.Result[S,B,X2]))scala.tools.scalap.scalax.rules.Rule[S,S,B,X2]">rule</a>; <a title="Option[B =&gt; B]" id="1201874">fs</a> &lt;- <a href="Rules.scala.html#1192174" title="(rule: scala.tools.scalap.scalax.rules.Rule[S,S,B =&gt; B,X2])scala.tools.scalap.scalax.rules.SeqRule[S,B =&gt; B,X2]">f</a><a href="Rule.scala.html#1192588" title="(fa2b: Option[B =&gt; B] =&gt; B)scala.tools.scalap.scalax.rules.Rule[S,S,B,X2]">?</a><span class="delimiter">)</span> <span class="keyword">yield</span> <a href="../../../../Option.scala.html#97396" title="(xo: Option[B =&gt; B])Iterable[B =&gt; B]">fs</a>.<a href="../../../../collection/TraversableOnce.scala.html#58202" title="[B](z: B)(op: (B, B =&gt; B) =&gt; B)B">foldLeft</a><span title="(z: B)(op: (B, B =&gt; B) =&gt; B)B" class="delimiter">[</span><a href="#1193491" title="B">B</a><span class="delimiter">]</span><span class="delimiter">(</span><a href="#1201850" title="A">a</a><span class="delimiter">)</span> <span class="delimiter">{</span> <span class="delimiter">(</span><a title="B" id="1201940">b</a>, <a title="B =&gt; B" id="1201941">f</a><span class="delimiter">)</span> =&gt; <a href="../../../../Function1.scala.html#58642" title="(v1: B)B">f</a><span class="delimiter">(</span><a href="#1201940" title="B">b</a><span class="delimiter">)</span> <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="[B &gt;: A, X2 &gt;: X](f: =&gt; scala.tools.scalap.scalax.rules.Rule[S,S,B =&gt; B,X2])scala.tools.scalap.scalax.rules.Rule[S,S,B,X2]" id="1193493">~&gt;*</a><span class="delimiter">[</span><a title=" &gt;: A" id="1193496">B</a> &gt;: A, <a title=" &gt;: X" id="1193497">X2</a> &gt;: X<span class="delimiter">]</span><span class="delimiter">(</span><a title="=&gt; scala.tools.scalap.scalax.rules.Rule[S,S,B =&gt; B,X2]" id="1201946">f</a> : =&gt; Rule<span class="delimiter">[</span>S, S, B =&gt; B, X2<span class="delimiter">]</span><span class="delimiter">)</span> = <span class="keyword">for</span> <span class="delimiter">(</span><a title="A" id="1201952">a</a> &lt;- <a href="Rule.scala.html#1192581" title="(fa2ruleb: A =&gt; (S =&gt; scala.tools.scalap.scalax.rules.Result[S,B,X2]))scala.tools.scalap.scalax.rules.Rule[S,S,B,X2]">rule</a>; <a title="List[B =&gt; B]" id="1201976">fs</a> &lt;- <a href="Rules.scala.html#1192174" title="(rule: scala.tools.scalap.scalax.rules.Rule[S,S,B =&gt; B,X2])scala.tools.scalap.scalax.rules.SeqRule[S,B =&gt; B,X2]">f</a><a href="Rule.scala.html#1192588" title="(fa2b: List[B =&gt; B] =&gt; B)scala.tools.scalap.scalax.rules.Rule[S,S,B,X2]">*</a><span class="delimiter">)</span> <span class="keyword">yield</span> <a href="#1201976" title="List[B =&gt; B]">fs</a>.<a href="../../../../collection/LinearSeqOptimized.scala.html#86382" title="[B](z: B)(f: (B, B =&gt; B) =&gt; B)B">foldLeft</a><span title="(z: B)(f: (B, B =&gt; B) =&gt; B)B" class="delimiter">[</span><a href="#1193496" title="B">B</a><span class="delimiter">]</span><span class="delimiter">(</span><a href="#1201952" title="A">a</a><span class="delimiter">)</span> <span class="delimiter">{</span> <span class="delimiter">(</span><a title="B" id="1201987">b</a>, <a title="B =&gt; B" id="1201988">f</a><span class="delimiter">)</span> =&gt; <a href="../../../../Function1.scala.html#58642" title="(v1: B)B">f</a><span class="delimiter">(</span><a href="#1201987" title="B">b</a><span class="delimiter">)</span> <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="[B &gt;: A, X2 &gt;: X](join: =&gt; scala.tools.scalap.scalax.rules.Rule[S,S,(B, B) =&gt; B,X2])scala.tools.scalap.scalax.rules.Rule[S,S,B,X2]" id="1193498">~*~</a><span class="delimiter">[</span><a title=" &gt;: A" id="1193501">B</a> &gt;: A, <a title=" &gt;: X" id="1193502">X2</a> &gt;: X<span class="delimiter">]</span><span class="delimiter">(</span><a title="=&gt; scala.tools.scalap.scalax.rules.Rule[S,S,(B, B) =&gt; B,X2]" id="1201993">join</a> : =&gt; Rule<span class="delimiter">[</span>S, S, <span class="delimiter">(</span>B, B<span class="delimiter">)</span> =&gt; B, X2<span class="delimiter">]</span><span class="delimiter">)</span> = <span class="delimiter">{</span>
    <a href="#51508" title="SeqRule.this.type" class="keyword">this</a> <a href="#1193493" title="(f: =&gt; scala.tools.scalap.scalax.rules.Rule[S,S,B =&gt; B,X2])scala.tools.scalap.scalax.rules.Rule[S,S,B,X2]">~&gt;*</a> <span class="delimiter">(</span><span class="keyword">for</span> <span class="delimiter">(</span><a title="(B, B) =&gt; B" id="1202007">f</a> &lt;- <a href="Rule.scala.html#1192581" title="(fa2ruleb: ((B, B) =&gt; B) =&gt; (S =&gt; scala.tools.scalap.scalax.rules.Result[S,B =&gt; B,X2]))scala.tools.scalap.scalax.rules.Rule[S,S,B =&gt; B,X2]">join</a>; <a title="A" id="1202012">a</a> &lt;- <a href="Rule.scala.html#1192588" title="(fa2b: A =&gt; (B =&gt; B))scala.tools.scalap.scalax.rules.Rule[S,S,B =&gt; B,X]">rule</a><span class="delimiter">)</span> <span class="keyword">yield</span> <a href="../../../../Function2.scala.html#65848" title="(v1: B, v2: B)B">f</a><span class="delimiter">(</span><a href="#1202014" title="B">_</a> : <a href="#1193501" title="B">B</a>, <a href="#1202012" title="A">a</a><span class="delimiter">)</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  /** Repeats this rule one or more times with a separator (which is discarded) */
  <span class="keyword">def</span> <a title="[X2 &gt;: X](sep: =&gt; scala.tools.scalap.scalax.rules.Rule[S,S,Any,X2])scala.tools.scalap.scalax.rules.Rule[S,S,List[A],X2]" id="1193503">+/</a><span class="delimiter">[</span><a title=" &gt;: X" id="1193505">X2</a> &gt;: X<span class="delimiter">]</span><span class="delimiter">(</span><a title="=&gt; scala.tools.scalap.scalax.rules.Rule[S,S,Any,X2]" id="1202021">sep</a> : =&gt; Rule<span class="delimiter">[</span>S, S, Any, X2<span class="delimiter">]</span><span class="delimiter">)</span> = <a href="#1200934" title="scala.tools.scalap.scalax.rules.Rule[S,S,A,X]">rule</a> <a href="Rule.scala.html#1192680" title="(next: =&gt; scala.tools.scalap.scalax.rules.Rule[S,S,Seq[A],X2])scala.tools.scalap.scalax.rules.Rule[S,S,List[A],X2]">~++</a> <span class="delimiter">(</span><a href="#1202021" title="=&gt; scala.tools.scalap.scalax.rules.Rule[S,S,Any,X2]">sep</a> <a href="Rules.scala.html#1192174" title="(rule: scala.tools.scalap.scalax.rules.Rule[S,S,A,X2])scala.tools.scalap.scalax.rules.SeqRule[S,A,X2]">-~</a> <a href="#1200934" title="scala.tools.scalap.scalax.rules.Rule[S,S,A,X]">rule</a> <a href="#1193486" title="=&gt; scala.tools.scalap.scalax.rules.Rule[S,S,List[A],X2]">*</a><span class="delimiter">)</span>

  /** Repeats this rule zero or more times with a separator (which is discarded) */
  <span class="keyword">def</span> <a title="[X2 &gt;: X](sep: =&gt; scala.tools.scalap.scalax.rules.Rule[S,S,Any,X2])scala.tools.scalap.scalax.rules.Rule[S,S,List[A],X2]" id="1193506">*/</a><span class="delimiter">[</span><a title=" &gt;: X" id="1193508">X2</a> &gt;: X<span class="delimiter">]</span><span class="delimiter">(</span><a title="=&gt; scala.tools.scalap.scalax.rules.Rule[S,S,Any,X2]" id="1202057">sep</a> : =&gt; Rule<span class="delimiter">[</span>S, S, Any, X2<span class="delimiter">]</span><span class="delimiter">)</span> = <a href="#1193503" title="(sep: =&gt; scala.tools.scalap.scalax.rules.Rule[S,S,Any,X2])scala.tools.scalap.scalax.rules.Rule[S,S,List[A],X2]">+/</a><span class="delimiter">(</span><a href="#1202057" title="=&gt; scala.tools.scalap.scalax.rules.Rule[S,S,Any,X2]">sep</a><span class="delimiter">)</span> <a href="Rule.scala.html#1192611" title="(other: =&gt; scala.tools.scalap.scalax.rules.Rule[S,S,List[A],X2])scala.tools.scalap.scalax.rules.Rule[S,S,List[A],X2]">|</a> <a href="Rules.scala.html#1192184" title="[s]=&gt; scala.tools.scalap.scalax.rules.StateRules{type S = s}">state</a><span title="state extends Object with scala.tools.scalap.scalax.rules.StateRules" class="delimiter">[</span><a href="#51509" title="S">S</a><span class="delimiter">]</span>.<a href="Rules.scala.html#1192352" title="=&gt; scala.tools.scalap.scalax.rules.Rule[S,S,scala.collection.immutable.Nil.type,Nothing]">nil</a>

  <span class="keyword">def</span> <a title="[Out, X2 &gt;: X](end: =&gt; scala.tools.scalap.scalax.rules.Rule[S,Out,Any,X2])scala.tools.scalap.scalax.rules.Rule[S,Out,List[A],X2]" id="1193509">*~-</a><span class="delimiter">[</span><a title="" id="1193512">Out</a>, <a title=" &gt;: X" id="1193513">X2</a> &gt;: X<span class="delimiter">]</span><span class="delimiter">(</span><a title="=&gt; scala.tools.scalap.scalax.rules.Rule[S,Out,Any,X2]" id="1202078">end</a> : =&gt; Rule<span class="delimiter">[</span>S, Out, Any, X2<span class="delimiter">]</span><span class="delimiter">)</span> = <span class="delimiter">(</span><a href="#1200934" title="scala.tools.scalap.scalax.rules.Rule[S,S,A,X]">rule</a> <a href="Rules.scala.html#1192174" title="(rule: scala.tools.scalap.scalax.rules.Rule[S,S,A,X])scala.tools.scalap.scalax.rules.SeqRule[S,A,X]">-</a> <a href="#1202078" title="=&gt; scala.tools.scalap.scalax.rules.Rule[S,Out,Any,X2]">end</a> <a href="#1193486" title="=&gt; scala.tools.scalap.scalax.rules.Rule[S,S,List[A],X]">*</a><span class="delimiter">)</span> <a href="Rule.scala.html#1192666" title="(next: =&gt; scala.tools.scalap.scalax.rules.Rule[S,Out,Any,X2])scala.tools.scalap.scalax.rules.Rule[S,Out,List[A],X2]">~-</a> <a href="#1202078" title="=&gt; scala.tools.scalap.scalax.rules.Rule[S,Out,Any,X2]">end</a>
  <span class="keyword">def</span> <a title="[Out, X2 &gt;: X](end: =&gt; scala.tools.scalap.scalax.rules.Rule[S,Out,Any,X2])scala.tools.scalap.scalax.rules.Rule[S,Out,List[A],X2]" id="1193514">+~-</a><span class="delimiter">[</span><a title="" id="1193517">Out</a>, <a title=" &gt;: X" id="1193518">X2</a> &gt;: X<span class="delimiter">]</span><span class="delimiter">(</span><a title="=&gt; scala.tools.scalap.scalax.rules.Rule[S,Out,Any,X2]" id="1202114">end</a> : =&gt; Rule<span class="delimiter">[</span>S, Out, Any, X2<span class="delimiter">]</span><span class="delimiter">)</span> = <span class="delimiter">(</span><a href="#1200934" title="scala.tools.scalap.scalax.rules.Rule[S,S,A,X]">rule</a> <a href="Rules.scala.html#1192174" title="(rule: scala.tools.scalap.scalax.rules.Rule[S,S,A,X])scala.tools.scalap.scalax.rules.SeqRule[S,A,X]">-</a> <a href="#1202114" title="=&gt; scala.tools.scalap.scalax.rules.Rule[S,Out,Any,X2]">end</a> <a href="#1193487" title="=&gt; scala.tools.scalap.scalax.rules.Rule[S,S,List[A],X]">+</a><span class="delimiter">)</span> <a href="Rule.scala.html#1192666" title="(next: =&gt; scala.tools.scalap.scalax.rules.Rule[S,Out,Any,X2])scala.tools.scalap.scalax.rules.Rule[S,Out,List[A],X2]">~-</a> <a href="#1202114" title="=&gt; scala.tools.scalap.scalax.rules.Rule[S,Out,Any,X2]">end</a>

  /** Repeats this rule num times */
  <span class="keyword">def</span> <a title="(num: Int)scala.tools.scalap.scalax.rules.Rule[S,S,Seq[A],X]" id="1193519">times</a><span class="delimiter">(</span><a title="Int" id="1194373">num</a> : <a href="../../../../Int.scala.html#321" title="Int">Int</a><span class="delimiter">)</span> : <a href="Rule.scala.html#51483" title="scala.tools.scalap.scalax.rules.Rule[S,S,Seq[A],X]">Rule</a><span class="delimiter">[</span>S, S, Seq<span class="delimiter">[</span>A<span class="delimiter">]</span>, X<span class="delimiter">]</span> = <a href="Rules.scala.html#1192181" title="[In]=&gt; Object{def apply[Out, A, X](f: In =&gt; scala.tools.scalap.scalax.rules.Result[Out,A,X]): scala.tools.scalap.scalax.rules.Rule[In,Out,A,X]}">from</a><a href="Rules.scala.html#1202175" title="(f: S =&gt; scala.tools.scalap.scalax.rules.Result[S,Seq[A],X])scala.tools.scalap.scalax.rules.Rule[S,S,Seq[A],X]" class="delimiter">[</a><a href="#51509" title="S">S</a><span class="delimiter">]</span> <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="scala.collection.mutable.ArraySeq[A]" id="1202185">result</a> = <span title="scala.collection.mutable.ArraySeq[A]" class="keyword">new</span> scala.collection.mutable.<a href="../../../../collection/mutable/ArraySeq.scala.html#12462" title="scala.collection.mutable.ArraySeq[A]">ArraySeq</a><span class="delimiter">[</span>A<span class="delimiter">]</span><span class="delimiter">(</span><a href="#1194373" title="Int">num</a><span class="delimiter">)</span>
    // more compact using HoF but written this way so it's tail-recursive
    <span class="keyword">def</span> <a title="(i: Int, in: S)scala.tools.scalap.scalax.rules.Result[S,Seq[A],X]" id="1202186">rep</a><span class="delimiter">(</span><a title="Int" id="1202187">i</a> : <a href="../../../../Int.scala.html#321" title="Int">Int</a>, <a title="S" id="1202188">in</a> : <a href="#51509" title="S">S</a><span class="delimiter">)</span> : <a href="Result.scala.html#51460" title="scala.tools.scalap.scalax.rules.Result[S,Seq[A],X]">Result</a><span class="delimiter">[</span>S, Seq<span class="delimiter">[</span>A<span class="delimiter">]</span>, X<span class="delimiter">]</span> = <span class="delimiter">{</span>
      <span title="scala.tools.scalap.scalax.rules.Result[S,Seq[A],X]" class="keyword">if</span> <span class="delimiter">(</span><a href="#1202187" title="Int">i</a> <a href="../../../../Int.scala.html#57097" title="(x: Int)Boolean">==</a> <a href="#1194373" title="Int">num</a><span class="delimiter">)</span> <a href="Result.scala.html#1192861" title="(out: S, value: scala.collection.mutable.ArraySeq[A])scala.tools.scalap.scalax.rules.Success[S,scala.collection.mutable.ArraySeq[A]]">Success</a><span class="delimiter">(</span><a href="#1202188" title="S">in</a>, <a href="#1202185" title="scala.collection.mutable.ArraySeq[A]">result</a><span class="delimiter">)</span>
      <span class="keyword">else</span> <a href="../../../../Function1.scala.html#58642" title="(v1: S)scala.tools.scalap.scalax.rules.Result[S,A,X]">rule</a><a href="#3380139" title="rules extends scala.tools.scalap.scalax.rules.Result[S,A,X] with scala.tools.scalap.scalax.rules.Error[_]" class="delimiter">(</a><a href="#1202188" title="S">in</a><span class="delimiter">)</span> <span class="keyword">match</span> <span class="delimiter">{</span>
       <span class="keyword">case</span> Success<a href="#3380133" title="scala.tools.scalap.scalax.rules.Result[S,Seq[A],X]" id="3380134" class="delimiter">(</a><a href="Result.scala.html#1192894" title="S" id="1202206">out</a>, <a href="Result.scala.html#1192896" title="A" id="1202207">a</a><span class="delimiter">)</span> =&gt; <a href="#3380141" title="(x: scala.tools.scalap.scalax.rules.Result[S,Seq[A],X])scala.tools.scalap.scalax.rules.Result[S,Seq[A],X]" class="delimiter">{</a>
         <a href="../../../../collection/mutable/ArraySeq.scala.html#64919" title="(idx: Int, elem: A)Unit">result</a><span class="delimiter">(</span><a href="#1202187" title="Int">i</a><span class="delimiter">)</span> = <a href="#1202207" title="A">a</a>
         <a href="#1202186" title="(i: Int, in: S)scala.tools.scalap.scalax.rules.Result[S,Seq[A],X]">rep</a><span class="delimiter">(</span><a href="#1202187" title="Int">i</a> <a href="../../../../Int.scala.html#57154" title="(x: Int)Int">+</a> <span title="Int(1)" class="int">1</span>, <a href="#1202206" title="S">out</a><span class="delimiter">)</span>
       <span class="delimiter">}</span>
       <span class="keyword">case</span> <a href="Result.scala.html#51471" title="scala.tools.scalap.scalax.rules.Result[S,Seq[A],X]" id="3380138">Failure</a> =&gt; <a href="#3380141" title="(x: scala.tools.scalap.scalax.rules.Result[S,Seq[A],X])scala.tools.scalap.scalax.rules.Result[S,Seq[A],X]">Failure</a>
       <span class="keyword">case</span> <a href="#3380133" title="scala.tools.scalap.scalax.rules.Result[S,Seq[A],X]" id="3380139">err</a> : Error<span class="delimiter">[</span>_<span class="delimiter">]</span> =&gt; <a href="#3380141" title="(x: scala.tools.scalap.scalax.rules.Result[S,Seq[A],X])scala.tools.scalap.scalax.rules.Result[S,Seq[A],X]">err</a>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>
    <a title="S" id="1202221">in</a> =&gt; <a href="#1202186" title="(i: Int, in: S)scala.tools.scalap.scalax.rules.Result[S,Seq[A],X]">rep</a><span class="delimiter">(</span><span title="Int(0)" class="int">0</span>, <a href="#1202221" title="S">in</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>
<span class="delimiter">}</span>


        </pre>
    </body>
</html>