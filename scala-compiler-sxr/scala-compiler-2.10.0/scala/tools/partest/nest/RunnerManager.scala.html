<?xml version="1.0" encoding="utf-8"?>
      <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <meta http-equiv="Expires" content="0" />
        <title>scala/tools/partest/nest/RunnerManager.scala</title>
        <script type="text/javascript" src="../../../../jquery-all.js"></script>
        <script type="text/javascript" src="../../../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../../../style.css" title="Style"></link>
    </head>
    <body>
        <pre>
/* NEST (New Scala Test)
 * Copyright 2007-2013 LAMP/EPFL
 * @author Philipp Haller
 */

<span class="keyword">package</span> scala.tools.partest
<span class="keyword">package</span> nest

<span class="keyword">import</span> java.io._
<span class="keyword">import</span> java.net.URL
<span class="keyword">import</span> java.util.<span class="delimiter">{</span> Timer, TimerTask <span class="delimiter">}</span>

<span class="keyword">import</span> scala.tools.nsc.<a href="../../nsc/Properties.scala.html#27455" title="scala.tools.nsc.Properties.type">Properties</a>.<span class="delimiter">{</span> jdkHome, javaHome, propOrElse <span class="delimiter">}</span>
<span class="keyword">import</span> scala.util.<a href="../../../util/Properties.scala.html#7130" title="scala.util.Properties.type">Properties</a>.<span class="delimiter">{</span> envOrElse, isWin <span class="delimiter">}</span>
<span class="keyword">import</span> scala.tools.nsc.<span class="delimiter">{</span> Settings, CompilerCommand, Global <span class="delimiter">}</span>
<span class="keyword">import</span> scala.tools.nsc.io.<span class="delimiter">{</span> AbstractFile, PlainFile, Path, Directory, File =&gt; SFile <span class="delimiter">}</span>
<span class="keyword">import</span> scala.tools.nsc.reporters.ConsoleReporter
<span class="keyword">import</span> scala.tools.nsc.util.<span class="delimiter">{</span> ClassPath, FakePos, ScalaClassLoader, stackTraceString <span class="delimiter">}</span>
<span class="keyword">import</span> <a href="../../nsc/util/ClassPath.scala.html#50228" title="scala.tools.nsc.util.ClassPath.type">ClassPath</a>.<span class="delimiter">{</span> join, split <span class="delimiter">}</span>
<span class="keyword">import</span> scala.tools.scalap.scalax.rules.scalasig.ByteCode
<span class="keyword">import</span> scala.collection.<span class="delimiter">{</span> mutable, immutable <span class="delimiter">}</span>
<span class="keyword">import</span> scala.tools.nsc.interactive.<span class="delimiter">{</span> BuildManager, RefinedBuildManager <span class="delimiter">}</span>
<span class="keyword">import</span> scala.sys.process._
<span class="keyword">import</span> java.util.concurrent.<span class="delimiter">{</span> Executors, TimeUnit, TimeoutException <span class="delimiter">}</span>
<span class="keyword">import</span> <a href="../PartestDefaults.scala.html#50614" title="scala.tools.partest.PartestDefaults.type">PartestDefaults</a>.<span class="delimiter">{</span> javaCmd, javacCmd <span class="delimiter">}</span>

<span class="keyword">class</span> <a title="class LogContext extends Object" id="50870">LogContext</a><a href="#50870" title="scala.tools.partest.nest.LogContext" class="delimiter">(</a><span class="keyword">val</span> <a title="java.io.File" id="1168353">file</a>: <span title="java.io.File">File</span>, <span class="keyword">val</span> <a title="Option[(java.io.StringWriter, java.io.PrintWriter)]" id="1168354">writers</a>: <a href="../../../Option.scala.html#978" title="Option[(java.io.StringWriter, java.io.PrintWriter)]">Option</a><span class="delimiter">[</span><span class="delimiter">(</span>StringWriter, PrintWriter<span class="delimiter">)</span><span class="delimiter">]</span><span class="delimiter">)</span>

<span title="Object" class="keyword">object</span> <a title="scala.tools.partest.nest.LogContext.type" id="50871">LogContext</a> <a href="#50872" title="scala.tools.partest.nest.LogContext.type" class="delimiter">{</a>
  <span class="keyword">def</span> <a title="(file: java.io.File, swr: java.io.StringWriter, wr: java.io.PrintWriter)scala.tools.partest.nest.LogContext" id="1168356">apply</a><span class="delimiter">(</span><a title="java.io.File" id="1168359">file</a>: <span title="java.io.File">File</span>, <a title="java.io.StringWriter" id="1168360">swr</a>: <span title="java.io.StringWriter">StringWriter</span>, <a title="java.io.PrintWriter" id="1168361">wr</a>: <span title="java.io.PrintWriter">PrintWriter</span><span class="delimiter">)</span>: <a href="#50870" title="scala.tools.partest.nest.LogContext">LogContext</a> = <span class="delimiter">{</span>
    <a href="../../../Predef.scala.html#7488" title="(requirement: Boolean)Unit">require</a> <span class="delimiter">(</span><a href="#1168359" title="java.io.File">file</a> <span title="(x$1: AnyRef)Boolean">!=</span> <span title="Null(null)" class="keyword">null</span><span class="delimiter">)</span>
    <span title="scala.tools.partest.nest.LogContext" class="keyword">new</span> <a href="#50870" title="scala.tools.partest.nest.LogContext">LogContext</a><span class="delimiter">(</span><a href="#1168359" title="java.io.File">file</a>, <a href="../../../Option.scala.html#63128" title="(x: (java.io.StringWriter, java.io.PrintWriter))Some[(java.io.StringWriter, java.io.PrintWriter)]">Some</a><span class="delimiter">(</span><a href="../../../Tuple2.scala.html#62849" title="(_1: java.io.StringWriter, _2: java.io.PrintWriter)(java.io.StringWriter, java.io.PrintWriter)" class="delimiter">(</a><a href="#1168360" title="java.io.StringWriter">swr</a>, <a href="#1168361" title="java.io.PrintWriter">wr</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>
  <span class="keyword">def</span> <a title="(file: java.io.File)scala.tools.partest.nest.LogContext" id="1168357">apply</a><span class="delimiter">(</span><a title="java.io.File" id="1168377">file</a>: <span title="java.io.File">File</span><span class="delimiter">)</span>: <a href="#50870" title="scala.tools.partest.nest.LogContext">LogContext</a> = <span title="scala.tools.partest.nest.LogContext" class="keyword">new</span> <a href="#50870" title="scala.tools.partest.nest.LogContext">LogContext</a><span class="delimiter">(</span><a href="#1168377" title="java.io.File">file</a>, <a href="../../../Option.scala.html#1585" title="None.type">None</a><span class="delimiter">)</span>
<span class="delimiter">}</span>

<span title="Object" class="keyword">object</span> <a title="scala.tools.partest.nest.Output.type" id="50873">Output</a> <a href="#50874" title="scala.tools.partest.nest.Output.type" class="delimiter">{</a>
  <span class="keyword">object</span> <a title="scala.tools.partest.nest.Output.outRedirect.type" id="1168379">outRedirect</a> <a href="#1168380" title="scala.tools.partest.nest.Output.outRedirect.type" class="keyword">extends</a> <a href="#1168388" title="scala.tools.partest.nest.Output.Redirecter">Redirecter</a><span class="delimiter">(</span><a href="#1168384" title="=&gt; java.io.PrintStream">out</a><span class="delimiter">)</span>
  <span class="keyword">object</span> <a title="scala.tools.partest.nest.Output.errRedirect.type" id="1168381">errRedirect</a> <a href="#1168382" title="scala.tools.partest.nest.Output.errRedirect.type" class="keyword">extends</a> <a href="#1168388" title="scala.tools.partest.nest.Output.Redirecter">Redirecter</a><span class="delimiter">(</span><a href="#1168385" title="=&gt; java.io.PrintStream">err</a><span class="delimiter">)</span>

  <span title="System.type">System</span>.<span title="(x$1: java.io.PrintStream)Unit">setOut</span><span class="delimiter">(</span><a href="#1168379" title="scala.tools.partest.nest.Output.outRedirect.type">outRedirect</a><span class="delimiter">)</span>
  <span title="System.type">System</span>.<span title="(x$1: java.io.PrintStream)Unit">setErr</span><span class="delimiter">(</span><a href="#1168381" title="scala.tools.partest.nest.Output.errRedirect.type">errRedirect</a><span class="delimiter">)</span>

  <span class="keyword">import</span> scala.util.DynamicVariable
  <span class="keyword">private</span> <span class="keyword">def</span> <a title="=&gt; java.io.PrintStream" id="1168384">out</a> = java.lang.<span title="System.type">System</span>.<span title="java.io.PrintStream">out</span>
  <span class="keyword">private</span> <span class="keyword">def</span> <a title="=&gt; java.io.PrintStream" id="1168385">err</a> = java.lang.<span title="System.type">System</span>.<span title="java.io.PrintStream">err</span>
  <span class="keyword">private</span> <span class="keyword">val</span> <a title="scala.util.DynamicVariable[Option[java.io.PrintStream]]" id="1168386">redirVar</a> = <span title="scala.util.DynamicVariable[Option[java.io.PrintStream]]" class="keyword">new</span> <a href="../../../util/DynamicVariable.scala.html#7216" title="scala.util.DynamicVariable[Option[java.io.PrintStream]]">DynamicVariable</a><span class="delimiter">[</span>Option<span class="delimiter">[</span>PrintStream<span class="delimiter">]</span><span class="delimiter">]</span><span class="delimiter">(</span><a href="../../../Option.scala.html#1585" title="None.type">None</a><span class="delimiter">)</span>

  <span class="keyword">class</span> <a title="class Redirecter extends java.io.PrintStream" id="1168388">Redirecter</a><a href="#1168388" title="scala.tools.partest.nest.Output.Redirecter" class="delimiter">(</a><a title="java.io.PrintStream" id="1168399">stream</a>: <span title="java.io.PrintStream">PrintStream</span><span class="delimiter">)</span> <span class="keyword">extends</span> <span title="java.io.PrintStream">PrintStream</span><span class="delimiter">(</span><a href="#1168408" title="java.io.OutputStream{}" class="keyword">new</a> <a title="anonymous class $anon extends java.io.OutputStream" id="1168408">OutputStream</a> <span class="delimiter">{</span>
    <span class="keyword">def</span> <a title="(b: Int)Unit" id="1168410">write</a><span class="delimiter">(</span><a title="Int" id="1168417">b</a>: <a href="../../../Int.scala.html#321" title="Int">Int</a><span class="delimiter">)</span> = <a href="#1168411" title="(f: java.io.PrintStream =&gt; Unit)Unit">withStream</a><span class="delimiter">(</span><a href="#1168428" title="java.io.PrintStream">_</a> <span title="(x$1: Int)Unit">write</span> <a href="#1168417" title="Int">b</a><span class="delimiter">)</span>

    <span class="keyword">private</span> <span class="keyword">def</span> <a title="(f: java.io.PrintStream =&gt; Unit)Unit" id="1168411">withStream</a><span class="delimiter">(</span><a title="java.io.PrintStream =&gt; Unit" id="1168420">f</a>: PrintStream =&gt; Unit<span class="delimiter">)</span> = <a href="../../../Function1.scala.html#58642" title="(v1: java.io.PrintStream)Unit">f</a><span class="delimiter">(</span><a href="#1168386" title="=&gt; scala.util.DynamicVariable[Option[java.io.PrintStream]]">redirVar</a>.<a href="../../../util/DynamicVariable.scala.html#85090" title="=&gt; Option[java.io.PrintStream]">value</a> <a href="../../../Option.scala.html#62859" title="(default: =&gt; java.io.PrintStream)java.io.PrintStream">getOrElse</a> <a href="#1168399" title="java.io.PrintStream">stream</a><span class="delimiter">)</span>

    <span class="keyword">override</span> <span class="keyword">def</span> <a title="(b: Array[Byte])Unit" id="1168412">write</a><span class="delimiter">(</span><a title="Array[Byte]" id="1168434">b</a>: <a href="../../../Array.scala.html#174" title="Array[Byte]">Array</a><span class="delimiter">[</span>Byte<span class="delimiter">]</span><span class="delimiter">)</span> = <a href="#1168411" title="(f: java.io.PrintStream =&gt; Unit)Unit">withStream</a><span class="delimiter">(</span><a href="#1168438" title="java.io.PrintStream">_</a> <span title="(x$1: Array[Byte])Unit">write</span> <a href="#1168434" title="Array[Byte]">b</a><span class="delimiter">)</span>
    <span class="keyword">override</span> <span class="keyword">def</span> <a title="(b: Array[Byte], off: Int, len: Int)Unit" id="1168413">write</a><span class="delimiter">(</span><a title="Array[Byte]" id="1168444">b</a>: <a href="../../../Array.scala.html#174" title="Array[Byte]">Array</a><span class="delimiter">[</span>Byte<span class="delimiter">]</span>, <a title="Int" id="1168445">off</a>: <a href="../../../Int.scala.html#321" title="Int">Int</a>, <a title="Int" id="1168446">len</a>: <a href="../../../Int.scala.html#321" title="Int">Int</a><span class="delimiter">)</span> = <a href="#1168411" title="(f: java.io.PrintStream =&gt; Unit)Unit">withStream</a><span class="delimiter">(</span><a href="#1168450" title="java.io.PrintStream">_</a>.<span title="(x$1: Array[Byte], x$2: Int, x$3: Int)Unit">write</span><span class="delimiter">(</span><a href="#1168444" title="Array[Byte]">b</a>, <a href="#1168445" title="Int">off</a>, <a href="#1168446" title="Int">len</a><span class="delimiter">)</span><span class="delimiter">)</span>
    <span class="keyword">override</span> <span class="keyword">def</span> <a title="()Unit" id="1168414">flush</a> = <a href="#1168411" title="(f: java.io.PrintStream =&gt; Unit)Unit">withStream</a><span class="delimiter">(</span><a href="#1168457" title="java.io.PrintStream">_</a>.<span title="()Unit">flush</span><span class="delimiter">)</span>
    <span class="keyword">override</span> <span class="keyword">def</span> <a title="()Unit" id="1168415">close</a> = <a href="#1168411" title="(f: java.io.PrintStream =&gt; Unit)Unit">withStream</a><span class="delimiter">(</span><a href="#1168462" title="java.io.PrintStream">_</a>.<span title="()Unit">close</span><span class="delimiter">)</span>
  <span class="delimiter">}</span><span class="delimiter">)</span>

  // this supports thread-safe nested output redirects
  <span class="keyword">def</span> <a title="[T](newstream: java.io.PrintStream)(func: =&gt; T)T" id="1168389">withRedirected</a><span class="delimiter">[</span><a title="" id="1168391">T</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="java.io.PrintStream" id="1168475">newstream</a>: <span title="java.io.PrintStream">PrintStream</span><span class="delimiter">)</span><span class="delimiter">(</span><a title="=&gt; T" id="1168476">func</a>: =&gt; T<span class="delimiter">)</span>: <a href="#1168391" title="T">T</a> = <span class="delimiter">{</span>
    // note down old redirect destination
    // this may be None in which case outRedirect and errRedirect print to stdout and stderr
    <span class="keyword">val</span> <a title="Option[java.io.PrintStream]" id="1168478">saved</a> = <a href="#1168386" title="=&gt; scala.util.DynamicVariable[Option[java.io.PrintStream]]">redirVar</a>.<a href="../../../util/DynamicVariable.scala.html#85090" title="=&gt; Option[java.io.PrintStream]">value</a>
    // set new redirecter
    // this one will redirect both out and err to newstream
    <a href="#1168386" title="=&gt; scala.util.DynamicVariable[Option[java.io.PrintStream]]">redirVar</a>.<a href="../../../util/DynamicVariable.scala.html#85094" title="(newval: Option[java.io.PrintStream])Unit">value</a> = <a href="../../../Option.scala.html#63128" title="(x: java.io.PrintStream)Some[java.io.PrintStream]">Some</a><span class="delimiter">(</span><a href="#1168475" title="java.io.PrintStream">newstream</a><span class="delimiter">)</span>

    <span class="keyword">try</span> <a href="#1168476" title="=&gt; T">func</a>
    <span class="keyword">finally</span> <span class="delimiter">{</span>
      <a href="#1168475" title="java.io.PrintStream">newstream</a>.<span title="()Unit">flush</span><span class="delimiter">(</span><span class="delimiter">)</span>
      <a href="#1168386" title="=&gt; scala.util.DynamicVariable[Option[java.io.PrintStream]]">redirVar</a>.<a href="../../../util/DynamicVariable.scala.html#85094" title="(newval: Option[java.io.PrintStream])Unit">value</a> = <a href="#1168478" title="Option[java.io.PrintStream]">saved</a>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>
<span class="delimiter">}</span>

<span title="Object" class="keyword">class</span> <a title="class RunnerManager extends Object" id="50875">RunnerManager</a><a href="#50875" title="scala.tools.partest.nest.RunnerManager" class="delimiter">(</a><a title="String" id="1164380">kind</a>: <span title="String">String</span>, <span class="keyword">val</span> <a title="scala.tools.partest.nest.FileManager" id="1164381">fileManager</a>: <a href="FileManager.scala.html#50818" title="scala.tools.partest.nest.FileManager">FileManager</a>, <a title="scala.tools.partest.nest.TestRunParams" id="1164382">params</a>: <a href="DirectRunner.scala.html#50803" title="scala.tools.partest.nest.TestRunParams">TestRunParams</a><span class="delimiter">)</span> <span class="delimiter">{</span>
  <span class="keyword">import</span> <a href="#1164381" title="=&gt; scala.tools.partest.nest.FileManager">fileManager</a>._

  <span class="keyword">val</span> <a title="scala.tools.partest.nest.CompileManager" id="1164355">compileMgr</a> = <span title="scala.tools.partest.nest.CompileManager" class="keyword">new</span> <a href="CompileManager.scala.html#50750" title="scala.tools.partest.nest.CompileManager">CompileManager</a><span class="delimiter">(</span><a href="#1164381" title="=&gt; scala.tools.partest.nest.FileManager">fileManager</a><span class="delimiter">)</span>
  <a href="#1164381" title="=&gt; scala.tools.partest.nest.FileManager">fileManager</a>.<a href="FileManager.scala.html#1150595" title="(x$1: String)Unit">CLASSPATH</a> <span title="(x$1: Any)String">+=</span> <span title="java.io.File.type">File</span>.<span title="String">pathSeparator</span> <span title="(x$1: Any)String">+</span> <a href="PathSettings.scala.html#50838" title="scala.tools.partest.nest.PathSettings.type">PathSettings</a>.<a href="PathSettings.scala.html#1150806" title="=&gt; scala.tools.nsc.io.File">scalaCheck</a>

  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(f1: java.io.File, f2: java.io.File)String" id="1164357">compareFiles</a><span class="delimiter">(</span><a title="java.io.File" id="1168489">f1</a>: <span title="java.io.File">File</span>, <a title="java.io.File" id="1168490">f2</a>: <span title="java.io.File">File</span><span class="delimiter">)</span>: <span title="String">String</span> =
    <span class="keyword">try</span> <a href="#1164381" title="=&gt; scala.tools.partest.nest.FileManager">fileManager</a>.<a href="FileManager.scala.html#1142337" title="(f1: java.io.File, f2: java.io.File)String">compareFiles</a><span class="delimiter">(</span><a href="#1168489" title="java.io.File">f1</a>, <a href="#1168490" title="java.io.File">f2</a><span class="delimiter">)</span>
    <span class="keyword">catch</span> <span class="delimiter">{</span> <span class="keyword">case</span> <a title="String" id="1168491">t</a>: <span title="Exception">Exception</span> =&gt; <a href="#1168491" title="Exception">t</a>.<span title="()String">toString</span> <span class="delimiter">}</span>

  /** This does something about absolute paths and file separator
   *  chars before diffing.
   */
  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(dir: java.io.File, s: String)String" id="1164358">replaceSlashes</a><span class="delimiter">(</span><a title="java.io.File" id="1168492">dir</a>: <span title="java.io.File">File</span>, <a title="String" id="1168493">s</a>: <span title="String">String</span><span class="delimiter">)</span>: <span title="String">String</span> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="String" id="1168494">base</a> = <span class="delimiter">(</span><a href="#1168492" title="java.io.File">dir</a>.<span title="()String">getAbsolutePath</span> <span title="(x$1: Any)String">+</span> <span title="java.io.File.type">File</span>.<span title="String">separator</span><span class="delimiter">)</span>.<span title="(x$1: Char, x$2: Char)String">replace</span><span class="delimiter">(</span><span title="Char('\\')" class="char">'\\'</span>, <span title="Char('/')" class="char">'/'</span><span class="delimiter">)</span>
    <span class="keyword">var</span> <a title="String" id="1168495">regex</a> = <a href="../../../Predef.scala.html#7604" title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps" class="string">&quot;&quot;&quot;\Q%s\E&quot;&quot;&quot;</a> <a href="../../../collection/immutable/StringLike.scala.html#59882" title="(args: Any*)String">format</a> <a href="#1168494" title="String">base</a>
    <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="../../../util/Properties.scala.html#80196" title="=&gt; Boolean">isWin</a><span class="delimiter">)</span> <a href="#1168495" title="String">regex</a> = <span title="String(&quot;(?i)&quot;)" class="string">&quot;(?i)&quot;</span> <span title="(x$1: Any)String">+</span> <a href="#1168495" title="String">regex</a>
    <a href="#1168493" title="String">s</a>.<span title="(x$1: Char, x$2: Char)String">replace</span><span class="delimiter">(</span><span title="Char('\\')" class="char">'\\'</span>, <span title="Char('/')" class="char">'/'</span><span class="delimiter">)</span>.<span title="(x$1: String, x$2: String)String">replaceAll</span><span class="delimiter">(</span><a href="#1168495" title="String">regex</a>, <span title="String(&quot;&quot;)" class="string">&quot;&quot;</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(msg: String)Unit" id="1164359">workerError</a><span class="delimiter">(</span><a title="String" id="1168507">msg</a>: <span title="String">String</span><span class="delimiter">)</span>: <a href="../../../Unit.scala.html#1515" title="Unit">Unit</a> = <span title="System.type">System</span>.<span title="java.io.PrintStream">err</span>.<span title="(x$1: String)Unit">println</span><span class="delimiter">(</span><span title="String(&quot;Error: &quot;)" class="string">&quot;Error: &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#1168507" title="String">msg</a><span class="delimiter">)</span>

  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(file: java.io.File, printer: java.io.PrintWriter)Unit" id="1164360">printInfoStart</a><span class="delimiter">(</span><a title="java.io.File" id="1168512">file</a>: <span title="java.io.File">File</span>, <a title="java.io.PrintWriter" id="1168513">printer</a>: <span title="java.io.PrintWriter">PrintWriter</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    <a href="NestUI.scala.html#50828" title="scala.tools.partest.nest.NestUI.type">NestUI</a>.<a href="NestUI.scala.html#1147214" title="(msg: String, wr: java.io.PrintWriter)Unit">outline</a><span class="delimiter">(</span><span title="String(&quot;testing: &quot;)" class="string">&quot;testing: &quot;</span>, <a href="#1168513" title="java.io.PrintWriter">printer</a><span class="delimiter">)</span>
    <span class="keyword">val</span> <a title="java.io.File" id="1168514">filesdir</a> = <a href="#1168512" title="java.io.File">file</a>.<span title="()java.io.File">getAbsoluteFile</span>.<span title="()java.io.File">getParentFile</span>.<span title="()java.io.File">getParentFile</span>
    <span class="keyword">val</span> <a title="java.io.File" id="1168515">testdir</a> = <a href="#1168514" title="java.io.File">filesdir</a>.<span title="()java.io.File">getParentFile</span>
    <span class="keyword">val</span> <a title="Int" id="1168516">totalWidth</a> = <span title="Int(56)" class="int">56</span>
    <span class="keyword">val</span> <a title="String" id="1168517">name</a> = <span class="delimiter">{</span>
      // 1. try with [...]/files/run/test.scala
      <span class="keyword">val</span> <a title="String" id="1168520">name</a> = <a href="#1168512" title="java.io.File">file</a>.<a href="../../../Predef.scala.html#7604" title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps">getAbsolutePath</a> <a href="../../../collection/IndexedSeqOptimized.scala.html#59163" title="(n: Int)String">drop</a> <a href="#1168515" title="java.io.File">testdir</a>.<span title="()String">getAbsolutePath</span>.<span title="()Int">length</span>
      <span title="String" class="keyword">if</span> <span class="delimiter">(</span><a href="#1168520" title="String">name</a>.<span title="()Int">length</span> <a href="../../../Int.scala.html#57118" title="(x: Int)Boolean">&lt;=</a> <a href="#1168516" title="Int">totalWidth</a><span class="delimiter">)</span> <a href="#1168520" title="String">name</a>
      // 2. try with [...]/run/test.scala
      <span class="keyword">else</span> <a href="#1168512" title="java.io.File">file</a>.<a href="../../../Predef.scala.html#7604" title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps">getAbsolutePath</a> <a href="../../../collection/IndexedSeqOptimized.scala.html#59163" title="(n: Int)String">drop</a> <a href="#1168514" title="java.io.File">filesdir</a>.<span title="()String">getAbsolutePath</span>.<span title="()Int">length</span>
    <span class="delimiter">}</span>
    <a href="NestUI.scala.html#50828" title="scala.tools.partest.nest.NestUI.type">NestUI</a>.<a href="NestUI.scala.html#1147222" title="(msg: String, wr: java.io.PrintWriter)Unit">normal</a><span class="delimiter">(</span><a href="../../../Predef.scala.html#7604" title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps" class="string">&quot;[...]%s%s&quot;</a>.<a href="../../../collection/immutable/StringLike.scala.html#59882" title="(args: Any*)String">format</a><span class="delimiter">(</span><a href="#1168517" title="String">name</a>, <a href="../../../Predef.scala.html#7604" title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps" class="string">&quot; &quot;</a> <a href="../../../collection/immutable/StringLike.scala.html#59852" title="(n: Int)String">*</a> <span class="delimiter">(</span><a href="#1168516" title="Int">totalWidth</a> <a href="../../../Int.scala.html#57161" title="(x: Int)Int">-</a> <a href="#1168517" title="String">name</a>.<span title="()Int">length</span><span class="delimiter">)</span><span class="delimiter">)</span>, <a href="#1168513" title="java.io.PrintWriter">printer</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(success: Boolean, printer: java.io.PrintWriter)Unit" id="1164361">printInfoEnd</a><span class="delimiter">(</span><a title="Boolean" id="1168557">success</a>: <a href="../../../Boolean.scala.html#1425" title="Boolean">Boolean</a>, <a title="java.io.PrintWriter" id="1168558">printer</a>: <span title="java.io.PrintWriter">PrintWriter</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    <a href="NestUI.scala.html#50828" title="scala.tools.partest.nest.NestUI.type">NestUI</a>.<a href="NestUI.scala.html#1147222" title="(msg: String, wr: java.io.PrintWriter)Unit">normal</a><span class="delimiter">(</span><span title="String(&quot;[&quot;)" class="string">&quot;[&quot;</span>, <a href="#1168558" title="java.io.PrintWriter">printer</a><span class="delimiter">)</span>
    <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#1168557" title="Boolean">success</a><span class="delimiter">)</span> <a href="NestUI.scala.html#50828" title="scala.tools.partest.nest.NestUI.type">NestUI</a>.<a href="NestUI.scala.html#1147216" title="(msg: String, wr: java.io.PrintWriter)Unit">success</a><span class="delimiter">(</span><span title="String(&quot;  OK  &quot;)" class="string">&quot;  OK  &quot;</span>, <a href="#1168558" title="java.io.PrintWriter">printer</a><span class="delimiter">)</span>
    <span class="keyword">else</span> <a href="NestUI.scala.html#50828" title="scala.tools.partest.nest.NestUI.type">NestUI</a>.<a href="NestUI.scala.html#1147218" title="(msg: String, wr: java.io.PrintWriter)Unit">failure</a><span class="delimiter">(</span><span title="String(&quot;FAILED&quot;)" class="string">&quot;FAILED&quot;</span>, <a href="#1168558" title="java.io.PrintWriter">printer</a><span class="delimiter">)</span>
    <a href="NestUI.scala.html#50828" title="scala.tools.partest.nest.NestUI.type">NestUI</a>.<a href="NestUI.scala.html#1147222" title="(msg: String, wr: java.io.PrintWriter)Unit">normal</a><span class="delimiter">(</span><span title="String(&quot;]\n&quot;)" class="string">&quot;]\n&quot;</span>, <a href="#1168558" title="java.io.PrintWriter">printer</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(printer: java.io.PrintWriter)Unit" id="1164362">printInfoTimeout</a><span class="delimiter">(</span><a title="java.io.PrintWriter" id="1168567">printer</a>: <span title="java.io.PrintWriter">PrintWriter</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    <a href="NestUI.scala.html#50828" title="scala.tools.partest.nest.NestUI.type">NestUI</a>.<a href="NestUI.scala.html#1147222" title="(msg: String, wr: java.io.PrintWriter)Unit">normal</a><span class="delimiter">(</span><span title="String(&quot;[&quot;)" class="string">&quot;[&quot;</span>, <a href="#1168567" title="java.io.PrintWriter">printer</a><span class="delimiter">)</span>
    <a href="NestUI.scala.html#50828" title="scala.tools.partest.nest.NestUI.type">NestUI</a>.<a href="NestUI.scala.html#1147218" title="(msg: String, wr: java.io.PrintWriter)Unit">failure</a><span class="delimiter">(</span><span title="String(&quot;TIMOUT&quot;)" class="string">&quot;TIMOUT&quot;</span>, <a href="#1168567" title="java.io.PrintWriter">printer</a><span class="delimiter">)</span>
    <a href="NestUI.scala.html#50828" title="scala.tools.partest.nest.NestUI.type">NestUI</a>.<a href="NestUI.scala.html#1147222" title="(msg: String, wr: java.io.PrintWriter)Unit">normal</a><span class="delimiter">(</span><span title="String(&quot;]\n&quot;)" class="string">&quot;]\n&quot;</span>, <a href="#1168567" title="java.io.PrintWriter">printer</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(outDir: java.io.File, files: List[java.io.File], output: java.io.File)scala.tools.partest.nest.CompilationOutcome" id="1164363">javac</a><span class="delimiter">(</span><a title="java.io.File" id="1168574">outDir</a>: <span title="java.io.File">File</span>, <a title="List[java.io.File]" id="1168575">files</a>: <a href="../../../collection/immutable/List.scala.html#11952" title="List[java.io.File]">List</a><span class="delimiter">[</span>File<span class="delimiter">]</span>, <a title="java.io.File" id="1168576">output</a>: <span title="java.io.File">File</span><span class="delimiter">)</span>: <a href="CompileManager.scala.html#50739" title="scala.tools.partest.nest.CompilationOutcome">CompilationOutcome</a> = <span class="delimiter">{</span>
    // compile using command-line javac compiler
    <span class="keyword">val</span> <a title="Seq[String]" id="1168577">args</a> = <a href="../../../collection/generic/GenericCompanion.scala.html#59933" title="(elems: String*)Seq[String]">Seq</a><span class="delimiter">(</span>
      <a href="../PartestDefaults.scala.html#1143291" title="=&gt; String">javacCmd</a>,
      <span title="String(&quot;-d&quot;)" class="string">&quot;-d&quot;</span>,
      <a href="#1168574" title="java.io.File">outDir</a>.<span title="()String">getAbsolutePath</span>,
      <span title="String(&quot;-classpath&quot;)" class="string">&quot;-classpath&quot;</span>,
      <a href="../../nsc/util/ClassPath.scala.html#538286" title="(paths: String*)String">join</a><span class="delimiter">(</span><a href="#1168574" title="java.io.File">outDir</a>.<span title="()String">toString</span>, <a href="FileManager.scala.html#1150594" title="=&gt; String">CLASSPATH</a><span class="delimiter">)</span>
    <span class="delimiter">)</span> <a href="../../../collection/TraversableLike.scala.html#58048" title="(that: scala.collection.GenTraversableOnce[String])(implicit bf: scala.collection.generic.CanBuildFrom[Seq[String],String,Seq[String]])Seq[String]">++</a> <a href="#1168575" title="List[java.io.File]">files</a>.<a href="../../../collection/TraversableLike.scala.html#58063" title="(f: java.io.File =&gt; String)(implicit bf: scala.collection.generic.CanBuildFrom[List[java.io.File],String,List[String]])List[String]">map</a><a href="../../../collection/immutable/List.scala.html#62442" title="scala.collection.generic.CanBuildFrom[scala.collection.immutable.List.Coll,String,List[String]]" class="delimiter">(</a><span title="String(&quot;&quot;)" class="string">&quot;&quot;</span> <span title="(x$1: Any)String">+</span> <a href="#1168620" title="java.io.File">_</a><span class="delimiter">)</span>

    <a title="scala.tools.partest.nest.CompilationOutcome" id="1168679" class="keyword">try</a> <span title="scala.tools.partest.nest.CompilationOutcome" class="keyword">if</span> <span class="delimiter">(</span><a href="#1164364" title="(args: Seq[String], outFile: java.io.File)Boolean">runCommand</a><span class="delimiter">(</span><a href="#1168577" title="Seq[String]">args</a>, <a href="#1168576" title="java.io.File">output</a><span class="delimiter">)</span><span class="delimiter">)</span> <a href="CompileManager.scala.html#50740" title="scala.tools.partest.nest.CompileSuccess.type">CompileSuccess</a> <span class="keyword">else</span> <a href="CompileManager.scala.html#50742" title="scala.tools.partest.nest.CompileFailed.type">CompileFailed</a>
    <span class="keyword">catch</span> <a href="#1164372" title="(logFile: java.io.File, msg: String, value: scala.tools.partest.nest.CompilerCrashed.type)PartialFunction[Throwable,scala.tools.partest.nest.CompilerCrashed.type]">exHandler</a><a href="../../../PartialFunction.scala.html#58653" title="PartialFunction[Throwable,scala.tools.partest.nest.CompilerCrashed.type]" id="1168680" class="delimiter">(</a><a href="#1168576" title="java.io.File">output</a>, <span title="String(&quot;javac command failed:\n&quot;)" class="string">&quot;javac command failed:\n&quot;</span> <span title="(x$1: Any)String">+</span> <a href="#1168577" title="Seq[String]">args</a>.<a href="../../../collection/TraversableLike.scala.html#58063" title="(f: String =&gt; String)(implicit bf: scala.collection.generic.CanBuildFrom[Seq[String],String,Seq[String]])Seq[String]">map</a><a href="../../../collection/Seq.scala.html#81904" title="scala.collection.generic.CanBuildFrom[scala.collection.Seq.Coll,String,Seq[String]]" class="delimiter">(</a><span title="String(&quot;  &quot;)" class="string">&quot;  &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#1168707" title="String">_</a> <span title="(x$1: Any)String">+</span> <span title="String(&quot;\n&quot;)" class="string">&quot;\n&quot;</span><span class="delimiter">)</span>.<a href="../../../collection/TraversableOnce.scala.html#58284" title="=&gt; String">mkString</a> <span title="(x$1: Any)String">+</span> <span title="String(&quot;\n&quot;)" class="string">&quot;\n&quot;</span>, <a href="CompileManager.scala.html#50744" title="scala.tools.partest.nest.CompilerCrashed.type">CompilerCrashed</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  /** Runs command redirecting standard out and error out to output file.
   *  Overloaded to accept a sequence of arguments.
   */
  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(args: Seq[String], outFile: java.io.File)Boolean" id="1164364">runCommand</a><span class="delimiter">(</span><a title="Seq[String]" id="1168675">args</a>: <a href="../../../collection/Seq.scala.html#4340" title="Seq[String]">Seq</a><span class="delimiter">[</span>String<span class="delimiter">]</span>, <a title="java.io.File" id="1168676">outFile</a>: <span title="java.io.File">File</span><span class="delimiter">)</span>: <a href="../../../Boolean.scala.html#1425" title="Boolean">Boolean</a> = <span class="delimiter">{</span>
    <a href="NestUI.scala.html#50828" title="scala.tools.partest.nest.NestUI.type">NestUI</a>.<a href="NestUI.scala.html#1147230" title="(msg: String)Unit">verbose</a><span class="delimiter">(</span><span title="String(&quot;running command:\n&quot;)" class="string">&quot;running command:\n&quot;</span><span title="(x$1: Any)String">+</span><a href="#1168675" title="Seq[String]">args</a>.<a href="../../../collection/TraversableLike.scala.html#58063" title="(f: String =&gt; String)(implicit bf: scala.collection.generic.CanBuildFrom[Seq[String],String,Seq[String]])Seq[String]">map</a><a href="../../../collection/Seq.scala.html#81904" title="scala.collection.generic.CanBuildFrom[scala.collection.Seq.Coll,String,Seq[String]]" class="delimiter">(</a><span title="String(&quot;  &quot;)" class="string">&quot;  &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#1168752" title="String">_</a> <span title="(x$1: Any)String">+</span> <span title="String(&quot;\n&quot;)" class="string">&quot;\n&quot;</span><span class="delimiter">)</span>.<a href="../../../collection/TraversableOnce.scala.html#58284" title="=&gt; String">mkString</a><span class="delimiter">)</span>
    <a href="#1164366" title="(process: =&gt; scala.sys.process.ProcessBuilder, outFile: java.io.File)Boolean">runCommandImpl</a><span class="delimiter">(</span><a href="../../../sys/process/Process.scala.html#585547" title="(command: Seq[String])scala.sys.process.ProcessBuilder">Process</a><span class="delimiter">(</span><a href="#1168675" title="Seq[String]">args</a><span class="delimiter">)</span>, <a href="#1168676" title="java.io.File">outFile</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  /** Runs command redirecting standard out and error out to output file.
   *  Overloaded to accept a single string = concatenated command + arguments.
   */
  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(command: String, outFile: java.io.File)Boolean" id="1164365">runCommand</a><span class="delimiter">(</span><a title="String" id="1168673">command</a>: <span title="String">String</span>, <a title="java.io.File" id="1168674">outFile</a>: <span title="java.io.File">File</span><span class="delimiter">)</span>: <a href="../../../Boolean.scala.html#1425" title="Boolean">Boolean</a> = <span class="delimiter">{</span>
    <a href="NestUI.scala.html#50828" title="scala.tools.partest.nest.NestUI.type">NestUI</a>.<a href="NestUI.scala.html#1147230" title="(msg: String)Unit">verbose</a><span class="delimiter">(</span><span title="String(&quot;running command:&quot;)" class="string">&quot;running command:&quot;</span><span title="(x$1: Any)String">+</span><a href="#1168673" title="String">command</a><span class="delimiter">)</span>
    <a href="#1164366" title="(process: =&gt; scala.sys.process.ProcessBuilder, outFile: java.io.File)Boolean">runCommandImpl</a><span class="delimiter">(</span><a href="../../../sys/process/Process.scala.html#585546" title="(command: String)scala.sys.process.ProcessBuilder">Process</a><span class="delimiter">(</span><a href="#1168673" title="String">command</a><span class="delimiter">)</span>, <a href="#1168674" title="java.io.File">outFile</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(process: =&gt; scala.sys.process.ProcessBuilder, outFile: java.io.File)Boolean" id="1164366">runCommandImpl</a><span class="delimiter">(</span><a title="=&gt; scala.sys.process.ProcessBuilder" id="1168776">process</a>: =&gt; ProcessBuilder, <a title="java.io.File" id="1168777">outFile</a>: <span title="java.io.File">File</span><span class="delimiter">)</span>: <a href="../../../Boolean.scala.html#1425" title="Boolean">Boolean</a> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="Int" id="1168794">exitCode</a> = <span class="delimiter">(</span><a href="#1168776" title="=&gt; scala.sys.process.ProcessBuilder">process</a> <a href="../../../sys/process/ProcessBuilder.scala.html#585977" title="(f: scala.sys.process.processInternal.File)scala.sys.process.ProcessBuilder">#&gt;</a> <a href="#1168777" title="java.io.File">outFile</a> <a href="../../../sys/process/ProcessBuilder.scala.html#585991" title="=&gt; Int">!</a><span class="delimiter">)</span>
    // normalize line endings
    // System.getProperty(&quot;line.separator&quot;) should be &quot;\n&quot; here
    // so reading a file and writing it back should convert all CRLFs to LFs
    <a href="../../../reflect/io/File.scala.html#530996" title="(path: scala.reflect.io.Path)(implicit codec: scala.io.Codec)scala.reflect.io.File">SFile</a><a href="../../../io/Codec.scala.html#393359" title="=&gt; scala.io.Codec" class="delimiter">(</a><a href="../package.scala.html#55891" title="implicit scala.tools.partest.package.temporaryFile2Path : (x: java.io.File)scala.tools.nsc.io.Path">outFile</a><span class="delimiter">)</span>.<a href="../../../reflect/io/File.scala.html#530964" title="(strings: String*)Unit">printlnAll</a><span class="delimiter">(</span><a href="../../../reflect/io/File.scala.html#530996" title="(path: scala.reflect.io.Path)(implicit codec: scala.io.Codec)scala.reflect.io.File">SFile</a><a href="../../../io/Codec.scala.html#393359" title="=&gt; scala.io.Codec" class="delimiter">(</a><a href="../package.scala.html#55891" title="implicit scala.tools.partest.package.temporaryFile2Path : (x: java.io.File)scala.tools.nsc.io.Path">outFile</a><span class="delimiter">)</span>.<a href="../../../reflect/io/Streamable.scala.html#530979" title="()Iterator[String]">lines</a>.<a href="../../../collection/TraversableOnce.scala.html#58263" title="=&gt; List[String]">toList</a>: _*<span class="delimiter">)</span>
    <a href="#1168794" title="Int">exitCode</a> <a href="../../../Int.scala.html#57097" title="(x: Int)Boolean">==</a> <span title="Int(0)" class="int">0</span>
  <span class="delimiter">}</span>

  @inline <span class="keyword">private</span> <span class="keyword">def</span> <a title="(f: java.io.File)Boolean" id="1164367">isJava</a><span class="delimiter">(</span><a title="java.io.File" id="1168808">f</a>: <span title="java.io.File">File</span><span class="delimiter">)</span> = <a href="../../../reflect/io/File.scala.html#530996" title="(path: scala.reflect.io.Path)(implicit codec: scala.io.Codec)scala.reflect.io.File">SFile</a><a href="../../../io/Codec.scala.html#393359" title="=&gt; scala.io.Codec" class="delimiter">(</a><a href="../package.scala.html#55891" title="implicit scala.tools.partest.package.temporaryFile2Path : (x: java.io.File)scala.tools.nsc.io.Path">f</a><span class="delimiter">)</span> <a href="../../../reflect/io/Path.scala.html#530896" title="(ext: String, exts: String*)Boolean">hasExtension</a> <span title="String(&quot;java&quot;)" class="string">&quot;java&quot;</span>
  @inline <span class="keyword">private</span> <span class="keyword">def</span> <a title="(f: java.io.File)Boolean" id="1164368">isScala</a><span class="delimiter">(</span><a title="java.io.File" id="1168809">f</a>: <span title="java.io.File">File</span><span class="delimiter">)</span> = <a href="../../../reflect/io/File.scala.html#530996" title="(path: scala.reflect.io.Path)(implicit codec: scala.io.Codec)scala.reflect.io.File">SFile</a><a href="../../../io/Codec.scala.html#393359" title="=&gt; scala.io.Codec" class="delimiter">(</a><a href="../package.scala.html#55891" title="implicit scala.tools.partest.package.temporaryFile2Path : (x: java.io.File)scala.tools.nsc.io.Path">f</a><span class="delimiter">)</span> <a href="../../../reflect/io/Path.scala.html#530896" title="(ext: String, exts: String*)Boolean">hasExtension</a> <span title="String(&quot;scala&quot;)" class="string">&quot;scala&quot;</span>
  @inline <span class="keyword">private</span> <span class="keyword">def</span> <a title="(f: java.io.File)Boolean" id="1164369">isJavaOrScala</a><span class="delimiter">(</span><a title="java.io.File" id="1168810">f</a>: <span title="java.io.File">File</span><span class="delimiter">)</span> = <a href="#1164367" title="(f: java.io.File)Boolean">isJava</a><span class="delimiter">(</span><a href="#1168810" title="java.io.File">f</a><span class="delimiter">)</span> <a href="../../../Boolean.scala.html#57825" title="(x: Boolean)Boolean">||</a> <a href="#1164368" title="(f: java.io.File)Boolean">isScala</a><span class="delimiter">(</span><a href="#1168810" title="java.io.File">f</a><span class="delimiter">)</span>

  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(logFile: java.io.File)Unit" id="1164370">outputLogFile</a><span class="delimiter">(</span><a title="java.io.File" id="1168811">logFile</a>: <span title="java.io.File">File</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="Iterator[String]" id="1168812">lines</a> = <a href="../../../reflect/io/File.scala.html#530996" title="(path: scala.reflect.io.Path)(implicit codec: scala.io.Codec)scala.reflect.io.File">SFile</a><a href="../../../io/Codec.scala.html#393359" title="=&gt; scala.io.Codec" class="delimiter">(</a><a href="../package.scala.html#55891" title="implicit scala.tools.partest.package.temporaryFile2Path : (x: java.io.File)scala.tools.nsc.io.Path">logFile</a><span class="delimiter">)</span>.<a href="../../../reflect/io/Streamable.scala.html#530979" title="()Iterator[String]">lines</a>
    <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#1168812" title="Iterator[String]">lines</a>.<a href="../../../collection/TraversableOnce.scala.html#58191" title="=&gt; Boolean">nonEmpty</a><span class="delimiter">)</span> <span class="delimiter">{</span>
      <a href="NestUI.scala.html#50828" title="scala.tools.partest.nest.NestUI.type">NestUI</a>.<a href="NestUI.scala.html#1147221" title="(msg: String)Unit">normal</a><span class="delimiter">(</span><span title="String(&quot;Log file \'&quot;)" class="string">&quot;Log file '&quot;</span> <span title="(x$1: Any)String">+</span> <a href="#1168811" title="java.io.File">logFile</a> <span title="(x$1: Any)String">+</span> <span title="String(&quot;\': \n&quot;)" class="string">&quot;': \n&quot;</span><span class="delimiter">)</span>
      <a href="#1168812" title="Iterator[String]">lines</a> <a href="../../../collection/Iterator.scala.html#66797" title="(f: String =&gt; Unit)Unit">foreach</a> <span class="delimiter">(</span><a title="String" id="1168825">x</a> =&gt; <a href="NestUI.scala.html#50828" title="scala.tools.partest.nest.NestUI.type">NestUI</a>.<a href="NestUI.scala.html#1147221" title="(msg: String)Unit">normal</a><span class="delimiter">(</span><a href="#1168825" title="String">x</a> <span title="(x$1: Any)String">+</span> <span title="String(&quot;\n&quot;)" class="string">&quot;\n&quot;</span><span class="delimiter">)</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>
  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(logFile: java.io.File, t: Throwable, msg: String)Boolean" id="1164371">logStackTrace</a><span class="delimiter">(</span><a title="java.io.File" id="1168829">logFile</a>: <span title="java.io.File">File</span>, <a title="Throwable" id="1168830">t</a>: <span title="Throwable">Throwable</span>, <a title="String" id="1168831">msg</a>: <span title="String">String</span><span class="delimiter">)</span>: <a href="../../../Boolean.scala.html#1425" title="Boolean">Boolean</a> = <span class="delimiter">{</span>
    <a href="../../../reflect/io/File.scala.html#530996" title="(path: scala.reflect.io.Path)(implicit codec: scala.io.Codec)scala.reflect.io.File">SFile</a><a href="../../../io/Codec.scala.html#393359" title="=&gt; scala.io.Codec" class="delimiter">(</a><a href="../package.scala.html#55891" title="implicit scala.tools.partest.package.temporaryFile2Path : (x: java.io.File)scala.tools.nsc.io.Path">logFile</a><span class="delimiter">)</span>.<a href="../../../reflect/io/File.scala.html#530961" title="(strings: String*)Unit">writeAll</a><span class="delimiter">(</span><a href="#1168831" title="String">msg</a>, <a href="../../nsc/util/package.scala.html#55855" title="(ex: Throwable)String">stackTraceString</a><span class="delimiter">(</span><a href="#1168830" title="Throwable">t</a><span class="delimiter">)</span><span class="delimiter">)</span>
    <a href="#1164370" title="(logFile: java.io.File)Unit">outputLogFile</a><span class="delimiter">(</span><a href="#1168829" title="java.io.File">logFile</a><span class="delimiter">)</span> // if running the test threw an exception, output log file
    <span title="Boolean(false)" class="keyword">false</span>
  <span class="delimiter">}</span>

  <span class="keyword">private</span> <span class="keyword">def</span> <a title="[T](logFile: java.io.File, msg: String, value: T)PartialFunction[Throwable,T]" id="1164372">exHandler</a><span class="delimiter">[</span><a title="" id="1164374">T</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="java.io.File" id="1168681">logFile</a>: <span title="java.io.File">File</span>, <a title="String" id="1168682">msg</a>: <span title="String">String</span>, <a title="T" id="1168683">value</a>: <a href="#1164374" title="T">T</a><span class="delimiter">)</span>: <a href="../../../PartialFunction.scala.html#129" title="PartialFunction[Throwable,T]">PartialFunction</a><span class="delimiter">[</span>Throwable, T<span class="delimiter">]</span> = <a title="anonymous class $anonfun extends scala.runtime.AbstractPartialFunction[Throwable,T] with Serializable" id="1168840" class="delimiter">{</a>
    <span class="keyword">case</span> <a href="#3377038" title="B1" id="3377049">e</a>: Exception =&gt; <a href="#1164371" title="(logFile: java.io.File, t: Throwable, msg: String)Boolean">logStackTrace</a><span class="delimiter">(</span><a href="#1168681" title="java.io.File">logFile</a>, e, <a href="#1168682" title="String">msg</a><span class="delimiter">)</span> ; <a href="#1168683" title="T">value</a>
  <span class="delimiter">}</span>

  <span class="keyword">class</span> <a title="class Runner extends Object" id="1164375">Runner</a><a href="#1164375" title="RunnerManager.this.Runner" class="delimiter">(</a><a title="java.io.File" id="1168918">testFile</a>: <span title="java.io.File">File</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span class="keyword">var</span> <a title="String" id="1168870">testDiff</a>: <span title="String">String</span> = <span title="String(&quot;&quot;)" class="string">&quot;&quot;</span>
    <span class="keyword">var</span> <a title="Option[Boolean]" id="1168873">passed</a>: <a href="../../../Option.scala.html#978" title="Option[Boolean]">Option</a><span class="delimiter">[</span>Boolean<span class="delimiter">]</span> = <a href="../../../Option.scala.html#1585" title="None.type">None</a>

    <span class="keyword">val</span> <a title="String" id="1168875">fileBase</a> = <a href="../package.scala.html#55904" title="(name: String)String">basename</a><span class="delimiter">(</span><a href="#1168918" title="java.io.File">testFile</a>.<span title="()String">getName</span><span class="delimiter">)</span>
    <span class="keyword">val</span> <a title="java.io.File" id="1168877">logFile</a>  = <a href="#1164381" title="=&gt; scala.tools.partest.nest.FileManager">fileManager</a>.<a href="FileManager.scala.html#1150635" title="(file: java.io.File, kind: String)java.io.File">getLogFile</a><span class="delimiter">(</span><a href="#1168918" title="java.io.File">testFile</a>, <a href="#1164380" title="String">kind</a><span class="delimiter">)</span>
    <span class="keyword">val</span> <a title="java.io.File" id="1168879">parent</a>   = <a href="#1168918" title="java.io.File">testFile</a>.<span title="()java.io.File">getParentFile</span>
    <span class="keyword">val</span> <a title="java.io.File" id="1168881">outDir</a>   = <span title="(x$1: java.io.File, x$2: String)java.io.File" class="keyword">new</span> <span title="java.io.File">File</span><span class="delimiter">(</span><a href="#1168879" title="=&gt; java.io.File">parent</a>, <a href="../../../Predef.scala.html#7604" title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps" class="string">&quot;%s-%s.obj&quot;</a>.<a href="../../../collection/immutable/StringLike.scala.html#59882" title="(args: Any*)String">format</a><span class="delimiter">(</span><a href="#1168875" title="=&gt; String">fileBase</a>, <a href="#1164380" title="String">kind</a><span class="delimiter">)</span><span class="delimiter">)</span>
    <span class="keyword">def</span> <a title="=&gt; List[java.io.File]" id="1168883">toDelete</a> = <span title="List[java.io.File]" class="keyword">if</span> <span class="delimiter">(</span><a href="../package.scala.html#55909" title="=&gt; Boolean">isPartestDebug</a><span class="delimiter">)</span> <a href="../../../collection/immutable/List.scala.html#11188" title="scala.collection.immutable.Nil.type">Nil</a> <span class="keyword">else</span> <a href="../../../collection/immutable/List.scala.html#62451" title="(xs: Option[java.io.File]*)List[Option[java.io.File]]">List</a><span class="delimiter">(</span>
      <span title="Option[java.io.File]" class="keyword">if</span> <span class="delimiter">(</span><a href="#1168873" title="=&gt; Option[Boolean]">passed</a> <a href="../../../Option.scala.html#62882" title="(p: Boolean =&gt; Boolean)Boolean">exists</a> <span class="delimiter">(</span><a title="Boolean" id="1168926">x</a> =&gt; <a href="#1168926" title="Boolean">x</a><span class="delimiter">)</span><span class="delimiter">)</span> <a href="../../../Option.scala.html#63128" title="(x: java.io.File)Some[java.io.File]">Some</a><span class="delimiter">(</span><a href="#1168877" title="=&gt; java.io.File">logFile</a><span class="delimiter">)</span> <span class="keyword">else</span> <a href="../../../Option.scala.html#1585" title="None.type">None</a>,
      <span title="Option[java.io.File]" class="keyword">if</span> <span class="delimiter">(</span><a href="#1168881" title="=&gt; java.io.File">outDir</a>.<span title="()Boolean">isDirectory</span><span class="delimiter">)</span> <a href="../../../Option.scala.html#63128" title="(x: java.io.File)Some[java.io.File]">Some</a><span class="delimiter">(</span><a href="#1168881" title="=&gt; java.io.File">outDir</a><span class="delimiter">)</span> <span class="keyword">else</span> <a href="../../../Option.scala.html#1585" title="None.type">None</a>
    <span class="delimiter">)</span>.<a href="../../../collection/generic/GenericTraversableTemplate.scala.html#58488" title="(implicit asTraversable: Option[java.io.File] =&gt; scala.collection.GenTraversableOnce[java.io.File])List[java.io.File]">flatten</a>

    <span class="keyword">private</span> <span class="keyword">def</span> <a title="()java.io.File" id="1168884">createOutputDir</a><span class="delimiter">(</span><span class="delimiter">)</span>: <span title="java.io.File">File</span> = <span class="delimiter">{</span>
      <a href="#1168881" title="=&gt; java.io.File">outDir</a>.<span title="()Boolean">mkdirs</span><span class="delimiter">(</span><span class="delimiter">)</span>
      <a href="#1168881" title="=&gt; java.io.File">outDir</a>
    <span class="delimiter">}</span>

    <span class="keyword">private</span> <span class="keyword">def</span> <a title="(outDir: java.io.File, logFile: java.io.File, classpathPrefix: String, javaOpts: String)Boolean" id="1168885">execTest</a><span class="delimiter">(</span><a title="java.io.File" id="1168968">outDir</a>: <span title="java.io.File">File</span>, <a title="java.io.File" id="1168969">logFile</a>: <span title="java.io.File">File</span>, <a title="String" id="1168972">classpathPrefix</a>: <span title="String">String</span> = <span title="String(&quot;&quot;)" class="string">&quot;&quot;</span>, <a title="String" id="1168973">javaOpts</a>: <span title="String">String</span> = <span title="String(&quot;&quot;)" class="string">&quot;&quot;</span><span class="delimiter">)</span>: <a href="../../../Boolean.scala.html#1425" title="Boolean">Boolean</a> = <span class="delimiter">{</span>
      // check whether there is a &quot;.javaopts&quot; file
      <span class="keyword">val</span> <a title="java.io.File" id="1168974">argsFile</a>  = <span title="(x$1: java.io.File, x$2: String)java.io.File" class="keyword">new</span> <span title="java.io.File">File</span><span class="delimiter">(</span><a href="#1168969" title="java.io.File">logFile</a>.<span title="()java.io.File">getParentFile</span>, <a href="#1168875" title="=&gt; String">fileBase</a> <span title="(x$1: Any)String">+</span> <span title="String(&quot;.javaopts&quot;)" class="string">&quot;.javaopts&quot;</span><span class="delimiter">)</span>
      <span class="keyword">val</span> <a title="String" id="1168975">argString</a> = <a href="../package.scala.html#55903" title="(f: java.io.File)String">file2String</a><span class="delimiter">(</span><a href="#1168974" title="java.io.File">argsFile</a><span class="delimiter">)</span>
      <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#1168975" title="String">argString</a> <span title="(x$1: AnyRef)Boolean">!=</span> <span title="String(&quot;&quot;)" class="string">&quot;&quot;</span><span class="delimiter">)</span>
        <a href="NestUI.scala.html#50828" title="scala.tools.partest.nest.NestUI.type">NestUI</a>.<a href="NestUI.scala.html#1147230" title="(msg: String)Unit">verbose</a><span class="delimiter">(</span><a href="../../../Predef.scala.html#7604" title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps" class="string">&quot;Found javaopts file '%s', using options: '%s'&quot;</a>.<a href="../../../collection/immutable/StringLike.scala.html#59882" title="(args: Any*)String">format</a><span class="delimiter">(</span><a href="#1168974" title="java.io.File">argsFile</a>, <a href="#1168975" title="String">argString</a><span class="delimiter">)</span><span class="delimiter">)</span>

      <span class="keyword">val</span> <a title="String" id="1168976">testFullPath</a> = <span class="delimiter">{</span>
        <span class="keyword">val</span> <a title="java.io.File" id="1168992">d</a> = <span title="(x$1: java.io.File, x$2: String)java.io.File" class="keyword">new</span> <span title="java.io.File">File</span><span class="delimiter">(</span><a href="#1168969" title="java.io.File">logFile</a>.<span title="()java.io.File">getParentFile</span>, <a href="#1168875" title="=&gt; String">fileBase</a><span class="delimiter">)</span>
        <span title="String" class="keyword">if</span> <span class="delimiter">(</span><a href="#1168992" title="java.io.File">d</a>.<span title="()Boolean">isDirectory</span><span class="delimiter">)</span> <a href="#1168992" title="java.io.File">d</a>.<span title="()String">getAbsolutePath</span>
        <span class="keyword">else</span> <span class="delimiter">{</span>
          <span class="keyword">val</span> <a title="java.io.File" id="1168997">f</a> = <span title="(x$1: java.io.File, x$2: String)java.io.File" class="keyword">new</span> <span title="java.io.File">File</span><span class="delimiter">(</span><a href="#1168969" title="java.io.File">logFile</a>.<span title="()java.io.File">getParentFile</span>, <a href="#1168875" title="=&gt; String">fileBase</a> <span title="(x$1: Any)String">+</span> <span title="String(&quot;.scala&quot;)" class="string">&quot;.scala&quot;</span><span class="delimiter">)</span>
          <span title="String" class="keyword">if</span> <span class="delimiter">(</span><a href="#1168997" title="java.io.File">f</a>.<span title="()Boolean">isFile</span><span class="delimiter">)</span> <a href="#1168997" title="java.io.File">f</a>.<span title="()String">getAbsolutePath</span>
          <span class="keyword">else</span> <span title="String(&quot;&quot;)" class="string">&quot;&quot;</span>
        <span class="delimiter">}</span>
      <span class="delimiter">}</span>

      // Note! As this currently functions, JAVA_OPTS must precede argString
      // because when an option is repeated to java only the last one wins.
      // That means until now all the .javaopts files were being ignored because
      // they all attempt to change options which are also defined in
      // partest.java_opts, leading to debug output like:
      //
      // debug: Found javaopts file 'files/shootout/message.scala-2.javaopts', using options: '-Xss32k'
      // debug: java -Xss32k -Xss2m -Xms256M -Xmx1024M -classpath [...]
      <span class="keyword">val</span> <a title="List[String]" id="1168977">extras</a> = <span title="List[String]" class="keyword">if</span> <span class="delimiter">(</span><a href="../package.scala.html#55909" title="=&gt; Boolean">isPartestDebug</a><span class="delimiter">)</span> <a href="../../../collection/immutable/List.scala.html#62451" title="(xs: String*)List[String]">List</a><span class="delimiter">(</span><span title="String(&quot;-Dpartest.debug=true&quot;)" class="string">&quot;-Dpartest.debug=true&quot;</span><span class="delimiter">)</span> <span class="keyword">else</span> <a href="../../../collection/immutable/List.scala.html#11188" title="scala.collection.immutable.Nil.type">Nil</a>
      <span class="keyword">val</span> <a title="List[String]" id="1168978">propertyOptions</a> = <a href="../../../collection/immutable/List.scala.html#62451" title="(xs: String*)List[String]">List</a><span class="delimiter">(</span>
        <span title="String(&quot;-Dfile.encoding=UTF-8&quot;)" class="string">&quot;-Dfile.encoding=UTF-8&quot;</span>,
        <span title="String(&quot;-Djava.library.path=&quot;)" class="string">&quot;-Djava.library.path=&quot;</span><span title="(x$1: Any)String">+</span><a href="#1168969" title="java.io.File">logFile</a>.<span title="()java.io.File">getParentFile</span>.<span title="()String">getAbsolutePath</span>,
        <span title="String(&quot;-Dpartest.output=&quot;)" class="string">&quot;-Dpartest.output=&quot;</span><span title="(x$1: Any)String">+</span><a href="#1168968" title="java.io.File">outDir</a>.<span title="()String">getAbsolutePath</span>,
        <span title="String(&quot;-Dpartest.lib=&quot;)" class="string">&quot;-Dpartest.lib=&quot;</span><span title="(x$1: Any)String">+</span><a href="FileManager.scala.html#1150596" title="=&gt; String">LATEST_LIB</a>,
        <span title="String(&quot;-Dpartest.reflect=&quot;)" class="string">&quot;-Dpartest.reflect=&quot;</span><span title="(x$1: Any)String">+</span><a href="FileManager.scala.html#1150598" title="=&gt; String">LATEST_REFLECT</a>,
        <span title="String(&quot;-Dpartest.comp=&quot;)" class="string">&quot;-Dpartest.comp=&quot;</span><span title="(x$1: Any)String">+</span><a href="FileManager.scala.html#1150600" title="=&gt; String">LATEST_COMP</a>,
        <span title="String(&quot;-Dpartest.cwd=&quot;)" class="string">&quot;-Dpartest.cwd=&quot;</span><span title="(x$1: Any)String">+</span><a href="#1168968" title="java.io.File">outDir</a>.<span title="()String">getParent</span>,
        <span title="String(&quot;-Dpartest.test-path=&quot;)" class="string">&quot;-Dpartest.test-path=&quot;</span><span title="(x$1: Any)String">+</span><a href="#1168976" title="String">testFullPath</a>,
        <span title="String(&quot;-Dpartest.testname=&quot;)" class="string">&quot;-Dpartest.testname=&quot;</span><span title="(x$1: Any)String">+</span><a href="#1168875" title="=&gt; String">fileBase</a>,
        <span title="String(&quot;-Djavacmd=&quot;)" class="string">&quot;-Djavacmd=&quot;</span><span title="(x$1: Any)String">+</span><a href="../PartestDefaults.scala.html#1143290" title="=&gt; String">javaCmd</a>,
        <span title="String(&quot;-Djavaccmd=&quot;)" class="string">&quot;-Djavaccmd=&quot;</span><span title="(x$1: Any)String">+</span><a href="../PartestDefaults.scala.html#1143291" title="=&gt; String">javacCmd</a>,
        <span title="String(&quot;-Duser.language=en&quot;)" class="string">&quot;-Duser.language=en&quot;</span>,
        <span title="String(&quot;-Duser.country=US&quot;)" class="string">&quot;-Duser.country=US&quot;</span>
      <span class="delimiter">)</span> <a href="../../../collection/immutable/List.scala.html#62697" title="(that: scala.collection.GenTraversableOnce[String])(implicit bf: scala.collection.generic.CanBuildFrom[List[String],String,List[String]])List[String]">++</a> <a href="#1168977" title="List[String]">extras</a>

      <span class="keyword">val</span> <a title="String" id="1168979">classpath</a> = <span title="String" class="keyword">if</span> <span class="delimiter">(</span><a href="#1168972" title="String">classpathPrefix</a> <span title="(x$1: AnyRef)Boolean">!=</span> <span title="String(&quot;&quot;)" class="string">&quot;&quot;</span><span class="delimiter">)</span> <a href="../../nsc/util/ClassPath.scala.html#538286" title="(paths: String*)String">join</a><span class="delimiter">(</span><a href="#1168972" title="String">classpathPrefix</a>, <a href="FileManager.scala.html#1150594" title="=&gt; String">CLASSPATH</a><span class="delimiter">)</span> <span class="keyword">else</span> <a href="FileManager.scala.html#1150594" title="=&gt; String">CLASSPATH</a>
      <span class="keyword">val</span> <a title="Array[String]" id="1168980">cmd</a> = <a href="../PartestDefaults.scala.html#1143290" title="=&gt; String">javaCmd</a> <a href="../../../collection/SeqLike.scala.html#58850" title="(elem: String)(implicit bf: scala.collection.generic.CanBuildFrom[Array[String],String,Array[String]])Array[String]">+:</a> <span class="delimiter">(</span>
        <span class="delimiter">(</span><a href="../../../Predef.scala.html#7604" title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps">JAVA_OPTS</a>.<a href="../../../collection/immutable/StringLike.scala.html#59866" title="(separator: Char)Array[String]">split</a><a href="../../../Predef.scala.html#7555" title="(xs: Array[String])scala.collection.mutable.ArrayOps[String]" class="delimiter">(</a><span title="Char(' ')" class="char">' '</span><span class="delimiter">)</span> <a href="../../../Predef.scala.html#7555" title="(xs: Array[String])scala.collection.mutable.ArrayOps[String]">++</a> <a href="../../../Predef.scala.html#7604" title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps">javaOpts</a>.<a href="../../../collection/immutable/StringLike.scala.html#59866" title="(separator: Char)Array[String]">split</a><a href="../../../Predef.scala.html#7555" title="(xs: Array[String])scala.collection.mutable.ArrayOps[String]" class="delimiter">(</a><span title="Char(' ')" class="char">' '</span><span class="delimiter">)</span> <a href="../../../Predef.scala.html#7555" title="(xs: Array[String])scala.collection.mutable.ArrayOps[String]">++</a> <a href="../../../Predef.scala.html#7604" title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps">argString</a>.<a href="../../../collection/immutable/StringLike.scala.html#59866" title="(separator: Char)Array[String]">split</a><a href="../../../Predef.scala.html#7555" title="(xs: Array[String])scala.collection.mutable.ArrayOps[String]" class="delimiter">(</a><span title="Char(' ')" class="char">' '</span><span class="delimiter">)</span><span class="delimiter">)</span>.<a href="../../../collection/TraversableLike.scala.html#58063" title="(f: String =&gt; String)(implicit bf: scala.collection.generic.CanBuildFrom[Array[String],String,Array[String]])Array[String]">map</a><a href="../../../Predef.scala.html#7555" title="(xs: Array[String])scala.collection.mutable.ArrayOps[String]" class="delimiter">(</a><a href="#1170670" title="String">_</a>.<span title="()String">trim</span><span class="delimiter">)</span>.<a href="../../../collection/TraversableLike.scala.html#58073" title="(p: String =&gt; Boolean)Array[String]">filter</a><a href="../../../Predef.scala.html#7555" title="(xs: Array[String])scala.collection.mutable.ArrayOps[String]" class="delimiter">(</a><a href="#1170828" title="String">_</a> <span title="(x$1: AnyRef)Boolean">!=</span> <span title="String(&quot;&quot;)" class="string">&quot;&quot;</span><span class="delimiter">)</span> <a href="../../../Predef.scala.html#7555" title="(xs: Array[String])scala.collection.mutable.ArrayOps[String]">++</a> <a href="../../../collection/generic/GenericCompanion.scala.html#59933" title="(elems: String*)Seq[String]">Seq</a><span class="delimiter">(</span>
          <span title="String(&quot;-classpath&quot;)" class="string">&quot;-classpath&quot;</span>,
          <a href="../../nsc/util/ClassPath.scala.html#538286" title="(paths: String*)String">join</a><span class="delimiter">(</span><a href="#1168968" title="java.io.File">outDir</a>.<span title="()String">toString</span>, <a href="#1168979" title="String">classpath</a><span class="delimiter">)</span>
        <span class="delimiter">)</span> <a href="../../../Predef.scala.html#7555" title="(xs: Array[String])scala.collection.mutable.ArrayOps[String]">++</a> <a href="#1168978" title="List[String]">propertyOptions</a> <a href="../../../Predef.scala.html#7555" title="(xs: Array[String])scala.collection.mutable.ArrayOps[String]">++</a> <a href="../../../collection/generic/GenericCompanion.scala.html#59933" title="(elems: String*)Seq[String]">Seq</a><span class="delimiter">(</span>
          <span title="String(&quot;scala.tools.nsc.MainGenericRunner&quot;)" class="string">&quot;scala.tools.nsc.MainGenericRunner&quot;</span>,
          <span title="String(&quot;-usejavacp&quot;)" class="string">&quot;-usejavacp&quot;</span>,
          <span title="String(&quot;Test&quot;)" class="string">&quot;Test&quot;</span>,
          <span title="String(&quot;jvm&quot;)" class="string">&quot;jvm&quot;</span>
        <span class="delimiter">)</span>
      <span class="delimiter">)</span>

      <a href="#1164364" title="(args: Seq[String], outFile: java.io.File)Boolean">runCommand</a><span class="delimiter">(</span><a href="../../../LowPriorityImplicits.scala.html#7412" title="(xs: Array[String])scala.collection.mutable.WrappedArray[String]">cmd</a>, <a href="#1168969" title="java.io.File">logFile</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>

    <span class="keyword">private</span> <span class="keyword">def</span> <a title="(dir: java.io.File, suffix: String)scala.reflect.io.File" id="1168886">getCheckFilePath</a><span class="delimiter">(</span><a title="java.io.File" id="1172837">dir</a>: <span title="java.io.File">File</span>, <a title="String" id="1172839">suffix</a>: <span title="String">String</span> = <span title="String(&quot;&quot;)" class="string">&quot;&quot;</span><span class="delimiter">)</span> = <span class="delimiter">{</span>
      <span class="keyword">def</span> <a title="(s: String)scala.reflect.io.File" id="1172840">chkFile</a><span class="delimiter">(</span><a title="String" id="1172841">s</a>: <span title="String">String</span><span class="delimiter">)</span> = <span class="delimiter">(</span><a href="../../../reflect/io/Directory.scala.html#531519" title="(path: scala.reflect.io.Path)scala.reflect.io.Directory">Directory</a><span class="delimiter">(</span><a href="../package.scala.html#55891" title="implicit scala.tools.partest.package.temporaryFile2Path : (x: java.io.File)scala.tools.nsc.io.Path">dir</a><span class="delimiter">)</span> <a href="../../../reflect/io/Path.scala.html#530880" title="(child: scala.reflect.io.Path)scala.reflect.io.Path">/</a> <a href="../../../Predef.scala.html#7604" title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps" class="string">&quot;%s%s.check&quot;</a>.<a href="../../../collection/immutable/StringLike.scala.html#59882" title="(args: Any*)String">format</a><a href="../../../reflect/io/Path.scala.html#531009" title="implicit scala.reflect.io.Path.string2path : (s: String)scala.reflect.io.Path" class="delimiter">(</a><a href="#1168875" title="=&gt; String">fileBase</a>, <a href="#1172841" title="String">s</a><span class="delimiter">)</span><span class="delimiter">)</span>.<a href="../../../reflect/io/Path.scala.html#530873" title="=&gt; scala.reflect.io.File">toFile</a>

      <span title="scala.reflect.io.File" class="keyword">if</span> <span class="delimiter">(</span><a href="#1172840" title="(s: String)scala.reflect.io.File">chkFile</a><span class="delimiter">(</span><span title="String(&quot;&quot;)" class="string">&quot;&quot;</span><span class="delimiter">)</span>.<a href="../../../reflect/io/Path.scala.html#530910" title="=&gt; Boolean">isFile</a> <a href="../../../Boolean.scala.html#57825" title="(x: Boolean)Boolean">||</a> <a href="#1172839" title="String">suffix</a> <span title="(x$1: AnyRef)Boolean">==</span> <span title="String(&quot;&quot;)" class="string">&quot;&quot;</span><span class="delimiter">)</span> <a href="#1172840" title="(s: String)scala.reflect.io.File">chkFile</a><span class="delimiter">(</span><span title="String(&quot;&quot;)" class="string">&quot;&quot;</span><span class="delimiter">)</span>
      <span class="keyword">else</span> <a href="#1172840" title="(s: String)scala.reflect.io.File">chkFile</a><span class="delimiter">(</span><span title="String(&quot;-&quot;)" class="string">&quot;-&quot;</span> <span title="(x$1: Any)String">+</span> <a href="#1172839" title="String">suffix</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>
    <span class="keyword">private</span> <span class="keyword">def</span> <a title="(dir: java.io.File)Option[scala.reflect.io.File]" id="1168887">getCheckFile</a><span class="delimiter">(</span><a title="java.io.File" id="1172853">dir</a>: <span title="java.io.File">File</span><span class="delimiter">)</span> = <a href="../../../Option.scala.html#63128" title="(x: scala.reflect.io.File)Some[scala.reflect.io.File]">Some</a><span class="delimiter">(</span><a href="#1168886" title="(dir: java.io.File, suffix: String)scala.reflect.io.File">getCheckFilePath</a><span class="delimiter">(</span><a href="#1172853" title="java.io.File">dir</a>, <a href="#1164380" title="String">kind</a><span class="delimiter">)</span><span class="delimiter">)</span> <a href="../../../Option.scala.html#62877" title="(p: scala.reflect.io.File =&gt; Boolean)Option[scala.reflect.io.File]">filter</a> <span class="delimiter">(</span><a href="#1172859" title="scala.reflect.io.File">_</a>.<a href="../../../reflect/io/Path.scala.html#530906" title="=&gt; Boolean">canRead</a><span class="delimiter">)</span>

    <span class="keyword">private</span> <span class="keyword">def</span> <a title="(dir: java.io.File, logFile: java.io.File)String" id="1168888">compareOutput</a><span class="delimiter">(</span><a title="java.io.File" id="1172860">dir</a>: <span title="java.io.File">File</span>, <a title="java.io.File" id="1172861">logFile</a>: <span title="java.io.File">File</span><span class="delimiter">)</span>: <span title="String">String</span> = <span class="delimiter">{</span>
      <span class="keyword">val</span> <a title="scala.reflect.io.File" id="1172862">checkFile</a> = <a href="#1168886" title="(dir: java.io.File, suffix: String)scala.reflect.io.File">getCheckFilePath</a><span class="delimiter">(</span><a href="#1172860" title="java.io.File">dir</a>, <a href="#1164380" title="String">kind</a><span class="delimiter">)</span>
      <span class="keyword">val</span> <a title="String" id="1172863">diff</a> =
        <span title="String" class="keyword">if</span> <span class="delimiter">(</span><a href="#1172862" title="scala.reflect.io.File">checkFile</a>.<a href="../../../reflect/io/Path.scala.html#530906" title="=&gt; Boolean">canRead</a><span class="delimiter">)</span> <a href="#1164357" title="(f1: java.io.File, f2: java.io.File)String">compareFiles</a><span class="delimiter">(</span><a href="#1172861" title="java.io.File">logFile</a>, <a href="#1172862" title="scala.reflect.io.File">checkFile</a>.<a href="../../../reflect/io/Path.scala.html#530865" title="=&gt; java.io.File">jfile</a><span class="delimiter">)</span>
        <span class="keyword">else</span> <a href="../package.scala.html#55903" title="(f: java.io.File)String">file2String</a><span class="delimiter">(</span><a href="#1172861" title="java.io.File">logFile</a><span class="delimiter">)</span>

      // if check file exists, compare with log file
      <span title="String" class="keyword">if</span> <span class="delimiter">(</span><a href="#1172863" title="String">diff</a> <span title="(x$1: AnyRef)Boolean">!=</span> <span title="String(&quot;&quot;)" class="string">&quot;&quot;</span> <a href="../../../Boolean.scala.html#57826" title="(x: Boolean)Boolean">&amp;&amp;</a> <a href="#1164381" title="=&gt; scala.tools.partest.nest.FileManager">fileManager</a>.<a href="FileManager.scala.html#1150609" title="=&gt; Boolean">updateCheck</a><span class="delimiter">)</span> <span class="delimiter">{</span>
        <a href="NestUI.scala.html#50828" title="scala.tools.partest.nest.NestUI.type">NestUI</a>.<a href="NestUI.scala.html#1147230" title="(msg: String)Unit">verbose</a><span class="delimiter">(</span><span title="String(&quot;Updating checkfile &quot;)" class="string">&quot;Updating checkfile &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#1172862" title="scala.reflect.io.File">checkFile</a>.<a href="../../../reflect/io/Path.scala.html#530865" title="=&gt; java.io.File">jfile</a><span class="delimiter">)</span>
        <span class="keyword">val</span> <a title="scala.reflect.io.File" id="1172868">toWrite</a> = <span title="scala.reflect.io.File" class="keyword">if</span> <span class="delimiter">(</span><a href="#1172862" title="scala.reflect.io.File">checkFile</a>.<a href="../../../reflect/io/Path.scala.html#530908" title="=&gt; Boolean">exists</a><span class="delimiter">)</span> <a href="#1172862" title="scala.reflect.io.File">checkFile</a> <span class="keyword">else</span> <a href="#1168886" title="(dir: java.io.File, suffix: String)scala.reflect.io.File">getCheckFilePath</a><span class="delimiter">(</span><a href="#1172860" title="java.io.File">dir</a>, <span title="String(&quot;&quot;)" class="string">&quot;&quot;</span><span class="delimiter">)</span>
        <a href="#1172868" title="scala.reflect.io.File">toWrite</a> <a href="../../../reflect/io/File.scala.html#530961" title="(strings: String*)Unit">writeAll</a> <a href="../package.scala.html#55903" title="(f: java.io.File)String">file2String</a><span class="delimiter">(</span><a href="#1172861" title="java.io.File">logFile</a><span class="delimiter">)</span>
        <span title="String(&quot;&quot;)" class="string">&quot;&quot;</span>
      <span class="delimiter">}</span>
      <span class="keyword">else</span> <a href="#1172863" title="String">diff</a>
    <span class="delimiter">}</span>

    <span class="keyword">def</span> <a title="()(java.io.StringWriter, java.io.PrintWriter)" id="1168889">newTestWriters</a><span class="delimiter">(</span><span class="delimiter">)</span> = <span class="delimiter">{</span>
      <span class="keyword">val</span> <a title="java.io.StringWriter" id="1172869">swr</a> = <span title="java.io.StringWriter" class="keyword">new</span> <span title="java.io.StringWriter">StringWriter</span>
      <span class="keyword">val</span> <a title="java.io.PrintWriter" id="1172870">wr</a>  = <span title="(x$1: java.io.Writer, x$2: Boolean)java.io.PrintWriter" class="keyword">new</span> <span title="java.io.PrintWriter">PrintWriter</span><span class="delimiter">(</span><a href="#1172869" title="java.io.StringWriter">swr</a>, <span title="Boolean(true)" class="keyword">true</span><span class="delimiter">)</span>
      // diff    = &quot;&quot;

      <span class="delimiter">(</span><a href="../../../Tuple2.scala.html#62849" title="(_1: java.io.StringWriter, _2: java.io.PrintWriter)(java.io.StringWriter, java.io.PrintWriter)" class="delimiter">(</a><a href="#1172869" title="java.io.StringWriter">swr</a>, <a href="#1172870" title="java.io.PrintWriter">wr</a><span class="delimiter">)</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>

    <span class="keyword">def</span> <a title="(what: Any)Boolean" id="1168890">fail</a><span class="delimiter">(</span><a title="Any" id="1172883">what</a>: <span title="Any">Any</span><span class="delimiter">)</span> = <span class="delimiter">{</span>
      <a href="NestUI.scala.html#50828" title="scala.tools.partest.nest.NestUI.type">NestUI</a>.<a href="NestUI.scala.html#1147230" title="(msg: String)Unit">verbose</a><span class="delimiter">(</span><span title="String(&quot;scalac: compilation of &quot;)" class="string">&quot;scalac: compilation of &quot;</span><span title="(x$1: Any)String">+</span><a href="#1172883" title="Any">what</a><span title="(x$1: Any)String">+</span><span title="String(&quot; failed\n&quot;)" class="string">&quot; failed\n&quot;</span><span class="delimiter">)</span>
      <span title="Boolean(false)" class="keyword">false</span>
    <span class="delimiter">}</span>
    <span class="keyword">def</span> <a title="(testFile: java.io.File, diff: String)Boolean" id="1168891">diffCheck</a><span class="delimiter">(</span><a title="java.io.File" id="1172884">testFile</a>: <span title="java.io.File">File</span>, <a title="String" id="1172885">diff</a>: <span title="String">String</span><span class="delimiter">)</span> = <span class="delimiter">{</span>
      <a href="#1168870" title="(x$1: String)Unit">testDiff</a> = <a href="#1172885" title="String">diff</a>
      <a href="#1168870" title="=&gt; String">testDiff</a> <span title="(x$1: AnyRef)Boolean">==</span> <span title="String(&quot;&quot;)" class="string">&quot;&quot;</span>
    <span class="delimiter">}</span>

    /** 1. Creates log file and output directory.
     *  2. Runs script function, providing log file and output directory as arguments.
     */
    <span class="keyword">def</span> <a title="(file: java.io.File, script: (java.io.File, java.io.File) =&gt; Boolean)(Boolean, scala.tools.partest.nest.LogContext)" id="1168892">runInContext</a><span class="delimiter">(</span><a title="java.io.File" id="1172891">file</a>: <span title="java.io.File">File</span>, <a title="(java.io.File, java.io.File) =&gt; Boolean" id="1172892">script</a>: <span class="delimiter">(</span>File, File<span class="delimiter">)</span> =&gt; Boolean<span class="delimiter">)</span>: <a href="../../../Tuple2.scala.html#783" title="(Boolean, scala.tools.partest.nest.LogContext)" class="delimiter">(</a>Boolean, LogContext<span class="delimiter">)</span> = <span class="delimiter">{</span>
      <span class="keyword">val</span> <a href="#3377057" title="(x: (java.io.StringWriter, java.io.PrintWriter))(java.io.StringWriter, java.io.PrintWriter)" class="delimiter">(</a><a href="../../../Tuple2.scala.html#60635" title="java.io.StringWriter" id="1172894">swr</a>, <a href="../../../Tuple2.scala.html#60637" title="java.io.PrintWriter" id="1172895">wr</a><span class="delimiter">)</span> = <a href="#1168889" title="()(java.io.StringWriter, java.io.PrintWriter)">newTestWriters</a><a href="../../../Tuple2.scala.html#783" title="(java.io.StringWriter, java.io.PrintWriter) @unchecked" class="delimiter">(</a><span class="delimiter">)</span>
      <a href="#1164360" title="(file: java.io.File, printer: java.io.PrintWriter)Unit">printInfoStart</a><span class="delimiter">(</span><a href="#1172891" title="java.io.File">file</a>, <a href="#1172895" title="java.io.PrintWriter">wr</a><span class="delimiter">)</span>

      <a href="NestUI.scala.html#50828" title="scala.tools.partest.nest.NestUI.type">NestUI</a>.<a href="NestUI.scala.html#1147230" title="(msg: String)Unit">verbose</a><span class="delimiter">(</span><a href="../../../Predef.scala.html#7605" title="implicit scala.Predef.any2stringadd : (x: Any)scala.runtime.StringAdd" class="keyword">this</a><a href="../../../runtime/StringAdd.scala.html#60046" title="(other: String)String">+</a><span title="String(&quot; running test &quot;)" class="string">&quot; running test &quot;</span><span title="(x$1: Any)String">+</span><a href="#1168875" title="=&gt; String">fileBase</a><span class="delimiter">)</span>
      <span class="keyword">val</span> <a title="java.io.File" id="1172896">outDir</a> = <a href="#1168884" title="()java.io.File">createOutputDir</a><span class="delimiter">(</span><span class="delimiter">)</span>
      <a href="NestUI.scala.html#50828" title="scala.tools.partest.nest.NestUI.type">NestUI</a>.<a href="NestUI.scala.html#1147230" title="(msg: String)Unit">verbose</a><span class="delimiter">(</span><span title="String(&quot;output directory: &quot;)" class="string">&quot;output directory: &quot;</span><span title="(x$1: Any)String">+</span><a href="#1172896" title="java.io.File">outDir</a><span class="delimiter">)</span>

      // run test-specific code
      <span class="keyword">val</span> <a title="Boolean" id="1172897">succeeded</a> = <a title="Boolean" id="1172930" class="keyword">try</a> <span class="delimiter">{</span>
        <span title="Boolean" class="keyword">if</span> <span class="delimiter">(</span><a href="../package.scala.html#55909" title="=&gt; Boolean">isPartestDebug</a><span class="delimiter">)</span> <span class="delimiter">{</span>
          <span class="keyword">val</span> <a href="#3377063" title="(x: (Boolean, Long))(Boolean, Long)" class="delimiter">(</a><a href="../../../Tuple2.scala.html#60635" title="Boolean" id="1172912">result</a>, <a href="../../../Tuple2.scala.html#60637" title="Long" id="1172913">millis</a><span class="delimiter">)</span> = <a href="../package.scala.html#55896" title="(body: =&gt; Boolean)(Boolean, Long)">timed</a><a href="../../../Tuple2.scala.html#783" title="(Boolean, Long) @unchecked" class="delimiter">(</a><a href="../../../Function2.scala.html#65848" title="(v1: java.io.File, v2: java.io.File)Boolean">script</a><span class="delimiter">(</span><a href="#1168877" title="=&gt; java.io.File">logFile</a>, <a href="#1172896" title="java.io.File">outDir</a><span class="delimiter">)</span><span class="delimiter">)</span>
          <a href="#1164381" title="=&gt; scala.tools.partest.nest.FileManager">fileManager</a>.<a href="FileManager.scala.html#1150632" title="(name: String, milliseconds: Long)Unit">recordTestTiming</a><span class="delimiter">(</span><a href="#1172891" title="java.io.File">file</a>.<span title="()String">getPath</span>, <a href="#1172913" title="Long">millis</a><span class="delimiter">)</span>
          <a href="#1172912" title="Boolean">result</a>
        <span class="delimiter">}</span>
        <span class="keyword">else</span> <a href="../../../Function2.scala.html#65848" title="(v1: java.io.File, v2: java.io.File)Boolean">script</a><span class="delimiter">(</span><a href="#1168877" title="=&gt; java.io.File">logFile</a>, <a href="#1172896" title="java.io.File">outDir</a><span class="delimiter">)</span>
      <span class="delimiter">}</span>
      <span class="keyword">catch</span> <a href="#1164372" title="(logFile: java.io.File, msg: String, value: Boolean)PartialFunction[Throwable,Boolean]">exHandler</a><a href="../../../PartialFunction.scala.html#58653" title="PartialFunction[Throwable,Boolean]" id="1172931" class="delimiter">(</a><a href="#1168877" title="=&gt; java.io.File">logFile</a>, <span title="String(&quot;&quot;)" class="string">&quot;&quot;</span>, <span title="Boolean(false)" class="keyword">false</span><span class="delimiter">)</span>

      <a href="../../../Tuple2.scala.html#62849" title="(_1: Boolean, _2: scala.tools.partest.nest.LogContext)(Boolean, scala.tools.partest.nest.LogContext)" class="delimiter">(</a><a href="#1172897" title="Boolean">succeeded</a>, <a href="#1168356" title="(file: java.io.File, swr: java.io.StringWriter, wr: java.io.PrintWriter)scala.tools.partest.nest.LogContext">LogContext</a><span class="delimiter">(</span><a href="#1168877" title="=&gt; java.io.File">logFile</a>, <a href="#1172894" title="java.io.StringWriter">swr</a>, <a href="#1172895" title="java.io.PrintWriter">wr</a><span class="delimiter">)</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>

    <span class="keyword">def</span> <a title="(dir: java.io.File)List[List[java.io.File]]" id="1168893">groupedFiles</a><span class="delimiter">(</span><a title="java.io.File" id="1172953">dir</a>: <span title="java.io.File">File</span><span class="delimiter">)</span>: <a href="../../../collection/immutable/List.scala.html#11952" title="List[List[java.io.File]]">List</a><span class="delimiter">[</span>List<span class="delimiter">[</span>File<span class="delimiter">]</span><span class="delimiter">]</span> = <span class="delimiter">{</span>
      <span class="keyword">val</span> <a title="List[java.io.File]" id="1172954">testFiles</a> = <a href="#1172953" title="java.io.File">dir</a>.<a href="../../../Predef.scala.html#7555" title="(xs: Array[java.io.File])scala.collection.mutable.ArrayOps[java.io.File]">listFiles</a>.<a href="../../../collection/TraversableOnce.scala.html#58263" title="=&gt; List[java.io.File]">toList</a> <a href="../../../collection/TraversableLike.scala.html#58073" title="(p: java.io.File =&gt; Boolean)List[java.io.File]">filter</a> <a href="#1164369" title="(f: java.io.File)Boolean">isJavaOrScala</a>

      <span class="keyword">def</span> <a title="(f: java.io.File, num: Int)Boolean" id="1172955">isInGroup</a><span class="delimiter">(</span><a title="java.io.File" id="1173027">f</a>: <span title="java.io.File">File</span>, <a title="Int" id="1173028">num</a>: <a href="../../../Int.scala.html#321" title="Int">Int</a><span class="delimiter">)</span> = <a href="../../../reflect/io/File.scala.html#530996" title="(path: scala.reflect.io.Path)(implicit codec: scala.io.Codec)scala.reflect.io.File">SFile</a><a href="../../../io/Codec.scala.html#393359" title="=&gt; scala.io.Codec" class="delimiter">(</a><a href="../package.scala.html#55891" title="implicit scala.tools.partest.package.temporaryFile2Path : (x: java.io.File)scala.tools.nsc.io.Path">f</a><span class="delimiter">)</span>.<a href="../../../reflect/io/Path.scala.html#530897" title="=&gt; String">stripExtension</a> <span title="(x$1: String)Boolean">endsWith</span> <span class="delimiter">(</span><span title="String(&quot;_&quot;)" class="string">&quot;_&quot;</span> <span title="(x$1: Any)String">+</span> <a href="#1173028" title="Int">num</a><span class="delimiter">)</span>
      <span class="keyword">val</span> <a title="List[List[java.io.File]]" id="1172956">groups</a> = <span class="delimiter">(</span><a href="../../../LowPriorityImplicits.scala.html#7395" title="implicit scala.LowPriorityImplicits.intWrapper : (x: Int)scala.runtime.RichInt" class="int">0</a> <a href="../../../runtime/RichInt.scala.html#57062" title="(end: Int)scala.collection.immutable.Range.Inclusive">to</a> <span title="Int(9)" class="int">9</span><span class="delimiter">)</span>.<a href="../../../collection/TraversableOnce.scala.html#58263" title="=&gt; List[Int]">toList</a> <a href="../../../collection/TraversableLike.scala.html#58063" title="(f: Int =&gt; List[java.io.File])(implicit bf: scala.collection.generic.CanBuildFrom[List[Int],List[java.io.File],List[List[java.io.File]]])List[List[java.io.File]]">map</a> <span class="delimiter">(</span><a title="Int" id="1173162">num</a> =&gt; <span class="delimiter">(</span><a href="#1172954" title="List[java.io.File]">testFiles</a> <a href="../../../collection/TraversableLike.scala.html#58073" title="(p: java.io.File =&gt; Boolean)List[java.io.File]">filter</a> <span class="delimiter">(</span><a title="java.io.File" id="1173166">f</a> =&gt; <a href="#1172955" title="(f: java.io.File, num: Int)Boolean">isInGroup</a><span class="delimiter">(</span><a href="#1173166" title="java.io.File">f</a>, <a href="#1173162" title="Int">num</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>.<a href="../../../collection/SeqLike.scala.html#58872" title="(implicit ord: scala.math.Ordering[java.io.File])List[java.io.File]">sorted</a><span class="delimiter">)</span>
      <span class="keyword">val</span> <a title="List[java.io.File]" id="1172957">noGroupSuffix</a> = <span class="delimiter">(</span><a href="#1172954" title="List[java.io.File]">testFiles</a> <a href="../../../collection/TraversableLike.scala.html#58074" title="(p: java.io.File =&gt; Boolean)List[java.io.File]">filterNot</a> <span class="delimiter">(</span><a href="#1172956" title="List[List[java.io.File]]">groups</a>.<a href="../../../collection/generic/GenericTraversableTemplate.scala.html#58488" title="(implicit asTraversable: List[java.io.File] =&gt; scala.collection.GenTraversableOnce[java.io.File])List[java.io.File]">flatten</a> <a href="../../../collection/LinearSeqOptimized.scala.html#86380" title="(elem: Any)Boolean">contains</a><span class="delimiter">)</span><span class="delimiter">)</span>.<a href="../../../collection/SeqLike.scala.html#58872" title="(implicit ord: scala.math.Ordering[java.io.File])List[java.io.File]">sorted</a>

      <a href="#1172957" title="List[java.io.File]">noGroupSuffix</a> <a href="../../../collection/immutable/List.scala.html#62685" title="(x: List[java.io.File])List[List[java.io.File]]">::</a> <a href="#1172956" title="List[List[java.io.File]]">groups</a> <a href="../../../collection/TraversableLike.scala.html#58074" title="(p: List[java.io.File] =&gt; Boolean)List[List[java.io.File]]">filterNot</a> <span class="delimiter">(</span><a href="#1173351" title="List[java.io.File]">_</a>.<a href="../../../collection/SeqLike.scala.html#58787" title="=&gt; Boolean">isEmpty</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>

    <span class="keyword">def</span> <a title="(dir: java.io.File, logFile: java.io.File, outDir: java.io.File)scala.tools.partest.nest.CompilationOutcome" id="1168894">compileFilesIn</a><span class="delimiter">(</span><a title="java.io.File" id="1173352">dir</a>: <span title="java.io.File">File</span>, <a title="java.io.File" id="1173353">logFile</a>: <span title="java.io.File">File</span>, <a title="java.io.File" id="1173354">outDir</a>: <span title="java.io.File">File</span><span class="delimiter">)</span>: <a href="CompileManager.scala.html#50739" title="scala.tools.partest.nest.CompilationOutcome">CompilationOutcome</a> = <span class="delimiter">{</span>
      <span class="keyword">def</span> <a title="(g: List[java.io.File])scala.tools.partest.nest.CompilationOutcome" id="1173355">compileGroup</a><span class="delimiter">(</span><a title="List[java.io.File]" id="1173356">g</a>: <a href="../../../collection/immutable/List.scala.html#11952" title="List[java.io.File]">List</a><span class="delimiter">[</span>File<span class="delimiter">]</span><span class="delimiter">)</span>: <a href="CompileManager.scala.html#50739" title="scala.tools.partest.nest.CompilationOutcome">CompilationOutcome</a> = <span class="delimiter">{</span>
        <span class="keyword">val</span> <a href="#3377069" title="(x: (List[java.io.File], List[java.io.File]))(List[java.io.File], List[java.io.File])" class="delimiter">(</a><a href="../../../Tuple2.scala.html#60635" title="List[java.io.File]" id="1173358">scalaFiles</a>, <a href="../../../Tuple2.scala.html#60637" title="List[java.io.File]" id="1173359">javaFiles</a><span class="delimiter">)</span> = <a href="#1173356" title="List[java.io.File]">g</a> <a href="../../../collection/TraversableLike.scala.html#58080" title="(p: java.io.File =&gt; Boolean)(List[java.io.File], List[java.io.File])">partition</a> <a href="#1164368" title="(f: java.io.File)Boolean">isScala</a>
        <span class="keyword">val</span> <a title="List[java.io.File]" id="1173360">allFiles</a> = <a href="#1173359" title="List[java.io.File]">javaFiles</a> <a href="../../../collection/immutable/List.scala.html#62697" title="(that: scala.collection.GenTraversableOnce[java.io.File])(implicit bf: scala.collection.generic.CanBuildFrom[List[java.io.File],java.io.File,List[java.io.File]])List[java.io.File]">++</a> <a href="#1173358" title="List[java.io.File]">scalaFiles</a>

        <a href="../../../collection/immutable/List.scala.html#62451" title="(xs: Int*)List[Int]">List</a><span class="delimiter">(</span><span title="Int(1)" class="int">1</span>, <span title="Int(2)" class="int">2</span>, <span title="Int(3)" class="int">3</span><span class="delimiter">)</span>.<a href="../../../collection/LinearSeqOptimized.scala.html#86382" title="(z: scala.tools.partest.nest.CompilationOutcome)(f: (scala.tools.partest.nest.CompilationOutcome, Int) =&gt; scala.tools.partest.nest.CompilationOutcome)scala.tools.partest.nest.CompilationOutcome">foldLeft</a><span class="delimiter">(</span><a href="CompileManager.scala.html#50740" title="scala.tools.partest.nest.CompileSuccess.type">CompileSuccess</a>: <a href="CompileManager.scala.html#50739" title="scala.tools.partest.nest.CompilationOutcome">CompilationOutcome</a><span class="delimiter">)</span> <a href="../../../Tuple2.scala.html#62849" title="(_1: scala.tools.partest.nest.CompilationOutcome, _2: Int)(scala.tools.partest.nest.CompilationOutcome, Int)" class="delimiter">{</a>
          <span class="keyword">case</span> <span class="delimiter">(</span><a href="../../../Tuple2.scala.html#60635" title="scala.tools.partest.nest.CompilationOutcome" id="3377090">CompileSuccess</a>, <a href="../../../Tuple2.scala.html#60637" title="Int" id="3377091" class="int">1</a><span class="delimiter">)</span> <span class="keyword">if</span> <a href="#1173358" title="List[java.io.File]">scalaFiles</a>.<a href="../../../collection/TraversableOnce.scala.html#58191" title="=&gt; Boolean">nonEmpty</a> =&gt; <a href="#1164355" title="=&gt; scala.tools.partest.nest.CompileManager">compileMgr</a>.<a href="CompileManager.scala.html#1161944" title="(outdir: Option[java.io.File], sources: List[java.io.File], kind: String, log: java.io.File)scala.tools.partest.nest.CompilationOutcome">attemptCompile</a><a href="#3377097" title="(x: scala.tools.partest.nest.CompilationOutcome)scala.tools.partest.nest.CompilationOutcome" class="delimiter">(</a><a href="../../../Option.scala.html#63128" title="(x: java.io.File)Some[java.io.File]">Some</a><span class="delimiter">(</span><a href="#1173354" title="java.io.File">outDir</a><span class="delimiter">)</span>, <a href="#1173360" title="List[java.io.File]">allFiles</a>, <a href="#1164380" title="String">kind</a>, <a href="#1173353" title="java.io.File">logFile</a><span class="delimiter">)</span>     // java + scala
          <span class="keyword">case</span> <span class="delimiter">(</span><a href="../../../Tuple2.scala.html#60635" title="scala.tools.partest.nest.CompilationOutcome" id="3377092">CompileSuccess</a>, <a href="../../../Tuple2.scala.html#60637" title="Int" id="3377093" class="int">2</a><span class="delimiter">)</span> <span class="keyword">if</span> <a href="#1173359" title="List[java.io.File]">javaFiles</a>.<a href="../../../collection/TraversableOnce.scala.html#58191" title="=&gt; Boolean">nonEmpty</a>  =&gt; <a href="#1164363" title="(outDir: java.io.File, files: List[java.io.File], output: java.io.File)scala.tools.partest.nest.CompilationOutcome">javac</a><a href="#3377097" title="(x: scala.tools.partest.nest.CompilationOutcome)scala.tools.partest.nest.CompilationOutcome" class="delimiter">(</a><a href="#1173354" title="java.io.File">outDir</a>, <a href="#1173359" title="List[java.io.File]">javaFiles</a>, <a href="#1173353" title="java.io.File">logFile</a><span class="delimiter">)</span>                                    // java
          <span class="keyword">case</span> <span class="delimiter">(</span><a href="../../../Tuple2.scala.html#60635" title="scala.tools.partest.nest.CompilationOutcome" id="3377094">CompileSuccess</a>, <a href="../../../Tuple2.scala.html#60637" title="Int" id="3377095" class="int">3</a><span class="delimiter">)</span> <span class="keyword">if</span> <a href="#1173358" title="List[java.io.File]">scalaFiles</a>.<a href="../../../collection/TraversableOnce.scala.html#58191" title="=&gt; Boolean">nonEmpty</a> =&gt; <a href="#1164355" title="=&gt; scala.tools.partest.nest.CompileManager">compileMgr</a>.<a href="CompileManager.scala.html#1161944" title="(outdir: Option[java.io.File], sources: List[java.io.File], kind: String, log: java.io.File)scala.tools.partest.nest.CompilationOutcome">attemptCompile</a><a href="#3377097" title="(x: scala.tools.partest.nest.CompilationOutcome)scala.tools.partest.nest.CompilationOutcome" class="delimiter">(</a><a href="../../../Option.scala.html#63128" title="(x: java.io.File)Some[java.io.File]">Some</a><span class="delimiter">(</span><a href="#1173354" title="java.io.File">outDir</a><span class="delimiter">)</span>, <a href="#1173358" title="List[java.io.File]">scalaFiles</a>, <a href="#1164380" title="String">kind</a>, <a href="#1173353" title="java.io.File">logFile</a><span class="delimiter">)</span>   // scala
          <span class="keyword">case</span> <span class="delimiter">(</span><a href="../../../Tuple2.scala.html#60635" title="scala.tools.partest.nest.CompilationOutcome" id="1173474">outcome</a>, <a href="../../../Tuple2.scala.html#60637" title="Int" id="3377089">_</a><span class="delimiter">)</span>                               =&gt; <a href="#3377097" title="(x: scala.tools.partest.nest.CompilationOutcome)scala.tools.partest.nest.CompilationOutcome">outcome</a>
        <span class="delimiter">}</span>
      <span class="delimiter">}</span>
      <a href="#1168893" title="(dir: java.io.File)List[List[java.io.File]]">groupedFiles</a><span class="delimiter">(</span><a href="#1173352" title="java.io.File">dir</a><span class="delimiter">)</span>.<a href="../../../collection/LinearSeqOptimized.scala.html#86382" title="(z: scala.tools.partest.nest.CompilationOutcome)(f: (scala.tools.partest.nest.CompilationOutcome, List[java.io.File]) =&gt; scala.tools.partest.nest.CompilationOutcome)scala.tools.partest.nest.CompilationOutcome">foldLeft</a><span class="delimiter">(</span><a href="CompileManager.scala.html#50740" title="scala.tools.partest.nest.CompileSuccess.type">CompileSuccess</a>: <a href="CompileManager.scala.html#50739" title="scala.tools.partest.nest.CompilationOutcome">CompilationOutcome</a><span class="delimiter">)</span> <a href="../../../Tuple2.scala.html#62849" title="(_1: scala.tools.partest.nest.CompilationOutcome, _2: List[java.io.File])(scala.tools.partest.nest.CompilationOutcome, List[java.io.File])" class="delimiter">{</a>
        <span class="keyword">case</span> <span class="delimiter">(</span><a href="../../../Tuple2.scala.html#60635" title="scala.tools.partest.nest.CompilationOutcome" id="3377126">CompileSuccess</a>, <a href="../../../Tuple2.scala.html#60637" title="List[java.io.File]" id="1173502">files</a><span class="delimiter">)</span> =&gt; <a href="#1173355" title="(g: List[java.io.File])scala.tools.partest.nest.CompilationOutcome">compileGroup</a><a href="#3377128" title="(x: scala.tools.partest.nest.CompilationOutcome)scala.tools.partest.nest.CompilationOutcome" class="delimiter">(</a><a href="#1173502" title="List[java.io.File]">files</a><span class="delimiter">)</span>
        <span class="keyword">case</span> <span class="delimiter">(</span><a href="../../../Tuple2.scala.html#60635" title="scala.tools.partest.nest.CompilationOutcome" id="1173505">outcome</a>, <a href="../../../Tuple2.scala.html#60637" title="List[java.io.File]" id="3377125">_</a><span class="delimiter">)</span>            =&gt; <a href="#3377128" title="(x: scala.tools.partest.nest.CompilationOutcome)scala.tools.partest.nest.CompilationOutcome">outcome</a>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>

    <span class="keyword">def</span> <a title="(file: java.io.File, expectFailure: Boolean)(onSuccess: (java.io.File, java.io.File) =&gt; Boolean, onFail: (java.io.File, java.io.File) =&gt; Unit)(Boolean, scala.tools.partest.nest.LogContext)" id="1168895">runTestCommon</a><span class="delimiter">(</span><a title="java.io.File" id="1173533">file</a>: <span title="java.io.File">File</span>, <a title="Boolean" id="1173534">expectFailure</a>: <a href="../../../Boolean.scala.html#1425" title="Boolean">Boolean</a><span class="delimiter">)</span><span class="delimiter">(</span>
      <a title="(java.io.File, java.io.File) =&gt; Boolean" id="1173508">onSuccess</a>: <span class="delimiter">(</span>File, File<span class="delimiter">)</span> =&gt; Boolean,
      <a title="(java.io.File, java.io.File) =&gt; Unit" id="1173510">onFail</a>: <span class="delimiter">(</span>File, File<span class="delimiter">)</span> =&gt; Unit = <span class="delimiter">(</span><a title="java.io.File" id="1177520">_</a>, <a title="java.io.File" id="1177521">_</a><span class="delimiter">)</span> =&gt; <span title="Unit" class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span>: <a href="../../../Tuple2.scala.html#783" title="(Boolean, scala.tools.partest.nest.LogContext)" class="delimiter">(</a>Boolean, LogContext<span class="delimiter">)</span> =
    <span class="delimiter">{</span>
      <a href="#1168892" title="(file: java.io.File, script: (java.io.File, java.io.File) =&gt; Boolean)(Boolean, scala.tools.partest.nest.LogContext)">runInContext</a><span class="delimiter">(</span><a href="#1173533" title="java.io.File">file</a>, <span class="delimiter">(</span>logFile: <span title="java.io.File">File</span>, outDir: <span title="java.io.File">File</span><span class="delimiter">)</span> =&gt; <span class="delimiter">{</span>
        <span class="keyword">val</span> <a title="scala.tools.partest.nest.CompilationOutcome" id="1173517">outcome</a> = <span class="delimiter">(</span>
          <span title="scala.tools.partest.nest.CompilationOutcome" class="keyword">if</span> <span class="delimiter">(</span><a href="#1173533" title="java.io.File">file</a>.<span title="()Boolean">isDirectory</span><span class="delimiter">)</span> <a href="#1168894" title="(dir: java.io.File, logFile: java.io.File, outDir: java.io.File)scala.tools.partest.nest.CompilationOutcome">compileFilesIn</a><span class="delimiter">(</span><a href="#1173533" title="java.io.File">file</a>, <a href="#1173515" title="java.io.File">logFile</a>, <a href="#1173516" title="java.io.File">outDir</a><span class="delimiter">)</span>
          <span class="keyword">else</span> <a href="#1164355" title="=&gt; scala.tools.partest.nest.CompileManager">compileMgr</a>.<a href="CompileManager.scala.html#1161944" title="(outdir: Option[java.io.File], sources: List[java.io.File], kind: String, log: java.io.File)scala.tools.partest.nest.CompilationOutcome">attemptCompile</a><span class="delimiter">(</span><a href="../../../Option.scala.html#1585" title="None.type">None</a>, <a href="../../../collection/immutable/List.scala.html#62451" title="(xs: java.io.File*)List[java.io.File]">List</a><span class="delimiter">(</span><a href="#1173533" title="java.io.File">file</a><span class="delimiter">)</span>, <a href="#1164380" title="String">kind</a>, <a href="#1173515" title="java.io.File">logFile</a><span class="delimiter">)</span>
        <span class="delimiter">)</span>
        <span class="keyword">val</span> <a title="Boolean" id="1173518">result</a> = <span class="delimiter">(</span>
          <span title="Boolean" class="keyword">if</span> <span class="delimiter">(</span><a href="#1173534" title="Boolean">expectFailure</a><span class="delimiter">)</span> <a href="#1173517" title="scala.tools.partest.nest.CompilationOutcome">outcome</a>.<a href="CompileManager.scala.html#1160376" title="=&gt; Boolean">isNegative</a>
          <span class="keyword">else</span> <a href="#1173517" title="scala.tools.partest.nest.CompilationOutcome">outcome</a>.<a href="CompileManager.scala.html#1160375" title="=&gt; Boolean">isPositive</a>
        <span class="delimiter">)</span>

        <span title="Boolean" class="keyword">if</span> <span class="delimiter">(</span><a href="#1173518" title="Boolean">result</a><span class="delimiter">)</span> <a href="../../../Function2.scala.html#65848" title="(v1: java.io.File, v2: java.io.File)Boolean">onSuccess</a><span class="delimiter">(</span><a href="#1173515" title="java.io.File">logFile</a>, <a href="#1173516" title="java.io.File">outDir</a><span class="delimiter">)</span>
        <span class="keyword">else</span> <span class="delimiter">{</span> <a href="../../../Function2.scala.html#65848" title="(v1: java.io.File, v2: java.io.File)Unit">onFail</a><span class="delimiter">(</span><a href="#1173515" title="java.io.File">logFile</a>, <a href="#1173516" title="java.io.File">outDir</a><span class="delimiter">)</span> ; <span title="Boolean(false)" class="keyword">false</span> <span class="delimiter">}</span>
      <span class="delimiter">}</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>

    <span class="keyword">def</span> <a title="(file: java.io.File)(Boolean, scala.tools.partest.nest.LogContext)" id="1168896">runJvmTest</a><span class="delimiter">(</span><a title="java.io.File" id="1173530">file</a>: <span title="java.io.File">File</span><span class="delimiter">)</span>: <a href="../../../Tuple2.scala.html#783" title="(Boolean, scala.tools.partest.nest.LogContext)" class="delimiter">(</a>Boolean, LogContext<span class="delimiter">)</span> =
      <a href="#1164375" title="Runner.this.type">runTestCommon</a><a href="#1173510" title="(java.io.File, java.io.File) =&gt; Unit" id="1173540" class="delimiter">(</a><a href="#1173530" title="java.io.File" id="1173531">file</a>, expectFailure = <a title="Boolean" id="1173532" class="keyword">false</a><span class="delimiter">)</span><span class="delimiter">(</span><span class="delimiter">(</span><a title="java.io.File" id="1173536">logFile</a>, <a title="java.io.File" id="1173537">outDir</a><span class="delimiter">)</span> =&gt; <span class="delimiter">{</span>
        <span class="keyword">val</span> <a title="java.io.File" id="1173538">dir</a>      = <a href="#1173530" title="java.io.File">file</a>.<span title="()java.io.File">getParentFile</span>

        // adding codelib.jar to the classpath
        // codelib provides the possibility to override standard reify
        // this shields the massive amount of reification tests from changes in the API
        <a href="#1168885" title="(outDir: java.io.File, logFile: java.io.File, classpathPrefix: String, javaOpts: String)Boolean">execTest</a><span class="delimiter">(</span><a href="#1173537" title="java.io.File">outDir</a>, <a href="#1173536" title="java.io.File">logFile</a>, <a href="PathSettings.scala.html#50838" title="scala.tools.partest.nest.PathSettings.type">PathSettings</a>.<a href="PathSettings.scala.html#1150798" title="=&gt; scala.tools.nsc.io.File">srcCodeLib</a>.<a href="../../../reflect/io/Path.scala.html#530930" title="()String">toString</a><span class="delimiter">)</span> <a href="../../../Boolean.scala.html#57826" title="(x: Boolean)Boolean">&amp;&amp;</a> <span class="delimiter">{</span>
          // cannot replace paths here since this also inverts slashes
          // which affects a bunch of tests
          //fileManager.mapFile(logFile, replaceSlashes(dir, _))
          <a href="#1168891" title="(testFile: java.io.File, diff: String)Boolean">diffCheck</a><span class="delimiter">(</span><a href="#1173530" title="java.io.File">file</a>, <a href="#1168888" title="(dir: java.io.File, logFile: java.io.File)String">compareOutput</a><span class="delimiter">(</span><a href="#1173538" title="java.io.File">dir</a>, <a href="#1173536" title="java.io.File">logFile</a><span class="delimiter">)</span><span class="delimiter">)</span>
        <span class="delimiter">}</span>
      <span class="delimiter">}</span><span class="delimiter">)</span>

    // Apache Ant 1.6 or newer
    <span class="keyword">def</span> <a title="(args: Seq[String], output: java.io.File)Boolean" id="1168897">ant</a><span class="delimiter">(</span><a title="Seq[String]" id="1173541">args</a>: <a href="../../../collection/Seq.scala.html#4340" title="Seq[String]">Seq</a><span class="delimiter">[</span>String<span class="delimiter">]</span>, <a title="java.io.File" id="1173542">output</a>: <span title="java.io.File">File</span><span class="delimiter">)</span>: <a href="../../../Boolean.scala.html#1425" title="Boolean">Boolean</a> = <span class="delimiter">{</span>
      <span class="keyword">val</span> <a title="scala.reflect.io.Directory" id="1173543">antDir</a> = <a href="../../../reflect/io/Directory.scala.html#531519" title="(path: scala.reflect.io.Path)scala.reflect.io.Directory">Directory</a><span class="delimiter">(</span><a href="../../../util/Properties.scala.html#80164" title="(name: String, alt: String)String">envOrElse</a><a href="../../../reflect/io/Path.scala.html#531009" title="implicit scala.reflect.io.Path.string2path : (s: String)scala.reflect.io.Path" class="delimiter">(</a><span title="String(&quot;ANT_HOME&quot;)" class="string">&quot;ANT_HOME&quot;</span>, <span title="String(&quot;/opt/ant/&quot;)" class="string">&quot;/opt/ant/&quot;</span><span class="delimiter">)</span><span class="delimiter">)</span>
      <span class="keyword">val</span> <a title="scala.reflect.io.Directory" id="1173544">antLibDir</a> = <a href="../../../reflect/io/Directory.scala.html#531519" title="(path: scala.reflect.io.Path)scala.reflect.io.Directory">Directory</a><span class="delimiter">(</span><a href="#1173543" title="scala.reflect.io.Directory">antDir</a> <a href="../../../reflect/io/Path.scala.html#530880" title="(child: scala.reflect.io.Path)scala.reflect.io.Path">/</a> <a href="../../../reflect/io/Path.scala.html#531009" title="implicit scala.reflect.io.Path.string2path : (s: String)scala.reflect.io.Path" class="string">&quot;lib&quot;</a><span class="delimiter">)</span>
      <span class="keyword">val</span> <a title="String" id="1173545">antLauncherPath</a> = <a href="../../../reflect/io/File.scala.html#530996" title="(path: scala.reflect.io.Path)(implicit codec: scala.io.Codec)scala.reflect.io.File">SFile</a><a href="../../../io/Codec.scala.html#393359" title="=&gt; scala.io.Codec" class="delimiter">(</a><a href="#1173544" title="scala.reflect.io.Directory">antLibDir</a> <a href="../../../reflect/io/Path.scala.html#530880" title="(child: scala.reflect.io.Path)scala.reflect.io.Path">/</a> <a href="../../../reflect/io/Path.scala.html#531009" title="implicit scala.reflect.io.Path.string2path : (s: String)scala.reflect.io.Path" class="string">&quot;ant-launcher.jar&quot;</a><span class="delimiter">)</span>.<a href="../../../reflect/io/Path.scala.html#530886" title="=&gt; String">path</a>
      <span class="keyword">val</span> <a title="List[String]" id="1173546">antOptions</a> =
        <span title="List[String]" class="keyword">if</span> <span class="delimiter">(</span><a href="NestUI.scala.html#50828" title="scala.tools.partest.nest.NestUI.type">NestUI</a>.<a href="NestUI.scala.html#1147224" title="=&gt; Boolean">_verbose</a><span class="delimiter">)</span> <a href="../../../collection/immutable/List.scala.html#62451" title="(xs: String*)List[String]">List</a><span class="delimiter">(</span><span title="String(&quot;-verbose&quot;)" class="string">&quot;-verbose&quot;</span>, <span title="String(&quot;-noinput&quot;)" class="string">&quot;-noinput&quot;</span><span class="delimiter">)</span>
        <span class="keyword">else</span> <a href="../../../collection/immutable/List.scala.html#62451" title="(xs: String*)List[String]">List</a><span class="delimiter">(</span><span title="String(&quot;-noinput&quot;)" class="string">&quot;-noinput&quot;</span><span class="delimiter">)</span>
      <span class="keyword">val</span> <a title="Array[String]" id="1173547">cmd</a> = <a href="../PartestDefaults.scala.html#1143290" title="=&gt; String">javaCmd</a> <a href="../../../collection/SeqLike.scala.html#58850" title="(elem: String)(implicit bf: scala.collection.generic.CanBuildFrom[Array[String],String,Array[String]])Array[String]">+:</a> <span class="delimiter">(</span>
        <a href="../../../Predef.scala.html#7604" title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps">JAVA_OPTS</a>.<a href="../../../collection/immutable/StringLike.scala.html#59866" title="(separator: Char)Array[String]">split</a><a href="../../../Predef.scala.html#7555" title="(xs: Array[String])scala.collection.mutable.ArrayOps[String]" class="delimiter">(</a><span title="Char(' ')" class="char">' '</span><span class="delimiter">)</span>.<a href="../../../collection/TraversableLike.scala.html#58063" title="(f: String =&gt; String)(implicit bf: scala.collection.generic.CanBuildFrom[Array[String],String,Array[String]])Array[String]">map</a><a href="../../../Predef.scala.html#7555" title="(xs: Array[String])scala.collection.mutable.ArrayOps[String]" class="delimiter">(</a><a href="#1173974" title="String">_</a>.<span title="()String">trim</span><span class="delimiter">)</span>.<a href="../../../collection/TraversableLike.scala.html#58073" title="(p: String =&gt; Boolean)Array[String]">filter</a><a href="../../../Predef.scala.html#7555" title="(xs: Array[String])scala.collection.mutable.ArrayOps[String]" class="delimiter">(</a><a href="#1174132" title="String">_</a> <span title="(x$1: AnyRef)Boolean">!=</span> <span title="String(&quot;&quot;)" class="string">&quot;&quot;</span><span class="delimiter">)</span> <a href="../../../Predef.scala.html#7555" title="(xs: Array[String])scala.collection.mutable.ArrayOps[String]">++</a> <a href="../../../collection/generic/GenericCompanion.scala.html#59933" title="(elems: String*)Seq[String]">Seq</a><span class="delimiter">(</span>
          <span title="String(&quot;-classpath&quot;)" class="string">&quot;-classpath&quot;</span>,
          <a href="#1173545" title="String">antLauncherPath</a>,
          <span title="String(&quot;org.apache.tools.ant.launch.Launcher&quot;)" class="string">&quot;org.apache.tools.ant.launch.Launcher&quot;</span>
        <span class="delimiter">)</span> <a href="../../../Predef.scala.html#7555" title="(xs: Array[String])scala.collection.mutable.ArrayOps[String]">++</a> <a href="#1173546" title="List[String]">antOptions</a> <a href="../../../Predef.scala.html#7555" title="(xs: Array[String])scala.collection.mutable.ArrayOps[String]">++</a> <a href="#1173541" title="Seq[String]">args</a>
      <span class="delimiter">)</span>

      <a title="Boolean" id="1176138" class="keyword">try</a> <a href="#1164364" title="(args: Seq[String], outFile: java.io.File)Boolean">runCommand</a><span class="delimiter">(</span><a href="../../../LowPriorityImplicits.scala.html#7412" title="(xs: Array[String])scala.collection.mutable.WrappedArray[String]">cmd</a>, <a href="#1173542" title="java.io.File">output</a><span class="delimiter">)</span>
      <span class="keyword">catch</span> <a href="#1164372" title="(logFile: java.io.File, msg: String, value: Boolean)PartialFunction[Throwable,Boolean]">exHandler</a><a href="../../../PartialFunction.scala.html#58653" title="PartialFunction[Throwable,Boolean]" id="1176139" class="delimiter">(</a><a href="#1173542" title="java.io.File">output</a>, <span title="String(&quot;ant command \'&quot;)" class="string">&quot;ant command '&quot;</span> <span title="(x$1: Any)String">+</span> <a href="#1173547" title="Array[String]">cmd</a> <span title="(x$1: Any)String">+</span> <span title="String(&quot;\' failed:\n&quot;)" class="string">&quot;' failed:\n&quot;</span>, <span title="Boolean(false)" class="keyword">false</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>

    <span class="keyword">def</span> <a title="(file: java.io.File)(Boolean, scala.tools.partest.nest.LogContext)" id="1168898">runAntTest</a><span class="delimiter">(</span><a title="java.io.File" id="1176149">file</a>: <span title="java.io.File">File</span><span class="delimiter">)</span>: <a href="../../../Tuple2.scala.html#783" title="(Boolean, scala.tools.partest.nest.LogContext)" class="delimiter">(</a>Boolean, LogContext<span class="delimiter">)</span> = <span class="delimiter">{</span>
      <span class="keyword">val</span> <a href="#3377138" title="(x: (java.io.StringWriter, java.io.PrintWriter))(java.io.StringWriter, java.io.PrintWriter)" class="delimiter">(</a><a href="../../../Tuple2.scala.html#60635" title="java.io.StringWriter" id="1176151">swr</a>, <a href="../../../Tuple2.scala.html#60637" title="java.io.PrintWriter" id="1176152">wr</a><span class="delimiter">)</span> = <a href="#1168889" title="()(java.io.StringWriter, java.io.PrintWriter)">newTestWriters</a><a href="../../../Tuple2.scala.html#783" title="(java.io.StringWriter, java.io.PrintWriter) @unchecked" class="delimiter">(</a><span class="delimiter">)</span>
      <a href="#1164360" title="(file: java.io.File, printer: java.io.PrintWriter)Unit">printInfoStart</a><span class="delimiter">(</span><a href="#1176149" title="java.io.File">file</a>, <a href="#1176152" title="java.io.PrintWriter">wr</a><span class="delimiter">)</span>

      <a href="NestUI.scala.html#50828" title="scala.tools.partest.nest.NestUI.type">NestUI</a>.<a href="NestUI.scala.html#1147230" title="(msg: String)Unit">verbose</a><span class="delimiter">(</span><a href="../../../Predef.scala.html#7605" title="implicit scala.Predef.any2stringadd : (x: Any)scala.runtime.StringAdd" class="keyword">this</a><a href="../../../runtime/StringAdd.scala.html#60046" title="(other: String)String">+</a><span title="String(&quot; running test &quot;)" class="string">&quot; running test &quot;</span><span title="(x$1: Any)String">+</span><a href="#1168875" title="=&gt; String">fileBase</a><span class="delimiter">)</span>

      <span class="keyword">val</span> <a title="Boolean" id="1176153">succeeded</a> = <span class="keyword">try</span> <span class="delimiter">{</span>
        <span class="keyword">val</span> <a title="String" id="1176167">binary</a> = <span title="String(&quot;-Dbinary=&quot;)" class="string">&quot;-Dbinary=&quot;</span><span title="(x$1: Any)String">+</span><span class="delimiter">(</span>
          <span title="Any" class="keyword">if</span>      <span class="delimiter">(</span><a href="#1164381" title="=&gt; scala.tools.partest.nest.FileManager">fileManager</a>.<a href="FileManager.scala.html#1150596" title="=&gt; String">LATEST_LIB</a> <span title="(x$1: String)Boolean">endsWith</span> <span title="String(&quot;build/quick/classes/library&quot;)" class="string">&quot;build/quick/classes/library&quot;</span><span class="delimiter">)</span> <span title="String(&quot;quick&quot;)" class="string">&quot;quick&quot;</span>
          <span class="keyword">else</span> <span title="Any" class="keyword">if</span> <span class="delimiter">(</span><a href="#1164381" title="=&gt; scala.tools.partest.nest.FileManager">fileManager</a>.<a href="FileManager.scala.html#1150596" title="=&gt; String">LATEST_LIB</a> <span title="(x$1: String)Boolean">endsWith</span> <span title="String(&quot;build/pack/lib/scala-library.jar&quot;)" class="string">&quot;build/pack/lib/scala-library.jar&quot;</span><span class="delimiter">)</span> <span title="String(&quot;pack&quot;)" class="string">&quot;pack&quot;</span>
          <span class="keyword">else</span> <span title="Any" class="keyword">if</span> <span class="delimiter">(</span><a href="#1164381" title="=&gt; scala.tools.partest.nest.FileManager">fileManager</a>.<a href="FileManager.scala.html#1150596" title="=&gt; String">LATEST_LIB</a> <span title="(x$1: String)Boolean">endsWith</span> <span title="String(&quot;dists/latest/lib/scala-library.jar/&quot;)" class="string">&quot;dists/latest/lib/scala-library.jar/&quot;</span><span class="delimiter">)</span> <span title="String(&quot;latest&quot;)" class="string">&quot;latest&quot;</span>
          <span class="keyword">else</span> <span title="String(&quot;installed&quot;)" class="string">&quot;installed&quot;</span>
        <span class="delimiter">)</span>
        <span class="keyword">val</span> <a title="Array[String]" id="1176168">args</a> = <a href="../../../Array.scala.html#72260" title="(xs: String*)(implicit evidence$2: scala.reflect.ClassTag[String])Array[String]">Array</a><a href="../../../reflect/ClassTag.scala.html#81051" title="(runtimeClass1: Class[_])scala.reflect.ClassTag[String]" class="delimiter">(</a><a href="#1176167" title="String">binary</a>, <span title="String(&quot;-logfile&quot;)" class="string">&quot;-logfile&quot;</span>, <a href="../package.scala.html#55891" title="implicit scala.tools.partest.package.temporaryFile2Path : (x: java.io.File)scala.tools.nsc.io.Path">logFile</a>.<a href="../../../reflect/io/Path.scala.html#530886" title="=&gt; String">path</a>, <span title="String(&quot;-file&quot;)" class="string">&quot;-file&quot;</span>, <a href="../package.scala.html#55891" title="implicit scala.tools.partest.package.temporaryFile2Path : (x: java.io.File)scala.tools.nsc.io.Path">file</a>.<a href="../../../reflect/io/Path.scala.html#530886" title="=&gt; String">path</a><span class="delimiter">)</span>
        <a href="NestUI.scala.html#50828" title="scala.tools.partest.nest.NestUI.type">NestUI</a>.<a href="NestUI.scala.html#1147230" title="(msg: String)Unit">verbose</a><span class="delimiter">(</span><span title="String(&quot;ant &quot;)" class="string">&quot;ant &quot;</span><span title="(x$1: Any)String">+</span><a href="../../../Predef.scala.html#7555" title="(xs: Array[String])scala.collection.mutable.ArrayOps[String]">args</a>.<a href="../../../collection/TraversableOnce.scala.html#58283" title="(sep: String)String">mkString</a><span class="delimiter">(</span><span title="String(&quot; &quot;)" class="string">&quot; &quot;</span><span class="delimiter">)</span><span class="delimiter">)</span>
        <a href="#1168897" title="(args: Seq[String], output: java.io.File)Boolean">ant</a><span class="delimiter">(</span><a href="../../../LowPriorityImplicits.scala.html#7412" title="(xs: Array[String])scala.collection.mutable.WrappedArray[String]">args</a>, <a href="#1168877" title="=&gt; java.io.File">logFile</a><span class="delimiter">)</span> <a href="../../../Boolean.scala.html#57826" title="(x: Boolean)Boolean">&amp;&amp;</a> <a href="#1168891" title="(testFile: java.io.File, diff: String)Boolean">diffCheck</a><span class="delimiter">(</span><a href="#1176149" title="java.io.File">file</a>, <a href="#1168888" title="(dir: java.io.File, logFile: java.io.File)String">compareOutput</a><span class="delimiter">(</span><a href="#1176149" title="java.io.File">file</a>.<span title="()java.io.File">getParentFile</span>, <a href="#1168877" title="=&gt; java.io.File">logFile</a><span class="delimiter">)</span><span class="delimiter">)</span>
      <span class="delimiter">}</span>
      <span class="keyword">catch</span> <span class="delimiter">{</span> // *catch-all*
        <span class="keyword">case</span> <a title="Boolean" id="1176295">e</a>: <span title="Exception">Exception</span> =&gt;
          <a href="NestUI.scala.html#50828" title="scala.tools.partest.nest.NestUI.type">NestUI</a>.<a href="NestUI.scala.html#1147230" title="(msg: String)Unit">verbose</a><span class="delimiter">(</span><span title="String(&quot;caught &quot;)" class="string">&quot;caught &quot;</span><span title="(x$1: Any)String">+</span><a href="#1176295" title="Exception">e</a><span class="delimiter">)</span>
          <span title="Boolean(false)" class="keyword">false</span>
      <span class="delimiter">}</span>

      <a href="../../../Tuple2.scala.html#62849" title="(_1: Boolean, _2: scala.tools.partest.nest.LogContext)(Boolean, scala.tools.partest.nest.LogContext)" class="delimiter">(</a><a href="#1176153" title="Boolean">succeeded</a>, <a href="#1168356" title="(file: java.io.File, swr: java.io.StringWriter, wr: java.io.PrintWriter)scala.tools.partest.nest.LogContext">LogContext</a><span class="delimiter">(</span><a href="#1168877" title="=&gt; java.io.File">logFile</a>, <a href="#1176151" title="java.io.StringWriter">swr</a>, <a href="#1176152" title="java.io.PrintWriter">wr</a><span class="delimiter">)</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>

    <span class="keyword">def</span> <a title="(file: java.io.File)(Boolean, scala.tools.partest.nest.LogContext)" id="1168899">runSpecializedTest</a><span class="delimiter">(</span><a title="java.io.File" id="1176308">file</a>: <span title="java.io.File">File</span><span class="delimiter">)</span>: <a href="../../../Tuple2.scala.html#783" title="(Boolean, scala.tools.partest.nest.LogContext)" class="delimiter">(</a>Boolean, LogContext<span class="delimiter">)</span> =
      <a href="#1164375" title="Runner.this.type">runTestCommon</a><a href="#1173510" title="(java.io.File, java.io.File) =&gt; Unit" id="1176316" class="delimiter">(</a><a href="#1176308" title="java.io.File" id="1176309">file</a>, expectFailure = <a title="Boolean" id="1176310" class="keyword">false</a><span class="delimiter">)</span><span class="delimiter">(</span><span class="delimiter">(</span><a title="java.io.File" id="1176312">logFile</a>, <a title="java.io.File" id="1176313">outDir</a><span class="delimiter">)</span> =&gt; <span class="delimiter">{</span>
        <span class="keyword">val</span> <a title="java.io.File" id="1176314">dir</a>       = <a href="#1176308" title="java.io.File">file</a>.<span title="()java.io.File">getParentFile</span>

        // adding the instrumented library to the classpath
        <span class="delimiter">(</span> <a href="#1168885" title="(outDir: java.io.File, logFile: java.io.File, classpathPrefix: String, javaOpts: String)Boolean">execTest</a><span class="delimiter">(</span><a href="#1176313" title="java.io.File">outDir</a>, <a href="#1176312" title="java.io.File">logFile</a>, <a href="PathSettings.scala.html#50838" title="scala.tools.partest.nest.PathSettings.type">PathSettings</a>.<a href="PathSettings.scala.html#1150794" title="=&gt; scala.tools.nsc.io.File">srcSpecLib</a>.<a href="../../../reflect/io/Path.scala.html#530930" title="()String">toString</a><span class="delimiter">)</span> <a href="../../../Boolean.scala.html#57826" title="(x: Boolean)Boolean">&amp;&amp;</a>
          <a href="#1168891" title="(testFile: java.io.File, diff: String)Boolean">diffCheck</a><span class="delimiter">(</span><a href="#1176308" title="java.io.File">file</a>, <a href="#1168888" title="(dir: java.io.File, logFile: java.io.File)String">compareOutput</a><span class="delimiter">(</span><a href="#1176314" title="java.io.File">dir</a>, <a href="#1176312" title="java.io.File">logFile</a><span class="delimiter">)</span><span class="delimiter">)</span>
        <span class="delimiter">)</span>
      <span class="delimiter">}</span><span class="delimiter">)</span>

    <span class="keyword">def</span> <a title="(file: java.io.File)(Boolean, scala.tools.partest.nest.LogContext)" id="1168900">runInstrumentedTest</a><span class="delimiter">(</span><a title="java.io.File" id="1176317">file</a>: <span title="java.io.File">File</span><span class="delimiter">)</span>: <a href="../../../Tuple2.scala.html#783" title="(Boolean, scala.tools.partest.nest.LogContext)" class="delimiter">(</a>Boolean, LogContext<span class="delimiter">)</span> =
      <a href="#1164375" title="Runner.this.type">runTestCommon</a><a href="#1173510" title="(java.io.File, java.io.File) =&gt; Unit" id="1176329" class="delimiter">(</a><a href="#1176317" title="java.io.File" id="1176318">file</a>, expectFailure = <a title="Boolean" id="1176319" class="keyword">false</a><span class="delimiter">)</span><span class="delimiter">(</span><span class="delimiter">(</span><a title="java.io.File" id="1176321">logFile</a>, <a title="java.io.File" id="1176322">outDir</a><span class="delimiter">)</span> =&gt; <span class="delimiter">{</span>
        <span class="keyword">val</span> <a title="java.io.File" id="1176323">dir</a>       = <a href="#1176317" title="java.io.File">file</a>.<span title="()java.io.File">getParentFile</span>

        // adding the javagent option with path to instrumentation agent
        <a href="#1168972" title="String" id="1176327">execTest</a><span class="delimiter">(</span><a href="#1176322" title="java.io.File" id="1176324">outDir</a>, <a href="#1176321" title="java.io.File" id="1176325">logFile</a>, javaOpts = <span title="String(&quot;-javaagent:&quot;)" class="string">&quot;-javaagent:&quot;</span><a title="String" id="1176326">+</a><a href="PathSettings.scala.html#50838" title="scala.tools.partest.nest.PathSettings.type">PathSettings</a>.<a href="PathSettings.scala.html#1150800" title="=&gt; scala.tools.nsc.io.File">instrumentationAgentLib</a><span class="delimiter">)</span> <a href="../../../Boolean.scala.html#57826" title="(x: Boolean)Boolean">&amp;&amp;</a>
        <a href="#1168891" title="(testFile: java.io.File, diff: String)Boolean">diffCheck</a><span class="delimiter">(</span><a href="#1176317" title="java.io.File">file</a>, <a href="#1168888" title="(dir: java.io.File, logFile: java.io.File)String">compareOutput</a><span class="delimiter">(</span><a href="#1176323" title="java.io.File">dir</a>, <a href="#1176321" title="java.io.File">logFile</a><span class="delimiter">)</span><span class="delimiter">)</span>
      <span class="delimiter">}</span><span class="delimiter">)</span>

    <span class="keyword">def</span> <a title="(file: java.io.File)(Boolean, scala.tools.partest.nest.LogContext)" id="1168901">processSingleFile</a><span class="delimiter">(</span><a title="java.io.File" id="1176330">file</a>: <span title="java.io.File">File</span><span class="delimiter">)</span>: <a href="../../../Tuple2.scala.html#783" title="(Boolean, scala.tools.partest.nest.LogContext)" class="delimiter">(</a>Boolean, LogContext<span class="delimiter">)</span> = <a href="#1164380" title="String">kind</a> <span class="keyword">match</span> <span class="delimiter">{</span>
      <span class="keyword">case</span> <a href="#3377238" title="(Boolean, scala.tools.partest.nest.LogContext)" id="3377267" class="string">&quot;scalacheck&quot;</a> =&gt;
        <span class="keyword">val</span> <a title="(java.io.File, java.io.File) =&gt; Boolean" id="1176331">succFn</a>: <span class="delimiter">(</span>File, File<span class="delimiter">)</span> =&gt; Boolean = <span class="delimiter">{</span> <span class="delimiter">(</span><a title="java.io.File" id="1176333">logFile</a>, <a title="java.io.File" id="1176334">outDir</a><span class="delimiter">)</span> =&gt;
          <a href="NestUI.scala.html#50828" title="scala.tools.partest.nest.NestUI.type">NestUI</a>.<a href="NestUI.scala.html#1147230" title="(msg: String)Unit">verbose</a><span class="delimiter">(</span><span title="String(&quot;compilation of &quot;)" class="string">&quot;compilation of &quot;</span><span title="(x$1: Any)String">+</span><a href="#1176330" title="java.io.File">file</a><span title="(x$1: Any)String">+</span><span title="String(&quot; succeeded\n&quot;)" class="string">&quot; succeeded\n&quot;</span><span class="delimiter">)</span>

          <span class="keyword">val</span> <a title="java.net.URL" id="1176335">outURL</a>    = <a href="#1176334" title="java.io.File">outDir</a>.<span title="()java.io.File">getAbsoluteFile</span>.<span title="()java.net.URI">toURI</span>.<span title="()java.net.URL">toURL</span>
          <span class="keyword">val</span> <a title="java.io.PrintStream" id="1176336">logWriter</a> = <span title="(x$1: java.io.OutputStream, x$2: Boolean)java.io.PrintStream" class="keyword">new</span> <span title="java.io.PrintStream">PrintStream</span><span class="delimiter">(</span><span title="(x$1: java.io.File)java.io.FileOutputStream" class="keyword">new</span> <span title="java.io.FileOutputStream">FileOutputStream</span><span class="delimiter">(</span><a href="#1176333" title="java.io.File">logFile</a><span class="delimiter">)</span>, <span title="Boolean(true)" class="keyword">true</span><span class="delimiter">)</span>

          <a href="#50873" title="scala.tools.partest.nest.Output.type">Output</a>.<a href="#1168389" title="(newstream: java.io.PrintStream)(func: =&gt; Unit)Unit">withRedirected</a><span class="delimiter">(</span><a href="#1176336" title="java.io.PrintStream">logWriter</a><span class="delimiter">)</span> <span class="delimiter">{</span>
            // this classloader is test specific: its parent contains library classes and others
            <a href="../../nsc/util/ScalaClassLoader.scala.html#50234" title="scala.tools.nsc.util.ScalaClassLoader.type">ScalaClassLoader</a>.<a href="../../nsc/util/ScalaClassLoader.scala.html#594241" title="(urls: Seq[java.net.URL], parent: ClassLoader)scala.tools.nsc.util.ScalaClassLoader.URLClassLoader">fromURLs</a><span class="delimiter">(</span><a href="../../../collection/immutable/List.scala.html#62451" title="(xs: java.net.URL*)List[java.net.URL]">List</a><span class="delimiter">(</span><a href="#1176335" title="java.net.URL">outURL</a><span class="delimiter">)</span>, <a href="#1164382" title="scala.tools.partest.nest.TestRunParams">params</a>.<a href="DirectRunner.scala.html#1164189" title="=&gt; scala.tools.nsc.util.ScalaClassLoader">scalaCheckParentClassLoader</a><span class="delimiter">)</span>.<a href="../../nsc/util/ScalaClassLoader.scala.html#603081" title="(objectName: String, arguments: Seq[String])Unit">run</a><span class="delimiter">(</span><span title="String(&quot;Test&quot;)" class="string">&quot;Test&quot;</span>, <a href="../../../collection/immutable/List.scala.html#11188" title="scala.collection.immutable.Nil.type">Nil</a><span class="delimiter">)</span>
          <span class="delimiter">}</span>

          <a href="NestUI.scala.html#50828" title="scala.tools.partest.nest.NestUI.type">NestUI</a>.<a href="NestUI.scala.html#1147230" title="(msg: String)Unit">verbose</a><span class="delimiter">(</span><a href="../package.scala.html#55903" title="(f: java.io.File)String">file2String</a><span class="delimiter">(</span><a href="#1176333" title="java.io.File">logFile</a><span class="delimiter">)</span><span class="delimiter">)</span>
          // obviously this must be improved upon
          <span class="keyword">val</span> <a title="scala.collection.mutable.Buffer[String]" id="1176337">lines</a> = <a href="../../../reflect/io/File.scala.html#530996" title="(path: scala.reflect.io.Path)(implicit codec: scala.io.Codec)scala.reflect.io.File">SFile</a><a href="../../../io/Codec.scala.html#393359" title="=&gt; scala.io.Codec" class="delimiter">(</a><a href="../package.scala.html#55891" title="implicit scala.tools.partest.package.temporaryFile2Path : (x: java.io.File)scala.tools.nsc.io.Path">logFile</a><span class="delimiter">)</span>.<a href="../../../reflect/io/Streamable.scala.html#530979" title="()Iterator[String]">lines</a> <a href="../../../collection/Iterator.scala.html#66755" title="(f: String =&gt; String)Iterator[String]">map</a> <span class="delimiter">(</span><a href="#1176365" title="String">_</a>.<span title="()String">trim</span><span class="delimiter">)</span> <a href="../../../collection/Iterator.scala.html#66769" title="(p: String =&gt; Boolean)Iterator[String]">filterNot</a> <span class="delimiter">(</span><a href="#1176369" title="String">_</a> <span title="(x$1: AnyRef)Boolean">==</span> <span title="String(&quot;&quot;)" class="string">&quot;&quot;</span><span class="delimiter">)</span> <a href="../../../collection/TraversableOnce.scala.html#58267" title="scala.collection.mutable.Buffer[String]">toBuffer</a>;
          <a href="#1176337" title="scala.collection.mutable.Buffer[String]">lines</a>.<a href="../../../collection/IterableLike.scala.html#58565" title="(p: String =&gt; Boolean)Boolean">forall</a><span class="delimiter">(</span><a title="String" id="1176386">x</a> =&gt; <a href="../../../Boolean.scala.html#57822" title="=&gt; Boolean">!</a><a href="#1176386" title="String">x</a>.<span title="(x$1: String)Boolean">startsWith</span><span class="delimiter">(</span><span title="String(&quot;!&quot;)" class="string">&quot;!&quot;</span><span class="delimiter">)</span><span class="delimiter">)</span> <a href="../../../Boolean.scala.html#57825" title="(x: Boolean)Boolean">||</a> <span class="delimiter">{</span>
            <a href="NestUI.scala.html#50828" title="scala.tools.partest.nest.NestUI.type">NestUI</a>.<a href="NestUI.scala.html#1147221" title="(msg: String)Unit">normal</a><span class="delimiter">(</span><span title="String(&quot;ScalaCheck test failed. Output:\n&quot;)" class="string">&quot;ScalaCheck test failed. Output:\n&quot;</span><span class="delimiter">)</span>
            <a href="#1176337" title="scala.collection.mutable.Buffer[String]">lines</a> <a href="../../../collection/IterableLike.scala.html#58562" title="(f: String =&gt; Unit)Unit">foreach</a> <span class="delimiter">(</span><a title="String" id="1176407">x</a> =&gt; <a href="NestUI.scala.html#50828" title="scala.tools.partest.nest.NestUI.type">NestUI</a>.<a href="NestUI.scala.html#1147221" title="(msg: String)Unit">normal</a><span class="delimiter">(</span><a href="#1176407" title="String">x</a> <span title="(x$1: Any)String">+</span> <span title="String(&quot;\n&quot;)" class="string">&quot;\n&quot;</span><span class="delimiter">)</span><span class="delimiter">)</span>
            <span title="Boolean(false)" class="keyword">false</span>
          <span class="delimiter">}</span>
        <span class="delimiter">}</span>
        <a href="#1168895" title="(file: java.io.File, expectFailure: Boolean)(onSuccess: (java.io.File, java.io.File) =&gt; Boolean, onFail: (java.io.File, java.io.File) =&gt; Unit)(Boolean, scala.tools.partest.nest.LogContext)">runTestCommon</a><span class="delimiter">(</span><a href="#1176330" title="java.io.File">file</a>, expectFailure = <span title="Boolean(false)" class="keyword">false</span><span class="delimiter">)</span><span class="delimiter">(</span>
          <a href="#1176331" title="(java.io.File, java.io.File) =&gt; Boolean">succFn</a>,
          <span class="delimiter">(</span><a title="java.io.File" id="1176412">logFile</a>, <a title="java.io.File" id="1176413">outDir</a><span class="delimiter">)</span> =&gt; <a href="#1164370" title="(logFile: java.io.File)Unit">outputLogFile</a><span class="delimiter">(</span><a href="#1176412" title="java.io.File">logFile</a><span class="delimiter">)</span>
        <span class="delimiter">)</span>

      <span class="keyword">case</span> <a href="#3377238" title="(Boolean, scala.tools.partest.nest.LogContext)" id="3377268" class="string">&quot;pos&quot;</a> =&gt;
        <a href="#1168895" title="(file: java.io.File, expectFailure: Boolean)(onSuccess: (java.io.File, java.io.File) =&gt; Boolean, onFail: (java.io.File, java.io.File) =&gt; Unit)(Boolean, scala.tools.partest.nest.LogContext)">runTestCommon</a><span class="delimiter">(</span><a href="#1176330" title="java.io.File">file</a>, expectFailure = <span title="Boolean(false)" class="keyword">false</span><span class="delimiter">)</span><a href="#3377282" title="(x: (Boolean, scala.tools.partest.nest.LogContext))(Boolean, scala.tools.partest.nest.LogContext)" class="delimiter">(</a>
          <span class="delimiter">(</span><a title="java.io.File" id="1176415">logFile</a>, <a title="java.io.File" id="1176416">outDir</a><span class="delimiter">)</span> =&gt; <span title="Boolean(true)" class="keyword">true</span>,
          <span class="delimiter">(</span><a title="java.io.File" id="1176418">_</a>, <a title="java.io.File" id="1176419">_</a><span class="delimiter">)</span> =&gt; <span title="Unit" class="delimiter">(</span><span class="delimiter">)</span>
        <span class="delimiter">)</span>

      <span class="keyword">case</span> <a href="#3377238" title="(Boolean, scala.tools.partest.nest.LogContext)" id="3377269" class="string">&quot;neg&quot;</a> =&gt;
        <a href="#1164375" title="Runner.this.type">runTestCommon</a><a href="#1173510" title="(java.io.File, java.io.File) =&gt; Unit" id="1176429" class="delimiter">(</a><a href="#1176330" title="java.io.File" id="1176420">file</a>, expectFailure = <a title="Boolean" id="1176421" class="keyword">true</a><span class="delimiter">)</span><a href="#3377282" title="(x: (Boolean, scala.tools.partest.nest.LogContext))(Boolean, scala.tools.partest.nest.LogContext)" class="delimiter">(</a><span class="delimiter">(</span><a title="java.io.File" id="1176423">logFile</a>, <a title="java.io.File" id="1176424">outDir</a><span class="delimiter">)</span> =&gt; <span class="delimiter">{</span>
          // compare log file to check file
          <span class="keyword">val</span> <a title="java.io.File" id="1176425">dir</a>      = <a href="#1176330" title="java.io.File">file</a>.<span title="()java.io.File">getParentFile</span>

          // diff is contents of logFile
          <a href="#1164381" title="=&gt; scala.tools.partest.nest.FileManager">fileManager</a>.<a href="FileManager.scala.html#1150639" title="(file: java.io.File, replace: String =&gt; String)Unit">mapFile</a><span class="delimiter">(</span><a href="#1176423" title="java.io.File">logFile</a>, <a href="#1164358" title="(dir: java.io.File, s: String)String">replaceSlashes</a><span class="delimiter">(</span><a href="#1176425" title="java.io.File">dir</a>, <a href="#1176427" title="String">_</a><span class="delimiter">)</span><span class="delimiter">)</span>
          <a href="#1168891" title="(testFile: java.io.File, diff: String)Boolean">diffCheck</a><span class="delimiter">(</span><a href="#1176330" title="java.io.File">file</a>, <a href="#1168888" title="(dir: java.io.File, logFile: java.io.File)String">compareOutput</a><span class="delimiter">(</span><a href="#1176425" title="java.io.File">dir</a>, <a href="#1176423" title="java.io.File">logFile</a><span class="delimiter">)</span><span class="delimiter">)</span>
        <span class="delimiter">}</span><span class="delimiter">)</span>

      <span class="keyword">case</span> <a href="#3377238" title="(Boolean, scala.tools.partest.nest.LogContext)" id="3377270" class="string">&quot;run&quot;</a> | <a href="#3377238" title="Boolean" id="3377271" class="string">&quot;jvm&quot;</a> =&gt;
        <a href="#1168896" title="(file: java.io.File)(Boolean, scala.tools.partest.nest.LogContext)">runJvmTest</a><a href="#3377282" title="(x: (Boolean, scala.tools.partest.nest.LogContext))(Boolean, scala.tools.partest.nest.LogContext)" class="delimiter">(</a><a href="#1176330" title="java.io.File">file</a><span class="delimiter">)</span>

      <span class="keyword">case</span> <a href="#3377238" title="(Boolean, scala.tools.partest.nest.LogContext)" id="3377272" class="string">&quot;specialized&quot;</a> =&gt;
        <a href="#1168899" title="(file: java.io.File)(Boolean, scala.tools.partest.nest.LogContext)">runSpecializedTest</a><a href="#3377282" title="(x: (Boolean, scala.tools.partest.nest.LogContext))(Boolean, scala.tools.partest.nest.LogContext)" class="delimiter">(</a><a href="#1176330" title="java.io.File">file</a><span class="delimiter">)</span>

      <span class="keyword">case</span> <a href="#3377238" title="(Boolean, scala.tools.partest.nest.LogContext)" id="3377273" class="string">&quot;instrumented&quot;</a> =&gt;
        <a href="#1168900" title="(file: java.io.File)(Boolean, scala.tools.partest.nest.LogContext)">runInstrumentedTest</a><a href="#3377282" title="(x: (Boolean, scala.tools.partest.nest.LogContext))(Boolean, scala.tools.partest.nest.LogContext)" class="delimiter">(</a><a href="#1176330" title="java.io.File">file</a><span class="delimiter">)</span>

      <span class="keyword">case</span> <a href="#3377238" title="(Boolean, scala.tools.partest.nest.LogContext)" id="3377274" class="string">&quot;presentation&quot;</a> =&gt;
        <a href="#1168896" title="(file: java.io.File)(Boolean, scala.tools.partest.nest.LogContext)">runJvmTest</a><a href="#3377282" title="(x: (Boolean, scala.tools.partest.nest.LogContext))(Boolean, scala.tools.partest.nest.LogContext)" class="delimiter">(</a><a href="#1176330" title="java.io.File">file</a><span class="delimiter">)</span> // for the moment, it's exactly the same as for a run test

      <span class="keyword">case</span> <a href="#3377238" title="(Boolean, scala.tools.partest.nest.LogContext)" id="3377275" class="string">&quot;ant&quot;</a> =&gt;
        <a href="#1168898" title="(file: java.io.File)(Boolean, scala.tools.partest.nest.LogContext)">runAntTest</a><a href="#3377282" title="(x: (Boolean, scala.tools.partest.nest.LogContext))(Boolean, scala.tools.partest.nest.LogContext)" class="delimiter">(</a><a href="#1176330" title="java.io.File">file</a><span class="delimiter">)</span>

      <span class="keyword">case</span> <a href="#3377238" title="(Boolean, scala.tools.partest.nest.LogContext)" id="3377276" class="string">&quot;buildmanager&quot;</a> =&gt;
        <span class="keyword">val</span> <a href="#3377144" title="(x: (java.io.StringWriter, java.io.PrintWriter))(java.io.StringWriter, java.io.PrintWriter)" class="delimiter">(</a><a href="../../../Tuple2.scala.html#60635" title="java.io.StringWriter" id="1176431">swr</a>, <a href="../../../Tuple2.scala.html#60637" title="java.io.PrintWriter" id="1176432">wr</a><span class="delimiter">)</span> = <a href="#1168889" title="()(java.io.StringWriter, java.io.PrintWriter)">newTestWriters</a><a href="../../../Tuple2.scala.html#783" title="(java.io.StringWriter, java.io.PrintWriter) @unchecked" class="delimiter">(</a><span class="delimiter">)</span>
        <a href="#1164360" title="(file: java.io.File, printer: java.io.PrintWriter)Unit">printInfoStart</a><span class="delimiter">(</span><a href="#1176330" title="java.io.File">file</a>, <a href="#1176432" title="java.io.PrintWriter">wr</a><span class="delimiter">)</span>
        <span class="keyword">val</span> <a href="#3377150" title="(x: (java.io.File, java.io.File, java.io.File))(java.io.File, java.io.File, java.io.File)" class="delimiter">(</a><a href="../../../Tuple3.scala.html#60576" title="java.io.File" id="1176434">outDir</a>, <a href="../../../Tuple3.scala.html#60578" title="java.io.File" id="1176435">testFile</a>, <a href="../../../Tuple3.scala.html#60580" title="java.io.File" id="1176436">changesDir</a><span class="delimiter">)</span> = <span class="delimiter">{</span>
          <a href="#3377148" title="(java.io.File, java.io.File, java.io.File)" class="keyword">if</a> <span class="delimiter">(</span><a href="../../../Boolean.scala.html#57822" title="=&gt; Boolean">!</a><a href="#1176330" title="java.io.File">file</a>.<span title="()Boolean">isDirectory</span><span class="delimiter">)</span>
            <a href="../../../Tuple3.scala.html#63169" title="(_1: Null, _2: Null, _3: Null)(Null, Null, Null)" class="delimiter">(</a><span title="Null(null)" class="keyword">null</span>, <span title="Null(null)" class="keyword">null</span>, <span title="Null(null)" class="keyword">null</span><span class="delimiter">)</span>
          <span class="keyword">else</span> <span class="delimiter">{</span>
            <a href="NestUI.scala.html#50828" title="scala.tools.partest.nest.NestUI.type">NestUI</a>.<a href="NestUI.scala.html#1147230" title="(msg: String)Unit">verbose</a><span class="delimiter">(</span><a href="../../../Predef.scala.html#7605" title="implicit scala.Predef.any2stringadd : (x: Any)scala.runtime.StringAdd" class="keyword">this</a><a href="../../../runtime/StringAdd.scala.html#60046" title="(other: String)String">+</a><span title="String(&quot; running test &quot;)" class="string">&quot; running test &quot;</span><span title="(x$1: Any)String">+</span><a href="#1168875" title="=&gt; String">fileBase</a><span class="delimiter">)</span>
            <span class="keyword">val</span> <a title="java.io.File" id="1176468">outDir</a> = <a href="#1168884" title="()java.io.File">createOutputDir</a><span class="delimiter">(</span><span class="delimiter">)</span>
            <span class="keyword">val</span> <a title="java.io.File" id="1176469">testFile</a> = <span title="(x$1: java.io.File, x$2: String)java.io.File" class="keyword">new</span> <span title="java.io.File">File</span><span class="delimiter">(</span><a href="#1176330" title="java.io.File">file</a>, <a href="#1168875" title="=&gt; String">fileBase</a> <span title="(x$1: Any)String">+</span> <span title="String(&quot;.test&quot;)" class="string">&quot;.test&quot;</span><span class="delimiter">)</span>
            <span class="keyword">val</span> <a title="java.io.File" id="1176470">changesDir</a> = <span title="(x$1: java.io.File, x$2: String)java.io.File" class="keyword">new</span> <span title="java.io.File">File</span><span class="delimiter">(</span><a href="#1176330" title="java.io.File">file</a>, <a href="#1168875" title="=&gt; String">fileBase</a> <span title="(x$1: Any)String">+</span> <span title="String(&quot;.changes&quot;)" class="string">&quot;.changes&quot;</span><span class="delimiter">)</span>

            <span title="(java.io.File, java.io.File, java.io.File)" class="keyword">if</span> <span class="delimiter">(</span><a href="#1176470" title="java.io.File">changesDir</a>.<span title="()Boolean">isFile</span> <a href="../../../Boolean.scala.html#57825" title="(x: Boolean)Boolean">||</a> <a href="../../../Boolean.scala.html#57822" title="=&gt; Boolean">!</a><a href="#1176469" title="java.io.File">testFile</a>.<span title="()Boolean">isFile</span><span class="delimiter">)</span> <span class="delimiter">{</span>
              // if changes exists then it has to be a dir
              <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="../../../Boolean.scala.html#57822" title="=&gt; Boolean">!</a><a href="#1176469" title="java.io.File">testFile</a>.<span title="()Boolean">isFile</span><span class="delimiter">)</span> <a href="NestUI.scala.html#50828" title="scala.tools.partest.nest.NestUI.type">NestUI</a>.<a href="NestUI.scala.html#1147230" title="(msg: String)Unit">verbose</a><span class="delimiter">(</span><span title="String(&quot;invalid build manager test file&quot;)" class="string">&quot;invalid build manager test file&quot;</span><span class="delimiter">)</span>
              <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#1176470" title="java.io.File">changesDir</a>.<span title="()Boolean">isFile</span><span class="delimiter">)</span> <a href="NestUI.scala.html#50828" title="scala.tools.partest.nest.NestUI.type">NestUI</a>.<a href="NestUI.scala.html#1147230" title="(msg: String)Unit">verbose</a><span class="delimiter">(</span><span title="String(&quot;invalid build manager changes directory&quot;)" class="string">&quot;invalid build manager changes directory&quot;</span><span class="delimiter">)</span>
              <a href="../../../Tuple3.scala.html#63169" title="(_1: Null, _2: Null, _3: Null)(Null, Null, Null)" class="delimiter">(</a><span title="Null(null)" class="keyword">null</span>, <span title="Null(null)" class="keyword">null</span>, <span title="Null(null)" class="keyword">null</span><span class="delimiter">)</span>
            <span class="delimiter">}</span>
            <span class="keyword">else</span> <span class="delimiter">{</span>
              <a href="#1164378" title="(testDir: java.io.File, destDir: java.io.File)Unit">copyTestFiles</a><span class="delimiter">(</span><a href="#1176330" title="java.io.File">file</a>, <a href="#1176468" title="java.io.File">outDir</a><span class="delimiter">)</span>
              <a href="NestUI.scala.html#50828" title="scala.tools.partest.nest.NestUI.type">NestUI</a>.<a href="NestUI.scala.html#1147230" title="(msg: String)Unit">verbose</a><span class="delimiter">(</span><span title="String(&quot;outDir:  &quot;)" class="string">&quot;outDir:  &quot;</span><span title="(x$1: Any)String">+</span><a href="#1176468" title="java.io.File">outDir</a><span class="delimiter">)</span>
              <a href="NestUI.scala.html#50828" title="scala.tools.partest.nest.NestUI.type">NestUI</a>.<a href="NestUI.scala.html#1147230" title="(msg: String)Unit">verbose</a><span class="delimiter">(</span><span title="String(&quot;logFile: &quot;)" class="string">&quot;logFile: &quot;</span><span title="(x$1: Any)String">+</span><a href="#1168877" title="=&gt; java.io.File">logFile</a><span class="delimiter">)</span>
              <a href="../../../Tuple3.scala.html#63169" title="(_1: java.io.File, _2: java.io.File, _3: java.io.File)(java.io.File, java.io.File, java.io.File)" class="delimiter">(</a><a href="#1176468" title="java.io.File">outDir</a>, <a href="#1176469" title="java.io.File">testFile</a>, <a href="#1176470" title="java.io.File">changesDir</a><span class="delimiter">)</span>
            <span class="delimiter">}</span>
          <span class="delimiter">}</span>
        <span class="delimiter">}</span>
        <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#1176434" title="java.io.File">outDir</a> <span title="(x$1: AnyRef)Boolean">==</span> <span title="Null(null)" class="keyword">null</span><span class="delimiter">)</span>
          <span title="Nothing" class="keyword">return</span> <a href="../../../Tuple2.scala.html#62849" title="(_1: Boolean, _2: scala.tools.partest.nest.LogContext)(Boolean, scala.tools.partest.nest.LogContext)" class="delimiter">(</a><span title="Boolean(false)" class="keyword">false</span>, <a href="#1168357" title="(file: java.io.File)scala.tools.partest.nest.LogContext">LogContext</a><span class="delimiter">(</span><a href="#1168877" title="=&gt; java.io.File">logFile</a><span class="delimiter">)</span><span class="delimiter">)</span>

        // Pre-conditions satisfied
        <span class="keyword">val</span> <a title="String" id="1176437">sourcepath</a> = <a href="#1176434" title="java.io.File">outDir</a>.<span title="()String">getAbsolutePath</span><span title="(x$1: Any)String">+</span><span title="java.io.File.type">File</span>.<span title="String">separator</span>

        // configure input/output files
        <span class="keyword">val</span> <a title="java.io.PrintStream" id="1176438">logWriter</a> = <span title="(x$1: java.io.OutputStream, x$2: Boolean)java.io.PrintStream" class="keyword">new</span> <span title="java.io.PrintStream">PrintStream</span><span class="delimiter">(</span><span title="(x$1: java.io.File)java.io.FileOutputStream" class="keyword">new</span> <span title="java.io.FileOutputStream">FileOutputStream</span><span class="delimiter">(</span><a href="#1168877" title="=&gt; java.io.File">logFile</a><span class="delimiter">)</span>, <span title="Boolean(true)" class="keyword">true</span><span class="delimiter">)</span>
        <span class="keyword">val</span> <a title="java.io.BufferedReader" id="1176439">testReader</a> = <span title="(x$1: java.io.Reader)java.io.BufferedReader" class="keyword">new</span> <span title="java.io.BufferedReader">BufferedReader</span><span class="delimiter">(</span><span title="(x$1: java.io.File)java.io.FileReader" class="keyword">new</span> <span title="java.io.FileReader">FileReader</span><span class="delimiter">(</span><a href="#1176435" title="java.io.File">testFile</a><span class="delimiter">)</span><span class="delimiter">)</span>
        <span class="keyword">val</span> <a title="java.io.PrintWriter" id="1176440">logConsoleWriter</a> = <span title="(x$1: java.io.OutputStream, x$2: Boolean)java.io.PrintWriter" class="keyword">new</span> <span title="java.io.PrintWriter">PrintWriter</span><span class="delimiter">(</span><a href="#1176438" title="java.io.PrintStream">logWriter</a>, <span title="Boolean(true)" class="keyword">true</span><span class="delimiter">)</span>

        // create proper settings for the compiler
        <span class="keyword">val</span> <a title="scala.tools.nsc.Settings" id="1176441">settings</a> = <span title="scala.tools.nsc.Settings" class="keyword">new</span> <a href="../../nsc/Settings.scala.html#27643" title="scala.tools.nsc.Settings">Settings</a><span class="delimiter">(</span><a href="#1164359" title="(msg: String)Unit">workerError</a><span class="delimiter">)</span>
        <a href="#1176441" title="scala.tools.nsc.Settings">settings</a>.<a href="../../nsc/settings/ScalaSettings.scala.html#540035" title="=&gt; settings.OutputSetting">outdir</a>.<a href="../../nsc/settings/MutableSettings.scala.html#593252" title="(str: String)Unit">value</a> = <a href="#1176434" title="java.io.File">outDir</a>.<span title="()java.io.File">getAbsoluteFile</span>.<span title="()String">getAbsolutePath</span>
        <a href="#1176441" title="scala.tools.nsc.Settings">settings</a>.<a href="../../nsc/settings/StandardScalaSettings.scala.html#540197" title="=&gt; settings.PathSetting">sourcepath</a>.<a href="../../../reflect/internal/settings/MutableSettings.scala.html#423753" title="(arg: settings.sourcepath.T)Unit">value</a> = <a href="#1176437" title="String">sourcepath</a>
        <a href="#1176441" title="scala.tools.nsc.Settings">settings</a>.<a href="../../nsc/settings/ScalaSettings.scala.html#539943" title="=&gt; settings.PathSetting">classpath</a>.<a href="../../../reflect/internal/settings/MutableSettings.scala.html#423753" title="(arg: settings.classpath.T)Unit">value</a> = <a href="#1164381" title="=&gt; scala.tools.partest.nest.FileManager">fileManager</a>.<a href="FileManager.scala.html#1150594" title="=&gt; String">CLASSPATH</a>
        <a href="#1176441" title="scala.tools.nsc.Settings">settings</a>.<a href="../../nsc/settings/ScalaSettings.scala.html#540134" title="=&gt; settings.BooleanSetting">Ybuildmanagerdebug</a>.<a href="../../../reflect/internal/settings/MutableSettings.scala.html#423753" title="(arg: settings.Ybuildmanagerdebug.T)Unit">value</a> = <span title="Boolean(true)" class="keyword">true</span>

        // simulate Build Manager loop
        <span class="keyword">val</span> <a title="String" id="1176442">prompt</a> = <span title="String(&quot;builder &gt; &quot;)" class="string">&quot;builder &gt; &quot;</span>
        <span class="keyword">val</span> <a title="scala.tools.nsc.reporters.ConsoleReporter" id="1176443">reporter</a> = <span title="scala.tools.nsc.reporters.ConsoleReporter" class="keyword">new</span> <a href="../../nsc/reporters/ConsoleReporter.scala.html#41214" title="scala.tools.nsc.reporters.ConsoleReporter">ConsoleReporter</a><span class="delimiter">(</span><a href="#1176441" title="scala.tools.nsc.Settings">settings</a>, scala.<a href="../../../Console.scala.html#136" title="Console.type">Console</a>.<a href="../../../Console.scala.html#63286" title="=&gt; java.io.BufferedReader">in</a>, <a href="#1176440" title="java.io.PrintWriter">logConsoleWriter</a><span class="delimiter">)</span>
        <span class="keyword">val</span> <a title="scala.tools.nsc.interactive.BuildManager" id="1176444">bM</a>: <a href="../../nsc/interactive/BuildManager.scala.html#35727" title="scala.tools.nsc.interactive.BuildManager">BuildManager</a> =
            <a href="#1176565" title="scala.tools.nsc.interactive.RefinedBuildManager" class="keyword">new</a> <a href="../../nsc/interactive/RefinedBuildManager.scala.html#35871" title="anonymous class $anon extends scala.tools.nsc.interactive.RefinedBuildManager" id="1176565">RefinedBuildManager</a><span class="delimiter">(</span><a href="#1176441" title="scala.tools.nsc.Settings">settings</a><span class="delimiter">)</span> <span class="delimiter">{</span>
              <span class="keyword">override</span> <span class="keyword">protected</span> <span class="keyword">def</span> <a title="(settings: scala.tools.nsc.Settings)this.BuilderGlobal" id="1176567">newCompiler</a><span class="delimiter">(</span><a title="scala.tools.nsc.Settings" id="1176569">settings</a>: <a href="../../nsc/Settings.scala.html#27643" title="scala.tools.nsc.Settings">Settings</a><span class="delimiter">)</span> =
                  <span title="this.BuilderGlobal" class="keyword">new</span> <a href="../../nsc/interactive/RefinedBuildManager.scala.html#634106" title="this.BuilderGlobal">BuilderGlobal</a><span class="delimiter">(</span><a href="#1176569" title="scala.tools.nsc.Settings">settings</a>, <a href="#1176443" title="scala.tools.nsc.reporters.ConsoleReporter">reporter</a><span class="delimiter">)</span>
            <span class="delimiter">}</span>

        <span class="keyword">def</span> <a title="(line: String)Boolean" id="1176445">testCompile</a><span class="delimiter">(</span><a title="String" id="1176573">line</a>: <span title="String">String</span><span class="delimiter">)</span>: <a href="../../../Boolean.scala.html#1425" title="Boolean">Boolean</a> = <span class="delimiter">{</span>
          <a href="NestUI.scala.html#50828" title="scala.tools.partest.nest.NestUI.type">NestUI</a>.<a href="NestUI.scala.html#1147230" title="(msg: String)Unit">verbose</a><span class="delimiter">(</span><span title="String(&quot;compiling &quot;)" class="string">&quot;compiling &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#1176573" title="String">line</a><span class="delimiter">)</span>
          <span class="keyword">val</span> <a title="List[String]" id="1176574">args</a> = <span class="delimiter">(</span><a href="../../../Predef.scala.html#7604" title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps">line</a> <a href="../../../Predef.scala.html#7555" title="(xs: Array[String])scala.collection.mutable.ArrayOps[String]">split</a> <span title="Char(' ')" class="char">' '</span><span class="delimiter">)</span>.<a href="../../../collection/TraversableOnce.scala.html#58263" title="=&gt; List[String]">toList</a>
          <span class="keyword">val</span> <a title="scala.tools.nsc.CompilerCommand" id="1176575">command</a> = <span title="scala.tools.nsc.CompilerCommand" class="keyword">new</span> <a href="../../nsc/CompilerCommand.scala.html#27796" title="scala.tools.nsc.CompilerCommand">CompilerCommand</a><span class="delimiter">(</span><a href="#1176574" title="List[String]">args</a>, <a href="#1176441" title="scala.tools.nsc.Settings">settings</a><span class="delimiter">)</span>
          <a href="#1176575" title="scala.tools.nsc.CompilerCommand">command</a>.<a href="../../nsc/CompilerCommand.scala.html#600804" title="=&gt; Boolean">ok</a> <a href="../../../Boolean.scala.html#57826" title="(x: Boolean)Boolean">&amp;&amp;</a> <span class="delimiter">{</span>
            <a href="#1176444" title="scala.tools.nsc.interactive.BuildManager">bM</a>.<a href="../../nsc/interactive/BuildManager.scala.html#634033" title="(added: scala.collection.Set[scala.tools.nsc.io.AbstractFile], removed: scala.collection.Set[scala.tools.nsc.io.AbstractFile])Unit">update</a><span class="delimiter">(</span><a href="#1164377" title="(pre: String, fs: List[String])Set[tools.nsc.io.AbstractFile]">filesToSet</a><span class="delimiter">(</span><a href="#1176441" title="scala.tools.nsc.Settings">settings</a>.<a href="../../nsc/settings/StandardScalaSettings.scala.html#540197" title="=&gt; settings.PathSetting">sourcepath</a>.<a href="../../nsc/settings/MutableSettings.scala.html#593180" title="=&gt; String">value</a>, <a href="#1176575" title="scala.tools.nsc.CompilerCommand">command</a>.<a href="../../nsc/CompilerCommand.scala.html#600805" title="=&gt; List[String]">files</a><span class="delimiter">)</span>, <a href="../../../Predef.scala.html#7446" title="=&gt; scala.collection.immutable.Set.type">Set</a>.<a href="../../../collection/immutable/Set.scala.html#60808" title="scala.collection.immutable.Set[scala.tools.nsc.io.AbstractFile]">empty</a><span class="delimiter">)</span>
            <a href="../../../Boolean.scala.html#57822" title="=&gt; Boolean">!</a><a href="#1176443" title="scala.tools.nsc.reporters.ConsoleReporter">reporter</a>.<a href="../../nsc/reporters/Reporter.scala.html#539679" title="=&gt; Boolean">hasErrors</a>
          <span class="delimiter">}</span>
        <span class="delimiter">}</span>

        <span class="keyword">val</span> <a title="String =&gt; Boolean" id="1176446">updateFiles</a> = <span class="delimiter">(</span>line: <span title="String">String</span><span class="delimiter">)</span> =&gt; <span class="delimiter">{</span>
          <a href="NestUI.scala.html#50828" title="scala.tools.partest.nest.NestUI.type">NestUI</a>.<a href="NestUI.scala.html#1147230" title="(msg: String)Unit">verbose</a><span class="delimiter">(</span><span title="String(&quot;updating &quot;)" class="string">&quot;updating &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#1176669" title="String">line</a><span class="delimiter">)</span>
          <span class="delimiter">(</span><a href="../../../Predef.scala.html#7604" title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps">line</a> <a href="../../../Predef.scala.html#7555" title="(xs: Array[String])scala.collection.mutable.ArrayOps[String]">split</a> <span title="Char(' ')" class="char">' '</span><span class="delimiter">)</span>.<a href="../../../collection/TraversableOnce.scala.html#58263" title="=&gt; List[String]">toList</a> <a href="../../../collection/LinearSeqOptimized.scala.html#86378" title="(p: String =&gt; Boolean)Boolean">forall</a> <span class="delimiter">(</span><a title="String" id="1176761">u</a> =&gt;
            <span class="delimiter">(</span><a href="#1176761" title="String">u</a> <a href="../../../Predef.scala.html#7555" title="(xs: Array[String])scala.collection.mutable.ArrayOps[String]">split</a> <span title="String(&quot;=&gt;&quot;)" class="string">&quot;=&gt;&quot;</span><span class="delimiter">)</span>.<a href="../../../collection/TraversableOnce.scala.html#58263" title="=&gt; List[String]">toList</a> <span class="keyword">match</span> <span class="delimiter">{</span>
                <span class="keyword">case</span> <a href="../../../collection/immutable/List.scala.html#206583" title="String" id="1176827">origFileName</a><a href="#3377154" title="Boolean" id="3377156">::</a><span class="delimiter">(</span><a href="../../../collection/immutable/List.scala.html#206583" title="String" id="1176830">newFileName</a><a href="../../../collection/immutable/List.scala.html#206584" title="List[String]" id="3377158">::</a><a href="../../../collection/immutable/List.scala.html#206584" title="List[String]" id="3377160">Nil</a><span class="delimiter">)</span> =&gt;
                  <span class="keyword">val</span> <a title="java.io.File" id="1176831">newFile</a> = <span title="(x$1: java.io.File, x$2: String)java.io.File" class="keyword">new</span> <span title="java.io.File">File</span><span class="delimiter">(</span><a href="#1176436" title="java.io.File">changesDir</a>, <a href="#1176830" title="String">newFileName</a><span class="delimiter">)</span>
                  <span title="Boolean" class="keyword">if</span> <span class="delimiter">(</span><a href="#1176831" title="java.io.File">newFile</a>.<span title="()Boolean">isFile</span><span class="delimiter">)</span> <span class="delimiter">{</span>
                    <span class="keyword">val</span> <a title="Boolean" id="1176836">v</a> = <a href="FileManager.scala.html#1150637" title="(dest: java.io.File, file: java.io.File)Boolean">overwriteFileWith</a><span class="delimiter">(</span><span title="(x$1: java.io.File, x$2: String)java.io.File" class="keyword">new</span> <span title="java.io.File">File</span><span class="delimiter">(</span><a href="#1176434" title="java.io.File">outDir</a>, <a href="#1176827" title="String">origFileName</a><span class="delimiter">)</span>, <a href="#1176831" title="java.io.File">newFile</a><span class="delimiter">)</span>
                    <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="../../../Boolean.scala.html#57822" title="=&gt; Boolean">!</a><a href="#1176836" title="Boolean">v</a><span class="delimiter">)</span>
                      <a href="NestUI.scala.html#50828" title="scala.tools.partest.nest.NestUI.type">NestUI</a>.<a href="NestUI.scala.html#1147230" title="(msg: String)Unit">verbose</a><span class="delimiter">(</span><span title="String(&quot;\'update\' operation on &quot;)" class="string">&quot;'update' operation on &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#1176761" title="String">u</a> <span title="(x$1: Any)String">+</span> <span title="String(&quot; failed&quot;)" class="string">&quot; failed&quot;</span><span class="delimiter">)</span>
                    <a href="#1176836" title="Boolean">v</a>
                  <span class="delimiter">}</span> <span class="keyword">else</span> <span class="delimiter">{</span>
                    <a href="NestUI.scala.html#50828" title="scala.tools.partest.nest.NestUI.type">NestUI</a>.<a href="NestUI.scala.html#1147230" title="(msg: String)Unit">verbose</a><span class="delimiter">(</span><span title="String(&quot;File &quot;)" class="string">&quot;File &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#1176831" title="java.io.File">newFile</a> <span title="(x$1: Any)String">+</span> <span title="String(&quot; is invalid&quot;)" class="string">&quot; is invalid&quot;</span><span class="delimiter">)</span>
                    <span title="Boolean(false)" class="keyword">false</span>
                  <span class="delimiter">}</span>
                <span class="keyword">case</span> a =&gt;
                  <a href="NestUI.scala.html#50828" title="scala.tools.partest.nest.NestUI.type">NestUI</a>.<a href="NestUI.scala.html#1147230" title="(msg: String)Unit">verbose</a><span class="delimiter">(</span><span title="String(&quot;Other =: &quot;)" class="string">&quot;Other =: &quot;</span> <span title="(x$1: Any)String">+</span> a<span class="delimiter">)</span>
                  <span title="Boolean(false)" class="keyword">false</span>
            <span class="delimiter">}</span>
          <span class="delimiter">)</span>
        <span class="delimiter">}</span>

        <span class="keyword">def</span> <a title="()Boolean" id="1176447">loop</a><span class="delimiter">(</span><span class="delimiter">)</span>: <a href="../../../Boolean.scala.html#1425" title="Boolean">Boolean</a> = <span class="delimiter">{</span>
          <a href="#1176439" title="java.io.BufferedReader">testReader</a>.<span title="()String">readLine</span><a href="#3377170" title="Boolean" class="delimiter">(</a><span class="delimiter">)</span> <span class="keyword">match</span> <span class="delimiter">{</span>
            <span class="keyword">case</span> <a href="#3377170" title="Boolean" id="3377175" class="keyword">null</a> | <a href="#3377170" title="Boolean" id="3377176" class="string">&quot;&quot;</a>    =&gt;
              <a href="NestUI.scala.html#50828" title="scala.tools.partest.nest.NestUI.type">NestUI</a>.<a href="NestUI.scala.html#1147230" title="(msg: String)Unit">verbose</a><span class="delimiter">(</span><span title="String(&quot;finished&quot;)" class="string">&quot;finished&quot;</span><span class="delimiter">)</span>
              <span title="Boolean(true)" class="keyword">true</span>
            <span class="keyword">case</span> s <span class="keyword">if</span> s <span title="(x$1: String)Boolean">startsWith</span> <span title="String(&quot;&gt;&gt;update &quot;)" class="string">&quot;&gt;&gt;update &quot;</span>  =&gt;
              <a href="../../../Function1.scala.html#58642" title="(v1: String)Boolean">updateFiles</a><span class="delimiter">(</span><a href="../../../Predef.scala.html#7604" title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps">s</a> <a href="../../../collection/immutable/StringLike.scala.html#59860" title="(prefix: String)String">stripPrefix</a> <span title="String(&quot;&gt;&gt;update &quot;)" class="string">&quot;&gt;&gt;update &quot;</span><span class="delimiter">)</span> <a href="#3377178" title="(x: Boolean)Boolean">&amp;&amp;</a> <a href="#1176447" title="()Boolean">loop</a><span class="delimiter">(</span><span class="delimiter">)</span>
            <span class="keyword">case</span> s <span class="keyword">if</span> s <span title="(x$1: String)Boolean">startsWith</span> <span title="String(&quot;&gt;&gt;compile &quot;)" class="string">&quot;&gt;&gt;compile &quot;</span> =&gt;
              <span class="keyword">val</span> <a title="String" id="1176853">files</a> = <a href="../../../Predef.scala.html#7604" title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps">s</a> <a href="../../../collection/immutable/StringLike.scala.html#59860" title="(prefix: String)String">stripPrefix</a> <span title="String(&quot;&gt;&gt;compile &quot;)" class="string">&quot;&gt;&gt;compile &quot;</span>
              <a href="#1176438" title="java.io.PrintStream">logWriter</a>.<span title="(x$1: String)Unit">println</span><span class="delimiter">(</span><a href="#1176442" title="String">prompt</a> <span title="(x$1: Any)String">+</span> <a href="#1176853" title="String">files</a><span class="delimiter">)</span>
              // In the end, it can finish with an error
              <span title="Boolean" class="keyword">if</span> <span class="delimiter">(</span><a href="#1176445" title="(line: String)Boolean">testCompile</a><span class="delimiter">(</span><a href="#1176853" title="String">files</a><span class="delimiter">)</span><span class="delimiter">)</span> <a href="#1176447" title="()Boolean">loop</a><span class="delimiter">(</span><span class="delimiter">)</span>
              <span class="keyword">else</span> <span class="delimiter">{</span>
                <span class="keyword">val</span> <a title="String" id="1176861">t</a> = <a href="#1176439" title="java.io.BufferedReader">testReader</a>.<span title="()String">readLine</span><span class="delimiter">(</span><span class="delimiter">)</span>
                <span class="delimiter">(</span><a href="#1176861" title="String">t</a> <span title="(x$1: AnyRef)Boolean">==</span> <span title="Null(null)" class="keyword">null</span><span class="delimiter">)</span> <a href="../../../Boolean.scala.html#57825" title="(x: Boolean)Boolean">||</a> <span class="delimiter">(</span><a href="#1176861" title="String">t</a> <span title="(x$1: AnyRef)Boolean">==</span> <span title="String(&quot;&quot;)" class="string">&quot;&quot;</span><span class="delimiter">)</span>
              <span class="delimiter">}</span>
            <span class="keyword">case</span> s =&gt;
              <a href="NestUI.scala.html#50828" title="scala.tools.partest.nest.NestUI.type">NestUI</a>.<a href="NestUI.scala.html#1147230" title="(msg: String)Unit">verbose</a><span class="delimiter">(</span><span title="String(&quot;wrong command in test file: &quot;)" class="string">&quot;wrong command in test file: &quot;</span> <span title="(x$1: Any)String">+</span> s<span class="delimiter">)</span>
              <span title="Boolean(false)" class="keyword">false</span>
          <span class="delimiter">}</span>
        <span class="delimiter">}</span>

        <a href="#50873" title="scala.tools.partest.nest.Output.type">Output</a>.<a href="#1168389" title="(newstream: java.io.PrintStream)(func: =&gt; Boolean)Boolean">withRedirected</a><span class="delimiter">(</span><a href="#1176438" title="java.io.PrintStream">logWriter</a><span class="delimiter">)</span> <span class="delimiter">{</span>
          <span class="keyword">try</span> <a href="#1176447" title="()Boolean">loop</a><span class="delimiter">(</span><span class="delimiter">)</span>
          <span class="keyword">finally</span> <a href="#1176439" title="java.io.BufferedReader">testReader</a>.<span title="()Unit">close</span><span class="delimiter">(</span><span class="delimiter">)</span>
        <span class="delimiter">}</span>
        <a href="#1164381" title="=&gt; scala.tools.partest.nest.FileManager">fileManager</a>.<a href="FileManager.scala.html#1150639" title="(file: java.io.File, replace: String =&gt; String)Unit">mapFile</a><span class="delimiter">(</span><a href="#1168877" title="=&gt; java.io.File">logFile</a>, <a href="#1164358" title="(dir: java.io.File, s: String)String">replaceSlashes</a><span class="delimiter">(</span><span title="java.io.File" class="keyword">new</span> <span title="java.io.File">File</span><span class="delimiter">(</span><a href="#1176437" title="String">sourcepath</a><span class="delimiter">)</span>, <a href="#1176879" title="String">_</a><span class="delimiter">)</span><span class="delimiter">)</span>

        <a href="../../../Tuple2.scala.html#62849" title="(_1: Boolean, _2: scala.tools.partest.nest.LogContext)(Boolean, scala.tools.partest.nest.LogContext)" class="delimiter">(</a><a href="#1168891" title="(testFile: java.io.File, diff: String)Boolean">diffCheck</a><span class="delimiter">(</span><a href="#1176330" title="java.io.File">file</a>, <a href="#1168888" title="(dir: java.io.File, logFile: java.io.File)String">compareOutput</a><span class="delimiter">(</span><a href="#1176330" title="java.io.File">file</a>, <a href="#1168877" title="=&gt; java.io.File">logFile</a><span class="delimiter">)</span><span class="delimiter">)</span>, <a href="#1168356" title="(file: java.io.File, swr: java.io.StringWriter, wr: java.io.PrintWriter)scala.tools.partest.nest.LogContext">LogContext</a><span class="delimiter">(</span><a href="#1168877" title="=&gt; java.io.File">logFile</a>, <a href="#1176431" title="java.io.StringWriter">swr</a>, <a href="#1176432" title="java.io.PrintWriter">wr</a><span class="delimiter">)</span><span class="delimiter">)</span>

      <span class="keyword">case</span> <a href="#3377238" title="(Boolean, scala.tools.partest.nest.LogContext)" id="3377277" class="string">&quot;res&quot;</a> =&gt; <a href="#3377282" title="(x: (Boolean, scala.tools.partest.nest.LogContext))(Boolean, scala.tools.partest.nest.LogContext)" class="delimiter">{</a>
          // simulate resident compiler loop
          <span class="keyword">val</span> <a title="String" id="1176896">prompt</a> = <span title="String(&quot;\nnsc&gt; &quot;)" class="string">&quot;\nnsc&gt; &quot;</span>

          <span class="keyword">val</span> <a href="#3377198" title="(x: (java.io.StringWriter, java.io.PrintWriter))(java.io.StringWriter, java.io.PrintWriter)" class="delimiter">(</a><a href="../../../Tuple2.scala.html#60635" title="java.io.StringWriter" id="1176898">swr</a>, <a href="../../../Tuple2.scala.html#60637" title="java.io.PrintWriter" id="1176899">wr</a><span class="delimiter">)</span> = <a href="#1168889" title="()(java.io.StringWriter, java.io.PrintWriter)">newTestWriters</a><a href="../../../Tuple2.scala.html#783" title="(java.io.StringWriter, java.io.PrintWriter) @unchecked" class="delimiter">(</a><span class="delimiter">)</span>
          <a href="#1164360" title="(file: java.io.File, printer: java.io.PrintWriter)Unit">printInfoStart</a><span class="delimiter">(</span><a href="#1176330" title="java.io.File">file</a>, <a href="#1176899" title="java.io.PrintWriter">wr</a><span class="delimiter">)</span>

          <a href="NestUI.scala.html#50828" title="scala.tools.partest.nest.NestUI.type">NestUI</a>.<a href="NestUI.scala.html#1147230" title="(msg: String)Unit">verbose</a><span class="delimiter">(</span><a href="../../../Predef.scala.html#7605" title="implicit scala.Predef.any2stringadd : (x: Any)scala.runtime.StringAdd" class="keyword">this</a><a href="../../../runtime/StringAdd.scala.html#60046" title="(other: String)String">+</a><span title="String(&quot; running test &quot;)" class="string">&quot; running test &quot;</span><span title="(x$1: Any)String">+</span><a href="#1168875" title="=&gt; String">fileBase</a><span class="delimiter">)</span>
          <span class="keyword">val</span> <a title="java.io.File" id="1176900">dir</a> = <a href="#1176330" title="java.io.File">file</a>.<span title="()java.io.File">getParentFile</span>
          <span class="keyword">val</span> <a title="java.io.File" id="1176901">outDir</a> = <a href="#1168884" title="()java.io.File">createOutputDir</a><span class="delimiter">(</span><span class="delimiter">)</span>
          <span class="keyword">val</span> <a title="java.io.File" id="1176902">resFile</a> = <span title="(x$1: java.io.File, x$2: String)java.io.File" class="keyword">new</span> <span title="java.io.File">File</span><span class="delimiter">(</span><a href="#1176900" title="java.io.File">dir</a>, <a href="#1168875" title="=&gt; String">fileBase</a> <span title="(x$1: Any)String">+</span> <span title="String(&quot;.res&quot;)" class="string">&quot;.res&quot;</span><span class="delimiter">)</span>
          <a href="NestUI.scala.html#50828" title="scala.tools.partest.nest.NestUI.type">NestUI</a>.<a href="NestUI.scala.html#1147230" title="(msg: String)Unit">verbose</a><span class="delimiter">(</span><span title="String(&quot;outDir:  &quot;)" class="string">&quot;outDir:  &quot;</span><span title="(x$1: Any)String">+</span><a href="#1176901" title="java.io.File">outDir</a><span class="delimiter">)</span>
          <a href="NestUI.scala.html#50828" title="scala.tools.partest.nest.NestUI.type">NestUI</a>.<a href="NestUI.scala.html#1147230" title="(msg: String)Unit">verbose</a><span class="delimiter">(</span><span title="String(&quot;logFile: &quot;)" class="string">&quot;logFile: &quot;</span><span title="(x$1: Any)String">+</span><a href="#1168877" title="=&gt; java.io.File">logFile</a><span class="delimiter">)</span>
          //NestUI.verbose(&quot;logFileErr: &quot;+logFileErr)
          <a href="NestUI.scala.html#50828" title="scala.tools.partest.nest.NestUI.type">NestUI</a>.<a href="NestUI.scala.html#1147230" title="(msg: String)Unit">verbose</a><span class="delimiter">(</span><span title="String(&quot;resFile: &quot;)" class="string">&quot;resFile: &quot;</span><span title="(x$1: Any)String">+</span><a href="#1176902" title="java.io.File">resFile</a><span class="delimiter">)</span>

          // run compiler in resident mode
          // $SCALAC -d &quot;$os_dstbase&quot;.obj -Xresident -sourcepath . &quot;$@&quot;
          <span class="keyword">val</span> <a title="java.io.File" id="1176903">sourcedir</a>  = <a href="#1168877" title="=&gt; java.io.File">logFile</a>.<span title="()java.io.File">getParentFile</span>.<span title="()java.io.File">getAbsoluteFile</span>
          <span class="keyword">val</span> <a title="String" id="1176904">sourcepath</a> = <a href="#1176903" title="java.io.File">sourcedir</a>.<span title="()String">getAbsolutePath</span><span title="(x$1: Any)String">+</span><span title="java.io.File.type">File</span>.<span title="String">separator</span>
          <a href="NestUI.scala.html#50828" title="scala.tools.partest.nest.NestUI.type">NestUI</a>.<a href="NestUI.scala.html#1147230" title="(msg: String)Unit">verbose</a><span class="delimiter">(</span><span title="String(&quot;sourcepath: &quot;)" class="string">&quot;sourcepath: &quot;</span><span title="(x$1: Any)String">+</span><a href="#1176904" title="String">sourcepath</a><span class="delimiter">)</span>

          <span class="keyword">val</span> <a title="List[String]" id="1176905">argList</a> = <a href="../../../collection/immutable/List.scala.html#62451" title="(xs: String*)List[String]">List</a><span class="delimiter">(</span>
            <span title="String(&quot;-d&quot;)" class="string">&quot;-d&quot;</span>, <a href="#1176901" title="java.io.File">outDir</a>.<span title="()java.io.File">getAbsoluteFile</span>.<span title="()String">getPath</span>,
            <span title="String(&quot;-Xresident&quot;)" class="string">&quot;-Xresident&quot;</span>,
            <span title="String(&quot;-sourcepath&quot;)" class="string">&quot;-sourcepath&quot;</span>, <a href="#1176904" title="String">sourcepath</a><span class="delimiter">)</span>

          // configure input/output files
          <span class="keyword">val</span> <a title="java.io.FileOutputStream" id="1176906">logOut</a>    = <span title="(x$1: java.io.File)java.io.FileOutputStream" class="keyword">new</span> <span title="java.io.FileOutputStream">FileOutputStream</span><span class="delimiter">(</span><a href="#1168877" title="=&gt; java.io.File">logFile</a><span class="delimiter">)</span>
          <span class="keyword">val</span> <a title="java.io.PrintStream" id="1176907">logWriter</a> = <span title="(x$1: java.io.OutputStream, x$2: Boolean)java.io.PrintStream" class="keyword">new</span> <span title="java.io.PrintStream">PrintStream</span><span class="delimiter">(</span><a href="#1176906" title="java.io.FileOutputStream">logOut</a>, <span title="Boolean(true)" class="keyword">true</span><span class="delimiter">)</span>
          <span class="keyword">val</span> <a title="java.io.BufferedReader" id="1176908">resReader</a> = <span title="(x$1: java.io.Reader)java.io.BufferedReader" class="keyword">new</span> <span title="java.io.BufferedReader">BufferedReader</span><span class="delimiter">(</span><span title="(x$1: java.io.File)java.io.FileReader" class="keyword">new</span> <span title="java.io.FileReader">FileReader</span><span class="delimiter">(</span><a href="#1176902" title="java.io.File">resFile</a><span class="delimiter">)</span><span class="delimiter">)</span>
          <span class="keyword">val</span> <a title="java.io.PrintWriter" id="1176909">logConsoleWriter</a> = <span title="(x$1: java.io.Writer, x$2: Boolean)java.io.PrintWriter" class="keyword">new</span> <span title="java.io.PrintWriter">PrintWriter</span><span class="delimiter">(</span><span title="(x$1: java.io.OutputStream)java.io.OutputStreamWriter" class="keyword">new</span> <span title="java.io.OutputStreamWriter">OutputStreamWriter</span><span class="delimiter">(</span><a href="#1176906" title="java.io.FileOutputStream">logOut</a><span class="delimiter">)</span>, <span title="Boolean(true)" class="keyword">true</span><span class="delimiter">)</span>

          // create compiler
          <span class="keyword">val</span> <a title="scala.tools.nsc.Settings" id="1176910">settings</a> = <span title="scala.tools.nsc.Settings" class="keyword">new</span> <a href="../../nsc/Settings.scala.html#27643" title="scala.tools.nsc.Settings">Settings</a><span class="delimiter">(</span><a href="#1164359" title="(msg: String)Unit">workerError</a><span class="delimiter">)</span>
          <a href="#1176910" title="scala.tools.nsc.Settings">settings</a>.<a href="../../nsc/settings/StandardScalaSettings.scala.html#540197" title="=&gt; settings.PathSetting">sourcepath</a>.<a href="../../../reflect/internal/settings/MutableSettings.scala.html#423753" title="(arg: settings.sourcepath.T)Unit">value</a> = <a href="#1176904" title="String">sourcepath</a>
          <a href="#1176910" title="scala.tools.nsc.Settings">settings</a>.<a href="../../nsc/settings/ScalaSettings.scala.html#539943" title="=&gt; settings.PathSetting">classpath</a>.<a href="../../../reflect/internal/settings/MutableSettings.scala.html#423753" title="(arg: settings.classpath.T)Unit">value</a> = <a href="#1164381" title="=&gt; scala.tools.partest.nest.FileManager">fileManager</a>.<a href="FileManager.scala.html#1150594" title="=&gt; String">CLASSPATH</a>
          <span class="keyword">val</span> <a title="scala.tools.nsc.reporters.ConsoleReporter" id="1176911">reporter</a> = <span title="scala.tools.nsc.reporters.ConsoleReporter" class="keyword">new</span> <a href="../../nsc/reporters/ConsoleReporter.scala.html#41214" title="scala.tools.nsc.reporters.ConsoleReporter">ConsoleReporter</a><span class="delimiter">(</span><a href="#1176910" title="scala.tools.nsc.Settings">settings</a>, scala.<a href="../../../Console.scala.html#136" title="Console.type">Console</a>.<a href="../../../Console.scala.html#63286" title="=&gt; java.io.BufferedReader">in</a>, <a href="#1176909" title="java.io.PrintWriter">logConsoleWriter</a><span class="delimiter">)</span>
          <span class="keyword">val</span> <a title="scala.tools.nsc.CompilerCommand" id="1176912">command</a> = <span title="scala.tools.nsc.CompilerCommand" class="keyword">new</span> <a href="../../nsc/CompilerCommand.scala.html#27796" title="scala.tools.nsc.CompilerCommand">CompilerCommand</a><span class="delimiter">(</span><a href="#1176905" title="List[String]">argList</a>, <a href="#1176910" title="scala.tools.nsc.Settings">settings</a><span class="delimiter">)</span>
          <span class="keyword">object</span> <a title="compiler.type" id="1176913">compiler</a> <a href="#1176914" title="compiler.type" class="keyword">extends</a> <a href="../../nsc/Global.scala.html#27346" title="scala.tools.nsc.Global">Global</a><span class="delimiter">(</span><a href="#1176912" title="scala.tools.nsc.CompilerCommand">command</a>.<a href="../../nsc/CompilerCommand.scala.html#600794" title="=&gt; scala.tools.nsc.Settings">settings</a>, <a href="#1176911" title="scala.tools.nsc.reporters.ConsoleReporter">reporter</a><span class="delimiter">)</span>

          <span class="keyword">val</span> <a title="String =&gt; Boolean" id="1176915">resCompile</a> = <span class="delimiter">(</span>line: <span title="String">String</span><span class="delimiter">)</span> =&gt; <span class="delimiter">{</span>
            <a href="NestUI.scala.html#50828" title="scala.tools.partest.nest.NestUI.type">NestUI</a>.<a href="NestUI.scala.html#1147230" title="(msg: String)Unit">verbose</a><span class="delimiter">(</span><span title="String(&quot;compiling &quot;)" class="string">&quot;compiling &quot;</span><span title="(x$1: Any)String">+</span><a href="#1176986" title="String">line</a><span class="delimiter">)</span>
            <span class="keyword">val</span> <a title="List[String]" id="1176987">cmdArgs</a> = <span class="delimiter">(</span><a href="../../../Predef.scala.html#7604" title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps">line</a> <a href="../../../Predef.scala.html#7555" title="(xs: Array[String])scala.collection.mutable.ArrayOps[String]">split</a> <span title="Char(' ')" class="char">' '</span><span class="delimiter">)</span>.<a href="../../../collection/TraversableOnce.scala.html#58263" title="=&gt; List[String]">toList</a> <a href="../../../collection/TraversableLike.scala.html#58063" title="(f: String =&gt; String)(implicit bf: scala.collection.generic.CanBuildFrom[List[String],String,List[String]])List[String]">map</a> <span class="delimiter">(</span><a title="String" id="1177092">fs</a> =&gt; <span title="(x$1: java.io.File, x$2: String)java.io.File" class="keyword">new</span> <span title="java.io.File">File</span><span class="delimiter">(</span><a href="#1176900" title="java.io.File">dir</a>, <a href="#1177092" title="String">fs</a><span class="delimiter">)</span>.<span title="()String">getAbsolutePath</span><span class="delimiter">)</span>
            <a href="NestUI.scala.html#50828" title="scala.tools.partest.nest.NestUI.type">NestUI</a>.<a href="NestUI.scala.html#1147230" title="(msg: String)Unit">verbose</a><span class="delimiter">(</span><span title="String(&quot;cmdArgs: &quot;)" class="string">&quot;cmdArgs: &quot;</span><span title="(x$1: Any)String">+</span><a href="#1176987" title="List[String]">cmdArgs</a><span class="delimiter">)</span>
            <span class="keyword">val</span> <a title="scala.tools.nsc.Settings" id="1176988">sett</a> = <span title="scala.tools.nsc.Settings" class="keyword">new</span> <a href="../../nsc/Settings.scala.html#27643" title="scala.tools.nsc.Settings">Settings</a><span class="delimiter">(</span><a href="#1164359" title="(msg: String)Unit">workerError</a><span class="delimiter">)</span>
            <a href="#1176988" title="scala.tools.nsc.Settings">sett</a>.<a href="../../nsc/settings/StandardScalaSettings.scala.html#540197" title="=&gt; sett.PathSetting">sourcepath</a>.<a href="../../../reflect/internal/settings/MutableSettings.scala.html#423753" title="(arg: sett.sourcepath.T)Unit">value</a> = <a href="#1176904" title="String">sourcepath</a>
            <span class="keyword">val</span> <a title="scala.tools.nsc.CompilerCommand" id="1176989">command</a> = <span title="scala.tools.nsc.CompilerCommand" class="keyword">new</span> <a href="../../nsc/CompilerCommand.scala.html#27796" title="scala.tools.nsc.CompilerCommand">CompilerCommand</a><span class="delimiter">(</span><a href="#1176987" title="List[String]">cmdArgs</a>, <a href="#1176988" title="scala.tools.nsc.Settings">sett</a><span class="delimiter">)</span>
            <a href="#1176989" title="scala.tools.nsc.CompilerCommand">command</a>.<a href="../../nsc/CompilerCommand.scala.html#600804" title="=&gt; Boolean">ok</a> <a href="../../../Boolean.scala.html#57826" title="(x: Boolean)Boolean">&amp;&amp;</a> <span class="delimiter">{</span>
              <span class="delimiter">(</span><span title="compiler.Run" class="keyword">new</span> <a href="#1176913" title="compiler.type">compiler</a>.<a href="../../nsc/Global.scala.html#537750" title="compiler.Run">Run</a><span class="delimiter">)</span> <a href="../../nsc/Global.scala.html#539434" title="(filenames: List[String])Unit">compile</a> <a href="#1176989" title="scala.tools.nsc.CompilerCommand">command</a>.<a href="../../nsc/CompilerCommand.scala.html#600805" title="=&gt; List[String]">files</a>
              <a href="../../../Boolean.scala.html#57822" title="=&gt; Boolean">!</a><a href="#1176911" title="scala.tools.nsc.reporters.ConsoleReporter">reporter</a>.<a href="../../nsc/reporters/Reporter.scala.html#539679" title="=&gt; Boolean">hasErrors</a>
            <span class="delimiter">}</span>
          <span class="delimiter">}</span>

          <span class="keyword">def</span> <a title="(action: String =&gt; Boolean)Boolean" id="1176916">loop</a><span class="delimiter">(</span><a title="String =&gt; Boolean" id="1177134">action</a>: String =&gt; Boolean<span class="delimiter">)</span>: <a href="../../../Boolean.scala.html#1425" title="Boolean">Boolean</a> = <span class="delimiter">{</span>
            <a href="#1176907" title="java.io.PrintStream">logWriter</a>.<span title="(x$1: String)Unit">print</span><span class="delimiter">(</span><a href="#1176896" title="String">prompt</a><span class="delimiter">)</span>
            <a href="#1176908" title="java.io.BufferedReader">resReader</a>.<span title="()String">readLine</span><a href="#3377202" title="String" class="delimiter">(</a><span class="delimiter">)</span> <span class="keyword">match</span> <span class="delimiter">{</span>
              <span class="keyword">case</span> <a href="#3377202" title="Boolean" id="3377207" class="keyword">null</a> | <a href="#3377202" title="Boolean" id="3377208" class="string">&quot;&quot;</a>  =&gt; <a href="#1176907" title="java.io.PrintStream">logWriter</a>.<span title="()Unit">flush</span><span class="delimiter">(</span><span class="delimiter">)</span> ; <span title="Boolean(true)" class="keyword">true</span>
              <span class="keyword">case</span> line       =&gt; <a href="../../../Function1.scala.html#58642" title="(v1: String)Boolean">action</a><span class="delimiter">(</span>line<span class="delimiter">)</span> <a href="#3377210" title="(x: Boolean)Boolean">&amp;&amp;</a> <a href="#1176916" title="(action: String =&gt; Boolean)Boolean">loop</a><span class="delimiter">(</span><a href="#1177134" title="String =&gt; Boolean">action</a><span class="delimiter">)</span>
            <span class="delimiter">}</span>
          <span class="delimiter">}</span>

          <a href="#50873" title="scala.tools.partest.nest.Output.type">Output</a>.<a href="#1168389" title="(newstream: java.io.PrintStream)(func: =&gt; Boolean)Boolean">withRedirected</a><span class="delimiter">(</span><a href="#1176907" title="java.io.PrintStream">logWriter</a><span class="delimiter">)</span> <span class="delimiter">{</span>
            <span class="keyword">try</span> <a href="#1176916" title="(action: String =&gt; Boolean)Boolean">loop</a><span class="delimiter">(</span><a href="#1176915" title="String =&gt; Boolean">resCompile</a><span class="delimiter">)</span>
            <span class="keyword">finally</span> <a href="#1176908" title="java.io.BufferedReader">resReader</a>.<span title="()Unit">close</span><span class="delimiter">(</span><span class="delimiter">)</span>
          <span class="delimiter">}</span>
          <a href="#1164381" title="=&gt; scala.tools.partest.nest.FileManager">fileManager</a>.<a href="FileManager.scala.html#1150639" title="(file: java.io.File, replace: String =&gt; String)Unit">mapFile</a><span class="delimiter">(</span><a href="#1168877" title="=&gt; java.io.File">logFile</a>, <a href="#1164358" title="(dir: java.io.File, s: String)String">replaceSlashes</a><span class="delimiter">(</span><a href="#1176900" title="java.io.File">dir</a>, <a href="#1177149" title="String">_</a><span class="delimiter">)</span><span class="delimiter">)</span>

          <a href="../../../Tuple2.scala.html#62849" title="(_1: Boolean, _2: scala.tools.partest.nest.LogContext)(Boolean, scala.tools.partest.nest.LogContext)" class="delimiter">(</a><a href="#1168891" title="(testFile: java.io.File, diff: String)Boolean">diffCheck</a><span class="delimiter">(</span><a href="#1176330" title="java.io.File">file</a>, <a href="#1168888" title="(dir: java.io.File, logFile: java.io.File)String">compareOutput</a><span class="delimiter">(</span><a href="#1176900" title="java.io.File">dir</a>, <a href="#1168877" title="=&gt; java.io.File">logFile</a><span class="delimiter">)</span><span class="delimiter">)</span>, <a href="#1168356" title="(file: java.io.File, swr: java.io.StringWriter, wr: java.io.PrintWriter)scala.tools.partest.nest.LogContext">LogContext</a><span class="delimiter">(</span><a href="#1168877" title="=&gt; java.io.File">logFile</a>, <a href="#1176898" title="java.io.StringWriter">swr</a>, <a href="#1176899" title="java.io.PrintWriter">wr</a><span class="delimiter">)</span><span class="delimiter">)</span>
        <span class="delimiter">}</span>

      <span class="keyword">case</span> <a href="#3377238" title="(Boolean, scala.tools.partest.nest.LogContext)" id="3377278" class="string">&quot;shootout&quot;</a> =&gt;
        <span class="keyword">val</span> <a href="#3377228" title="(x: (java.io.StringWriter, java.io.PrintWriter))(java.io.StringWriter, java.io.PrintWriter)" class="delimiter">(</a><a href="../../../Tuple2.scala.html#60635" title="java.io.StringWriter" id="1177163">swr</a>, <a href="../../../Tuple2.scala.html#60637" title="java.io.PrintWriter" id="1177164">wr</a><span class="delimiter">)</span> = <a href="#1168889" title="()(java.io.StringWriter, java.io.PrintWriter)">newTestWriters</a><a href="../../../Tuple2.scala.html#783" title="(java.io.StringWriter, java.io.PrintWriter) @unchecked" class="delimiter">(</a><span class="delimiter">)</span>
        <a href="#1164360" title="(file: java.io.File, printer: java.io.PrintWriter)Unit">printInfoStart</a><span class="delimiter">(</span><a href="#1176330" title="java.io.File">file</a>, <a href="#1177164" title="java.io.PrintWriter">wr</a><span class="delimiter">)</span>

        <a href="NestUI.scala.html#50828" title="scala.tools.partest.nest.NestUI.type">NestUI</a>.<a href="NestUI.scala.html#1147230" title="(msg: String)Unit">verbose</a><span class="delimiter">(</span><a href="../../../Predef.scala.html#7605" title="implicit scala.Predef.any2stringadd : (x: Any)scala.runtime.StringAdd" class="keyword">this</a><a href="../../../runtime/StringAdd.scala.html#60046" title="(other: String)String">+</a><span title="String(&quot; running test &quot;)" class="string">&quot; running test &quot;</span><span title="(x$1: Any)String">+</span><a href="#1168875" title="=&gt; String">fileBase</a><span class="delimiter">)</span>
        <span class="keyword">val</span> <a title="java.io.File" id="1177165">outDir</a> = <a href="#1168884" title="()java.io.File">createOutputDir</a><span class="delimiter">(</span><span class="delimiter">)</span>

        // 2. define file {outDir}/test.scala that contains code to compile/run
        <span class="keyword">val</span> <a title="java.io.File" id="1177166">testFile</a> = <span title="(x$1: java.io.File, x$2: String)java.io.File" class="keyword">new</span> <span title="java.io.File">File</span><span class="delimiter">(</span><a href="#1177165" title="java.io.File">outDir</a>, <span title="String(&quot;test.scala&quot;)" class="string">&quot;test.scala&quot;</span><span class="delimiter">)</span>
        <a href="NestUI.scala.html#50828" title="scala.tools.partest.nest.NestUI.type">NestUI</a>.<a href="NestUI.scala.html#1147230" title="(msg: String)Unit">verbose</a><span class="delimiter">(</span><span title="String(&quot;outDir:   &quot;)" class="string">&quot;outDir:   &quot;</span><span title="(x$1: Any)String">+</span><a href="#1177165" title="java.io.File">outDir</a><span class="delimiter">)</span>
        <a href="NestUI.scala.html#50828" title="scala.tools.partest.nest.NestUI.type">NestUI</a>.<a href="NestUI.scala.html#1147230" title="(msg: String)Unit">verbose</a><span class="delimiter">(</span><span title="String(&quot;logFile:  &quot;)" class="string">&quot;logFile:  &quot;</span><span title="(x$1: Any)String">+</span><a href="#1168877" title="=&gt; java.io.File">logFile</a><span class="delimiter">)</span>
        <a href="NestUI.scala.html#50828" title="scala.tools.partest.nest.NestUI.type">NestUI</a>.<a href="NestUI.scala.html#1147230" title="(msg: String)Unit">verbose</a><span class="delimiter">(</span><span title="String(&quot;testFile: &quot;)" class="string">&quot;testFile: &quot;</span><span title="(x$1: Any)String">+</span><a href="#1177166" title="java.io.File">testFile</a><span class="delimiter">)</span>

        // 3. cat {test}.scala.runner {test}.scala &gt; testFile
        <span class="keyword">val</span> <a title="java.io.File" id="1177167">runnerFile</a> = <span title="(x$1: java.io.File, x$2: String)java.io.File" class="keyword">new</span> <span title="java.io.File">File</span><span class="delimiter">(</span><a href="#1168879" title="=&gt; java.io.File">parent</a>, <a href="#1168875" title="=&gt; String">fileBase</a><span title="(x$1: Any)String">+</span><span title="String(&quot;.scala.runner&quot;)" class="string">&quot;.scala.runner&quot;</span><span class="delimiter">)</span>
        <span class="keyword">val</span> <a title="java.io.File" id="1177168">bodyFile</a>   = <span title="(x$1: java.io.File, x$2: String)java.io.File" class="keyword">new</span> <span title="java.io.File">File</span><span class="delimiter">(</span><a href="#1168879" title="=&gt; java.io.File">parent</a>, <a href="#1168875" title="=&gt; String">fileBase</a><span title="(x$1: Any)String">+</span><span title="String(&quot;.scala&quot;)" class="string">&quot;.scala&quot;</span><span class="delimiter">)</span>
        <a href="../../../reflect/io/File.scala.html#530996" title="(path: scala.reflect.io.Path)(implicit codec: scala.io.Codec)scala.reflect.io.File">SFile</a><a href="../../../io/Codec.scala.html#393359" title="=&gt; scala.io.Codec" class="delimiter">(</a><a href="../package.scala.html#55891" title="implicit scala.tools.partest.package.temporaryFile2Path : (x: java.io.File)scala.tools.nsc.io.Path">testFile</a><span class="delimiter">)</span>.<a href="../../../reflect/io/File.scala.html#530961" title="(strings: String*)Unit">writeAll</a><span class="delimiter">(</span>
          <a href="../package.scala.html#55903" title="(f: java.io.File)String">file2String</a><span class="delimiter">(</span><a href="#1177167" title="java.io.File">runnerFile</a><span class="delimiter">)</span>,
          <a href="../package.scala.html#55903" title="(f: java.io.File)String">file2String</a><span class="delimiter">(</span><a href="#1177168" title="java.io.File">bodyFile</a><span class="delimiter">)</span>
        <span class="delimiter">)</span>

        // 4. compile testFile
        <span class="keyword">val</span> <a title="Boolean" id="1177169">ok</a> = <a href="#1164355" title="=&gt; scala.tools.partest.nest.CompileManager">compileMgr</a>.<a href="CompileManager.scala.html#1161944" title="(outdir: Option[java.io.File], sources: List[java.io.File], kind: String, log: java.io.File)scala.tools.partest.nest.CompilationOutcome">attemptCompile</a><span class="delimiter">(</span><a href="../../../Option.scala.html#1585" title="None.type">None</a>, <a href="../../../collection/immutable/List.scala.html#62451" title="(xs: java.io.File*)List[java.io.File]">List</a><span class="delimiter">(</span><a href="#1177166" title="java.io.File">testFile</a><span class="delimiter">)</span>, <a href="#1164380" title="String">kind</a>, <a href="#1168877" title="=&gt; java.io.File">logFile</a><span class="delimiter">)</span> <span title="(x$1: AnyRef)Boolean">eq</span> <a href="CompileManager.scala.html#50740" title="scala.tools.partest.nest.CompileSuccess.type">CompileSuccess</a>
        <a href="NestUI.scala.html#50828" title="scala.tools.partest.nest.NestUI.type">NestUI</a>.<a href="NestUI.scala.html#1147230" title="(msg: String)Unit">verbose</a><span class="delimiter">(</span><span title="String(&quot;compilation of &quot;)" class="string">&quot;compilation of &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#1177166" title="java.io.File">testFile</a> <span title="(x$1: Any)String">+</span> <span class="delimiter">(</span><span title="Any" class="keyword">if</span> <span class="delimiter">(</span><a href="#1177169" title="Boolean">ok</a><span class="delimiter">)</span> <span title="String(&quot;succeeded&quot;)" class="string">&quot;succeeded&quot;</span> <span class="keyword">else</span> <span title="String(&quot;failed&quot;)" class="string">&quot;failed&quot;</span><span class="delimiter">)</span><span class="delimiter">)</span>
        <span class="keyword">val</span> <a title="Boolean" id="1177170">result</a> = <a href="#1177169" title="Boolean">ok</a> <a href="../../../Boolean.scala.html#57826" title="(x: Boolean)Boolean">&amp;&amp;</a> <span class="delimiter">{</span>
          <a href="#1168885" title="(outDir: java.io.File, logFile: java.io.File, classpathPrefix: String, javaOpts: String)Boolean">execTest</a><span class="delimiter">(</span><a href="#1177165" title="java.io.File">outDir</a>, <a href="#1168877" title="=&gt; java.io.File">logFile</a><span class="delimiter">)</span> <a href="../../../Boolean.scala.html#57826" title="(x: Boolean)Boolean">&amp;&amp;</a> <span class="delimiter">{</span>
            <a href="NestUI.scala.html#50828" title="scala.tools.partest.nest.NestUI.type">NestUI</a>.<a href="NestUI.scala.html#1147230" title="(msg: String)Unit">verbose</a><span class="delimiter">(</span><a href="../../../Predef.scala.html#7605" title="implicit scala.Predef.any2stringadd : (x: Any)scala.runtime.StringAdd" class="keyword">this</a><a href="../../../runtime/StringAdd.scala.html#60046" title="(other: String)String">+</a><span title="String(&quot; finished running &quot;)" class="string">&quot; finished running &quot;</span><span title="(x$1: Any)String">+</span><a href="#1168875" title="=&gt; String">fileBase</a><span class="delimiter">)</span>
            <a href="#1168891" title="(testFile: java.io.File, diff: String)Boolean">diffCheck</a><span class="delimiter">(</span><a href="#1176330" title="java.io.File">file</a>, <a href="#1168888" title="(dir: java.io.File, logFile: java.io.File)String">compareOutput</a><span class="delimiter">(</span><a href="#1168879" title="=&gt; java.io.File">parent</a>, <a href="#1168877" title="=&gt; java.io.File">logFile</a><span class="delimiter">)</span><span class="delimiter">)</span>
          <span class="delimiter">}</span>
        <span class="delimiter">}</span>

        <a href="../../../Tuple2.scala.html#62849" title="(_1: Boolean, _2: scala.tools.partest.nest.LogContext)(Boolean, scala.tools.partest.nest.LogContext)" class="delimiter">(</a><a href="#1177170" title="Boolean">result</a>, <a href="#1168356" title="(file: java.io.File, swr: java.io.StringWriter, wr: java.io.PrintWriter)scala.tools.partest.nest.LogContext">LogContext</a><span class="delimiter">(</span><a href="#1168877" title="=&gt; java.io.File">logFile</a>, <a href="#1177163" title="java.io.StringWriter">swr</a>, <a href="#1177164" title="java.io.PrintWriter">wr</a><span class="delimiter">)</span><span class="delimiter">)</span>

      <span class="keyword">case</span> <a href="#3377238" title="(Boolean, scala.tools.partest.nest.LogContext)" id="3377279" class="string">&quot;scalap&quot;</a> =&gt;
        <a href="#1168892" title="(file: java.io.File, script: (java.io.File, java.io.File) =&gt; Boolean)(Boolean, scala.tools.partest.nest.LogContext)">runInContext</a><a href="#3377282" title="(x: (Boolean, scala.tools.partest.nest.LogContext))(Boolean, scala.tools.partest.nest.LogContext)" class="delimiter">(</a><a href="#1176330" title="java.io.File">file</a>, <span class="delimiter">(</span>logFile: <span title="java.io.File">File</span>, outDir: <span title="java.io.File">File</span><span class="delimiter">)</span> =&gt; <span class="delimiter">{</span>
          <span class="keyword">val</span> <a title="scala.reflect.io.Directory" id="1177220">sourceDir</a> = <a href="../../../reflect/io/Directory.scala.html#531519" title="(path: scala.reflect.io.Path)scala.reflect.io.Directory">Directory</a><span class="delimiter">(</span><span title="scala.reflect.io.Path" class="keyword">if</span> <span class="delimiter">(</span><a href="#1176330" title="java.io.File">file</a>.<span title="()Boolean">isFile</span><span class="delimiter">)</span> <a href="#1176330" title="java.io.File">file</a>.<a href="../../../reflect/io/Path.scala.html#531009" title="implicit scala.reflect.io.Path.string2path : (s: String)scala.reflect.io.Path">getParent</a> <span class="keyword">else</span> <a href="../package.scala.html#55891" title="implicit scala.tools.partest.package.temporaryFile2Path : (x: java.io.File)scala.tools.nsc.io.Path">file</a><span class="delimiter">)</span>
          <span class="keyword">val</span> <a title="List[java.io.File]" id="1177221">sources</a>   = <a href="#1177220" title="scala.reflect.io.Directory">sourceDir</a>.<a href="../../../reflect/io/Directory.scala.html#531531" title="=&gt; Iterator[scala.reflect.io.File]">files</a> <a href="../../../collection/Iterator.scala.html#66764" title="(p: scala.reflect.io.File =&gt; Boolean)Iterator[scala.reflect.io.File]">filter</a> <span class="delimiter">(</span><a href="#1177225" title="scala.reflect.io.File">_</a> <a href="../../../reflect/io/Path.scala.html#530896" title="(ext: String, exts: String*)Boolean">hasExtension</a> <span title="String(&quot;scala&quot;)" class="string">&quot;scala&quot;</span><span class="delimiter">)</span> <a href="../../../collection/Iterator.scala.html#66755" title="(f: scala.reflect.io.File =&gt; java.io.File)Iterator[java.io.File]">map</a> <span class="delimiter">(</span><a href="#1177230" title="scala.reflect.io.File">_</a>.<a href="../../../reflect/io/Path.scala.html#530865" title="=&gt; java.io.File">jfile</a><span class="delimiter">)</span> <a href="../../../collection/TraversableOnce.scala.html#58263" title="=&gt; List[java.io.File]">toList</a>
          <span class="keyword">val</span> <a title="List[java.io.File]" id="1177222">results</a>   = <a href="#1177220" title="scala.reflect.io.Directory">sourceDir</a>.<a href="../../../reflect/io/Directory.scala.html#531531" title="=&gt; Iterator[scala.reflect.io.File]">files</a> <a href="../../../collection/Iterator.scala.html#66764" title="(p: scala.reflect.io.File =&gt; Boolean)Iterator[scala.reflect.io.File]">filter</a> <span class="delimiter">(</span><a href="#1177234" title="scala.reflect.io.File">_</a>.<a href="../../../reflect/io/Path.scala.html#530885" title="=&gt; String">name</a> <span title="(x$1: AnyRef)Boolean">==</span> <span title="String(&quot;result.test&quot;)" class="string">&quot;result.test&quot;</span><span class="delimiter">)</span> <a href="../../../collection/Iterator.scala.html#66755" title="(f: scala.reflect.io.File =&gt; java.io.File)Iterator[java.io.File]">map</a> <span class="delimiter">(</span><a href="#1177243" title="scala.reflect.io.File">_</a>.<a href="../../../reflect/io/Path.scala.html#530865" title="=&gt; java.io.File">jfile</a><span class="delimiter">)</span> <a href="../../../collection/TraversableOnce.scala.html#58263" title="=&gt; List[java.io.File]">toList</a>

          <span title="Boolean" class="keyword">if</span> <span class="delimiter">(</span><a href="#1177221" title="List[java.io.File]">sources</a>.<a href="../../../collection/LinearSeqOptimized.scala.html#86373" title="=&gt; Int">length</a> <a href="../../../Int.scala.html#57104" title="(x: Int)Boolean">!=</a> <span title="Int(1)" class="int">1</span> <a href="../../../Boolean.scala.html#57825" title="(x: Boolean)Boolean">||</a> <a href="#1177222" title="List[java.io.File]">results</a>.<a href="../../../collection/LinearSeqOptimized.scala.html#86373" title="=&gt; Int">length</a> <a href="../../../Int.scala.html#57104" title="(x: Int)Boolean">!=</a> <span title="Int(1)" class="int">1</span><span class="delimiter">)</span> <span class="delimiter">{</span>
            <a href="NestUI.scala.html#50828" title="scala.tools.partest.nest.NestUI.type">NestUI</a>.<a href="NestUI.scala.html#1147219" title="(msg: String)Unit">warning</a><span class="delimiter">(</span><span title="String(&quot;Misconfigured scalap test directory: &quot;)" class="string">&quot;Misconfigured scalap test directory: &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#1177220" title="scala.reflect.io.Directory">sourceDir</a> <span title="(x$1: Any)String">+</span> <span title="String(&quot; \n&quot;)" class="string">&quot; \n&quot;</span><span class="delimiter">)</span>
            <span title="Boolean(false)" class="keyword">false</span>
          <span class="delimiter">}</span>
          <span class="keyword">else</span> <span class="delimiter">{</span>
            <span class="keyword">val</span> <a title="java.io.File" id="1177258">resFile</a> = <a href="#1177222" title="List[java.io.File]">results</a>.<a href="../../../collection/IterableLike.scala.html#58577" title="=&gt; java.io.File">head</a>
            // 2. Compile source file

            <span title="Boolean" class="keyword">if</span> <span class="delimiter">(</span><a href="../../../Boolean.scala.html#57822" title="=&gt; Boolean">!</a><a href="#1164355" title="=&gt; scala.tools.partest.nest.CompileManager">compileMgr</a>.<a href="CompileManager.scala.html#1161944" title="(outdir: Option[java.io.File], sources: List[java.io.File], kind: String, log: java.io.File)scala.tools.partest.nest.CompilationOutcome">attemptCompile</a><span class="delimiter">(</span><a href="../../../Option.scala.html#63128" title="(x: java.io.File)Some[java.io.File]">Some</a><span class="delimiter">(</span><a href="#1177219" title="java.io.File">outDir</a><span class="delimiter">)</span>, <a href="#1177221" title="List[java.io.File]">sources</a>, <a href="#1164380" title="String">kind</a>, <a href="#1177218" title="java.io.File">logFile</a><span class="delimiter">)</span>.<a href="CompileManager.scala.html#1160375" title="=&gt; Boolean">isPositive</a><span class="delimiter">)</span> <span class="delimiter">{</span>
              <a href="NestUI.scala.html#50828" title="scala.tools.partest.nest.NestUI.type">NestUI</a>.<a href="NestUI.scala.html#1147221" title="(msg: String)Unit">normal</a><span class="delimiter">(</span><a href="../../../Predef.scala.html#7604" title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps" class="string">&quot;compilerMgr failed to compile %s to %s&quot;</a>.<a href="../../../collection/immutable/StringLike.scala.html#59882" title="(args: Any*)String">format</a><span class="delimiter">(</span><a href="#1177221" title="List[java.io.File]">sources</a> <a href="../../../collection/TraversableOnce.scala.html#58283" title="(sep: String)String">mkString</a> <span title="String(&quot;, &quot;)" class="string">&quot;, &quot;</span>, <a href="#1177219" title="java.io.File">outDir</a><span class="delimiter">)</span><span class="delimiter">)</span>
              <span title="Boolean(false)" class="keyword">false</span>
            <span class="delimiter">}</span>
            <span class="keyword">else</span> <span class="delimiter">{</span>
              // 3. Decompile file and compare results
              <span class="keyword">val</span> <a title="Boolean" id="1177269">isPackageObject</a> = <a href="#1177220" title="scala.reflect.io.Directory">sourceDir</a>.<a href="../../../reflect/io/Path.scala.html#530885" title="=&gt; String">name</a> <span title="(x$1: String)Boolean">startsWith</span> <span title="String(&quot;package&quot;)" class="string">&quot;package&quot;</span>
              <span class="keyword">val</span> <a title="String" id="1177270">className</a>       = <a href="#1177220" title="scala.reflect.io.Directory">sourceDir</a>.<a href="../../../Predef.scala.html#7604" title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps">name</a>.<a href="../../../collection/immutable/StringLike.scala.html#59859" title="=&gt; String">capitalize</a> <span title="(x$1: Any)String">+</span> <span class="delimiter">(</span><span title="Any" class="keyword">if</span> <span class="delimiter">(</span><a href="../../../Boolean.scala.html#57822" title="=&gt; Boolean">!</a><a href="#1177269" title="Boolean">isPackageObject</a><span class="delimiter">)</span> <span title="String(&quot;&quot;)" class="string">&quot;&quot;</span> <span class="keyword">else</span> <span title="String(&quot;.package&quot;)" class="string">&quot;.package&quot;</span><span class="delimiter">)</span>
              <span class="keyword">val</span> <a title="java.net.URL" id="1177271">url</a>             = <a href="#1177219" title="java.io.File">outDir</a>.<span title="()java.net.URI">toURI</span>.<span title="()java.net.URL">toURL</span>
              <span class="keyword">val</span> <a title="scala.tools.nsc.util.ScalaClassLoader.URLClassLoader" id="1177272">loader</a>          = <a href="../../nsc/util/ScalaClassLoader.scala.html#50234" title="scala.tools.nsc.util.ScalaClassLoader.type">ScalaClassLoader</a>.<a href="../../nsc/util/ScalaClassLoader.scala.html#594241" title="(urls: Seq[java.net.URL], parent: ClassLoader)scala.tools.nsc.util.ScalaClassLoader.URLClassLoader">fromURLs</a><span class="delimiter">(</span><a href="../../../collection/immutable/List.scala.html#62451" title="(xs: java.net.URL*)List[java.net.URL]">List</a><span class="delimiter">(</span><a href="#1177271" title="java.net.URL">url</a><span class="delimiter">)</span>, <a href="#1164375" title="Runner.this.type" class="keyword">this</a>.<span title="()Class[_]">getClass</span>.<span title="()ClassLoader">getClassLoader</span><span class="delimiter">)</span>
              <span class="keyword">val</span> <a title="Class[_]" id="1177273">clazz</a>           = <a href="#1177272" title="scala.tools.nsc.util.ScalaClassLoader.URLClassLoader">loader</a>.<span title="(x$1: String)Class[_]">loadClass</span><span class="delimiter">(</span><a href="#1177270" title="String">className</a><span class="delimiter">)</span>

              <span class="keyword">val</span> <a title="scala.tools.scalap.scalax.rules.scalasig.ByteCode" id="1177274">byteCode</a> = <a href="../../scalap/scalax/rules/scalasig/ClassFileParser.scala.html#51524" title="scala.tools.scalap.scalax.rules.scalasig.ByteCode.type">ByteCode</a>.<a href="../../scalap/scalax/rules/scalasig/ClassFileParser.scala.html#1177295" title="(clazz: Class[_])scala.tools.scalap.scalax.rules.scalasig.ByteCode">forClass</a><span class="delimiter">(</span><a href="#1177273" title="Class[_]">clazz</a><span class="delimiter">)</span>
              <span class="keyword">val</span> <a title="String" id="1177275">result</a>   = scala.tools.scalap.<a href="../../scalap/Main.scala.html#51385" title="scala.tools.scalap.Main.type">Main</a>.<a href="../../scalap/Main.scala.html#1177388" title="(bytes: Array[Byte], isPackageObject: Boolean)String">decompileScala</a><span class="delimiter">(</span><a href="#1177274" title="scala.tools.scalap.scalax.rules.scalasig.ByteCode">byteCode</a>.<a href="../../scalap/scalax/rules/scalasig/ClassFileParser.scala.html#1177345" title="=&gt; Array[Byte]">bytes</a>, <a href="#1177269" title="Boolean">isPackageObject</a><span class="delimiter">)</span>

              <a href="../../../reflect/io/File.scala.html#530996" title="(path: scala.reflect.io.Path)(implicit codec: scala.io.Codec)scala.reflect.io.File">SFile</a><a href="../../../io/Codec.scala.html#393359" title="=&gt; scala.io.Codec" class="delimiter">(</a><a href="../package.scala.html#55891" title="implicit scala.tools.partest.package.temporaryFile2Path : (x: java.io.File)scala.tools.nsc.io.Path">logFile</a><span class="delimiter">)</span> <a href="../../../reflect/io/File.scala.html#530961" title="(strings: String*)Unit">writeAll</a> <a href="#1177275" title="String">result</a>
              <a href="#1168891" title="(testFile: java.io.File, diff: String)Boolean">diffCheck</a><span class="delimiter">(</span><a href="#1176330" title="java.io.File">file</a>, <a href="#1164357" title="(f1: java.io.File, f2: java.io.File)String">compareFiles</a><span class="delimiter">(</span><a href="#1177218" title="java.io.File">logFile</a>, <a href="#1177258" title="java.io.File">resFile</a><span class="delimiter">)</span><span class="delimiter">)</span>
            <span class="delimiter">}</span>
          <span class="delimiter">}</span>
        <span class="delimiter">}</span><span class="delimiter">)</span>

      <span class="keyword">case</span> <a href="#3377238" title="(Boolean, scala.tools.partest.nest.LogContext)" id="3377280" class="string">&quot;script&quot;</a> =&gt;
        <span class="keyword">val</span> <a href="#3377234" title="(x: (java.io.StringWriter, java.io.PrintWriter))(java.io.StringWriter, java.io.PrintWriter)" class="delimiter">(</a><a href="../../../Tuple2.scala.html#60635" title="java.io.StringWriter" id="1177398">swr</a>, <a href="../../../Tuple2.scala.html#60637" title="java.io.PrintWriter" id="1177399">wr</a><span class="delimiter">)</span> = <a href="#1168889" title="()(java.io.StringWriter, java.io.PrintWriter)">newTestWriters</a><a href="../../../Tuple2.scala.html#783" title="(java.io.StringWriter, java.io.PrintWriter) @unchecked" class="delimiter">(</a><span class="delimiter">)</span>
        <a href="#1164360" title="(file: java.io.File, printer: java.io.PrintWriter)Unit">printInfoStart</a><span class="delimiter">(</span><a href="#1176330" title="java.io.File">file</a>, <a href="#1177399" title="java.io.PrintWriter">wr</a><span class="delimiter">)</span>

        <a href="NestUI.scala.html#50828" title="scala.tools.partest.nest.NestUI.type">NestUI</a>.<a href="NestUI.scala.html#1147230" title="(msg: String)Unit">verbose</a><span class="delimiter">(</span><a href="../../../Predef.scala.html#7605" title="implicit scala.Predef.any2stringadd : (x: Any)scala.runtime.StringAdd" class="keyword">this</a><a href="../../../runtime/StringAdd.scala.html#60046" title="(other: String)String">+</a><span title="String(&quot; running test &quot;)" class="string">&quot; running test &quot;</span><span title="(x$1: Any)String">+</span><a href="#1168875" title="=&gt; String">fileBase</a><span class="delimiter">)</span>

        // check whether there is an args file
        <span class="keyword">val</span> <a title="java.io.File" id="1177400">argsFile</a> = <span title="(x$1: java.io.File, x$2: String)java.io.File" class="keyword">new</span> <span title="java.io.File">File</span><span class="delimiter">(</span><a href="#1176330" title="java.io.File">file</a>.<span title="()java.io.File">getParentFile</span>, <a href="#1168875" title="=&gt; String">fileBase</a><span title="(x$1: Any)String">+</span><span title="String(&quot;.args&quot;)" class="string">&quot;.args&quot;</span><span class="delimiter">)</span>
        <a href="NestUI.scala.html#50828" title="scala.tools.partest.nest.NestUI.type">NestUI</a>.<a href="NestUI.scala.html#1147230" title="(msg: String)Unit">verbose</a><span class="delimiter">(</span><span title="String(&quot;argsFile: &quot;)" class="string">&quot;argsFile: &quot;</span><span title="(x$1: Any)String">+</span><a href="#1177400" title="java.io.File">argsFile</a><span class="delimiter">)</span>
        <span class="keyword">val</span> <a title="String" id="1177401">argString</a> = <a href="../package.scala.html#55903" title="(f: java.io.File)String">file2String</a><span class="delimiter">(</span><a href="#1177400" title="java.io.File">argsFile</a><span class="delimiter">)</span>
        <span class="keyword">val</span> <a title="Boolean" id="1177402">succeeded</a> = <span class="keyword">try</span> <span class="delimiter">{</span>
          <span class="keyword">val</span> <a title="String" id="1177420">cmdString</a> =
            <span title="String" class="keyword">if</span> <span class="delimiter">(</span><a href="../../../util/Properties.scala.html#80196" title="=&gt; Boolean">isWin</a><span class="delimiter">)</span> <span class="delimiter">{</span>
              <span class="keyword">val</span> <a title="java.io.File" id="1177422">batchFile</a> = <span title="(x$1: java.io.File, x$2: String)java.io.File" class="keyword">new</span> <span title="java.io.File">File</span><span class="delimiter">(</span><a href="#1176330" title="java.io.File">file</a>.<span title="()java.io.File">getParentFile</span>, <a href="#1168875" title="=&gt; String">fileBase</a><span title="(x$1: Any)String">+</span><span title="String(&quot;.bat&quot;)" class="string">&quot;.bat&quot;</span><span class="delimiter">)</span>
              <a href="NestUI.scala.html#50828" title="scala.tools.partest.nest.NestUI.type">NestUI</a>.<a href="NestUI.scala.html#1147230" title="(msg: String)Unit">verbose</a><span class="delimiter">(</span><span title="String(&quot;batchFile: &quot;)" class="string">&quot;batchFile: &quot;</span><span title="(x$1: Any)String">+</span><a href="#1177422" title="java.io.File">batchFile</a><span class="delimiter">)</span>
              <a href="#1177422" title="java.io.File">batchFile</a>.<span title="()String">getAbsolutePath</span>
            <span class="delimiter">}</span>
            <span class="keyword">else</span> <a href="#1176330" title="java.io.File">file</a>.<span title="()String">getAbsolutePath</span>

          <span class="keyword">val</span> <a title="Boolean" id="1177421">ok</a> = <a href="#1164365" title="(command: String, outFile: java.io.File)Boolean">runCommand</a><span class="delimiter">(</span><a href="#1177420" title="String">cmdString</a><span title="(x$1: Any)String">+</span><a href="#1177401" title="String">argString</a>, <a href="#1168877" title="=&gt; java.io.File">logFile</a><span class="delimiter">)</span>
          <span class="delimiter">(</span> <a href="#1177421" title="Boolean">ok</a> <a href="../../../Boolean.scala.html#57826" title="(x: Boolean)Boolean">&amp;&amp;</a> <a href="#1168891" title="(testFile: java.io.File, diff: String)Boolean">diffCheck</a><span class="delimiter">(</span><a href="#1176330" title="java.io.File">file</a>, <a href="#1168888" title="(dir: java.io.File, logFile: java.io.File)String">compareOutput</a><span class="delimiter">(</span><a href="#1176330" title="java.io.File">file</a>.<span title="()java.io.File">getParentFile</span>, <a href="#1168877" title="=&gt; java.io.File">logFile</a><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">)</span>
        <span class="delimiter">}</span>
        <span class="keyword">catch</span> <span class="delimiter">{</span> <span class="keyword">case</span> <a title="Boolean" id="1177433">e</a>: <span title="Exception">Exception</span> =&gt; <a href="NestUI.scala.html#50828" title="scala.tools.partest.nest.NestUI.type">NestUI</a>.<a href="NestUI.scala.html#1147230" title="(msg: String)Unit">verbose</a><span class="delimiter">(</span><span title="String(&quot;caught &quot;)" class="string">&quot;caught &quot;</span><span title="(x$1: Any)String">+</span><a href="#1177433" title="Exception">e</a><span class="delimiter">)</span> ; <span title="Boolean(false)" class="keyword">false</span> <span class="delimiter">}</span>

        <a href="../../../Tuple2.scala.html#62849" title="(_1: Boolean, _2: scala.tools.partest.nest.LogContext)(Boolean, scala.tools.partest.nest.LogContext)" class="delimiter">(</a><a href="#1177402" title="Boolean">succeeded</a>, <a href="#1168356" title="(file: java.io.File, swr: java.io.StringWriter, wr: java.io.PrintWriter)scala.tools.partest.nest.LogContext">LogContext</a><span class="delimiter">(</span><a href="#1168877" title="=&gt; java.io.File">logFile</a>, <a href="#1177398" title="java.io.StringWriter">swr</a>, <a href="#1177399" title="java.io.PrintWriter">wr</a><span class="delimiter">)</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>

    <span class="keyword">private</span> <span class="keyword">def</span> <a title="(t: Throwable)scala.tools.partest.nest.LogContext" id="1168902">crashContext</a><span class="delimiter">(</span><a title="Throwable" id="1177446">t</a>: <span title="Throwable">Throwable</span><span class="delimiter">)</span>: <a href="#50870" title="scala.tools.partest.nest.LogContext">LogContext</a> = <span class="delimiter">{</span>
      <span class="keyword">try</span> <span class="delimiter">{</span>
        <a href="#1164371" title="(logFile: java.io.File, t: Throwable, msg: String)Boolean">logStackTrace</a><span class="delimiter">(</span><a href="#1168877" title="=&gt; java.io.File">logFile</a>, <a href="#1177446" title="Throwable">t</a>, <span title="String(&quot;Possible compiler crash during test of: &quot;)" class="string">&quot;Possible compiler crash during test of: &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#1168918" title="java.io.File">testFile</a> <span title="(x$1: Any)String">+</span> <span title="String(&quot;\n&quot;)" class="string">&quot;\n&quot;</span><span class="delimiter">)</span>
        <a href="#1168357" title="(file: java.io.File)scala.tools.partest.nest.LogContext">LogContext</a><span class="delimiter">(</span><a href="#1168877" title="=&gt; java.io.File">logFile</a><span class="delimiter">)</span>
      <span class="delimiter">}</span>
      <span class="keyword">catch</span> <span class="delimiter">{</span> <span class="keyword">case</span> <a title="scala.tools.partest.nest.LogContext" id="1177453">t</a>: <span title="Throwable">Throwable</span> =&gt; <a href="#1168357" title="(file: java.io.File)scala.tools.partest.nest.LogContext">LogContext</a><span class="delimiter">(</span><span title="Null(null)" class="keyword">null</span><span class="delimiter">)</span> <span class="delimiter">}</span>
    <span class="delimiter">}</span>

    <span class="keyword">def</span> <a title="()(Boolean, scala.tools.partest.nest.LogContext)" id="1168903">run</a><span class="delimiter">(</span><span class="delimiter">)</span>: <a href="../../../Tuple2.scala.html#783" title="(Boolean, scala.tools.partest.nest.LogContext)" class="delimiter">(</a>Boolean, LogContext<span class="delimiter">)</span> = <span class="delimiter">{</span>
      <span class="keyword">val</span> <a title="(Boolean, scala.tools.partest.nest.LogContext)" id="1177460">result</a> = <span class="keyword">try</span> <a href="#1168901" title="(file: java.io.File)(Boolean, scala.tools.partest.nest.LogContext)">processSingleFile</a><span class="delimiter">(</span><a href="#1168918" title="java.io.File">testFile</a><span class="delimiter">)</span> <span class="keyword">catch</span> <span class="delimiter">{</span> <span class="keyword">case</span> <a title="(Boolean, scala.tools.partest.nest.LogContext)" id="1177461">t</a>: <span title="Throwable">Throwable</span> =&gt; <a href="../../../Tuple2.scala.html#62849" title="(_1: Boolean, _2: scala.tools.partest.nest.LogContext)(Boolean, scala.tools.partest.nest.LogContext)" class="delimiter">(</a><span title="Boolean(false)" class="keyword">false</span>, <a href="#1168902" title="(t: Throwable)scala.tools.partest.nest.LogContext">crashContext</a><span class="delimiter">(</span><a href="#1177461" title="Throwable">t</a><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">}</span>
      <a href="#1168873" title="(x$1: Option[Boolean])Unit">passed</a> = <a href="../../../Option.scala.html#63128" title="(x: Boolean)Some[Boolean]">Some</a><span class="delimiter">(</span><a href="#1177460" title="(Boolean, scala.tools.partest.nest.LogContext)">result</a>.<a href="../../../Tuple2.scala.html#60635" title="=&gt; Boolean">_1</a><span class="delimiter">)</span>
      <a href="#1177460" title="(Boolean, scala.tools.partest.nest.LogContext)">result</a>
    <span class="delimiter">}</span>

    <span class="keyword">def</span> <a title="(writers: Option[(java.io.StringWriter, java.io.PrintWriter)])Unit" id="1168904">reportResult</a><span class="delimiter">(</span><a title="Option[(java.io.StringWriter, java.io.PrintWriter)]" id="1177471">writers</a>: <a href="../../../Option.scala.html#978" title="Option[(java.io.StringWriter, java.io.PrintWriter)]">Option</a><span class="delimiter">[</span><span class="delimiter">(</span>StringWriter, PrintWriter<span class="delimiter">)</span><span class="delimiter">]</span><span class="delimiter">)</span> <span class="delimiter">{</span>
      <a href="#1177471" title="Option[(java.io.StringWriter, java.io.PrintWriter)]">writers</a> <a href="../../../Option.scala.html#62884" title="(f: ((java.io.StringWriter, java.io.PrintWriter)) =&gt; Unit)Unit">foreach</a> <a href="#1177476" title="(java.io.StringWriter, java.io.PrintWriter)" class="delimiter">{</a> <span class="keyword">case</span> <span class="delimiter">(</span><a href="../../../Tuple2.scala.html#60635" title="java.io.StringWriter" id="1177479">swr</a>, <a href="../../../Tuple2.scala.html#60637" title="java.io.PrintWriter" id="1177480">wr</a><span class="delimiter">)</span> =&gt;
        <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#1168873" title="=&gt; Option[Boolean]">passed</a>.<a href="../../../Option.scala.html#62856" title="=&gt; Boolean">isEmpty</a><span class="delimiter">)</span> <a href="#1164362" title="(printer: java.io.PrintWriter)Unit">printInfoTimeout</a><span class="delimiter">(</span><a href="#1177480" title="java.io.PrintWriter">wr</a><span class="delimiter">)</span>
        <span class="keyword">else</span> <a href="#1164361" title="(success: Boolean, printer: java.io.PrintWriter)Unit">printInfoEnd</a><span class="delimiter">(</span><a href="#1168873" title="=&gt; Option[Boolean]">passed</a>.<a href="../../../Option.scala.html#62858" title="=&gt; Boolean">get</a>, <a href="#1177480" title="java.io.PrintWriter">wr</a><span class="delimiter">)</span>
        <a href="#1177480" title="java.io.PrintWriter">wr</a>.<span title="()Unit">flush</span><span class="delimiter">(</span><span class="delimiter">)</span>
        <a href="#1177479" title="java.io.StringWriter">swr</a>.<span title="()Unit">flush</span><span class="delimiter">(</span><span class="delimiter">)</span>
        <a href="NestUI.scala.html#50828" title="scala.tools.partest.nest.NestUI.type">NestUI</a>.<a href="NestUI.scala.html#1147221" title="(msg: String)Unit">normal</a><span class="delimiter">(</span><a href="#1177479" title="java.io.StringWriter">swr</a>.<span title="()String">toString</span><span class="delimiter">)</span>

        <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#1168873" title="=&gt; Option[Boolean]">passed</a> <a href="../../../Option.scala.html#62882" title="(p: Boolean =&gt; Boolean)Boolean">exists</a> <span class="delimiter">(</span><a title="Boolean" id="1177484">x</a> =&gt; <a href="../../../Boolean.scala.html#57822" title="=&gt; Boolean">!</a><a href="#1177484" title="Boolean">x</a><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">{</span>
          <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#1164381" title="=&gt; scala.tools.partest.nest.FileManager">fileManager</a>.<a href="FileManager.scala.html#1150606" title="=&gt; Boolean">showDiff</a> <a href="../../../Boolean.scala.html#57825" title="(x: Boolean)Boolean">||</a> <a href="../package.scala.html#55909" title="=&gt; Boolean">isPartestDebug</a><span class="delimiter">)</span>
            <a href="NestUI.scala.html#50828" title="scala.tools.partest.nest.NestUI.type">NestUI</a>.<a href="NestUI.scala.html#1147221" title="(msg: String)Unit">normal</a><span class="delimiter">(</span><a href="#1168870" title="=&gt; String">testDiff</a><span class="delimiter">)</span>
          <span class="keyword">else</span> <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#1164381" title="=&gt; scala.tools.partest.nest.FileManager">fileManager</a>.<a href="FileManager.scala.html#1150612" title="=&gt; Boolean">showLog</a><span class="delimiter">)</span>
            <a href="#1164379" title="(logFile: java.io.File)Unit">showLog</a><span class="delimiter">(</span><a href="#1168877" title="=&gt; java.io.File">logFile</a><span class="delimiter">)</span>
        <span class="delimiter">}</span>
      <span class="delimiter">}</span>
      <a href="#1168883" title="=&gt; List[java.io.File]">toDelete</a> <a href="../../../collection/immutable/List.scala.html#62719" title="(f: java.io.File =&gt; Boolean)Unit">foreach</a> <span class="delimiter">(</span><a href="../package.scala.html#55891" title="implicit scala.tools.partest.package.temporaryFile2Path : (x: java.io.File)scala.tools.nsc.io.Path">_</a>.<a href="../../../reflect/io/Path.scala.html#530926" title="()Boolean">deleteRecursively</a><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="(testFile: java.io.File)scala.tools.partest.TestState" id="1164376">runTest</a><span class="delimiter">(</span><a title="java.io.File" id="1164424">testFile</a>: <span title="java.io.File">File</span><span class="delimiter">)</span>: <a href="../package.scala.html#50945" title="scala.tools.partest.TestState">TestState</a> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="RunnerManager.this.Runner" id="1177522">runner</a> = <span title="RunnerManager.this.Runner" class="keyword">new</span> <a href="#1164375" title="RunnerManager.this.Runner">Runner</a><span class="delimiter">(</span><a href="#1164424" title="java.io.File">testFile</a><span class="delimiter">)</span>
    // when option &quot;--failed&quot; is provided execute test only if log
    // is present (which means it failed before)
    <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#1164381" title="=&gt; scala.tools.partest.nest.FileManager">fileManager</a>.<a href="FileManager.scala.html#1150615" title="=&gt; Boolean">failed</a> <a href="../../../Boolean.scala.html#57826" title="(x: Boolean)Boolean">&amp;&amp;</a> <a href="../../../Boolean.scala.html#57822" title="=&gt; Boolean">!</a><a href="#1177522" title="RunnerManager.this.Runner">runner</a>.<a href="#1168877" title="=&gt; java.io.File">logFile</a>.<span title="()Boolean">canRead</span><span class="delimiter">)</span>
      <span title="Nothing" class="keyword">return</span> <a href="../package.scala.html#50946" title="scala.tools.partest.TestState.type">TestState</a>.<a href="../package.scala.html#1151261" title="=&gt; scala.tools.partest.TestState">Ok</a>

    // sys addShutdownHook cleanup()
    <span class="keyword">val</span> <a href="#3377354" title="(x: (Boolean, scala.tools.partest.nest.LogContext, Long))(Boolean, scala.tools.partest.nest.LogContext, Long)" class="delimiter">(</a><a href="../../../Tuple2.scala.html#60635" title="(Boolean, scala.tools.partest.nest.LogContext)" id="3377352" class="delimiter">(</a><a href="../../../Tuple2.scala.html#60635" title="Boolean" id="1177524">success</a>, <a href="../../../Tuple2.scala.html#60637" title="scala.tools.partest.nest.LogContext" id="1177525">ctx</a><span class="delimiter">)</span>, <a href="../../../Tuple2.scala.html#60637" title="Long" id="1177526">elapsed</a><span class="delimiter">)</span> = <a href="../package.scala.html#55896" title="(body: =&gt; (Boolean, scala.tools.partest.nest.LogContext))((Boolean, scala.tools.partest.nest.LogContext), Long)">timed</a><a href="../../../Tuple2.scala.html#783" title="((Boolean, scala.tools.partest.nest.LogContext), Long) @unchecked" class="delimiter">(</a><a href="#1177522" title="RunnerManager.this.Runner">runner</a>.<a href="#1168903" title="()(Boolean, scala.tools.partest.nest.LogContext)">run</a><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span>
    <span class="keyword">val</span> <a title="scala.tools.partest.TestState" id="1177527">state</a>                     = <span title="scala.tools.partest.TestState" class="keyword">if</span> <span class="delimiter">(</span><a href="#1177524" title="Boolean">success</a><span class="delimiter">)</span> <a href="../package.scala.html#50946" title="scala.tools.partest.TestState.type">TestState</a>.<a href="../package.scala.html#1151261" title="=&gt; scala.tools.partest.TestState">Ok</a> <span class="keyword">else</span> <a href="../package.scala.html#50946" title="scala.tools.partest.TestState.type">TestState</a>.<a href="../package.scala.html#1151263" title="=&gt; scala.tools.partest.TestState">Fail</a>

    <a href="#1177522" title="RunnerManager.this.Runner">runner</a>.<a href="#1168904" title="(writers: Option[(java.io.StringWriter, java.io.PrintWriter)])Unit">reportResult</a><span class="delimiter">(</span><a href="#1177525" title="scala.tools.partest.nest.LogContext">ctx</a>.<a href="#1168354" title="=&gt; Option[(java.io.StringWriter, java.io.PrintWriter)]">writers</a><span class="delimiter">)</span>
    <a href="#1177527" title="scala.tools.partest.TestState">state</a>
  <span class="delimiter">}</span>

  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(pre: String, fs: List[String])Set[tools.nsc.io.AbstractFile]" id="1164377">filesToSet</a><span class="delimiter">(</span><a title="String" id="1176663">pre</a>: <span title="String">String</span>, <a title="List[String]" id="1176664">fs</a>: <a href="../../../collection/immutable/List.scala.html#11952" title="List[String]">List</a><span class="delimiter">[</span>String<span class="delimiter">]</span><span class="delimiter">)</span>: <a href="../../../collection/immutable/Set.scala.html#11919" title="Set[tools.nsc.io.AbstractFile]">Set</a><span class="delimiter">[</span>AbstractFile<span class="delimiter">]</span> =
    <a href="#1176664" title="List[String]">fs</a> <a href="../../../collection/TraversableLike.scala.html#58068" title="(f: String =&gt; scala.collection.GenTraversableOnce[scala.reflect.io.AbstractFile])(implicit bf: scala.collection.generic.CanBuildFrom[List[String],scala.reflect.io.AbstractFile,List[scala.reflect.io.AbstractFile]])List[scala.reflect.io.AbstractFile]">flatMap</a> <span class="delimiter">(</span><a title="String" id="1177564">s</a> =&gt; <a href="../../../Option.scala.html#97399" title="(x: scala.reflect.io.AbstractFile)Option[scala.reflect.io.AbstractFile]">Option</a><a href="../../../Option.scala.html#97396" title="(xo: Option[scala.reflect.io.AbstractFile])Iterable[scala.reflect.io.AbstractFile]" class="delimiter">(</a><a href="../../nsc/io/package.scala.html#55766" title="=&gt; reflect.io.AbstractFile.type">AbstractFile</a> <a href="../../../reflect/io/AbstractFile.scala.html#524642" title="(path: String)scala.reflect.io.AbstractFile">getFile</a> <span class="delimiter">(</span><a href="#1176663" title="String">pre</a> <span title="(x$1: Any)String">+</span> <a href="#1177564" title="String">s</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span> <a href="../../../collection/TraversableOnce.scala.html#58270" title="scala.collection.immutable.Set[scala.reflect.io.AbstractFile]">toSet</a>

  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(testDir: java.io.File, destDir: java.io.File)Unit" id="1164378">copyTestFiles</a><span class="delimiter">(</span><a title="java.io.File" id="1176490">testDir</a>: <span title="java.io.File">File</span>, <a title="java.io.File" id="1176491">destDir</a>: <span title="java.io.File">File</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="List[String]" id="1177616">invalidExts</a> = <a href="../../../collection/immutable/List.scala.html#62451" title="(xs: String*)List[String]">List</a><span class="delimiter">(</span><span title="String(&quot;changes&quot;)" class="string">&quot;changes&quot;</span>, <span title="String(&quot;svn&quot;)" class="string">&quot;svn&quot;</span>, <span title="String(&quot;obj&quot;)" class="string">&quot;obj&quot;</span><span class="delimiter">)</span>
    <a href="#1176490" title="java.io.File">testDir</a>.<a href="../../../Predef.scala.html#7555" title="(xs: Array[java.io.File])scala.collection.mutable.ArrayOps[java.io.File]">listFiles</a>.<a href="../../../collection/TraversableOnce.scala.html#58263" title="=&gt; List[java.io.File]">toList</a> <a href="../../../collection/TraversableLike.scala.html#58073" title="(p: java.io.File =&gt; Boolean)List[java.io.File]">filter</a> <span class="delimiter">(</span>
            <a title="java.io.File" id="1177692">f</a> =&gt; <span class="delimiter">(</span><a href="#1164369" title="(f: java.io.File)Boolean">isJavaOrScala</a><span class="delimiter">(</span><a href="#1177692" title="java.io.File">f</a><span class="delimiter">)</span> <a href="../../../Boolean.scala.html#57826" title="(x: Boolean)Boolean">&amp;&amp;</a> <a href="#1177692" title="java.io.File">f</a>.<span title="()Boolean">isFile</span><span class="delimiter">)</span> <a href="../../../Boolean.scala.html#57825" title="(x: Boolean)Boolean">||</a>
                 <span class="delimiter">(</span><a href="#1177692" title="java.io.File">f</a>.<span title="()Boolean">isDirectory</span> <a href="../../../Boolean.scala.html#57826" title="(x: Boolean)Boolean">&amp;&amp;</a> <a href="../../../Boolean.scala.html#57822" title="=&gt; Boolean">!</a><span class="delimiter">(</span><a href="#1177616" title="List[String]">invalidExts</a>.<a href="../../../collection/LinearSeqOptimized.scala.html#86380" title="(elem: Any)Boolean">contains</a><span class="delimiter">(</span><a href="../../../reflect/io/File.scala.html#530996" title="(path: scala.reflect.io.Path)(implicit codec: scala.io.Codec)scala.reflect.io.File">SFile</a><a href="../../../io/Codec.scala.html#393359" title="=&gt; scala.io.Codec" class="delimiter">(</a><a href="../package.scala.html#55891" title="implicit scala.tools.partest.package.temporaryFile2Path : (x: java.io.File)scala.tools.nsc.io.Path">f</a><span class="delimiter">)</span>.<a href="../../../reflect/io/Path.scala.html#530895" title="=&gt; String">extension</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span> <a href="../../../collection/immutable/List.scala.html#62719" title="(f: java.io.File =&gt; Boolean)Unit">foreach</a>
      <span class="delimiter">{</span> <a title="java.io.File" id="1177715">f</a> =&gt; <a href="#1164381" title="=&gt; scala.tools.partest.nest.FileManager">fileManager</a>.<a href="FileManager.scala.html#1150638" title="(from: java.io.File, dest: java.io.File)Boolean">copyFile</a><span class="delimiter">(</span><a href="#1177715" title="java.io.File">f</a>, <a href="#1176491" title="java.io.File">destDir</a><span class="delimiter">)</span> <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(logFile: java.io.File)Unit" id="1164379">showLog</a><span class="delimiter">(</span><a title="java.io.File" id="1177487">logFile</a>: <span title="java.io.File">File</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    <a href="../package.scala.html#55903" title="(f: java.io.File)String">file2String</a><a href="#3377363" title="Unit" class="delimiter">(</a><a href="#1177487" title="java.io.File">logFile</a><span class="delimiter">)</span> <span class="keyword">match</span> <span class="delimiter">{</span>
      <span class="keyword">case</span> <a href="#3377358" title="Boolean" id="3377363" class="string">&quot;&quot;</a> <span class="keyword">if</span> <a href="#1177487" title="java.io.File">logFile</a>.<span title="()Boolean">canRead</span>  =&gt; <a href="#3377367" title="(x: Unit)Unit" class="delimiter">(</a><span class="delimiter">)</span>
      <span class="keyword">case</span> <span class="string">&quot;&quot;</span>                     =&gt; <a href="NestUI.scala.html#50828" title="scala.tools.partest.nest.NestUI.type">NestUI</a>.<a href="NestUI.scala.html#1147217" title="(msg: String)Unit">failure</a><a href="#3377367" title="(x: Unit)Unit" class="delimiter">(</a><span title="String(&quot;Couldn\'t open log file: &quot;)" class="string">&quot;Couldn't open log file: &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#1177487" title="java.io.File">logFile</a> <span title="(x$1: Any)String">+</span> <span title="String(&quot;\n&quot;)" class="string">&quot;\n&quot;</span><span class="delimiter">)</span>
      <span class="keyword">case</span> s                      =&gt; <a href="NestUI.scala.html#50828" title="scala.tools.partest.nest.NestUI.type">NestUI</a>.<a href="NestUI.scala.html#1147221" title="(msg: String)Unit">normal</a><a href="#3377367" title="(x: Unit)Unit" class="delimiter">(</a>s<span class="delimiter">)</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>
<span class="delimiter">}</span>

        </pre>
    </body>
</html>