<?xml version="1.0" encoding="utf-8"?>
      <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <meta http-equiv="Expires" content="0" />
        <title>scala/tools/partest/nest/CompileManager.scala</title>
        <script type="text/javascript" src="../../../../jquery-all.js"></script>
        <script type="text/javascript" src="../../../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../../../style.css" title="Style"></link>
    </head>
    <body>
        <pre>
/* NEST (New Scala Test)
 * Copyright 2007-2013 LAMP/EPFL
 * @author Philipp Haller
 */

// $Id$

<span class="keyword">package</span> scala.tools.partest
<span class="keyword">package</span> nest

<span class="keyword">import</span> scala.tools.nsc.<span class="delimiter">{</span> Global, Settings, CompilerCommand, FatalError, io <span class="delimiter">}</span>
<span class="keyword">import</span> scala.tools.nsc.io.<span class="delimiter">{</span> File =&gt; SFile <span class="delimiter">}</span>
<span class="keyword">import</span> scala.tools.nsc.interactive.RangePositions
<span class="keyword">import</span> scala.tools.nsc.reporters.<span class="delimiter">{</span> Reporter, ConsoleReporter <span class="delimiter">}</span>
<span class="keyword">import</span> scala.tools.nsc.util.<span class="delimiter">{</span> ClassPath, FakePos <span class="delimiter">}</span>
<span class="keyword">import</span> scala.tools.nsc.<a href="../../nsc/Properties.scala.html#27455" title="scala.tools.nsc.Properties.type">Properties</a>.<span class="delimiter">{</span> setProp, propOrEmpty <span class="delimiter">}</span>
<span class="keyword">import</span> scala.tools.util.PathResolver
<span class="keyword">import</span> io.Path
<span class="keyword">import</span> java.io.<span class="delimiter">{</span> File, BufferedReader, PrintWriter, FileReader, Writer, FileWriter, StringWriter <span class="delimiter">}</span>
<span class="keyword">import</span> <span title="java.io.File.type">File</span>.pathSeparator

<span class="keyword">sealed</span> <span class="keyword">abstract</span> <span class="keyword">class</span> <a title="class CompilationOutcome extends Object" id="50739">CompilationOutcome</a> <a href="#50739" title="scala.tools.partest.nest.CompilationOutcome" class="delimiter">{</a>
  <span class="keyword">def</span> <a title="(other: scala.tools.partest.nest.CompilationOutcome)scala.tools.partest.nest.CompilationOutcome" id="1160374">merge</a><span class="delimiter">(</span><a title="scala.tools.partest.nest.CompilationOutcome" id="1160378">other</a>: <a href="#50739" title="scala.tools.partest.nest.CompilationOutcome">CompilationOutcome</a><span class="delimiter">)</span>: <a href="#50739" title="scala.tools.partest.nest.CompilationOutcome">CompilationOutcome</a>
  <span class="keyword">def</span> <a title="=&gt; Boolean" id="1160375">isPositive</a> = <a href="#50739" title="CompilationOutcome.this.type" class="keyword">this</a> <span title="(x$1: AnyRef)Boolean">eq</span> <a href="#1160398" title="scala.tools.partest.nest.CompileSuccess.type">CompileSuccess</a>
  <span class="keyword">def</span> <a title="=&gt; Boolean" id="1160376">isNegative</a> = <a href="#50739" title="CompilationOutcome.this.type" class="keyword">this</a> <span title="(x$1: AnyRef)Boolean">eq</span> <a href="#1160414" title="scala.tools.partest.nest.CompileFailed.type">CompileFailed</a>
<span class="delimiter">}</span>
case <span class="keyword">object</span> <a href="#1160390" title="scala.tools.partest.nest.CompileSuccess.type" id="1160398">CompileSuccess</a> <a href="../../../Product.scala.html#186" title="Product" class="keyword">extends</a> <a href="#50739" title="scala.tools.partest.nest.CompilationOutcome">CompilationOutcome</a> <span class="delimiter">{</span>
  <span class="keyword">def</span> <a title="(other: scala.tools.partest.nest.CompilationOutcome)scala.tools.partest.nest.CompilationOutcome" id="1160380">merge</a><span class="delimiter">(</span><a title="scala.tools.partest.nest.CompilationOutcome" id="1160384">other</a>: <a href="#50739" title="scala.tools.partest.nest.CompilationOutcome">CompilationOutcome</a><span class="delimiter">)</span> = <a href="#1160384" title="scala.tools.partest.nest.CompilationOutcome">other</a>
<span class="delimiter">}</span>
case <span class="keyword">object</span> <a href="#1160406" title="scala.tools.partest.nest.CompileFailed.type" id="1160414">CompileFailed</a> <a href="../../../Product.scala.html#186" title="Product" class="keyword">extends</a> <a href="#50739" title="scala.tools.partest.nest.CompilationOutcome">CompilationOutcome</a> <span class="delimiter">{</span>
  <span class="keyword">def</span> <a title="(other: scala.tools.partest.nest.CompilationOutcome)scala.tools.partest.nest.CompilationOutcome" id="1160382">merge</a><span class="delimiter">(</span><a title="scala.tools.partest.nest.CompilationOutcome" id="1160400">other</a>: <a href="#50739" title="scala.tools.partest.nest.CompilationOutcome">CompilationOutcome</a><span class="delimiter">)</span> = <span title="scala.tools.partest.nest.CompilationOutcome" class="keyword">if</span> <span class="delimiter">(</span><a href="#1160400" title="scala.tools.partest.nest.CompilationOutcome">other</a> <span title="(x$1: AnyRef)Boolean">eq</span> <a href="#1160398" title="scala.tools.partest.nest.CompileSuccess.type">CompileSuccess</a><span class="delimiter">)</span> <span class="keyword">this</span> <span class="keyword">else</span> <a href="#1160400" title="scala.tools.partest.nest.CompilationOutcome">other</a>
<span class="delimiter">}</span>
case <span class="keyword">object</span> <a href="#1160424" title="scala.tools.partest.nest.CompilerCrashed.type" id="1160432">CompilerCrashed</a> <a href="../../../Product.scala.html#186" title="Product" class="keyword">extends</a> <a href="#50739" title="scala.tools.partest.nest.CompilationOutcome">CompilationOutcome</a> <span class="delimiter">{</span>
  <span class="keyword">def</span> <a title="(other: scala.tools.partest.nest.CompilationOutcome)scala.tools.partest.nest.CompilerCrashed.type" id="1160416">merge</a><span class="delimiter">(</span><a title="scala.tools.partest.nest.CompilationOutcome" id="1160418">other</a>: <a href="#50739" title="scala.tools.partest.nest.CompilationOutcome">CompilationOutcome</a><span class="delimiter">)</span> = <span class="keyword">this</span>
<span class="delimiter">}</span>

<span class="keyword">class</span> <a title="class ExtConsoleReporter extends scala.tools.nsc.reporters.ConsoleReporter" id="50746">ExtConsoleReporter</a><a href="#50746" title="scala.tools.partest.nest.ExtConsoleReporter" class="delimiter">(</a><a title="scala.tools.nsc.Settings" id="1160442">settings</a>: <a href="../../nsc/Settings.scala.html#27643" title="scala.tools.nsc.Settings">Settings</a>, <span class="keyword">val</span> <a title="java.io.PrintWriter" id="1160443">writer</a>: <span title="java.io.PrintWriter">PrintWriter</span><span class="delimiter">)</span> <span class="keyword">extends</span> <a href="../../nsc/reporters/ConsoleReporter.scala.html#41214" title="scala.tools.nsc.reporters.ConsoleReporter">ConsoleReporter</a><span class="delimiter">(</span><a href="#1160442" title="scala.tools.nsc.Settings">settings</a>, <a href="../../../Console.scala.html#136" title="Console.type">Console</a>.<a href="../../../Console.scala.html#63286" title="=&gt; java.io.BufferedReader">in</a>, <a href="#1160443" title="java.io.PrintWriter">writer</a><span class="delimiter">)</span> <span class="delimiter">{</span>
  <a href="../../nsc/reporters/ConsoleReporter.scala.html#601234" title="(x$1: Boolean)Unit">shortname</a> = <span title="Boolean(true)" class="keyword">true</span>
<span class="delimiter">}</span>

<span class="keyword">class</span> <a title="class TestSettings extends scala.tools.nsc.Settings" id="50747">TestSettings</a><a href="#50747" title="scala.tools.partest.nest.TestSettings" class="delimiter">(</a><a title="String" id="1160456">cp</a>: <span title="String">String</span>, <a title="String =&gt; Unit" id="1160457">error</a>: String =&gt; Unit<span class="delimiter">)</span> <span class="keyword">extends</span> <a href="../../nsc/Settings.scala.html#27643" title="scala.tools.nsc.Settings">Settings</a><span class="delimiter">(</span><a href="#1160457" title="String =&gt; Unit">error</a><span class="delimiter">)</span> <span class="delimiter">{</span>
  <span class="keyword">def</span> <a title="(cp: String)scala.tools.partest.nest.TestSettings" id="1160452" class="keyword">this</a><span class="delimiter">(</span><a title="String" id="1160464">cp</a>: <span title="String">String</span><span class="delimiter">)</span> = <a href="#50747" title="TestSettings.this.type" class="keyword">this</a><span class="delimiter">(</span><a href="#1160464" title="String">cp</a>, <a title="String" id="1160472">_</a> =&gt; <span title="Unit" class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span>

  <a href="../../nsc/settings/StandardScalaSettings.scala.html#540201" title="=&gt; TestSettings.this.BooleanSetting">deprecation</a>.<a href="../../../reflect/internal/settings/MutableSettings.scala.html#423753" title="(arg: TestSettings.this.deprecation.T)Unit">value</a> = <span title="Boolean(true)" class="keyword">true</span>
  <a href="../../nsc/settings/ScalaSettings.scala.html#540034" title="=&gt; TestSettings.this.BooleanSetting">nowarnings</a>.<a href="../../../reflect/internal/settings/MutableSettings.scala.html#423753" title="(arg: Boolean)Unit">value</a>  = <span title="Boolean(false)" class="keyword">false</span>
  <a href="../../nsc/settings/StandardScalaSettings.scala.html#540203" title="=&gt; TestSettings.this.StringSetting">encoding</a>.<a href="../../../reflect/internal/settings/MutableSettings.scala.html#423753" title="(arg: TestSettings.this.encoding.T)Unit">value</a>    = <span title="String(&quot;UTF-8&quot;)" class="string">&quot;UTF-8&quot;</span>
  <a href="../../nsc/settings/ScalaSettings.scala.html#539943" title="=&gt; TestSettings.this.PathSetting">classpath</a>.<a href="../../../reflect/internal/settings/MutableSettings.scala.html#423753" title="(arg: TestSettings.this.classpath.T)Unit">value</a>   = <a href="#1160456" title="String">cp</a>
<span class="delimiter">}</span>

<span class="keyword">abstract</span> <span class="keyword">class</span> <a title="class SimpleCompiler extends Object" id="50748">SimpleCompiler</a> <a href="#50748" title="scala.tools.partest.nest.SimpleCompiler" class="delimiter">{</a>
  <span class="keyword">def</span> <a title="(out: Option[java.io.File], files: List[java.io.File], kind: String, log: java.io.File)scala.tools.partest.nest.CompilationOutcome" id="1160483">compile</a><span class="delimiter">(</span><a title="Option[java.io.File]" id="1160485">out</a>: <a href="../../../Option.scala.html#978" title="Option[java.io.File]">Option</a><span class="delimiter">[</span>File<span class="delimiter">]</span>, <a title="List[java.io.File]" id="1160486">files</a>: <a href="../../../collection/immutable/List.scala.html#11952" title="List[java.io.File]">List</a><span class="delimiter">[</span>File<span class="delimiter">]</span>, <a title="String" id="1160487">kind</a>: <span title="String">String</span>, <a title="java.io.File" id="1160488">log</a>: <span title="java.io.File">File</span><span class="delimiter">)</span>: <a href="#50739" title="scala.tools.partest.nest.CompilationOutcome">CompilationOutcome</a>
<span class="delimiter">}</span>

<span title="Object" class="keyword">class</span> <a title="class DirectCompiler extends scala.tools.partest.nest.SimpleCompiler" id="50749">DirectCompiler</a><a href="#50749" title="scala.tools.partest.nest.DirectCompiler" class="delimiter">(</a><span class="keyword">val</span> <a title="scala.tools.partest.nest.FileManager" id="1160501">fileManager</a>: <a href="FileManager.scala.html#50818" title="scala.tools.partest.nest.FileManager">FileManager</a><span class="delimiter">)</span> <span class="keyword">extends</span> <a href="#50748" title="scala.tools.partest.nest.SimpleCompiler">SimpleCompiler</a> <span class="delimiter">{</span>
  <span class="keyword">def</span> <a title="(settings: scala.tools.nsc.Settings, reporter: scala.tools.nsc.reporters.Reporter)scala.tools.nsc.Global" id="1160493">newGlobal</a><span class="delimiter">(</span><a title="scala.tools.nsc.Settings" id="1160502">settings</a>: <a href="../../nsc/Settings.scala.html#27643" title="scala.tools.nsc.Settings">Settings</a>, <a title="scala.tools.nsc.reporters.Reporter" id="1160503">reporter</a>: <a href="../../nsc/reporters/Reporter.scala.html#41226" title="scala.tools.nsc.reporters.Reporter">Reporter</a><span class="delimiter">)</span>: <a href="../../nsc/Global.scala.html#27346" title="scala.tools.nsc.Global">Global</a> =
    <span title="scala.tools.nsc.Global" class="keyword">if</span> <span class="delimiter">(</span><a href="#1160502" title="scala.tools.nsc.Settings">settings</a>.<a href="../../nsc/settings/ScalaSettings.scala.html#540111" title="=&gt; settings.BooleanSetting">Yrangepos</a>.<a href="../../nsc/settings/MutableSettings.scala.html#541066" title="=&gt; Boolean">value</a><span class="delimiter">)</span>
      <a href="#1160504" title="scala.tools.nsc.Global with scala.tools.nsc.interactive.RangePositions" class="keyword">new</a> <a href="../../nsc/Global.scala.html#27346" title="anonymous class $anon extends scala.tools.nsc.Global with scala.tools.nsc.interactive.RangePositions" id="1160504">Global</a><span class="delimiter">(</span><a href="#1160502" title="scala.tools.nsc.Settings">settings</a>, <a href="#1160503" title="scala.tools.nsc.reporters.Reporter">reporter</a><span class="delimiter">)</span> <span class="keyword">with</span> <a href="../../nsc/interactive/RangePositions.scala.html#35922" title="scala.tools.nsc.interactive.RangePositions">RangePositions</a>
    <span class="keyword">else</span>
      <span title="scala.tools.nsc.Global" class="keyword">new</span> <a href="../../nsc/Global.scala.html#27346" title="scala.tools.nsc.Global">Global</a><span class="delimiter">(</span><a href="#1160502" title="scala.tools.nsc.Settings">settings</a>, <a href="#1160503" title="scala.tools.nsc.reporters.Reporter">reporter</a><span class="delimiter">)</span>

  <span class="keyword">def</span> <a title="(settings: scala.tools.nsc.Settings, logWriter: java.io.FileWriter)scala.tools.nsc.Global" id="1160494">newGlobal</a><span class="delimiter">(</span><a title="scala.tools.nsc.Settings" id="1160780">settings</a>: <a href="../../nsc/Settings.scala.html#27643" title="scala.tools.nsc.Settings">Settings</a>, <a title="java.io.FileWriter" id="1160781">logWriter</a>: <span title="java.io.FileWriter">FileWriter</span><span class="delimiter">)</span>: <a href="../../nsc/Global.scala.html#27346" title="scala.tools.nsc.Global">Global</a> =
    <a href="#1160493" title="(settings: scala.tools.nsc.Settings, reporter: scala.tools.nsc.reporters.Reporter)scala.tools.nsc.Global">newGlobal</a><span class="delimiter">(</span><a href="#1160780" title="scala.tools.nsc.Settings">settings</a>, <span title="scala.tools.partest.nest.ExtConsoleReporter" class="keyword">new</span> <a href="#50746" title="scala.tools.partest.nest.ExtConsoleReporter">ExtConsoleReporter</a><span class="delimiter">(</span><a href="#1160780" title="scala.tools.nsc.Settings">settings</a>, <span title="java.io.PrintWriter" class="keyword">new</span> <span title="java.io.PrintWriter">PrintWriter</span><span class="delimiter">(</span><a href="#1160781" title="java.io.FileWriter">logWriter</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>

  <span class="keyword">def</span> <a title="()scala.tools.partest.nest.TestSettings" id="1160495">newSettings</a><span class="delimiter">(</span><span class="delimiter">)</span>: <a href="#50747" title="scala.tools.partest.nest.TestSettings">TestSettings</a> = <a href="#1160452" title="(cp: String)scala.tools.partest.nest.TestSettings" class="keyword">new</a> <a href="#50747" title="scala.tools.partest.nest.TestSettings">TestSettings</a><span class="delimiter">(</span><a href="#1160501" title="=&gt; scala.tools.partest.nest.FileManager">fileManager</a>.<a href="FileManager.scala.html#1150596" title="=&gt; String">LATEST_LIB</a><span class="delimiter">)</span>
  <span class="keyword">def</span> <a title="(outdir: String)scala.tools.partest.nest.TestSettings" id="1160496">newSettings</a><span class="delimiter">(</span><a title="String" id="1160794">outdir</a>: <span title="String">String</span><span class="delimiter">)</span>: <a href="#50747" title="scala.tools.partest.nest.TestSettings">TestSettings</a> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="String" id="1160795">cp</a> = <a href="../../nsc/util/ClassPath.scala.html#50228" title="scala.tools.nsc.util.ClassPath.type">ClassPath</a>.<a href="../../nsc/util/ClassPath.scala.html#538286" title="(paths: String*)String">join</a><span class="delimiter">(</span><a href="#1160501" title="=&gt; scala.tools.partest.nest.FileManager">fileManager</a>.<a href="FileManager.scala.html#1150596" title="=&gt; String">LATEST_LIB</a>, <a href="#1160794" title="String">outdir</a><span class="delimiter">)</span>
    <span class="keyword">val</span> <a title="scala.tools.partest.nest.TestSettings" id="1160796">s</a> = <a href="#1160452" title="(cp: String)scala.tools.partest.nest.TestSettings" class="keyword">new</a> <a href="#50747" title="scala.tools.partest.nest.TestSettings">TestSettings</a><span class="delimiter">(</span><a href="#1160795" title="String">cp</a><span class="delimiter">)</span>
    <a href="#1160796" title="scala.tools.partest.nest.TestSettings">s</a>.<a href="../../nsc/settings/ScalaSettings.scala.html#540035" title="=&gt; s.OutputSetting">outdir</a>.<a href="../../nsc/settings/MutableSettings.scala.html#593252" title="(str: String)Unit">value</a> = <a href="#1160794" title="String">outdir</a>

    <a href="#1160796" title="scala.tools.partest.nest.TestSettings">s</a>
  <span class="delimiter">}</span>

  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(options: String)String" id="1160497">updatePluginPath</a><span class="delimiter">(</span><a title="String" id="1160804">options</a>: <span title="String">String</span><span class="delimiter">)</span>: <span title="String">String</span> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="tools.nsc.io.Directory" id="1160805">dir</a> = <a href="#1160501" title="=&gt; scala.tools.partest.nest.FileManager">fileManager</a>.<a href="FileManager.scala.html#1150588" title="=&gt; tools.nsc.io.Directory">testRootDir</a>
    <span class="keyword">def</span> <a title="(path: String)String" id="1160806">absolutize</a><span class="delimiter">(</span><a title="String" id="1160812">path</a>: <span title="String">String</span><span class="delimiter">)</span> = <a href="../../../reflect/io/Path.scala.html#531017" title="(path: String)scala.reflect.io.Path">Path</a><a href="#3376767" title="String" class="delimiter">(</a><a href="#1160812" title="String">path</a><span class="delimiter">)</span> <span class="keyword">match</span> <span class="delimiter">{</span>
      <span class="keyword">case</span> x <span class="keyword">if</span> x.<a href="../../../reflect/io/Path.scala.html#530912" title="=&gt; Boolean">isAbsolute</a>  =&gt; x.<a href="#3376769" title="(x: String)String">path</a>
      <span class="keyword">case</span> x                  =&gt; <span class="delimiter">(</span><a href="#1160501" title="=&gt; scala.tools.partest.nest.FileManager">fileManager</a>.<a href="FileManager.scala.html#1150588" title="=&gt; tools.nsc.io.Directory">testRootDir</a> <a href="../../../reflect/io/Path.scala.html#530880" title="(child: scala.reflect.io.Path)scala.reflect.io.Path">/</a> x<span class="delimiter">)</span>.<a href="../../../reflect/io/Path.scala.html#530875" title="=&gt; scala.reflect.io.Path">toAbsolute</a>.<a href="#3376769" title="(x: String)String">path</a>
    <span class="delimiter">}</span>

    <span class="keyword">val</span> <a href="#3376776" title="(x: (List[String], List[String]))(List[String], List[String])" class="delimiter">(</a><a href="../../../Tuple2.scala.html#60635" title="List[String]" id="1160808">opt1</a>, <a href="../../../Tuple2.scala.html#60637" title="List[String]" id="1160809">opt2</a><span class="delimiter">)</span> = <span class="delimiter">(</span><a href="#1160804" title="String">options</a> <a href="../../../Predef.scala.html#7555" title="(xs: Array[String])scala.collection.mutable.ArrayOps[String]">split</a> <span title="String(&quot;\\s&quot;)" class="string">&quot;\\s&quot;</span><span class="delimiter">)</span>.<a href="../../../collection/TraversableOnce.scala.html#58263" title="=&gt; List[String]">toList</a> <a href="../../../collection/TraversableLike.scala.html#58080" title="(p: String =&gt; Boolean)(List[String], List[String])">partition</a> <span class="delimiter">(</span><a href="#1160895" title="String">_</a> <span title="(x$1: String)Boolean">startsWith</span> <span title="String(&quot;-Xplugin:&quot;)" class="string">&quot;-Xplugin:&quot;</span><span class="delimiter">)</span>
    <span class="keyword">val</span> <a title="List[String]" id="1160810">plugins</a> = <a href="#1160808" title="List[String]">opt1</a> <a href="../../../collection/TraversableLike.scala.html#58063" title="(f: String =&gt; String)(implicit bf: scala.collection.generic.CanBuildFrom[List[String],String,List[String]])List[String]">map</a> <span class="delimiter">(</span><a href="../../../Predef.scala.html#7604" title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps">_</a> <a href="../../../collection/immutable/StringLike.scala.html#59860" title="(prefix: String)String">stripPrefix</a> <span title="String(&quot;-Xplugin:&quot;)" class="string">&quot;-Xplugin:&quot;</span><span class="delimiter">)</span> <a href="../../../collection/TraversableLike.scala.html#58068" title="(f: String =&gt; scala.collection.GenTraversableOnce[String])(implicit bf: scala.collection.generic.CanBuildFrom[List[String],String,List[String]])List[String]">flatMap</a> <span class="delimiter">(</span><a href="#1160976" title="String">_</a> <a href="../../../Predef.scala.html#7555" title="(xs: Array[String])scala.collection.mutable.ArrayOps[String]">split</a> <span title="String">pathSeparator</span><span class="delimiter">)</span> <a href="../../../collection/TraversableLike.scala.html#58063" title="(f: String =&gt; String)(implicit bf: scala.collection.generic.CanBuildFrom[List[String],String,List[String]])List[String]">map</a> <a href="#1160806" title="(path: String)String">absolutize</a>
    <span class="keyword">val</span> <a title="List[String]" id="1160811">pluginOption</a> = <span title="List[String]" class="keyword">if</span> <span class="delimiter">(</span><a href="#1160808" title="List[String]">opt1</a>.<a href="../../../collection/SeqLike.scala.html#58787" title="=&gt; Boolean">isEmpty</a><span class="delimiter">)</span> <a href="../../../collection/immutable/List.scala.html#11188" title="scala.collection.immutable.Nil.type">Nil</a> <span class="keyword">else</span> <a href="../../../collection/immutable/List.scala.html#62451" title="(xs: String*)List[String]">List</a><span class="delimiter">(</span><span title="String(&quot;-Xplugin:&quot;)" class="string">&quot;-Xplugin:&quot;</span> <span title="(x$1: Any)String">+</span> <span class="delimiter">(</span><a href="#1160810" title="List[String]">plugins</a> <a href="../../../collection/TraversableOnce.scala.html#58283" title="(sep: String)String">mkString</a> <span title="String">pathSeparator</span><span class="delimiter">)</span><span class="delimiter">)</span>

    <span class="delimiter">(</span><a href="#1160809" title="List[String]">opt2</a> <a href="../../../collection/immutable/List.scala.html#62688" title="(prefix: List[String])List[String]">:::</a> <a href="#1160811" title="List[String]">pluginOption</a><span class="delimiter">)</span> <a href="../../../collection/TraversableOnce.scala.html#58283" title="(sep: String)String">mkString</a> <span title="String(&quot; &quot;)" class="string">&quot; &quot;</span>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="(out: Option[java.io.File], files: List[java.io.File], kind: String, log: java.io.File)scala.tools.partest.nest.CompilationOutcome" id="1160498">compile</a><span class="delimiter">(</span><a title="Option[java.io.File]" id="1161105">out</a>: <a href="../../../Option.scala.html#978" title="Option[java.io.File]">Option</a><span class="delimiter">[</span>File<span class="delimiter">]</span>, <a title="List[java.io.File]" id="1161106">files</a>: <a href="../../../collection/immutable/List.scala.html#11952" title="List[java.io.File]">List</a><span class="delimiter">[</span>File<span class="delimiter">]</span>, <a title="String" id="1161107">kind</a>: <span title="String">String</span>, <a title="java.io.File" id="1161108">log</a>: <span title="java.io.File">File</span><span class="delimiter">)</span>: <a href="#50739" title="scala.tools.partest.nest.CompilationOutcome">CompilationOutcome</a> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="scala.tools.partest.nest.TestSettings" id="1161109">testSettings</a> = <a href="#1161105" title="Option[java.io.File]">out</a> <span class="keyword">match</span> <span class="delimiter">{</span>
      <span class="keyword">case</span> Some<a href="#3376780" title="scala.tools.partest.nest.TestSettings" id="3376781" class="delimiter">(</a><a href="../../../Option.scala.html#63132" title="java.io.File" id="1161127">f</a><span class="delimiter">)</span>  =&gt; <a href="#1160496" title="(outdir: String)scala.tools.partest.nest.TestSettings">newSettings</a><a href="#3376783" title="(x: scala.tools.partest.nest.TestSettings)scala.tools.partest.nest.TestSettings" class="delimiter">(</a><a href="#1161127" title="java.io.File">f</a>.<span title="()String">getAbsolutePath</span><span class="delimiter">)</span>
      <span class="keyword">case</span> _        =&gt; <a href="#1160495" title="()scala.tools.partest.nest.TestSettings">newSettings</a><a href="#3376783" title="(x: scala.tools.partest.nest.TestSettings)scala.tools.partest.nest.TestSettings" class="delimiter">(</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>
    <span class="keyword">val</span> <a title="java.io.FileWriter" id="1161110">logWriter</a> = <span title="(x$1: java.io.File)java.io.FileWriter" class="keyword">new</span> <span title="java.io.FileWriter">FileWriter</span><span class="delimiter">(</span><a href="#1161108" title="java.io.File">log</a><span class="delimiter">)</span>

    // check whether there is a &quot;.flags&quot; file
    <span class="keyword">val</span> <a title="String" id="1161111">logFile</a> = <a href="../package.scala.html#55904" title="(name: String)String">basename</a><span class="delimiter">(</span><a href="#1161108" title="java.io.File">log</a>.<span title="()String">getName</span><span class="delimiter">)</span>
    <span class="keyword">val</span> <a title="String" id="1161112">flagsFileName</a> = <a href="../../../Predef.scala.html#7604" title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps" class="string">&quot;%s.flags&quot;</a> <a href="../../../collection/immutable/StringLike.scala.html#59882" title="(args: Any*)String">format</a> <span class="delimiter">(</span><a href="#1161111" title="String">logFile</a>.<span title="(x$1: Int, x$2: Int)String">substring</span><span class="delimiter">(</span><span title="Int(0)" class="int">0</span>, <a href="#1161111" title="String">logFile</a>.<span title="(x$1: String)Int">lastIndexOf</span><span class="delimiter">(</span><span title="String(&quot;-&quot;)" class="string">&quot;-&quot;</span><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
    <span class="keyword">val</span> <a title="String" id="1161113">argString</a> = <span class="delimiter">(</span>io.<a href="../../../reflect/io/File.scala.html#530996" title="(path: scala.reflect.io.Path)(implicit codec: scala.io.Codec)scala.reflect.io.File">File</a><a href="../../../io/Codec.scala.html#393359" title="=&gt; scala.io.Codec" class="delimiter">(</a><a href="../package.scala.html#55891" title="implicit scala.tools.partest.package.temporaryFile2Path : (x: java.io.File)scala.tools.nsc.io.Path">log</a><span class="delimiter">)</span>.<a href="../../../reflect/io/Path.scala.html#530893" title="=&gt; scala.reflect.io.Directory">parent</a> <a href="../../../reflect/io/Path.scala.html#530880" title="(child: scala.reflect.io.Path)scala.reflect.io.Path">/</a> <a href="../../../reflect/io/Path.scala.html#531009" title="implicit scala.reflect.io.Path.string2path : (s: String)scala.reflect.io.Path">flagsFileName</a><span class="delimiter">)</span> <a href="../../../reflect/io/Path.scala.html#530900" title="(f: scala.reflect.io.File =&gt; String)Option[String]">ifFile</a> <span class="delimiter">(</span><a title="scala.reflect.io.File" id="1161157">x</a> =&gt; <a href="#1160497" title="(options: String)String">updatePluginPath</a><span class="delimiter">(</span><a href="#1161157" title="scala.reflect.io.File">x</a>.<a href="../../../reflect/io/Streamable.scala.html#530988" title="()String">slurp</a><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span> <a href="../../../Option.scala.html#62859" title="(default: =&gt; String)String">getOrElse</a> <span title="String(&quot;&quot;)" class="string">&quot;&quot;</span>

    // slurp local flags (e.g., &quot;A_1.flags&quot;)
    <span class="keyword">val</span> <a title="scala.reflect.io.File" id="1161114">fstFile</a> = <a href="../../../reflect/io/File.scala.html#530996" title="(path: scala.reflect.io.Path)(implicit codec: scala.io.Codec)scala.reflect.io.File">SFile</a><a href="../../../io/Codec.scala.html#393359" title="=&gt; scala.io.Codec" class="delimiter">(</a><a href="../../../collection/LinearSeqOptimized.scala.html#86374" title="(n: Int)java.io.File">files</a><a href="../package.scala.html#55891" title="implicit scala.tools.partest.package.temporaryFile2Path : (x: java.io.File)scala.tools.nsc.io.Path" class="delimiter">(</a><span title="Int(0)" class="int">0</span><span class="delimiter">)</span><span class="delimiter">)</span>
    <span class="keyword">def</span> <a title="(num: Int)Boolean" id="1161115">isInGroup</a><span class="delimiter">(</span><a title="Int" id="1161173">num</a>: <a href="../../../Int.scala.html#321" title="Int">Int</a><span class="delimiter">)</span> = <a href="#1161114" title="scala.reflect.io.File">fstFile</a>.<a href="../../../reflect/io/Path.scala.html#530897" title="=&gt; String">stripExtension</a> <span title="(x$1: String)Boolean">endsWith</span> <span class="delimiter">(</span><span title="String(&quot;_&quot;)" class="string">&quot;_&quot;</span> <span title="(x$1: Any)String">+</span> <a href="#1161173" title="Int">num</a><span class="delimiter">)</span>
    <span class="keyword">val</span> <a title="scala.collection.immutable.IndexedSeq[Int]" id="1161116">inGroup</a> = <span class="delimiter">(</span><a href="../../../LowPriorityImplicits.scala.html#7395" title="implicit scala.LowPriorityImplicits.intWrapper : (x: Int)scala.runtime.RichInt" class="int">1</a> <a href="../../../runtime/RichInt.scala.html#57062" title="(end: Int)scala.collection.immutable.Range.Inclusive">to</a> <span title="Int(9)" class="int">9</span><span class="delimiter">)</span> <a href="../../../collection/TraversableLike.scala.html#58068" title="(f: Int =&gt; scala.collection.GenTraversableOnce[Int])(implicit bf: scala.collection.generic.CanBuildFrom[scala.collection.immutable.IndexedSeq[Int],Int,scala.collection.immutable.IndexedSeq[Int]])scala.collection.immutable.IndexedSeq[Int]">flatMap</a> <span class="delimiter">(</span><a title="Int" id="1161306">group</a> =&gt; <span title="List[Int]" class="keyword">if</span> <span class="delimiter">(</span><a href="#1161115" title="(num: Int)Boolean">isInGroup</a><span class="delimiter">(</span><a href="#1161306" title="Int">group</a><span class="delimiter">)</span><span class="delimiter">)</span> <a href="../../../collection/immutable/List.scala.html#62451" title="(xs: Int*)List[Int]">List</a><span class="delimiter">(</span><a href="#1161306" title="Int">group</a><span class="delimiter">)</span> <span class="keyword">else</span> List<a href="../../../collection/immutable/List.scala.html#11188" title="scala.collection.immutable.Nil.type" class="delimiter">(</a><span class="delimiter">)</span><span class="delimiter">)</span>
    <span class="keyword">val</span> <a title="List[String]" id="1161117">localFlagsList</a> = <span title="List[String]" class="keyword">if</span> <span class="delimiter">(</span><a href="#1161116" title="scala.collection.immutable.IndexedSeq[Int]">inGroup</a>.<a href="../../../collection/TraversableOnce.scala.html#58191" title="=&gt; Boolean">nonEmpty</a><span class="delimiter">)</span> <span class="delimiter">{</span>
      <span class="keyword">val</span> <a title="String" id="1161352">localArgString</a> = <span class="delimiter">(</span><a href="#1161114" title="scala.reflect.io.File">fstFile</a>.<a href="../../../reflect/io/Path.scala.html#530893" title="=&gt; scala.reflect.io.Directory">parent</a> <a href="../../../reflect/io/Path.scala.html#530880" title="(child: scala.reflect.io.Path)scala.reflect.io.Path">/</a> <span class="delimiter">(</span><a href="#1161114" title="scala.reflect.io.File">fstFile</a>.<a href="../../../reflect/io/Path.scala.html#530897" title="=&gt; String">stripExtension</a> <a href="../../../reflect/io/Path.scala.html#531009" title="implicit scala.reflect.io.Path.string2path : (s: String)scala.reflect.io.Path">+</a> <span title="String(&quot;.flags&quot;)" class="string">&quot;.flags&quot;</span><span class="delimiter">)</span><span class="delimiter">)</span> <a href="../../../reflect/io/Path.scala.html#530900" title="(f: scala.reflect.io.File =&gt; String)Option[String]">ifFile</a> <span class="delimiter">(</span><a title="scala.reflect.io.File" id="1161360">x</a> =&gt; <a href="#1160497" title="(options: String)String">updatePluginPath</a><span class="delimiter">(</span><a href="#1161360" title="scala.reflect.io.File">x</a>.<a href="../../../reflect/io/Streamable.scala.html#530988" title="()String">slurp</a><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span> <a href="../../../Option.scala.html#62859" title="(default: =&gt; String)String">getOrElse</a> <span title="String(&quot;&quot;)" class="string">&quot;&quot;</span>
      <a href="../../../Predef.scala.html#7604" title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps">localArgString</a>.<a href="../../../collection/immutable/StringLike.scala.html#59866" title="(separator: Char)Array[String]">split</a><a href="../../../Predef.scala.html#7555" title="(xs: Array[String])scala.collection.mutable.ArrayOps[String]" class="delimiter">(</a><span title="Char(' ')" class="char">' '</span><span class="delimiter">)</span>.<a href="../../../collection/TraversableOnce.scala.html#58263" title="=&gt; List[String]">toList</a>.<a href="../../../collection/TraversableLike.scala.html#58073" title="(p: String =&gt; Boolean)List[String]">filter</a><span class="delimiter">(</span><a href="#1161455" title="String">_</a>.<span title="()Int">length</span> <a href="../../../Int.scala.html#57125" title="(x: Int)Boolean">&gt;</a> <span title="Int(0)" class="int">0</span><span class="delimiter">)</span>
    <span class="delimiter">}</span> <span class="keyword">else</span> List<a href="../../../collection/immutable/List.scala.html#11188" title="scala.collection.immutable.Nil.type" class="delimiter">(</a><span class="delimiter">)</span>

    <span class="keyword">val</span> <a title="List[String]" id="1161118">allOpts</a> = <a href="#1160501" title="=&gt; scala.tools.partest.nest.FileManager">fileManager</a>.<a href="FileManager.scala.html#1150618" title="=&gt; Seq[String]">SCALAC_OPTS</a>.<a href="../../../collection/TraversableOnce.scala.html#58263" title="=&gt; List[String]">toList</a> <a href="../../../collection/immutable/List.scala.html#62688" title="(prefix: List[String])List[String]">:::</a> <a href="../../../Predef.scala.html#7604" title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps">argString</a>.<a href="../../../collection/immutable/StringLike.scala.html#59866" title="(separator: Char)Array[String]">split</a><a href="../../../Predef.scala.html#7555" title="(xs: Array[String])scala.collection.mutable.ArrayOps[String]" class="delimiter">(</a><span title="Char(' ')" class="char">' '</span><span class="delimiter">)</span>.<a href="../../../collection/TraversableOnce.scala.html#58263" title="=&gt; List[String]">toList</a>.<a href="../../../collection/TraversableLike.scala.html#58073" title="(p: String =&gt; Boolean)List[String]">filter</a><span class="delimiter">(</span><a href="#1161558" title="String">_</a>.<span title="()Int">length</span> <a href="../../../Int.scala.html#57125" title="(x: Int)Boolean">&gt;</a> <span title="Int(0)" class="int">0</span><span class="delimiter">)</span> <a href="../../../collection/immutable/List.scala.html#62688" title="(prefix: List[String])List[String]">:::</a> <a href="#1161117" title="List[String]">localFlagsList</a>
    <span class="keyword">val</span> <a title="List[String]" id="1161119">args</a> = <a href="#1161118" title="List[String]">allOpts</a>.<a href="../../../collection/immutable/List.scala.html#62707" title="=&gt; List[String]">toList</a>

    <a href="NestUI.scala.html#50828" title="scala.tools.partest.nest.NestUI.type">NestUI</a>.<a href="NestUI.scala.html#1147230" title="(msg: String)Unit">verbose</a><span class="delimiter">(</span><span title="String(&quot;scalac options: &quot;)" class="string">&quot;scalac options: &quot;</span><span title="(x$1: Any)String">+</span><a href="#1161118" title="List[String]">allOpts</a><span class="delimiter">)</span>

    <span class="keyword">val</span> <a title="scala.tools.nsc.CompilerCommand" id="1161120">command</a> = <span title="scala.tools.nsc.CompilerCommand" class="keyword">new</span> <a href="../../nsc/CompilerCommand.scala.html#27796" title="scala.tools.nsc.CompilerCommand">CompilerCommand</a><span class="delimiter">(</span><a href="#1161119" title="List[String]">args</a>, <a href="#1161109" title="scala.tools.partest.nest.TestSettings">testSettings</a><span class="delimiter">)</span>
    <span class="keyword">val</span> <a title="scala.tools.nsc.Global" id="1161121">global</a> = <a href="#1160494" title="(settings: scala.tools.nsc.Settings, logWriter: java.io.FileWriter)scala.tools.nsc.Global">newGlobal</a><span class="delimiter">(</span><a href="#1161120" title="scala.tools.nsc.CompilerCommand">command</a>.<a href="../../nsc/CompilerCommand.scala.html#600794" title="=&gt; scala.tools.nsc.Settings">settings</a>, <a href="#1161110" title="java.io.FileWriter">logWriter</a><span class="delimiter">)</span>
    <span class="keyword">val</span> <a title="scala.tools.partest.nest.ExtConsoleReporter" id="1161122">testRep</a>: <a href="#50746" title="scala.tools.partest.nest.ExtConsoleReporter">ExtConsoleReporter</a> = <a href="#1161121" title="scala.tools.nsc.Global">global</a>.<a href="../../nsc/Global.scala.html#537436" title="=&gt; scala.tools.nsc.reporters.Reporter">reporter</a>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="scala.tools.partest.nest.ExtConsoleReporter" class="delimiter">[</span><a href="#50746" title="scala.tools.partest.nest.ExtConsoleReporter">ExtConsoleReporter</a><span class="delimiter">]</span>

    <span class="keyword">val</span> <a title="(java.io.File, scala.tools.partest.nest.FileManager) =&gt; scala.tools.partest.nest.TestFile" id="1161123">testFileFn</a>: <span class="delimiter">(</span>File, FileManager<span class="delimiter">)</span> =&gt; TestFile = <a href="#1161107" title="String">kind</a> <span class="keyword">match</span> <span class="delimiter">{</span>
      <span class="keyword">case</span> <a href="#3376788" title="(java.io.File, scala.tools.partest.nest.FileManager) =&gt; scala.tools.partest.nest.TestFile" id="3376811" class="string">&quot;pos&quot;</a>          =&gt; <a href="TestFile.scala.html#50901" title="scala.tools.partest.nest.PosTestFile.type">PosTestFile</a>.<a href="#3376823" title="(x: (java.io.File, scala.tools.partest.nest.FileManager) =&gt; scala.tools.partest.nest.TestFile)(java.io.File, scala.tools.partest.nest.FileManager) =&gt; scala.tools.partest.nest.TestFile">apply</a>
      <span class="keyword">case</span> <a href="#3376788" title="(java.io.File, scala.tools.partest.nest.FileManager) =&gt; scala.tools.partest.nest.TestFile" id="3376812" class="string">&quot;neg&quot;</a>          =&gt; <a href="TestFile.scala.html#50904" title="scala.tools.partest.nest.NegTestFile.type">NegTestFile</a>.<a href="#3376823" title="(x: (java.io.File, scala.tools.partest.nest.FileManager) =&gt; scala.tools.partest.nest.TestFile)(java.io.File, scala.tools.partest.nest.FileManager) =&gt; scala.tools.partest.nest.TestFile">apply</a>
      <span class="keyword">case</span> <a href="#3376788" title="(java.io.File, scala.tools.partest.nest.FileManager) =&gt; scala.tools.partest.nest.TestFile" id="3376813" class="string">&quot;run&quot;</a>          =&gt; <a href="TestFile.scala.html#50907" title="scala.tools.partest.nest.RunTestFile.type">RunTestFile</a>.<a href="#3376823" title="(x: (java.io.File, scala.tools.partest.nest.FileManager) =&gt; scala.tools.partest.nest.TestFile)(java.io.File, scala.tools.partest.nest.FileManager) =&gt; scala.tools.partest.nest.TestFile">apply</a>
      <span class="keyword">case</span> <a href="#3376788" title="(java.io.File, scala.tools.partest.nest.FileManager) =&gt; scala.tools.partest.nest.TestFile" id="3376814" class="string">&quot;jvm&quot;</a>          =&gt; <a href="TestFile.scala.html#50916" title="scala.tools.partest.nest.JvmTestFile.type">JvmTestFile</a>.<a href="#3376823" title="(x: (java.io.File, scala.tools.partest.nest.FileManager) =&gt; scala.tools.partest.nest.TestFile)(java.io.File, scala.tools.partest.nest.FileManager) =&gt; scala.tools.partest.nest.TestFile">apply</a>
      <span class="keyword">case</span> <a href="#3376788" title="(java.io.File, scala.tools.partest.nest.FileManager) =&gt; scala.tools.partest.nest.TestFile" id="3376815" class="string">&quot;shootout&quot;</a>     =&gt; <a href="TestFile.scala.html#50919" title="scala.tools.partest.nest.ShootoutTestFile.type">ShootoutTestFile</a>.<a href="#3376823" title="(x: (java.io.File, scala.tools.partest.nest.FileManager) =&gt; scala.tools.partest.nest.TestFile)(java.io.File, scala.tools.partest.nest.FileManager) =&gt; scala.tools.partest.nest.TestFile">apply</a>
      <span class="keyword">case</span> <a href="#3376788" title="(java.io.File, scala.tools.partest.nest.FileManager) =&gt; scala.tools.partest.nest.TestFile" id="3376816" class="string">&quot;scalap&quot;</a>       =&gt; <a href="TestFile.scala.html#50922" title="scala.tools.partest.nest.ScalapTestFile.type">ScalapTestFile</a>.<a href="#3376823" title="(x: (java.io.File, scala.tools.partest.nest.FileManager) =&gt; scala.tools.partest.nest.TestFile)(java.io.File, scala.tools.partest.nest.FileManager) =&gt; scala.tools.partest.nest.TestFile">apply</a>
      <span class="keyword">case</span> <a href="#3376788" title="(java.io.File, scala.tools.partest.nest.FileManager) =&gt; scala.tools.partest.nest.TestFile" id="3376817" class="string">&quot;scalacheck&quot;</a>   =&gt; <a href="TestFile.scala.html#50913" title="scala.tools.partest.nest.ScalaCheckTestFile.type">ScalaCheckTestFile</a>.<a href="#3376823" title="(x: (java.io.File, scala.tools.partest.nest.FileManager) =&gt; scala.tools.partest.nest.TestFile)(java.io.File, scala.tools.partest.nest.FileManager) =&gt; scala.tools.partest.nest.TestFile">apply</a>
      <span class="keyword">case</span> <a href="#3376788" title="(java.io.File, scala.tools.partest.nest.FileManager) =&gt; scala.tools.partest.nest.TestFile" id="3376818" class="string">&quot;specialized&quot;</a>  =&gt; <a href="TestFile.scala.html#50925" title="scala.tools.partest.nest.SpecializedTestFile.type">SpecializedTestFile</a>.<a href="#3376823" title="(x: (java.io.File, scala.tools.partest.nest.FileManager) =&gt; scala.tools.partest.nest.TestFile)(java.io.File, scala.tools.partest.nest.FileManager) =&gt; scala.tools.partest.nest.TestFile">apply</a>
      <span class="keyword">case</span> <a href="#3376788" title="(java.io.File, scala.tools.partest.nest.FileManager) =&gt; scala.tools.partest.nest.TestFile" id="3376819" class="string">&quot;instrumented&quot;</a> =&gt; <a href="TestFile.scala.html#50934" title="scala.tools.partest.nest.InstrumentedTestFile.type">InstrumentedTestFile</a>.<a href="#3376823" title="(x: (java.io.File, scala.tools.partest.nest.FileManager) =&gt; scala.tools.partest.nest.TestFile)(java.io.File, scala.tools.partest.nest.FileManager) =&gt; scala.tools.partest.nest.TestFile">apply</a>
      <span class="keyword">case</span> <a href="#3376788" title="(java.io.File, scala.tools.partest.nest.FileManager) =&gt; scala.tools.partest.nest.TestFile" id="3376820" class="string">&quot;presentation&quot;</a> =&gt; <a href="TestFile.scala.html#50928" title="scala.tools.partest.nest.PresentationTestFile.type">PresentationTestFile</a>.<a href="#3376823" title="(x: (java.io.File, scala.tools.partest.nest.FileManager) =&gt; scala.tools.partest.nest.TestFile)(java.io.File, scala.tools.partest.nest.FileManager) =&gt; scala.tools.partest.nest.TestFile">apply</a>
      <span class="keyword">case</span> <a href="#3376788" title="(java.io.File, scala.tools.partest.nest.FileManager) =&gt; scala.tools.partest.nest.TestFile" id="3376821" class="string">&quot;ant&quot;</a>          =&gt; <a href="TestFile.scala.html#50931" title="scala.tools.partest.nest.AntTestFile.type">AntTestFile</a>.<a href="#3376823" title="(x: (java.io.File, scala.tools.partest.nest.FileManager) =&gt; scala.tools.partest.nest.TestFile)(java.io.File, scala.tools.partest.nest.FileManager) =&gt; scala.tools.partest.nest.TestFile">apply</a>
    <span class="delimiter">}</span>
    <span class="keyword">val</span> <a title="scala.tools.partest.nest.TestFile" id="1161124">test</a>: <a href="TestFile.scala.html#50899" title="scala.tools.partest.nest.TestFile">TestFile</a> = <a href="../../../Function2.scala.html#65848" title="(v1: java.io.File, v2: scala.tools.partest.nest.FileManager)scala.tools.partest.nest.TestFile">testFileFn</a><span class="delimiter">(</span><a href="#1161106" title="List[java.io.File]">files</a>.<a href="../../../collection/IterableLike.scala.html#58577" title="=&gt; java.io.File">head</a>, <a href="#1160501" title="=&gt; scala.tools.partest.nest.FileManager">fileManager</a><span class="delimiter">)</span>
    <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="../../../Boolean.scala.html#57822" title="=&gt; Boolean">!</a><a href="#1161124" title="scala.tools.partest.nest.TestFile">test</a>.<a href="TestFile.scala.html#1161605" title="(settings: scala.tools.nsc.Settings, setOutDir: Boolean)Boolean">defineSettings</a><span class="delimiter">(</span><a href="#1161120" title="scala.tools.nsc.CompilerCommand">command</a>.<a href="../../nsc/CompilerCommand.scala.html#600794" title="=&gt; scala.tools.nsc.Settings">settings</a>, <a href="#1161105" title="Option[java.io.File]">out</a>.<a href="../../../Option.scala.html#62856" title="=&gt; Boolean">isEmpty</a><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">{</span>
      <a href="#1161122" title="scala.tools.partest.nest.ExtConsoleReporter">testRep</a>.<a href="../../nsc/reporters/Reporter.scala.html#539685" title="(pos: scala.reflect.internal.util.Position, msg: String)Unit">error</a><span class="delimiter">(</span><a href="../../../reflect/internal/util/Position.scala.html#522761" title="(msg: String)scala.reflect.internal.util.FakePos">FakePos</a><span class="delimiter">(</span><span title="String(&quot;partest&quot;)" class="string">&quot;partest&quot;</span><span class="delimiter">)</span>, <a href="#1161124" title="scala.tools.partest.nest.TestFile">test</a>.<a href="TestFile.scala.html#1161594" title="=&gt; Option[String]">flags</a> <span class="keyword">match</span> <span class="delimiter">{</span>
        <span class="keyword">case</span> Some<a href="#3376870" title="String" id="3376871" class="delimiter">(</a><a href="../../../Option.scala.html#63132" title="String" id="1161888">flags</a><span class="delimiter">)</span>  =&gt; <span title="String(&quot;bad flags: &quot;)" class="string">&quot;bad flags: &quot;</span> <a href="#3376873" title="(x: String)String">+</a> <a href="#1161888" title="String">flags</a>
        <span class="keyword">case</span> _            =&gt; <span title="String(&quot;bad settings: &quot;)" class="string">&quot;bad settings: &quot;</span> <a href="#3376873" title="(x: String)String">+</a> <a href="#1161120" title="scala.tools.nsc.CompilerCommand">command</a>.<a href="../../nsc/CompilerCommand.scala.html#600794" title="=&gt; scala.tools.nsc.Settings">settings</a>
      <span class="delimiter">}</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>

    <span class="keyword">val</span> <a title="List[String]" id="1161125">toCompile</a> = <a href="#1161106" title="List[java.io.File]">files</a> <a href="../../../collection/TraversableLike.scala.html#58063" title="(f: java.io.File =&gt; String)(implicit bf: scala.collection.generic.CanBuildFrom[List[java.io.File],String,List[String]])List[String]">map</a> <span class="delimiter">(</span><a href="#1161905" title="java.io.File">_</a>.<span title="()String">getPath</span><span class="delimiter">)</span>

    <span class="keyword">try</span> <span class="delimiter">{</span>
      <a href="NestUI.scala.html#50828" title="scala.tools.partest.nest.NestUI.type">NestUI</a>.<a href="NestUI.scala.html#1147230" title="(msg: String)Unit">verbose</a><span class="delimiter">(</span><span title="String(&quot;compiling &quot;)" class="string">&quot;compiling &quot;</span><span title="(x$1: Any)String">+</span><a href="#1161125" title="List[String]">toCompile</a><span class="delimiter">)</span>
      <a href="NestUI.scala.html#50828" title="scala.tools.partest.nest.NestUI.type">NestUI</a>.<a href="NestUI.scala.html#1147230" title="(msg: String)Unit">verbose</a><span class="delimiter">(</span><span title="String(&quot;with classpath: &quot;)" class="string">&quot;with classpath: &quot;</span><span title="(x$1: Any)String">+</span><a href="#1161121" title="scala.tools.nsc.Global">global</a>.<a href="../../nsc/Global.scala.html#537458" title="=&gt; global.PlatformClassPath">classPath</a>.<span title="()String">toString</span><span class="delimiter">)</span>
      <a href="NestUI.scala.html#50828" title="scala.tools.partest.nest.NestUI.type">NestUI</a>.<a href="NestUI.scala.html#1147230" title="(msg: String)Unit">verbose</a><span class="delimiter">(</span><span title="String(&quot;and java classpath: &quot;)" class="string">&quot;and java classpath: &quot;</span><span title="(x$1: Any)String">+</span> <a href="../../../util/Properties.scala.html#80158" title="(name: String)String">propOrEmpty</a><span class="delimiter">(</span><span title="String(&quot;java.class.path&quot;)" class="string">&quot;java.class.path&quot;</span><span class="delimiter">)</span><span class="delimiter">)</span>
      <a href="#3376885" title="Unit" id="3376881" class="keyword">try</a> <span title="global.Run" class="keyword">new</span> <a href="#1161121" title="scala.tools.nsc.Global">global</a>.<a href="../../nsc/Global.scala.html#537750" title="global.Run">Run</a> <a href="../../nsc/Global.scala.html#539434" title="(filenames: List[String])Unit">compile</a> <a href="#1161125" title="List[String]">toCompile</a>
      <span class="keyword">catch</span> <span class="delimiter">{</span>
        <span class="keyword">case</span> FatalError<a href="#3376881" title="Unit" id="3376882" class="delimiter">(</a><a href="../../../reflect/internal/FatalError.scala.html#441515" title="String" id="1161938">msg</a><span class="delimiter">)</span> =&gt;
          <a href="#1161122" title="scala.tools.partest.nest.ExtConsoleReporter">testRep</a>.<a href="../../nsc/reporters/Reporter.scala.html#539685" title="(pos: scala.reflect.internal.util.Position, msg: String)Unit">error</a><span class="delimiter">(</span><span title="Null(null)" class="keyword">null</span>, <span title="String(&quot;fatal error: &quot;)" class="string">&quot;fatal error: &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#1161938" title="String">msg</a><span class="delimiter">)</span>
          <span title="Nothing" class="keyword">return</span> <a href="#1160432" title="scala.tools.partest.nest.CompilerCrashed.type">CompilerCrashed</a>
      <span class="delimiter">}</span>

      <a href="#1161122" title="scala.tools.partest.nest.ExtConsoleReporter">testRep</a>.<a href="../../nsc/reporters/ConsoleReporter.scala.html#601246" title="()Unit">printSummary</a><span class="delimiter">(</span><span class="delimiter">)</span>
      <a href="#1161122" title="scala.tools.partest.nest.ExtConsoleReporter">testRep</a>.<a href="#1160443" title="=&gt; java.io.PrintWriter">writer</a>.<span title="()Unit">close</span><span class="delimiter">(</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>
    <span class="keyword">finally</span> <a href="#1161110" title="java.io.FileWriter">logWriter</a>.<span title="()Unit">close</span><span class="delimiter">(</span><span class="delimiter">)</span>

    <span title="scala.tools.partest.nest.CompilationOutcome" class="keyword">if</span> <span class="delimiter">(</span><a href="#1161122" title="scala.tools.partest.nest.ExtConsoleReporter">testRep</a>.<a href="../../nsc/reporters/Reporter.scala.html#539679" title="=&gt; Boolean">hasErrors</a><span class="delimiter">)</span> <a href="#1160414" title="scala.tools.partest.nest.CompileFailed.type">CompileFailed</a>
    <span class="keyword">else</span> <a href="#1160398" title="scala.tools.partest.nest.CompileSuccess.type">CompileSuccess</a>
  <span class="delimiter">}</span>
<span class="delimiter">}</span>

<span class="keyword">class</span> <a title="class CompileManager extends Object" id="50750">CompileManager</a><a href="#50750" title="scala.tools.partest.nest.CompileManager" class="delimiter">(</a><span class="keyword">val</span> <a title="scala.tools.partest.nest.FileManager" id="1161947">fileManager</a>: <a href="FileManager.scala.html#50818" title="scala.tools.partest.nest.FileManager">FileManager</a><span class="delimiter">)</span> <span class="delimiter">{</span>
  <span class="keyword">private</span> <span class="keyword">def</span> <a title="=&gt; scala.tools.partest.nest.DirectCompiler" id="1161943">newCompiler</a> = <span title="scala.tools.partest.nest.DirectCompiler" class="keyword">new</span> <a href="#50749" title="scala.tools.partest.nest.DirectCompiler">DirectCompiler</a><span class="delimiter">(</span><a href="#1161947" title="=&gt; scala.tools.partest.nest.FileManager">fileManager</a><span class="delimiter">)</span>
  <span class="keyword">def</span> <a title="(outdir: Option[java.io.File], sources: List[java.io.File], kind: String, log: java.io.File)scala.tools.partest.nest.CompilationOutcome" id="1161944">attemptCompile</a><span class="delimiter">(</span><a title="Option[java.io.File]" id="1161948">outdir</a>: <a href="../../../Option.scala.html#978" title="Option[java.io.File]">Option</a><span class="delimiter">[</span>File<span class="delimiter">]</span>, <a title="List[java.io.File]" id="1161949">sources</a>: <a href="../../../collection/immutable/List.scala.html#11952" title="List[java.io.File]">List</a><span class="delimiter">[</span>File<span class="delimiter">]</span>, <a title="String" id="1161950">kind</a>: <span title="String">String</span>, <a title="java.io.File" id="1161951">log</a>: <span title="java.io.File">File</span><span class="delimiter">)</span>: <a href="#50739" title="scala.tools.partest.nest.CompilationOutcome">CompilationOutcome</a> =
    <a href="#1161943" title="=&gt; scala.tools.partest.nest.DirectCompiler">newCompiler</a>.<a href="#1160498" title="(out: Option[java.io.File], files: List[java.io.File], kind: String, log: java.io.File)scala.tools.partest.nest.CompilationOutcome">compile</a><span class="delimiter">(</span><a href="#1161948" title="Option[java.io.File]">outdir</a>, <a href="#1161949" title="List[java.io.File]">sources</a>, <a href="#1161950" title="String">kind</a>, <a href="#1161951" title="java.io.File">log</a><span class="delimiter">)</span>
<span class="delimiter">}</span>

        </pre>
    </body>
</html>