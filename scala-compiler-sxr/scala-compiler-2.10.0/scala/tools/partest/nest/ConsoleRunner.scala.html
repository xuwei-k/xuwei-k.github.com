<?xml version="1.0" encoding="utf-8"?>
      <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <meta http-equiv="Expires" content="0" />
        <title>scala/tools/partest/nest/ConsoleRunner.scala</title>
        <script type="text/javascript" src="../../../../jquery-all.js"></script>
        <script type="text/javascript" src="../../../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../../../style.css" title="Style"></link>
    </head>
    <body>
        <pre>
/* NEST (New Scala Test)
 * Copyright 2007-2013 LAMP/EPFL
 * @author Philipp Haller
 */

// $Id$

<span class="keyword">package</span> scala.tools.partest
<span class="keyword">package</span> nest

<span class="keyword">import</span> java.io.<span class="delimiter">{</span>File, PrintStream, FileOutputStream, BufferedReader,
                InputStreamReader, StringWriter, PrintWriter<span class="delimiter">}</span>
<span class="keyword">import</span> utils.<a href="../utils/Properties.scala.html#50960" title="scala.tools.partest.utils.Properties.type">Properties</a>._
<span class="keyword">import</span> <a href="RunnerUtils.scala.html#50879" title="scala.tools.partest.nest.RunnerUtils.type">RunnerUtils</a>._
<span class="keyword">import</span> scala.tools.nsc.<a href="../../nsc/Properties.scala.html#27455" title="scala.tools.nsc.Properties.type">Properties</a>.<span class="delimiter">{</span> versionMsg, setProp <span class="delimiter">}</span>
<span class="keyword">import</span> scala.tools.nsc.util.CommandLineParser
<span class="keyword">import</span> scala.tools.nsc.io
<span class="keyword">import</span> io.<span class="delimiter">{</span> Path <span class="delimiter">}</span>
<span class="keyword">import</span> scala.collection.<span class="delimiter">{</span> mutable, immutable <span class="delimiter">}</span>

<span class="keyword">class</span> <a title="class ConsoleRunner extends Object with scala.tools.partest.nest.DirectRunner" id="50777">ConsoleRunner</a> <a href="#50777" title="scala.tools.partest.nest.ConsoleRunner" class="keyword">extends</a> <a href="DirectRunner.scala.html#50806" title="scala.tools.partest.nest.DirectRunner">DirectRunner</a> <span class="delimiter">{</span>
  <span class="keyword">import</span> <a href="PathSettings.scala.html#50838" title="scala.tools.partest.nest.PathSettings.type">PathSettings</a>.<span class="delimiter">{</span> srcDir, testRoot <span class="delimiter">}</span>

  case <span class="keyword">class</span> <a title="class TestSet extends AnyRef with Product with Serializable" id="1164184">TestSet</a><a href="../../../Product.scala.html#186" title="Product" class="delimiter">(</a><a title="String" id="1162765">kind</a>: <span title="String">String</span>, <a title="scala.tools.nsc.io.Path =&gt; Boolean" id="1162766">filter</a>: Path =&gt; Boolean, <a title="String" id="1162767">msg</a>: <span title="String">String</span><span class="delimiter">)</span>
  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(p: scala.tools.nsc.io.Path)Boolean" id="1162712">stdFilter</a><span class="delimiter">(</span><a title="scala.tools.nsc.io.Path" id="1162774">p</a>: <a href="../../../reflect/io/Path.scala.html#23164" title="scala.tools.nsc.io.Path">Path</a><span class="delimiter">)</span> = <a href="#1162774" title="scala.tools.nsc.io.Path">p</a>.<a href="../../../reflect/io/Path.scala.html#530911" title="=&gt; Boolean">isDirectory</a> <a href="../../../Boolean.scala.html#57825" title="(x: Boolean)Boolean">||</a> <span class="delimiter">(</span><a href="#1162774" title="scala.tools.nsc.io.Path">p</a> <a href="../../../reflect/io/Path.scala.html#530896" title="(ext: String, exts: String*)Boolean">hasExtension</a> <span title="String(&quot;scala&quot;)" class="string">&quot;scala&quot;</span><span class="delimiter">)</span>
  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(p: scala.tools.nsc.io.Path)Boolean" id="1162713">antFilter</a><span class="delimiter">(</span><a title="scala.tools.nsc.io.Path" id="1162803">p</a>: <a href="../../../reflect/io/Path.scala.html#23164" title="scala.tools.nsc.io.Path">Path</a><span class="delimiter">)</span> = <a href="#1162803" title="scala.tools.nsc.io.Path">p</a>.<a href="../../../reflect/io/Path.scala.html#530910" title="=&gt; Boolean">isFile</a> <a href="../../../Boolean.scala.html#57826" title="(x: Boolean)Boolean">&amp;&amp;</a> <span class="delimiter">(</span><a href="#1162803" title="scala.tools.nsc.io.Path">p</a> <a href="../../../reflect/io/Path.scala.html#530918" title="(other: scala.reflect.io.Path)Boolean">endsWith</a> <a href="../../../reflect/io/Path.scala.html#531009" title="implicit scala.reflect.io.Path.string2path : (s: String)scala.reflect.io.Path" class="string">&quot;build.xml&quot;</a><span class="delimiter">)</span>

  <span class="keyword">val</span> <a title="List[ConsoleRunner.this.TestSet]" id="1162714">testSets</a> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="scala.tools.nsc.io.Path =&gt; Boolean" id="1162741">pathFilter</a>: Path =&gt; Boolean = <a title="scala.tools.nsc.io.Path" id="1162743">x</a> =&gt; <a href="#1162743" title="scala.tools.nsc.io.Path">x</a>.<a href="../../../reflect/io/Path.scala.html#530911" title="=&gt; Boolean">isDirectory</a> <a href="../../../Boolean.scala.html#57825" title="(x: Boolean)Boolean">||</a> <span class="delimiter">(</span><a href="#1162743" title="scala.tools.nsc.io.Path">x</a> <a href="../../../reflect/io/Path.scala.html#530896" title="(ext: String, exts: String*)Boolean">hasExtension</a> <span title="String(&quot;scala&quot;)" class="string">&quot;scala&quot;</span><span class="delimiter">)</span>

    <a href="../../../collection/immutable/List.scala.html#62451" title="(xs: ConsoleRunner.this.TestSet*)List[ConsoleRunner.this.TestSet]">List</a><span class="delimiter">(</span>
      <a href="#1164184" title="(kind: String, filter: scala.tools.nsc.io.Path =&gt; Boolean, msg: String)ConsoleRunner.this.TestSet">TestSet</a><span class="delimiter">(</span><span title="String(&quot;pos&quot;)" class="string">&quot;pos&quot;</span>, <a href="#1162712" title="(p: scala.tools.nsc.io.Path)Boolean">stdFilter</a>, <span title="String(&quot;Testing compiler (on files whose compilation should succeed)&quot;)" class="string">&quot;Testing compiler (on files whose compilation should succeed)&quot;</span><span class="delimiter">)</span>,
      <a href="#1164184" title="(kind: String, filter: scala.tools.nsc.io.Path =&gt; Boolean, msg: String)ConsoleRunner.this.TestSet">TestSet</a><span class="delimiter">(</span><span title="String(&quot;neg&quot;)" class="string">&quot;neg&quot;</span>, <a href="#1162712" title="(p: scala.tools.nsc.io.Path)Boolean">stdFilter</a>, <span title="String(&quot;Testing compiler (on files whose compilation should fail)&quot;)" class="string">&quot;Testing compiler (on files whose compilation should fail)&quot;</span><span class="delimiter">)</span>,
      <a href="#1164184" title="(kind: String, filter: scala.tools.nsc.io.Path =&gt; Boolean, msg: String)ConsoleRunner.this.TestSet">TestSet</a><span class="delimiter">(</span><span title="String(&quot;run&quot;)" class="string">&quot;run&quot;</span>, <a href="#1162712" title="(p: scala.tools.nsc.io.Path)Boolean">stdFilter</a>, <span title="String(&quot;Testing interpreter and backend&quot;)" class="string">&quot;Testing interpreter and backend&quot;</span><span class="delimiter">)</span>,
      <a href="#1164184" title="(kind: String, filter: scala.tools.nsc.io.Path =&gt; Boolean, msg: String)ConsoleRunner.this.TestSet">TestSet</a><span class="delimiter">(</span><span title="String(&quot;jvm&quot;)" class="string">&quot;jvm&quot;</span>, <a href="#1162712" title="(p: scala.tools.nsc.io.Path)Boolean">stdFilter</a>, <span title="String(&quot;Testing JVM backend&quot;)" class="string">&quot;Testing JVM backend&quot;</span><span class="delimiter">)</span>,
      <a href="#1164184" title="(kind: String, filter: scala.tools.nsc.io.Path =&gt; Boolean, msg: String)ConsoleRunner.this.TestSet">TestSet</a><span class="delimiter">(</span><span title="String(&quot;res&quot;)" class="string">&quot;res&quot;</span>, <a title="scala.tools.nsc.io.Path" id="1162786">x</a> =&gt; <a href="#1162786" title="scala.tools.nsc.io.Path">x</a>.<a href="../../../reflect/io/Path.scala.html#530910" title="=&gt; Boolean">isFile</a> <a href="../../../Boolean.scala.html#57826" title="(x: Boolean)Boolean">&amp;&amp;</a> <span class="delimiter">(</span><a href="#1162786" title="scala.tools.nsc.io.Path">x</a> <a href="../../../reflect/io/Path.scala.html#530896" title="(ext: String, exts: String*)Boolean">hasExtension</a> <span title="String(&quot;res&quot;)" class="string">&quot;res&quot;</span><span class="delimiter">)</span>, <span title="String(&quot;Testing resident compiler&quot;)" class="string">&quot;Testing resident compiler&quot;</span><span class="delimiter">)</span>,
      <a href="#1164184" title="(kind: String, filter: scala.tools.nsc.io.Path =&gt; Boolean, msg: String)ConsoleRunner.this.TestSet">TestSet</a><span class="delimiter">(</span><span title="String(&quot;buildmanager&quot;)" class="string">&quot;buildmanager&quot;</span>, <a href="#1162788" title="scala.tools.nsc.io.Path">_</a>.<a href="../../../reflect/io/Path.scala.html#530911" title="=&gt; Boolean">isDirectory</a>, <span title="String(&quot;Testing Build Manager&quot;)" class="string">&quot;Testing Build Manager&quot;</span><span class="delimiter">)</span>,
      <a href="#1164184" title="(kind: String, filter: scala.tools.nsc.io.Path =&gt; Boolean, msg: String)ConsoleRunner.this.TestSet">TestSet</a><span class="delimiter">(</span><span title="String(&quot;shootout&quot;)" class="string">&quot;shootout&quot;</span>, <a href="#1162712" title="(p: scala.tools.nsc.io.Path)Boolean">stdFilter</a>, <span title="String(&quot;Testing shootout tests&quot;)" class="string">&quot;Testing shootout tests&quot;</span><span class="delimiter">)</span>,
      <a href="#1164184" title="(kind: String, filter: scala.tools.nsc.io.Path =&gt; Boolean, msg: String)ConsoleRunner.this.TestSet">TestSet</a><span class="delimiter">(</span><span title="String(&quot;script&quot;)" class="string">&quot;script&quot;</span>, <a href="#1162712" title="(p: scala.tools.nsc.io.Path)Boolean">stdFilter</a>, <span title="String(&quot;Testing script tests&quot;)" class="string">&quot;Testing script tests&quot;</span><span class="delimiter">)</span>,
      <a href="#1164184" title="(kind: String, filter: scala.tools.nsc.io.Path =&gt; Boolean, msg: String)ConsoleRunner.this.TestSet">TestSet</a><span class="delimiter">(</span><span title="String(&quot;scalacheck&quot;)" class="string">&quot;scalacheck&quot;</span>, <a href="#1162712" title="(p: scala.tools.nsc.io.Path)Boolean">stdFilter</a>, <span title="String(&quot;Testing ScalaCheck tests&quot;)" class="string">&quot;Testing ScalaCheck tests&quot;</span><span class="delimiter">)</span>,
      <a href="#1164184" title="(kind: String, filter: scala.tools.nsc.io.Path =&gt; Boolean, msg: String)ConsoleRunner.this.TestSet">TestSet</a><span class="delimiter">(</span><span title="String(&quot;scalap&quot;)" class="string">&quot;scalap&quot;</span>, <a href="#1162796" title="scala.tools.nsc.io.Path">_</a>.<a href="../../../reflect/io/Path.scala.html#530911" title="=&gt; Boolean">isDirectory</a>, <span title="String(&quot;Run scalap decompiler tests&quot;)" class="string">&quot;Run scalap decompiler tests&quot;</span><span class="delimiter">)</span>,
      <a href="#1164184" title="(kind: String, filter: scala.tools.nsc.io.Path =&gt; Boolean, msg: String)ConsoleRunner.this.TestSet">TestSet</a><span class="delimiter">(</span><span title="String(&quot;specialized&quot;)" class="string">&quot;specialized&quot;</span>, <a href="#1162712" title="(p: scala.tools.nsc.io.Path)Boolean">stdFilter</a>, <span title="String(&quot;Testing specialized tests&quot;)" class="string">&quot;Testing specialized tests&quot;</span><span class="delimiter">)</span>,
      <a href="#1164184" title="(kind: String, filter: scala.tools.nsc.io.Path =&gt; Boolean, msg: String)ConsoleRunner.this.TestSet">TestSet</a><span class="delimiter">(</span><span title="String(&quot;instrumented&quot;)" class="string">&quot;instrumented&quot;</span>, <a href="#1162712" title="(p: scala.tools.nsc.io.Path)Boolean">stdFilter</a>, <span title="String(&quot;Testing instrumented tests&quot;)" class="string">&quot;Testing instrumented tests&quot;</span><span class="delimiter">)</span>,
      <a href="#1164184" title="(kind: String, filter: scala.tools.nsc.io.Path =&gt; Boolean, msg: String)ConsoleRunner.this.TestSet">TestSet</a><span class="delimiter">(</span><span title="String(&quot;presentation&quot;)" class="string">&quot;presentation&quot;</span>, <a href="#1162802" title="scala.tools.nsc.io.Path">_</a>.<a href="../../../reflect/io/Path.scala.html#530911" title="=&gt; Boolean">isDirectory</a>, <span title="String(&quot;Testing presentation compiler tests.&quot;)" class="string">&quot;Testing presentation compiler tests.&quot;</span><span class="delimiter">)</span>,
      <a href="#1164184" title="(kind: String, filter: scala.tools.nsc.io.Path =&gt; Boolean, msg: String)ConsoleRunner.this.TestSet">TestSet</a><span class="delimiter">(</span><span title="String(&quot;ant&quot;)" class="string">&quot;ant&quot;</span>, <a href="#1162713" title="(p: scala.tools.nsc.io.Path)Boolean">antFilter</a>, <span title="String(&quot;Run Ant task tests.&quot;)" class="string">&quot;Run Ant task tests.&quot;</span><span class="delimiter">)</span>
    <span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">var</span> <a title="scala.tools.partest.nest.ConsoleFileManager" id="1162717">fileManager</a>: <a href="ConsoleFileManager.scala.html#50765" title="scala.tools.partest.nest.ConsoleFileManager">ConsoleFileManager</a> = _

  <span class="keyword">private</span> <span class="keyword">var</span> <a title="List[java.io.File]" id="1162720">testFiles</a>: <a href="../../../collection/immutable/List.scala.html#11952" title="List[java.io.File]">List</a><span class="delimiter">[</span>File<span class="delimiter">]</span> = List<a href="../../../collection/immutable/List.scala.html#11188" title="scala.collection.immutable.Nil.type" class="delimiter">(</a><span class="delimiter">)</span>
  <span class="keyword">private</span> <span class="keyword">val</span> <a title="Int" id="1162722">errors</a> = <a href="../PartestDefaults.scala.html#50614" title="scala.tools.partest.PartestDefaults.type">PartestDefaults</a>.<a href="../PartestDefaults.scala.html#1143295" title="=&gt; Int">errorCount</a>
  <span class="keyword">private</span> <span class="keyword">val</span> <a title="List[String]" id="1162724">testSetKinds</a>  = <a href="#1162714" title="=&gt; List[ConsoleRunner.this.TestSet]">testSets</a> <a href="../../../collection/TraversableLike.scala.html#58063" title="(f: ConsoleRunner.this.TestSet =&gt; String)(implicit bf: scala.collection.generic.CanBuildFrom[List[ConsoleRunner.this.TestSet],String,List[String]])List[String]">map</a> <span class="delimiter">(</span><a href="#1162827" title="ConsoleRunner.this.TestSet">_</a>.<a href="#1162765" title="=&gt; String">kind</a><span class="delimiter">)</span>
  <span class="keyword">private</span> <span class="keyword">val</span> <a title="List[String]" id="1162726">testSetArgs</a>   = <a href="#1162714" title="=&gt; List[ConsoleRunner.this.TestSet]">testSets</a> <a href="../../../collection/TraversableLike.scala.html#58063" title="(f: ConsoleRunner.this.TestSet =&gt; String)(implicit bf: scala.collection.generic.CanBuildFrom[List[ConsoleRunner.this.TestSet],String,List[String]])List[String]">map</a> <span class="delimiter">(</span><span title="String(&quot;--&quot;)" class="string">&quot;--&quot;</span> <span title="(x$1: Any)String">+</span> <a href="#1162866" title="ConsoleRunner.this.TestSet">_</a>.<a href="#1162765" title="=&gt; String">kind</a><span class="delimiter">)</span>
  <span class="keyword">private</span> <span class="keyword">val</span> <a title="scala.collection.immutable.Map[String,ConsoleRunner.this.TestSet]" id="1162728">testSetArgMap</a> = <a href="#1162726" title="=&gt; List[String]">testSetArgs</a> <a href="../../../collection/IterableLike.scala.html#58590" title="(that: scala.collection.GenIterable[ConsoleRunner.this.TestSet])(implicit bf: scala.collection.generic.CanBuildFrom[List[String],(String, ConsoleRunner.this.TestSet),List[(String, ConsoleRunner.this.TestSet)]])List[(String, ConsoleRunner.this.TestSet)]">zip</a> <a href="#1162714" title="=&gt; List[ConsoleRunner.this.TestSet]">testSets</a> <a href="../../../collection/TraversableOnce.scala.html#58277" title="(implicit ev: &lt;:&lt;[(String, ConsoleRunner.this.TestSet),(String, ConsoleRunner.this.TestSet)])scala.collection.immutable.Map[String,ConsoleRunner.this.TestSet]">toMap</a>

  <span class="keyword">def</span> <a title="(arg: String)Boolean" id="1162730">denotesTestSet</a><span class="delimiter">(</span><a title="String" id="1163035">arg</a>: <span title="String">String</span><span class="delimiter">)</span>  = <a href="#1162726" title="=&gt; List[String]">testSetArgs</a> <a href="../../../collection/LinearSeqOptimized.scala.html#86380" title="(elem: Any)Boolean">contains</a> <a href="#1163035" title="String">arg</a>

  <span class="keyword">private</span> <span class="keyword">def</span> <a title="()Unit" id="1162731">printVersion</a><span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span> <a href="NestUI.scala.html#50828" title="scala.tools.partest.nest.NestUI.type">NestUI</a> <a href="NestUI.scala.html#1147213" title="(msg: String)Unit">outline</a> <span class="delimiter">(</span><a href="../../../util/Properties.scala.html#80199" title="=&gt; String">versionMsg</a> <span title="(x$1: Any)String">+</span> <span title="String(&quot;\n&quot;)" class="string">&quot;\n&quot;</span><span class="delimiter">)</span> <span class="delimiter">}</span>

  <span class="keyword">private</span> <span class="keyword">val</span> <a title="List[String]" id="1162732">unaryArgs</a> = <a href="../../../collection/immutable/List.scala.html#62451" title="(xs: String*)List[String]">List</a><span class="delimiter">(</span>
    <span title="String(&quot;--pack&quot;)" class="string">&quot;--pack&quot;</span>, <span title="String(&quot;--all&quot;)" class="string">&quot;--all&quot;</span>, <span title="String(&quot;--verbose&quot;)" class="string">&quot;--verbose&quot;</span>, <span title="String(&quot;--show-diff&quot;)" class="string">&quot;--show-diff&quot;</span>, <span title="String(&quot;--show-log&quot;)" class="string">&quot;--show-log&quot;</span>,
    <span title="String(&quot;--failed&quot;)" class="string">&quot;--failed&quot;</span>, <span title="String(&quot;--update-check&quot;)" class="string">&quot;--update-check&quot;</span>, <span title="String(&quot;--version&quot;)" class="string">&quot;--version&quot;</span>, <span title="String(&quot;--ansi&quot;)" class="string">&quot;--ansi&quot;</span>, <span title="String(&quot;--debug&quot;)" class="string">&quot;--debug&quot;</span>, <span title="String(&quot;--help&quot;)" class="string">&quot;--help&quot;</span>
  <span class="delimiter">)</span> <a href="../../../collection/immutable/List.scala.html#62688" title="(prefix: List[String])List[String]">:::</a> <a href="#1162726" title="=&gt; List[String]">testSetArgs</a>

  <span class="keyword">private</span> <span class="keyword">val</span> <a title="List[String]" id="1162734">binaryArgs</a> = <a href="../../../collection/immutable/List.scala.html#62451" title="(xs: String*)List[String]">List</a><span class="delimiter">(</span>
    <span title="String(&quot;--grep&quot;)" class="string">&quot;--grep&quot;</span>, <span title="String(&quot;--srcpath&quot;)" class="string">&quot;--srcpath&quot;</span>, <span title="String(&quot;--buildpath&quot;)" class="string">&quot;--buildpath&quot;</span>, <span title="String(&quot;--classpath&quot;)" class="string">&quot;--classpath&quot;</span>
  <span class="delimiter">)</span>

  // true if a test path matches the --grep expression.
  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(path: scala.tools.nsc.io.Path, expr: String)Boolean" id="1162736">pathMatchesExpr</a><span class="delimiter">(</span><a title="scala.tools.nsc.io.Path" id="1163051">path</a>: <a href="../../../reflect/io/Path.scala.html#23164" title="scala.tools.nsc.io.Path">Path</a>, <a title="String" id="1163052">expr</a>: <span title="String">String</span><span class="delimiter">)</span> = <span class="delimiter">{</span>
    <span class="keyword">def</span> <a title="(p: scala.tools.nsc.io.Path)Boolean" id="1163055">pred</a><span class="delimiter">(</span><a title="scala.tools.nsc.io.Path" id="1163057">p</a>: <a href="../../../reflect/io/Path.scala.html#23164" title="scala.tools.nsc.io.Path">Path</a><span class="delimiter">)</span> = <a href="../package.scala.html#55903" title="(f: java.io.File)String">file2String</a><span class="delimiter">(</span><a href="#1163057" title="scala.tools.nsc.io.Path">p</a>.<a href="../package.scala.html#55890" title="implicit scala.tools.partest.package.temporaryPath2File : (x: scala.tools.nsc.io.Path)java.io.File">toFile</a><span class="delimiter">)</span> <span title="(x$1: CharSequence)Boolean">contains</span> <a href="#1163052" title="String">expr</a>
    <span class="keyword">def</span> <a title="=&gt; Iterator[scala.reflect.io.Path]" id="1163056">srcs</a> = <a href="#1163051" title="scala.tools.nsc.io.Path">path</a>.<a href="../../../reflect/io/Path.scala.html#530874" title="scala.reflect.io.Directory" id="1163061">toDirectory</a>.<a href="../../../reflect/io/Directory.scala.html#531777" title="Int" id="1163062">deepList</a><span class="delimiter">(</span><span class="delimiter">)</span> <a href="../../../collection/Iterator.scala.html#66764" title="(p: scala.reflect.io.Path =&gt; Boolean)Iterator[scala.reflect.io.Path]">filter</a> <span class="delimiter">(</span><a href="#1163065" title="scala.reflect.io.Path">_</a>.<a href="../../../reflect/io/Path.scala.html#530896" title="(ext: String, exts: String*)Boolean">hasExtension</a><span class="delimiter">(</span><span title="String(&quot;scala&quot;)" class="string">&quot;scala&quot;</span>, <span title="String(&quot;java&quot;)" class="string">&quot;java&quot;</span><span class="delimiter">)</span><span class="delimiter">)</span>

    <span class="delimiter">(</span><a href="#1163051" title="scala.tools.nsc.io.Path">path</a>.<a href="../../../reflect/io/Path.scala.html#530910" title="=&gt; Boolean">isFile</a> <a href="../../../Boolean.scala.html#57826" title="(x: Boolean)Boolean">&amp;&amp;</a> <a href="#1163055" title="(p: scala.tools.nsc.io.Path)Boolean">pred</a><span class="delimiter">(</span><a href="#1163051" title="scala.tools.nsc.io.Path">path</a><span class="delimiter">)</span><span class="delimiter">)</span> <a href="../../../Boolean.scala.html#57825" title="(x: Boolean)Boolean">||</a>
    <span class="delimiter">(</span><a href="#1163051" title="scala.tools.nsc.io.Path">path</a>.<a href="../../../reflect/io/Path.scala.html#530911" title="=&gt; Boolean">isDirectory</a> <a href="../../../Boolean.scala.html#57826" title="(x: Boolean)Boolean">&amp;&amp;</a> <a href="#1163056" title="=&gt; Iterator[scala.reflect.io.Path]">srcs</a>.<a href="../../../collection/Iterator.scala.html#66801" title="(p: scala.reflect.io.Path =&gt; Boolean)Boolean">exists</a><span class="delimiter">(</span><a href="#1163055" title="(p: scala.tools.nsc.io.Path)Boolean">pred</a><span class="delimiter">)</span><span class="delimiter">)</span> <a href="../../../Boolean.scala.html#57825" title="(x: Boolean)Boolean">||</a>
    <span class="delimiter">(</span><a href="#1163055" title="(p: scala.tools.nsc.io.Path)Boolean">pred</a><span class="delimiter">(</span><a href="#1163051" title="scala.tools.nsc.io.Path">path</a> <a href="../../../reflect/io/Path.scala.html#530899" title="(ext: String)scala.reflect.io.Path">changeExtension</a> <span title="String(&quot;check&quot;)" class="string">&quot;check&quot;</span><span class="delimiter">)</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="(argstr: String)Unit" id="1162737">main</a><span class="delimiter">(</span><a title="String" id="1163073">argstr</a>: <span title="String">String</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="scala.tools.nsc.util.CommandLine" id="1163075">parsed</a> = <a href="../../nsc/util/CommandLineParser.scala.html#1135113" title="(line: String)scala.tools.nsc.util.CommandLine">CommandLineParser</a><span class="delimiter">(</span><a href="#1163073" title="String">argstr</a><span class="delimiter">)</span> <a href="../../nsc/util/CommandLineParser.scala.html#1134976" title="(xs: List[String])scala.tools.nsc.util.CommandLine">withUnaryArgs</a> <a href="#1162732" title="=&gt; List[String]">unaryArgs</a> <a href="../../nsc/util/CommandLineParser.scala.html#1134977" title="(xs: List[String])scala.tools.nsc.util.CommandLine">withBinaryArgs</a> <a href="#1162734" title="=&gt; List[String]">binaryArgs</a>
    <span class="keyword">val</span> <a title="List[String]" id="1163076">args</a>   = <a href="DirectRunner.scala.html#1150578" title="(args: List[String])List[String]">onlyValidTestPaths</a><span class="delimiter">(</span><a href="#1163075" title="scala.tools.nsc.util.CommandLine">parsed</a>.<a href="../../nsc/util/CommandLineParser.scala.html#1134992" title="=&gt; List[String]">residualArgs</a><span class="delimiter">)</span>

    /** Early return on no args, version, or invalid args */
    <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#1163073" title="String">argstr</a> <span title="(x$1: AnyRef)Boolean">==</span> <span title="String(&quot;&quot;)" class="string">&quot;&quot;</span><span class="delimiter">)</span> <span title="Nothing" class="keyword">return</span> <a href="NestUI.scala.html#50828" title="scala.tools.partest.nest.NestUI.type">NestUI</a>.<a href="NestUI.scala.html#1147223" title="()Unit">usage</a><span class="delimiter">(</span><span class="delimiter">)</span>
    <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#1163075" title="scala.tools.nsc.util.CommandLine">parsed</a> <a href="../../nsc/util/CommandLineParser.scala.html#1134994" title="(arg: String)Boolean">isSet</a> <span title="String(&quot;--version&quot;)" class="string">&quot;--version&quot;</span><span class="delimiter">)</span> <span title="Nothing" class="keyword">return</span> <a href="#1162731" title="()Unit">printVersion</a>
    <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#1163075" title="scala.tools.nsc.util.CommandLine">parsed</a> <a href="../../nsc/util/CommandLineParser.scala.html#1134994" title="(arg: String)Boolean">isSet</a> <span title="String(&quot;--help&quot;)" class="string">&quot;--help&quot;</span><span class="delimiter">)</span> <span title="Nothing" class="keyword">return</span> <a href="NestUI.scala.html#50828" title="scala.tools.partest.nest.NestUI.type">NestUI</a>.<a href="NestUI.scala.html#1147223" title="()Unit">usage</a><span class="delimiter">(</span><span class="delimiter">)</span>

    <a href="#1163075" title="scala.tools.nsc.util.CommandLine">parsed</a> <a href="../../nsc/util/CommandLineParser.scala.html#1134995" title="(arg: String)Option[String]">get</a> <span title="String(&quot;--srcpath&quot;)" class="string">&quot;--srcpath&quot;</span> <a href="../../../Option.scala.html#62884" title="(f: String =&gt; String)Unit">foreach</a> <span class="delimiter">(</span><a title="String" id="1163115">x</a> =&gt; <a href="../../../util/Properties.scala.html#80162" title="(name: String, value: String)String">setProp</a><span class="delimiter">(</span><span title="String(&quot;partest.srcdir&quot;)" class="string">&quot;partest.srcdir&quot;</span>, <a href="#1163115" title="String">x</a><span class="delimiter">)</span><span class="delimiter">)</span>

    <a href="#1162717" title="(x$1: scala.tools.partest.nest.ConsoleFileManager)Unit">fileManager</a> =
      <span title="scala.tools.partest.nest.ConsoleFileManager" class="keyword">if</span> <span class="delimiter">(</span><a href="#1163075" title="scala.tools.nsc.util.CommandLine">parsed</a> <a href="../../nsc/util/CommandLineParser.scala.html#1134994" title="(arg: String)Boolean">isSet</a> <span title="String(&quot;--buildpath&quot;)" class="string">&quot;--buildpath&quot;</span><span class="delimiter">)</span> <a href="ConsoleFileManager.scala.html#1161965" title="(buildPath: String)scala.tools.partest.nest.ConsoleFileManager" class="keyword">new</a> <a href="ConsoleFileManager.scala.html#50765" title="scala.tools.partest.nest.ConsoleFileManager">ConsoleFileManager</a><span class="delimiter">(</span><a href="../../nsc/util/CommandLineParser.scala.html#1134997" title="(arg: String)String">parsed</a><span class="delimiter">(</span><span title="String(&quot;--buildpath&quot;)" class="string">&quot;--buildpath&quot;</span><span class="delimiter">)</span><span class="delimiter">)</span>
      <span class="keyword">else</span> <span title="scala.tools.partest.nest.ConsoleFileManager" class="keyword">if</span> <span class="delimiter">(</span><a href="#1163075" title="scala.tools.nsc.util.CommandLine">parsed</a> <a href="../../nsc/util/CommandLineParser.scala.html#1134994" title="(arg: String)Boolean">isSet</a> <span title="String(&quot;--classpath&quot;)" class="string">&quot;--classpath&quot;</span><span class="delimiter">)</span> <a href="ConsoleFileManager.scala.html#1161964" title="(buildPath: String, rawClasses: Boolean)scala.tools.partest.nest.ConsoleFileManager" class="keyword">new</a> <a href="ConsoleFileManager.scala.html#50765" title="scala.tools.partest.nest.ConsoleFileManager">ConsoleFileManager</a><span class="delimiter">(</span><a href="../../nsc/util/CommandLineParser.scala.html#1134997" title="(arg: String)String">parsed</a><span class="delimiter">(</span><span title="String(&quot;--classpath&quot;)" class="string">&quot;--classpath&quot;</span><span class="delimiter">)</span>, <span title="Boolean(true)" class="keyword">true</span><span class="delimiter">)</span>
      <span class="keyword">else</span> <span title="scala.tools.partest.nest.ConsoleFileManager" class="keyword">if</span> <span class="delimiter">(</span><a href="#1163075" title="scala.tools.nsc.util.CommandLine">parsed</a> <a href="../../nsc/util/CommandLineParser.scala.html#1134994" title="(arg: String)Boolean">isSet</a> <span title="String(&quot;--pack&quot;)" class="string">&quot;--pack&quot;</span><span class="delimiter">)</span> <a href="ConsoleFileManager.scala.html#1161965" title="(buildPath: String)scala.tools.partest.nest.ConsoleFileManager" class="keyword">new</a> <a href="ConsoleFileManager.scala.html#50765" title="scala.tools.partest.nest.ConsoleFileManager">ConsoleFileManager</a><span class="delimiter">(</span><span title="String(&quot;build/pack&quot;)" class="string">&quot;build/pack&quot;</span><span class="delimiter">)</span>
      <span class="keyword">else</span> <span title="scala.tools.partest.nest.ConsoleFileManager" class="keyword">new</span> <a href="ConsoleFileManager.scala.html#50765" title="scala.tools.partest.nest.ConsoleFileManager">ConsoleFileManager</a>  // auto detection, see ConsoleFileManager.findLatest

    <span class="keyword">def</span> <a title="(x: String)Boolean" id="1163077">argNarrowsTests</a><span class="delimiter">(</span><a title="String" id="1163125">x</a>: <span title="String">String</span><span class="delimiter">)</span> = <a href="#1162730" title="(arg: String)Boolean">denotesTestSet</a><span class="delimiter">(</span><a href="#1163125" title="String">x</a><span class="delimiter">)</span> <a href="../../../Boolean.scala.html#57825" title="(x: Boolean)Boolean">||</a> <a href="DirectRunner.scala.html#1150577" title="(arg: String)Boolean">denotesTestPath</a><span class="delimiter">(</span><a href="#1163125" title="String">x</a><span class="delimiter">)</span>

    <a href="NestUI.scala.html#50828" title="scala.tools.partest.nest.NestUI.type">NestUI</a>.<a href="NestUI.scala.html#1147225" title="(x$1: Boolean)Unit">_verbose</a>         = <a href="#1163075" title="scala.tools.nsc.util.CommandLine">parsed</a> <a href="../../nsc/util/CommandLineParser.scala.html#1134994" title="(arg: String)Boolean">isSet</a> <span title="String(&quot;--verbose&quot;)" class="string">&quot;--verbose&quot;</span>
    <a href="#1162717" title="=&gt; scala.tools.partest.nest.ConsoleFileManager">fileManager</a>.<a href="FileManager.scala.html#1150607" title="(x$1: Boolean)Unit">showDiff</a>    = <span title="Boolean(true)" class="keyword">true</span>
    // parsed isSet &quot;--show-diff&quot;
    <a href="#1162717" title="=&gt; scala.tools.partest.nest.ConsoleFileManager">fileManager</a>.<a href="FileManager.scala.html#1150610" title="(x$1: Boolean)Unit">updateCheck</a> = <a href="#1163075" title="scala.tools.nsc.util.CommandLine">parsed</a> <a href="../../nsc/util/CommandLineParser.scala.html#1134994" title="(arg: String)Boolean">isSet</a> <span title="String(&quot;--update-check&quot;)" class="string">&quot;--update-check&quot;</span>
    <a href="#1162717" title="=&gt; scala.tools.partest.nest.ConsoleFileManager">fileManager</a>.<a href="FileManager.scala.html#1150613" title="(x$1: Boolean)Unit">showLog</a>     = <a href="#1163075" title="scala.tools.nsc.util.CommandLine">parsed</a> <a href="../../nsc/util/CommandLineParser.scala.html#1134994" title="(arg: String)Boolean">isSet</a> <span title="String(&quot;--show-log&quot;)" class="string">&quot;--show-log&quot;</span>
    <a href="#1162717" title="=&gt; scala.tools.partest.nest.ConsoleFileManager">fileManager</a>.<a href="FileManager.scala.html#1150616" title="(x$1: Boolean)Unit">failed</a>      = <a href="#1163075" title="scala.tools.nsc.util.CommandLine">parsed</a> <a href="../../nsc/util/CommandLineParser.scala.html#1134994" title="(arg: String)Boolean">isSet</a> <span title="String(&quot;--failed&quot;)" class="string">&quot;--failed&quot;</span>

    <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#1163075" title="scala.tools.nsc.util.CommandLine">parsed</a> <a href="../../nsc/util/CommandLineParser.scala.html#1134994" title="(arg: String)Boolean">isSet</a> <span title="String(&quot;--ansi&quot;)" class="string">&quot;--ansi&quot;</span><span class="delimiter">)</span> <a href="NestUI.scala.html#50828" title="scala.tools.partest.nest.NestUI.type">NestUI</a> <a href="NestUI.scala.html#1147212" title="(number: Int)Unit">initialize</a> <a href="NestUI.scala.html#50828" title="scala.tools.partest.nest.NestUI.type">NestUI</a>.<a href="NestUI.scala.html#1147195" title="=&gt; Int">MANY</a>
    <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#1163075" title="scala.tools.nsc.util.CommandLine">parsed</a> <a href="../../nsc/util/CommandLineParser.scala.html#1134994" title="(arg: String)Boolean">isSet</a> <span title="String(&quot;--timeout&quot;)" class="string">&quot;--timeout&quot;</span><span class="delimiter">)</span> <a href="#1162717" title="=&gt; scala.tools.partest.nest.ConsoleFileManager">fileManager</a>.<a href="FileManager.scala.html#1150625" title="(x$1: String)Unit">timeout</a> = <a href="../../nsc/util/CommandLineParser.scala.html#1134997" title="(arg: String)String">parsed</a><span class="delimiter">(</span><span title="String(&quot;--timeout&quot;)" class="string">&quot;--timeout&quot;</span><span class="delimiter">)</span>
    <span title="Any" class="keyword">if</span> <span class="delimiter">(</span><a href="#1163075" title="scala.tools.nsc.util.CommandLine">parsed</a> <a href="../../nsc/util/CommandLineParser.scala.html#1134994" title="(arg: String)Boolean">isSet</a> <span title="String(&quot;--debug&quot;)" class="string">&quot;--debug&quot;</span><span class="delimiter">)</span> <a href="../../../util/Properties.scala.html#80162" title="(name: String, value: String)String">setProp</a><span class="delimiter">(</span><span title="String(&quot;partest.debug&quot;)" class="string">&quot;partest.debug&quot;</span>, <span title="String(&quot;true&quot;)" class="string">&quot;true&quot;</span><span class="delimiter">)</span>

    <span class="keyword">def</span> <a title="(file: java.io.File)Unit" id="1163078">addTestFile</a><span class="delimiter">(</span><a title="java.io.File" id="1163166">file</a>: <span title="java.io.File">File</span><span class="delimiter">)</span> = <span class="delimiter">{</span>
      <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="../../../Boolean.scala.html#57822" title="=&gt; Boolean">!</a><a href="#1163166" title="java.io.File">file</a>.<span title="()Boolean">exists</span><span class="delimiter">)</span>
        <a href="NestUI.scala.html#50828" title="scala.tools.partest.nest.NestUI.type">NestUI</a>.<a href="NestUI.scala.html#1147217" title="(msg: String)Unit">failure</a><span class="delimiter">(</span><a href="../../../Predef.scala.html#7604" title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps" class="string">&quot;Test file '%s' not found, skipping.\n&quot;</a> <a href="../../../collection/immutable/StringLike.scala.html#59882" title="(args: Any*)String">format</a> <a href="#1163166" title="java.io.File">file</a><span class="delimiter">)</span>
      <span class="keyword">else</span> <span class="delimiter">{</span>
        <a href="NestUI.scala.html#50828" title="scala.tools.partest.nest.NestUI.type">NestUI</a>.<a href="NestUI.scala.html#1147230" title="(msg: String)Unit">verbose</a><span class="delimiter">(</span><span title="String(&quot;adding test file &quot;)" class="string">&quot;adding test file &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#1163166" title="java.io.File">file</a><span class="delimiter">)</span>
        <a href="#1162720" title="(x$1: List[java.io.File])Unit">testFiles</a> <a href="../../../collection/immutable/List.scala.html#62702" title="(elem: java.io.File)(implicit bf: scala.collection.generic.CanBuildFrom[List[java.io.File],java.io.File,List[java.io.File]])List[java.io.File]">+:=</a> <a href="#1163166" title="java.io.File">file</a>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>

    // If --grep is given we suck in every file it matches.

    <span class="keyword">val</span> <a title="Option[String]" id="1163079">grepOption</a> = <a href="#1163075" title="scala.tools.nsc.util.CommandLine">parsed</a> <a href="../../nsc/util/CommandLineParser.scala.html#1134995" title="(arg: String)Option[String]">get</a> <span title="String(&quot;--grep&quot;)" class="string">&quot;--grep&quot;</span>
    <span class="keyword">val</span> <a title="List[java.io.File]" id="1163080">grepPaths</a> = <a href="#1163079" title="Option[String]">grepOption</a>.<a href="../../../Option.scala.html#62894" title="=&gt; List[String]">toList</a> <a href="../../../collection/TraversableLike.scala.html#58068" title="(f: String =&gt; scala.collection.GenTraversableOnce[java.io.File])(implicit bf: scala.collection.generic.CanBuildFrom[List[String],java.io.File,List[java.io.File]])List[java.io.File]">flatMap</a> <span class="delimiter">{</span> <a title="String" id="1163253">expr</a> =&gt;
      <span class="keyword">val</span> <a title="List[scala.reflect.io.Directory]" id="1163254">subjectDirs</a> = <a href="#1162724" title="=&gt; List[String]">testSetKinds</a> <a href="../../../collection/TraversableLike.scala.html#58063" title="(f: String =&gt; scala.reflect.io.Directory)(implicit bf: scala.collection.generic.CanBuildFrom[List[String],scala.reflect.io.Directory,List[scala.reflect.io.Directory]])List[scala.reflect.io.Directory]">map</a> <span class="delimiter">(</span><a href="PathSettings.scala.html#1150788" title="=&gt; scala.reflect.io.Directory">srcDir</a> <a href="../../../reflect/io/Path.scala.html#530880" title="(child: scala.reflect.io.Path)scala.reflect.io.Path">/</a> <a href="../../../reflect/io/Path.scala.html#531009" title="implicit scala.reflect.io.Path.string2path : (s: String)scala.reflect.io.Path">_</a> <a href="../../../reflect/io/Path.scala.html#530874" title="=&gt; scala.reflect.io.Directory">toDirectory</a><span class="delimiter">)</span>
      <span class="keyword">val</span> <a title="List[scala.reflect.io.File]" id="1163255">testPaths</a>   = <a href="#1163254" title="List[scala.reflect.io.Directory]">subjectDirs</a> <a href="../../../collection/TraversableLike.scala.html#58068" title="(f: scala.reflect.io.Directory =&gt; scala.collection.GenTraversableOnce[scala.reflect.io.File])(implicit bf: scala.collection.generic.CanBuildFrom[List[scala.reflect.io.Directory],scala.reflect.io.File,List[scala.reflect.io.File]])List[scala.reflect.io.File]">flatMap</a> <span class="delimiter">(</span><a href="#1163322" title="scala.reflect.io.Directory">_</a>.<a href="../../../reflect/io/Directory.scala.html#531531" title="=&gt; Iterator[scala.reflect.io.File]">files</a> <a href="../../../collection/Iterator.scala.html#66764" title="(p: scala.reflect.io.File =&gt; Boolean)Iterator[scala.reflect.io.File]">filter</a> <a href="#1162712" title="(p: scala.tools.nsc.io.Path)Boolean">stdFilter</a><span class="delimiter">)</span>
      <span class="keyword">val</span> <a title="List[scala.reflect.io.File]" id="1163256">paths</a>       = <a href="#1163255" title="List[scala.reflect.io.File]">testPaths</a> <a href="../../../collection/TraversableLike.scala.html#58073" title="(p: scala.reflect.io.File =&gt; Boolean)List[scala.reflect.io.File]">filter</a> <span class="delimiter">(</span><a title="scala.reflect.io.File" id="1163357">p</a> =&gt; <a href="#1162736" title="(path: scala.tools.nsc.io.Path, expr: String)Boolean">pathMatchesExpr</a><span class="delimiter">(</span><a href="#1163357" title="scala.reflect.io.File">p</a>, <a href="#1163253" title="String">expr</a><span class="delimiter">)</span><span class="delimiter">)</span>

      <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#1163256" title="List[scala.reflect.io.File]">paths</a>.<a href="../../../collection/SeqLike.scala.html#58787" title="=&gt; Boolean">isEmpty</a><span class="delimiter">)</span>
         <a href="NestUI.scala.html#50828" title="scala.tools.partest.nest.NestUI.type">NestUI</a>.<a href="NestUI.scala.html#1147217" title="(msg: String)Unit">failure</a><span class="delimiter">(</span><a href="../../../Predef.scala.html#7604" title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps" class="string">&quot;--grep string '%s' matched no tests.&quot;</a> <a href="../../../collection/immutable/StringLike.scala.html#59882" title="(args: Any*)String">format</a> <a href="#1163253" title="String">expr</a><span class="delimiter">)</span>

      <a href="#1163256" title="List[scala.reflect.io.File]">paths</a> <a href="../../../collection/TraversableLike.scala.html#58063" title="(f: scala.reflect.io.File =&gt; java.io.File)(implicit bf: scala.collection.generic.CanBuildFrom[List[scala.reflect.io.File],java.io.File,List[java.io.File]])List[java.io.File]">map</a> <span class="delimiter">(</span><a href="#1163379" title="scala.reflect.io.File">_</a>.<a href="../../../reflect/io/Path.scala.html#530865" title="=&gt; java.io.File">jfile</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>
    <span class="keyword">val</span> <a title="String" id="1163081">grepMessage</a> = <a href="#1163079" title="Option[String]">grepOption</a> <a href="../../../Option.scala.html#62865" title="(f: String =&gt; String)Option[String]">map</a> <span class="delimiter">(</span><a title="String" id="1163440">x</a> =&gt; <a href="../../../Predef.scala.html#7604" title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps" class="string">&quot;Argument '%s' matched %d test(s)&quot;</a>.<a href="../../../collection/immutable/StringLike.scala.html#59882" title="(args: Any*)String">format</a><span class="delimiter">(</span><a href="#1163440" title="String">x</a>, <a href="#1163080" title="List[java.io.File]">grepPaths</a>.<a href="../../../collection/SeqLike.scala.html#58788" title="=&gt; Int">size</a><span class="delimiter">)</span><span class="delimiter">)</span> <a href="../../../Option.scala.html#62859" title="(default: =&gt; String)String">getOrElse</a> <span title="String(&quot;&quot;)" class="string">&quot;&quot;</span>

    <a href="#1163080" title="List[java.io.File]">grepPaths</a> <a href="../../../collection/immutable/List.scala.html#62719" title="(f: java.io.File =&gt; Unit)Unit">foreach</a> <a href="#1163078" title="(file: java.io.File)Unit">addTestFile</a>
    <a href="#1163076" title="List[String]">args</a> <a href="../../../collection/immutable/List.scala.html#62719" title="(f: String =&gt; Unit)Unit">foreach</a> <span class="delimiter">(</span><a title="String" id="1163490">x</a> =&gt; <a href="#1163078" title="(file: java.io.File)Unit">addTestFile</a><span class="delimiter">(</span><span title="java.io.File" class="keyword">new</span> <span title="java.io.File">File</span><span class="delimiter">(</span><a href="#1163490" title="String">x</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>

    // If no file arguments were given, we assume --all
    <span class="keyword">val</span> <a title="List[ConsoleRunner.this.TestSet]" id="1163082">enabledTestSets</a>: <a href="../../../collection/immutable/List.scala.html#11952" title="List[ConsoleRunner.this.TestSet]">List</a><span class="delimiter">[</span>TestSet<span class="delimiter">]</span> = <span class="delimiter">{</span>
      <span class="keyword">val</span> <a title="List[String]" id="1163496">enabledArgs</a> = <a href="#1162726" title="=&gt; List[String]">testSetArgs</a> <a href="../../../collection/TraversableLike.scala.html#58073" title="(p: String =&gt; Boolean)List[String]">filter</a> <a href="#1163075" title="scala.tools.nsc.util.CommandLine">parsed</a>.<a href="../../nsc/util/CommandLineParser.scala.html#1134994" title="(arg: String)Boolean">isSet</a>

      <span title="List[ConsoleRunner.this.TestSet]" class="keyword">if</span> <span class="delimiter">(</span><a href="#1163076" title="List[String]">args</a>.<a href="../../../collection/SeqLike.scala.html#58787" title="=&gt; Boolean">isEmpty</a> <a href="../../../Boolean.scala.html#57826" title="(x: Boolean)Boolean">&amp;&amp;</a> <a href="../../../Boolean.scala.html#57822" title="=&gt; Boolean">!</a><span class="delimiter">(</span><a href="#1163075" title="scala.tools.nsc.util.CommandLine">parsed</a> <a href="../../nsc/util/CommandLineParser.scala.html#1134994" title="(arg: String)Boolean">isSet</a> <span title="String(&quot;--grep&quot;)" class="string">&quot;--grep&quot;</span><span class="delimiter">)</span> <a href="../../../Boolean.scala.html#57826" title="(x: Boolean)Boolean">&amp;&amp;</a> <span class="delimiter">(</span><a href="#1163496" title="List[String]">enabledArgs</a>.<a href="../../../collection/SeqLike.scala.html#58787" title="=&gt; Boolean">isEmpty</a> <a href="../../../Boolean.scala.html#57825" title="(x: Boolean)Boolean">||</a> <span class="delimiter">(</span><a href="#1163075" title="scala.tools.nsc.util.CommandLine">parsed</a> <a href="../../nsc/util/CommandLineParser.scala.html#1134994" title="(arg: String)Boolean">isSet</a> <span title="String(&quot;--all&quot;)" class="string">&quot;--all&quot;</span><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span> <a href="#1162714" title="=&gt; List[ConsoleRunner.this.TestSet]">testSets</a>
      <span class="keyword">else</span> <a href="#1163496" title="List[String]">enabledArgs</a> <a href="../../../collection/TraversableLike.scala.html#58063" title="(f: String =&gt; ConsoleRunner.this.TestSet)(implicit bf: scala.collection.generic.CanBuildFrom[List[String],ConsoleRunner.this.TestSet,List[ConsoleRunner.this.TestSet]])List[ConsoleRunner.this.TestSet]">map</a> <a href="#1162728" title="=&gt; scala.collection.immutable.Map[String,ConsoleRunner.this.TestSet]">testSetArgMap</a>
    <span class="delimiter">}</span>

    <span class="keyword">val</span> <a title="Object" id="1163083">dir</a> =
      <span title="Object" class="keyword">if</span> <span class="delimiter">(</span><a href="#1162717" title="=&gt; scala.tools.partest.nest.ConsoleFileManager">fileManager</a>.<a href="ConsoleFileManager.scala.html#1161961" title="=&gt; Option[String]">testClasses</a>.<a href="../../../Option.scala.html#62857" title="=&gt; Boolean">isDefined</a><span class="delimiter">)</span> <a href="#1162717" title="=&gt; scala.tools.partest.nest.ConsoleFileManager">fileManager</a>.<a href="ConsoleFileManager.scala.html#1162021" title="=&gt; scala.tools.nsc.io.Directory">testClassesDir</a>
      <span class="keyword">else</span> <a href="#1162717" title="=&gt; scala.tools.partest.nest.ConsoleFileManager">fileManager</a>.<a href="ConsoleFileManager.scala.html#1161960" title="=&gt; Option[scala.reflect.io.Path]">testBuildFile</a> <a href="../../../Option.scala.html#62859" title="(default: =&gt; Object)Object">getOrElse</a> <span class="delimiter">{</span>
        <a href="#1162717" title="=&gt; scala.tools.partest.nest.ConsoleFileManager">fileManager</a>.<a href="ConsoleFileManager.scala.html#1162011" title="=&gt; java.io.File">latestCompFile</a>.<span title="()java.io.File">getParentFile</span>.<span title="()java.io.File">getParentFile</span>.<span title="()java.io.File">getAbsoluteFile</span>
      <span class="delimiter">}</span>

    <span class="keyword">val</span> <a title="String" id="1163084">vmBin</a>  = <a href="../../../util/Properties.scala.html#80183" title="=&gt; String">javaHome</a> <span title="(x$1: Any)String">+</span> <span title="java.io.File.type">File</span>.<span title="String">separator</span> <span title="(x$1: Any)String">+</span> <span title="String(&quot;bin&quot;)" class="string">&quot;bin&quot;</span>
    <span class="keyword">val</span> <a title="String" id="1163085">vmName</a> = <a href="../../../Predef.scala.html#7604" title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps" class="string">&quot;%s (build %s, %s)&quot;</a>.<a href="../../../collection/immutable/StringLike.scala.html#59882" title="(args: Any*)String">format</a><span class="delimiter">(</span><a href="../../../util/Properties.scala.html#80187" title="=&gt; String">javaVmName</a>, <a href="../../../util/Properties.scala.html#80189" title="=&gt; String">javaVmVersion</a>, <a href="../../../util/Properties.scala.html#80186" title="=&gt; String">javaVmInfo</a><span class="delimiter">)</span>
    <span class="keyword">val</span> <a title="String" id="1163086">vmOpts</a> = <a href="#1162717" title="=&gt; scala.tools.partest.nest.ConsoleFileManager">fileManager</a>.<a href="FileManager.scala.html#1150621" title="=&gt; String">JAVA_OPTS</a>

    <a href="NestUI.scala.html#50828" title="scala.tools.partest.nest.NestUI.type">NestUI</a>.<a href="NestUI.scala.html#1147230" title="(msg: String)Unit">verbose</a><span class="delimiter">(</span><span title="String(&quot;enabled test sets: &quot;)" class="string">&quot;enabled test sets: &quot;</span> <span title="(x$1: Any)String">+</span> <span class="delimiter">(</span><a href="#1163082" title="List[ConsoleRunner.this.TestSet]">enabledTestSets</a> <a href="../../../collection/TraversableLike.scala.html#58063" title="(f: ConsoleRunner.this.TestSet =&gt; String)(implicit bf: scala.collection.generic.CanBuildFrom[List[ConsoleRunner.this.TestSet],String,List[String]])List[String]">map</a> <span class="delimiter">(</span><a href="#1163585" title="ConsoleRunner.this.TestSet">_</a>.<a href="#1162765" title="=&gt; String">kind</a><span class="delimiter">)</span> <a href="../../../collection/TraversableOnce.scala.html#58283" title="(sep: String)String">mkString</a> <span title="String(&quot; &quot;)" class="string">&quot; &quot;</span><span class="delimiter">)</span><span class="delimiter">)</span>

    <a href="../../../collection/immutable/List.scala.html#62451" title="(xs: String*)List[String]">List</a><span class="delimiter">(</span>
      <span title="String(&quot;Scala compiler classes in: &quot;)" class="string">&quot;Scala compiler classes in: &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#1163083" title="Object">dir</a>,
      <span title="String(&quot;Scala version is:          &quot;)" class="string">&quot;Scala version is:          &quot;</span> <span title="(x$1: Any)String">+</span> <a href="../../../util/Properties.scala.html#80199" title="=&gt; String">versionMsg</a>,
      <span title="String(&quot;Scalac options are:        &quot;)" class="string">&quot;Scalac options are:        &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#1162717" title="=&gt; scala.tools.partest.nest.ConsoleFileManager">fileManager</a>.<a href="FileManager.scala.html#1150618" title="=&gt; Seq[String]">SCALAC_OPTS</a>,
      <span title="String(&quot;Java binaries in:          &quot;)" class="string">&quot;Java binaries in:          &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#1163084" title="String">vmBin</a>,
      <span title="String(&quot;Java runtime is:           &quot;)" class="string">&quot;Java runtime is:           &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#1163085" title="String">vmName</a>,
      <span title="String(&quot;Java options are:          &quot;)" class="string">&quot;Java options are:          &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#1163086" title="String">vmOpts</a>,
      <span title="String(&quot;Source directory is:       &quot;)" class="string">&quot;Source directory is:       &quot;</span> <span title="(x$1: Any)String">+</span> <a href="PathSettings.scala.html#1150788" title="=&gt; scala.reflect.io.Directory">srcDir</a>,
      <span title="String(&quot;&quot;)" class="string">&quot;&quot;</span>
    <span class="delimiter">)</span> <a href="../../../collection/immutable/List.scala.html#62719" title="(f: String =&gt; Unit)Unit">foreach</a> <span class="delimiter">(</span><a title="String" id="1163646">x</a> =&gt; <a href="NestUI.scala.html#50828" title="scala.tools.partest.nest.NestUI.type">NestUI</a> <a href="NestUI.scala.html#1147230" title="(msg: String)Unit">verbose</a> <span class="delimiter">(</span><a href="#1163646" title="String">x</a> <span title="(x$1: Any)String">+</span> <span title="String(&quot;\n&quot;)" class="string">&quot;\n&quot;</span><span class="delimiter">)</span><span class="delimiter">)</span>

    <a href="NestUI.scala.html#50828" title="scala.tools.partest.nest.NestUI.type">NestUI</a>.<a href="NestUI.scala.html#1147230" title="(msg: String)Unit">verbose</a><span class="delimiter">(</span><span title="String(&quot;available processors: &quot;)" class="string">&quot;available processors: &quot;</span> <span title="(x$1: Any)String">+</span> <span title="Runtime.type">Runtime</span>.<span title="()Runtime">getRuntime</span><span class="delimiter">(</span><span class="delimiter">)</span>.<span title="()Int">availableProcessors</span><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span>

    // Dragged down here so it isn't buried under the banner.
    <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#1163081" title="String">grepMessage</a> <span title="(x$1: AnyRef)Boolean">!=</span> <span title="String(&quot;&quot;)" class="string">&quot;&quot;</span><span class="delimiter">)</span>
      <a href="NestUI.scala.html#50828" title="scala.tools.partest.nest.NestUI.type">NestUI</a>.<a href="NestUI.scala.html#1147221" title="(msg: String)Unit">normal</a><span class="delimiter">(</span><a href="#1163081" title="String">grepMessage</a> <span title="(x$1: Any)String">+</span> <span title="String(&quot;\n&quot;)" class="string">&quot;\n&quot;</span><span class="delimiter">)</span>

    <span class="keyword">val</span> <a href="#3376920" title="(x: (Int, Int, Long))(Int, Int, Long)" class="delimiter">(</a><a href="../../../Tuple2.scala.html#60635" title="(Int, Int)" id="3376918" class="delimiter">(</a><a href="../../../Tuple2.scala.html#60635" title="Int" id="1163088">successes</a>, <a href="../../../Tuple2.scala.html#60637" title="Int" id="1163089">failures</a><span class="delimiter">)</span>, <a href="../../../Tuple2.scala.html#60637" title="Long" id="1163090">elapsedMillis</a><span class="delimiter">)</span> = <a href="../package.scala.html#55896" title="(body: =&gt; (Int, Int))((Int, Int), Long)">timed</a><a href="../../../Tuple2.scala.html#783" title="((Int, Int), Long) @unchecked" class="delimiter">(</a><a href="#1162739" title="(enabledSets: List[ConsoleRunner.this.TestSet])(Int, Int)">testCheckAll</a><span class="delimiter">(</span><a href="#1163082" title="List[ConsoleRunner.this.TestSet]">enabledTestSets</a><span class="delimiter">)</span><span class="delimiter">)</span>
    <span class="keyword">val</span> <a title="Int" id="1163091">total</a> = <a href="#1163088" title="Int">successes</a> <a href="../../../Int.scala.html#57154" title="(x: Int)Int">+</a> <a href="#1163089" title="Int">failures</a>

    <span class="keyword">val</span> <a title="Long" id="1163092">elapsedSecs</a> = <a href="#1163090" title="Long">elapsedMillis</a><a href="../../../Long.scala.html#57541" title="(x: Int)Long">/</a><span title="Int(1000)" class="int">1000</span>
    <span class="keyword">val</span> <a title="Long" id="1163093">elapsedMins</a> = <a href="#1163092" title="Long">elapsedSecs</a><a href="../../../Long.scala.html#57541" title="(x: Int)Long">/</a><span title="Int(60)" class="int">60</span>
    <span class="keyword">val</span> <a title="Long" id="1163094">elapsedHrs</a>  = <a href="#1163093" title="Long">elapsedMins</a><a href="../../../Long.scala.html#57541" title="(x: Int)Long">/</a><span title="Int(60)" class="int">60</span>
    <span class="keyword">val</span> <a title="Long" id="1163095">dispMins</a> = <a href="#1163093" title="Long">elapsedMins</a> <a href="../../../Long.scala.html#57528" title="(x: Long)Long">-</a> <a href="#1163094" title="Long">elapsedHrs</a>  <a href="../../../Long.scala.html#57534" title="(x: Int)Long">*</a> <span title="Int(60)" class="int">60</span>
    <span class="keyword">val</span> <a title="Long" id="1163096">dispSecs</a> = <a href="#1163092" title="Long">elapsedSecs</a> <a href="../../../Long.scala.html#57528" title="(x: Long)Long">-</a> <a href="#1163093" title="Long">elapsedMins</a> <a href="../../../Long.scala.html#57534" title="(x: Int)Long">*</a> <span title="Int(60)" class="int">60</span>

    <span class="keyword">val</span> <a title="String" id="1163097">dispElapsed</a> = <span class="delimiter">{</span>
      <span class="keyword">def</span> <a title="(num: Long)String" id="1163720">form</a><span class="delimiter">(</span><a title="Long" id="1163721">num</a>: <a href="../../../Long.scala.html#1293" title="Long">Long</a><span class="delimiter">)</span> = <span title="String" class="keyword">if</span> <span class="delimiter">(</span><a href="#1163721" title="Long">num</a> <a href="../../../Long.scala.html#57477" title="(x: Int)Boolean">&lt;</a> <span title="Int(10)" class="int">10</span><span class="delimiter">)</span> <span title="String(&quot;0&quot;)" class="string">&quot;0&quot;</span><span title="(x$1: Any)String">+</span><a href="#1163721" title="Long">num</a> <span class="keyword">else</span> <span title="String(&quot;&quot;)" class="string">&quot;&quot;</span><span title="(x$1: Any)String">+</span><a href="#1163721" title="Long">num</a>
      <a href="#1163720" title="(num: Long)String">form</a><span class="delimiter">(</span><a href="#1163094" title="Long">elapsedHrs</a><span class="delimiter">)</span><span title="(x$1: Any)String">+</span><span title="String(&quot;:&quot;)" class="string">&quot;:&quot;</span><span title="(x$1: Any)String">+</span><a href="#1163720" title="(num: Long)String">form</a><span class="delimiter">(</span><a href="#1163095" title="Long">dispMins</a><span class="delimiter">)</span><span title="(x$1: Any)String">+</span><span title="String(&quot;:&quot;)" class="string">&quot;:&quot;</span><span title="(x$1: Any)String">+</span><a href="#1163720" title="(num: Long)String">form</a><span class="delimiter">(</span><a href="#1163096" title="Long">dispSecs</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>

    <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#1163089" title="Int">failures</a> <a href="../../../Int.scala.html#57097" title="(x: Int)Boolean">==</a> <span title="Int(0)" class="int">0</span><span class="delimiter">)</span>
      <a href="NestUI.scala.html#50828" title="scala.tools.partest.nest.NestUI.type">NestUI</a>.<a href="NestUI.scala.html#1147215" title="(msg: String)Unit">success</a><span class="delimiter">(</span><span title="String(&quot;All of &quot;)" class="string">&quot;All of &quot;</span><span title="(x$1: Any)String">+</span><a href="#1163091" title="Int">total</a><span title="(x$1: Any)String">+</span><span title="String(&quot; tests were successful (elapsed time: &quot;)" class="string">&quot; tests were successful (elapsed time: &quot;</span><span title="(x$1: Any)String">+</span><a href="#1163097" title="String">dispElapsed</a><span title="(x$1: Any)String">+</span><span title="String(&quot;)\n&quot;)" class="string">&quot;)\n&quot;</span><span class="delimiter">)</span>
    <span class="keyword">else</span>
      <a href="NestUI.scala.html#50828" title="scala.tools.partest.nest.NestUI.type">NestUI</a>.<a href="NestUI.scala.html#1147217" title="(msg: String)Unit">failure</a><span class="delimiter">(</span><a href="#1163089" title="Int">failures</a><a href="../../../Int.scala.html#57087" title="(x: String)String">+</a><span title="String(&quot; of &quot;)" class="string">&quot; of &quot;</span><span title="(x$1: Any)String">+</span><a href="#1163091" title="Int">total</a><span title="(x$1: Any)String">+</span><span title="String(&quot; tests failed (elapsed time: &quot;)" class="string">&quot; tests failed (elapsed time: &quot;</span><span title="(x$1: Any)String">+</span><a href="#1163097" title="String">dispElapsed</a><span title="(x$1: Any)String">+</span><span title="String(&quot;)\n&quot;)" class="string">&quot;)\n&quot;</span><span class="delimiter">)</span>

    <span title="System.type">System</span> <span title="(x$1: Int)Unit">exit</span> <span class="delimiter">(</span> <span title="Int" class="keyword">if</span> <span class="delimiter">(</span><a href="#1163089" title="Int">failures</a> <a href="../../../Int.scala.html#57097" title="(x: Int)Boolean">==</a> <a href="#1162722" title="=&gt; Int">errors</a><span class="delimiter">)</span> <span title="Int(0)" class="int">0</span> <span class="keyword">else</span> <span title="Int(1)" class="int">1</span> <span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="(testSet: ConsoleRunner.this.TestSet)(Int, Int)" id="1162738">runTests</a><span class="delimiter">(</span><a title="ConsoleRunner.this.TestSet" id="1163752">testSet</a>: <a href="#1164184" title="ConsoleRunner.this.TestSet">TestSet</a><span class="delimiter">)</span>: <a href="../../../Tuple2.scala.html#783" title="(Int, Int)" class="delimiter">(</a>Int, Int<span class="delimiter">)</span> = <span class="delimiter">{</span>
    <span class="keyword">val</span> TestSet<a href="#3376926" title="(x: (String, scala.tools.nsc.io.Path =&gt; Boolean, String))(String, scala.tools.nsc.io.Path =&gt; Boolean, String)" class="delimiter">(</a><a href="#1162765" title="String" id="1163755">kind</a>, <a href="#1162766" title="scala.tools.nsc.io.Path =&gt; Boolean" id="1163756">filter</a>, <a href="#1162767" title="String" id="1163757">msg</a><span class="delimiter">)</span> = <a href="#1163752" title="ConsoleRunner.this.TestSet">testSet</a>

    <a href="#1162717" title="=&gt; scala.tools.partest.nest.ConsoleFileManager">fileManager</a>.<a href="ConsoleFileManager.scala.html#1162027" title="(kind: String, cond: scala.tools.nsc.io.Path =&gt; Boolean)List[java.io.File]">getFiles</a><a href="#3376930" title="List[java.io.File]" class="delimiter">(</a><a href="#1163755" title="String">kind</a>, <a href="#1163756" title="scala.tools.nsc.io.Path =&gt; Boolean">filter</a><span class="delimiter">)</span> <span class="keyword">match</span> <span class="delimiter">{</span>
      <span class="keyword">case</span> <a href="../../../collection/immutable/List.scala.html#11188" title="(Int, Int)" id="3376932">Nil</a>    =&gt; <a href="NestUI.scala.html#50828" title="scala.tools.partest.nest.NestUI.type">NestUI</a>.<a href="NestUI.scala.html#1147230" title="(msg: String)Unit">verbose</a><span class="delimiter">(</span><span title="String(&quot;test dir empty\n&quot;)" class="string">&quot;test dir empty\n&quot;</span><span class="delimiter">)</span> ; <a href="../../../Tuple2.scala.html#62849" title="(_1: Int, _2: Int)(Int, Int)" class="delimiter">(</a><span title="Int(0)" class="int">0</span>, <span title="Int(0)" class="int">0</span><span class="delimiter">)</span>
      <span class="keyword">case</span> files  =&gt;
        <a href="NestUI.scala.html#50828" title="scala.tools.partest.nest.NestUI.type">NestUI</a>.<a href="NestUI.scala.html#1147230" title="(msg: String)Unit">verbose</a><span class="delimiter">(</span><span title="String(&quot;test files: &quot;)" class="string">&quot;test files: &quot;</span><span title="(x$1: Any)String">+</span>files<span class="delimiter">)</span>
        <a href="NestUI.scala.html#50828" title="scala.tools.partest.nest.NestUI.type">NestUI</a>.<a href="NestUI.scala.html#1147213" title="(msg: String)Unit">outline</a><span class="delimiter">(</span><span title="String(&quot;\n&quot;)" class="string">&quot;\n&quot;</span><span title="(x$1: Any)String">+</span><a href="#1163757" title="String">msg</a><span title="(x$1: Any)String">+</span><span title="String(&quot;\n&quot;)" class="string">&quot;\n&quot;</span><span class="delimiter">)</span>
        <a href="../package.scala.html#55905" title="(results: Iterable[Tuple2[_, scala.tools.partest.TestState]])(Int, Int)">resultsToStatistics</a><span class="delimiter">(</span><a href="DirectRunner.scala.html#1150581" title="(_kindFiles: List[java.io.File], kind: String)scala.collection.immutable.Map[String,scala.tools.partest.TestState]">runTestsForFiles</a><span class="delimiter">(</span>files, <a href="#1163755" title="String">kind</a><span class="delimiter">)</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  /**
   * @return (success count, failure count)
   */
  <span class="keyword">def</span> <a title="(enabledSets: List[ConsoleRunner.this.TestSet])(Int, Int)" id="1162739">testCheckAll</a><span class="delimiter">(</span><a title="List[ConsoleRunner.this.TestSet]" id="1163668">enabledSets</a>: <a href="../../../collection/immutable/List.scala.html#11952" title="List[ConsoleRunner.this.TestSet]">List</a><span class="delimiter">[</span>TestSet<span class="delimiter">]</span><span class="delimiter">)</span>: <a href="../../../Tuple2.scala.html#783" title="(Int, Int)" class="delimiter">(</a>Int, Int<span class="delimiter">)</span> = <span class="delimiter">{</span>
    <span class="keyword">def</span> <a title="(f: java.io.File)String" id="1163804">kindOf</a><span class="delimiter">(</span><a title="java.io.File" id="1163811">f</a>: <span title="java.io.File">File</span><span class="delimiter">)</span> = <span class="delimiter">{</span>
      <span class="delimiter">(</span><a href="PathSettings.scala.html#1150788" title="=&gt; scala.reflect.io.Directory">srcDir</a> <a href="../../../reflect/io/Path.scala.html#530890" title="(other: scala.reflect.io.Path)scala.reflect.io.Path">relativize</a> <a href="../../../reflect/io/Path.scala.html#531018" title="(jfile: java.io.File)scala.reflect.io.Path">Path</a><span class="delimiter">(</span><a href="#1163811" title="java.io.File">f</a><span class="delimiter">)</span>.<a href="../../../reflect/io/Path.scala.html#530876" title="=&gt; scala.reflect.io.Path">toCanonical</a><span class="delimiter">)</span>.<a href="../../../reflect/io/Path.scala.html#530892" title="=&gt; List[String]">segments</a> <span class="keyword">match</span> <span class="delimiter">{</span>
        <span class="keyword">case</span> <span class="delimiter">(</span><a href="../../../collection/immutable/List.scala.html#206583" title="String" id="3376952" class="string">&quot;..&quot;</a> <a href="#3376942" title="String" id="3376945">::</a> <a href="../../../collection/immutable/List.scala.html#206583" title="String" id="3376953" class="string">&quot;scaladoc&quot;</a> <a href="../../../collection/immutable/List.scala.html#206584" title="List[String]" id="3376949">::</a> <a href="../../../collection/immutable/List.scala.html#206584" title="List[String]" id="1163824">xs</a><span class="delimiter">)</span> =&gt; <a href="#1163824" title="List[String]">xs</a>.<a href="#3376955" title="(x: String)String">head</a>
        <span class="keyword">case</span> xs =&gt; xs.<a href="#3376955" title="(x: String)String">head</a>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>

    <span class="keyword">val</span> <a href="#3376968" title="(x: (List[java.io.File], List[java.io.File]))(List[java.io.File], List[java.io.File])" class="delimiter">(</a><a href="../../../Tuple2.scala.html#60635" title="List[java.io.File]" id="1163806">valid</a>, <a href="../../../Tuple2.scala.html#60637" title="List[java.io.File]" id="1163807">invalid</a><span class="delimiter">)</span> = <a href="#1162720" title="=&gt; List[java.io.File]">testFiles</a> <a href="../../../collection/TraversableLike.scala.html#58080" title="(p: java.io.File =&gt; Boolean)(List[java.io.File], List[java.io.File])">partition</a> <span class="delimiter">(</span><a title="java.io.File" id="1163831">x</a> =&gt; <a href="#1162724" title="=&gt; List[String]">testSetKinds</a> <a href="../../../collection/LinearSeqOptimized.scala.html#86380" title="(elem: Any)Boolean">contains</a> <a href="#1163804" title="(f: java.io.File)String">kindOf</a><span class="delimiter">(</span><a href="#1163831" title="java.io.File">x</a><span class="delimiter">)</span><span class="delimiter">)</span>
    <a href="#1163807" title="List[java.io.File]">invalid</a> <a href="../../../collection/immutable/List.scala.html#62719" title="(f: java.io.File =&gt; Unit)Unit">foreach</a> <span class="delimiter">(</span><a title="java.io.File" id="1163863">x</a> =&gt; <a href="NestUI.scala.html#50828" title="scala.tools.partest.nest.NestUI.type">NestUI</a>.<a href="NestUI.scala.html#1147217" title="(msg: String)Unit">failure</a><span class="delimiter">(</span>
      <a href="../../../Predef.scala.html#7604" title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps" class="string">&quot;Invalid test file '%s', skipping.\n&quot;</a>.<a href="../../../collection/immutable/StringLike.scala.html#59882" title="(args: Any*)String">format</a><span class="delimiter">(</span><a href="#1163863" title="java.io.File">x</a><span class="delimiter">)</span> <span title="(x$1: Any)String">+</span>
      <a href="../../../Predef.scala.html#7604" title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps" class="string">&quot;(Test kind '%s' not in known set '%s')&quot;</a>.<a href="../../../collection/immutable/StringLike.scala.html#59882" title="(args: Any*)String">format</a><span class="delimiter">(</span><a href="#1163804" title="(f: java.io.File)String">kindOf</a><span class="delimiter">(</span><a href="#1163863" title="java.io.File">x</a><span class="delimiter">)</span>, <a href="#1162724" title="=&gt; List[String]">testSetKinds</a><span class="delimiter">)</span><span class="delimiter">)</span>
    <span class="delimiter">)</span>

    <span class="keyword">val</span> <a title="List[(String, List[java.io.File])]" id="1163808">grouped</a> = <span class="delimiter">(</span><a href="#1163806" title="List[java.io.File]">valid</a> <a href="../../../collection/TraversableLike.scala.html#58081" title="(f: java.io.File =&gt; String)scala.collection.immutable.Map[String,List[java.io.File]]">groupBy</a> <a href="#1163804" title="(f: java.io.File)String">kindOf</a><span class="delimiter">)</span>.<a href="../../../collection/TraversableOnce.scala.html#58263" title="=&gt; List[(String, List[java.io.File])]">toList</a> <a href="../../../collection/SeqLike.scala.html#58869" title="(f: ((String, List[java.io.File])) =&gt; Int)(implicit ord: scala.math.Ordering[Int])List[(String, List[java.io.File])]">sortBy</a> <span class="delimiter">(</span><a title="(String, List[java.io.File])" id="1163892">x</a> =&gt; <a href="#1162724" title="=&gt; List[String]">testSetKinds</a> <a href="../../../collection/GenSeqLike.scala.html#58689" title="(elem: String)Int">indexOf</a> <a href="#1163892" title="(String, List[java.io.File])">x</a>.<a href="../../../Tuple2.scala.html#60635" title="=&gt; String">_1</a><span class="delimiter">)</span>
    <span class="keyword">val</span> <a title="List[(Int, Int)]" id="1163809">runTestsFileLists</a> =
      <span class="keyword">for</span> <span class="delimiter">(</span><span class="delimiter">(</span><a href="../../../Tuple2.scala.html#60635" title="String" id="1163983">kind</a>, <a href="../../../Tuple2.scala.html#60637" title="List[java.io.File]" id="1163984">files</a><span class="delimiter">)</span> &lt;- <a href="../../../collection/TraversableLike.scala.html#58063" title="(f: ((String, List[java.io.File])) =&gt; (Int, Int))(implicit bf: scala.collection.generic.CanBuildFrom[List[(String, List[java.io.File])],(Int, Int),List[(Int, Int)]])List[(Int, Int)]">grouped</a><span class="delimiter">)</span> <span class="keyword">yield</span> <a href="#3376974" title="(x: (Int, Int))(Int, Int)" class="delimiter">{</a>
        <a href="NestUI.scala.html#50828" title="scala.tools.partest.nest.NestUI.type">NestUI</a>.<a href="NestUI.scala.html#1147213" title="(msg: String)Unit">outline</a><span class="delimiter">(</span><span title="String(&quot;\nTesting individual files\n&quot;)" class="string">&quot;\nTesting individual files\n&quot;</span><span class="delimiter">)</span>
        <a href="../package.scala.html#55905" title="(results: Iterable[Tuple2[_, scala.tools.partest.TestState]])(Int, Int)">resultsToStatistics</a><span class="delimiter">(</span><a href="DirectRunner.scala.html#1150581" title="(_kindFiles: List[java.io.File], kind: String)scala.collection.immutable.Map[String,scala.tools.partest.TestState]">runTestsForFiles</a><span class="delimiter">(</span><a href="#1163984" title="List[java.io.File]">files</a>, <a href="#1163983" title="String">kind</a><span class="delimiter">)</span><span class="delimiter">)</span>
      <span class="delimiter">}</span>

    <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#1163668" title="List[ConsoleRunner.this.TestSet]">enabledSets</a>.<a href="../../../collection/TraversableOnce.scala.html#58191" title="=&gt; Boolean">nonEmpty</a><span class="delimiter">)</span>
      <a href="NestUI.scala.html#50828" title="scala.tools.partest.nest.NestUI.type">NestUI</a>.<a href="NestUI.scala.html#1147230" title="(msg: String)Unit">verbose</a><span class="delimiter">(</span><span title="String(&quot;Run sets: &quot;)" class="string">&quot;Run sets: &quot;</span><span title="(x$1: Any)String">+</span><a href="#1163668" title="List[ConsoleRunner.this.TestSet]">enabledSets</a><span class="delimiter">)</span>

    <span class="keyword">val</span> <a title="List[(Int, Int)]" id="1163810">results</a> = <a href="#1163809" title="List[(Int, Int)]">runTestsFileLists</a> <a href="../../../collection/immutable/List.scala.html#62688" title="(prefix: List[(Int, Int)])List[(Int, Int)]">:::</a> <span class="delimiter">(</span><a href="#1163668" title="List[ConsoleRunner.this.TestSet]">enabledSets</a> <a href="../../../collection/TraversableLike.scala.html#58063" title="(f: ConsoleRunner.this.TestSet =&gt; (Int, Int))(implicit bf: scala.collection.generic.CanBuildFrom[List[ConsoleRunner.this.TestSet],(Int, Int),List[(Int, Int)]])List[(Int, Int)]">map</a> <a href="#1162738" title="(testSet: ConsoleRunner.this.TestSet)(Int, Int)">runTests</a><span class="delimiter">)</span>

    <a href="../../../Tuple2.scala.html#62849" title="(_1: Int, _2: Int)(Int, Int)" class="delimiter">(</a><a href="#1163810" title="List[(Int, Int)]">results</a> <a href="../../../collection/TraversableLike.scala.html#58063" title="(f: ((Int, Int)) =&gt; Int)(implicit bf: scala.collection.generic.CanBuildFrom[List[(Int, Int)],Int,List[Int]])List[Int]">map</a> <span class="delimiter">(</span><a href="#1164087" title="(Int, Int)">_</a>.<a href="../../../Tuple2.scala.html#60635" title="=&gt; Int">_1</a><span class="delimiter">)</span> <a href="../../../collection/TraversableOnce.scala.html#58232" title="(implicit num: Numeric[Int])Int">sum</a>, <a href="#1163810" title="List[(Int, Int)]">results</a> <a href="../../../collection/TraversableLike.scala.html#58063" title="(f: ((Int, Int)) =&gt; Int)(implicit bf: scala.collection.generic.CanBuildFrom[List[(Int, Int)],Int,List[Int]])List[Int]">map</a> <span class="delimiter">(</span><a href="#1164138" title="(Int, Int)">_</a>.<a href="../../../Tuple2.scala.html#60637" title="=&gt; Int">_2</a><span class="delimiter">)</span> <a href="../../../collection/TraversableOnce.scala.html#58232" title="(implicit num: Numeric[Int])Int">sum</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>
<span class="delimiter">}</span>

        </pre>
    </body>
</html>