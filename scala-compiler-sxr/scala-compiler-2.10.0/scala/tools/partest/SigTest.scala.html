<?xml version="1.0" encoding="utf-8"?>
      <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <meta http-equiv="Expires" content="0" />
        <title>scala/tools/partest/SigTest.scala</title>
        <script type="text/javascript" src="../../../jquery-all.js"></script>
        <script type="text/javascript" src="../../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../../style.css" title="Style"></link>
    </head>
    <body>
        <pre>
/* NSC -- new Scala compiler
 * Copyright 2005-2013 LAMP/EPFL
 * @author Paul Phillips
 */

<span class="keyword">package</span> scala.tools.partest

<span class="keyword">import</span> scala.tools.nsc.Settings
<span class="keyword">import</span> scala.tools.nsc.interpreter.ILoop
<span class="keyword">import</span> java.lang.reflect.<span class="delimiter">{</span> Method =&gt; JMethod, Field =&gt; JField <span class="delimiter">}</span>
<span class="keyword">import</span> scala.reflect.<span class="delimiter">{</span>ClassTag, classTag<span class="delimiter">}</span>

/** Support code for testing signatures.
 */
<span class="keyword">trait</span> <a title="trait SigTest extends Object" id="50663">SigTest</a> <a href="../../Unit.scala.html#1515" title="Unit" class="delimiter">{</a>
  <span class="keyword">def</span> <a title="(m: java.lang.reflect.Method)String" id="1153435">mstr</a><span class="delimiter">(</span><a title="java.lang.reflect.Method" id="1153466">m</a>: <span title="java.lang.reflect.Method">JMethod</span><span class="delimiter">)</span> = <a href="../../Predef.scala.html#7604" title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps" class="string">&quot;  (m) %s%s&quot;</a>.<a href="../../collection/immutable/StringLike.scala.html#59882" title="(args: Any*)String">format</a><span class="delimiter">(</span>
    <a href="#1153466" title="java.lang.reflect.Method">m</a>.<span title="()String">toGenericString</span>,
    <span title="Any" class="keyword">if</span> <span class="delimiter">(</span><a href="#1153466" title="java.lang.reflect.Method">m</a>.<span title="()Boolean">isBridge</span><span class="delimiter">)</span> <span title="String(&quot; (bridge)&quot;)" class="string">&quot; (bridge)&quot;</span> <span class="keyword">else</span> <span title="String(&quot;&quot;)" class="string">&quot;&quot;</span>
  <span class="delimiter">)</span>
  <span class="keyword">def</span> <a title="(f: java.lang.reflect.Field)String" id="1153436">fstr</a><span class="delimiter">(</span><a title="java.lang.reflect.Field" id="1153470">f</a>: <span title="java.lang.reflect.Field">JField</span><span class="delimiter">)</span> = <a href="../../Predef.scala.html#7604" title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps" class="string">&quot;  (f) %s&quot;</a>.<a href="../../collection/immutable/StringLike.scala.html#59882" title="(args: Any*)String">format</a><span class="delimiter">(</span><a href="#1153470" title="java.lang.reflect.Field">f</a>.<span title="()String">toGenericString</span><span class="delimiter">)</span>

  <span class="keyword">def</span> <a title="(name: String)Boolean" id="1153437">isObjectMethodName</a><span class="delimiter">(</span><a title="String" id="1153474">name</a>: <span title="String">String</span><span class="delimiter">)</span> = classOf<span title="Class[Object](classOf[java.lang.Object])" class="delimiter">[</span>Object<span class="delimiter">]</span>.<a href="../../Predef.scala.html#7555" title="(xs: Array[java.lang.reflect.Method])scala.collection.mutable.ArrayOps[java.lang.reflect.Method]">getMethods</a> <a href="../../collection/IndexedSeqOptimized.scala.html#59125" title="(p: java.lang.reflect.Method =&gt; Boolean)Boolean">exists</a> <span class="delimiter">(</span><a href="#1153695" title="java.lang.reflect.Method">_</a>.<span title="()String">getName</span> <span title="(x$1: AnyRef)Boolean">==</span> <a href="#1153474" title="String">name</a><span class="delimiter">)</span>

  <span class="keyword">def</span> <a title="[T](p: java.lang.reflect.Field =&gt; Boolean)(implicit evidence$1: scala.reflect.ClassTag[T])Array[java.lang.reflect.Field]" id="1153702">fields</a><span class="delimiter">[</span><a title="" id="1153440">T</a>: ClassTag<span class="delimiter">]</span><span class="delimiter">(</span><a title="java.lang.reflect.Field =&gt; Boolean" id="1153701">p</a>: JField =&gt; Boolean<span class="delimiter">)</span> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="Class[_]" id="1153703">cl</a> = <a href="../../reflect/package.scala.html#55632" title="[T](implicit ctag: scala.reflect.ClassTag[T])scala.reflect.ClassTag[T]">classTag</a><a href="#1153702" title="(implicit ctag: scala.reflect.ClassTag[T])scala.reflect.ClassTag[T]" class="delimiter">[</a><a href="#1153440" title="T">T</a><span class="delimiter">]</span>.<a href="../../reflect/ClassTag.scala.html#62565" title="=&gt; Class[_]">runtimeClass</a>
    <span class="keyword">val</span> <a title="Array[java.lang.reflect.Field]" id="1153704">fs</a> = <span class="delimiter">(</span><a href="#1153703" title="Class[_]">cl</a>.<a href="../../Predef.scala.html#7555" title="(xs: Array[java.lang.reflect.Field])scala.collection.mutable.ArrayOps[java.lang.reflect.Field]">getFields</a> <a href="../../Predef.scala.html#7555" title="(xs: Array[java.lang.reflect.Field])scala.collection.mutable.ArrayOps[java.lang.reflect.Field]">++</a> <a href="#1153703" title="Class[_]">cl</a>.<a href="../../Predef.scala.html#7555" title="(xs: Array[java.lang.reflect.Field])scala.collection.mutable.ArrayOps[java.lang.reflect.Field]">getDeclaredFields</a><span class="delimiter">)</span>.<a href="../../Predef.scala.html#7555" title="(xs: Array[java.lang.reflect.Field])scala.collection.mutable.ArrayOps[java.lang.reflect.Field]">distinct</a> <a href="../../collection/SeqLike.scala.html#58869" title="(f: java.lang.reflect.Field =&gt; String)(implicit ord: scala.math.Ordering[String])Array[java.lang.reflect.Field]">sortBy</a> <span class="delimiter">(</span><a href="#1154320" title="java.lang.reflect.Field">_</a>.<span title="()String">getName</span><span class="delimiter">)</span>

    <a href="../../Predef.scala.html#7555" title="(xs: Array[java.lang.reflect.Field])scala.collection.mutable.ArrayOps[java.lang.reflect.Field]">fs</a> <a href="../../collection/TraversableLike.scala.html#58073" title="(p: java.lang.reflect.Field =&gt; Boolean)Array[java.lang.reflect.Field]">filter</a> <a href="#1153701" title="java.lang.reflect.Field =&gt; Boolean">p</a>
  <span class="delimiter">}</span>
  <span class="keyword">def</span> <a title="[T](p: java.lang.reflect.Method =&gt; Boolean)(implicit evidence$2: scala.reflect.ClassTag[T])Array[java.lang.reflect.Method]" id="1154507">methods</a><span class="delimiter">[</span><a title="" id="1153443">T</a>: ClassTag<span class="delimiter">]</span><span class="delimiter">(</span><a title="java.lang.reflect.Method =&gt; Boolean" id="1154506">p</a>: JMethod =&gt; Boolean<span class="delimiter">)</span> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="Class[_]" id="1154508">cl</a> = <a href="../../reflect/package.scala.html#55632" title="[T](implicit ctag: scala.reflect.ClassTag[T])scala.reflect.ClassTag[T]">classTag</a><a href="#1154507" title="(implicit ctag: scala.reflect.ClassTag[T])scala.reflect.ClassTag[T]" class="delimiter">[</a><a href="#1153443" title="T">T</a><span class="delimiter">]</span>.<a href="../../reflect/ClassTag.scala.html#62565" title="=&gt; Class[_]">runtimeClass</a>
    <span class="keyword">val</span> <a title="Array[java.lang.reflect.Method]" id="1154509">ms</a> = <span class="delimiter">(</span><a href="#1154508" title="Class[_]">cl</a>.<a href="../../Predef.scala.html#7555" title="(xs: Array[java.lang.reflect.Method])scala.collection.mutable.ArrayOps[java.lang.reflect.Method]">getMethods</a> <a href="../../Predef.scala.html#7555" title="(xs: Array[java.lang.reflect.Method])scala.collection.mutable.ArrayOps[java.lang.reflect.Method]">++</a> <a href="#1154508" title="Class[_]">cl</a>.<a href="../../Predef.scala.html#7555" title="(xs: Array[java.lang.reflect.Method])scala.collection.mutable.ArrayOps[java.lang.reflect.Method]">getDeclaredMethods</a><span class="delimiter">)</span>.<a href="../../Predef.scala.html#7555" title="(xs: Array[java.lang.reflect.Method])scala.collection.mutable.ArrayOps[java.lang.reflect.Method]">distinct</a> <a href="../../collection/SeqLike.scala.html#58869" title="(f: java.lang.reflect.Method =&gt; (String, Boolean))(implicit ord: scala.math.Ordering[(String, Boolean)])Array[java.lang.reflect.Method]">sortBy</a> <span class="delimiter">(</span><a title="java.lang.reflect.Method" id="1155123">x</a> =&gt; <a href="../../Tuple2.scala.html#62849" title="(_1: String, _2: Boolean)(String, Boolean)" class="delimiter">(</a><a href="#1155123" title="java.lang.reflect.Method">x</a>.<span title="()String">getName</span>, <a href="#1155123" title="java.lang.reflect.Method">x</a>.<span title="()Boolean">isBridge</span><span class="delimiter">)</span><span class="delimiter">)</span>

    <a href="../../Predef.scala.html#7555" title="(xs: Array[java.lang.reflect.Method])scala.collection.mutable.ArrayOps[java.lang.reflect.Method]">ms</a> <a href="../../collection/TraversableLike.scala.html#58073" title="(p: java.lang.reflect.Method =&gt; Boolean)Array[java.lang.reflect.Method]">filter</a> <a href="#1154506" title="java.lang.reflect.Method =&gt; Boolean">p</a>
  <span class="delimiter">}</span>
  <span class="keyword">def</span> <a title="[T]()(implicit evidence$3: scala.reflect.ClassTag[T])Array[java.lang.reflect.Field]" id="1155437">allFields</a><span class="delimiter">[</span><a title="" id="1153446">T</a>: ClassTag<span class="delimiter">]</span><span class="delimiter">(</span><span class="delimiter">)</span>                = <a href="#1153702" title="[T](p: java.lang.reflect.Field =&gt; Boolean)(implicit evidence$1: scala.reflect.ClassTag[T])Array[java.lang.reflect.Field]">fields</a><span title="(p: java.lang.reflect.Field =&gt; Boolean)(implicit evidence$1: scala.reflect.ClassTag[T])Array[java.lang.reflect.Field]" class="delimiter">[</span><a href="#1153446" title="T">T</a><span class="delimiter">]</span><a href="#1155437" title="scala.reflect.ClassTag[T]" class="delimiter">(</a><a title="java.lang.reflect.Field" id="1155440">_</a> =&gt; <span title="Boolean(true)" class="keyword">true</span><span class="delimiter">)</span>
  <span class="keyword">def</span> <a title="[T]()(implicit evidence$4: scala.reflect.ClassTag[T])Array[java.lang.reflect.Method]" id="1155442">allMethods</a><span class="delimiter">[</span><a title="" id="1153449">T</a>: ClassTag<span class="delimiter">]</span><span class="delimiter">(</span><span class="delimiter">)</span>               = <a href="#1154507" title="[T](p: java.lang.reflect.Method =&gt; Boolean)(implicit evidence$2: scala.reflect.ClassTag[T])Array[java.lang.reflect.Method]">methods</a><span title="(p: java.lang.reflect.Method =&gt; Boolean)(implicit evidence$2: scala.reflect.ClassTag[T])Array[java.lang.reflect.Method]" class="delimiter">[</span><a href="#1153449" title="T">T</a><span class="delimiter">]</span><a href="#1155442" title="scala.reflect.ClassTag[T]" class="delimiter">(</a><a title="java.lang.reflect.Method" id="1155445">m</a> =&gt; <a href="../../Boolean.scala.html#57822" title="=&gt; Boolean">!</a><a href="#1153437" title="(name: String)Boolean">isObjectMethodName</a><span class="delimiter">(</span><a href="#1155445" title="java.lang.reflect.Method">m</a>.<span title="()String">getName</span><span class="delimiter">)</span><span class="delimiter">)</span>
  <span class="keyword">def</span> <a title="[T](name: String)(implicit evidence$5: scala.reflect.ClassTag[T])Array[java.lang.reflect.Field]" id="1155448">fieldsNamed</a><span class="delimiter">[</span><a title="" id="1153452">T</a>: ClassTag<span class="delimiter">]</span><span class="delimiter">(</span><a title="String" id="1155447">name</a>: <span title="String">String</span><span class="delimiter">)</span>  = <a href="#1153702" title="[T](p: java.lang.reflect.Field =&gt; Boolean)(implicit evidence$1: scala.reflect.ClassTag[T])Array[java.lang.reflect.Field]">fields</a><span title="(p: java.lang.reflect.Field =&gt; Boolean)(implicit evidence$1: scala.reflect.ClassTag[T])Array[java.lang.reflect.Field]" class="delimiter">[</span><a href="#1153452" title="T">T</a><span class="delimiter">]</span><a href="#1155448" title="scala.reflect.ClassTag[T]" class="delimiter">(</a><a href="#1155451" title="java.lang.reflect.Field">_</a>.<span title="()String">getName</span> <span title="(x$1: AnyRef)Boolean">==</span> <a href="#1155447" title="String">name</a><span class="delimiter">)</span>
  <span class="keyword">def</span> <a title="[T](name: String)(implicit evidence$6: scala.reflect.ClassTag[T])Array[java.lang.reflect.Method]" id="1155459">methodsNamed</a><span class="delimiter">[</span><a title="" id="1153455">T</a>: ClassTag<span class="delimiter">]</span><span class="delimiter">(</span><a title="String" id="1155458">name</a>: <span title="String">String</span><span class="delimiter">)</span> = <a href="#1154507" title="[T](p: java.lang.reflect.Method =&gt; Boolean)(implicit evidence$2: scala.reflect.ClassTag[T])Array[java.lang.reflect.Method]">methods</a><span title="(p: java.lang.reflect.Method =&gt; Boolean)(implicit evidence$2: scala.reflect.ClassTag[T])Array[java.lang.reflect.Method]" class="delimiter">[</span><a href="#1153455" title="T">T</a><span class="delimiter">]</span><a href="#1155459" title="scala.reflect.ClassTag[T]" class="delimiter">(</a><a href="#1155462" title="java.lang.reflect.Method">_</a>.<span title="()String">getName</span> <span title="(x$1: AnyRef)Boolean">==</span> <a href="#1155458" title="String">name</a><span class="delimiter">)</span>

  <span class="keyword">def</span> <a title="[T]()(implicit evidence$7: scala.reflect.ClassTag[T])Array[String]" id="1155469">allGenericStrings</a><span class="delimiter">[</span><a title="" id="1153458">T</a>: ClassTag<span class="delimiter">]</span><span class="delimiter">(</span><span class="delimiter">)</span> =
    <span class="delimiter">(</span><a href="#1155442" title="[T]()(implicit evidence$4: scala.reflect.ClassTag[T])Array[java.lang.reflect.Method]">allMethods</a><span title="()(implicit evidence$4: scala.reflect.ClassTag[T])Array[java.lang.reflect.Method]" class="delimiter">[</span><a href="#1153458" title="T">T</a><span class="delimiter">]</span><a href="../../Predef.scala.html#7555" title="(xs: Array[java.lang.reflect.Method])scala.collection.mutable.ArrayOps[java.lang.reflect.Method]" class="delimiter">(</a><span class="delimiter">)</span> <a href="../../Predef.scala.html#7555" title="(xs: Array[String])scala.collection.mutable.ArrayOps[String]">map</a> <a href="#1153435" title="(m: java.lang.reflect.Method)String">mstr</a><span class="delimiter">)</span> <a href="../../collection/TraversableLike.scala.html#58048" title="(that: scala.collection.GenTraversableOnce[String])(implicit bf: scala.collection.generic.CanBuildFrom[Array[String],String,Array[String]])Array[String]">++</a> <span class="delimiter">(</span><a href="#1155437" title="[T]()(implicit evidence$3: scala.reflect.ClassTag[T])Array[java.lang.reflect.Field]">allFields</a><span title="()(implicit evidence$3: scala.reflect.ClassTag[T])Array[java.lang.reflect.Field]" class="delimiter">[</span><a href="#1153458" title="T">T</a><span class="delimiter">]</span><a href="../../Predef.scala.html#7555" title="(xs: Array[java.lang.reflect.Field])scala.collection.mutable.ArrayOps[java.lang.reflect.Field]" class="delimiter">(</a><span class="delimiter">)</span> <a href="../../Predef.scala.html#7555" title="(xs: Array[String])scala.collection.mutable.ArrayOps[String]">map</a> <a href="#1153436" title="(f: java.lang.reflect.Field)String">fstr</a><span class="delimiter">)</span>

  <span class="keyword">def</span> <a title="[T](name: String)(implicit evidence$8: scala.reflect.ClassTag[T])Array[String]" id="1156805">genericStrings</a><span class="delimiter">[</span><a title="" id="1153461">T</a>: ClassTag<span class="delimiter">]</span><span class="delimiter">(</span><a title="String" id="1156804">name</a>: <span title="String">String</span><span class="delimiter">)</span> =
    <span class="delimiter">(</span><a href="#1155459" title="[T](name: String)(implicit evidence$6: scala.reflect.ClassTag[T])Array[java.lang.reflect.Method]">methodsNamed</a><span title="(name: String)(implicit evidence$6: scala.reflect.ClassTag[T])Array[java.lang.reflect.Method]" class="delimiter">[</span><a href="#1153461" title="T">T</a><span class="delimiter">]</span><a href="../../Predef.scala.html#7555" title="(xs: Array[java.lang.reflect.Method])scala.collection.mutable.ArrayOps[java.lang.reflect.Method]" class="delimiter">(</a><a href="#1156804" title="String">name</a><span class="delimiter">)</span> <a href="../../Predef.scala.html#7555" title="(xs: Array[String])scala.collection.mutable.ArrayOps[String]">map</a> <a href="#1153435" title="(m: java.lang.reflect.Method)String">mstr</a><span class="delimiter">)</span> <a href="../../collection/TraversableLike.scala.html#58048" title="(that: scala.collection.GenTraversableOnce[String])(implicit bf: scala.collection.generic.CanBuildFrom[Array[String],String,Array[String]])Array[String]">++</a> <span class="delimiter">(</span><a href="#1155448" title="[T](name: String)(implicit evidence$5: scala.reflect.ClassTag[T])Array[java.lang.reflect.Field]">fieldsNamed</a><span title="(name: String)(implicit evidence$5: scala.reflect.ClassTag[T])Array[java.lang.reflect.Field]" class="delimiter">[</span><a href="#1153461" title="T">T</a><span class="delimiter">]</span><a href="../../Predef.scala.html#7555" title="(xs: Array[java.lang.reflect.Field])scala.collection.mutable.ArrayOps[java.lang.reflect.Field]" class="delimiter">(</a><a href="#1156804" title="String">name</a><span class="delimiter">)</span> <a href="../../Predef.scala.html#7555" title="(xs: Array[String])scala.collection.mutable.ArrayOps[String]">map</a> <a href="#1153436" title="(f: java.lang.reflect.Field)String">fstr</a><span class="delimiter">)</span>

  <span class="keyword">def</span> <a title="[T](name: String)(implicit evidence$9: scala.reflect.ClassTag[T])Unit" id="1158141">show</a><span class="delimiter">[</span><a title="" id="1158144">T</a>: ClassTag<span class="delimiter">]</span><span class="delimiter">(</span><a title="String" id="1158142">name</a>: <span title="String">String</span> = <span title="String(&quot;&quot;)" class="string">&quot;&quot;</span><span class="delimiter">)</span> = <span class="delimiter">{</span>
    <a href="../../Predef.scala.html#7514" title="(x: Any)Unit">println</a><span class="delimiter">(</span><a href="../../reflect/package.scala.html#55632" title="[T](implicit ctag: scala.reflect.ClassTag[T])scala.reflect.ClassTag[T]">classTag</a><a href="#1158141" title="(implicit ctag: scala.reflect.ClassTag[T])scala.reflect.ClassTag[T]" class="delimiter">[</a><a href="#1158144" title="T">T</a><span class="delimiter">]</span>.<a href="../../reflect/ClassTag.scala.html#62565" title="=&gt; Class[_]">runtimeClass</a>.<span title="()String">getName</span><span class="delimiter">)</span>
    <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#1158142" title="String">name</a> <span title="(x$1: AnyRef)Boolean">==</span> <span title="String(&quot;&quot;)" class="string">&quot;&quot;</span><span class="delimiter">)</span> <a href="#1155469" title="[T]()(implicit evidence$7: scala.reflect.ClassTag[T])Array[String]">allGenericStrings</a><span title="()(implicit evidence$7: scala.reflect.ClassTag[T])Array[String]" class="delimiter">[</span><a href="#1158144" title="T">T</a><span class="delimiter">]</span><a href="../../Predef.scala.html#7555" title="(xs: Array[String])scala.collection.mutable.ArrayOps[String]" class="delimiter">(</a><span class="delimiter">)</span> <a href="../../collection/IndexedSeqOptimized.scala.html#59121" title="(f: String =&gt; Unit)Unit">foreach</a> <a href="../../Predef.scala.html#7514" title="(x: Any)Unit">println</a>
    <span class="keyword">else</span> <a href="#1156805" title="[T](name: String)(implicit evidence$8: scala.reflect.ClassTag[T])Array[String]">genericStrings</a><span title="(name: String)(implicit evidence$8: scala.reflect.ClassTag[T])Array[String]" class="delimiter">[</span><a href="#1158144" title="T">T</a><span class="delimiter">]</span><a href="../../Predef.scala.html#7555" title="(xs: Array[String])scala.collection.mutable.ArrayOps[String]" class="delimiter">(</a><a href="#1158142" title="String">name</a><span class="delimiter">)</span> <a href="../../collection/IndexedSeqOptimized.scala.html#59121" title="(f: String =&gt; Unit)Unit">foreach</a> <a href="../../Predef.scala.html#7514" title="(x: Any)Unit">println</a>
  <span class="delimiter">}</span>
<span class="delimiter">}</span>

        </pre>
    </body>
</html>