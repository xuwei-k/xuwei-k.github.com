<?xml version="1.0" encoding="utf-8"?>
      <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <meta http-equiv="Expires" content="0" />
        <title>scala/reflect/internal/transform/UnCurry.scala</title>
        <script type="text/javascript" src="../../../../jquery-all.js"></script>
        <script type="text/javascript" src="../../../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../../../style.css" title="Style"></link>
    </head>
    <body>
        <pre>
<span class="keyword">package</span> scala.reflect
<span class="keyword">package</span> internal
<span class="keyword">package</span> transform

<span class="keyword">import</span> <a href="../Flags.scala.html#20231" title="scala.reflect.internal.Flags.type">Flags</a>._

<span class="keyword">trait</span> <a title="trait UnCurry extends Object" id="22524">UnCurry</a> <a href="../../../Unit.scala.html#1515" title="Unit" class="delimiter">{</a>

  <span class="keyword">val</span> <a title="=&gt; scala.reflect.internal.SymbolTable" id="441910">global</a>: <a href="../SymbolTable.scala.html#20059" title="scala.reflect.internal.SymbolTable">SymbolTable</a>
  <span class="keyword">import</span> <a href="#441910" title="=&gt; scala.reflect.internal.SymbolTable">global</a>._
  <span class="keyword">import</span> <a href="../Definitions.scala.html#407777" title="UnCurry.this.global.definitions.type">definitions</a>._

  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(tp: UnCurry.this.global.Type)UnCurry.this.global.Type" id="441913">expandAlias</a><span class="delimiter">(</span><a title="UnCurry.this.global.Type" id="519822">tp</a>: <a href="../Types.scala.html#407270" title="UnCurry.this.global.Type">Type</a><span class="delimiter">)</span>: <a href="../Types.scala.html#407270" title="UnCurry.this.global.Type">Type</a> = <span title="UnCurry.this.global.Type" class="keyword">if</span> <span class="delimiter">(</span><a href="../../../Boolean.scala.html#57822" title="=&gt; Boolean">!</a><a href="#519822" title="UnCurry.this.global.Type">tp</a>.<a href="../Types.scala.html#408392" title="=&gt; Boolean">isHigherKinded</a><span class="delimiter">)</span> <a href="#519822" title="UnCurry.this.global.Type">tp</a>.<a href="../Types.scala.html#408438" title="=&gt; UnCurry.this.global.Type">normalize</a> <span class="keyword">else</span> <a href="#519822" title="UnCurry.this.global.Type">tp</a>

  <span class="keyword">val</span> <a title="UnCurry.this.global.TypeMap" id="441914">uncurry</a>: <a href="../Types.scala.html#407460" title="UnCurry.this.global.TypeMap">TypeMap</a> = <a href="#519907" title="UnCurry.this.global.TypeMap" class="keyword">new</a> <a href="../Types.scala.html#407460" title="anonymous class $anon extends UnCurry.this.global.TypeMap" id="519907">TypeMap</a> <span class="delimiter">{</span>
    <span class="keyword">def</span> <a title="(tp0: UnCurry.this.global.Type)UnCurry.this.global.Type" id="519909">apply</a><span class="delimiter">(</span><a title="UnCurry.this.global.Type" id="519913">tp0</a>: <a href="../Types.scala.html#407270" title="UnCurry.this.global.Type">Type</a><span class="delimiter">)</span>: <a href="../Types.scala.html#407270" title="UnCurry.this.global.Type">Type</a> = <span class="delimiter">{</span>
      <span class="keyword">val</span> <a title="UnCurry.this.global.Type" id="519919">tp</a> = <a href="#441913" title="(tp: UnCurry.this.global.Type)UnCurry.this.global.Type">expandAlias</a><span class="delimiter">(</span><a href="#519913" title="UnCurry.this.global.Type">tp0</a><span class="delimiter">)</span>
      <a href="#519919" title="UnCurry.this.global.Type">tp</a> <span class="keyword">match</span> <span class="delimiter">{</span>
        <span class="keyword">case</span> MethodType<a href="#3292620" title="Boolean" id="3292623" class="delimiter">(</a><a href="../Types.scala.html#410769" title="List[UnCurry.this.global.Symbol]" id="519922">params</a>, MethodType<a href="../Types.scala.html#410771" title="UnCurry.this.global.Type" id="3292625" class="delimiter">(</a><a href="../Types.scala.html#410769" title="List[UnCurry.this.global.Symbol]" id="519925">params1</a>, <a href="../Types.scala.html#410771" title="UnCurry.this.global.Type" id="519926">restpe</a><span class="delimiter">)</span><span class="delimiter">)</span> =&gt;
          <a href="#519909" title="(tp0: UnCurry.this.global.Type)UnCurry.this.global.Type">apply</a><a href="#3292680" title="(x: UnCurry.this.global.Type)UnCurry.this.global.Type" class="delimiter">(</a><a href="../Types.scala.html#420479" title="(params: List[UnCurry.this.global.Symbol], resultType: UnCurry.this.global.Type)UnCurry.this.global.MethodType">MethodType</a><span class="delimiter">(</span><a href="#519922" title="List[UnCurry.this.global.Symbol]">params</a> <a href="../../../collection/immutable/List.scala.html#62688" title="(prefix: List[UnCurry.this.global.Symbol])List[UnCurry.this.global.Symbol]">:::</a> <a href="#519925" title="List[UnCurry.this.global.Symbol]">params1</a>, <a href="#519926" title="UnCurry.this.global.Type">restpe</a><span class="delimiter">)</span><span class="delimiter">)</span>
        <span class="keyword">case</span> MethodType<span class="delimiter">(</span><a href="../Types.scala.html#410769" title="List[UnCurry.this.global.Symbol]" id="519946">params</a>, ExistentialType<a href="../Types.scala.html#410771" title="UnCurry.this.global.Type" id="3292630" class="delimiter">(</a><a href="../Types.scala.html#410683" title="List[UnCurry.this.global.Symbol]" id="519949">tparams</a>, <a href="../Types.scala.html#410685" title="UnCurry.this.global.Type" id="519950">restpe</a> @ MethodType<a href="#519950" title="UnCurry.this.global.Type" id="3292634" class="delimiter">(</a><a href="../Types.scala.html#410769" title="List[UnCurry.this.global.Symbol]" id="3292631">_</a>, <a href="../Types.scala.html#410771" title="UnCurry.this.global.Type" id="3292632">_</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span> =&gt;
          <a href="../../../Predef.scala.html#7485" title="(assertion: Boolean, message: =&gt; Any)Unit">assert</a><span class="delimiter">(</span><span title="Boolean(false)" class="keyword">false</span>, <span title="String(&quot;unexpected curried method types with intervening existential&quot;)" class="string">&quot;unexpected curried method types with intervening existential&quot;</span><span class="delimiter">)</span>
          <a href="#519913" title="UnCurry.this.global.Type">tp0</a>
        <span class="keyword">case</span> MethodType<span class="delimiter">(</span><a href="../../../collection/immutable/List.scala.html#206583" title="UnCurry.this.global.Symbol" id="519961">h</a> <a href="../Types.scala.html#410769" title="List[UnCurry.this.global.Symbol]" id="3292638">::</a> <a href="../../../collection/immutable/List.scala.html#206584" title="List[UnCurry.this.global.Symbol]" id="519962">t</a>, <a href="../Types.scala.html#410771" title="UnCurry.this.global.Type" id="519963">restpe</a><span class="delimiter">)</span> <span class="keyword">if</span> <a href="#519961" title="UnCurry.this.global.Symbol">h</a>.<a href="../HasFlags.scala.html#409853" title="=&gt; Boolean">isImplicit</a> =&gt;
          <a href="#519909" title="(tp0: UnCurry.this.global.Type)UnCurry.this.global.Type">apply</a><a href="#3292680" title="(x: UnCurry.this.global.Type)UnCurry.this.global.Type" class="delimiter">(</a><a href="../Types.scala.html#420479" title="(params: List[UnCurry.this.global.Symbol], resultType: UnCurry.this.global.Type)UnCurry.this.global.MethodType">MethodType</a><span class="delimiter">(</span><a href="#519961" title="UnCurry.this.global.Symbol">h</a>.<a href="../Symbols.scala.html#411417" title="=&gt; h.TypeOfClonedSymbol">cloneSymbol</a>.<a href="../Symbols.scala.html#411237" title="(mask: Long)h.TypeOfClonedSymbol">resetFlag</a><span class="delimiter">(</span><span title="Long(512L)">IMPLICIT</span><span class="delimiter">)</span> <a href="../../../collection/immutable/List.scala.html#62685" title="(x: UnCurry.this.global.Symbol)List[UnCurry.this.global.Symbol]">::</a> <a href="#519962" title="List[UnCurry.this.global.Symbol]">t</a>, <a href="#519963" title="UnCurry.this.global.Type">restpe</a><span class="delimiter">)</span><span class="delimiter">)</span>
        <span class="keyword">case</span> NullaryMethodType<a href="#3292620" title="UnCurry.this.global.Type" id="3292640" class="delimiter">(</a><a href="../Types.scala.html#410746" title="UnCurry.this.global.Type" id="520002">restpe</a><span class="delimiter">)</span> =&gt;
          <a href="#519909" title="(tp0: UnCurry.this.global.Type)UnCurry.this.global.Type">apply</a><a href="#3292680" title="(x: UnCurry.this.global.Type)UnCurry.this.global.Type" class="delimiter">(</a><a href="../Types.scala.html#420479" title="(params: List[UnCurry.this.global.Symbol], resultType: UnCurry.this.global.Type)UnCurry.this.global.MethodType">MethodType</a><span class="delimiter">(</span>List<a href="../../../collection/immutable/List.scala.html#11188" title="scala.collection.immutable.Nil.type" class="delimiter">(</a><span class="delimiter">)</span>, <a href="#520002" title="UnCurry.this.global.Type">restpe</a><span class="delimiter">)</span><span class="delimiter">)</span>
        <span class="keyword">case</span> TypeRef<a href="#3292620" title="Boolean" id="3292644" class="delimiter">(</a><a href="../Types.scala.html#410887" title="UnCurry.this.global.Type" id="520013">pre</a>, <a href="../Types.scala.html#410889" title="UnCurry.this.global.Symbol" id="3292668">ByNameParamClass</a>, <a href="../../../collection/immutable/List.scala.html#206583" title="UnCurry.this.global.Type" id="520018">arg</a> <a href="../Types.scala.html#410891" title="List[UnCurry.this.global.Type]" id="3292648">::</a> <a href="../../../collection/immutable/List.scala.html#206584" title="List[UnCurry.this.global.Type]" id="3292669">Nil</a><span class="delimiter">)</span> =&gt;
          <a href="#519909" title="(tp0: UnCurry.this.global.Type)UnCurry.this.global.Type">apply</a><a href="#3292680" title="(x: UnCurry.this.global.Type)UnCurry.this.global.Type" class="delimiter">(</a><a href="../Definitions.scala.html#408996" title="(formals: List[UnCurry.this.global.Type], restpe: UnCurry.this.global.Type)UnCurry.this.global.Type">functionType</a><span class="delimiter">(</span>List<a href="../../../collection/immutable/List.scala.html#11188" title="scala.collection.immutable.Nil.type" class="delimiter">(</a><span class="delimiter">)</span>, <a href="#520018" title="UnCurry.this.global.Type">arg</a><span class="delimiter">)</span><span class="delimiter">)</span>
        <span class="keyword">case</span> TypeRef<span class="delimiter">(</span><a href="../Types.scala.html#410887" title="UnCurry.this.global.Type" id="520031">pre</a>, <a href="../Types.scala.html#410889" title="UnCurry.this.global.Symbol" id="3292670">RepeatedParamClass</a>, <a href="../../../collection/immutable/List.scala.html#206583" title="UnCurry.this.global.Type" id="520034">arg</a> <a href="../Types.scala.html#410891" title="List[UnCurry.this.global.Type]" id="3292657">::</a> <a href="../../../collection/immutable/List.scala.html#206584" title="List[UnCurry.this.global.Type]" id="3292671">Nil</a><span class="delimiter">)</span> =&gt;
          <a href="#519909" title="(tp0: UnCurry.this.global.Type)UnCurry.this.global.Type">apply</a><a href="#3292680" title="(x: UnCurry.this.global.Type)UnCurry.this.global.Type" class="delimiter">(</a><a href="../Definitions.scala.html#409031" title="(arg: UnCurry.this.global.Type)UnCurry.this.global.Type">seqType</a><span class="delimiter">(</span><a href="#520034" title="UnCurry.this.global.Type">arg</a><span class="delimiter">)</span><span class="delimiter">)</span>
        <span class="keyword">case</span> TypeRef<span class="delimiter">(</span><a href="../Types.scala.html#410887" title="UnCurry.this.global.Type" id="520039">pre</a>, <a href="../Types.scala.html#410889" title="UnCurry.this.global.Symbol" id="3292672">JavaRepeatedParamClass</a>, <a href="../../../collection/immutable/List.scala.html#206583" title="UnCurry.this.global.Type" id="520042">arg</a> <a href="../Types.scala.html#410891" title="List[UnCurry.this.global.Type]" id="3292666">::</a> <a href="../../../collection/immutable/List.scala.html#206584" title="List[UnCurry.this.global.Type]" id="3292673">Nil</a><span class="delimiter">)</span> =&gt;
          <a href="#519909" title="(tp0: UnCurry.this.global.Type)UnCurry.this.global.Type">apply</a><a href="#3292680" title="(x: UnCurry.this.global.Type)UnCurry.this.global.Type" class="delimiter">(</a><a href="../Definitions.scala.html#409025" title="(arg: UnCurry.this.global.Type)UnCurry.this.global.Type">arrayType</a><span class="delimiter">(</span>
            <span title="UnCurry.this.global.Type" class="keyword">if</span> <span class="delimiter">(</span><a href="../Types.scala.html#407642" title="(tp: UnCurry.this.global.Type)Boolean">isUnboundedGeneric</a><span class="delimiter">(</span><a href="#520042" title="UnCurry.this.global.Type">arg</a><span class="delimiter">)</span><span class="delimiter">)</span> <a href="../Definitions.scala.html#408671" title="=&gt; UnCurry.this.global.ClassSymbol">ObjectClass</a>.<a href="../Symbols.scala.html#411559" title="=&gt; UnCurry.this.global.Type">tpe</a> <span class="keyword">else</span> <a href="#520042" title="UnCurry.this.global.Type">arg</a><span class="delimiter">)</span><span class="delimiter">)</span>
        <span class="keyword">case</span> _ =&gt;
          <a href="#441913" title="(tp: UnCurry.this.global.Type)UnCurry.this.global.Type">expandAlias</a><a href="#3292680" title="(x: UnCurry.this.global.Type)UnCurry.this.global.Type" class="delimiter">(</a><a href="../Types.scala.html#441772" title="(tp: UnCurry.this.global.Type)UnCurry.this.global.Type">mapOver</a><span class="delimiter">(</span><a href="#519919" title="UnCurry.this.global.Type">tp</a><span class="delimiter">)</span><span class="delimiter">)</span>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="keyword">private</span> <span class="keyword">val</span> <a title="UnCurry.this.global.TypeMap" id="441916">uncurryType</a> = <a href="#519812" title="UnCurry.this.global.TypeMap" class="keyword">new</a> <a href="../Types.scala.html#407460" title="anonymous class $anon extends UnCurry.this.global.TypeMap" id="519812">TypeMap</a> <span class="delimiter">{</span>
    <span class="keyword">def</span> <a title="(tp0: UnCurry.this.global.Type)UnCurry.this.global.Type" id="519814">apply</a><span class="delimiter">(</span><a title="UnCurry.this.global.Type" id="519815">tp0</a>: <a href="../Types.scala.html#407270" title="UnCurry.this.global.Type">Type</a><span class="delimiter">)</span>: <a href="../Types.scala.html#407270" title="UnCurry.this.global.Type">Type</a> = <span class="delimiter">{</span>
      <span class="keyword">val</span> <a title="UnCurry.this.global.Type" id="519821">tp</a> = <a href="#441913" title="(tp: UnCurry.this.global.Type)UnCurry.this.global.Type">expandAlias</a><span class="delimiter">(</span><a href="#519815" title="UnCurry.this.global.Type">tp0</a><span class="delimiter">)</span>
      <a href="#519821" title="UnCurry.this.global.Type">tp</a> <span class="keyword">match</span> <span class="delimiter">{</span>
        <span class="keyword">case</span> ClassInfoType<a href="#3292709" title="UnCurry.this.global.Type" id="3292711" class="delimiter">(</a><a href="../Types.scala.html#410826" title="List[UnCurry.this.global.Type]" id="519826">parents</a>, <a href="../Types.scala.html#410828" title="UnCurry.this.global.Scope" id="519827">decls</a>, <a href="../Types.scala.html#410830" title="UnCurry.this.global.Symbol" id="519828">clazz</a><span class="delimiter">)</span> =&gt;
          <span class="keyword">val</span> <a title="List[UnCurry.this.global.Type]" id="519829">parents1</a> = <a href="#519826" title="List[UnCurry.this.global.Type]">parents</a> <a href="../../../collection/immutable/List.scala.html#62694" title="(f: UnCurry.this.global.Type =&gt; UnCurry.this.global.Type)List[UnCurry.this.global.Type]">mapConserve</a> <a href="#441914" title="=&gt; UnCurry.this.global.TypeMap">uncurry</a>
          <span title="UnCurry.this.global.Type" class="keyword">if</span> <span class="delimiter">(</span><a href="#519829" title="List[UnCurry.this.global.Type]">parents1</a> <span title="(x$1: AnyRef)Boolean">eq</span> <a href="#519826" title="List[UnCurry.this.global.Type]">parents</a><span class="delimiter">)</span> <a href="#519821" title="UnCurry.this.global.Type">tp</a>
          <span class="keyword">else</span> <a href="../Types.scala.html#420424" title="(parents: List[UnCurry.this.global.Type], decls: UnCurry.this.global.Scope, typeSymbol: UnCurry.this.global.Symbol)UnCurry.this.global.ClassInfoType">ClassInfoType</a><span class="delimiter">(</span><a href="#519829" title="List[UnCurry.this.global.Type]">parents1</a>, <a href="#519827" title="UnCurry.this.global.Scope">decls</a>, <a href="#519828" title="UnCurry.this.global.Symbol">clazz</a><span class="delimiter">)</span> // @MAT normalize in decls??
        <span class="keyword">case</span> PolyType<a href="#3292709" title="UnCurry.this.global.Type" id="3292715" class="delimiter">(</a><a href="../Types.scala.html#410715" title="List[UnCurry.this.global.Symbol]" id="3292712">_</a>, <a href="../Types.scala.html#410717" title="UnCurry.this.global.Type" id="3292713">_</a><span class="delimiter">)</span> =&gt;
          <a href="../Types.scala.html#441772" title="(tp: UnCurry.this.global.Type)UnCurry.this.global.Type">mapOver</a><a href="#3292717" title="(x: UnCurry.this.global.Type)UnCurry.this.global.Type" class="delimiter">(</a><a href="#519821" title="UnCurry.this.global.Type">tp</a><span class="delimiter">)</span>
        <span class="keyword">case</span> _ =&gt;
          <a href="#3292717" title="(x: UnCurry.this.global.Type)UnCurry.this.global.Type">tp</a>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  /** - return symbol's transformed type,
   *  - if symbol is a def parameter with transformed type T, return () =&gt; T
   *
   * @MAT: starting with this phase, the info of every symbol will be normalized
   */
  <span class="keyword">def</span> <a title="(sym: UnCurry.this.global.Symbol, tp: UnCurry.this.global.Type)UnCurry.this.global.Type" id="441918">transformInfo</a><span class="delimiter">(</span><a title="UnCurry.this.global.Symbol" id="442017">sym</a>: <a href="../Symbols.scala.html#407146" title="UnCurry.this.global.Symbol">Symbol</a>, <a title="UnCurry.this.global.Type" id="442018">tp</a>: <a href="../Types.scala.html#407270" title="UnCurry.this.global.Type">Type</a><span class="delimiter">)</span>: <a href="../Types.scala.html#407270" title="UnCurry.this.global.Type">Type</a> =
    <span title="UnCurry.this.global.Type" class="keyword">if</span> <span class="delimiter">(</span><a href="#442017" title="UnCurry.this.global.Symbol">sym</a>.<a href="../../api/Symbols.scala.html#402394" title="=&gt; Boolean">isType</a><span class="delimiter">)</span> <a href="../Types.scala.html#441770" title="(tp: UnCurry.this.global.Type)UnCurry.this.global.Type">uncurryType</a><span class="delimiter">(</span><a href="#442018" title="UnCurry.this.global.Type">tp</a><span class="delimiter">)</span> <span class="keyword">else</span> <a href="../Types.scala.html#441770" title="(tp: UnCurry.this.global.Type)UnCurry.this.global.Type">uncurry</a><span class="delimiter">(</span><a href="#442018" title="UnCurry.this.global.Type">tp</a><span class="delimiter">)</span>
<span class="delimiter">}</span>
        </pre>
    </body>
</html>