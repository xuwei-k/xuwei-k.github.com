<?xml version="1.0" encoding="utf-8"?>
      <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <meta http-equiv="Expires" content="0" />
        <title>scala/reflect/reify/package.scala</title>
        <script type="text/javascript" src="../../../jquery-all.js"></script>
        <script type="text/javascript" src="../../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../../style.css" title="Style"></link>
    </head>
    <body>
        <pre>
<span class="keyword">package</span> scala.reflect

<span class="keyword">import</span> scala.<a href="../../language.scala.html#1423" title="language.type">language</a>.implicitConversions
<span class="keyword">import</span> scala.reflect.macros.<span class="delimiter">{</span>Context, ReificationException, UnexpectedReificationException<span class="delimiter">}</span>
<span class="keyword">import</span> scala.tools.nsc.Global

<span class="keyword">package</span> <span class="keyword">object</span> <a title="scala.reflect.reify.package.type" id="23750">reify</a> <a href="#23751" title="scala.reflect.reify.package.type" class="delimiter">{</a>
  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(global1: scala.tools.nsc.Global)(typer: global1.analyzer.Typer, universe: global1.Tree, mirror: global1.Tree, reifee: Any, concrete: Boolean)scala.reflect.reify.Reifier{val global: global1.type}" id="55646">mkReifier</a><span class="delimiter">(</span><a title="scala.tools.nsc.Global" id="552685">global1</a>: <a href="../../tools/nsc/Global.scala.html#27346" title="scala.tools.nsc.Global">Global</a><span class="delimiter">)</span><span class="delimiter">(</span><a title="global1.analyzer.Typer" id="551836">typer</a>: global1.analyzer.<a href="../../tools/nsc/typechecker/Typers.scala.html#538117" title="global1.analyzer.Typer">Typer</a>, <a title="global1.Tree" id="551837">universe</a>: global1.<a href="../internal/Trees.scala.html#407938" title="global1.Tree">Tree</a>, <a title="global1.Tree" id="551838">mirror</a>: global1.<a href="../internal/Trees.scala.html#407938" title="global1.Tree">Tree</a>, <a title="Any" id="551839">reifee</a>: <span title="Any">Any</span>, <a title="Boolean" id="551843">concrete</a>: <a href="../../Boolean.scala.html#1425" title="Boolean">Boolean</a> = <span title="Boolean(false)" class="keyword">false</span><span class="delimiter">)</span>: <a href="#551841" title="package extends scala.reflect.reify.Reifier">Reifier</a> <span class="delimiter">{</span> <span class="keyword">val</span> global: global1.<span class="keyword">type</span> <span class="delimiter">}</span> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="typer.type" id="551847">typer1</a>: typer.<span class="keyword">type</span> = <a href="#551836" title="global1.analyzer.Typer">typer</a>
    <span class="keyword">val</span> <a title="universe.type" id="551848">universe1</a>: universe.<span class="keyword">type</span> = <a href="#551837" title="global1.Tree">universe</a>
    <span class="keyword">val</span> <a title="mirror.type" id="551849">mirror1</a>: mirror.<span class="keyword">type</span> = <a href="#551838" title="global1.Tree">mirror</a>
    <span class="keyword">val</span> <a title="Any" id="551850">reifee1</a> = <a href="#551839" title="Any">reifee</a>
    <span class="keyword">val</span> <a title="Boolean" id="551851">concrete1</a> = <a href="#551843" title="Boolean">concrete</a>

    <a href="#551852" title="scala.reflect.reify.Reifier{}" class="keyword">new</a> <a title="anonymous class $anon extends scala.reflect.reify.Reifier" id="551852" class="delimiter">{</a>
      <span class="keyword">val</span> <a title="global1.type" id="551886">global</a>: global1.<span class="keyword">type</span> = <a href="#552685" title="scala.tools.nsc.Global">global1</a>
      <span class="keyword">val</span> <a title="typer.type" id="551887">typer</a> = <a href="#551847" title="typer.type">typer1</a>
      <span class="keyword">val</span> <a title="universe.type" id="551888">universe</a> = <a href="#551848" title="universe.type">universe1</a>
      <span class="keyword">val</span> <a title="mirror.type" id="551889">mirror</a> = <a href="#551849" title="mirror.type">mirror1</a>
      <span class="keyword">val</span> <a title="Any" id="551890">reifee</a> = <a href="#551850" title="Any">reifee1</a>
      <span class="keyword">val</span> <a title="Boolean" id="551891">concrete</a> = <a href="#551851" title="Boolean">concrete1</a>
    <span class="delimiter">}</span> <span class="keyword">with</span> <a href="Reifier.scala.html#23686" title="scala.reflect.reify.Reifier">Reifier</a>
  <span class="delimiter">}</span>

  <span class="keyword">private</span><span class="delimiter">[</span>reify<span class="delimiter">]</span> <span class="keyword">def</span> <a title="(global: scala.tools.nsc.Global)(universe: global.Tree, typer0: global.analyzer.Typer)global.Tree" id="55647">mkDefaultMirrorRef</a><span class="delimiter">(</span><a title="scala.tools.nsc.Global" id="547287">global</a>: <a href="../../tools/nsc/Global.scala.html#27346" title="scala.tools.nsc.Global">Global</a><span class="delimiter">)</span><span class="delimiter">(</span><a title="global.Tree" id="547288">universe</a>: global.<a href="../internal/Trees.scala.html#407938" title="global.Tree">Tree</a>, <a title="global.analyzer.Typer" id="547289">typer0</a>: global.analyzer.<a href="../../tools/nsc/typechecker/Typers.scala.html#538117" title="global.analyzer.Typer">Typer</a><span class="delimiter">)</span>: global.<a href="../internal/Trees.scala.html#407938" title="global.Tree">Tree</a> = <span class="delimiter">{</span>
    <span class="keyword">import</span> <a href="#547287" title="scala.tools.nsc.Global">global</a>._
    <span class="keyword">import</span> <a href="../internal/Definitions.scala.html#407777" title="global.definitions.type">definitions</a>._
    <span class="keyword">val</span> <a title="global.Tree" id="551900">enclosingErasure</a> = <span class="delimiter">{</span>
      <span class="keyword">val</span> <a title="global.Tree" id="551902">rClassTree</a> = <a href="#55651" title="(global: scala.tools.nsc.Global)(typer0: global.analyzer.Typer)global.Tree">reifyEnclosingRuntimeClass</a><span class="delimiter">(</span><a href="#547287" title="scala.tools.nsc.Global">global</a><span class="delimiter">)</span><span class="delimiter">(</span><a href="#547289" title="global.analyzer.Typer">typer0</a><span class="delimiter">)</span>
      // HACK around SI-6259
      // If we're in the constructor of an object or others don't have easy access to `this`, we have no good way to grab
      // the class of that object.  Instead, we construct an anonymous class and grab his class file, assuming
      // this is enough to get the correct class loadeer for the class we *want* a mirror for, the object itself.
      <a href="#551902" title="global.Tree">rClassTree</a> <a href="../internal/Trees.scala.html#408537" title="(alt: =&gt; global.Tree)global.Tree">orElse</a> <a href="../internal/Trees.scala.html#413581" title="(fun: global.Tree, args: List[global.Tree])global.Apply">Apply</a><span class="delimiter">(</span><a href="../internal/Trees.scala.html#418089" title="(qualifier: global.Tree, name: global.Name)global.Select">Select</a><span class="delimiter">(</span><a href="../../tools/nsc/Global.scala.html#537462" title="global.treeBuilder.type">treeBuilder</a>.<a href="../../tools/nsc/ast/parser/TreeBuilder.scala.html#551978" title="(stats: List[global.treeBuilder.global.Tree])global.treeBuilder.global.Tree">makeAnonymousNew</a><span class="delimiter">(</span><a href="../../collection/immutable/List.scala.html#11188" title="scala.collection.immutable.Nil.type">Nil</a><span class="delimiter">)</span>, <a href="../internal/StdNames.scala.html#407878" title="=&gt; global.SymbolNames">sn</a>.<a href="../internal/StdNames.scala.html#420848" title="=&gt; global.TermName">GetClass</a><span class="delimiter">)</span>, <a href="../../collection/immutable/List.scala.html#11188" title="scala.collection.immutable.Nil.type">Nil</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>
    // JavaUniverse is defined in scala-reflect.jar, so we must be very careful in case someone reifies stuff having only scala-library.jar on the classpath
    <span class="keyword">val</span> <a title="Boolean" id="551901">isJavaUniverse</a> = <a href="../internal/Definitions.scala.html#408932" title="=&gt; global.Symbol">JavaUniverseClass</a> <span title="(x$1: AnyRef)Boolean">!=</span> <a href="../internal/Symbols.scala.html#407184" title="=&gt; global.NoSymbol">NoSymbol</a> <a href="../../Boolean.scala.html#57826" title="(x: Boolean)Boolean">&amp;&amp;</a> <a href="#547288" title="global.Tree">universe</a>.<a href="../internal/Trees.scala.html#408573" title="=&gt; global.Type">tpe</a> <a href="../internal/Types.scala.html#408481" title="(that: global.Type)Boolean">&lt;:&lt;</a> <a href="../internal/Definitions.scala.html#408932" title="=&gt; global.Symbol">JavaUniverseClass</a>.<a href="../internal/Symbols.scala.html#411071" title="=&gt; global.Type">toTypeConstructor</a>
    <span title="global.Tree" class="keyword">if</span> <span class="delimiter">(</span><a href="#551901" title="Boolean">isJavaUniverse</a> <a href="../../Boolean.scala.html#57826" title="(x: Boolean)Boolean">&amp;&amp;</a> <a href="../../Boolean.scala.html#57822" title="=&gt; Boolean">!</a><a href="#551900" title="global.Tree">enclosingErasure</a>.<a href="../internal/Trees.scala.html#408582" title="=&gt; Boolean">isEmpty</a><span class="delimiter">)</span> <a href="../internal/Trees.scala.html#413581" title="(fun: global.Tree, args: List[global.Tree])global.Apply">Apply</a><span class="delimiter">(</span><a href="../internal/Trees.scala.html#418089" title="(qualifier: global.Tree, name: global.Name)global.Select">Select</a><span class="delimiter">(</span><a href="#547288" title="global.Tree">universe</a>, <a href="../internal/StdNames.scala.html#407871" title="global.nme.type">nme</a>.<a href="../internal/StdNames.scala.html#414507" title="=&gt; global.nme.NameType">runtimeMirror</a><span class="delimiter">)</span>, <a href="../../collection/immutable/List.scala.html#62451" title="(xs: global.Select*)List[global.Select]">List</a><span class="delimiter">(</span><a href="../internal/Trees.scala.html#418089" title="(qualifier: global.Tree, name: global.Name)global.Select">Select</a><span class="delimiter">(</span><a href="#551900" title="global.Tree">enclosingErasure</a>, <a href="../internal/StdNames.scala.html#407878" title="=&gt; global.SymbolNames">sn</a>.<a href="../internal/StdNames.scala.html#420849" title="=&gt; global.TermName">GetClassLoader</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
    <span class="keyword">else</span> <a href="../internal/Trees.scala.html#418089" title="(qualifier: global.Tree, name: global.Name)global.Select">Select</a><span class="delimiter">(</span><a href="#547288" title="global.Tree">universe</a>, <a href="../internal/StdNames.scala.html#407871" title="global.nme.type">nme</a>.<a href="../internal/StdNames.scala.html#414499" title="=&gt; global.nme.NameType">rootMirror</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="(global: scala.tools.nsc.Global)(typer: global.analyzer.Typer, universe: global.Tree, mirror: global.Tree, tree: global.Tree)global.Tree" id="55648">reifyTree</a><span class="delimiter">(</span><a title="scala.tools.nsc.Global" id="540700">global</a>: <a href="../../tools/nsc/Global.scala.html#27346" title="scala.tools.nsc.Global">Global</a><span class="delimiter">)</span><span class="delimiter">(</span><a title="global.analyzer.Typer" id="540701">typer</a>: global.analyzer.<a href="../../tools/nsc/typechecker/Typers.scala.html#538117" title="global.analyzer.Typer">Typer</a>, <a title="global.Tree" id="540702">universe</a>: global.<a href="../internal/Trees.scala.html#407938" title="global.Tree">Tree</a>, <a title="global.Tree" id="540703">mirror</a>: global.<a href="../internal/Trees.scala.html#407938" title="global.Tree">Tree</a>, <a title="global.Tree" id="540704">tree</a>: global.<a href="../internal/Trees.scala.html#407938" title="global.Tree">Tree</a><span class="delimiter">)</span>: global.<a href="../internal/Trees.scala.html#407938" title="global.Tree">Tree</a> =
    <a href="#55646" title="(global1: scala.tools.nsc.Global)(typer: global1.analyzer.Typer, universe: global1.Tree, mirror: global1.Tree, reifee: Any, concrete: Boolean)scala.reflect.reify.Reifier{val global: global1.type}">mkReifier</a><span class="delimiter">(</span><a href="#540700" title="scala.tools.nsc.Global">global</a><span class="delimiter">)</span><span class="delimiter">(</span><a href="#540701" title="global.analyzer.Typer">typer</a>, <a href="#540702" title="global.Tree">universe</a>, <a href="#540703" title="global.Tree">mirror</a>, <a href="#540704" title="global.Tree">tree</a>, concrete = <span title="Boolean(false)" class="keyword">false</span><span class="delimiter">)</span>.<a href="Reifier.scala.html#541951" title="(=&gt; _2635.global.Tree) forSome { val _2635: scala.reflect.reify.Reifier{val global: global.type} }">reification</a>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="global.Tree" class="delimiter">[</span>global.<a href="../internal/Trees.scala.html#407938" title="global.Tree">Tree</a><span class="delimiter">]</span>

  <span class="keyword">def</span> <a title="(global: scala.tools.nsc.Global)(typer: global.analyzer.Typer, universe: global.Tree, mirror: global.Tree, tpe: global.Type, concrete: Boolean)global.Tree" id="55649">reifyType</a><span class="delimiter">(</span><a title="scala.tools.nsc.Global" id="552683">global</a>: <a href="../../tools/nsc/Global.scala.html#27346" title="scala.tools.nsc.Global">Global</a><span class="delimiter">)</span><span class="delimiter">(</span><a title="global.analyzer.Typer" id="540731">typer</a>: global.analyzer.<a href="../../tools/nsc/typechecker/Typers.scala.html#538117" title="global.analyzer.Typer">Typer</a>,<a title="global.Tree" id="540732">universe</a>: global.<a href="../internal/Trees.scala.html#407938" title="global.Tree">Tree</a>, <a title="global.Tree" id="540733">mirror</a>: global.<a href="../internal/Trees.scala.html#407938" title="global.Tree">Tree</a>, <a title="global.Type" id="540734">tpe</a>: global.<a href="../internal/Types.scala.html#407270" title="global.Type">Type</a>, <a title="Boolean" id="540736">concrete</a>: <a href="../../Boolean.scala.html#1425" title="Boolean">Boolean</a> = <span title="Boolean(false)" class="keyword">false</span><span class="delimiter">)</span>: global.<a href="../internal/Trees.scala.html#407938" title="global.Tree">Tree</a> =
    <a href="#55646" title="(global1: scala.tools.nsc.Global)(typer: global1.analyzer.Typer, universe: global1.Tree, mirror: global1.Tree, reifee: Any, concrete: Boolean)scala.reflect.reify.Reifier{val global: global1.type}">mkReifier</a><span class="delimiter">(</span><a href="#552683" title="scala.tools.nsc.Global">global</a><span class="delimiter">)</span><span class="delimiter">(</span><a href="#540731" title="global.analyzer.Typer">typer</a>, <a href="#540732" title="global.Tree">universe</a>, <a href="#540733" title="global.Tree">mirror</a>, <a href="#540734" title="global.Type">tpe</a>, concrete = <a href="#540736" title="Boolean">concrete</a><span class="delimiter">)</span>.<a href="Reifier.scala.html#541951" title="(=&gt; _2636.global.Tree) forSome { val _2636: scala.reflect.reify.Reifier{val global: global.type} }">reification</a>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="global.Tree" class="delimiter">[</span>global.<a href="../internal/Trees.scala.html#407938" title="global.Tree">Tree</a><span class="delimiter">]</span>

  <span class="keyword">def</span> <a title="(global: scala.tools.nsc.Global)(typer0: global.analyzer.Typer, tpe: global.Type, concrete: Boolean)global.Tree" id="55650">reifyRuntimeClass</a><span class="delimiter">(</span><a title="scala.tools.nsc.Global" id="552684">global</a>: <a href="../../tools/nsc/Global.scala.html#27346" title="scala.tools.nsc.Global">Global</a><span class="delimiter">)</span><span class="delimiter">(</span><a title="global.analyzer.Typer" id="540749">typer0</a>: global.analyzer.<a href="../../tools/nsc/typechecker/Typers.scala.html#538117" title="global.analyzer.Typer">Typer</a>, <a title="global.Type" id="540750">tpe</a>: global.<a href="../internal/Types.scala.html#407270" title="global.Type">Type</a>, <a title="Boolean" id="540752">concrete</a>: <a href="../../Boolean.scala.html#1425" title="Boolean">Boolean</a> = <span title="Boolean(true)" class="keyword">true</span><span class="delimiter">)</span>: global.<a href="../internal/Trees.scala.html#407938" title="global.Tree">Tree</a> = <span class="delimiter">{</span>
    <span class="keyword">import</span> <a href="#552684" title="scala.tools.nsc.Global">global</a>._
    <span class="keyword">import</span> <a href="../internal/Definitions.scala.html#407777" title="global.definitions.type">definitions</a>._
    <span class="keyword">import</span> <a href="../../tools/nsc/Global.scala.html#537550" title="=&gt; scala.tools.nsc.typechecker.Analyzer{val global: global.type}">analyzer</a>.enclosingMacroPosition

    <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#540750" title="global.Type">tpe</a>.<a href="../internal/Types.scala.html#408389" title="=&gt; Boolean">isSpliceable</a><span class="delimiter">)</span> <span class="delimiter">{</span>
      <span class="keyword">val</span> <a title="global.analyzer.global.Tree" id="552152">classTagInScope</a> = <a href="#540749" title="global.analyzer.Typer">typer0</a>.<a href="../../tools/nsc/typechecker/Tags.scala.html#538731" title="(pos: global.analyzer.global.Position, tp: global.analyzer.global.Type, allowMaterialization: Boolean)global.analyzer.global.Tree">resolveClassTag</a><span class="delimiter">(</span><a href="../../tools/nsc/typechecker/Macros.scala.html#538356" title="=&gt; scala.reflect.internal.util.Position">enclosingMacroPosition</a>, <a href="#540750" title="global.Type">tpe</a>, allowMaterialization = <span title="Boolean(false)" class="keyword">false</span><span class="delimiter">)</span>
      <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="../../Boolean.scala.html#57822" title="=&gt; Boolean">!</a><a href="#552152" title="global.analyzer.global.Tree">classTagInScope</a>.<a href="../internal/Trees.scala.html#408582" title="=&gt; Boolean">isEmpty</a><span class="delimiter">)</span> <span title="Nothing" class="keyword">return</span> <a href="../internal/Trees.scala.html#418089" title="(qualifier: global.Tree, name: global.Name)global.Select">Select</a><span class="delimiter">(</span><a href="#552152" title="global.analyzer.global.Tree">classTagInScope</a>, <a href="../internal/StdNames.scala.html#407871" title="global.nme.type">nme</a>.<a href="../internal/StdNames.scala.html#414505" title="=&gt; global.nme.NameType">runtimeClass</a><span class="delimiter">)</span>
      <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#540752" title="Boolean">concrete</a><span class="delimiter">)</span> <span title="Nothing" class="keyword">throw</span> <span title="scala.reflect.macros.ReificationException" class="keyword">new</span> <a href="../macros/Reifiers.scala.html#23416" title="scala.reflect.macros.ReificationException">ReificationException</a><span class="delimiter">(</span><a href="../../tools/nsc/typechecker/Macros.scala.html#538356" title="=&gt; scala.reflect.internal.util.Position">enclosingMacroPosition</a>, <a href="../../Predef.scala.html#7604" title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps" class="string">&quot;tpe %s is an unresolved spliceable type&quot;</a>.<a href="../../collection/immutable/StringLike.scala.html#59882" title="(args: Any*)String">format</a><span class="delimiter">(</span><a href="#540750" title="global.Type">tpe</a><span class="delimiter">)</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>

    <a href="#540750" title="global.Type">tpe</a>.<a href="../internal/Types.scala.html#408438" title="=&gt; global.Type">normalize</a> <span class="keyword">match</span> <span class="delimiter">{</span>
      <span class="keyword">case</span> TypeRef<a href="#3294150" title="global.Tree" id="3294155" class="delimiter">(</a><a href="../internal/Types.scala.html#410887" title="global.Type" id="3294151">_</a>, <a href="../internal/Types.scala.html#410889" title="global.Symbol" id="3294161">ArrayClass</a>, <a href="../../collection/immutable/List.scala.html#206583" title="global.Type" id="552205">componentTpe</a> <a href="../internal/Types.scala.html#410891" title="List[global.Type]" id="3294159">::</a> <a href="../../collection/immutable/List.scala.html#206584" title="List[global.Type]" id="3294162">Nil</a><span class="delimiter">)</span> =&gt;
        <span class="keyword">val</span> <a title="global.Tree" id="552206">componentErasure</a> = <a href="#55650" title="(global: scala.tools.nsc.Global)(typer0: global.analyzer.Typer, tpe: global.Type, concrete: Boolean)global.Tree">reifyRuntimeClass</a><span class="delimiter">(</span><a href="#552684" title="scala.tools.nsc.Global">global</a><span class="delimiter">)</span><span class="delimiter">(</span><a href="#540749" title="global.analyzer.Typer">typer0</a>, <a href="#552205" title="global.Type">componentTpe</a>, <a href="#540752" title="Boolean">concrete</a><span class="delimiter">)</span>
        <a href="../../tools/nsc/Global.scala.html#537460" title="global.gen.type">gen</a>.<a href="../internal/TreeGen.scala.html#470979" title="(method: global.gen.global.Symbol, args: List[global.gen.global.Tree])global.gen.global.Tree">mkMethodCall</a><span class="delimiter">(</span><a href="../internal/Definitions.scala.html#408767" title="=&gt; global.TermSymbol">arrayClassMethod</a>, <a href="../../collection/immutable/List.scala.html#62451" title="(xs: global.Tree*)List[global.Tree]">List</a><span class="delimiter">(</span><a href="#552206" title="global.Tree">componentErasure</a><span class="delimiter">)</span><span class="delimiter">)</span>
      <span class="keyword">case</span> _ =&gt;
        <span class="keyword">var</span> <a title="global.Type" id="552263">erasure</a> = <a href="#540750" title="global.Type">tpe</a>.<a href="../internal/Types.scala.html#408386" title="=&gt; global.Type">erasure</a>
        <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#540750" title="global.Type">tpe</a>.<a href="../internal/Types.scala.html#408407" title="=&gt; global.Symbol">typeSymbol</a>.<a href="../internal/Symbols.scala.html#411252" title="=&gt; Boolean">isDerivedValueClass</a> <a href="../../Boolean.scala.html#57826" title="(x: Boolean)Boolean">&amp;&amp;</a> <a href="#552684" title="scala.tools.nsc.Global">global</a>.<a href="../internal/SymbolTable.scala.html#406659" title="=&gt; scala.reflect.internal.Phase">phase</a>.<a href="../internal/Phase.scala.html#419695" title="=&gt; Int">id</a> <a href="../../Int.scala.html#57111" title="(x: Int)Boolean">&lt;</a> <a href="#552684" title="scala.tools.nsc.Global">global</a>.<a href="../../tools/nsc/Global.scala.html#537672" title="=&gt; global.Run">currentRun</a>.<a href="../../tools/nsc/Global.scala.html#539392" title="=&gt; scala.tools.nsc.Phase">erasurePhase</a>.<a href="../internal/Phase.scala.html#419695" title="=&gt; Int">id</a><span class="delimiter">)</span> <a href="#552263" title="global.Type">erasure</a> = <a href="#540750" title="global.Type">tpe</a>
        <a href="../../tools/nsc/Global.scala.html#537460" title="global.gen.type">gen</a>.<a href="../internal/TreeGen.scala.html#470984" title="(method: global.gen.global.Symbol, targs: List[global.gen.global.Type])global.gen.global.Tree">mkNullaryCall</a><span class="delimiter">(</span><a href="../internal/Definitions.scala.html#408742" title="=&gt; global.TermSymbol">Predef_classOf</a>, <a href="../../collection/immutable/List.scala.html#62451" title="(xs: global.Type*)List[global.Type]">List</a><span class="delimiter">(</span><a href="#552263" title="global.Type">erasure</a><span class="delimiter">)</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  // Note: If  current context is inside the constructor of an object or otherwise not inside
  // a class/object body, this will return an EmptyTree.
  <span class="keyword">def</span> <a title="(global: scala.tools.nsc.Global)(typer0: global.analyzer.Typer)global.Tree" id="55651">reifyEnclosingRuntimeClass</a><span class="delimiter">(</span><a title="scala.tools.nsc.Global" id="540759">global</a>: <a href="../../tools/nsc/Global.scala.html#27346" title="scala.tools.nsc.Global">Global</a><span class="delimiter">)</span><span class="delimiter">(</span><a title="global.analyzer.Typer" id="540760">typer0</a>: global.analyzer.<a href="../../tools/nsc/typechecker/Typers.scala.html#538117" title="global.analyzer.Typer">Typer</a><span class="delimiter">)</span>: global.<a href="../internal/Trees.scala.html#407938" title="global.Tree">Tree</a> = <span class="delimiter">{</span>
    <span class="keyword">import</span> <a href="#540759" title="scala.tools.nsc.Global">global</a>._
    <span class="keyword">import</span> <a href="../internal/Definitions.scala.html#407777" title="global.definitions.type">definitions</a>._
    <span class="keyword">def</span> <a title="=&gt; Boolean" id="552287">isThisInScope</a> = <a href="#540760" title="global.analyzer.Typer">typer0</a>.<a href="../../tools/nsc/typechecker/Typers.scala.html#538560" title="=&gt; global.analyzer.Context">context</a>.<a href="../../tools/nsc/typechecker/Contexts.scala.html#538889" title="=&gt; List[global.analyzer.Context]">enclosingContextChain</a> <a href="../../collection/LinearSeqOptimized.scala.html#86379" title="(p: global.analyzer.Context =&gt; Boolean)Boolean">exists</a> <span class="delimiter">(</span><a href="#552300" title="global.analyzer.Context">_</a>.<a href="../../tools/nsc/typechecker/Contexts.scala.html#538746" title="=&gt; global.analyzer.global.Tree">tree</a>.<span title="[T0]=&gt; Boolean">isInstanceOf</span><span title="Boolean" class="delimiter">[</span><a href="../internal/Trees.scala.html#407952" title="global.ImplDef">ImplDef</a><span class="delimiter">]</span><span class="delimiter">)</span>
    <span title="global.Tree" class="keyword">if</span> <span class="delimiter">(</span><a href="#552287" title="=&gt; Boolean">isThisInScope</a><span class="delimiter">)</span> <span class="delimiter">{</span>
      <span class="keyword">val</span> <a title="List[global.ClassDef]" id="552301">enclosingClasses</a> = <a href="#540760" title="global.analyzer.Typer">typer0</a>.<a href="../../tools/nsc/typechecker/Typers.scala.html#538560" title="=&gt; global.analyzer.Context">context</a>.<a href="../../tools/nsc/typechecker/Contexts.scala.html#538889" title="=&gt; List[global.analyzer.Context]">enclosingContextChain</a> <a href="../../collection/TraversableLike.scala.html#58063" title="(f: global.analyzer.Context =&gt; global.analyzer.global.Tree)(implicit bf: scala.collection.generic.CanBuildFrom[List[global.analyzer.Context],global.analyzer.global.Tree,List[global.analyzer.global.Tree]])List[global.analyzer.global.Tree]">map</a> <span class="delimiter">(</span><a href="#552324" title="global.analyzer.Context">_</a>.<a href="../../tools/nsc/typechecker/Contexts.scala.html#538746" title="=&gt; global.analyzer.global.Tree">tree</a><span class="delimiter">)</span> <a href="../../collection/TraversableLike.scala.html#58075" title="(pf: PartialFunction[global.analyzer.global.Tree,global.ClassDef])(implicit bf: scala.collection.generic.CanBuildFrom[List[global.analyzer.global.Tree],global.ClassDef,List[global.ClassDef]])List[global.ClassDef]">collect</a> <a title="anonymous class $anonfun extends scala.runtime.AbstractPartialFunction[global.analyzer.global.Tree,global.ClassDef] with Serializable" id="552387" class="delimiter">{</a> <span class="keyword">case</span> <a href="#3294176" title="B1" id="3294248">classDef</a>: ClassDef =&gt; <a href="#3294182" title="(x: B1)B1">classDef</a> <span class="delimiter">}</span>
      <span class="keyword">val</span> <a title="reifyEnclosingRuntimeClass extends global.Tree with Serializable" id="552302">classInScope</a> = <a href="#552301" title="List[global.ClassDef]">enclosingClasses</a>.<a href="../../collection/TraversableLike.scala.html#58103" title="=&gt; Option[global.ClassDef]">headOption</a> <a href="../../Option.scala.html#62859" title="(default: =&gt; global.Tree with Serializable)global.Tree with Serializable">getOrElse</a> <a href="../internal/Trees.scala.html#407946" title="global.EmptyTree.type">EmptyTree</a>
      <span class="keyword">def</span> <a title="=&gt; Boolean" id="552303">isUnsafeToUseThis</a> = <span class="delimiter">{</span>
        <span class="keyword">val</span> <a title="Boolean" id="552569">isInsideConstructorSuper</a> = <a href="#540760" title="global.analyzer.Typer">typer0</a>.<a href="../../tools/nsc/typechecker/Typers.scala.html#538560" title="=&gt; global.analyzer.Context">context</a>.<a href="../../tools/nsc/typechecker/Contexts.scala.html#538889" title="=&gt; List[global.analyzer.Context]">enclosingContextChain</a> <a href="../../collection/LinearSeqOptimized.scala.html#86379" title="(p: global.analyzer.Context =&gt; Boolean)Boolean">exists</a> <span class="delimiter">(</span><a href="#552579" title="global.analyzer.Context">_</a>.<a href="../../tools/nsc/typechecker/Contexts.scala.html#538794" title="=&gt; Boolean">inSelfSuperCall</a><span class="delimiter">)</span>
        // Note: It's ok to check for any object here, because if we were in an enclosing class, we'd already have returned its classOf
        <span class="keyword">val</span> <a title="Boolean" id="552570">isInsideObject</a> = <a href="#540760" title="global.analyzer.Typer">typer0</a>.<a href="../../tools/nsc/typechecker/Typers.scala.html#538560" title="=&gt; global.analyzer.Context">context</a>.<a href="../../tools/nsc/typechecker/Contexts.scala.html#538889" title="=&gt; List[global.analyzer.Context]">enclosingContextChain</a> <a href="../../collection/TraversableLike.scala.html#58063" title="(f: global.analyzer.Context =&gt; global.analyzer.global.Tree)(implicit bf: scala.collection.generic.CanBuildFrom[List[global.analyzer.Context],global.analyzer.global.Tree,List[global.analyzer.global.Tree]])List[global.analyzer.global.Tree]">map</a> <span class="delimiter">(</span><a href="#552600" title="global.analyzer.Context">_</a>.<a href="../../tools/nsc/typechecker/Contexts.scala.html#538746" title="=&gt; global.analyzer.global.Tree">tree</a><span class="delimiter">)</span> <a href="../../collection/LinearSeqOptimized.scala.html#86379" title="(p: global.analyzer.global.Tree =&gt; Boolean)Boolean">exists</a> <a href="#552637" title="global.analyzer.global.Tree" class="delimiter">{</a>	<span class="keyword">case</span> _: ModuleDef =&gt; <a href="#3294258" title="(x: Boolean)Boolean" class="keyword">true</a>; <span class="keyword">case</span> _ =&gt; <a href="#3294258" title="(x: Boolean)Boolean" class="keyword">false</a> <span class="delimiter">}</span>
        <a href="#552569" title="Boolean">isInsideConstructorSuper</a> <a href="../../Boolean.scala.html#57826" title="(x: Boolean)Boolean">&amp;&amp;</a> <a href="#552570" title="Boolean">isInsideObject</a>
      <span class="delimiter">}</span>
      <span title="global.Tree" class="keyword">if</span> <span class="delimiter">(</span><a href="../../Boolean.scala.html#57822" title="=&gt; Boolean">!</a><a href="#552302" title="reifyEnclosingRuntimeClass extends global.Tree with Serializable">classInScope</a>.<a href="../internal/Trees.scala.html#408582" title="=&gt; Boolean">isEmpty</a><span class="delimiter">)</span> <a href="#55650" title="(global: scala.tools.nsc.Global)(typer0: global.analyzer.Typer, tpe: global.Type, concrete: Boolean)global.Tree">reifyRuntimeClass</a><span class="delimiter">(</span><a href="#540759" title="scala.tools.nsc.Global">global</a><span class="delimiter">)</span><span class="delimiter">(</span><a href="#540760" title="global.analyzer.Typer">typer0</a>, <a href="#552302" title="reifyEnclosingRuntimeClass extends global.Tree with Serializable">classInScope</a>.<a href="../internal/Trees.scala.html#408577" title="=&gt; global.Symbol">symbol</a>.<a href="../internal/Symbols.scala.html#411071" title="=&gt; global.Type">toTypeConstructor</a>, concrete = <span title="Boolean(true)" class="keyword">true</span><span class="delimiter">)</span>
      <span class="keyword">else</span> <span title="global.Tree" class="keyword">if</span><span class="delimiter">(</span><a href="../../Boolean.scala.html#57822" title="=&gt; Boolean">!</a><a href="#552303" title="=&gt; Boolean">isUnsafeToUseThis</a><span class="delimiter">)</span> <a href="../internal/Trees.scala.html#418089" title="(qualifier: global.Tree, name: global.Name)global.Select">Select</a><span class="delimiter">(</span><a href="../internal/Trees.scala.html#418047" title="(qual: global.TypeName)global.This">This</a><span class="delimiter">(</span><a href="../internal/StdNames.scala.html#407863" title="global.tpnme.type">tpnme</a>.<a href="../internal/StdNames.scala.html#413650" title="=&gt; global.tpnme.NameType">EMPTY</a><span class="delimiter">)</span>, <a href="../internal/StdNames.scala.html#407878" title="=&gt; global.SymbolNames">sn</a>.<a href="../internal/StdNames.scala.html#420848" title="=&gt; global.TermName">GetClass</a><span class="delimiter">)</span>
      <span class="keyword">else</span> <a href="../internal/Trees.scala.html#407946" title="global.EmptyTree.type">EmptyTree</a>
    <span class="delimiter">}</span> <span class="keyword">else</span> <a href="../internal/Trees.scala.html#407946" title="global.EmptyTree.type">EmptyTree</a>
  <span class="delimiter">}</span>
<span class="delimiter">}</span>

        </pre>
    </body>
</html>