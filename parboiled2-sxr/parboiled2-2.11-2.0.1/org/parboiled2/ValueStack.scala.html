<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <title>org/parboiled2/ValueStack.scala</title>
        <script type="text/javascript" src="../../jquery-all.js"></script>
        <script type="text/javascript" src="../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../style.css" title="Style"></link>
    </head>
    <body>
        <pre>
<span class="comment">/*
 * Copyright (C) 2009-2013 Mathias Doenitz, Alexander Myltsev
 *
 * Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */</span>

package org.parboiled2

import scala.annotation.tailrec
import shapeless._

<span class="comment">/**
 * A mutable untyped stack of values.
 * In most cases you won't have to access its API directly since parboiled2's DSL
 * should allow you a safer and easier way to interact with the stack.
 * However, in some cases, when you know what you are doing, direct access can be helpful.
 */</span>
class <a title="class ValueStack extends AnyRef with Iterable[Any]" id="org.parboiled2;ValueStack">ValueStack</a> private<span class="delimiter">[</span>parboiled2<span class="delimiter">]</span> <span class="delimiter">(</span><a title="Int" id="org.parboiled2;ValueStack.initialSize">initialSize</a>: <span title="Int">Int</span>, <a title="Int" id="org.parboiled2;ValueStack.maxSize">maxSize</a>: <span title="Int">Int</span><span class="delimiter">)</span> extends <a href="#org.parboiled2;ValueStack" title="Iterable[Any]">Iterable</a><span class="delimiter">[</span>Any<span class="delimiter">]</span> <span class="delimiter">{</span>

  private<span class="delimiter">[</span>this<span class="delimiter">]</span> var <a title="Array[Any]" id="org.parboiled2;ValueStack.buffer">buffer</a> = new <span title="Array[Any]">Array</span><span class="delimiter">[</span>Any<span class="delimiter">]</span><span class="delimiter">(</span><a href="#org.parboiled2;ValueStack.initialSize" title="Int">initialSize</a><span class="delimiter">)</span>
  private<span class="delimiter">[</span>this<span class="delimiter">]</span> var <a title="Int" id="org.parboiled2;ValueStack._size">_size</a> = <span title="Int(0)" class="int">0</span>

  private<span class="delimiter">[</span>parboiled2<span class="delimiter">]</span> def <a title="(newSize: Int)Unit" id="org.parboiled2;ValueStack.size_=">size_=</a><span class="delimiter">(</span><a title="Int" id="org.parboiled2;ValueStack.size_=.newSize">newSize</a>: <span title="Int">Int</span><span class="delimiter">)</span>: <span title="Unit">Unit</span> = <a href="#org.parboiled2;ValueStack._size" title="Int">_size</a> = <a href="#org.parboiled2;ValueStack.size_=.newSize" title="Int">newSize</a>

  <span class="comment">/**
   * The number of elements currently on the stack.
   */</span>
  override def <a title="=&gt; Int" id="org.parboiled2;ValueStack.size">size</a>: <span title="Int">Int</span> = <a href="#org.parboiled2;ValueStack._size" title="Int">_size</a>

  <span class="comment">/**
   * True if no elements are currently on the stack.
   */</span>
  override def <a title="=&gt; Boolean" id="org.parboiled2;ValueStack.isEmpty">isEmpty</a>: <span title="Boolean">Boolean</span> = <a href="#org.parboiled2;ValueStack._size" title="Int">_size</a> <span title="(x: Int)Boolean">==</span> <span title="Int(0)" class="int">0</span>

  <span class="comment">/**
   * Removes all elements from the stack.
   */</span>
  def <a title="()Unit" id="org.parboiled2;ValueStack.clear">clear</a><span class="delimiter">(</span><span class="delimiter">)</span>: <span title="Unit">Unit</span> = <a href="#org.parboiled2;ValueStack._size" title="Int">_size</a> = <span title="Int(0)" class="int">0</span>

  <span class="comment">/**
   * Puts the given value onto the stack.
   * Throws a `ValueStackOverflowException` if the stack has no more space available.
   */</span>
  def <a title="(value: Any)Unit" id="org.parboiled2;ValueStack.push">push</a><span class="delimiter">(</span><a title="Any" id="org.parboiled2;ValueStack.push.value">value</a>: <span title="Any">Any</span><span class="delimiter">)</span>: <span title="Unit">Unit</span> = <span class="delimiter">{</span>
    val <a title="Int" id="org.parboiled2;ValueStack.push.oldSize">oldSize</a> = <a href="#org.parboiled2;ValueStack._size" title="Int">_size</a>
    val newSize = <a href="#org.parboiled2;ValueStack.push.oldSize" title="Int">oldSize</a> <a title="Int" id="org.parboiled2;ValueStack.push.newSize">+</a> <span title="Int(1)" class="int">1</span>
    <a href="#org.parboiled2;ValueStack.ensureSize" title="(requiredSize: Int)Unit">ensureSize</a><span class="delimiter">(</span><a href="#org.parboiled2;ValueStack.push.newSize" title="Int">newSize</a><span class="delimiter">)</span>
    <a href="#org.parboiled2;ValueStack.buffer" title="(i: Int, x: Any)Unit">buffer</a><span class="delimiter">(</span><a href="#org.parboiled2;ValueStack.push.oldSize" title="Int">oldSize</a><span class="delimiter">)</span> = <a href="#org.parboiled2;ValueStack.push.value" title="Any">value</a>
    <a href="#org.parboiled2;ValueStack._size" title="Int">_size</a> = <a href="#org.parboiled2;ValueStack.push.newSize" title="Int">newSize</a>
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Puts the given HList of values onto the stack.
   * Throws a `ValueStackOverflowException` if the stack has no more space available.
   */</span>
  @tailrec final def <a title="(hlist: shapeless.HList)Unit" id="org.parboiled2;ValueStack.pushAll">pushAll</a><span class="delimiter">(</span><a title="shapeless.HList" id="org.parboiled2;ValueStack.pushAll.hlist">hlist</a>: <span title="shapeless.HList">HList</span><span class="delimiter">)</span>: <span title="Unit">Unit</span> =
    <a href="#org.parboiled2;ValueStack.pushAll.hlist" title="shapeless.HList">hlist</a> match <span class="delimiter">{</span>
      case shapeless.::<span class="delimiter">(</span><a title="Any" id="org.parboiled2;ValueStack.pushAll.head">head</a>, <a title="shapeless.HList" id="org.parboiled2;ValueStack.pushAll.tail">tail</a><span class="delimiter">)</span> ⇒
        <a href="#org.parboiled2;ValueStack.push" title="(value: Any)Unit">push</a><span class="delimiter">(</span><a href="#org.parboiled2;ValueStack.pushAll.head" title="Any">head</a><span class="delimiter">)</span>
        <a href="#org.parboiled2;ValueStack.pushAll" title="(hlist: shapeless.HList)Unit">pushAll</a><span class="delimiter">(</span><a href="#org.parboiled2;ValueStack.pushAll.tail" title="shapeless.HList">tail</a><span class="delimiter">)</span>
      case <span title="shapeless.HNil.type">HNil</span> ⇒
    <span class="delimiter">}</span>

  <span class="comment">/**
   * Inserts the given value into the stack `down` elements below the current
   * top element. `insert(0, 'x')` is therefore equal to `push('x')`.
   * Throws a `ValueStackOverflowException` if the stack has no more space available.
   * Throws a `ValueStackUnderflowException` if `down &gt; size`.
   * Throws an `IllegalArgumentException` is `down` is negative.
   */</span>
  def <a title="(down: Int, value: Any)Unit" id="org.parboiled2;ValueStack.insert">insert</a><span class="delimiter">(</span><a title="Int" id="org.parboiled2;ValueStack.insert.down">down</a>: <span title="Int">Int</span>, <a title="Any" id="org.parboiled2;ValueStack.insert.value">value</a>: <span title="Any">Any</span><span class="delimiter">)</span>: <span title="Unit">Unit</span> =
    math.<span title="(x: Int)Int">signum</span><span class="delimiter">(</span><a href="#org.parboiled2;ValueStack.insert.down" title="Int">down</a><span class="delimiter">)</span> match <span class="delimiter">{</span>
      case <span title="Int(-1)">-</span><span class="int">1</span> ⇒ throw new <span title="IllegalArgumentException">IllegalArgumentException</span><span class="delimiter">(</span><span title="String(&quot;`down` must not be negative&quot;)" class="string">&quot;`down` must not be negative&quot;</span><span class="delimiter">)</span>
      case <span title="Int(0)" class="int">0</span>  ⇒ <a href="#org.parboiled2;ValueStack.push" title="(value: Any)Unit">push</a><span class="delimiter">(</span><a href="#org.parboiled2;ValueStack.insert.value" title="Any">value</a><span class="delimiter">)</span>
      case <span title="Int(1)" class="int">1</span> ⇒
        if <span class="delimiter">(</span><a href="#org.parboiled2;ValueStack.insert.down" title="Int">down</a> <span title="(x: Int)Boolean">&gt;</span> <a href="#org.parboiled2;ValueStack._size" title="Int">_size</a><span class="delimiter">)</span> throw new <a href="#org.parboiled2;ValueStackUnderflowException" title="org.parboiled2.ValueStackUnderflowException">ValueStackUnderflowException</a>
        val newSize = <a href="#org.parboiled2;ValueStack._size" title="Int">_size</a> <a title="Int" id="org.parboiled2;ValueStack.insert.newSize">+</a> <span title="Int(1)" class="int">1</span>
        <a href="#org.parboiled2;ValueStack.ensureSize" title="(requiredSize: Int)Unit">ensureSize</a><span class="delimiter">(</span><a href="#org.parboiled2;ValueStack.insert.newSize" title="Int">newSize</a><span class="delimiter">)</span>
        val targetIx = <a href="#org.parboiled2;ValueStack._size" title="Int">_size</a> <a title="Int" id="org.parboiled2;ValueStack.insert.targetIx">-</a> <a href="#org.parboiled2;ValueStack.insert.down" title="Int">down</a>
        <span title="System.type">System</span>.<span title="(x$1: Any, x$2: Int, x$3: Any, x$4: Int, x$5: Int)Unit">arraycopy</span><span class="delimiter">(</span><a href="#org.parboiled2;ValueStack.buffer" title="Array[Any]">buffer</a>, <a href="#org.parboiled2;ValueStack.insert.targetIx" title="Int">targetIx</a>, <a href="#org.parboiled2;ValueStack.buffer" title="Array[Any]">buffer</a>, <a href="#org.parboiled2;ValueStack.insert.targetIx" title="Int">targetIx</a> <span title="(x: Int)Int">+</span> <span title="Int(1)" class="int">1</span>, <a href="#org.parboiled2;ValueStack.insert.down" title="Int">down</a><span class="delimiter">)</span>
        <a href="#org.parboiled2;ValueStack.buffer" title="(i: Int, x: Any)Unit">buffer</a><span class="delimiter">(</span><a href="#org.parboiled2;ValueStack.insert.targetIx" title="Int">targetIx</a><span class="delimiter">)</span> = <a href="#org.parboiled2;ValueStack.insert.value" title="Any">value</a>
        <a href="#org.parboiled2;ValueStack._size" title="Int">_size</a> = <a href="#org.parboiled2;ValueStack.insert.newSize" title="Int">newSize</a>
    <span class="delimiter">}</span>

  <span class="comment">/**
   * Removes the top element from the stack and returns it.
   * Throws a `ValueStackUnderflowException` if the stack is empty.
   */</span>
  def <a title="()Any" id="org.parboiled2;ValueStack.pop">pop</a><span class="delimiter">(</span><span class="delimiter">)</span>: <span title="Any">Any</span> =
    if <span class="delimiter">(</span><a href="#org.parboiled2;ValueStack._size" title="Int">_size</a> <span title="(x: Int)Boolean">&gt;</span> <span title="Int(0)" class="int">0</span><span class="delimiter">)</span> <span class="delimiter">{</span>
      val newSize = <a href="#org.parboiled2;ValueStack._size" title="Int">_size</a> <a title="Int" id="org.parboiled2;ValueStack.pop.newSize">-</a> <span title="Int(1)" class="int">1</span>
      <a href="#org.parboiled2;ValueStack._size" title="Int">_size</a> = <a href="#org.parboiled2;ValueStack.pop.newSize" title="Int">newSize</a>
      <a href="#org.parboiled2;ValueStack.buffer" title="(i: Int)Any">buffer</a><span class="delimiter">(</span><a href="#org.parboiled2;ValueStack.pop.newSize" title="Int">newSize</a><span class="delimiter">)</span>
    <span class="delimiter">}</span> else throw new <a href="#org.parboiled2;ValueStackUnderflowException" title="org.parboiled2.ValueStackUnderflowException">ValueStackUnderflowException</a>

  <span class="comment">/**
   * Removes the element `down` elements below the current top element from the stack
   * and returns it. `pullOut(0)` is therefore equal to `pop()`.
   * Throws a `ValueStackUnderflowException` if `down &gt;= size`.
   * Throws an `IllegalArgumentException` is `down` is negative.
   */</span>
  def <a title="(down: Int)Any" id="org.parboiled2;ValueStack.pullOut">pullOut</a><span class="delimiter">(</span><a title="Int" id="org.parboiled2;ValueStack.pullOut.down">down</a>: <span title="Int">Int</span><span class="delimiter">)</span>: <span title="Any">Any</span> =
    math.<span title="(x: Int)Int">signum</span><span class="delimiter">(</span><a href="#org.parboiled2;ValueStack.pullOut.down" title="Int">down</a><span class="delimiter">)</span> match <span class="delimiter">{</span>
      case <span title="Int(-1)">-</span><span class="int">1</span> ⇒ throw new <span title="IllegalArgumentException">IllegalArgumentException</span><span class="delimiter">(</span><span title="String(&quot;`down` must not be negative&quot;)" class="string">&quot;`down` must not be negative&quot;</span><span class="delimiter">)</span>
      case <span title="Int(0)" class="int">0</span>  ⇒ <a href="#org.parboiled2;ValueStack.pop" title="()Any">pop</a><span class="delimiter">(</span><span class="delimiter">)</span>
      case <span title="Int(1)" class="int">1</span> ⇒
        if <span class="delimiter">(</span><a href="#org.parboiled2;ValueStack.pullOut.down" title="Int">down</a> <span title="(x: Int)Boolean">&gt;=</span> <a href="#org.parboiled2;ValueStack._size" title="Int">_size</a><span class="delimiter">)</span> throw new <a href="#org.parboiled2;ValueStackUnderflowException" title="org.parboiled2.ValueStackUnderflowException">ValueStackUnderflowException</a>
        val newSize = <a href="#org.parboiled2;ValueStack._size" title="Int">_size</a> <a title="Int" id="org.parboiled2;ValueStack.pullOut.newSize">-</a> <span title="Int(1)" class="int">1</span>
        val targetIx = <a href="#org.parboiled2;ValueStack.pullOut.newSize" title="Int">newSize</a> <a title="Int" id="org.parboiled2;ValueStack.pullOut.targetIx">-</a> <a href="#org.parboiled2;ValueStack.pullOut.down" title="Int">down</a>
        val <a title="Any" id="org.parboiled2;ValueStack.pullOut.result">result</a> = <a href="#org.parboiled2;ValueStack.buffer" title="(i: Int)Any">buffer</a><span class="delimiter">(</span><a href="#org.parboiled2;ValueStack.pullOut.targetIx" title="Int">targetIx</a><span class="delimiter">)</span>
        <span title="System.type">System</span>.<span title="(x$1: Any, x$2: Int, x$3: Any, x$4: Int, x$5: Int)Unit">arraycopy</span><span class="delimiter">(</span><a href="#org.parboiled2;ValueStack.buffer" title="Array[Any]">buffer</a>, <a href="#org.parboiled2;ValueStack.pullOut.targetIx" title="Int">targetIx</a> <span title="(x: Int)Int">+</span> <span title="Int(1)" class="int">1</span>, <a href="#org.parboiled2;ValueStack.buffer" title="Array[Any]">buffer</a>, <a href="#org.parboiled2;ValueStack.pullOut.targetIx" title="Int">targetIx</a>, <a href="#org.parboiled2;ValueStack.pullOut.down" title="Int">down</a><span class="delimiter">)</span>
        <a href="#org.parboiled2;ValueStack._size" title="Int">_size</a> = <a href="#org.parboiled2;ValueStack.pullOut.newSize" title="Int">newSize</a>
        <a href="#org.parboiled2;ValueStack.pullOut.result" title="Any">result</a>
    <span class="delimiter">}</span>

  <span class="comment">/**
   * Returns the top element without removing it.
   * Throws a `ValueStackUnderflowException` if the stack is empty.
   */</span>
  def <a title="=&gt; Any" id="org.parboiled2;ValueStack.peek(776ba433af)">peek</a>: <span title="Any">Any</span> =
    if <span class="delimiter">(</span><a href="#org.parboiled2;ValueStack._size" title="Int">_size</a> <span title="(x: Int)Boolean">&gt;</span> <span title="Int(0)" class="int">0</span><span class="delimiter">)</span> <a href="#org.parboiled2;ValueStack.buffer" title="(i: Int)Any">buffer</a><span class="delimiter">(</span><a href="#org.parboiled2;ValueStack._size" title="Int">_size</a> <span title="(x: Int)Int">-</span> <span title="Int(1)" class="int">1</span><span class="delimiter">)</span>
    else throw new <a href="#org.parboiled2;ValueStackUnderflowException" title="org.parboiled2.ValueStackUnderflowException">ValueStackUnderflowException</a>

  <span class="comment">/**
   * Returns the element `down` elements below the current top element without removing it.
   * `peek(0)` is therefore equal to `peek()`.
   * Throws a `ValueStackUnderflowException` if `down &gt;= size`.
   * Throws an `IllegalArgumentException` is `down` is negative.
   */</span>
  def <a title="(down: Int)Any" id="org.parboiled2;ValueStack.peek(95b8c64ef6)">peek</a><span class="delimiter">(</span><a title="Int" id="org.parboiled2;ValueStack.peek(95b8c64ef6).down">down</a>: <span title="Int">Int</span><span class="delimiter">)</span>: <span title="Any">Any</span> =
    math.<span title="(x: Int)Int">signum</span><span class="delimiter">(</span><a href="#org.parboiled2;ValueStack.peek(95b8c64ef6).down" title="Int">down</a><span class="delimiter">)</span> match <span class="delimiter">{</span>
      case <span title="Int(-1)">-</span><span class="int">1</span> ⇒ throw new <span title="IllegalArgumentException">IllegalArgumentException</span><span class="delimiter">(</span><span title="String(&quot;`down` must not be negative&quot;)" class="string">&quot;`down` must not be negative&quot;</span><span class="delimiter">)</span>
      case <span title="Int(0)" class="int">0</span>  ⇒ <a href="#org.parboiled2;ValueStack.peek(776ba433af)" title="=&gt; Any">peek</a>
      case <span title="Int(1)" class="int">1</span> ⇒
        if <span class="delimiter">(</span><a href="#org.parboiled2;ValueStack.peek(95b8c64ef6).down" title="Int">down</a> <span title="(x: Int)Boolean">&gt;=</span> <a href="#org.parboiled2;ValueStack._size" title="Int">_size</a><span class="delimiter">)</span> throw new <a href="#org.parboiled2;ValueStackUnderflowException" title="org.parboiled2.ValueStackUnderflowException">ValueStackUnderflowException</a>
        else <a href="#org.parboiled2;ValueStack.buffer" title="(i: Int)Any">buffer</a><span class="delimiter">(</span><a href="#org.parboiled2;ValueStack._size" title="Int">_size</a> <span title="(x: Int)Int">-</span> <a href="#org.parboiled2;ValueStack.peek(95b8c64ef6).down" title="Int">down</a> <span title="(x: Int)Int">-</span> <span title="Int(1)" class="int">1</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>

  <span class="comment">/**
   * Replaces the element `down` elements below the current top element with the given one.
   * Throws a `ValueStackUnderflowException` if `down &gt;= size`.
   * Throws an `IllegalArgumentException` if `down` is negative.
   */</span>
  def <a title="(down: Int, value: Any)Unit" id="org.parboiled2;ValueStack.poke">poke</a><span class="delimiter">(</span><a title="Int" id="org.parboiled2;ValueStack.poke.down">down</a>: <span title="Int">Int</span>, <a title="Any" id="org.parboiled2;ValueStack.poke.value">value</a>: <span title="Any">Any</span><span class="delimiter">)</span>: <span title="Unit">Unit</span> = <span class="delimiter">{</span>
    if <span class="delimiter">(</span><a href="#org.parboiled2;ValueStack.poke.down" title="Int">down</a> <span title="(x: Int)Boolean">&gt;=</span> <a href="#org.parboiled2;ValueStack._size" title="Int">_size</a><span class="delimiter">)</span> throw new <a href="#org.parboiled2;ValueStackUnderflowException" title="org.parboiled2.ValueStackUnderflowException">ValueStackUnderflowException</a>
    <span title="(requirement: Boolean, message: =&gt; Any)Unit">require</span><span class="delimiter">(</span><a href="#org.parboiled2;ValueStack.poke.down" title="Int">down</a> <span title="(x: Int)Boolean">&gt;=</span> <span title="Int(0)" class="int">0</span>, <span title="String(&quot;`down` must be &gt;= 0&quot;)" class="string">&quot;`down` must be &gt;= 0&quot;</span><span class="delimiter">)</span>
    <a href="#org.parboiled2;ValueStack.buffer" title="(i: Int, x: Any)Unit">buffer</a><span class="delimiter">(</span><a href="#org.parboiled2;ValueStack._size" title="Int">_size</a> <span title="(x: Int)Int">-</span> <a href="#org.parboiled2;ValueStack.poke.down" title="Int">down</a> <span title="(x: Int)Int">-</span> <span title="Int(1)" class="int">1</span><span class="delimiter">)</span> = <a href="#org.parboiled2;ValueStack.poke.value" title="Any">value</a>
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Swaps the top 2 stack elements.
   * Throws a `ValueStackUnderflowException` if `size &lt; 2`.
   */</span>
  def <a title="()Unit" id="org.parboiled2;ValueStack.swap">swap</a><span class="delimiter">(</span><span class="delimiter">)</span>: <span title="Unit">Unit</span> = <span class="delimiter">{</span>
    if <span class="delimiter">(</span><a href="#org.parboiled2;ValueStack._size" title="Int">_size</a> <span title="(x: Int)Boolean">&lt;</span> <span title="Int(2)" class="int">2</span><span class="delimiter">)</span> throw new <a href="#org.parboiled2;ValueStackUnderflowException" title="org.parboiled2.ValueStackUnderflowException">ValueStackUnderflowException</a>
    val <a title="Any" id="org.parboiled2;ValueStack.swap.temp">temp</a> = <a href="#org.parboiled2;ValueStack.buffer" title="(i: Int)Any">buffer</a><span class="delimiter">(</span><a href="#org.parboiled2;ValueStack._size" title="Int">_size</a> <span title="(x: Int)Int">-</span> <span title="Int(1)" class="int">1</span><span class="delimiter">)</span>
    <a href="#org.parboiled2;ValueStack.buffer" title="(i: Int, x: Any)Unit">buffer</a><span class="delimiter">(</span><a href="#org.parboiled2;ValueStack._size" title="Int">_size</a> <span title="(x: Int)Int">-</span> <span title="Int(1)" class="int">1</span><span class="delimiter">)</span> = <a href="#org.parboiled2;ValueStack.buffer" title="(i: Int)Any">buffer</a><span class="delimiter">(</span><a href="#org.parboiled2;ValueStack._size" title="Int">_size</a> <span title="(x: Int)Int">-</span> <span title="Int(2)" class="int">2</span><span class="delimiter">)</span>
    <a href="#org.parboiled2;ValueStack.buffer" title="(i: Int, x: Any)Unit">buffer</a><span class="delimiter">(</span><a href="#org.parboiled2;ValueStack._size" title="Int">_size</a> <span title="(x: Int)Int">-</span> <span title="Int(2)" class="int">2</span><span class="delimiter">)</span> = <a href="#org.parboiled2;ValueStack.swap.temp" title="Any">temp</a>
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Swaps the top 3 stack elements.
   * Throws a `ValueStackUnderflowException` if `size &lt; 3`.
   */</span>
  def <a title="()Unit" id="org.parboiled2;ValueStack.swap3">swap3</a><span class="delimiter">(</span><span class="delimiter">)</span>: <span title="Unit">Unit</span> = <span class="delimiter">{</span>
    if <span class="delimiter">(</span><a href="#org.parboiled2;ValueStack._size" title="Int">_size</a> <span title="(x: Int)Boolean">&lt;</span> <span title="Int(3)" class="int">3</span><span class="delimiter">)</span> throw new <a href="#org.parboiled2;ValueStackUnderflowException" title="org.parboiled2.ValueStackUnderflowException">ValueStackUnderflowException</a>
    val <a title="Any" id="org.parboiled2;ValueStack.swap3.temp">temp</a> = <a href="#org.parboiled2;ValueStack.buffer" title="(i: Int)Any">buffer</a><span class="delimiter">(</span><a href="#org.parboiled2;ValueStack._size" title="Int">_size</a> <span title="(x: Int)Int">-</span> <span title="Int(1)" class="int">1</span><span class="delimiter">)</span>
    <a href="#org.parboiled2;ValueStack.buffer" title="(i: Int, x: Any)Unit">buffer</a><span class="delimiter">(</span><a href="#org.parboiled2;ValueStack._size" title="Int">_size</a> <span title="(x: Int)Int">-</span> <span title="Int(1)" class="int">1</span><span class="delimiter">)</span> = <a href="#org.parboiled2;ValueStack.buffer" title="(i: Int)Any">buffer</a><span class="delimiter">(</span><a href="#org.parboiled2;ValueStack._size" title="Int">_size</a> <span title="(x: Int)Int">-</span> <span title="Int(3)" class="int">3</span><span class="delimiter">)</span>
    <a href="#org.parboiled2;ValueStack.buffer" title="(i: Int, x: Any)Unit">buffer</a><span class="delimiter">(</span><a href="#org.parboiled2;ValueStack._size" title="Int">_size</a> <span title="(x: Int)Int">-</span> <span title="Int(3)" class="int">3</span><span class="delimiter">)</span> = <a href="#org.parboiled2;ValueStack.swap3.temp" title="Any">temp</a>
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Swaps the top 4 stack elements.
   * Throws a `ValueStackUnderflowException` if `size &lt; 4`.
   */</span>
  def <a title="()Unit" id="org.parboiled2;ValueStack.swap4">swap4</a><span class="delimiter">(</span><span class="delimiter">)</span>: <span title="Unit">Unit</span> = <span class="delimiter">{</span>
    if <span class="delimiter">(</span><a href="#org.parboiled2;ValueStack._size" title="Int">_size</a> <span title="(x: Int)Boolean">&lt;</span> <span title="Int(4)" class="int">4</span><span class="delimiter">)</span> throw new <a href="#org.parboiled2;ValueStackUnderflowException" title="org.parboiled2.ValueStackUnderflowException">ValueStackUnderflowException</a>
    var <a title="Any" id="org.parboiled2;ValueStack.swap4.temp">temp</a> = <a href="#org.parboiled2;ValueStack.buffer" title="(i: Int)Any">buffer</a><span class="delimiter">(</span><a href="#org.parboiled2;ValueStack._size" title="Int">_size</a> <span title="(x: Int)Int">-</span> <span title="Int(1)" class="int">1</span><span class="delimiter">)</span>
    <a href="#org.parboiled2;ValueStack.buffer" title="(i: Int, x: Any)Unit">buffer</a><span class="delimiter">(</span><a href="#org.parboiled2;ValueStack._size" title="Int">_size</a> <span title="(x: Int)Int">-</span> <span title="Int(1)" class="int">1</span><span class="delimiter">)</span> = <a href="#org.parboiled2;ValueStack.buffer" title="(i: Int)Any">buffer</a><span class="delimiter">(</span><a href="#org.parboiled2;ValueStack._size" title="Int">_size</a> <span title="(x: Int)Int">-</span> <span title="Int(4)" class="int">4</span><span class="delimiter">)</span>
    <a href="#org.parboiled2;ValueStack.buffer" title="(i: Int, x: Any)Unit">buffer</a><span class="delimiter">(</span><a href="#org.parboiled2;ValueStack._size" title="Int">_size</a> <span title="(x: Int)Int">-</span> <span title="Int(4)" class="int">4</span><span class="delimiter">)</span> = <a href="#org.parboiled2;ValueStack.swap4.temp" title="Any">temp</a>
    <a href="#org.parboiled2;ValueStack.swap4.temp" title="Any">temp</a> = <a href="#org.parboiled2;ValueStack.buffer" title="(i: Int)Any">buffer</a><span class="delimiter">(</span><a href="#org.parboiled2;ValueStack._size" title="Int">_size</a> <span title="(x: Int)Int">-</span> <span title="Int(2)" class="int">2</span><span class="delimiter">)</span>
    <a href="#org.parboiled2;ValueStack.buffer" title="(i: Int, x: Any)Unit">buffer</a><span class="delimiter">(</span><a href="#org.parboiled2;ValueStack._size" title="Int">_size</a> <span title="(x: Int)Int">-</span> <span title="Int(2)" class="int">2</span><span class="delimiter">)</span> = <a href="#org.parboiled2;ValueStack.buffer" title="(i: Int)Any">buffer</a><span class="delimiter">(</span><a href="#org.parboiled2;ValueStack._size" title="Int">_size</a> <span title="(x: Int)Int">-</span> <span title="Int(3)" class="int">3</span><span class="delimiter">)</span>
    <a href="#org.parboiled2;ValueStack.buffer" title="(i: Int, x: Any)Unit">buffer</a><span class="delimiter">(</span><a href="#org.parboiled2;ValueStack._size" title="Int">_size</a> <span title="(x: Int)Int">-</span> <span title="Int(3)" class="int">3</span><span class="delimiter">)</span> = <a href="#org.parboiled2;ValueStack.swap4.temp" title="Any">temp</a>
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Swaps the top 5 stack elements.
   * Throws a `ValueStackUnderflowException` if `size &lt; 5`.
   */</span>
  def <a title="()Unit" id="org.parboiled2;ValueStack.swap5">swap5</a><span class="delimiter">(</span><span class="delimiter">)</span>: <span title="Unit">Unit</span> = <span class="delimiter">{</span>
    if <span class="delimiter">(</span><a href="#org.parboiled2;ValueStack._size" title="Int">_size</a> <span title="(x: Int)Boolean">&lt;</span> <span title="Int(5)" class="int">5</span><span class="delimiter">)</span> throw new <a href="#org.parboiled2;ValueStackUnderflowException" title="org.parboiled2.ValueStackUnderflowException">ValueStackUnderflowException</a>
    var <a title="Any" id="org.parboiled2;ValueStack.swap5.temp">temp</a> = <a href="#org.parboiled2;ValueStack.buffer" title="(i: Int)Any">buffer</a><span class="delimiter">(</span><a href="#org.parboiled2;ValueStack._size" title="Int">_size</a> <span title="(x: Int)Int">-</span> <span title="Int(1)" class="int">1</span><span class="delimiter">)</span>
    <a href="#org.parboiled2;ValueStack.buffer" title="(i: Int, x: Any)Unit">buffer</a><span class="delimiter">(</span><a href="#org.parboiled2;ValueStack._size" title="Int">_size</a> <span title="(x: Int)Int">-</span> <span title="Int(1)" class="int">1</span><span class="delimiter">)</span> = <a href="#org.parboiled2;ValueStack.buffer" title="(i: Int)Any">buffer</a><span class="delimiter">(</span><a href="#org.parboiled2;ValueStack._size" title="Int">_size</a> <span title="(x: Int)Int">-</span> <span title="Int(5)" class="int">5</span><span class="delimiter">)</span>
    <a href="#org.parboiled2;ValueStack.buffer" title="(i: Int, x: Any)Unit">buffer</a><span class="delimiter">(</span><a href="#org.parboiled2;ValueStack._size" title="Int">_size</a> <span title="(x: Int)Int">-</span> <span title="Int(5)" class="int">5</span><span class="delimiter">)</span> = <a href="#org.parboiled2;ValueStack.swap5.temp" title="Any">temp</a>
    <a href="#org.parboiled2;ValueStack.swap5.temp" title="Any">temp</a> = <a href="#org.parboiled2;ValueStack.buffer" title="(i: Int)Any">buffer</a><span class="delimiter">(</span><a href="#org.parboiled2;ValueStack._size" title="Int">_size</a> <span title="(x: Int)Int">-</span> <span title="Int(2)" class="int">2</span><span class="delimiter">)</span>
    <a href="#org.parboiled2;ValueStack.buffer" title="(i: Int, x: Any)Unit">buffer</a><span class="delimiter">(</span><a href="#org.parboiled2;ValueStack._size" title="Int">_size</a> <span title="(x: Int)Int">-</span> <span title="Int(2)" class="int">2</span><span class="delimiter">)</span> = <a href="#org.parboiled2;ValueStack.buffer" title="(i: Int)Any">buffer</a><span class="delimiter">(</span><a href="#org.parboiled2;ValueStack._size" title="Int">_size</a> <span title="(x: Int)Int">-</span> <span title="Int(4)" class="int">4</span><span class="delimiter">)</span>
    <a href="#org.parboiled2;ValueStack.buffer" title="(i: Int, x: Any)Unit">buffer</a><span class="delimiter">(</span><a href="#org.parboiled2;ValueStack._size" title="Int">_size</a> <span title="(x: Int)Int">-</span> <span title="Int(4)" class="int">4</span><span class="delimiter">)</span> = <a href="#org.parboiled2;ValueStack.swap5.temp" title="Any">temp</a>
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Returns all current stack elements as a new array.
   */</span>
  def <a title="=&gt; Array[Any]" id="org.parboiled2;ValueStack.toArray(f2e4467cba)">toArray</a>: <span title="Array[Any]">Array</span><span class="delimiter">[</span>Any<span class="delimiter">]</span> = <span class="delimiter">{</span>
    val <a title="Array[Any]" id="org.parboiled2;ValueStack.toArray(f2e4467cba).a">a</a> = new <span title="Array[Any]">Array</span><span class="delimiter">[</span>Any<span class="delimiter">]</span><span class="delimiter">(</span><a href="#org.parboiled2;ValueStack._size" title="Int">_size</a><span class="delimiter">)</span>
    <span title="System.type">System</span>.<span title="(x$1: Any, x$2: Int, x$3: Any, x$4: Int, x$5: Int)Unit">arraycopy</span><span class="delimiter">(</span><a href="#org.parboiled2;ValueStack.buffer" title="Array[Any]">buffer</a>, <span title="Int(0)" class="int">0</span>, <a href="#org.parboiled2;ValueStack.toArray(f2e4467cba).a" title="Array[Any]">a</a>, <span title="Int(0)" class="int">0</span>, <a href="#org.parboiled2;ValueStack._size" title="Int">_size</a><span class="delimiter">)</span>
    <a href="#org.parboiled2;ValueStack.toArray(f2e4467cba).a" title="Array[Any]">a</a>
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Copies all elements between the given `start` (inclusive) and `end` (exclusive)
   * indices into an HList that is prepended to the given tail.
   * Throws an `IllegalArgumentException` if `start &lt; 0 || start &gt; end`.
   * Throws a `ValueStackUnderflowException` if `end &gt; size`.
   */</span>
  @tailrec final def <a title="[L &lt;: shapeless.HList](start: Int, end: Int, prependTo: shapeless.HList)L" id="org.parboiled2;ValueStack.toHList">toHList</a><span class="delimiter">[</span><a title=" &lt;: shapeless.HList" id="org.parboiled2;ValueStack.toHList$default$3;L">L</a> &lt;: HList<span class="delimiter">]</span><span class="delimiter">(</span><a title="Int" id="org.parboiled2;ValueStack.toHList$default$1">start</a>: <span title="Int">Int</span> = <span title="Int(0)" class="int">0</span>, <a title="Int" id="org.parboiled2;ValueStack.toHList$default$2">end</a>: <span title="Int">Int</span> = <a href="#org.parboiled2;ValueStack._size" title="Int">_size</a>, <a title="shapeless.HList" id="org.parboiled2;ValueStack.toHList$default$3">prependTo</a>: <span title="shapeless.HList">HList</span> = <span title="shapeless.HNil.type">HNil</span><span class="delimiter">)</span>: <a href="#org.parboiled2;ValueStack.toHList$default$3;L" title="L">L</a> = <span class="delimiter">{</span>
    <span title="(requirement: Boolean, message: =&gt; Any)Unit">require</span><span class="delimiter">(</span><span title="Int(0)" class="int">0</span> <span title="(x: Int)Boolean">&lt;=</span> <a href="#org.parboiled2;ValueStack.toHList$default$1" title="Int">start</a> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <a href="#org.parboiled2;ValueStack.toHList$default$1" title="Int">start</a> <span title="(x: Int)Boolean">&lt;=</span> <a href="#org.parboiled2;ValueStack.toHList$default$2" title="Int">end</a>, <span title="String(&quot;`start` must be &gt;= 0 and &lt;= `end`&quot;)" class="string">&quot;`start` must be &gt;= 0 and &lt;= `end`&quot;</span><span class="delimiter">)</span>
    if <span class="delimiter">(</span><a href="#org.parboiled2;ValueStack.toHList$default$1" title="Int">start</a> <span title="(x: Int)Boolean">==</span> <a href="#org.parboiled2;ValueStack.toHList$default$2" title="Int">end</a><span class="delimiter">)</span> <a href="#org.parboiled2;ValueStack.toHList$default$3" title="shapeless.HList">prependTo</a>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="L" class="delimiter">[</span><a href="#org.parboiled2;ValueStack.toHList$default$3;L" title="L">L</a><span class="delimiter">]</span>
    else <a href="#org.parboiled2;ValueStack.toHList" title="[L &lt;: shapeless.HList](start: Int, end: Int, prependTo: shapeless.HList)L">toHList</a><span title="(start: Int, end: Int, prependTo: shapeless.HList)L" class="delimiter">[</span><a href="#org.parboiled2;ValueStack.toHList$default$3;L" title="L">L</a><span class="delimiter">]</span><span class="delimiter">(</span><a href="#org.parboiled2;ValueStack.toHList$default$1" title="Int">start</a>, <a href="#org.parboiled2;ValueStack.toHList$default$2" title="Int">end</a> <span title="(x: Int)Int">-</span> <span title="Int(1)" class="int">1</span>, <a href="#org.parboiled2;ValueStack.buffer" title="(i: Int)Any">buffer</a><span class="delimiter">(</span><a href="#org.parboiled2;ValueStack.toHList$default$2" title="Int">end</a> <span title="(x: Int)Int">-</span> <span title="Int(1)" class="int">1</span><span class="delimiter">)</span> <a href="#org.parboiled2;ValueStack.toHList.x$1" title="(h: Any)shapeless.::[Any,shapeless.HList]">::</a> <a href="#org.parboiled2;ValueStack.toHList$default$3" title="(l: shapeless.HList)shapeless.syntax.HListOps[shapeless.HList]">prependTo</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Creates a string representation of the current value stack contents.
   * Mostly useful for debugging.
   */</span>
  def <a title="=&gt; String" id="org.parboiled2;ValueStack.show">show</a>: <span title="String">String</span> = <a href="#org.parboiled2;ValueStack" title="(start: String, sep: String, end: String)String">mkString</a><span class="delimiter">(</span><span title="String(&quot;[&quot;)" class="string">&quot;[&quot;</span>, <span title="String(&quot;, &quot;)" class="string">&quot;, &quot;</span>, <span title="String(&quot;]&quot;)" class="string">&quot;]&quot;</span><span class="delimiter">)</span>

  <span class="comment">/**
   * Returns an iterator that iterates over a *snapshot* of the stack elements
   * at the time of this method call. I.e. subsequent mutations are not visible
   * to the iterator.
   */</span>
  def <a title="=&gt; Iterator[Any]" id="org.parboiled2;ValueStack.iterator">iterator</a>: <span title="Iterator[Any]">Iterator</span><span class="delimiter">[</span>Any<span class="delimiter">]</span> = <a href="#org.parboiled2;ValueStack.toArray(f2e4467cba)" title="(xs: Array[Any])scala.collection.mutable.ArrayOps[Any]">toArray</a>.<span title="=&gt; Iterator[Any]">iterator</span>

  private def <a title="(requiredSize: Int)Unit" id="org.parboiled2;ValueStack.ensureSize">ensureSize</a><span class="delimiter">(</span><a title="Int" id="org.parboiled2;ValueStack.ensureSize.requiredSize">requiredSize</a>: <span title="Int">Int</span><span class="delimiter">)</span>: <span title="Unit">Unit</span> =
    if <span class="delimiter">(</span><a href="#org.parboiled2;ValueStack.buffer" title="Array[Any]">buffer</a>.<span title="=&gt; Int">length</span> <span title="(x: Int)Boolean">&lt;</span> <a href="#org.parboiled2;ValueStack.ensureSize.requiredSize" title="Int">requiredSize</a><span class="delimiter">)</span>
      if <span class="delimiter">(</span><a href="#org.parboiled2;ValueStack.ensureSize.requiredSize" title="Int">requiredSize</a> <span title="(x: Int)Boolean">&lt;=</span> <a href="#org.parboiled2;ValueStack.maxSize" title="Int">maxSize</a><span class="delimiter">)</span> <span class="delimiter">{</span>
        val <a title="Int" id="org.parboiled2;ValueStack.ensureSize.newSize">newSize</a> = math.<span title="(x: Int, y: Int)Int">min</span><span class="delimiter">(</span>math.<span title="(x: Int, y: Int)Int">max</span><span class="delimiter">(</span><a href="#org.parboiled2;ValueStack.buffer" title="Array[Any]">buffer</a>.<span title="=&gt; Int">length</span> <span title="(x: Int)Int">*</span> <span title="Int(2)" class="int">2</span>, <a href="#org.parboiled2;ValueStack.ensureSize.requiredSize" title="Int">requiredSize</a><span class="delimiter">)</span>, <a href="#org.parboiled2;ValueStack.maxSize" title="Int">maxSize</a><span class="delimiter">)</span>
        val <a title="Array[Any]" id="org.parboiled2;ValueStack.ensureSize.newBuffer">newBuffer</a> = new <span title="Array[Any]">Array</span><span class="delimiter">[</span>Any<span class="delimiter">]</span><span class="delimiter">(</span><a href="#org.parboiled2;ValueStack.ensureSize.newSize" title="Int">newSize</a><span class="delimiter">)</span>
        <span title="System.type">System</span>.<span title="(x$1: Any, x$2: Int, x$3: Any, x$4: Int, x$5: Int)Unit">arraycopy</span><span class="delimiter">(</span><a href="#org.parboiled2;ValueStack.buffer" title="Array[Any]">buffer</a>, <span title="Int(0)" class="int">0</span>, <a href="#org.parboiled2;ValueStack.ensureSize.newBuffer" title="Array[Any]">newBuffer</a>, <span title="Int(0)" class="int">0</span>, <a href="#org.parboiled2;ValueStack._size" title="Int">_size</a><span class="delimiter">)</span>
        <a href="#org.parboiled2;ValueStack.buffer" title="Array[Any]">buffer</a> = <a href="#org.parboiled2;ValueStack.ensureSize.newBuffer" title="Array[Any]">newBuffer</a>
      <span class="delimiter">}</span> else throw new <a href="#org.parboiled2;ValueStackOverflowException" title="org.parboiled2.ValueStackOverflowException">ValueStackOverflowException</a>
<span class="delimiter">}</span>

class <a title="class ValueStackOverflowException extends RuntimeException" id="org.parboiled2;ValueStackOverflowException">ValueStackOverflowException</a> extends <a href="#org.parboiled2;ValueStackOverflowException" title="RuntimeException">RuntimeException</a>
class <a title="class ValueStackUnderflowException extends RuntimeException" id="org.parboiled2;ValueStackUnderflowException">ValueStackUnderflowException</a> extends <a href="#org.parboiled2;ValueStackUnderflowException" title="RuntimeException">RuntimeException</a>
        </pre>
    </body>
</html>
