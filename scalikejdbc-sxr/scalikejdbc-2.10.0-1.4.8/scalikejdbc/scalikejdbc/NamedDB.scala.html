<?xml version="1.0" encoding="utf-8"?>
      <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <meta http-equiv="Expires" content="0" />
        <title>scalikejdbc/scalikejdbc/NamedDB.scala</title>
        <script type="text/javascript" src="../../jquery-all.js"></script>
        <script type="text/javascript" src="../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../style.css" title="Style"></link>
    </head>
    <body>
        <pre>
/*
 * Copyright 2012 Kazuhiro Sera
 *
 * Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND,
 * either express or implied. See the License for the specific language
 * governing permissions and limitations under the License.
 */
<span class="keyword">package</span> scalikejdbc

<span class="keyword">import</span> java.sql.Connection
<span class="keyword">import</span> scalikejdbc.metadata.Table

/**
 * Named Basic DB Accessor
 *
 * It's easier to use named ConnectionPool with this class.
 *
 * {{{
 * ConnectionPool.add('named, &quot;jdbc:...&quot;, &quot;user&quot;, &quot;password&quot;)
 * val users = NamedDB('named) readOnly { session =&gt;
 *   session.list(&quot;select * from user&quot;)
 * }
 * }}}
 */
<span class="keyword">case class</span> <a title="class NamedDB extends AnyRef with Product with Serializable" id="58374">NamedDB</a><a href="#58374" title="Product" class="delimiter">(</a><a title="Any" id="58372">name</a>: <span title="Any">Any</span><span class="delimiter">)</span><span class="delimiter">(</span><span class="keyword">implicit</span> <a title="scalikejdbc.ConnectionPoolContext" id="58353">context</a>: <a href="ConnectionPoolContext.scala.html#8370" title="scalikejdbc.ConnectionPoolContext">ConnectionPoolContext</a> = <a href="ConnectionPoolContext.scala.html#7858" title="scalikejdbc.NoConnectionPoolContext.type">NoConnectionPoolContext</a><span class="delimiter">)</span> <span class="delimiter">{</span>

  <span class="keyword">private</span><span class="delimiter">[</span><span class="keyword">this</span><span class="delimiter">]</span> <span class="keyword">def</span> <a title="()scalikejdbc.ConnectionPool" id="58074">connectionPool</a><span class="delimiter">(</span><span class="delimiter">)</span>: <a href="ConnectionPool.scala.html#8349" title="scalikejdbc.ConnectionPool">ConnectionPool</a> = <a href="package.scala.html#9678" title="(v: Any)Option[Nothing]">opt</a><span class="delimiter">(</span><a href="#58353" title="scalikejdbc.ConnectionPoolContext">context</a> <span class="keyword">match</span> <span class="delimiter">{</span>
    <span class="keyword">case</span> <a href="ConnectionPoolContext.scala.html#7858" title="Any">NoConnectionPoolContext</a> =&gt; <a href="ConnectionPool.scala.html#13379" title="(name: Any)scalikejdbc.ConnectionPool">ConnectionPool</a><a href="#98805" title="(x: Any)Any" class="delimiter">(</a><a href="#58372" title="=&gt; Any">name</a><span class="delimiter">)</span>
    <span class="keyword">case</span> _: MultipleConnectionPoolContext =&gt; <a href="#58353" title="scalikejdbc.ConnectionPoolContext">context</a>.<a href="ConnectionPoolContext.scala.html#33799" title="(name: Any)scalikejdbc.ConnectionPool">get</a><a href="#98805" title="(x: Any)Any" class="delimiter">(</a><a href="#58372" title="=&gt; Any">name</a><span class="delimiter">)</span>
    <span class="keyword">case</span> _ =&gt; <a href="#98805" title="(x: Any)Any" class="keyword">throw</a> <span title="(x$1: String)IllegalStateException" class="keyword">new</span> <span title="IllegalStateException">IllegalStateException</span><span class="delimiter">(</span><a href="ErrorMessage.scala.html#7594" title="scalikejdbc.ErrorMessage.type">ErrorMessage</a>.<a href="ErrorMessage.scala.html#38494" title="=&gt; String">UNKNOWN_CONNECTION_POOL_CONTEXT</a><span class="delimiter">)</span>
  <span class="delimiter">}</span><span class="delimiter">)</span> <span title="(default: =&gt; Nothing)Nothing">getOrElse</span> <span class="delimiter">{</span>
    <span title="Nothing" class="keyword">throw</span> <span title="(x$1: String)IllegalStateException" class="keyword">new</span> <span title="IllegalStateException">IllegalStateException</span><span class="delimiter">(</span><a href="ErrorMessage.scala.html#7594" title="scalikejdbc.ErrorMessage.type">ErrorMessage</a>.<a href="ErrorMessage.scala.html#38474" title="=&gt; String">CONNECTION_POOL_IS_NOT_YET_INITIALIZED</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">private</span> <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="scalikejdbc.DB" id="58075">db</a>: <a href="DB.scala.html#7869" title="scalikejdbc.DB">DB</a> = <a href="DB.scala.html#33489" title="(conn: java.sql.Connection)scalikejdbc.DB">DB</a><span class="delimiter">(</span><a href="#58074" title="()scalikejdbc.ConnectionPool">connectionPool</a><span class="delimiter">(</span><span class="delimiter">)</span>.<a href="ConnectionPool.scala.html#49714" title="()java.sql.Connection">borrow</a><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span>

  <span class="keyword">def</span> <a title="()scalikejdbc.DB" id="58077">toDB</a><span class="delimiter">(</span><span class="delimiter">)</span>: <a href="DB.scala.html#7869" title="scalikejdbc.DB">DB</a> = <a href="#58075" title="=&gt; scalikejdbc.DB">db</a>

  <span class="keyword">def</span> <a title="=&gt; Boolean" id="58078">isTxNotActive</a> = <a href="#58075" title="=&gt; scalikejdbc.DB">db</a>.<a href="DB.scala.html#45660" title="=&gt; Boolean">isTxNotActive</a>

  <span class="keyword">def</span> <a title="=&gt; Boolean" id="58079">isTxNotYetStarted</a> = <a href="#58075" title="=&gt; scalikejdbc.DB">db</a>.<a href="DB.scala.html#45661" title="=&gt; Boolean">isTxNotYetStarted</a>

  <span class="keyword">def</span> <a title="=&gt; Boolean" id="58080">isTxAlreadyStarted</a> = <a href="#58075" title="=&gt; scalikejdbc.DB">db</a>.<a href="DB.scala.html#45662" title="=&gt; Boolean">isTxAlreadyStarted</a>

  <span class="keyword">def</span> <a title="=&gt; scalikejdbc.Tx" id="58081">newTx</a>: <a href="Tx.scala.html#7779" title="scalikejdbc.Tx">Tx</a> = <a href="#58075" title="=&gt; scalikejdbc.DB">db</a>.<a href="DB.scala.html#45664" title="=&gt; scalikejdbc.Tx">newTx</a>

  <span class="keyword">def</span> <a title="=&gt; scalikejdbc.Tx" id="58082">currentTx</a>: <a href="Tx.scala.html#7779" title="scalikejdbc.Tx">Tx</a> = <a href="#58075" title="=&gt; scalikejdbc.DB">db</a>.<a href="DB.scala.html#45665" title="=&gt; scalikejdbc.Tx">currentTx</a>

  <span class="keyword">def</span> <a title="=&gt; scalikejdbc.Tx" id="58083">tx</a>: <a href="Tx.scala.html#7779" title="scalikejdbc.Tx">Tx</a> = <a href="#58075" title="=&gt; scalikejdbc.DB">db</a>.<a href="DB.scala.html#45666" title="=&gt; scalikejdbc.Tx">tx</a>

  <span class="keyword">def</span> <a title="()Unit" id="58084">close</a><span class="delimiter">(</span><span class="delimiter">)</span> = <a href="#58075" title="=&gt; scalikejdbc.DB">db</a>.<a href="DB.scala.html#45667" title="()Unit">close</a><span class="delimiter">(</span><span class="delimiter">)</span>

  <span class="keyword">def</span> <a title="()Unit" id="58085">begin</a><span class="delimiter">(</span><span class="delimiter">)</span> = <a href="#58075" title="=&gt; scalikejdbc.DB">db</a>.<a href="DB.scala.html#45668" title="()Unit">begin</a><span class="delimiter">(</span><span class="delimiter">)</span>

  <span class="keyword">def</span> <a title="()Unit" id="58086">beginIfNotYet</a><span class="delimiter">(</span><span class="delimiter">)</span>: <span title="Unit">Unit</span> = <a href="#58075" title="=&gt; scalikejdbc.DB">db</a>.<a href="DB.scala.html#45669" title="()Unit">beginIfNotYet</a><span class="delimiter">(</span><span class="delimiter">)</span>

  <span class="keyword">def</span> <a title="()Unit" id="58087">commit</a><span class="delimiter">(</span><span class="delimiter">)</span>: <span title="Unit">Unit</span> = <a href="#58075" title="=&gt; scalikejdbc.DB">db</a>.<a href="DB.scala.html#45670" title="()Unit">commit</a><span class="delimiter">(</span><span class="delimiter">)</span>

  <span class="keyword">def</span> <a title="()Unit" id="58088">rollback</a><span class="delimiter">(</span><span class="delimiter">)</span>: <span title="Unit">Unit</span> = <a href="#58075" title="=&gt; scalikejdbc.DB">db</a>.<a href="DB.scala.html#45671" title="()Unit">rollback</a><span class="delimiter">(</span><span class="delimiter">)</span>

  <span class="keyword">def</span> <a title="()Unit" id="58089">rollbackIfActive</a><span class="delimiter">(</span><span class="delimiter">)</span>: <span title="Unit">Unit</span> = <a href="#58075" title="=&gt; scalikejdbc.DB">db</a>.<a href="DB.scala.html#45672" title="()Unit">rollbackIfActive</a><span class="delimiter">(</span><span class="delimiter">)</span>

  <span class="keyword">def</span> <a title="()scalikejdbc.DBSession" id="58090">readOnlySession</a><span class="delimiter">(</span><span class="delimiter">)</span>: <a href="DBSession.scala.html#7794" title="scalikejdbc.DBSession">DBSession</a> = <a href="#58075" title="=&gt; scalikejdbc.DB">db</a>.<a href="DB.scala.html#45673" title="()scalikejdbc.DBSession">readOnlySession</a><span class="delimiter">(</span><span class="delimiter">)</span>

  <span class="keyword">def</span> <a title="[A](execution: scalikejdbc.DBSession =&gt; A)A" id="58091">readOnly</a><span class="delimiter">[</span><a title="" id="58093">A</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="scalikejdbc.DBSession =&gt; A" id="58174">execution</a>: DBSession =&gt; A<span class="delimiter">)</span>: <a href="#58093" title="A">A</a> = <a href="#58075" title="=&gt; scalikejdbc.DB">db</a>.<a href="DB.scala.html#45674" title="(execution: scalikejdbc.DBSession =&gt; A)A">readOnly</a><span class="delimiter">(</span><a href="#58174" title="scalikejdbc.DBSession =&gt; A">execution</a><span class="delimiter">)</span>

  <span class="keyword">def</span> <a title="[A](execution: java.sql.Connection =&gt; A)A" id="58094">readOnlyWithConnection</a><span class="delimiter">[</span><a title="" id="58096">A</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="java.sql.Connection =&gt; A" id="58180">execution</a>: Connection =&gt; A<span class="delimiter">)</span>: <a href="#58096" title="A">A</a> = <a href="#58075" title="=&gt; scalikejdbc.DB">db</a>.<a href="DB.scala.html#45677" title="(execution: java.sql.Connection =&gt; A)A">readOnlyWithConnection</a><span class="delimiter">(</span><a href="#58180" title="java.sql.Connection =&gt; A">execution</a><span class="delimiter">)</span>

  <span class="keyword">def</span> <a title="()scalikejdbc.DBSession" id="58097">autoCommitSession</a><span class="delimiter">(</span><span class="delimiter">)</span>: <a href="DBSession.scala.html#7794" title="scalikejdbc.DBSession">DBSession</a> = <a href="#58075" title="=&gt; scalikejdbc.DB">db</a>.<a href="DB.scala.html#45680" title="()scalikejdbc.DBSession">autoCommitSession</a><span class="delimiter">(</span><span class="delimiter">)</span>

  <span class="keyword">def</span> <a title="[A](execution: scalikejdbc.DBSession =&gt; A)A" id="58098">autoCommit</a><span class="delimiter">[</span><a title="" id="58100">A</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="scalikejdbc.DBSession =&gt; A" id="58187">execution</a>: DBSession =&gt; A<span class="delimiter">)</span>: <a href="#58100" title="A">A</a> = <a href="#58075" title="=&gt; scalikejdbc.DB">db</a>.<a href="DB.scala.html#45681" title="(execution: scalikejdbc.DBSession =&gt; A)A">autoCommit</a><span class="delimiter">(</span><a href="#58187" title="scalikejdbc.DBSession =&gt; A">execution</a><span class="delimiter">)</span>

  <span class="keyword">def</span> <a title="[A](execution: java.sql.Connection =&gt; A)A" id="58101">autoCommitWithConnection</a><span class="delimiter">[</span><a title="" id="58103">A</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="java.sql.Connection =&gt; A" id="58193">execution</a>: Connection =&gt; A<span class="delimiter">)</span>: <a href="#58103" title="A">A</a> = <a href="#58075" title="=&gt; scalikejdbc.DB">db</a>.<a href="DB.scala.html#45684" title="(execution: java.sql.Connection =&gt; A)A">autoCommitWithConnection</a><span class="delimiter">(</span><a href="#58193" title="java.sql.Connection =&gt; A">execution</a><span class="delimiter">)</span>

  <span class="keyword">def</span> <a title="(tx: scalikejdbc.Tx)scalikejdbc.DBSession" id="58104">withinTxSession</a><span class="delimiter">(</span><a title="scalikejdbc.Tx" id="58201">tx</a>: <a href="Tx.scala.html#7779" title="scalikejdbc.Tx">Tx</a> = <a href="#58082" title="=&gt; scalikejdbc.Tx">currentTx</a><span class="delimiter">)</span>: <a href="DBSession.scala.html#7794" title="scalikejdbc.DBSession">DBSession</a> = <a href="#58075" title="=&gt; scalikejdbc.DB">db</a>.<a href="DB.scala.html#45687" title="(tx: scalikejdbc.Tx)scalikejdbc.DBSession">withinTxSession</a><span class="delimiter">(</span><a href="#58201" title="scalikejdbc.Tx">tx</a><span class="delimiter">)</span>

  <span class="keyword">def</span> <a title="[A](execution: scalikejdbc.DBSession =&gt; A)A" id="58105">withinTx</a><span class="delimiter">[</span><a title="" id="58107">A</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="scalikejdbc.DBSession =&gt; A" id="58202">execution</a>: DBSession =&gt; A<span class="delimiter">)</span>: <a href="#58107" title="A">A</a> = <a href="#58075" title="=&gt; scalikejdbc.DB">db</a>.<a href="DB.scala.html#45688" title="(execution: scalikejdbc.DBSession =&gt; A)A">withinTx</a><span class="delimiter">(</span><a href="#58202" title="scalikejdbc.DBSession =&gt; A">execution</a><span class="delimiter">)</span>

  <span class="keyword">def</span> <a title="[A](execution: java.sql.Connection =&gt; A)A" id="58108">withinTxWithConnection</a><span class="delimiter">[</span><a title="" id="58110">A</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="java.sql.Connection =&gt; A" id="58208">execution</a>: Connection =&gt; A<span class="delimiter">)</span>: <a href="#58110" title="A">A</a> = <a href="#58075" title="=&gt; scalikejdbc.DB">db</a>.<a href="DB.scala.html#45691" title="(execution: java.sql.Connection =&gt; A)A">withinTxWithConnection</a><span class="delimiter">(</span><a href="#58208" title="java.sql.Connection =&gt; A">execution</a><span class="delimiter">)</span>

  <span class="keyword">def</span> <a title="[A](execution: scalikejdbc.DBSession =&gt; A)A" id="58111">localTx</a><span class="delimiter">[</span><a title="" id="58113">A</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="scalikejdbc.DBSession =&gt; A" id="58214">execution</a>: DBSession =&gt; A<span class="delimiter">)</span>: <a href="#58113" title="A">A</a> = <a href="#58075" title="=&gt; scalikejdbc.DB">db</a>.<a href="DB.scala.html#45696" title="(execution: scalikejdbc.DBSession =&gt; A)A">localTx</a><span class="delimiter">(</span><a href="#58214" title="scalikejdbc.DBSession =&gt; A">execution</a><span class="delimiter">)</span>

  <span class="keyword">def</span> <a title="[A](execution: java.sql.Connection =&gt; A)A" id="58114">localTxWithConnection</a><span class="delimiter">[</span><a title="" id="58116">A</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="java.sql.Connection =&gt; A" id="58220">execution</a>: Connection =&gt; A<span class="delimiter">)</span>: <a href="#58116" title="A">A</a> = <a href="#58075" title="=&gt; scalikejdbc.DB">db</a>.<a href="DB.scala.html#45699" title="(execution: java.sql.Connection =&gt; A)A">localTxWithConnection</a><span class="delimiter">(</span><a href="#58220" title="java.sql.Connection =&gt; A">execution</a><span class="delimiter">)</span>

  <span class="keyword">def</span> <a title="(table: String)Option[scalikejdbc.metadata.Table]" id="58117">getTable</a><span class="delimiter">(</span><a title="String" id="58226">table</a>: <span title="String">String</span><span class="delimiter">)</span>: <span title="Option[scalikejdbc.metadata.Table]">Option</span><span class="delimiter">[</span>Table<span class="delimiter">]</span> = <a href="#58075" title="=&gt; scalikejdbc.DB">db</a>.<a href="DB.scala.html#45705" title="(table: String)Option[scalikejdbc.metadata.Table]">getTable</a><span class="delimiter">(</span><a href="#58226" title="String">table</a><span class="delimiter">)</span>

  <span class="keyword">def</span> <a title="(tableNamePattern: String, tableTypes: Array[String])List[String]" id="58118">getTableNames</a><span class="delimiter">(</span><a title="String" id="58228">tableNamePattern</a>: <span title="String">String</span>, <a title="Array[String]" id="58231">tableTypes</a>: <span title="Array[String]">Array</span><span class="delimiter">[</span>String<span class="delimiter">]</span> = <span title="(xs: String*)(implicit evidence$2: scala.reflect.ClassTag[String])Array[String]">Array</span><span title="(runtimeClass1: Class[_])scala.reflect.ClassTag[String]" class="delimiter">(</span><span title="String(&quot;TABLE&quot;)" class="string">&quot;TABLE&quot;</span>, <span title="String(&quot;VIEW&quot;)" class="string">&quot;VIEW&quot;</span><span class="delimiter">)</span><span class="delimiter">)</span>: <span title="List[String]">List</span><span class="delimiter">[</span>String<span class="delimiter">]</span> = <span class="delimiter">{</span>
    <a href="#58075" title="=&gt; scalikejdbc.DB">db</a>.<a href="DB.scala.html#45703" title="(tableNamePattern: String, tableTypes: Array[String])List[String]">getTableNames</a><span class="delimiter">(</span><a href="#58228" title="String">tableNamePattern</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="(tableNamePattern: String, tableTypes: Array[String])String" id="58119">showTables</a><span class="delimiter">(</span><a title="String" id="58254">tableNamePattern</a>: <span title="String">String</span> = <span title="String(&quot;%&quot;)" class="string">&quot;%&quot;</span>, <a title="Array[String]" id="58255">tableTypes</a>: <span title="Array[String]">Array</span><span class="delimiter">[</span>String<span class="delimiter">]</span> = <span title="(xs: String*)(implicit evidence$2: scala.reflect.ClassTag[String])Array[String]">Array</span><span title="(runtimeClass1: Class[_])scala.reflect.ClassTag[String]" class="delimiter">(</span><span title="String(&quot;TABLE&quot;)" class="string">&quot;TABLE&quot;</span>, <span title="String(&quot;VIEW&quot;)" class="string">&quot;VIEW&quot;</span><span class="delimiter">)</span><span class="delimiter">)</span>: <span title="String">String</span> = <span class="delimiter">{</span>
    <a href="#58075" title="=&gt; scalikejdbc.DB">db</a>.<a href="DB.scala.html#45707" title="(tableNamePattern: String, tableTypes: Array[String])String">showTables</a><span class="delimiter">(</span><a href="#58254" title="String">tableNamePattern</a>, <a href="#58255" title="Array[String]">tableTypes</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="(table: String)String" id="58120">describe</a><span class="delimiter">(</span><a title="String" id="58275">table</a>: <span title="String">String</span><span class="delimiter">)</span> = <a href="#58075" title="=&gt; scalikejdbc.DB">db</a>.<a href="DB.scala.html#45708" title="(table: String)String">describe</a><span class="delimiter">(</span><a href="#58275" title="String">table</a><span class="delimiter">)</span>

<span class="delimiter">}</span>

        </pre>
    </body>
</html>