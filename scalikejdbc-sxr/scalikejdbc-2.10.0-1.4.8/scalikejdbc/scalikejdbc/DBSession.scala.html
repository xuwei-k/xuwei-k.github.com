<?xml version="1.0" encoding="utf-8"?>
      <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <meta http-equiv="Expires" content="0" />
        <title>scalikejdbc/scalikejdbc/DBSession.scala</title>
        <script type="text/javascript" src="../../jquery-all.js"></script>
        <script type="text/javascript" src="../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../style.css" title="Style"></link>
    </head>
    <body>
        <pre>
/*
 * Copyright 2011 Kazuhiro Sera
 *
 * Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND,
 * either express or implied. See the License for the specific language
 * governing permissions and limitations under the License.
 */
<span class="keyword">package</span> scalikejdbc

<span class="keyword">import</span> java.sql._
<span class="keyword">import</span> util.control.<span title="scala.util.control.Exception.type">Exception</span>._

/**
 * DB Session
 *
 * This class provides readOnly/autoCommit/localTx/withinTx blocks and session objects.
 *
 * {{{
 * import scalikejdbc._
 *
 * val userIdList = DB autoCommit { session: DBSession =&gt;
 *   session.list(&quot;select * from user&quot;) { rs =&gt; rs.int(&quot;id&quot;) }
 * }
 * }}}
 */
<span class="keyword">trait</span> <a title="trait DBSession extends AnyRef with scalikejdbc.LogSupport" id="7794">DBSession</a> <span title="Unit" class="keyword">extends</span> <a href="LogSupport.scala.html#7878" title="scalikejdbc.LogSupport">LogSupport</a> <span class="delimiter">{</span>

  /**
   * Connection
   */
  <span class="keyword">val</span> <a title="=&gt; java.sql.Connection" id="45622">conn</a>: <span title="java.sql.Connection">Connection</span>
  <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="java.sql.Connection" id="45623">connection</a>: <span title="java.sql.Connection">Connection</span> = <a href="#45622" title="=&gt; java.sql.Connection">conn</a>

  <span class="keyword">val</span> <a title="=&gt; Boolean" id="45625">isReadOnly</a>: <span title="Boolean">Boolean</span>

  /**
   * Create [[java.sql.Statement]] executor.
   *
   * @param conn connection
   * @param template SQL template
   * @param params parameters
   * @param returnGeneratedKeys is generated keys required
   * @return statement executor
   */
  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(conn: java.sql.Connection, template: String, params: Seq[Any], returnGeneratedKeys: Boolean)scalikejdbc.StatementExecutor" id="45626">createStatementExecutor</a><span class="delimiter">(</span><a title="java.sql.Connection" id="56059">conn</a>: <span title="java.sql.Connection">Connection</span>, <a title="String" id="56060">template</a>: <span title="String">String</span>, <a title="Seq[Any]" id="56061">params</a>: <span title="Seq[Any]">Seq</span><span class="delimiter">[</span>Any<span class="delimiter">]</span>,
    <a title="Boolean" id="56064">returnGeneratedKeys</a>: <span title="Boolean">Boolean</span> = <span title="Boolean(false)" class="keyword">false</span><span class="delimiter">)</span>: <a href="StatementExecutor.scala.html#7569" title="scalikejdbc.StatementExecutor">StatementExecutor</a> = <span class="delimiter">{</span>
    <span class="keyword">try</span> <span class="delimiter">{</span>
      <span class="keyword">val</span> <a title="java.sql.PreparedStatement" id="56105">statement</a> = <span title="java.sql.PreparedStatement" class="keyword">if</span> <span class="delimiter">(</span><a href="#56064" title="Boolean">returnGeneratedKeys</a><span class="delimiter">)</span> <span class="delimiter">{</span>
        <a href="#56059" title="java.sql.Connection">conn</a>.<span title="(x$1: String, x$2: Int)java.sql.PreparedStatement">prepareStatement</span><span class="delimiter">(</span><a href="#56060" title="String">template</a>, Statement.<span title="Int(1)">RETURN_GENERATED_KEYS</span><span class="delimiter">)</span>
      <span class="delimiter">}</span> <span class="keyword">else</span> <span class="delimiter">{</span>
        <a href="#56059" title="java.sql.Connection">conn</a>.<span title="(x$1: String)java.sql.PreparedStatement">prepareStatement</span><span class="delimiter">(</span><a href="#56060" title="String">template</a><span class="delimiter">)</span>
      <span class="delimiter">}</span>
      <a href="StatementExecutor.scala.html#56363" title="(underlying: java.sql.PreparedStatement, template: String, singleParams: Seq[Any], isBatch: Boolean)scalikejdbc.StatementExecutor">StatementExecutor</a><span class="delimiter">(</span>
        underlying = <a href="#56105" title="java.sql.PreparedStatement">statement</a>,
        template = <a href="#56060" title="String">template</a>,
        singleParams = <a href="#56061" title="Seq[Any]">params</a><span class="delimiter">)</span>
    <span class="delimiter">}</span> <span class="keyword">catch</span> <span class="delimiter">{</span>
      <span class="keyword">case</span> <a title="Nothing" id="56371">e</a>: <span title="Exception">Exception</span> =&gt;
        <span class="keyword">val</span> <a title="String" id="56372">formattedTemplate</a> = <span title="String" class="keyword">if</span> <span class="delimiter">(</span><a href="GlobalSettings.scala.html#7960" title="scalikejdbc.GlobalSettings.type">GlobalSettings</a>.<a href="GlobalSettings.scala.html#31976" title="=&gt; scalikejdbc.SQLFormatterSettings">sqlFormatter</a>.<a href="SQLFormatterSettings.scala.html#56377" title="=&gt; Option[scalikejdbc.SQLFormatter]">formatter</a>.<span title="=&gt; Boolean">isDefined</span><span class="delimiter">)</span> <span class="delimiter">{</span>
          <span class="keyword">val</span> <a title="scalikejdbc.SQLFormatter" id="56380">formatter</a> = <a href="GlobalSettings.scala.html#7960" title="scalikejdbc.GlobalSettings.type">GlobalSettings</a>.<a href="GlobalSettings.scala.html#31976" title="=&gt; scalikejdbc.SQLFormatterSettings">sqlFormatter</a>.<a href="SQLFormatterSettings.scala.html#56377" title="=&gt; Option[scalikejdbc.SQLFormatter]">formatter</a>.<span title="=&gt; scalikejdbc.SQLFormatter">get</span>
          <a href="#56380" title="scalikejdbc.SQLFormatter">formatter</a>.<a href="SQLFormatter.scala.html#56381" title="(sql: String)String">format</a><span class="delimiter">(</span><a href="#56060" title="String">template</a><span class="delimiter">)</span>
        <span class="delimiter">}</span> <span class="keyword">else</span> <span class="delimiter">{</span>
          <a href="#56060" title="String">template</a>
        <span class="delimiter">}</span>
        <a href="LogSupport.scala.html#13366" title="=&gt; scalikejdbc.Log">log</a>.<a href="Log.scala.html#50175" title="(msg: =&gt; String)Unit">error</a><span class="delimiter">(</span><span title="String(&quot;Failed to parse the following SQL template:\n\n  &quot;)" class="string">&quot;Failed to parse the following SQL template:\n\n  &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#56372" title="String">formattedTemplate</a> <span title="(x$1: Any)String">+</span> <span title="String(&quot;\n&quot;)" class="string">&quot;\n&quot;</span><span class="delimiter">)</span>
        <span title="Nothing" class="keyword">throw</span> <a href="#56371" title="Exception">e</a>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  /**
   * Create [[java.sql.Statement]] executor.
   * @param conn connection
   * @param template SQL template
   * @return statement executor
   */
  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(conn: java.sql.Connection, template: String)scalikejdbc.StatementExecutor" id="45627">createBatchStatementExecutor</a><span class="delimiter">(</span><a title="java.sql.Connection" id="56388">conn</a>: <span title="java.sql.Connection">Connection</span>, <a title="String" id="56389">template</a>: <span title="String">String</span><span class="delimiter">)</span>: <a href="StatementExecutor.scala.html#7569" title="scalikejdbc.StatementExecutor">StatementExecutor</a> = <span class="delimiter">{</span>
    <a href="StatementExecutor.scala.html#56369" title="Seq[Any]" id="56396">StatementExecutor</a><span class="delimiter">(</span>
      underlying = <a href="#56388" title="java.sql.Connection">conn</a>.<span title="(x$1: String)java.sql.PreparedStatement">prepareStatement</span><a title="java.sql.PreparedStatement" id="56393" class="delimiter">(</a><a href="#56389" title="String">template</a><span class="delimiter">)</span>,
      template = <a href="#56389" title="String" id="56394">template</a>,
      isBatch = <a title="Boolean" id="56395" class="keyword">true</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  /**
   * Ensures the current session is not in read-only mode.
   * @param template
   */
  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(template: String)Unit" id="45628">ensureNotReadOnlySession</a><span class="delimiter">(</span><a title="String" id="56397">template</a>: <span title="String">String</span><span class="delimiter">)</span>: <span title="Unit">Unit</span> = <span class="delimiter">{</span>
    <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#45625" title="=&gt; Boolean">isReadOnly</a><span class="delimiter">)</span> <span class="delimiter">{</span>
      <span title="Nothing" class="keyword">throw</span> <span title="(x$1: String)java.sql.SQLException" class="keyword">new</span> java.sql.<span title="java.sql.SQLException">SQLException</span><span class="delimiter">(</span>
        <a href="ErrorMessage.scala.html#7594" title="scalikejdbc.ErrorMessage.type">ErrorMessage</a>.<a href="ErrorMessage.scala.html#38478" title="=&gt; String">CANNOT_EXECUTE_IN_READ_ONLY_SESSION</a> <span title="(x$1: Any)String">+</span> <span title="String(&quot; (template:&quot;)" class="string">&quot; (template:&quot;</span> <span title="(x$1: Any)String">+</span> <a href="#56397" title="String">template</a> <span title="(x$1: Any)String">+</span> <span title="String(&quot;)&quot;)" class="string">&quot;)&quot;</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  /**
   * Returns single result optionally.
   * If the result is not single, [[scalikejdbc.TooManyRowsException]] will be thrown.
   *
   * @param template SQL template
   * @param params parameters
   * @param extract extract function
   * @tparam A return type
   * @return result optionally
   */
  <span class="keyword">def</span> <a title="[A](template: String, params: Any*)(extract: scalikejdbc.WrappedResultSet =&gt; A)Option[A]" id="45629">single</a><span class="delimiter">[</span><a title="" id="45631">A</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="String" id="56403">template</a>: <span title="String">String</span>, <a title="Any*" id="56404">params</a>: <span title="Any*">Any</span>*<span class="delimiter">)</span><span class="delimiter">(</span><a title="scalikejdbc.WrappedResultSet =&gt; A" id="56405">extract</a>: WrappedResultSet =&gt; A<span class="delimiter">)</span>: <span title="Option[A]">Option</span><span class="delimiter">[</span>A<span class="delimiter">]</span> = <span class="delimiter">{</span>
    <a href="package.scala.html#9664" title="(resource: scalikejdbc.StatementExecutor)(f: scalikejdbc.StatementExecutor =&gt; Option[A])Option[A]">using</a><span class="delimiter">(</span><a href="#45626" title="(conn: java.sql.Connection, template: String, params: Seq[Any], returnGeneratedKeys: Boolean)scalikejdbc.StatementExecutor">createStatementExecutor</a><span class="delimiter">(</span><a href="#45622" title="=&gt; java.sql.Connection">conn</a>, <a href="#56403" title="String">template</a>, <a href="#56404" title="Any*">params</a><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">{</span>
      <a title="scalikejdbc.StatementExecutor" id="56422">executor</a> =&gt;
        <span class="keyword">val</span> <a title="scalikejdbc.ResultSetTraversable" id="56423">resultSet</a> = <span title="scalikejdbc.ResultSetTraversable" class="keyword">new</span> <a href="ResultSetTraversable.scala.html#8325" title="scalikejdbc.ResultSetTraversable">ResultSetTraversable</a><span class="delimiter">(</span><a href="#56422" title="scalikejdbc.StatementExecutor">executor</a>.<a href="StatementExecutor.scala.html#56096" title="()java.sql.ResultSet">executeQuery</a><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span>
        <span class="keyword">val</span> <a title="List[A]" id="56424">rows</a> = <span class="delimiter">(</span><a href="#56423" title="scalikejdbc.ResultSetTraversable">resultSet</a> <span title="(f: scalikejdbc.WrappedResultSet =&gt; A)(implicit bf: scala.collection.generic.CanBuildFrom[Traversable[scalikejdbc.WrappedResultSet],A,Traversable[A]])Traversable[A]">map</span> <span class="delimiter">(</span><a title="scalikejdbc.WrappedResultSet" id="56446">rs</a> =&gt; <a href="#56405" title="(v1: scalikejdbc.WrappedResultSet)A">extract</a><span class="delimiter">(</span><a href="#56446" title="scalikejdbc.WrappedResultSet">rs</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>.<span title="=&gt; List[A]">toList</span>
        <a href="#56424" title="List[A]">rows</a> <span class="keyword">match</span> <span class="delimiter">{</span>
          <span class="keyword">case</span> <a href="#98479" title="Option[A]">Nil</a> =&gt; <a href="#98487" title="(x: Option[A])Option[A]">None</a>
          <span class="keyword">case</span> <a href="#98482" title="A" id="56532">one</a> <a href="#98479" title="Option[A]">::</a> <a href="#98482" title="=&gt; List[?A1]">Nil</a> =&gt; <span title="(x: A)Option[A]">Option</span><a href="#98487" title="(x: Option[A])Option[A]" class="delimiter">(</a><a href="#56532" title="A">one</a><span class="delimiter">)</span>
          <span class="keyword">case</span> _ =&gt; <a href="#98487" title="(x: Option[A])Option[A]" class="keyword">throw</a> <span title="scalikejdbc.TooManyRowsException" class="keyword">new</span> <a href="TooManyRowsException.scala.html#7263" title="scalikejdbc.TooManyRowsException">TooManyRowsException</a><span class="delimiter">(</span><span title="Int(1)" class="int">1</span>, <a href="#56424" title="List[A]">rows</a>.<span title="=&gt; Int">size</span><span class="delimiter">)</span>
        <span class="delimiter">}</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  /**
   * Returns the first row optionally.
   *
   * @param template SQL template
   * @param params parameters
   * @param extract extract function
   * @tparam A return type
   * @return result optionally
   */
  <span class="keyword">def</span> <a title="[A](template: String, params: Any*)(extract: scalikejdbc.WrappedResultSet =&gt; A)Option[A]" id="45632">first</a><span class="delimiter">[</span><a title="" id="45634">A</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="String" id="56548">template</a>: <span title="String">String</span>, <a title="Any*" id="56549">params</a>: <span title="Any*">Any</span>*<span class="delimiter">)</span><span class="delimiter">(</span><a title="scalikejdbc.WrappedResultSet =&gt; A" id="56550">extract</a>: WrappedResultSet =&gt; A<span class="delimiter">)</span>: <span title="Option[A]">Option</span><span class="delimiter">[</span>A<span class="delimiter">]</span> = <span class="delimiter">{</span>
    <a href="#45635" title="(template: String, params: Any*)(extract: scalikejdbc.WrappedResultSet =&gt; A)List[A]">list</a><span class="delimiter">(</span><a href="#56548" title="String">template</a>, <a href="#56549" title="Any*">params</a>: _*<span class="delimiter">)</span><span class="delimiter">(</span><a href="#56550" title="scalikejdbc.WrappedResultSet =&gt; A">extract</a><span class="delimiter">)</span>.<span title="=&gt; Option[A]">headOption</span>
  <span class="delimiter">}</span>

  /**
   * Returns query result as [[scala.collection.immutable.List]] object.
   *
   * @param template SQL template
   * @param params parameters
   * @param extract extract function
   * @tparam A return type
   * @return result as list
   */
  <span class="keyword">def</span> <a title="[A](template: String, params: Any*)(extract: scalikejdbc.WrappedResultSet =&gt; A)List[A]" id="45635">list</a><span class="delimiter">[</span><a title="" id="45637">A</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="String" id="56553">template</a>: <span title="String">String</span>, <a title="Any*" id="56554">params</a>: <span title="Any*">Any</span>*<span class="delimiter">)</span><span class="delimiter">(</span><a title="scalikejdbc.WrappedResultSet =&gt; A" id="56555">extract</a>: WrappedResultSet =&gt; A<span class="delimiter">)</span>: <span title="List[A]">List</span><span class="delimiter">[</span>A<span class="delimiter">]</span> = <span class="delimiter">{</span>
    <a href="#45642" title="(template: String, params: Any*)(extract: scalikejdbc.WrappedResultSet =&gt; A)Traversable[A]">traversable</a><span class="delimiter">(</span><a href="#56553" title="String">template</a>, <a href="#56554" title="Any*">params</a>: _*<span class="delimiter">)</span><span class="delimiter">(</span><a href="#56555" title="scalikejdbc.WrappedResultSet =&gt; A">extract</a><span class="delimiter">)</span>.<span title="=&gt; List[A]">toList</span>
  <span class="delimiter">}</span>

  /**
   * Applies side-effect to each row iteratively.
   *
   * @param template SQL template
   * @param params parameters
   * @param f function
   * @return result as list
   */
  <span class="keyword">def</span> <a title="(template: String, params: Any*)(f: scalikejdbc.WrappedResultSet =&gt; Unit)Unit" id="45638">foreach</a><span class="delimiter">(</span><a title="String" id="56591">template</a>: <span title="String">String</span>, <a title="Any*" id="56592">params</a>: <span title="Any*">Any</span>*<span class="delimiter">)</span><span class="delimiter">(</span><a title="scalikejdbc.WrappedResultSet =&gt; Unit" id="56593">f</a>: WrappedResultSet =&gt; Unit<span class="delimiter">)</span>: <span title="Unit">Unit</span> = <span class="delimiter">{</span>
    <a href="package.scala.html#9664" title="(resource: scalikejdbc.StatementExecutor)(f: scalikejdbc.StatementExecutor =&gt; Unit)Unit">using</a><span class="delimiter">(</span><a href="#45626" title="(conn: java.sql.Connection, template: String, params: Seq[Any], returnGeneratedKeys: Boolean)scalikejdbc.StatementExecutor">createStatementExecutor</a><span class="delimiter">(</span><a href="#45622" title="=&gt; java.sql.Connection">conn</a>, <a href="#56591" title="String">template</a>, <a href="#56592" title="Any*">params</a><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">{</span>
      <a title="scalikejdbc.StatementExecutor" id="56605">executor</a> =&gt;
        <span title="scalikejdbc.ResultSetTraversable" class="keyword">new</span> <a href="ResultSetTraversable.scala.html#8325" title="scalikejdbc.ResultSetTraversable">ResultSetTraversable</a><span class="delimiter">(</span><a href="#56605" title="scalikejdbc.StatementExecutor">executor</a>.<a href="StatementExecutor.scala.html#56096" title="()java.sql.ResultSet">executeQuery</a><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span> <a href="ResultSetTraversable.scala.html#52303" title="(f: scalikejdbc.WrappedResultSet =&gt; Unit)Unit">foreach</a> <span class="delimiter">(</span><a title="scalikejdbc.WrappedResultSet" id="56646">rs</a> =&gt; <a href="#56593" title="(v1: scalikejdbc.WrappedResultSet)Unit">f</a><span class="delimiter">(</span><a href="#56646" title="scalikejdbc.WrappedResultSet">rs</a><span class="delimiter">)</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  /**
   * folding into one value.
   *
   * @param template SQL template
   * @param params parameters
   * @param z initial value
   * @param op function
   * @return folded value
   */
  <span class="keyword">def</span> <a title="[A](template: String, params: Any*)(z: A)(op: (A, scalikejdbc.WrappedResultSet) =&gt; A)A" id="45639">foldLeft</a><span class="delimiter">[</span><a title="" id="45641">A</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="String" id="56651">template</a>: <span title="String">String</span>, <a title="Any*" id="56652">params</a>: <span title="Any*">Any</span>*<span class="delimiter">)</span><span class="delimiter">(</span><a title="A" id="56653">z</a>: <a href="#45641" title="A">A</a><span class="delimiter">)</span><span class="delimiter">(</span><a title="(A, scalikejdbc.WrappedResultSet) =&gt; A" id="56654">op</a>: <span class="delimiter">(</span>A, WrappedResultSet<span class="delimiter">)</span> =&gt; A<span class="delimiter">)</span>: <a href="#45641" title="A">A</a> = <span class="delimiter">{</span>
    <a href="package.scala.html#9664" title="(resource: scalikejdbc.StatementExecutor)(f: scalikejdbc.StatementExecutor =&gt; A)A">using</a><span class="delimiter">(</span><a href="#45626" title="(conn: java.sql.Connection, template: String, params: Seq[Any], returnGeneratedKeys: Boolean)scalikejdbc.StatementExecutor">createStatementExecutor</a><span class="delimiter">(</span><a href="#45622" title="=&gt; java.sql.Connection">conn</a>, <a href="#56651" title="String">template</a>, <a href="#56652" title="Any*">params</a><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">{</span>
      <a title="scalikejdbc.StatementExecutor" id="56668">executor</a> =&gt;
        <span title="scalikejdbc.ResultSetTraversable" class="keyword">new</span> <a href="ResultSetTraversable.scala.html#8325" title="scalikejdbc.ResultSetTraversable">ResultSetTraversable</a><span class="delimiter">(</span><a href="#56668" title="scalikejdbc.StatementExecutor">executor</a>.<a href="StatementExecutor.scala.html#56096" title="()java.sql.ResultSet">executeQuery</a><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span>.<span title="(z: A)(op: (A, scalikejdbc.WrappedResultSet) =&gt; A)A">foldLeft</span><span class="delimiter">(</span><a href="#56653" title="A">z</a><span class="delimiter">)</span><span class="delimiter">(</span><a href="#56654" title="(A, scalikejdbc.WrappedResultSet) =&gt; A">op</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  /**
   * Returns query result as [[scala.collection.Traversable]] object.
   *
   * @param template SQL template
   * @param params parameters
   * @param extract extract function
   * @tparam A return type
   * @return result as traversable
   */
  <span class="keyword">def</span> <a title="[A](template: String, params: Any*)(extract: scalikejdbc.WrappedResultSet =&gt; A)Traversable[A]" id="45642">traversable</a><span class="delimiter">[</span><a title="" id="45644">A</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="String" id="56575">template</a>: <span title="String">String</span>, <a title="Any*" id="56576">params</a>: <span title="Any*">Any</span>*<span class="delimiter">)</span><span class="delimiter">(</span><a title="scalikejdbc.WrappedResultSet =&gt; A" id="56577">extract</a>: WrappedResultSet =&gt; A<span class="delimiter">)</span>: <span title="Traversable[A]">Traversable</span><span class="delimiter">[</span>A<span class="delimiter">]</span> = <span class="delimiter">{</span>
    <a href="package.scala.html#9664" title="(resource: scalikejdbc.StatementExecutor)(f: scalikejdbc.StatementExecutor =&gt; Traversable[A])Traversable[A]">using</a><span class="delimiter">(</span><a href="#45626" title="(conn: java.sql.Connection, template: String, params: Seq[Any], returnGeneratedKeys: Boolean)scalikejdbc.StatementExecutor">createStatementExecutor</a><span class="delimiter">(</span><a href="#45622" title="=&gt; java.sql.Connection">conn</a>, <a href="#56575" title="String">template</a>, <a href="#56576" title="Any*">params</a><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">{</span>
      <a title="scalikejdbc.StatementExecutor" id="56696">executor</a> =&gt;
        <span title="scalikejdbc.ResultSetTraversable" class="keyword">new</span> <a href="ResultSetTraversable.scala.html#8325" title="scalikejdbc.ResultSetTraversable">ResultSetTraversable</a><span class="delimiter">(</span><a href="#56696" title="scalikejdbc.StatementExecutor">executor</a>.<a href="StatementExecutor.scala.html#56096" title="()java.sql.ResultSet">executeQuery</a><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span> <span title="(f: scalikejdbc.WrappedResultSet =&gt; A)(implicit bf: scala.collection.generic.CanBuildFrom[Traversable[scalikejdbc.WrappedResultSet],A,Traversable[A]])Traversable[A]">map</span> <span class="delimiter">(</span><a title="scalikejdbc.WrappedResultSet" id="56718">rs</a> =&gt; <a href="#56577" title="(v1: scalikejdbc.WrappedResultSet)A">extract</a><span class="delimiter">(</span><a href="#56718" title="scalikejdbc.WrappedResultSet">rs</a><span class="delimiter">)</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  /**
   * Executes [[java.sql.PreparedStatement#execute()]].
   *
   * @param template SQL template
   * @param params  parameters
   * @return flag
   */
  <span class="keyword">def</span> <a title="(template: String, params: Any*)Boolean" id="45645">execute</a><span class="delimiter">(</span><a title="String" id="56742">template</a>: <span title="String">String</span>, <a title="Any*" id="56743">params</a>: <span title="Any*">Any</span>*<span class="delimiter">)</span>: <span title="Boolean">Boolean</span> = <span class="delimiter">{</span>
    <a href="#45628" title="(template: String)Unit">ensureNotReadOnlySession</a><span class="delimiter">(</span><a href="#56742" title="String">template</a><span class="delimiter">)</span>
    <a href="package.scala.html#9664" title="(resource: scalikejdbc.StatementExecutor)(f: scalikejdbc.StatementExecutor =&gt; Boolean)Boolean">using</a><span class="delimiter">(</span><a href="#45626" title="(conn: java.sql.Connection, template: String, params: Seq[Any], returnGeneratedKeys: Boolean)scalikejdbc.StatementExecutor">createStatementExecutor</a><span class="delimiter">(</span><a href="#45622" title="=&gt; java.sql.Connection">conn</a>, <a href="#56742" title="String">template</a>, <a href="#56743" title="Any*">params</a><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">{</span>
      <a title="scalikejdbc.StatementExecutor" id="56755">executor</a> =&gt;
        <a href="#56755" title="scalikejdbc.StatementExecutor">executor</a>.<a href="StatementExecutor.scala.html#56090" title="()Boolean">execute</a><span class="delimiter">(</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  /**
   * Executes [[java.sql.PreparedStatement#execute()]].
   *
   * @param before before filter
   * @param after after filter
   * @param template SQL template
   * @param params parameters
   * @return flag
   */
  <span class="keyword">def</span> <a title="(before: java.sql.PreparedStatement =&gt; Unit, after: java.sql.PreparedStatement =&gt; Unit, template: String, params: Any*)Boolean" id="45646">executeWithFilters</a><span class="delimiter">(</span><a title="java.sql.PreparedStatement =&gt; Unit" id="56772">before</a>: <span class="delimiter">(</span>PreparedStatement<span class="delimiter">)</span> =&gt; Unit,
    <a title="java.sql.PreparedStatement =&gt; Unit" id="56773">after</a>: <span class="delimiter">(</span>PreparedStatement<span class="delimiter">)</span> =&gt; Unit,
    <a title="String" id="56774">template</a>: <span title="String">String</span>,
    <a title="Any*" id="56775">params</a>: <span title="Any*">Any</span>*<span class="delimiter">)</span>: <span title="Boolean">Boolean</span> = <span class="delimiter">{</span>
    <a href="#45628" title="(template: String)Unit">ensureNotReadOnlySession</a><span class="delimiter">(</span><a href="#56774" title="String">template</a><span class="delimiter">)</span>
    <a href="package.scala.html#9664" title="(resource: scalikejdbc.StatementExecutor)(f: scalikejdbc.StatementExecutor =&gt; Boolean)Boolean">using</a><span class="delimiter">(</span><a href="#45626" title="(conn: java.sql.Connection, template: String, params: Seq[Any], returnGeneratedKeys: Boolean)scalikejdbc.StatementExecutor">createStatementExecutor</a><span class="delimiter">(</span><a href="#45622" title="=&gt; java.sql.Connection">conn</a>, <a href="#56774" title="String">template</a>, <a href="#56775" title="Any*">params</a><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">{</span>
      <a title="scalikejdbc.StatementExecutor" id="56787">executor</a> =&gt;
        <a href="#56772" title="(v1: java.sql.PreparedStatement)Unit">before</a><span class="delimiter">(</span><a href="#56787" title="scalikejdbc.StatementExecutor">executor</a>.<a href="StatementExecutor.scala.html#56069" title="=&gt; java.sql.PreparedStatement">underlying</a><span class="delimiter">)</span>
        <span class="keyword">val</span> <a title="Boolean" id="56788">result</a> = <a href="#56787" title="scalikejdbc.StatementExecutor">executor</a>.<a href="StatementExecutor.scala.html#56090" title="()Boolean">execute</a><span class="delimiter">(</span><span class="delimiter">)</span>
        <a href="#56773" title="(v1: java.sql.PreparedStatement)Unit">after</a><span class="delimiter">(</span><a href="#56787" title="scalikejdbc.StatementExecutor">executor</a>.<a href="StatementExecutor.scala.html#56069" title="=&gt; java.sql.PreparedStatement">underlying</a><span class="delimiter">)</span>
        <a href="#56788" title="Boolean">result</a>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  /**
   * Executes [[java.sql.PreparedStatement#executeUpdate()]].
   *
   * @param template SQL template
   * @param params  parameters
   * @return result count
   */
  <span class="keyword">def</span> <a title="(template: String, params: Any*)Int" id="45647">executeUpdate</a><span class="delimiter">(</span><a title="String" id="56795">template</a>: <span title="String">String</span>, <a title="Any*" id="56796">params</a>: <span title="Any*">Any</span>*<span class="delimiter">)</span>: <span title="Int">Int</span> = <a href="#45648" title="(template: String, params: Any*)Int">update</a><span class="delimiter">(</span><a href="#56795" title="String">template</a>, <a href="#56796" title="Any*">params</a>: _*<span class="delimiter">)</span>

  /**
   * Executes [[java.sql.PreparedStatement#executeUpdate()]].
   *
   * @param template SQL template
   * @param params parameters
   * @return result count
   */
  <span class="keyword">def</span> <a title="(template: String, params: Any*)Int" id="45648">update</a><span class="delimiter">(</span><a title="String" id="56798">template</a>: <span title="String">String</span>, <a title="Any*" id="56799">params</a>: <span title="Any*">Any</span>*<span class="delimiter">)</span>: <span title="Int">Int</span> = <span class="delimiter">{</span>
    <a href="#45628" title="(template: String)Unit">ensureNotReadOnlySession</a><span class="delimiter">(</span><a href="#56798" title="String">template</a><span class="delimiter">)</span>
    <a href="package.scala.html#9664" title="(resource: scalikejdbc.StatementExecutor)(f: scalikejdbc.StatementExecutor =&gt; Int)Int">using</a><span class="delimiter">(</span><a href="#45626" title="(conn: java.sql.Connection, template: String, params: Seq[Any], returnGeneratedKeys: Boolean)scalikejdbc.StatementExecutor">createStatementExecutor</a><span class="delimiter">(</span><a href="#45622" title="=&gt; java.sql.Connection">conn</a>, <a href="#56798" title="String">template</a>, <a href="#56799" title="Any*">params</a><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">{</span>
      <a title="scalikejdbc.StatementExecutor" id="56811">executor</a> =&gt;
        <a href="#56811" title="scalikejdbc.StatementExecutor">executor</a>.<a href="StatementExecutor.scala.html#56098" title="()Int">executeUpdate</a><span class="delimiter">(</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  /**
   * Executes [[java.sql.PreparedStatement#executeUpdate()]].
   *
   * @param before before filter
   * @param after after filter
   * @param template SQL template
   * @param params parameters
   * @return  result count
   */
  <span class="keyword">def</span> <a title="(before: java.sql.PreparedStatement =&gt; Unit, after: java.sql.PreparedStatement =&gt; Unit, template: String, params: Any*)Int" id="45649">updateWithFilters</a><span class="delimiter">(</span><a title="java.sql.PreparedStatement =&gt; Unit" id="56828">before</a>: <span class="delimiter">(</span>PreparedStatement<span class="delimiter">)</span> =&gt; Unit,
    <a title="java.sql.PreparedStatement =&gt; Unit" id="56829">after</a>: <span class="delimiter">(</span>PreparedStatement<span class="delimiter">)</span> =&gt; Unit,
    <a title="String" id="56830">template</a>: <span title="String">String</span>,
    <a title="Any*" id="56831">params</a>: <span title="Any*">Any</span>*<span class="delimiter">)</span>: <span title="Int">Int</span> = <a href="#45650" title="(returnGeneratedKeys: Boolean, before: java.sql.PreparedStatement =&gt; Unit, after: java.sql.PreparedStatement =&gt; Unit, template: String, params: Any*)Int">updateWithFilters</a><span class="delimiter">(</span><span title="Boolean(false)" class="keyword">false</span>, <a href="#56828" title="java.sql.PreparedStatement =&gt; Unit">before</a>, <a href="#56829" title="java.sql.PreparedStatement =&gt; Unit">after</a>, <a href="#56830" title="String">template</a>, <a href="#56831" title="Any*">params</a>: _*<span class="delimiter">)</span>

  /**
   * Executes [[java.sql.PreparedStatement#executeUpdate()]].
   *
   * @param returnGeneratedKeys is generated keys required
   * @param before before filter
   * @param after after filter
   * @param template SQL template
   * @param params parameters
   * @return  result count
   */
  <span class="keyword">def</span> <a title="(returnGeneratedKeys: Boolean, before: java.sql.PreparedStatement =&gt; Unit, after: java.sql.PreparedStatement =&gt; Unit, template: String, params: Any*)Int" id="45650">updateWithFilters</a><span class="delimiter">(</span><a title="Boolean" id="56837">returnGeneratedKeys</a>: <span title="Boolean">Boolean</span>,
    <a title="java.sql.PreparedStatement =&gt; Unit" id="56838">before</a>: <span class="delimiter">(</span>PreparedStatement<span class="delimiter">)</span> =&gt; Unit,
    <a title="java.sql.PreparedStatement =&gt; Unit" id="56839">after</a>: <span class="delimiter">(</span>PreparedStatement<span class="delimiter">)</span> =&gt; Unit,
    <a title="String" id="56840">template</a>: <span title="String">String</span>,
    <a title="Any*" id="56841">params</a>: <span title="Any*">Any</span>*<span class="delimiter">)</span>: <span title="Int">Int</span> = <span class="delimiter">{</span>
    <a href="#45628" title="(template: String)Unit">ensureNotReadOnlySession</a><span class="delimiter">(</span><a href="#56840" title="String">template</a><span class="delimiter">)</span>
    <a href="package.scala.html#9664" title="(resource: scalikejdbc.StatementExecutor)(f: scalikejdbc.StatementExecutor =&gt; Int)Int">using</a><span class="delimiter">(</span><a href="#45626" title="(conn: java.sql.Connection, template: String, params: Seq[Any], returnGeneratedKeys: Boolean)scalikejdbc.StatementExecutor">createStatementExecutor</a><span class="delimiter">(</span>
      conn = <a href="#45622" title="=&gt; java.sql.Connection">conn</a>,
      template = <a href="#56840" title="String">template</a>,
      params = <a href="#56841" title="Any*">params</a>,
      returnGeneratedKeys = <a href="#56837" title="Boolean">returnGeneratedKeys</a><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">{</span>
      <a title="scalikejdbc.StatementExecutor" id="56855">executor</a> =&gt;
        <a href="#56838" title="(v1: java.sql.PreparedStatement)Unit">before</a><span class="delimiter">(</span><a href="#56855" title="scalikejdbc.StatementExecutor">executor</a>.<a href="StatementExecutor.scala.html#56069" title="=&gt; java.sql.PreparedStatement">underlying</a><span class="delimiter">)</span>
        <span class="keyword">val</span> <a title="Int" id="56856">count</a> = <a href="#56855" title="scalikejdbc.StatementExecutor">executor</a>.<a href="StatementExecutor.scala.html#56098" title="()Int">executeUpdate</a><span class="delimiter">(</span><span class="delimiter">)</span>
        <a href="#56839" title="(v1: java.sql.PreparedStatement)Unit">after</a><span class="delimiter">(</span><a href="#56855" title="scalikejdbc.StatementExecutor">executor</a>.<a href="StatementExecutor.scala.html#56069" title="=&gt; java.sql.PreparedStatement">underlying</a><span class="delimiter">)</span>
        <a href="#56856" title="Int">count</a>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  /**
   * Executes [[java.sql.PreparedStatement#executeUpdate()]] and returns the generated key.
   *
   * @param template SQL template
   * @param params parameters
   * @return generated key as a long value
   */
  <span class="keyword">def</span> <a title="(template: String, params: Any*)Long" id="45651">updateAndReturnGeneratedKey</a><span class="delimiter">(</span><a title="String" id="56863">template</a>: <span title="String">String</span>, <a title="Any*" id="56864">params</a>: <span title="Any*">Any</span>*<span class="delimiter">)</span>: <span title="Long">Long</span> = <a href="#45652" title="(template: String, params: Any*)(key: Any)Long">updateAndReturnSpecifiedGeneratedKey</a><span class="delimiter">(</span><a href="#56863" title="String">template</a>, <a href="#56864" title="Any*">params</a>: _*<span class="delimiter">)</span><span class="delimiter">(</span><span title="Int(1)" class="int">1</span><span class="delimiter">)</span>

  /**
   * Executes [[java.sql.PreparedStatement#executeUpdate()]] and returns the generated key.
   *
   * @param template SQL template
   * @param params parameters
   * @param key name
   * @return generated key as a long value
   */
  <span class="keyword">def</span> <a title="(template: String, params: Any*)(key: Any)Long" id="45652">updateAndReturnSpecifiedGeneratedKey</a><span class="delimiter">(</span><a title="String" id="56866">template</a>: <span title="String">String</span>, <a title="Any*" id="56867">params</a>: <span title="Any*">Any</span>*<span class="delimiter">)</span><span class="delimiter">(</span><a title="Any" id="56868">key</a>: <span title="Any">Any</span><span class="delimiter">)</span>: <span title="Long">Long</span> = <span class="delimiter">{</span>
    <span class="keyword">var</span> <a title="Boolean" id="56870">generatedKeyFound</a> = <span title="Boolean(false)" class="keyword">false</span>
    <span class="keyword">var</span> <a title="Long" id="56871">generatedKey</a>: <span title="Long">Long</span> = -<span title="Long(-1L)" class="int">1</span>
    <span class="keyword">val</span> <a title="java.sql.PreparedStatement =&gt; Unit" id="56872">before</a> = <span class="delimiter">(</span>stmt: <span title="java.sql.PreparedStatement">PreparedStatement</span><span class="delimiter">)</span> =&gt; <span title="Unit" class="delimiter">{</span><span class="delimiter">}</span>
    <span class="keyword">val</span> <a title="java.sql.PreparedStatement =&gt; Unit" id="56873">after</a> = <span class="delimiter">(</span>stmt: <span title="java.sql.PreparedStatement">PreparedStatement</span><span class="delimiter">)</span> =&gt; <span class="delimiter">{</span>
      <span class="keyword">val</span> <a title="java.sql.ResultSet" id="56878">rs</a> = <a href="#56877" title="java.sql.PreparedStatement">stmt</a>.<span title="()java.sql.ResultSet">getGeneratedKeys</span>
      <span title="Unit" class="keyword">while</span> <span class="delimiter">(</span><a href="#56878" title="java.sql.ResultSet">rs</a>.<span title="()Boolean">next</span><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span> <a href="#56879" title="()Unit" class="delimiter">{</a>
        <a href="#56870" title="Boolean">generatedKeyFound</a> = <span title="Boolean(true)" class="keyword">true</span>
        <a href="#56871" title="Long">generatedKey</a> = <a href="#56868" title="Any">key</a> <span class="keyword">match</span> <span class="delimiter">{</span>
          <span class="keyword">case</span> <a href="#98499" title="Long">name</a>: String =&gt; <a href="#56878" title="java.sql.ResultSet">rs</a>.<span title="(x$1: String)Long">getLong</span><a href="#98503" title="(x: Long)Long" class="delimiter">(</a><a href="#98500" title="String">name</a><span class="delimiter">)</span>
          <span class="keyword">case</span> <a href="#98499" title="Long">index</a>: Int =&gt; <a href="#98503" title="(x: Long)Long" class="keyword">try</a> <span class="delimiter">{</span>
            <a href="#56878" title="java.sql.ResultSet">rs</a>.<span title="(x$1: Int)Long">getLong</span><span class="delimiter">(</span><a href="#98501" title="Int">index</a><span class="delimiter">)</span>
          <span class="delimiter">}</span> <span class="keyword">catch</span> <span class="delimiter">{</span>
            <span class="keyword">case</span> <a title="Long" id="56890">e</a>: <span title="Exception">Exception</span> =&gt;
              <a href="LogSupport.scala.html#13366" title="=&gt; scalikejdbc.Log">log</a>.<a href="Log.scala.html#50173" title="(msg: =&gt; String)Unit">warn</a><span class="delimiter">(</span><span title="String(&quot;Failed to get generated key value via index &quot;)" class="string">&quot;Failed to get generated key value via index &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#98501" title="Int">index</a> <span title="(x$1: Any)String">+</span> <span title="String(&quot;. Going to retrieve it via index 1.&quot;)" class="string">&quot;. Going to retrieve it via index 1.&quot;</span><span class="delimiter">)</span>
              <a href="#56878" title="java.sql.ResultSet">rs</a>.<span title="(x$1: Int)Long">getLong</span><span class="delimiter">(</span><span title="Int(1)" class="int">1</span><span class="delimiter">)</span>
          <span class="delimiter">}</span>
          <span class="keyword">case</span> _ =&gt; <a href="#98503" title="(x: Long)Long" class="keyword">throw</a> <span title="(x$1: String)IllegalArgumentException" class="keyword">new</span> <span title="IllegalArgumentException">IllegalArgumentException</span><span class="delimiter">(</span><a href="ErrorMessage.scala.html#7594" title="scalikejdbc.ErrorMessage.type">ErrorMessage</a>.<a href="ErrorMessage.scala.html#38486" title="=&gt; String">FAILED_TO_RETRIEVE_GENERATED_KEY</a> <span title="(x$1: Any)String">+</span> <span title="String(&quot;(key:&quot;)" class="string">&quot;(key:&quot;</span> <span title="(x$1: Any)String">+</span> <a href="#56868" title="Any">key</a> <span title="(x$1: Any)String">+</span> <span title="String(&quot;)&quot;)" class="string">&quot;)&quot;</span><span class="delimiter">)</span>
        <span class="delimiter">}</span>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>
    <a href="#45650" title="(returnGeneratedKeys: Boolean, before: java.sql.PreparedStatement =&gt; Unit, after: java.sql.PreparedStatement =&gt; Unit, template: String, params: Any*)Int">updateWithFilters</a><span class="delimiter">(</span><span title="Boolean(true)" class="keyword">true</span>, <a href="#56872" title="java.sql.PreparedStatement =&gt; Unit">before</a>, <a href="#56873" title="java.sql.PreparedStatement =&gt; Unit">after</a>, <a href="#56866" title="String">template</a>, <a href="#56867" title="Any*">params</a>: _*<span class="delimiter">)</span>
    <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><span title="=&gt; Boolean">!</span><a href="#56870" title="Boolean">generatedKeyFound</a><span class="delimiter">)</span> <span class="delimiter">{</span>
      <span title="Nothing" class="keyword">throw</span> <span title="(x$1: String)IllegalStateException" class="keyword">new</span> <span title="IllegalStateException">IllegalStateException</span><span class="delimiter">(</span><a href="ErrorMessage.scala.html#7594" title="scalikejdbc.ErrorMessage.type">ErrorMessage</a>.<a href="ErrorMessage.scala.html#38486" title="=&gt; String">FAILED_TO_RETRIEVE_GENERATED_KEY</a> <span title="(x$1: Any)String">+</span> <span title="String(&quot; (template:&quot;)" class="string">&quot; (template:&quot;</span> <span title="(x$1: Any)String">+</span> <a href="#56866" title="String">template</a> <span title="(x$1: Any)String">+</span> <span title="String(&quot;)&quot;)" class="string">&quot;)&quot;</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>
    <a href="#56871" title="Long">generatedKey</a>
  <span class="delimiter">}</span>

  /**
   * Executes [[java.sql.PreparedStatement#executeBatch()]]
   * @param template SQL template
   * @param paramsList list of parameters
   * @return count list
   */
  <span class="keyword">def</span> <a title="(template: String, paramsList: Seq[Any]*)Seq[Int]" id="45653">batch</a><span class="delimiter">(</span><a title="String" id="56914">template</a>: <span title="String">String</span>, <a title="Seq[Any]*" id="56915">paramsList</a>: <span title="Seq[Any]*">Seq</span><span class="delimiter">[</span>Any<span class="delimiter">]</span>*<span class="delimiter">)</span>: <span title="Seq[Int]">Seq</span><span class="delimiter">[</span>Int<span class="delimiter">]</span> = <span class="delimiter">{</span>
    <a href="#45628" title="(template: String)Unit">ensureNotReadOnlySession</a><span class="delimiter">(</span><a href="#56914" title="String">template</a><span class="delimiter">)</span>
    <a href="package.scala.html#9664" title="(resource: scalikejdbc.StatementExecutor)(f: scalikejdbc.StatementExecutor =&gt; Seq[Int])Seq[Int]">using</a><span class="delimiter">(</span><a href="#45627" title="(conn: java.sql.Connection, template: String)scalikejdbc.StatementExecutor">createBatchStatementExecutor</a><span class="delimiter">(</span>conn = <a href="#45622" title="=&gt; java.sql.Connection">conn</a>, template = <a href="#56914" title="String">template</a><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">{</span>
      <a title="scalikejdbc.StatementExecutor" id="56927">executor</a> =&gt;
        <a href="#56915" title="Seq[Any]*">paramsList</a>.<span title="(f: Seq[Any] =&gt; Unit)Unit">foreach</span> <span class="delimiter">{</span>
          <a title="Seq[Any]" id="56944">params</a> =&gt;
            <a href="#56927" title="scalikejdbc.StatementExecutor">executor</a>.<a href="StatementExecutor.scala.html#56082" title="(params: Seq[Any])Unit">bindParams</a><span class="delimiter">(</span><a href="#56944" title="Seq[Any]">params</a><span class="delimiter">)</span>
            <a href="#56927" title="scalikejdbc.StatementExecutor">executor</a>.<a href="StatementExecutor.scala.html#56089" title="()Unit">addBatch</a><span class="delimiter">(</span><span class="delimiter">)</span>
        <span class="delimiter">}</span>
        <a href="#56927" title="scalikejdbc.StatementExecutor">executor</a>.<a href="StatementExecutor.scala.html#56095" title="()Array[Int]">executeBatch</a><span title="implicit scala.Predef.intArrayOps : (xs: Array[Int])scala.collection.mutable.ArrayOps[Int]" class="delimiter">(</span><span class="delimiter">)</span>.<span title="=&gt; Seq[Int]">toSeq</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  /**
   * Close the connection.
   */
  <span class="keyword">def</span> <a title="()Unit" id="45654">close</a><span class="delimiter">(</span><span class="delimiter">)</span>: <span title="Unit">Unit</span> = <span class="delimiter">{</span>
    <span title="(exceptions: Class[_]*)util.control.Exception.Catch[Unit]">ignoring</span><span title="(body: =&gt; Unit)Unit" class="delimiter">(</span>classOf<span title="Class[Throwable](classOf[java.lang.Throwable])" class="delimiter">[</span>Throwable<span class="delimiter">]</span><span class="delimiter">)</span> <span class="delimiter">{</span>
      <a href="#45622" title="=&gt; java.sql.Connection">conn</a>.<span title="()Unit">close</span><span class="delimiter">(</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>
    <a href="LogSupport.scala.html#13366" title="=&gt; scalikejdbc.Log">log</a>.<a href="Log.scala.html#50169" title="(msg: =&gt; String)Unit">debug</a><span class="delimiter">(</span><span title="String(&quot;A Connection is closed.&quot;)" class="string">&quot;A Connection is closed.&quot;</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

<span class="delimiter">}</span>

<span class="keyword">object</span> <a title="scalikejdbc.DBSession.type" id="7795">DBSession</a> <a href="#7796" title="scalikejdbc.DBSession.type" class="delimiter">{</a>

  <span class="keyword">def</span> <a title="(conn: java.sql.Connection, tx: Option[scalikejdbc.Tx], isReadOnly: Boolean)scalikejdbc.ActiveSession" id="52401">apply</a><span class="delimiter">(</span><a title="java.sql.Connection" id="52402">conn</a>: <span title="java.sql.Connection">Connection</span>, <a title="Option[scalikejdbc.Tx]" id="52405">tx</a>: <span title="Option[scalikejdbc.Tx]">Option</span><span class="delimiter">[</span>Tx<span class="delimiter">]</span> = <span title="None.type">None</span>, <a title="Boolean" id="52406">isReadOnly</a>: <span title="Boolean">Boolean</span> = <span title="Boolean(false)" class="keyword">false</span><span class="delimiter">)</span> = <a href="#57340" title="(conn: java.sql.Connection, tx: Option[scalikejdbc.Tx], isReadOnly: Boolean)scalikejdbc.ActiveSession">ActiveSession</a><span class="delimiter">(</span><a href="#52402" title="java.sql.Connection">conn</a>, <a href="#52405" title="Option[scalikejdbc.Tx]">tx</a>, <a href="#52406" title="Boolean">isReadOnly</a><span class="delimiter">)</span>

<span class="delimiter">}</span>

/**
 * Active session implementation of [[scalikejdbc.DBSession]].
 *
 * This class provides readOnly/autoCommit/localTx/withinTx blocks and session objects.
 *
 * {{{
 * import scalikejdbc._
 *
 * val userIdList = DB autoCommit { session: DBSession =&gt;
 *   session.list(&quot;select * from user&quot;) { rs =&gt; rs.int(&quot;id&quot;) }
 * }
 * }}}
 *
 * @param conn connection
 * @param tx transaction
 * @param isReadOnly is read only
 */
<span title="AnyRef" class="keyword">case class</span> <a title="class ActiveSession extends AnyRef with scalikejdbc.DBSession with Product with Serializable" id="57340">ActiveSession</a><a href="#57340" title="Product" class="delimiter">(</a><a title="java.sql.Connection" id="52411">conn</a>: <span title="java.sql.Connection">Connection</span>, <a title="Option[scalikejdbc.Tx]" id="57172">tx</a>: <span title="Option[scalikejdbc.Tx]">Option</span><span class="delimiter">[</span>Tx<span class="delimiter">]</span> = <span title="None.type">None</span>, <a title="Boolean" id="57173">isReadOnly</a>: <span title="Boolean">Boolean</span> = <span title="Boolean(false)" class="keyword">false</span><span class="delimiter">)</span>
    <span class="keyword">extends</span> <a href="#7794" title="scalikejdbc.DBSession">DBSession</a> <span class="delimiter">{</span>

  <a href="#57172" title="=&gt; Option[scalikejdbc.Tx]">tx</a> <span class="keyword">match</span> <span class="delimiter">{</span>
    <span class="keyword">case</span> Some<a href="#98509" title="Unit" class="delimiter">(</a><a href="#98510" title="scalikejdbc.Tx" id="57175">tx</a><span class="delimiter">)</span> <span class="keyword">if</span> <a href="#57175" title="scalikejdbc.Tx">tx</a>.<a href="Tx.scala.html#52332" title="()Boolean">isActive</a><span class="delimiter">(</span><span class="delimiter">)</span> =&gt; // nothing to do
    <span class="keyword">case</span> <a href="#98509" title="Unit">None</a> =&gt; <a href="#52411" title="=&gt; java.sql.Connection">conn</a>.<span title="(x$1: Boolean)Unit">setAutoCommit</span><a href="#98514" title="(x: Unit)Unit" class="delimiter">(</a><span title="Boolean(true)" class="keyword">true</span><span class="delimiter">)</span>
    <span class="keyword">case</span> _ =&gt; <a href="#98514" title="(x: Unit)Unit" class="keyword">throw</a> <span title="(x$1: String)IllegalStateException" class="keyword">new</span> <span title="IllegalStateException">IllegalStateException</span><span class="delimiter">(</span><a href="ErrorMessage.scala.html#7594" title="scalikejdbc.ErrorMessage.type">ErrorMessage</a>.<a href="ErrorMessage.scala.html#38480" title="=&gt; String">TRANSACTION_IS_NOT_ACTIVE</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>

<span class="delimiter">}</span>

/**
 * Represents that there is no active session.
 */
<span class="keyword">case object</span> <a href="#57239" title="scalikejdbc.NoSession.type" id="57247">NoSession</a> <span title="Product" class="keyword">extends</span> <a href="#7794" title="scalikejdbc.DBSession">DBSession</a> <span class="delimiter">{</span>

  <span class="keyword">val</span> <a title="java.sql.Connection" id="57229">conn</a>: <span title="java.sql.Connection">Connection</span> = <span title="Null(null)" class="keyword">null</span>
  <span class="keyword">val</span> <a title="Option[scalikejdbc.Tx]" id="57231">tx</a>: <span title="Option[scalikejdbc.Tx]">Option</span><span class="delimiter">[</span>Tx<span class="delimiter">]</span> = <span title="None.type">None</span>
  <span class="keyword">val</span> <a title="Boolean" id="57233">isReadOnly</a>: <span title="Boolean">Boolean</span> = <span title="Boolean(false)" class="keyword">false</span>

<span class="delimiter">}</span>

/**
 * Represents that already existing session will be used or a new session will be started.
 */
<span class="keyword">case object</span> <a href="#57259" title="scalikejdbc.AutoSession.type" id="57267">AutoSession</a> <span title="Product" class="keyword">extends</span> <a href="#7794" title="scalikejdbc.DBSession">DBSession</a> <span class="delimiter">{</span>

  <span class="keyword">val</span> <a title="java.sql.Connection" id="57249">conn</a>: <span title="java.sql.Connection">Connection</span> = <span title="Null(null)" class="keyword">null</span>
  <span class="keyword">val</span> <a title="Option[scalikejdbc.Tx]" id="57251">tx</a>: <span title="Option[scalikejdbc.Tx]">Option</span><span class="delimiter">[</span>Tx<span class="delimiter">]</span> = <span title="None.type">None</span>
  <span class="keyword">val</span> <a title="Boolean" id="57253">isReadOnly</a>: <span title="Boolean">Boolean</span> = <span title="Boolean(false)" class="keyword">false</span>

<span class="delimiter">}</span>

/**
 * Represents that already existing session will be used or a new session which is retrieved from named connection pool will be started.
 */
<span class="keyword">case class</span> <a title="class NamedAutoSession extends AnyRef with scalikejdbc.DBSession with Product with Serializable" id="57367">NamedAutoSession</a><a href="#57367" title="Product" class="delimiter">(</a><a title="Any" id="57348">name</a>: <span title="Any">Any</span><span class="delimiter">)</span> <span class="keyword">extends</span> <a href="#7794" title="scalikejdbc.DBSession">DBSession</a> <span class="delimiter">{</span>

  <span class="keyword">val</span> <a title="java.sql.Connection" id="57272">conn</a>: <span title="java.sql.Connection">Connection</span> = <span title="Null(null)" class="keyword">null</span>
  <span class="keyword">val</span> <a title="Option[scalikejdbc.Tx]" id="57274">tx</a>: <span title="Option[scalikejdbc.Tx]">Option</span><span class="delimiter">[</span>Tx<span class="delimiter">]</span> = <span title="None.type">None</span>
  <span class="keyword">val</span> <a title="Boolean" id="57276">isReadOnly</a>: <span title="Boolean">Boolean</span> = <span title="Boolean(false)" class="keyword">false</span>

<span class="delimiter">}</span>


        </pre>
    </body>
</html>