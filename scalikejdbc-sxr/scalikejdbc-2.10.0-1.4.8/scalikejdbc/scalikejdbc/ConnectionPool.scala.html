<?xml version="1.0" encoding="utf-8"?>
      <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <meta http-equiv="Expires" content="0" />
        <title>scalikejdbc/scalikejdbc/ConnectionPool.scala</title>
        <script type="text/javascript" src="../../jquery-all.js"></script>
        <script type="text/javascript" src="../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../style.css" title="Style"></link>
    </head>
    <body>
        <pre>
/*
 * Copyright 2011 Kazuhiro Sera
 *
 * Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND,
 * either express or implied. See the License for the specific language
 * governing permissions and limitations under the License.
 */
<span class="keyword">package</span> scalikejdbc

<span class="keyword">import</span> javax.sql.DataSource
<span class="keyword">import</span> java.sql.Connection

/**
 * Connection Pool
 *
 * Using Commons DBCP internally.
 *
 * @see http://commons.apache.org/dbcp/
 */
<span class="keyword">object</span> <a title="scalikejdbc.ConnectionPool.type" id="8350">ConnectionPool</a> <a href="#8351" title="scalikejdbc.ConnectionPool.type" class="keyword">extends</a> <a href="LogSupport.scala.html#7878" title="scalikejdbc.LogSupport">LogSupport</a> <span class="delimiter">{</span>

  <span class="keyword">type</span> <a title="[A, B]scala.collection.mutable.HashMap[A,B]" id="13369">MutableMap</a><span class="delimiter">[</span><a title="" id="13370">A</a>, <a title="" id="13371">B</a><span class="delimiter">]</span> = scala.collection.mutable.<span title="scala.collection.mutable.HashMap[A,B]">HashMap</span><span class="delimiter">[</span>A, B<span class="delimiter">]</span>
  <span class="keyword">type</span> <a title="scalikejdbc.ConnectionPoolSettings" id="13372">CPSettings</a> = <a href="ConnectionPoolSettings.scala.html#7551" title="scalikejdbc.ConnectionPoolSettings">ConnectionPoolSettings</a>
  <span class="keyword">type</span> <a title="scalikejdbc.ConnectionPoolFactory" id="13373">CPFactory</a> = <a href="ConnectionPoolFactory.scala.html#7464" title="scalikejdbc.ConnectionPoolFactory">ConnectionPoolFactory</a>

  <span class="keyword">val</span> <a title="Symbol" id="13374">DEFAULT_NAME</a>: <span title="Symbol">Symbol</span> = <span title="(name: String)Symbol" class="symbol">'default</span>

  <span class="keyword">private</span><span class="delimiter">[</span><span class="keyword">this</span><span class="delimiter">]</span> <span class="keyword">val</span> <a title="scala.collection.mutable.HashMap[Any,scalikejdbc.ConnectionPool]" id="13376">pools</a> = <span title="()scala.collection.mutable.HashMap[Any,scalikejdbc.ConnectionPool]" class="keyword">new</span> <span title="scala.collection.mutable.HashMap[Any,scalikejdbc.ConnectionPool]">MutableMap</span><span class="delimiter">[</span>Any, ConnectionPool<span class="delimiter">]</span><span class="delimiter">(</span><span class="delimiter">)</span>

  /**
   * Returns true when the specified Connection pool is already initialized.
   * @param name pool name
   * @return is initialized
   */
  <span class="keyword">def</span> <a title="(name: Any)Boolean" id="13377">isInitialized</a><span class="delimiter">(</span><a title="Any" id="50095">name</a>: <span title="Any">Any</span> = <a href="#13374" title="=&gt; Symbol">DEFAULT_NAME</a><span class="delimiter">)</span> = <a href="#13376" title="scala.collection.mutable.HashMap[Any,scalikejdbc.ConnectionPool]">pools</a>.<span title="(x$1: Boolean)Boolean">synchronized</span> <span class="delimiter">{</span>
    <a href="#13376" title="scala.collection.mutable.HashMap[Any,scalikejdbc.ConnectionPool]">pools</a>.<span title="(key: Any)Option[scalikejdbc.ConnectionPool]">get</span><span class="delimiter">(</span><a href="#50095" title="Any">name</a><span class="delimiter">)</span>.<span title="=&gt; Boolean">isDefined</span>
  <span class="delimiter">}</span>

  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(name: Any)Unit" id="13378">ensureInitialized</a><span class="delimiter">(</span><a title="Any" id="50109">name</a>: <span title="Any">Any</span><span class="delimiter">)</span>: <span title="Unit">Unit</span> = <span class="delimiter">{</span>
    <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><span title="=&gt; Boolean">!</span><a href="#13377" title="(name: Any)Boolean">isInitialized</a><span class="delimiter">(</span><a href="#50109" title="Any">name</a><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">{</span>
      <span class="keyword">val</span> <a title="String" id="50111">message</a> = <a href="ErrorMessage.scala.html#7594" title="scalikejdbc.ErrorMessage.type">ErrorMessage</a>.<a href="ErrorMessage.scala.html#38474" title="=&gt; String">CONNECTION_POOL_IS_NOT_YET_INITIALIZED</a> <span title="(x$1: Any)String">+</span> <span title="String(&quot;(name:&quot;)" class="string">&quot;(name:&quot;</span> <span title="(x$1: Any)String">+</span> <a href="#50109" title="Any">name</a> <span title="(x$1: Any)String">+</span> <span title="String(&quot;)&quot;)" class="string">&quot;)&quot;</span>
      <span title="Nothing" class="keyword">throw</span> <span title="(x$1: String)IllegalStateException" class="keyword">new</span> <span title="IllegalStateException">IllegalStateException</span><span class="delimiter">(</span><a href="#50111" title="String">message</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  /**
   * Returns Connection pool. If the specified Connection pool does not exist, returns null.
   *
   * @param name pool name
   * @return connection pool
   */
  <span class="keyword">def</span> <a title="(name: Any)scalikejdbc.ConnectionPool" id="13379">apply</a><span class="delimiter">(</span><a title="Any" id="50118">name</a>: <span title="Any">Any</span> = <a href="#13374" title="=&gt; Symbol">DEFAULT_NAME</a><span class="delimiter">)</span>: <a href="#8349" title="scalikejdbc.ConnectionPool">ConnectionPool</a> = <a href="#13380" title="(name: Any)scalikejdbc.ConnectionPool">get</a><span class="delimiter">(</span><a href="#50118" title="Any">name</a><span class="delimiter">)</span>

  /**
   * Returns Connection pool. If the specified Connection pool does not exist, returns null.
   *
   * @param name pool name
   * @return connection pool
   */
  <span class="keyword">def</span> <a title="(name: Any)scalikejdbc.ConnectionPool" id="13380">get</a><span class="delimiter">(</span><a title="Any" id="50121">name</a>: <span title="Any">Any</span> = <a href="#13374" title="=&gt; Symbol">DEFAULT_NAME</a><span class="delimiter">)</span>: <a href="#8349" title="scalikejdbc.ConnectionPool">ConnectionPool</a> = <a href="#13376" title="scala.collection.mutable.HashMap[Any,scalikejdbc.ConnectionPool]">pools</a>.<span title="(x$1: scalikejdbc.ConnectionPool)scalikejdbc.ConnectionPool">synchronized</span> <span class="delimiter">{</span>
    <a href="#13376" title="scala.collection.mutable.HashMap[Any,scalikejdbc.ConnectionPool]">pools</a>.<span title="(key: Any)Option[scalikejdbc.ConnectionPool]">get</span><span class="delimiter">(</span><a href="#50121" title="Any">name</a><span class="delimiter">)</span>.<span title="(implicit ev: &lt;:&lt;[Null,scalikejdbc.ConnectionPool])scalikejdbc.ConnectionPool">orNull</span>
  <span class="delimiter">}</span>

  /**
   * Register new named Connection pool.
   *
   * @param name pool name
   * @param url JDBC URL
   * @param user JDBC username
   * @param password JDBC password
   * @param settings Settings
   */
  <span class="keyword">def</span> <a title="(name: Any, url: String, user: String, password: String, settings: scalikejdbc.ConnectionPool.CPSettings)(implicit factory: scalikejdbc.ConnectionPool.CPFactory)Unit" id="13381">add</a><span class="delimiter">(</span><a title="Any" id="22669">name</a>: <span title="Any">Any</span>, <a title="String" id="22670">url</a>: <span title="String">String</span>, <a title="String" id="22671">user</a>: <span title="String">String</span>, <a title="String" id="22672">password</a>: <span title="String">String</span>,
    <a title="scalikejdbc.ConnectionPool.CPSettings" id="22673">settings</a>: <a href="ConnectionPoolSettings.scala.html#7551" title="scalikejdbc.ConnectionPool.CPSettings">CPSettings</a> = <a href="ConnectionPoolSettings.scala.html#31818" title="(initialSize: Int, maxSize: Int, validationQuery: String)scalikejdbc.ConnectionPoolSettings">ConnectionPoolSettings</a><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">(</span><span class="keyword">implicit</span> <a title="scalikejdbc.ConnectionPool.CPFactory" id="17499">factory</a>: <a href="ConnectionPoolFactory.scala.html#7464" title="scalikejdbc.ConnectionPool.CPFactory">CPFactory</a> = <a href="ConnectionPoolFactory.scala.html#7546" title="scalikejdbc.CommonsConnectionPoolFactory.type">CommonsConnectionPoolFactory</a><span class="delimiter">)</span> <span class="delimiter">{</span>
    <a href="#13376" title="scala.collection.mutable.HashMap[Any,scalikejdbc.ConnectionPool]">pools</a>.<span title="(x$1: Unit)Unit">synchronized</span> <span class="delimiter">{</span>
      <a href="#13376" title="scala.collection.mutable.HashMap[Any,scalikejdbc.ConnectionPool]">pools</a>.<span title="(key: Any)Option[scalikejdbc.ConnectionPool]">get</span><span class="delimiter">(</span><a href="#22669" title="Any">name</a><span class="delimiter">)</span>.<span title="(f: scalikejdbc.ConnectionPool =&gt; Unit)Unit">foreach</span> <span class="delimiter">{</span> <a title="scalikejdbc.ConnectionPool" id="50140">pool</a> =&gt; <a href="#50140" title="scalikejdbc.ConnectionPool">pool</a>.<a href="#49721" title="()Unit">close</a><span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">}</span>
      <a href="#13376" title="scala.collection.mutable.HashMap[Any,scalikejdbc.ConnectionPool]">pools</a>.<span title="(key: Any, value: scalikejdbc.ConnectionPool)Unit">update</span><span class="delimiter">(</span><a href="#22669" title="Any">name</a>, <a href="#17499" title="scalikejdbc.ConnectionPool.CPFactory">factory</a>.<a href="ConnectionPoolFactory.scala.html#17500" title="(url: String, user: String, password: String, settings: scalikejdbc.ConnectionPoolSettings)scalikejdbc.ConnectionPool">apply</a><span class="delimiter">(</span><a href="#22670" title="String">url</a>, <a href="#22671" title="String">user</a>, <a href="#22672" title="String">password</a>, <a href="#22673" title="scalikejdbc.ConnectionPool.CPSettings">settings</a><span class="delimiter">)</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>
    <a href="LogSupport.scala.html#13366" title="=&gt; scalikejdbc.Log">log</a>.<a href="Log.scala.html#50169" title="(msg: =&gt; String)Unit">debug</a><span class="delimiter">(</span><span title="String(&quot;Registered connection pool : &quot;)" class="string">&quot;Registered connection pool : &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#13380" title="(name: Any)scalikejdbc.ConnectionPool">get</a><span class="delimiter">(</span><a href="#22669" title="Any">name</a><span class="delimiter">)</span>.<a href="#49720" title="()String">toString</a><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  /**
   * Register the default Connection pool.
   *
   * @param url JDBC URL
   * @param user JDBC username
   * @param password JDBC password
   * @param settings Settings
   */
  <span class="keyword">def</span> <a title="(url: String, user: String, password: String, settings: scalikejdbc.ConnectionPool.CPSettings)(implicit factory: scalikejdbc.ConnectionPool.CPFactory)Unit" id="13382">singleton</a><span class="delimiter">(</span><a title="String" id="43408">url</a>: <span title="String">String</span>, <a title="String" id="43409">user</a>: <span title="String">String</span>, <a title="String" id="43410">password</a>: <span title="String">String</span>,
    <a title="scalikejdbc.ConnectionPool.CPSettings" id="43411">settings</a>: <a href="ConnectionPoolSettings.scala.html#7551" title="scalikejdbc.ConnectionPool.CPSettings">CPSettings</a> = <a href="ConnectionPoolSettings.scala.html#31818" title="(initialSize: Int, maxSize: Int, validationQuery: String)scalikejdbc.ConnectionPoolSettings">ConnectionPoolSettings</a><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">(</span><span class="keyword">implicit</span> <a title="scalikejdbc.ConnectionPool.CPFactory" id="43398">factory</a>: <a href="ConnectionPoolFactory.scala.html#7464" title="scalikejdbc.ConnectionPool.CPFactory">CPFactory</a> = <a href="ConnectionPoolFactory.scala.html#7546" title="scalikejdbc.CommonsConnectionPoolFactory.type">CommonsConnectionPoolFactory</a><span class="delimiter">)</span>: <span title="Unit">Unit</span> = <span class="delimiter">{</span>
    <a href="#13381" title="(name: Any, url: String, user: String, password: String, settings: scalikejdbc.ConnectionPool.CPSettings)(implicit factory: scalikejdbc.ConnectionPool.CPFactory)Unit">add</a><span class="delimiter">(</span><a href="#13374" title="=&gt; Symbol">DEFAULT_NAME</a>, <a href="#43408" title="String">url</a>, <a href="#43409" title="String">user</a>, <a href="#43410" title="String">password</a>, <a href="#43411" title="scalikejdbc.ConnectionPool.CPSettings">settings</a><span class="delimiter">)</span><span class="delimiter">(</span><a href="#43398" title="scalikejdbc.ConnectionPool.CPFactory">factory</a><span class="delimiter">)</span>
    <a href="LogSupport.scala.html#13366" title="=&gt; scalikejdbc.Log">log</a>.<a href="Log.scala.html#50169" title="(msg: =&gt; String)Unit">debug</a><span class="delimiter">(</span><span title="String(&quot;Registered singleton connection pool : &quot;)" class="string">&quot;Registered singleton connection pool : &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#13380" title="(name: Any)scalikejdbc.ConnectionPool">get</a><span class="delimiter">(</span><span class="delimiter">)</span>.<a href="#49720" title="()String">toString</a><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  /**
   * Returns [[javax.sql.DataSource]].
   * @param name pool name
   * @return datasource
   */
  <span class="keyword">def</span> <a title="(name: Any)javax.sql.DataSource" id="13383">dataSource</a><span class="delimiter">(</span><a title="Any" id="50513">name</a>: <span title="Any">Any</span> = <a href="#13374" title="=&gt; Symbol">DEFAULT_NAME</a><span class="delimiter">)</span>: <span title="javax.sql.DataSource">DataSource</span> = <span class="delimiter">{</span>
    <a href="#13378" title="(name: Any)Unit">ensureInitialized</a><span class="delimiter">(</span><a href="#50513" title="Any">name</a><span class="delimiter">)</span>
    <a href="#13380" title="(name: Any)scalikejdbc.ConnectionPool">get</a><span class="delimiter">(</span><a href="#50513" title="Any">name</a><span class="delimiter">)</span>.<a href="#49715" title="=&gt; javax.sql.DataSource">dataSource</a>
  <span class="delimiter">}</span>

  /**
   * Borrows a [[java.sql.Connection]] from the specified connection pool.
   * @param name pool name
   * @return connection
   */
  <span class="keyword">def</span> <a title="(name: Any)java.sql.Connection" id="13384">borrow</a><span class="delimiter">(</span><a title="Any" id="46422">name</a>: <span title="Any">Any</span> = <a href="#13374" title="=&gt; Symbol">DEFAULT_NAME</a><span class="delimiter">)</span>: <span title="java.sql.Connection">Connection</span> = <span class="delimiter">{</span>
    <a href="#13378" title="(name: Any)Unit">ensureInitialized</a><span class="delimiter">(</span><a href="#46422" title="Any">name</a><span class="delimiter">)</span>
    <span class="keyword">val</span> <a title="scalikejdbc.ConnectionPool" id="50514">pool</a> = <a href="#13380" title="(name: Any)scalikejdbc.ConnectionPool">get</a><span class="delimiter">(</span><a href="#46422" title="Any">name</a><span class="delimiter">)</span>
    <a href="LogSupport.scala.html#13366" title="=&gt; scalikejdbc.Log">log</a>.<a href="Log.scala.html#50169" title="(msg: =&gt; String)Unit">debug</a><span class="delimiter">(</span><span title="String(&quot;Borrowed a new connection from &quot;)" class="string">&quot;Borrowed a new connection from &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#50514" title="scalikejdbc.ConnectionPool">pool</a>.<a href="#49720" title="()String">toString</a><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span>
    <a href="#50514" title="scalikejdbc.ConnectionPool">pool</a>.<a href="#49714" title="()java.sql.Connection">borrow</a><span class="delimiter">(</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  /**
   * Close a pool by name
   * @param name pool name
   */
  <span class="keyword">def</span> <a title="(name: Any)Unit" id="13385">close</a><span class="delimiter">(</span><a title="Any" id="25994">name</a>: <span title="Any">Any</span> = <a href="#13374" title="=&gt; Symbol">DEFAULT_NAME</a><span class="delimiter">)</span>: <span title="Unit">Unit</span> = <span class="delimiter">{</span>
    <a href="#13376" title="scala.collection.mutable.HashMap[Any,scalikejdbc.ConnectionPool]">pools</a>.<span title="(x$1: Unit)Unit">synchronized</span> <span class="delimiter">{</span>
      <span class="keyword">val</span> <a title="Option[scalikejdbc.ConnectionPool]" id="50519">removed</a> = <a href="#13376" title="scala.collection.mutable.HashMap[Any,scalikejdbc.ConnectionPool]">pools</a>.<span title="(key: Any)Option[scalikejdbc.ConnectionPool]">remove</span><span class="delimiter">(</span><a href="#25994" title="Any">name</a><span class="delimiter">)</span>
      <a href="#50519" title="Option[scalikejdbc.ConnectionPool]">removed</a>.<span title="(f: scalikejdbc.ConnectionPool =&gt; Unit)Unit">foreach</span> <span class="delimiter">{</span> <a title="scalikejdbc.ConnectionPool" id="50526">pool</a> =&gt; <a href="#50526" title="scalikejdbc.ConnectionPool">pool</a>.<a href="#49721" title="()Unit">close</a><span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">}</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  /**
   * Close all connection pools
   */
  <span class="keyword">def</span> <a title="()Unit" id="13386">closeAll</a><span class="delimiter">(</span><span class="delimiter">)</span>: <span title="Unit">Unit</span> = <span class="delimiter">{</span>
    <a href="#13376" title="scala.collection.mutable.HashMap[Any,scalikejdbc.ConnectionPool]">pools</a>.<span title="(x$1: Unit)Unit">synchronized</span> <span class="delimiter">{</span>
      <a href="#13376" title="scala.collection.mutable.HashMap[Any,scalikejdbc.ConnectionPool]">pools</a>.<span title="(f: ((Any, scalikejdbc.ConnectionPool)) =&gt; Unit)Unit">foreach</span> <a href="#50566" title="(Any, scalikejdbc.ConnectionPool)" class="delimiter">{</a>
        <span class="keyword">case</span> <span class="delimiter">(</span><a href="#98358" title="Any" id="50569">name</a>, pool<span class="delimiter">)</span> =&gt;
          <a href="#13385" title="(name: Any)Unit">close</a><a href="#98360" title="(x: Unit)Unit" class="delimiter">(</a><a href="#50569" title="Any">name</a><span class="delimiter">)</span>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

<span class="delimiter">}</span>

/**
 * Connection Pool
 */
<span class="keyword">abstract</span> <span class="keyword">class</span> <a title="class ConnectionPool extends AnyRef" id="8349">ConnectionPool</a><a href="#8349" title="scalikejdbc.ConnectionPool" class="delimiter">(</a><a title="String" id="49722">url</a>: <span title="String">String</span>,
    <a title="String" id="49723">user</a>: <span title="String">String</span>,
    <a title="String" id="49724">password</a>: <span title="String">String</span>,
    <a title="=&gt; scalikejdbc.ConnectionPoolSettings" id="49725">settings</a>: <a href="ConnectionPoolSettings.scala.html#7551" title="scalikejdbc.ConnectionPoolSettings">ConnectionPoolSettings</a> = <a href="ConnectionPoolSettings.scala.html#31818" title="(initialSize: Int, maxSize: Int, validationQuery: String)scalikejdbc.ConnectionPoolSettings">ConnectionPoolSettings</a><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">{</span>

  /**
   * Borrows [[java.sql.Connection]] from pool.
   * @return connection
   */
  <span class="keyword">def</span> <a title="()java.sql.Connection" id="49714">borrow</a><span class="delimiter">(</span><span class="delimiter">)</span>: <span title="java.sql.Connection">Connection</span>

  /**
   * Returns [[javax.sql.DataSource]] object.
   * @return datasource
   */
  <span class="keyword">def</span> <a title="=&gt; javax.sql.DataSource" id="49715">dataSource</a>: <span title="javax.sql.DataSource">DataSource</span>

  /**
   * Returns num of active connections.
   * @return num
   */
  <span class="keyword">def</span> <a title="=&gt; Int" id="49716">numActive</a>: <span title="Int">Int</span> = <span title="Nothing" class="keyword">throw</span> <span title="UnsupportedOperationException" class="keyword">new</span> <span title="UnsupportedOperationException">UnsupportedOperationException</span>

  /**
   * Returns num of idle connections.
   * @return num
   */
  <span class="keyword">def</span> <a title="=&gt; Int" id="49717">numIdle</a>: <span title="Int">Int</span> = <span title="Nothing" class="keyword">throw</span> <span title="UnsupportedOperationException" class="keyword">new</span> <span title="UnsupportedOperationException">UnsupportedOperationException</span>

  /**
   * Returns max limit of active connections.
   * @return num
   */
  <span class="keyword">def</span> <a title="=&gt; Int" id="49718">maxActive</a>: <span title="Int">Int</span> = <span title="Nothing" class="keyword">throw</span> <span title="UnsupportedOperationException" class="keyword">new</span> <span title="UnsupportedOperationException">UnsupportedOperationException</span>

  /**
   * Returns max limit of idle connections.
   * @return num
   */
  <span class="keyword">def</span> <a title="=&gt; Int" id="49719">maxIdle</a>: <span title="Int">Int</span> = <span title="Nothing" class="keyword">throw</span> <span title="UnsupportedOperationException" class="keyword">new</span> <span title="UnsupportedOperationException">UnsupportedOperationException</span>

  /**
   * Returns self as a String value.
   * @return printable String value
   */
  <span class="keyword">override</span> <span class="keyword">def</span> <a title="()String" id="49720">toString</a><span class="delimiter">(</span><span class="delimiter">)</span> = <span title="String(&quot;ConnectionPool(url:&quot;)" class="string">&quot;ConnectionPool(url:&quot;</span> <span title="(x$1: Any)String">+</span> <a href="#49722" title="String">url</a> <span title="(x$1: Any)String">+</span> <span title="String(&quot;, user:&quot;)" class="string">&quot;, user:&quot;</span> <span title="(x$1: Any)String">+</span> <a href="#49723" title="String">user</a> <span title="(x$1: Any)String">+</span> <span title="String(&quot;)&quot;)" class="string">&quot;)&quot;</span>

  /**
   * Close this connection pool.
   */
  <span class="keyword">def</span> <a title="()Unit" id="49721">close</a><span class="delimiter">(</span><span class="delimiter">)</span>: <span title="Unit">Unit</span> = <span title="Nothing" class="keyword">throw</span> <span title="UnsupportedOperationException" class="keyword">new</span> <span title="UnsupportedOperationException">UnsupportedOperationException</span>

<span class="delimiter">}</span>

/**
 * Commons DBCP Connection Pool
 *
 * @see http://commons.apache.org/dbcp/
 */
<span title="AnyRef" class="keyword">class</span> <a title="class CommonsConnectionPool extends scalikejdbc.ConnectionPool" id="7345">CommonsConnectionPool</a><a href="#7345" title="scalikejdbc.CommonsConnectionPool" class="delimiter">(</a><a title="String" id="50636">url</a>: <span title="String">String</span>,
  <a title="String" id="50637">user</a>: <span title="String">String</span>,
  <a title="String" id="50638">password</a>: <span title="String">String</span>,
  <a title="scalikejdbc.ConnectionPoolSettings" id="50641">settings</a>: <a href="ConnectionPoolSettings.scala.html#7551" title="scalikejdbc.ConnectionPoolSettings">ConnectionPoolSettings</a> = <a href="ConnectionPoolSettings.scala.html#31818" title="(initialSize: Int, maxSize: Int, validationQuery: String)scalikejdbc.ConnectionPoolSettings">ConnectionPoolSettings</a><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span>
    <span class="keyword">extends</span> <a href="#8349" title="scalikejdbc.ConnectionPool">ConnectionPool</a><span class="delimiter">(</span><a href="#50636" title="String">url</a>, <a href="#50637" title="String">user</a>, <a href="#50638" title="String">password</a>, <a href="#50641" title="scalikejdbc.ConnectionPoolSettings">settings</a><span class="delimiter">)</span> <span class="delimiter">{</span>

  <span class="keyword">import</span> org.apache.commons.pool.impl.GenericObjectPool
  <span class="keyword">import</span> org.apache.commons.dbcp.<span class="delimiter">{</span> PoolingDataSource, PoolableConnectionFactory, DriverManagerConnectionFactory <span class="delimiter">}</span>

  <span class="keyword">private</span><span class="delimiter">[</span><span class="keyword">this</span><span class="delimiter">]</span> <span class="keyword">val</span> <a title="org.apache.commons.pool.impl.GenericObjectPool" id="50622">_pool</a> = <span title="(x$1: org.apache.commons.pool.PoolableObjectFactory)org.apache.commons.pool.impl.GenericObjectPool" class="keyword">new</span> <span title="org.apache.commons.pool.impl.GenericObjectPool">GenericObjectPool</span><span class="delimiter">(</span><span title="Null(null)" class="keyword">null</span><span class="delimiter">)</span>
  <a href="#50622" title="org.apache.commons.pool.impl.GenericObjectPool">_pool</a>.<span title="(x$1: Int)Unit">setMinIdle</span><span class="delimiter">(</span><a href="#50641" title="scalikejdbc.ConnectionPoolSettings">settings</a>.<a href="ConnectionPoolSettings.scala.html#15386" title="=&gt; Int">initialSize</a><span class="delimiter">)</span>
  <a href="#50622" title="org.apache.commons.pool.impl.GenericObjectPool">_pool</a>.<span title="(x$1: Int)Unit">setMaxIdle</span><span class="delimiter">(</span><a href="#50641" title="scalikejdbc.ConnectionPoolSettings">settings</a>.<a href="ConnectionPoolSettings.scala.html#15388" title="=&gt; Int">maxSize</a><span class="delimiter">)</span>
  <a href="#50622" title="org.apache.commons.pool.impl.GenericObjectPool">_pool</a>.<span title="(x$1: Int)Unit">setMaxActive</span><span class="delimiter">(</span><a href="#50641" title="scalikejdbc.ConnectionPoolSettings">settings</a>.<a href="ConnectionPoolSettings.scala.html#15388" title="=&gt; Int">maxSize</a><span class="delimiter">)</span>
  <a href="#50622" title="org.apache.commons.pool.impl.GenericObjectPool">_pool</a>.<span title="(x$1: Long)Unit">setMaxWait</span><span class="delimiter">(</span><span title="Long(5000L)" class="int">5000</span><span class="delimiter">)</span>
  <a href="#50622" title="org.apache.commons.pool.impl.GenericObjectPool">_pool</a>.<span title="(x$1: Byte)Unit">setWhenExhaustedAction</span><span class="delimiter">(</span>GenericObjectPool.<span title="Byte(0)">WHEN_EXHAUSTED_FAIL</span><span class="delimiter">)</span>
  <a href="#50622" title="org.apache.commons.pool.impl.GenericObjectPool">_pool</a>.<span title="(x$1: Boolean)Unit">setTestOnBorrow</span><span class="delimiter">(</span><span title="Boolean(true)" class="keyword">true</span><span class="delimiter">)</span>

  // Initialize Connection Factory
  // (not read-only, auto-commit)
  <span title="org.apache.commons.dbcp.PoolableConnectionFactory" class="keyword">new</span> <span title="org.apache.commons.dbcp.PoolableConnectionFactory">PoolableConnectionFactory</span><span class="delimiter">(</span>
    <span title="(x$1: String, x$2: String, x$3: String)org.apache.commons.dbcp.DriverManagerConnectionFactory" class="keyword">new</span> <span title="org.apache.commons.dbcp.DriverManagerConnectionFactory">DriverManagerConnectionFactory</span><span class="delimiter">(</span><a href="#50636" title="String">url</a>, <a href="#50637" title="String">user</a>, <a href="#50638" title="String">password</a><span class="delimiter">)</span>,
    <a href="#50622" title="org.apache.commons.pool.impl.GenericObjectPool">_pool</a>,
    <span title="Null(null)" class="keyword">null</span>,
    <a href="#50641" title="scalikejdbc.ConnectionPoolSettings">settings</a>.<a href="ConnectionPoolSettings.scala.html#15390" title="=&gt; String">validationQuery</a>,
    <span title="Boolean(false)" class="keyword">false</span>,
    <span title="Boolean(true)" class="keyword">true</span><span class="delimiter">)</span>

  <span class="keyword">private</span><span class="delimiter">[</span><span class="keyword">this</span><span class="delimiter">]</span> <span class="keyword">val</span> <a title="javax.sql.DataSource" id="50623">_dataSource</a>: <span title="javax.sql.DataSource">DataSource</span> = <span title="(x$1: org.apache.commons.pool.ObjectPool)org.apache.commons.dbcp.PoolingDataSource" class="keyword">new</span> <span title="org.apache.commons.dbcp.PoolingDataSource">PoolingDataSource</span><span class="delimiter">(</span><a href="#50622" title="org.apache.commons.pool.impl.GenericObjectPool">_pool</a><span class="delimiter">)</span>

  <span class="keyword">override</span> <span class="keyword">def</span> <a title="=&gt; javax.sql.DataSource" id="50624">dataSource</a>: <span title="javax.sql.DataSource">DataSource</span> = <a href="#50623" title="javax.sql.DataSource">_dataSource</a>

  <span class="keyword">override</span> <span class="keyword">def</span> <a title="()java.sql.Connection" id="50625">borrow</a><span class="delimiter">(</span><span class="delimiter">)</span>: <span title="java.sql.Connection">Connection</span> = <a href="#50624" title="=&gt; javax.sql.DataSource">dataSource</a>.<span title="()java.sql.Connection">getConnection</span><span class="delimiter">(</span><span class="delimiter">)</span>

  <span class="keyword">override</span> <span class="keyword">def</span> <a title="=&gt; Int" id="50626">numActive</a>: <span title="Int">Int</span> = <a href="#50622" title="org.apache.commons.pool.impl.GenericObjectPool">_pool</a>.<span title="()Int">getNumActive</span>

  <span class="keyword">override</span> <span class="keyword">def</span> <a title="=&gt; Int" id="50627">numIdle</a>: <span title="Int">Int</span> = <a href="#50622" title="org.apache.commons.pool.impl.GenericObjectPool">_pool</a>.<span title="()Int">getNumIdle</span>

  <span class="keyword">override</span> <span class="keyword">def</span> <a title="=&gt; Int" id="50628">maxActive</a>: <span title="Int">Int</span> = <a href="#50622" title="org.apache.commons.pool.impl.GenericObjectPool">_pool</a>.<span title="()Int">getMaxActive</span>

  <span class="keyword">override</span> <span class="keyword">def</span> <a title="=&gt; Int" id="50629">maxIdle</a>: <span title="Int">Int</span> = <a href="#50622" title="org.apache.commons.pool.impl.GenericObjectPool">_pool</a>.<span title="()Int">getMaxIdle</span>

  <span class="keyword">override</span> <span class="keyword">def</span> <a title="()Unit" id="50630">close</a><span class="delimiter">(</span><span class="delimiter">)</span>: <span title="Unit">Unit</span> = <a href="#50622" title="org.apache.commons.pool.impl.GenericObjectPool">_pool</a>.<span title="()Unit">close</span><span class="delimiter">(</span><span class="delimiter">)</span>

<span class="delimiter">}</span>


        </pre>
    </body>
</html>