<?xml version="1.0" encoding="utf-8"?>
      <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <meta http-equiv="Expires" content="0" />
        <title>scalikejdbc/scalikejdbc/NamedDB.scala</title>
        <script type="text/javascript" src="../../jquery-all.js"></script>
        <script type="text/javascript" src="../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../style.css" title="Style"></link>
    </head>
    <body>
        <pre>
/*
 * Copyright 2012 Kazuhiro Sera
 *
 * Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND,
 * either express or implied. See the License for the specific language
 * governing permissions and limitations under the License.
 */
<span class="keyword">package</span> scalikejdbc

<span class="keyword">import</span> java.sql.Connection
<span class="keyword">import</span> scalikejdbc.metadata.Table

/**
 * Named Basic DB Accessor
 *
 * It's easier to use named ConnectionPool with this class.
 *
 * {{{
 * ConnectionPool.add('named, &quot;jdbc:...&quot;, &quot;user&quot;, &quot;password&quot;)
 * val users = NamedDB('named) readOnly { session =&gt;
 *   session.list(&quot;select * from user&quot;)
 * }
 * }}}
 */
<span class="keyword">case class</span> <a title="class NamedDB extends AnyRef with Product with Serializable" id="58077">NamedDB</a><a href="#58077" title="Product" class="delimiter">(</a><a title="Any" id="58075">name</a>: <span title="Any">Any</span><span class="delimiter">)</span><span class="delimiter">(</span><span class="keyword">implicit</span> <a title="scalikejdbc.ConnectionPoolContext" id="58056">context</a>: <a href="ConnectionPoolContext.scala.html#8361" title="scalikejdbc.ConnectionPoolContext">ConnectionPoolContext</a> = <a href="ConnectionPoolContext.scala.html#7858" title="scalikejdbc.NoConnectionPoolContext.type">NoConnectionPoolContext</a><span class="delimiter">)</span> <span class="delimiter">{</span>

  <span class="keyword">private</span><span class="delimiter">[</span><span class="keyword">this</span><span class="delimiter">]</span> <span class="keyword">def</span> <a title="()scalikejdbc.ConnectionPool" id="57769">connectionPool</a><span class="delimiter">(</span><span class="delimiter">)</span>: <a href="ConnectionPool.scala.html#8340" title="scalikejdbc.ConnectionPool">ConnectionPool</a> = <a href="package.scala.html#9633" title="(v: Any)Option[Nothing]">opt</a><span class="delimiter">(</span><a href="#58056" title="scalikejdbc.ConnectionPoolContext">context</a> <span class="keyword">match</span> <span class="delimiter">{</span>
    <span class="keyword">case</span> <a href="ConnectionPoolContext.scala.html#7858" title="Any">NoConnectionPoolContext</a> =&gt; <a href="ConnectionPool.scala.html#13334" title="(name: Any)scalikejdbc.ConnectionPool">ConnectionPool</a><a href="#98703" title="(x: Any)Any" class="delimiter">(</a><a href="#58075" title="=&gt; Any">name</a><span class="delimiter">)</span>
    <span class="keyword">case</span> _: MultipleConnectionPoolContext =&gt; <a href="#58056" title="scalikejdbc.ConnectionPoolContext">context</a>.<a href="ConnectionPoolContext.scala.html#33438" title="(name: Any)scalikejdbc.ConnectionPool">get</a><a href="#98703" title="(x: Any)Any" class="delimiter">(</a><a href="#58075" title="=&gt; Any">name</a><span class="delimiter">)</span>
    <span class="keyword">case</span> _ =&gt; <a href="#98703" title="(x: Any)Any" class="keyword">throw</a> <span title="(x$1: String)IllegalStateException" class="keyword">new</span> <span title="IllegalStateException">IllegalStateException</span><span class="delimiter">(</span><a href="ErrorMessage.scala.html#7594" title="scalikejdbc.ErrorMessage.type">ErrorMessage</a>.<a href="ErrorMessage.scala.html#38140" title="=&gt; String">UNKNOWN_CONNECTION_POOL_CONTEXT</a><span class="delimiter">)</span>
  <span class="delimiter">}</span><span class="delimiter">)</span> <span title="(default: =&gt; Nothing)Nothing">getOrElse</span> <span class="delimiter">{</span>
    <span title="Nothing" class="keyword">throw</span> <span title="(x$1: String)IllegalStateException" class="keyword">new</span> <span title="IllegalStateException">IllegalStateException</span><span class="delimiter">(</span><a href="ErrorMessage.scala.html#7594" title="scalikejdbc.ErrorMessage.type">ErrorMessage</a>.<a href="ErrorMessage.scala.html#38120" title="=&gt; String">CONNECTION_POOL_IS_NOT_YET_INITIALIZED</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">private</span> <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="scalikejdbc.DB" id="57770">db</a>: <a href="DB.scala.html#7869" title="scalikejdbc.DB">DB</a> = <a href="DB.scala.html#33128" title="(conn: java.sql.Connection)scalikejdbc.DB">DB</a><span class="delimiter">(</span><a href="#57769" title="()scalikejdbc.ConnectionPool">connectionPool</a><span class="delimiter">(</span><span class="delimiter">)</span>.<a href="ConnectionPool.scala.html#49371" title="()java.sql.Connection">borrow</a><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span>

  <span class="keyword">def</span> <a title="()scalikejdbc.DB" id="57772">toDB</a><span class="delimiter">(</span><span class="delimiter">)</span>: <a href="DB.scala.html#7869" title="scalikejdbc.DB">DB</a> = <a href="#57770" title="=&gt; scalikejdbc.DB">db</a>

  <span class="keyword">def</span> <a title="=&gt; Boolean" id="57773">isTxNotActive</a> = <a href="#57770" title="=&gt; scalikejdbc.DB">db</a>.<a href="DB.scala.html#45288" title="=&gt; Boolean">isTxNotActive</a>

  <span class="keyword">def</span> <a title="=&gt; Boolean" id="57774">isTxNotYetStarted</a> = <a href="#57770" title="=&gt; scalikejdbc.DB">db</a>.<a href="DB.scala.html#45289" title="=&gt; Boolean">isTxNotYetStarted</a>

  <span class="keyword">def</span> <a title="=&gt; Boolean" id="57775">isTxAlreadyStarted</a> = <a href="#57770" title="=&gt; scalikejdbc.DB">db</a>.<a href="DB.scala.html#45290" title="=&gt; Boolean">isTxAlreadyStarted</a>

  <span class="keyword">def</span> <a title="=&gt; scalikejdbc.Tx" id="57776">newTx</a>: <a href="Tx.scala.html#7779" title="scalikejdbc.Tx">Tx</a> = <a href="#57770" title="=&gt; scalikejdbc.DB">db</a>.<a href="DB.scala.html#45292" title="=&gt; scalikejdbc.Tx">newTx</a>

  <span class="keyword">def</span> <a title="=&gt; scalikejdbc.Tx" id="57777">currentTx</a>: <a href="Tx.scala.html#7779" title="scalikejdbc.Tx">Tx</a> = <a href="#57770" title="=&gt; scalikejdbc.DB">db</a>.<a href="DB.scala.html#45293" title="=&gt; scalikejdbc.Tx">currentTx</a>

  <span class="keyword">def</span> <a title="=&gt; scalikejdbc.Tx" id="57778">tx</a>: <a href="Tx.scala.html#7779" title="scalikejdbc.Tx">Tx</a> = <a href="#57770" title="=&gt; scalikejdbc.DB">db</a>.<a href="DB.scala.html#45294" title="=&gt; scalikejdbc.Tx">tx</a>

  <span class="keyword">def</span> <a title="()Unit" id="57779">close</a><span class="delimiter">(</span><span class="delimiter">)</span> = <a href="#57770" title="=&gt; scalikejdbc.DB">db</a>.<a href="DB.scala.html#45295" title="()Unit">close</a><span class="delimiter">(</span><span class="delimiter">)</span>

  <span class="keyword">def</span> <a title="()Unit" id="57780">begin</a><span class="delimiter">(</span><span class="delimiter">)</span> = <a href="#57770" title="=&gt; scalikejdbc.DB">db</a>.<a href="DB.scala.html#45296" title="()Unit">begin</a><span class="delimiter">(</span><span class="delimiter">)</span>

  <span class="keyword">def</span> <a title="()Unit" id="57781">beginIfNotYet</a><span class="delimiter">(</span><span class="delimiter">)</span>: <span title="Unit">Unit</span> = <a href="#57770" title="=&gt; scalikejdbc.DB">db</a>.<a href="DB.scala.html#45297" title="()Unit">beginIfNotYet</a><span class="delimiter">(</span><span class="delimiter">)</span>

  <span class="keyword">def</span> <a title="()Unit" id="57782">commit</a><span class="delimiter">(</span><span class="delimiter">)</span>: <span title="Unit">Unit</span> = <a href="#57770" title="=&gt; scalikejdbc.DB">db</a>.<a href="DB.scala.html#45298" title="()Unit">commit</a><span class="delimiter">(</span><span class="delimiter">)</span>

  <span class="keyword">def</span> <a title="()Unit" id="57783">rollback</a><span class="delimiter">(</span><span class="delimiter">)</span>: <span title="Unit">Unit</span> = <a href="#57770" title="=&gt; scalikejdbc.DB">db</a>.<a href="DB.scala.html#45299" title="()Unit">rollback</a><span class="delimiter">(</span><span class="delimiter">)</span>

  <span class="keyword">def</span> <a title="()Unit" id="57784">rollbackIfActive</a><span class="delimiter">(</span><span class="delimiter">)</span>: <span title="Unit">Unit</span> = <a href="#57770" title="=&gt; scalikejdbc.DB">db</a>.<a href="DB.scala.html#45300" title="()Unit">rollbackIfActive</a><span class="delimiter">(</span><span class="delimiter">)</span>

  <span class="keyword">def</span> <a title="()scalikejdbc.DBSession" id="57785">readOnlySession</a><span class="delimiter">(</span><span class="delimiter">)</span>: <a href="DBSession.scala.html#7794" title="scalikejdbc.DBSession">DBSession</a> = <a href="#57770" title="=&gt; scalikejdbc.DB">db</a>.<a href="DB.scala.html#45301" title="()scalikejdbc.DBSession">readOnlySession</a><span class="delimiter">(</span><span class="delimiter">)</span>

  <span class="keyword">def</span> <a title="[A](execution: scalikejdbc.DBSession =&gt; A)A" id="57786">readOnly</a><span class="delimiter">[</span><a title="" id="57788">A</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="scalikejdbc.DBSession =&gt; A" id="57877">execution</a>: DBSession =&gt; A<span class="delimiter">)</span>: <a href="#57788" title="A">A</a> = <a href="#57770" title="=&gt; scalikejdbc.DB">db</a>.<a href="DB.scala.html#45302" title="(execution: scalikejdbc.DBSession =&gt; A)A">readOnly</a><span class="delimiter">(</span><a href="#57877" title="scalikejdbc.DBSession =&gt; A">execution</a><span class="delimiter">)</span>

  <span class="keyword">def</span> <a title="[A](execution: java.sql.Connection =&gt; A)A" id="57789">readOnlyWithConnection</a><span class="delimiter">[</span><a title="" id="57791">A</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="java.sql.Connection =&gt; A" id="57883">execution</a>: Connection =&gt; A<span class="delimiter">)</span>: <a href="#57791" title="A">A</a> = <a href="#57770" title="=&gt; scalikejdbc.DB">db</a>.<a href="DB.scala.html#45305" title="(execution: java.sql.Connection =&gt; A)A">readOnlyWithConnection</a><span class="delimiter">(</span><a href="#57883" title="java.sql.Connection =&gt; A">execution</a><span class="delimiter">)</span>

  <span class="keyword">def</span> <a title="()scalikejdbc.DBSession" id="57792">autoCommitSession</a><span class="delimiter">(</span><span class="delimiter">)</span>: <a href="DBSession.scala.html#7794" title="scalikejdbc.DBSession">DBSession</a> = <a href="#57770" title="=&gt; scalikejdbc.DB">db</a>.<a href="DB.scala.html#45308" title="()scalikejdbc.DBSession">autoCommitSession</a><span class="delimiter">(</span><span class="delimiter">)</span>

  <span class="keyword">def</span> <a title="[A](execution: scalikejdbc.DBSession =&gt; A)A" id="57793">autoCommit</a><span class="delimiter">[</span><a title="" id="57795">A</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="scalikejdbc.DBSession =&gt; A" id="57890">execution</a>: DBSession =&gt; A<span class="delimiter">)</span>: <a href="#57795" title="A">A</a> = <a href="#57770" title="=&gt; scalikejdbc.DB">db</a>.<a href="DB.scala.html#45309" title="(execution: scalikejdbc.DBSession =&gt; A)A">autoCommit</a><span class="delimiter">(</span><a href="#57890" title="scalikejdbc.DBSession =&gt; A">execution</a><span class="delimiter">)</span>

  <span class="keyword">def</span> <a title="[A](execution: java.sql.Connection =&gt; A)A" id="57796">autoCommitWithConnection</a><span class="delimiter">[</span><a title="" id="57798">A</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="java.sql.Connection =&gt; A" id="57896">execution</a>: Connection =&gt; A<span class="delimiter">)</span>: <a href="#57798" title="A">A</a> = <a href="#57770" title="=&gt; scalikejdbc.DB">db</a>.<a href="DB.scala.html#45312" title="(execution: java.sql.Connection =&gt; A)A">autoCommitWithConnection</a><span class="delimiter">(</span><a href="#57896" title="java.sql.Connection =&gt; A">execution</a><span class="delimiter">)</span>

  <span class="keyword">def</span> <a title="(tx: scalikejdbc.Tx)scalikejdbc.DBSession" id="57799">withinTxSession</a><span class="delimiter">(</span><a title="scalikejdbc.Tx" id="57904">tx</a>: <a href="Tx.scala.html#7779" title="scalikejdbc.Tx">Tx</a> = <a href="#57777" title="=&gt; scalikejdbc.Tx">currentTx</a><span class="delimiter">)</span>: <a href="DBSession.scala.html#7794" title="scalikejdbc.DBSession">DBSession</a> = <a href="#57770" title="=&gt; scalikejdbc.DB">db</a>.<a href="DB.scala.html#45315" title="(tx: scalikejdbc.Tx)scalikejdbc.DBSession">withinTxSession</a><span class="delimiter">(</span><a href="#57904" title="scalikejdbc.Tx">tx</a><span class="delimiter">)</span>

  <span class="keyword">def</span> <a title="[A](execution: scalikejdbc.DBSession =&gt; A)A" id="57800">withinTx</a><span class="delimiter">[</span><a title="" id="57802">A</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="scalikejdbc.DBSession =&gt; A" id="57905">execution</a>: DBSession =&gt; A<span class="delimiter">)</span>: <a href="#57802" title="A">A</a> = <a href="#57770" title="=&gt; scalikejdbc.DB">db</a>.<a href="DB.scala.html#45316" title="(execution: scalikejdbc.DBSession =&gt; A)A">withinTx</a><span class="delimiter">(</span><a href="#57905" title="scalikejdbc.DBSession =&gt; A">execution</a><span class="delimiter">)</span>

  <span class="keyword">def</span> <a title="[A](execution: java.sql.Connection =&gt; A)A" id="57803">withinTxWithConnection</a><span class="delimiter">[</span><a title="" id="57805">A</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="java.sql.Connection =&gt; A" id="57911">execution</a>: Connection =&gt; A<span class="delimiter">)</span>: <a href="#57805" title="A">A</a> = <a href="#57770" title="=&gt; scalikejdbc.DB">db</a>.<a href="DB.scala.html#45319" title="(execution: java.sql.Connection =&gt; A)A">withinTxWithConnection</a><span class="delimiter">(</span><a href="#57911" title="java.sql.Connection =&gt; A">execution</a><span class="delimiter">)</span>

  <span class="keyword">def</span> <a title="[A](execution: scalikejdbc.DBSession =&gt; A)A" id="57806">localTx</a><span class="delimiter">[</span><a title="" id="57808">A</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="scalikejdbc.DBSession =&gt; A" id="57917">execution</a>: DBSession =&gt; A<span class="delimiter">)</span>: <a href="#57808" title="A">A</a> = <a href="#57770" title="=&gt; scalikejdbc.DB">db</a>.<a href="DB.scala.html#45325" title="(execution: scalikejdbc.DBSession =&gt; A)A">localTx</a><span class="delimiter">(</span><a href="#57917" title="scalikejdbc.DBSession =&gt; A">execution</a><span class="delimiter">)</span>

  <span class="keyword">def</span> <a title="[A](execution: java.sql.Connection =&gt; A)A" id="57809">localTxWithConnection</a><span class="delimiter">[</span><a title="" id="57811">A</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="java.sql.Connection =&gt; A" id="57923">execution</a>: Connection =&gt; A<span class="delimiter">)</span>: <a href="#57811" title="A">A</a> = <a href="#57770" title="=&gt; scalikejdbc.DB">db</a>.<a href="DB.scala.html#45328" title="(execution: java.sql.Connection =&gt; A)A">localTxWithConnection</a><span class="delimiter">(</span><a href="#57923" title="java.sql.Connection =&gt; A">execution</a><span class="delimiter">)</span>

  <span class="keyword">def</span> <a title="(table: String)Option[scalikejdbc.metadata.Table]" id="57812">getTable</a><span class="delimiter">(</span><a title="String" id="57929">table</a>: <span title="String">String</span><span class="delimiter">)</span>: <span title="Option[scalikejdbc.metadata.Table]">Option</span><span class="delimiter">[</span>Table<span class="delimiter">]</span> = <a href="#57770" title="=&gt; scalikejdbc.DB">db</a>.<a href="DB.scala.html#45334" title="(table: String)Option[scalikejdbc.metadata.Table]">getTable</a><span class="delimiter">(</span><a href="#57929" title="String">table</a><span class="delimiter">)</span>

  <span class="keyword">def</span> <a title="(tableNamePattern: String, tableTypes: Array[String])List[String]" id="57813">getTableNames</a><span class="delimiter">(</span><a title="String" id="57931">tableNamePattern</a>: <span title="String">String</span>, <a title="Array[String]" id="57934">tableTypes</a>: <span title="Array[String]">Array</span><span class="delimiter">[</span>String<span class="delimiter">]</span> = <span title="(xs: String*)(implicit evidence$2: scala.reflect.ClassTag[String])Array[String]">Array</span><span title="(runtimeClass1: Class[_])scala.reflect.ClassTag[String]" class="delimiter">(</span><span title="String(&quot;TABLE&quot;)" class="string">&quot;TABLE&quot;</span>, <span title="String(&quot;VIEW&quot;)" class="string">&quot;VIEW&quot;</span><span class="delimiter">)</span><span class="delimiter">)</span>: <span title="List[String]">List</span><span class="delimiter">[</span>String<span class="delimiter">]</span> = <span class="delimiter">{</span>
    <a href="#57770" title="=&gt; scalikejdbc.DB">db</a>.<a href="DB.scala.html#45332" title="(tableNamePattern: String, tableTypes: Array[String])List[String]">getTableNames</a><span class="delimiter">(</span><a href="#57931" title="String">tableNamePattern</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="(tableNamePattern: String, tableTypes: Array[String])String" id="57814">showTables</a><span class="delimiter">(</span><a title="String" id="57957">tableNamePattern</a>: <span title="String">String</span> = <span title="String(&quot;%&quot;)" class="string">&quot;%&quot;</span>, <a title="Array[String]" id="57958">tableTypes</a>: <span title="Array[String]">Array</span><span class="delimiter">[</span>String<span class="delimiter">]</span> = <span title="(xs: String*)(implicit evidence$2: scala.reflect.ClassTag[String])Array[String]">Array</span><span title="(runtimeClass1: Class[_])scala.reflect.ClassTag[String]" class="delimiter">(</span><span title="String(&quot;TABLE&quot;)" class="string">&quot;TABLE&quot;</span>, <span title="String(&quot;VIEW&quot;)" class="string">&quot;VIEW&quot;</span><span class="delimiter">)</span><span class="delimiter">)</span>: <span title="String">String</span> = <span class="delimiter">{</span>
    <a href="#57770" title="=&gt; scalikejdbc.DB">db</a>.<a href="DB.scala.html#45336" title="(tableNamePattern: String, tableTypes: Array[String])String">showTables</a><span class="delimiter">(</span><a href="#57957" title="String">tableNamePattern</a>, <a href="#57958" title="Array[String]">tableTypes</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="(table: String)String" id="57815">describe</a><span class="delimiter">(</span><a title="String" id="57978">table</a>: <span title="String">String</span><span class="delimiter">)</span> = <a href="#57770" title="=&gt; scalikejdbc.DB">db</a>.<a href="DB.scala.html#45337" title="(table: String)String">describe</a><span class="delimiter">(</span><a href="#57978" title="String">table</a><span class="delimiter">)</span>

<span class="delimiter">}</span>

        </pre>
    </body>
</html>