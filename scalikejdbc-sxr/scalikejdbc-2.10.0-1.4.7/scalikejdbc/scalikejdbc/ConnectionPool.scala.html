<?xml version="1.0" encoding="utf-8"?>
      <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <meta http-equiv="Expires" content="0" />
        <title>scalikejdbc/scalikejdbc/ConnectionPool.scala</title>
        <script type="text/javascript" src="../../jquery-all.js"></script>
        <script type="text/javascript" src="../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../style.css" title="Style"></link>
    </head>
    <body>
        <pre>
/*
 * Copyright 2011 Kazuhiro Sera
 *
 * Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND,
 * either express or implied. See the License for the specific language
 * governing permissions and limitations under the License.
 */
<span class="keyword">package</span> scalikejdbc

<span class="keyword">import</span> javax.sql.DataSource
<span class="keyword">import</span> java.sql.Connection

/**
 * Connection Pool
 *
 * Using Commons DBCP internally.
 *
 * @see http://commons.apache.org/dbcp/
 */
<span class="keyword">object</span> <a title="scalikejdbc.ConnectionPool.type" id="8341">ConnectionPool</a> <a href="#8342" title="scalikejdbc.ConnectionPool.type" class="keyword">extends</a> <a href="LogSupport.scala.html#7878" title="scalikejdbc.LogSupport">LogSupport</a> <span class="delimiter">{</span>

  <span class="keyword">type</span> <a title="[A, B]scala.collection.mutable.HashMap[A,B]" id="13324">MutableMap</a><span class="delimiter">[</span><a title="" id="13325">A</a>, <a title="" id="13326">B</a><span class="delimiter">]</span> = scala.collection.mutable.<span title="scala.collection.mutable.HashMap[A,B]">HashMap</span><span class="delimiter">[</span>A, B<span class="delimiter">]</span>
  <span class="keyword">type</span> <a title="scalikejdbc.ConnectionPoolSettings" id="13327">CPSettings</a> = <a href="ConnectionPoolSettings.scala.html#7551" title="scalikejdbc.ConnectionPoolSettings">ConnectionPoolSettings</a>
  <span class="keyword">type</span> <a title="scalikejdbc.ConnectionPoolFactory" id="13328">CPFactory</a> = <a href="ConnectionPoolFactory.scala.html#7464" title="scalikejdbc.ConnectionPoolFactory">ConnectionPoolFactory</a>

  <span class="keyword">val</span> <a title="Symbol" id="13329">DEFAULT_NAME</a>: <span title="Symbol">Symbol</span> = <span title="(name: String)Symbol" class="symbol">'default</span>

  <span class="keyword">private</span><span class="delimiter">[</span><span class="keyword">this</span><span class="delimiter">]</span> <span class="keyword">val</span> <a title="scala.collection.mutable.HashMap[Any,scalikejdbc.ConnectionPool]" id="13331">pools</a> = <span title="()scala.collection.mutable.HashMap[Any,scalikejdbc.ConnectionPool]" class="keyword">new</span> <span title="scala.collection.mutable.HashMap[Any,scalikejdbc.ConnectionPool]">MutableMap</span><span class="delimiter">[</span>Any, ConnectionPool<span class="delimiter">]</span><span class="delimiter">(</span><span class="delimiter">)</span>

  /**
   * Returns true when the specified Connection pool is already initialized.
   * @param name pool name
   * @return is initialized
   */
  <span class="keyword">def</span> <a title="(name: Any)Boolean" id="13332">isInitialized</a><span class="delimiter">(</span><a title="Any" id="49752">name</a>: <span title="Any">Any</span> = <a href="#13329" title="=&gt; Symbol">DEFAULT_NAME</a><span class="delimiter">)</span> = <a href="#13331" title="scala.collection.mutable.HashMap[Any,scalikejdbc.ConnectionPool]">pools</a>.<span title="(x$1: Boolean)Boolean">synchronized</span> <span class="delimiter">{</span>
    <a href="#13331" title="scala.collection.mutable.HashMap[Any,scalikejdbc.ConnectionPool]">pools</a>.<span title="(key: Any)Option[scalikejdbc.ConnectionPool]">get</span><span class="delimiter">(</span><a href="#49752" title="Any">name</a><span class="delimiter">)</span>.<span title="=&gt; Boolean">isDefined</span>
  <span class="delimiter">}</span>

  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(name: Any)Unit" id="13333">ensureInitialized</a><span class="delimiter">(</span><a title="Any" id="49766">name</a>: <span title="Any">Any</span><span class="delimiter">)</span>: <span title="Unit">Unit</span> = <span class="delimiter">{</span>
    <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><span title="=&gt; Boolean">!</span><a href="#13332" title="(name: Any)Boolean">isInitialized</a><span class="delimiter">(</span><a href="#49766" title="Any">name</a><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">{</span>
      <span class="keyword">val</span> <a title="String" id="49768">message</a> = <a href="ErrorMessage.scala.html#7594" title="scalikejdbc.ErrorMessage.type">ErrorMessage</a>.<a href="ErrorMessage.scala.html#38120" title="=&gt; String">CONNECTION_POOL_IS_NOT_YET_INITIALIZED</a> <span title="(x$1: Any)String">+</span> <span title="String(&quot;(name:&quot;)" class="string">&quot;(name:&quot;</span> <span title="(x$1: Any)String">+</span> <a href="#49766" title="Any">name</a> <span title="(x$1: Any)String">+</span> <span title="String(&quot;)&quot;)" class="string">&quot;)&quot;</span>
      <span title="Nothing" class="keyword">throw</span> <span title="(x$1: String)IllegalStateException" class="keyword">new</span> <span title="IllegalStateException">IllegalStateException</span><span class="delimiter">(</span><a href="#49768" title="String">message</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  /**
   * Returns Connection pool. If the specified Connection pool does not exist, returns null.
   *
   * @param name pool name
   * @return connection pool
   */
  <span class="keyword">def</span> <a title="(name: Any)scalikejdbc.ConnectionPool" id="13334">apply</a><span class="delimiter">(</span><a title="Any" id="49775">name</a>: <span title="Any">Any</span> = <a href="#13329" title="=&gt; Symbol">DEFAULT_NAME</a><span class="delimiter">)</span>: <a href="#8340" title="scalikejdbc.ConnectionPool">ConnectionPool</a> = <a href="#13335" title="(name: Any)scalikejdbc.ConnectionPool">get</a><span class="delimiter">(</span><a href="#49775" title="Any">name</a><span class="delimiter">)</span>

  /**
   * Returns Connection pool. If the specified Connection pool does not exist, returns null.
   *
   * @param name pool name
   * @return connection pool
   */
  <span class="keyword">def</span> <a title="(name: Any)scalikejdbc.ConnectionPool" id="13335">get</a><span class="delimiter">(</span><a title="Any" id="49778">name</a>: <span title="Any">Any</span> = <a href="#13329" title="=&gt; Symbol">DEFAULT_NAME</a><span class="delimiter">)</span>: <a href="#8340" title="scalikejdbc.ConnectionPool">ConnectionPool</a> = <a href="#13331" title="scala.collection.mutable.HashMap[Any,scalikejdbc.ConnectionPool]">pools</a>.<span title="(x$1: scalikejdbc.ConnectionPool)scalikejdbc.ConnectionPool">synchronized</span> <span class="delimiter">{</span>
    <a href="#13331" title="scala.collection.mutable.HashMap[Any,scalikejdbc.ConnectionPool]">pools</a>.<span title="(key: Any)Option[scalikejdbc.ConnectionPool]">get</span><span class="delimiter">(</span><a href="#49778" title="Any">name</a><span class="delimiter">)</span>.<span title="(implicit ev: &lt;:&lt;[Null,scalikejdbc.ConnectionPool])scalikejdbc.ConnectionPool">orNull</span>
  <span class="delimiter">}</span>

  /**
   * Register new named Connection pool.
   *
   * @param name pool name
   * @param url JDBC URL
   * @param user JDBC username
   * @param password JDBC password
   * @param settings Settings
   */
  <span class="keyword">def</span> <a title="(name: Any, url: String, user: String, password: String, settings: scalikejdbc.ConnectionPool.CPSettings)(implicit factory: scalikejdbc.ConnectionPool.CPFactory)Unit" id="13336">add</a><span class="delimiter">(</span><a title="Any" id="22639">name</a>: <span title="Any">Any</span>, <a title="String" id="22640">url</a>: <span title="String">String</span>, <a title="String" id="22641">user</a>: <span title="String">String</span>, <a title="String" id="22642">password</a>: <span title="String">String</span>,
    <a title="scalikejdbc.ConnectionPool.CPSettings" id="22643">settings</a>: <a href="ConnectionPoolSettings.scala.html#7551" title="scalikejdbc.ConnectionPool.CPSettings">CPSettings</a> = <a href="ConnectionPoolSettings.scala.html#31789" title="(initialSize: Int, maxSize: Int, validationQuery: String)scalikejdbc.ConnectionPoolSettings">ConnectionPoolSettings</a><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">(</span><span class="keyword">implicit</span> <a title="scalikejdbc.ConnectionPool.CPFactory" id="17469">factory</a>: <a href="ConnectionPoolFactory.scala.html#7464" title="scalikejdbc.ConnectionPool.CPFactory">CPFactory</a> = <a href="ConnectionPoolFactory.scala.html#7546" title="scalikejdbc.CommonsConnectionPoolFactory.type">CommonsConnectionPoolFactory</a><span class="delimiter">)</span> <span class="delimiter">{</span>
    <a href="#13331" title="scala.collection.mutable.HashMap[Any,scalikejdbc.ConnectionPool]">pools</a>.<span title="(x$1: Unit)Unit">synchronized</span> <span class="delimiter">{</span>
      <a href="#13331" title="scala.collection.mutable.HashMap[Any,scalikejdbc.ConnectionPool]">pools</a>.<span title="(key: Any)Option[scalikejdbc.ConnectionPool]">get</span><span class="delimiter">(</span><a href="#22639" title="Any">name</a><span class="delimiter">)</span>.<span title="(f: scalikejdbc.ConnectionPool =&gt; Unit)Unit">foreach</span> <span class="delimiter">{</span> <a title="scalikejdbc.ConnectionPool" id="49797">pool</a> =&gt; <a href="#49797" title="scalikejdbc.ConnectionPool">pool</a>.<a href="#49378" title="()Unit">close</a><span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">}</span>
      <a href="#13331" title="scala.collection.mutable.HashMap[Any,scalikejdbc.ConnectionPool]">pools</a>.<span title="(key: Any, value: scalikejdbc.ConnectionPool)Unit">update</span><span class="delimiter">(</span><a href="#22639" title="Any">name</a>, <a href="#17469" title="scalikejdbc.ConnectionPool.CPFactory">factory</a>.<a href="ConnectionPoolFactory.scala.html#17470" title="(url: String, user: String, password: String, settings: scalikejdbc.ConnectionPoolSettings)scalikejdbc.ConnectionPool">apply</a><span class="delimiter">(</span><a href="#22640" title="String">url</a>, <a href="#22641" title="String">user</a>, <a href="#22642" title="String">password</a>, <a href="#22643" title="scalikejdbc.ConnectionPool.CPSettings">settings</a><span class="delimiter">)</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>
    <a href="LogSupport.scala.html#13321" title="=&gt; scalikejdbc.Log">log</a>.<a href="Log.scala.html#49826" title="(msg: =&gt; String)Unit">debug</a><span class="delimiter">(</span><span title="String(&quot;Registered connection pool : &quot;)" class="string">&quot;Registered connection pool : &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#13335" title="(name: Any)scalikejdbc.ConnectionPool">get</a><span class="delimiter">(</span><a href="#22639" title="Any">name</a><span class="delimiter">)</span>.<a href="#49377" title="()String">toString</a><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  /**
   * Register the default Connection pool.
   *
   * @param url JDBC URL
   * @param user JDBC username
   * @param password JDBC password
   * @param settings Settings
   */
  <span class="keyword">def</span> <a title="(url: String, user: String, password: String, settings: scalikejdbc.ConnectionPool.CPSettings)(implicit factory: scalikejdbc.ConnectionPool.CPFactory)Unit" id="13337">singleton</a><span class="delimiter">(</span><a title="String" id="43036">url</a>: <span title="String">String</span>, <a title="String" id="43037">user</a>: <span title="String">String</span>, <a title="String" id="43038">password</a>: <span title="String">String</span>,
    <a title="scalikejdbc.ConnectionPool.CPSettings" id="43039">settings</a>: <a href="ConnectionPoolSettings.scala.html#7551" title="scalikejdbc.ConnectionPool.CPSettings">CPSettings</a> = <a href="ConnectionPoolSettings.scala.html#31789" title="(initialSize: Int, maxSize: Int, validationQuery: String)scalikejdbc.ConnectionPoolSettings">ConnectionPoolSettings</a><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">(</span><span class="keyword">implicit</span> <a title="scalikejdbc.ConnectionPool.CPFactory" id="43026">factory</a>: <a href="ConnectionPoolFactory.scala.html#7464" title="scalikejdbc.ConnectionPool.CPFactory">CPFactory</a> = <a href="ConnectionPoolFactory.scala.html#7546" title="scalikejdbc.CommonsConnectionPoolFactory.type">CommonsConnectionPoolFactory</a><span class="delimiter">)</span>: <span title="Unit">Unit</span> = <span class="delimiter">{</span>
    <a href="#13336" title="(name: Any, url: String, user: String, password: String, settings: scalikejdbc.ConnectionPool.CPSettings)(implicit factory: scalikejdbc.ConnectionPool.CPFactory)Unit">add</a><span class="delimiter">(</span><a href="#13329" title="=&gt; Symbol">DEFAULT_NAME</a>, <a href="#43036" title="String">url</a>, <a href="#43037" title="String">user</a>, <a href="#43038" title="String">password</a>, <a href="#43039" title="scalikejdbc.ConnectionPool.CPSettings">settings</a><span class="delimiter">)</span><span class="delimiter">(</span><a href="#43026" title="scalikejdbc.ConnectionPool.CPFactory">factory</a><span class="delimiter">)</span>
    <a href="LogSupport.scala.html#13321" title="=&gt; scalikejdbc.Log">log</a>.<a href="Log.scala.html#49826" title="(msg: =&gt; String)Unit">debug</a><span class="delimiter">(</span><span title="String(&quot;Registered singleton connection pool : &quot;)" class="string">&quot;Registered singleton connection pool : &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#13335" title="(name: Any)scalikejdbc.ConnectionPool">get</a><span class="delimiter">(</span><span class="delimiter">)</span>.<a href="#49377" title="()String">toString</a><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  /**
   * Returns [[javax.sql.DataSource]].
   * @param name pool name
   * @return datasource
   */
  <span class="keyword">def</span> <a title="(name: Any)javax.sql.DataSource" id="13338">dataSource</a><span class="delimiter">(</span><a title="Any" id="50170">name</a>: <span title="Any">Any</span> = <a href="#13329" title="=&gt; Symbol">DEFAULT_NAME</a><span class="delimiter">)</span>: <span title="javax.sql.DataSource">DataSource</span> = <span class="delimiter">{</span>
    <a href="#13333" title="(name: Any)Unit">ensureInitialized</a><span class="delimiter">(</span><a href="#50170" title="Any">name</a><span class="delimiter">)</span>
    <a href="#13335" title="(name: Any)scalikejdbc.ConnectionPool">get</a><span class="delimiter">(</span><a href="#50170" title="Any">name</a><span class="delimiter">)</span>.<a href="#49372" title="=&gt; javax.sql.DataSource">dataSource</a>
  <span class="delimiter">}</span>

  /**
   * Borrows a [[java.sql.Connection]] from the specified connection pool.
   * @param name pool name
   * @return connection
   */
  <span class="keyword">def</span> <a title="(name: Any)java.sql.Connection" id="13339">borrow</a><span class="delimiter">(</span><a title="Any" id="46071">name</a>: <span title="Any">Any</span> = <a href="#13329" title="=&gt; Symbol">DEFAULT_NAME</a><span class="delimiter">)</span>: <span title="java.sql.Connection">Connection</span> = <span class="delimiter">{</span>
    <a href="#13333" title="(name: Any)Unit">ensureInitialized</a><span class="delimiter">(</span><a href="#46071" title="Any">name</a><span class="delimiter">)</span>
    <span class="keyword">val</span> <a title="scalikejdbc.ConnectionPool" id="50171">pool</a> = <a href="#13335" title="(name: Any)scalikejdbc.ConnectionPool">get</a><span class="delimiter">(</span><a href="#46071" title="Any">name</a><span class="delimiter">)</span>
    <a href="LogSupport.scala.html#13321" title="=&gt; scalikejdbc.Log">log</a>.<a href="Log.scala.html#49826" title="(msg: =&gt; String)Unit">debug</a><span class="delimiter">(</span><span title="String(&quot;Borrowed a new connection from &quot;)" class="string">&quot;Borrowed a new connection from &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#50171" title="scalikejdbc.ConnectionPool">pool</a>.<a href="#49377" title="()String">toString</a><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span>
    <a href="#50171" title="scalikejdbc.ConnectionPool">pool</a>.<a href="#49371" title="()java.sql.Connection">borrow</a><span class="delimiter">(</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  /**
   * Close a pool by name
   * @param name pool name
   */
  <span class="keyword">def</span> <a title="(name: Any)Unit" id="13340">close</a><span class="delimiter">(</span><a title="Any" id="25962">name</a>: <span title="Any">Any</span><span class="delimiter">)</span>: <span title="Unit">Unit</span> = <span class="delimiter">{</span>
    <a href="#13331" title="scala.collection.mutable.HashMap[Any,scalikejdbc.ConnectionPool]">pools</a>.<span title="(x$1: Unit)Unit">synchronized</span> <span class="delimiter">{</span>
      <span class="keyword">val</span> <a title="Option[scalikejdbc.ConnectionPool]" id="50176">removed</a> = <a href="#13331" title="scala.collection.mutable.HashMap[Any,scalikejdbc.ConnectionPool]">pools</a>.<span title="(key: Any)Option[scalikejdbc.ConnectionPool]">remove</span><span class="delimiter">(</span><a href="#25962" title="Any">name</a><span class="delimiter">)</span>
      <a href="#50176" title="Option[scalikejdbc.ConnectionPool]">removed</a>.<span title="(f: scalikejdbc.ConnectionPool =&gt; Unit)Unit">foreach</span> <span class="delimiter">{</span> <a title="scalikejdbc.ConnectionPool" id="50183">pool</a> =&gt; <a href="#50183" title="scalikejdbc.ConnectionPool">pool</a>.<a href="#49378" title="()Unit">close</a><span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">}</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  /**
   * Close all connection pools
   */
  <span class="keyword">def</span> <a title="()Unit" id="13341">closeAll</a><span class="delimiter">(</span><span class="delimiter">)</span>: <span title="Unit">Unit</span> = <span class="delimiter">{</span>
    <a href="#13331" title="scala.collection.mutable.HashMap[Any,scalikejdbc.ConnectionPool]">pools</a>.<span title="(x$1: Unit)Unit">synchronized</span> <span class="delimiter">{</span>
      <a href="#13331" title="scala.collection.mutable.HashMap[Any,scalikejdbc.ConnectionPool]">pools</a>.<span title="(f: ((Any, scalikejdbc.ConnectionPool)) =&gt; Unit)Unit">foreach</span> <a href="#50223" title="(Any, scalikejdbc.ConnectionPool)" class="delimiter">{</a>
        <span class="keyword">case</span> <span class="delimiter">(</span><a href="#98272" title="Any" id="50226">name</a>, pool<span class="delimiter">)</span> =&gt;
          <a href="#13340" title="(name: Any)Unit">close</a><a href="#98274" title="(x: Unit)Unit" class="delimiter">(</a><a href="#50226" title="Any">name</a><span class="delimiter">)</span>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

<span class="delimiter">}</span>

/**
 * Connection Pool
 */
<span class="keyword">abstract</span> <span class="keyword">class</span> <a title="class ConnectionPool extends AnyRef" id="8340">ConnectionPool</a><a href="#8340" title="scalikejdbc.ConnectionPool" class="delimiter">(</a><a title="String" id="49379">url</a>: <span title="String">String</span>,
    <a title="String" id="49380">user</a>: <span title="String">String</span>,
    <a title="String" id="49381">password</a>: <span title="String">String</span>,
    <a title="=&gt; scalikejdbc.ConnectionPoolSettings" id="49382">settings</a>: <a href="ConnectionPoolSettings.scala.html#7551" title="scalikejdbc.ConnectionPoolSettings">ConnectionPoolSettings</a> = <a href="ConnectionPoolSettings.scala.html#31789" title="(initialSize: Int, maxSize: Int, validationQuery: String)scalikejdbc.ConnectionPoolSettings">ConnectionPoolSettings</a><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">{</span>

  /**
   * Borrows [[java.sql.Connection]] from pool.
   * @return connection
   */
  <span class="keyword">def</span> <a title="()java.sql.Connection" id="49371">borrow</a><span class="delimiter">(</span><span class="delimiter">)</span>: <span title="java.sql.Connection">Connection</span>

  /**
   * Returns [[javax.sql.DataSource]] object.
   * @return datasource
   */
  <span class="keyword">def</span> <a title="=&gt; javax.sql.DataSource" id="49372">dataSource</a>: <span title="javax.sql.DataSource">DataSource</span>

  /**
   * Returns num of active connections.
   * @return num
   */
  <span class="keyword">def</span> <a title="=&gt; Int" id="49373">numActive</a>: <span title="Int">Int</span> = <span title="Nothing" class="keyword">throw</span> <span title="UnsupportedOperationException" class="keyword">new</span> <span title="UnsupportedOperationException">UnsupportedOperationException</span>

  /**
   * Returns num of idle connections.
   * @return num
   */
  <span class="keyword">def</span> <a title="=&gt; Int" id="49374">numIdle</a>: <span title="Int">Int</span> = <span title="Nothing" class="keyword">throw</span> <span title="UnsupportedOperationException" class="keyword">new</span> <span title="UnsupportedOperationException">UnsupportedOperationException</span>

  /**
   * Returns max limit of active connections.
   * @return num
   */
  <span class="keyword">def</span> <a title="=&gt; Int" id="49375">maxActive</a>: <span title="Int">Int</span> = <span title="Nothing" class="keyword">throw</span> <span title="UnsupportedOperationException" class="keyword">new</span> <span title="UnsupportedOperationException">UnsupportedOperationException</span>

  /**
   * Returns max limit of idle connections.
   * @return num
   */
  <span class="keyword">def</span> <a title="=&gt; Int" id="49376">maxIdle</a>: <span title="Int">Int</span> = <span title="Nothing" class="keyword">throw</span> <span title="UnsupportedOperationException" class="keyword">new</span> <span title="UnsupportedOperationException">UnsupportedOperationException</span>

  /**
   * Returns self as a String value.
   * @return printable String value
   */
  <span class="keyword">override</span> <span class="keyword">def</span> <a title="()String" id="49377">toString</a><span class="delimiter">(</span><span class="delimiter">)</span> = <span title="String(&quot;ConnectionPool(url:&quot;)" class="string">&quot;ConnectionPool(url:&quot;</span> <span title="(x$1: Any)String">+</span> <a href="#49379" title="String">url</a> <span title="(x$1: Any)String">+</span> <span title="String(&quot;, user:&quot;)" class="string">&quot;, user:&quot;</span> <span title="(x$1: Any)String">+</span> <a href="#49380" title="String">user</a> <span title="(x$1: Any)String">+</span> <span title="String(&quot;)&quot;)" class="string">&quot;)&quot;</span>

  /**
   * Close this connection pool.
   */
  <span class="keyword">def</span> <a title="()Unit" id="49378">close</a><span class="delimiter">(</span><span class="delimiter">)</span>: <span title="Unit">Unit</span> = <span title="Nothing" class="keyword">throw</span> <span title="UnsupportedOperationException" class="keyword">new</span> <span title="UnsupportedOperationException">UnsupportedOperationException</span>

<span class="delimiter">}</span>

/**
 * Commons DBCP Connection Pool
 *
 * @see http://commons.apache.org/dbcp/
 */
<span title="AnyRef" class="keyword">class</span> <a title="class CommonsConnectionPool extends scalikejdbc.ConnectionPool" id="7345">CommonsConnectionPool</a><a href="#7345" title="scalikejdbc.CommonsConnectionPool" class="delimiter">(</a><a title="String" id="50291">url</a>: <span title="String">String</span>,
  <a title="String" id="50292">user</a>: <span title="String">String</span>,
  <a title="String" id="50293">password</a>: <span title="String">String</span>,
  <a title="scalikejdbc.ConnectionPoolSettings" id="50296">settings</a>: <a href="ConnectionPoolSettings.scala.html#7551" title="scalikejdbc.ConnectionPoolSettings">ConnectionPoolSettings</a> = <a href="ConnectionPoolSettings.scala.html#31789" title="(initialSize: Int, maxSize: Int, validationQuery: String)scalikejdbc.ConnectionPoolSettings">ConnectionPoolSettings</a><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span>
    <span class="keyword">extends</span> <a href="#8340" title="scalikejdbc.ConnectionPool">ConnectionPool</a><span class="delimiter">(</span><a href="#50291" title="String">url</a>, <a href="#50292" title="String">user</a>, <a href="#50293" title="String">password</a>, <a href="#50296" title="scalikejdbc.ConnectionPoolSettings">settings</a><span class="delimiter">)</span> <span class="delimiter">{</span>

  <span class="keyword">import</span> org.apache.commons.pool.impl.GenericObjectPool
  <span class="keyword">import</span> org.apache.commons.dbcp.<span class="delimiter">{</span> PoolingDataSource, PoolableConnectionFactory, DriverManagerConnectionFactory <span class="delimiter">}</span>

  <span class="keyword">private</span><span class="delimiter">[</span><span class="keyword">this</span><span class="delimiter">]</span> <span class="keyword">val</span> <a title="org.apache.commons.pool.impl.GenericObjectPool" id="50277">_pool</a> = <span title="(x$1: org.apache.commons.pool.PoolableObjectFactory)org.apache.commons.pool.impl.GenericObjectPool" class="keyword">new</span> <span title="org.apache.commons.pool.impl.GenericObjectPool">GenericObjectPool</span><span class="delimiter">(</span><span title="Null(null)" class="keyword">null</span><span class="delimiter">)</span>
  <a href="#50277" title="org.apache.commons.pool.impl.GenericObjectPool">_pool</a>.<span title="(x$1: Int)Unit">setMinIdle</span><span class="delimiter">(</span><a href="#50296" title="scalikejdbc.ConnectionPoolSettings">settings</a>.<a href="ConnectionPoolSettings.scala.html#15341" title="=&gt; Int">initialSize</a><span class="delimiter">)</span>
  <a href="#50277" title="org.apache.commons.pool.impl.GenericObjectPool">_pool</a>.<span title="(x$1: Int)Unit">setMaxIdle</span><span class="delimiter">(</span><a href="#50296" title="scalikejdbc.ConnectionPoolSettings">settings</a>.<a href="ConnectionPoolSettings.scala.html#15343" title="=&gt; Int">maxSize</a><span class="delimiter">)</span>
  <a href="#50277" title="org.apache.commons.pool.impl.GenericObjectPool">_pool</a>.<span title="(x$1: Int)Unit">setMaxActive</span><span class="delimiter">(</span><a href="#50296" title="scalikejdbc.ConnectionPoolSettings">settings</a>.<a href="ConnectionPoolSettings.scala.html#15343" title="=&gt; Int">maxSize</a><span class="delimiter">)</span>
  <a href="#50277" title="org.apache.commons.pool.impl.GenericObjectPool">_pool</a>.<span title="(x$1: Long)Unit">setMaxWait</span><span class="delimiter">(</span><span title="Long(5000L)" class="int">5000</span><span class="delimiter">)</span>
  <a href="#50277" title="org.apache.commons.pool.impl.GenericObjectPool">_pool</a>.<span title="(x$1: Byte)Unit">setWhenExhaustedAction</span><span class="delimiter">(</span>GenericObjectPool.<span title="Byte(0)">WHEN_EXHAUSTED_FAIL</span><span class="delimiter">)</span>
  <a href="#50277" title="org.apache.commons.pool.impl.GenericObjectPool">_pool</a>.<span title="(x$1: Boolean)Unit">setTestOnBorrow</span><span class="delimiter">(</span><span title="Boolean(true)" class="keyword">true</span><span class="delimiter">)</span>

  // Initialize Connection Factory
  // (not read-only, auto-commit)
  <span title="org.apache.commons.dbcp.PoolableConnectionFactory" class="keyword">new</span> <span title="org.apache.commons.dbcp.PoolableConnectionFactory">PoolableConnectionFactory</span><span class="delimiter">(</span>
    <span title="(x$1: String, x$2: String, x$3: String)org.apache.commons.dbcp.DriverManagerConnectionFactory" class="keyword">new</span> <span title="org.apache.commons.dbcp.DriverManagerConnectionFactory">DriverManagerConnectionFactory</span><span class="delimiter">(</span><a href="#50291" title="String">url</a>, <a href="#50292" title="String">user</a>, <a href="#50293" title="String">password</a><span class="delimiter">)</span>,
    <a href="#50277" title="org.apache.commons.pool.impl.GenericObjectPool">_pool</a>,
    <span title="Null(null)" class="keyword">null</span>,
    <a href="#50296" title="scalikejdbc.ConnectionPoolSettings">settings</a>.<a href="ConnectionPoolSettings.scala.html#15345" title="=&gt; String">validationQuery</a>,
    <span title="Boolean(false)" class="keyword">false</span>,
    <span title="Boolean(true)" class="keyword">true</span><span class="delimiter">)</span>

  <span class="keyword">private</span><span class="delimiter">[</span><span class="keyword">this</span><span class="delimiter">]</span> <span class="keyword">val</span> <a title="javax.sql.DataSource" id="50278">_dataSource</a>: <span title="javax.sql.DataSource">DataSource</span> = <span title="(x$1: org.apache.commons.pool.ObjectPool)org.apache.commons.dbcp.PoolingDataSource" class="keyword">new</span> <span title="org.apache.commons.dbcp.PoolingDataSource">PoolingDataSource</span><span class="delimiter">(</span><a href="#50277" title="org.apache.commons.pool.impl.GenericObjectPool">_pool</a><span class="delimiter">)</span>

  <span class="keyword">override</span> <span class="keyword">def</span> <a title="=&gt; javax.sql.DataSource" id="50279">dataSource</a>: <span title="javax.sql.DataSource">DataSource</span> = <a href="#50278" title="javax.sql.DataSource">_dataSource</a>

  <span class="keyword">override</span> <span class="keyword">def</span> <a title="()java.sql.Connection" id="50280">borrow</a><span class="delimiter">(</span><span class="delimiter">)</span>: <span title="java.sql.Connection">Connection</span> = <a href="#50279" title="=&gt; javax.sql.DataSource">dataSource</a>.<span title="()java.sql.Connection">getConnection</span><span class="delimiter">(</span><span class="delimiter">)</span>

  <span class="keyword">override</span> <span class="keyword">def</span> <a title="=&gt; Int" id="50281">numActive</a>: <span title="Int">Int</span> = <a href="#50277" title="org.apache.commons.pool.impl.GenericObjectPool">_pool</a>.<span title="()Int">getNumActive</span>

  <span class="keyword">override</span> <span class="keyword">def</span> <a title="=&gt; Int" id="50282">numIdle</a>: <span title="Int">Int</span> = <a href="#50277" title="org.apache.commons.pool.impl.GenericObjectPool">_pool</a>.<span title="()Int">getNumIdle</span>

  <span class="keyword">override</span> <span class="keyword">def</span> <a title="=&gt; Int" id="50283">maxActive</a>: <span title="Int">Int</span> = <a href="#50277" title="org.apache.commons.pool.impl.GenericObjectPool">_pool</a>.<span title="()Int">getMaxActive</span>

  <span class="keyword">override</span> <span class="keyword">def</span> <a title="=&gt; Int" id="50284">maxIdle</a>: <span title="Int">Int</span> = <a href="#50277" title="org.apache.commons.pool.impl.GenericObjectPool">_pool</a>.<span title="()Int">getMaxIdle</span>

  <span class="keyword">override</span> <span class="keyword">def</span> <a title="()Unit" id="50285">close</a><span class="delimiter">(</span><span class="delimiter">)</span>: <span title="Unit">Unit</span> = <a href="#50277" title="org.apache.commons.pool.impl.GenericObjectPool">_pool</a>.<span title="()Unit">close</span><span class="delimiter">(</span><span class="delimiter">)</span>

<span class="delimiter">}</span>


        </pre>
    </body>
</html>