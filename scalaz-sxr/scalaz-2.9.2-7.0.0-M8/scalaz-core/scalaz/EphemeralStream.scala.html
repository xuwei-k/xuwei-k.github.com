<?xml version="1.0" encoding="utf-8"?>
      <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <meta http-equiv="Expires" content="0" />
        <title>scalaz-core/scalaz/EphemeralStream.scala</title>
        <script type="text/javascript" src="../../jquery-all.js"></script>
        <script type="text/javascript" src="../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../style.css" title="Style"></link>
    </head>
    <body>
        <pre>
<span class="keyword">package</span> scalaz

<span class="keyword">import</span> java.lang.ref.WeakReference

<span class="comment">/** Like [[scala.collection.immutable.Stream]], but doesn't save
  * computed values.  As such, it can be used to represent similar
  * things, but without the space leak problem frequently encountered
  * using that type.
  */</span>
<span class="keyword">sealed</span> <span class="keyword">trait</span> <a title="trait EphemeralStream[A] extends java.lang.Object with ScalaObject" id="10638">EphemeralStream</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="26420">A</a><span class="delimiter">]</span> <span title="ScalaObject" class="delimiter">{</span>

  <span class="keyword">import</span> <a href="#10639" title="object scalaz.EphemeralStream">EphemeralStream</a>._

  <span class="keyword">def</span> <a title="=&gt; Boolean" id="253332">isEmpty</a>: <span title="Boolean">Boolean</span>

  <span class="keyword">def</span> <a title="=&gt; () =&gt; A" id="253333">head</a>: <span class="delimiter">(</span><span class="delimiter">)</span> =&gt; A

  <span class="keyword">def</span> <a title="=&gt; () =&gt; scalaz.EphemeralStream[A]" id="253334">tail</a>: <span class="delimiter">(</span><span class="delimiter">)</span> =&gt; EphemeralStream<span class="delimiter">[</span>A<span class="delimiter">]</span>

  <span class="keyword">def</span> <a title="=&gt; List[A]" id="253335">toList</a>: <span title="List[A]">List</span><span class="delimiter">[</span>A<span class="delimiter">]</span> = <span class="delimiter">{</span>
    <span class="keyword">def</span> <a title="(xs: =&gt; List[A])(x: =&gt; A)List[A]" id="254629">lcons</a><span class="delimiter">(</span><a title="=&gt; List[A]" id="254630">xs</a>: =&gt; List<span class="delimiter">[</span>A<span class="delimiter">]</span><span class="delimiter">)</span><span class="delimiter">(</span><a title="=&gt; A" id="254631">x</a>: =&gt; A<span class="delimiter">)</span> = <a href="#254631" title="=&gt; A">x</a> <a href="#254632" title="(x: A)List[A]">::</a> <a href="#254630" title="=&gt; List[A]">xs</a>
    <a href="#253339" title="(z: =&gt; List[A])(f: =&gt; List[A] =&gt; (=&gt; A =&gt; List[A]))List[A]">foldLeft</a><span class="delimiter">(</span><span title="object Nil">Nil</span>: <span title="List[A]">List</span><span class="delimiter">[</span>A<span class="delimiter">]</span><span class="delimiter">)</span><span class="delimiter">(</span><a href="#254629" title="(xs: =&gt; List[A])(x: =&gt; A)List[A]">lcons</a> _<span class="delimiter">)</span>.<span title="=&gt; List[A]">reverse</span>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="[B](z: =&gt; B)(f: =&gt; A =&gt; (=&gt; B =&gt; B))B" id="253336">foldRight</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="253338">B</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="=&gt; B" id="254670">z</a>: =&gt; B<span class="delimiter">)</span><span class="delimiter">(</span><a title="=&gt; A =&gt; (=&gt; B =&gt; B)" id="254671">f</a>: <span class="delimiter">(</span>=&gt; A<span class="delimiter">)</span> =&gt; <span class="delimiter">(</span>=&gt; B<span class="delimiter">)</span> =&gt; B<span class="delimiter">)</span>: <a href="#253338" title="B">B</a> =
    <span title="B" class="keyword">if</span> <span class="delimiter">(</span><a href="#253332" title="=&gt; Boolean">isEmpty</a><span class="delimiter">)</span> <a href="#254670" title="=&gt; B">z</a> <span class="keyword">else</span> <a href="#254671" title="(v1: =&gt; A)=&gt; B =&gt; B">f</a><span title="(v1: =&gt; B)B" class="delimiter">(</span><a href="#253333" title="()A">head</a><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">(</span><a href="#253334" title="()scalaz.EphemeralStream[A]">tail</a><span class="delimiter">(</span><span class="delimiter">)</span>.<a href="#253336" title="(z: =&gt; B)(f: =&gt; A =&gt; (=&gt; B =&gt; B))B">foldRight</a><span class="delimiter">(</span><a href="#254670" title="=&gt; B">z</a><span class="delimiter">)</span><span class="delimiter">(</span><a href="#254671" title="=&gt; A =&gt; (=&gt; B =&gt; B)">f</a><span class="delimiter">)</span><span class="delimiter">)</span>

  <span class="keyword">def</span> <a title="[B](z: =&gt; B)(f: =&gt; B =&gt; (=&gt; A =&gt; B))B" id="253339">foldLeft</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="253341">B</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="=&gt; B" id="254638">z</a>: =&gt; B<span class="delimiter">)</span><span class="delimiter">(</span><a title="=&gt; B =&gt; (=&gt; A =&gt; B)" id="254639">f</a>: <span class="delimiter">(</span>=&gt; B<span class="delimiter">)</span> =&gt; <span class="delimiter">(</span>=&gt; A<span class="delimiter">)</span> =&gt; B<span class="delimiter">)</span>: <a href="#253341" title="B">B</a> = <span class="delimiter">{</span>
    <span class="keyword">var</span> <a title="scalaz.EphemeralStream[A]" id="254684">t</a> = <a href="#10638" title="scalaz.EphemeralStream[A]" class="keyword">this</a>
    <span class="keyword">var</span> <a title="B" id="254685">acc</a> = <a href="#254638" title="=&gt; B">z</a>
    <span title="Unit" class="keyword">while</span> <span class="delimiter">(</span><span title="=&gt; Boolean">!</span><a href="#254684" title="scalaz.EphemeralStream[A]">t</a>.<a href="#253332" title="=&gt; Boolean">isEmpty</a><span class="delimiter">)</span> <a href="#254686" title="()Unit" class="delimiter">{</a>
      <a href="#254685" title="B">acc</a> = <a href="#254639" title="(v1: =&gt; B)=&gt; A =&gt; B">f</a><span title="(v1: =&gt; A)B" class="delimiter">(</span><a href="#254685" title="B">acc</a><span class="delimiter">)</span><span class="delimiter">(</span><a href="#254684" title="scalaz.EphemeralStream[A]">t</a>.<a href="#253333" title="()A">head</a><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span>
      <a href="#254684" title="scalaz.EphemeralStream[A]">t</a> = <a href="#254684" title="scalaz.EphemeralStream[A]">t</a>.<a href="#253334" title="()scalaz.EphemeralStream[A]">tail</a><span class="delimiter">(</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>
    <a href="#254685" title="B">acc</a>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="(p: A =&gt; Boolean)scalaz.EphemeralStream[A]" id="253342">filter</a><span class="delimiter">(</span><a title="A =&gt; Boolean" id="254689">p</a>: A =&gt; Boolean<span class="delimiter">)</span>: <a href="#10638" title="scalaz.EphemeralStream[A]">EphemeralStream</a><span class="delimiter">[</span>A<span class="delimiter">]</span> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="scalaz.EphemeralStream[A]" id="254691">rest</a> = <a href="#10638" title="EphemeralStream.this.type" class="keyword">this</a> <a href="#253343" title="(p: A =&gt; Boolean)scalaz.EphemeralStream[A]">dropWhile</a> <span class="delimiter">(</span><span title="=&gt; Boolean">!</span><a href="#254689" title="(v1: A)Boolean">p</a><span class="delimiter">(</span><a href="#254695" title="A">_</a><span class="delimiter">)</span><span class="delimiter">)</span>
    <span title="scalaz.EphemeralStream[A]" class="keyword">if</span> <span class="delimiter">(</span><a href="#254691" title="scalaz.EphemeralStream[A]">rest</a>.<a href="#253332" title="=&gt; Boolean">isEmpty</a><span class="delimiter">)</span> <a href="#253368" title="scalaz.EphemeralStream[A]">emptyEphemeralStream</a>
    <span class="keyword">else</span> <a href="#253371" title="(a: =&gt; A, as: =&gt; scalaz.EphemeralStream[A])java.lang.Object with scalaz.EphemeralStream[A]">cons</a><span class="delimiter">(</span><a href="#254691" title="scalaz.EphemeralStream[A]">rest</a>.<a href="#253333" title="()A">head</a><span class="delimiter">(</span><span class="delimiter">)</span>, <a href="#254691" title="scalaz.EphemeralStream[A]">rest</a>.<a href="#253334" title="()scalaz.EphemeralStream[A]">tail</a><span class="delimiter">(</span><span class="delimiter">)</span> <a href="#253342" title="(p: A =&gt; Boolean)scalaz.EphemeralStream[A]">filter</a> <a href="#254689" title="A =&gt; Boolean">p</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="(p: A =&gt; Boolean)scalaz.EphemeralStream[A]" id="253343">dropWhile</a><span class="delimiter">(</span><a title="A =&gt; Boolean" id="254692">p</a>: A =&gt; Boolean<span class="delimiter">)</span>: <a href="#10638" title="scalaz.EphemeralStream[A]">EphemeralStream</a><span class="delimiter">[</span>A<span class="delimiter">]</span> = <span class="delimiter">{</span>
    <span class="keyword">var</span> <a title="scalaz.EphemeralStream[A]" id="254707">these</a>: <a href="#10638" title="scalaz.EphemeralStream[A]">EphemeralStream</a><span class="delimiter">[</span>A<span class="delimiter">]</span> = <a href="#10638" title="scalaz.EphemeralStream[A]" class="keyword">this</a>
    <span title="Unit" class="keyword">while</span> <span class="delimiter">(</span><span title="=&gt; Boolean">!</span><a href="#254707" title="scalaz.EphemeralStream[A]">these</a>.<a href="#253332" title="=&gt; Boolean">isEmpty</a> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <a href="#254692" title="(v1: A)Boolean">p</a><span class="delimiter">(</span><a href="#254707" title="scalaz.EphemeralStream[A]">these</a>.<a href="#253333" title="()A">head</a><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span> <a href="#254707" title="scalaz.EphemeralStream[A]">these</a> = <a href="#254707" title="scalaz.EphemeralStream[A]">these</a>.<a href="#253334" title="()scalaz.EphemeralStream[A]">tail</a><span class="delimiter">(</span><span class="delimiter">)</span>
    <a href="#254707" title="scalaz.EphemeralStream[A]">these</a>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="(e: =&gt; scalaz.EphemeralStream[A])scalaz.EphemeralStream[A]" id="253344">++</a><span class="delimiter">(</span><a title="=&gt; scalaz.EphemeralStream[A]" id="254710">e</a>: =&gt; EphemeralStream<span class="delimiter">[</span>A<span class="delimiter">]</span><span class="delimiter">)</span>: <a href="#10638" title="scalaz.EphemeralStream[A]">EphemeralStream</a><span class="delimiter">[</span>A<span class="delimiter">]</span> =
    <a href="#253336" title="[B](z: =&gt; B)(f: =&gt; A =&gt; (=&gt; B =&gt; B))B">foldRight</a><span title="(z: =&gt; scalaz.EphemeralStream[A])(f: =&gt; A =&gt; (=&gt; scalaz.EphemeralStream[A] =&gt; scalaz.EphemeralStream[A]))scalaz.EphemeralStream[A]" class="delimiter">[</span><a href="#10638" title="scalaz.EphemeralStream[A]">EphemeralStream</a><span class="delimiter">[</span>A<span class="delimiter">]</span><span class="delimiter">]</span><span class="delimiter">(</span><a href="#254710" title="=&gt; scalaz.EphemeralStream[A]">e</a><span class="delimiter">)</span><span class="delimiter">(</span><span class="delimiter">(</span><a href="#253371" title="[A](a: =&gt; A, as: =&gt; scalaz.EphemeralStream[A])java.lang.Object with scalaz.EphemeralStream[A]">cons</a><span title="(a: =&gt; A, as: =&gt; scalaz.EphemeralStream[A])java.lang.Object with scalaz.EphemeralStream[A]" class="delimiter">[</span><a href="#26420" title="A">A</a><span class="delimiter">]</span><span class="delimiter">(</span><a href="#254718" title="=&gt; A">_</a>, <a href="#254719" title="=&gt; scalaz.EphemeralStream[A]">_</a><span class="delimiter">)</span><span class="delimiter">)</span>.<span title="=&gt; =&gt; A =&gt; (=&gt; scalaz.EphemeralStream[A] =&gt; java.lang.Object with scalaz.EphemeralStream[A])">curried</span><span class="delimiter">)</span>

  <span class="keyword">def</span> <a title="[B](f: A =&gt; scalaz.EphemeralStream[B])scalaz.EphemeralStream[B]" id="253345">flatMap</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="253347">B</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="A =&gt; scalaz.EphemeralStream[B]" id="254723">f</a>: A =&gt; EphemeralStream<span class="delimiter">[</span>B<span class="delimiter">]</span><span class="delimiter">)</span>: <a href="#10638" title="scalaz.EphemeralStream[B]">EphemeralStream</a><span class="delimiter">[</span>B<span class="delimiter">]</span> =
    <a href="#253336" title="[B](z: =&gt; B)(f: =&gt; A =&gt; (=&gt; B =&gt; B))B">foldRight</a><span title="(z: =&gt; scalaz.EphemeralStream[B])(f: =&gt; A =&gt; (=&gt; scalaz.EphemeralStream[B] =&gt; scalaz.EphemeralStream[B]))scalaz.EphemeralStream[B]" class="delimiter">[</span><a href="#10638" title="scalaz.EphemeralStream[B]">EphemeralStream</a><span class="delimiter">[</span>B<span class="delimiter">]</span><span class="delimiter">]</span><span class="delimiter">(</span><a href="#253368" title="scalaz.EphemeralStream[B]">emptyEphemeralStream</a><span class="delimiter">)</span><span class="delimiter">(</span><a title="=&gt; A" id="254730">h</a> =&gt; <a title="=&gt; scalaz.EphemeralStream[B]" id="254732">t</a> =&gt; <a href="#254723" title="(v1: A)scalaz.EphemeralStream[B]">f</a><span class="delimiter">(</span><a href="#254730" title="=&gt; A">h</a><span class="delimiter">)</span> <a href="#253344" title="(e: =&gt; scalaz.EphemeralStream[B])scalaz.EphemeralStream[B]">++</a> <a href="#254732" title="=&gt; scalaz.EphemeralStream[B]">t</a><span class="delimiter">)</span>

  <span class="keyword">def</span> <a title="[B](f: A =&gt; B)scalaz.EphemeralStream[B]" id="253348">map</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="253350">B</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="A =&gt; B" id="254735">f</a>: A =&gt; B<span class="delimiter">)</span>: <a href="#10638" title="scalaz.EphemeralStream[B]">EphemeralStream</a><span class="delimiter">[</span>B<span class="delimiter">]</span> =
    <a href="#253345" title="(f: A =&gt; scalaz.EphemeralStream[B])scalaz.EphemeralStream[B]">flatMap</a><span class="delimiter">(</span><a title="A" id="254741">x</a> =&gt; <a href="#253396" title="(as: B*)scalaz.EphemeralStream[B]">EphemeralStream</a><span class="delimiter">(</span><a href="#254735" title="(v1: A)B">f</a><span class="delimiter">(</span><a href="#254741" title="A">x</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>

  <span class="keyword">def</span> <a title="=&gt; Int" id="253351">length</a> = <span class="delimiter">{</span>
    <span class="keyword">def</span> <a title="(c: =&gt; Int)(a: =&gt; A)Int" id="254763">addOne</a><span class="delimiter">(</span><a title="=&gt; Int" id="254764">c</a>: =&gt; Int<span class="delimiter">)</span><span class="delimiter">(</span><a title="=&gt; A" id="254765">a</a>: =&gt; A<span class="delimiter">)</span> = <span title="Int(1)" class="int">1</span> <span title="(x: Int)Int">+</span> <a href="#254764" title="=&gt; Int">c</a>
    <a href="#253339" title="(z: =&gt; Int)(f: =&gt; Int =&gt; (=&gt; A =&gt; Int))Int">foldLeft</a><span class="delimiter">(</span><span title="Int(0)" class="int">0</span><span class="delimiter">)</span><span class="delimiter">(</span><a href="#254763" title="(c: =&gt; Int)(a: =&gt; A)Int">addOne</a> _<span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="[M[_]](p: A =&gt; M[Boolean])(implicit evidence$1: scalaz.Monad[M])M[Option[A]]" id="254782">findM</a><span class="delimiter">[</span><a title="[_]&gt;: Nothing &lt;: Any" id="253354">M</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="254783">_</a><span class="delimiter">]</span>: Monad<span class="delimiter">]</span><span class="delimiter">(</span><a title="A =&gt; M[Boolean]" id="254781">p</a>: A =&gt; M<span class="delimiter">[</span>Boolean<span class="delimiter">]</span><span class="delimiter">)</span>: <a href="#253354" title="M[Option[A]]">M</a><span class="delimiter">[</span>Option<span class="delimiter">[</span>A<span class="delimiter">]</span><span class="delimiter">]</span> =
    <span title="M[Option[A]]" class="keyword">if</span><span class="delimiter">(</span><a href="#253332" title="=&gt; Boolean">isEmpty</a><span class="delimiter">)</span>
      <a href="Monad.scala.html#254788" title="[F[_]](implicit F: scalaz.Monad[F])scalaz.Monad[F]">Monad</a><a href="#254782" title="(implicit F: scalaz.Monad[M])scalaz.Monad[M]" class="delimiter">[</a><a href="#253354" title="M">M</a><span class="delimiter">]</span>.<a href="Applicative.scala.html#44823" title="(a: =&gt; Option[A])M[Option[A]]">point</a><span class="delimiter">(</span><span title="object None">None</span><span class="delimiter">)</span>
    <span class="keyword">else</span> <span class="delimiter">{</span>
      <span class="keyword">val</span> <a title="A" id="254805">hh</a> = <a href="#253333" title="()A">head</a><span class="delimiter">(</span><span class="delimiter">)</span>
      <a href="Monad.scala.html#254788" title="[F[_]](implicit F: scalaz.Monad[F])scalaz.Monad[F]">Monad</a><a href="#254782" title="(implicit F: scalaz.Monad[M])scalaz.Monad[M]" class="delimiter">[</a><a href="#253354" title="M">M</a><span class="delimiter">]</span>.<a href="Bind.scala.html#44887" title="(fa: M[Boolean])(f: Boolean =&gt; M[Option[A]])M[Option[A]]">bind</a><span class="delimiter">(</span><a href="#254781" title="(v1: A)M[Boolean]">p</a><span class="delimiter">(</span><a href="#254805" title="A">hh</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">(</span><span title="M[Option[A]]" class="keyword">if</span> <span class="delimiter">(</span><a href="#254820" title="Boolean">_</a><span class="delimiter">)</span> <a href="Monad.scala.html#254788" title="[F[_]](implicit F: scalaz.Monad[F])scalaz.Monad[F]">Monad</a><a href="#254782" title="(implicit F: scalaz.Monad[M])scalaz.Monad[M]" class="delimiter">[</a><a href="#253354" title="M">M</a><span class="delimiter">]</span>.<a href="Applicative.scala.html#44823" title="(a: =&gt; Option[A])M[Option[A]]">point</a><span class="delimiter">(</span><span title="(x: A)Some[A]">Some</span><span class="delimiter">(</span><a href="#254805" title="A">hh</a><span class="delimiter">)</span><span class="delimiter">)</span> <span class="keyword">else</span> <a href="#253334" title="()scalaz.EphemeralStream[A]">tail</a><span class="delimiter">(</span><span class="delimiter">)</span> <a href="#254782" title="(p: A =&gt; M[Boolean])(implicit evidence$1: scalaz.Monad[M])M[Option[A]]">findM</a> <a href="#254781" title="A =&gt; M[Boolean]">p</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="=&gt; scalaz.EphemeralStream[A]" id="253355">reverse</a>: <a href="#10638" title="scalaz.EphemeralStream[A]">EphemeralStream</a><span class="delimiter">[</span>A<span class="delimiter">]</span> =
    <a href="#253339" title="(z: =&gt; scalaz.EphemeralStream[A])(f: =&gt; scalaz.EphemeralStream[A] =&gt; (=&gt; A =&gt; scalaz.EphemeralStream[A]))scalaz.EphemeralStream[A]">foldLeft</a><span class="delimiter">(</span><a href="#10639" title="object scalaz.EphemeralStream">EphemeralStream</a>.<a href="#253368" title="[A]=&gt; scalaz.EphemeralStream[A]">emptyEphemeralStream</a><span title="scalaz.EphemeralStream[A]" class="delimiter">[</span><a href="#26420" title="A">A</a><span class="delimiter">]</span><span class="delimiter">)</span><span class="delimiter">(</span><a title="=&gt; scalaz.EphemeralStream[A]" id="254850">a</a> =&gt; <a title="=&gt; A" id="254852">b</a> =&gt; <a href="#10639" title="object scalaz.EphemeralStream">EphemeralStream</a>.<a href="#253371" title="(a: =&gt; A, as: =&gt; scalaz.EphemeralStream[A])java.lang.Object with scalaz.EphemeralStream[A]">cons</a><span class="delimiter">(</span><a href="#254852" title="=&gt; A">b</a>, <a href="#254850" title="=&gt; scalaz.EphemeralStream[A]">a</a><span class="delimiter">)</span><span class="delimiter">)</span>

  <span class="keyword">def</span> <a title="[B](b: =&gt; scalaz.EphemeralStream[B])scalaz.EphemeralStream[(A, B)]" id="253356">zip</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="253358">B</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="=&gt; scalaz.EphemeralStream[B]" id="254862">b</a>: =&gt; EphemeralStream<span class="delimiter">[</span>B<span class="delimiter">]</span><span class="delimiter">)</span>: <a href="#10638" title="scalaz.EphemeralStream[(A, B)]">EphemeralStream</a><span class="delimiter">[</span><span class="delimiter">(</span>A, B<span class="delimiter">)</span><span class="delimiter">]</span> =
    <span title="scalaz.EphemeralStream[(A, B)]" class="keyword">if</span><span class="delimiter">(</span><a href="#253332" title="=&gt; Boolean">isEmpty</a> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <a href="#254862" title="=&gt; scalaz.EphemeralStream[B]">b</a>.<a href="#253332" title="=&gt; Boolean">isEmpty</a><span class="delimiter">)</span>
      <a href="#253368" title="scalaz.EphemeralStream[(A, B)]">emptyEphemeralStream</a>
    <span class="keyword">else</span>
      <a href="#253371" title="(a: =&gt; (A, B), as: =&gt; scalaz.EphemeralStream[(A, B)])java.lang.Object with scalaz.EphemeralStream[(A, B)]">cons</a><span class="delimiter">(</span><span title="(_1: A, _2: B)(A, B)" class="delimiter">(</span><a href="#253333" title="()A">head</a><span class="delimiter">(</span><span class="delimiter">)</span>, <a href="#254862" title="=&gt; scalaz.EphemeralStream[B]">b</a>.<a href="#253333" title="()B">head</a><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span>, <a href="#253334" title="()scalaz.EphemeralStream[A]">tail</a><span class="delimiter">(</span><span class="delimiter">)</span> <a href="#253356" title="(b: =&gt; scalaz.EphemeralStream[B])scalaz.EphemeralStream[(A, B)]">zip</a> <a href="#254862" title="=&gt; scalaz.EphemeralStream[B]">b</a>.<a href="#253334" title="()scalaz.EphemeralStream[B]">tail</a><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span>

  <span class="keyword">def</span> <a title="[X, Y](implicit ev: =:=[A,(X, Y)])(scalaz.EphemeralStream[X], scalaz.EphemeralStream[Y])" id="253359">unzip</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="253362">X</a>, <a title="&gt;: Nothing &lt;: Any" id="253363">Y</a><span class="delimiter">]</span><span class="delimiter">(</span><span class="keyword">implicit</span> <a title="=:=[A,(X, Y)]" id="254884">ev</a>: A <span title="=:=[A,(X, Y)]">=:=</span> <span class="delimiter">(</span>X, Y<span class="delimiter">)</span><span class="delimiter">)</span>: <span title="(scalaz.EphemeralStream[X], scalaz.EphemeralStream[Y])" class="delimiter">(</span>EphemeralStream<span class="delimiter">[</span>X<span class="delimiter">]</span>, EphemeralStream<span class="delimiter">[</span>Y<span class="delimiter">]</span><span class="delimiter">)</span> =
    <a href="#253336" title="(z: =&gt; (scalaz.EphemeralStream[X], scalaz.EphemeralStream[Y]))(f: =&gt; A =&gt; (=&gt; (scalaz.EphemeralStream[X], scalaz.EphemeralStream[Y]) =&gt; (scalaz.EphemeralStream[X], scalaz.EphemeralStream[Y])))(scalaz.EphemeralStream[X], scalaz.EphemeralStream[Y])">foldRight</a><span class="delimiter">(</span><span title="(_1: scalaz.EphemeralStream[X], _2: scalaz.EphemeralStream[Y])(scalaz.EphemeralStream[X], scalaz.EphemeralStream[Y])" class="delimiter">(</span><a href="#253368" title="[A]=&gt; scalaz.EphemeralStream[A]">emptyEphemeralStream</a><span title="scalaz.EphemeralStream[X]" class="delimiter">[</span><a href="#253362" title="X">X</a><span class="delimiter">]</span>, <a href="#253368" title="[A]=&gt; scalaz.EphemeralStream[A]">emptyEphemeralStream</a><span title="scalaz.EphemeralStream[Y]" class="delimiter">[</span><a href="#253363" title="Y">Y</a><span class="delimiter">]</span><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">(</span><a title="=&gt; A" id="254901">q</a> =&gt; <a title="=&gt; (scalaz.EphemeralStream[X], scalaz.EphemeralStream[Y])" id="254903">r</a> =&gt;
      <span title="(_1: java.lang.Object with scalaz.EphemeralStream[X], _2: java.lang.Object with scalaz.EphemeralStream[Y])(java.lang.Object with scalaz.EphemeralStream[X], java.lang.Object with scalaz.EphemeralStream[Y])" class="delimiter">(</span><a href="#253371" title="(a: =&gt; X, as: =&gt; scalaz.EphemeralStream[X])java.lang.Object with scalaz.EphemeralStream[X]">cons</a><span class="delimiter">(</span><a href="#254884" title="(v1: A)(X, Y)">q</a>.<span title="=&gt; X">_1</span>, <a href="#254903" title="=&gt; (scalaz.EphemeralStream[X], scalaz.EphemeralStream[Y])">r</a>.<span title="=&gt; scalaz.EphemeralStream[X]">_1</span><span class="delimiter">)</span>, <a href="#253371" title="(a: =&gt; Y, as: =&gt; scalaz.EphemeralStream[Y])java.lang.Object with scalaz.EphemeralStream[Y]">cons</a><span class="delimiter">(</span><a href="#254884" title="(v1: A)(X, Y)">q</a>.<span title="=&gt; Y">_2</span>, <a href="#254903" title="=&gt; (scalaz.EphemeralStream[X], scalaz.EphemeralStream[Y])">r</a>.<span title="=&gt; scalaz.EphemeralStream[Y]">_2</span><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>

  <span class="keyword">def</span> <a title="(q: scalaz.EphemeralStream[A])scalaz.EphemeralStream[A]" id="253364">interleave</a><span class="delimiter">(</span><a title="scalaz.EphemeralStream[A]" id="254945">q</a>: <a href="#10638" title="scalaz.EphemeralStream[A]">EphemeralStream</a><span class="delimiter">[</span>A<span class="delimiter">]</span><span class="delimiter">)</span>: <a href="#10638" title="scalaz.EphemeralStream[A]">EphemeralStream</a><span class="delimiter">[</span>A<span class="delimiter">]</span> =
    <span title="scalaz.EphemeralStream[A]" class="keyword">if</span><span class="delimiter">(</span><a href="#253332" title="=&gt; Boolean">isEmpty</a><span class="delimiter">)</span>
      <a href="#254945" title="scalaz.EphemeralStream[A]">q</a>
    <span class="keyword">else</span> <span title="scalaz.EphemeralStream[A]" class="keyword">if</span> <span class="delimiter">(</span><a href="#254945" title="scalaz.EphemeralStream[A]">q</a>.<a href="#253332" title="=&gt; Boolean">isEmpty</a><span class="delimiter">)</span>
      <a href="#10638" title="scalaz.EphemeralStream[A]" class="keyword">this</a>
    <span class="keyword">else</span>
      <a href="#253371" title="(a: =&gt; A, as: =&gt; scalaz.EphemeralStream[A])java.lang.Object with scalaz.EphemeralStream[A]">cons</a><span class="delimiter">(</span><a href="#253333" title="()A">head</a><span class="delimiter">(</span><span class="delimiter">)</span>, <a href="#253371" title="(a: =&gt; A, as: =&gt; scalaz.EphemeralStream[A])java.lang.Object with scalaz.EphemeralStream[A]">cons</a><span class="delimiter">(</span><a href="#254945" title="scalaz.EphemeralStream[A]">q</a>.<a href="#253333" title="()A">head</a><span class="delimiter">(</span><span class="delimiter">)</span>, <a href="#253334" title="()scalaz.EphemeralStream[A]">tail</a><span class="delimiter">(</span><span class="delimiter">)</span> <a href="#253364" title="(q: scalaz.EphemeralStream[A])scalaz.EphemeralStream[A]">interleave</a> <a href="#254945" title="scalaz.EphemeralStream[A]">q</a>.<a href="#253334" title="()scalaz.EphemeralStream[A]">tail</a><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>

<span class="delimiter">}</span>

<span class="keyword">object</span> <a title="object scalaz.EphemeralStream" id="10639">EphemeralStream</a> <span title="ScalaObject" class="keyword">extends</span> <a href="#24456" title="scalaz.EphemeralStreamFunctions">EphemeralStreamFunctions</a> <span class="keyword">with</span> <a href="#22386" title="scalaz.EphemeralStreamInstances">EphemeralStreamInstances</a> <span class="delimiter">{</span>
  <span class="keyword">def</span> <a title="[A]=&gt; scalaz.EphemeralStream[A]" id="253393">apply</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="253395">A</a><span class="delimiter">]</span>: <a href="#10638" title="scalaz.EphemeralStream[A]">EphemeralStream</a><span class="delimiter">[</span>A<span class="delimiter">]</span> =
    <a href="#253368" title="scalaz.EphemeralStream[A]">emptyEphemeralStream</a>

  <span class="keyword">def</span> <a title="[A](as: A*)scalaz.EphemeralStream[A]" id="253396">apply</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="253398">A</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="A*" id="254744">as</a>: <span title="A*">A</span>*<span class="delimiter">)</span>: <a href="#10638" title="scalaz.EphemeralStream[A]">EphemeralStream</a><span class="delimiter">[</span>A<span class="delimiter">]</span> =
    <a href="#253374" title="(b: =&gt; Int)(f: Int =&gt; Option[(A, Int)])scalaz.EphemeralStream[A]">unfold</a><span class="delimiter">(</span><span title="Int(0)" class="int">0</span><span class="delimiter">)</span><span class="delimiter">(</span><a title="Int" id="254981">b</a> =&gt;
      <span title="Option[(A, Int)]" class="keyword">if</span> <span class="delimiter">(</span><a href="#254981" title="Int">b</a> <span title="(x: Int)Boolean">&lt;</span> <a href="#254744" title="A*">as</a>.<span title="=&gt; Int">size</span><span class="delimiter">)</span> <span title="(x: (A, Int))Some[(A, Int)]">Some</span><span class="delimiter">(</span><span title="(_1: A, _2: Int)(A, Int)" class="delimiter">(</span><a href="#254744" title="(idx: Int)A">as</a><span class="delimiter">(</span><a href="#254981" title="Int">b</a><span class="delimiter">)</span>, <a href="#254981" title="Int">b</a> <span title="(x: Int)Int">+</span> <span title="Int(1)" class="int">1</span><span class="delimiter">)</span><span class="delimiter">)</span>
      <span class="keyword">else</span> <span title="object None">None</span><span class="delimiter">)</span>
<span class="delimiter">}</span>

<span class="keyword">trait</span> <a title="trait EphemeralStreamInstances extends java.lang.Object with ScalaObject" id="22386">EphemeralStreamInstances</a> <span title="ScalaObject" class="delimiter">{</span>
  <span class="comment">// TODO more instances</span>
  <span class="keyword">implicit</span> <span class="keyword">val</span> <a title="ephemeralStreamInstance extends java.lang.Object with scalaz.MonadPlus[scalaz.EphemeralStream] with scalaz.Zip[scalaz.EphemeralStream] with scalaz.Unzip[scalaz.EphemeralStream] with scalaz.Traverse[scalaz.EphemeralStream]" id="253400">ephemeralStreamInstance</a> = <a href="#255016" title="java.lang.Object with scalaz.MonadPlus[scalaz.EphemeralStream] with scalaz.Zip[scalaz.EphemeralStream] with scalaz.Unzip[scalaz.EphemeralStream] with scalaz.Traverse[scalaz.EphemeralStream]" class="keyword">new</a> <a title="anonymous class $anon extends java.lang.Object with scalaz.MonadPlus[scalaz.EphemeralStream] with scalaz.Zip[scalaz.EphemeralStream] with scalaz.Unzip[scalaz.EphemeralStream] with scalaz.Traverse[scalaz.EphemeralStream]" id="255016">MonadPlus</a><span class="delimiter">[</span>EphemeralStream<span class="delimiter">]</span> <span class="keyword">with</span> <a href="Zip.scala.html#13245" title="scalaz.Zip[scalaz.EphemeralStream]">Zip</a><span class="delimiter">[</span>EphemeralStream<span class="delimiter">]</span> <span class="keyword">with</span> <a href="Unzip.scala.html#17157" title="scalaz.Unzip[scalaz.EphemeralStream]">Unzip</a><span class="delimiter">[</span>EphemeralStream<span class="delimiter">]</span> <span class="keyword">with</span> <a href="Traverse.scala.html#16344" title="scalaz.Traverse[scalaz.EphemeralStream]">Traverse</a><span class="delimiter">[</span>EphemeralStream<span class="delimiter">]</span> <span class="delimiter">{</span>
    <span class="keyword">def</span> <a title="[A](a: scalaz.EphemeralStream[A], b: =&gt; scalaz.EphemeralStream[A])scalaz.EphemeralStream[A]" id="255018">plus</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="255020">A</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="scalaz.EphemeralStream[A]" id="255049">a</a>: <a href="#10638" title="scalaz.EphemeralStream[A]">EphemeralStream</a><span class="delimiter">[</span>A<span class="delimiter">]</span>, <a title="=&gt; scalaz.EphemeralStream[A]" id="255050">b</a>: =&gt; EphemeralStream<span class="delimiter">[</span>A<span class="delimiter">]</span><span class="delimiter">)</span> = <a href="#255049" title="scalaz.EphemeralStream[A]">a</a> <a href="#253344" title="(e: =&gt; scalaz.EphemeralStream[A])scalaz.EphemeralStream[A]">++</a> <a href="#255050" title="=&gt; scalaz.EphemeralStream[A]">b</a>
    <span class="keyword">def</span> <a title="[A, B](fa: scalaz.EphemeralStream[A])(f: A =&gt; scalaz.EphemeralStream[B])scalaz.EphemeralStream[B]" id="255021">bind</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="255024">A</a>, <a title="&gt;: Nothing &lt;: Any" id="255025">B</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="scalaz.EphemeralStream[A]" id="255070">fa</a>: <a href="#10638" title="scalaz.EphemeralStream[A]">EphemeralStream</a><span class="delimiter">[</span>A<span class="delimiter">]</span><span class="delimiter">)</span><span class="delimiter">(</span><a title="A =&gt; scalaz.EphemeralStream[B]" id="255071">f</a>: A =&gt; EphemeralStream<span class="delimiter">[</span>B<span class="delimiter">]</span><span class="delimiter">)</span> = <a href="#255070" title="scalaz.EphemeralStream[A]">fa</a> <a href="#253345" title="(f: A =&gt; scalaz.EphemeralStream[B])scalaz.EphemeralStream[B]">flatMap</a> <a href="#255071" title="A =&gt; scalaz.EphemeralStream[B]">f</a>
    <span class="keyword">def</span> <a title="[A](a: =&gt; A)scalaz.EphemeralStream[A]" id="255026">point</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="255028">A</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="=&gt; A" id="255094">a</a>: =&gt; A<span class="delimiter">)</span> = <a href="#253396" title="(as: A*)scalaz.EphemeralStream[A]">EphemeralStream</a><span class="delimiter">(</span><a href="#255094" title="=&gt; A">a</a><span class="delimiter">)</span>
    <span class="keyword">def</span> <a title="[A]=&gt; scalaz.EphemeralStream[A]" id="255029">empty</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="255031">A</a><span class="delimiter">]</span> = <a href="#253396" title="(as: A*)scalaz.EphemeralStream[A]">EphemeralStream</a><span class="delimiter">(</span><span class="delimiter">)</span>
    <span class="keyword">def</span> <a title="[A, B](a: =&gt; scalaz.EphemeralStream[A], b: =&gt; scalaz.EphemeralStream[B])scalaz.EphemeralStream[(A, B)]" id="255032">zip</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="255035">A</a>, <a title="&gt;: Nothing &lt;: Any" id="255036">B</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="=&gt; scalaz.EphemeralStream[A]" id="255139">a</a>: =&gt; EphemeralStream<span class="delimiter">[</span>A<span class="delimiter">]</span>, <a title="=&gt; scalaz.EphemeralStream[B]" id="255140">b</a>: =&gt; EphemeralStream<span class="delimiter">[</span>B<span class="delimiter">]</span><span class="delimiter">)</span> = <a href="#255139" title="=&gt; scalaz.EphemeralStream[A]">a</a> <a href="#253356" title="(b: =&gt; scalaz.EphemeralStream[B])scalaz.EphemeralStream[(A, B)]">zip</a> <a href="#255140" title="=&gt; scalaz.EphemeralStream[B]">b</a>
    <span class="keyword">def</span> <a title="[A, B](a: scalaz.EphemeralStream[(A, B)])(scalaz.EphemeralStream[A], scalaz.EphemeralStream[B])" id="255037">unzip</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="255040">A</a>, <a title="&gt;: Nothing &lt;: Any" id="255041">B</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="scalaz.EphemeralStream[(A, B)]" id="255174">a</a>: <a href="#10638" title="scalaz.EphemeralStream[(A, B)]">EphemeralStream</a><span class="delimiter">[</span><span class="delimiter">(</span>A, B<span class="delimiter">)</span><span class="delimiter">]</span><span class="delimiter">)</span> = <a href="#255174" title="scalaz.EphemeralStream[(A, B)]">a</a>.<a href="#253359" title="(implicit ev: =:=[(A, B),(A, B)])(scalaz.EphemeralStream[A], scalaz.EphemeralStream[B])">unzip</a>

    <span class="keyword">def</span> <a title="[G[_], A, B](fa: scalaz.EphemeralStream[A])(f: A =&gt; G[B])(implicit G: scalaz.Applicative[G])G[scalaz.EphemeralStream[B]]" id="255042">traverseImpl</a><span class="delimiter">[</span><a title="[_]&gt;: Nothing &lt;: Any" id="255046">G</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="255197">_</a><span class="delimiter">]</span>, <a title="&gt;: Nothing &lt;: Any" id="255047">A</a>, <a title="&gt;: Nothing &lt;: Any" id="255048">B</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="scalaz.EphemeralStream[A]" id="255194">fa</a>: <a href="#10638" title="scalaz.EphemeralStream[A]">EphemeralStream</a><span class="delimiter">[</span>A<span class="delimiter">]</span><span class="delimiter">)</span><span class="delimiter">(</span><a title="A =&gt; G[B]" id="255195">f</a>: A =&gt; G<span class="delimiter">[</span>B<span class="delimiter">]</span><span class="delimiter">)</span><span class="delimiter">(</span><span class="keyword">implicit</span> <a title="scalaz.Applicative[G]" id="255196">G</a>: <a href="Applicative.scala.html#20205" title="scalaz.Applicative[G]">Applicative</a><span class="delimiter">[</span>G<span class="delimiter">]</span><span class="delimiter">)</span>: <a href="#255046" title="G[scalaz.EphemeralStream[B]]">G</a><span class="delimiter">[</span>EphemeralStream<span class="delimiter">[</span>B<span class="delimiter">]</span><span class="delimiter">]</span> = <span class="delimiter">{</span>
      <span class="keyword">val</span> <a title="G[scalaz.EphemeralStream[B]]" id="255298">seed</a>: <a href="#255046" title="G[scalaz.EphemeralStream[B]]">G</a><span class="delimiter">[</span>EphemeralStream<span class="delimiter">[</span>B<span class="delimiter">]</span><span class="delimiter">]</span> = <a href="#255196" title="scalaz.Applicative[G]">G</a>.<a href="Applicative.scala.html#44823" title="(a: =&gt; scalaz.EphemeralStream[B])G[scalaz.EphemeralStream[B]]">point</a><span class="delimiter">(</span><a href="#253396" title="[A](as: A*)scalaz.EphemeralStream[A]">EphemeralStream</a><span title="(as: B*)scalaz.EphemeralStream[B]" class="delimiter">[</span><a href="#255048" title="B">B</a><span class="delimiter">]</span><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span>

      <a href="Traverse.scala.html#43896" title="(fa: scalaz.EphemeralStream[A], z: =&gt; G[scalaz.EphemeralStream[B]])(f: (A, =&gt; G[scalaz.EphemeralStream[B]]) =&gt; G[scalaz.EphemeralStream[B]])G[scalaz.EphemeralStream[B]]">foldRight</a><span class="delimiter">(</span><a href="#255194" title="scalaz.EphemeralStream[A]">fa</a>, <a href="#255298" title="G[scalaz.EphemeralStream[B]]">seed</a><span class="delimiter">)</span> <span class="delimiter">{</span>
        <span class="delimiter">(</span><a title="A" id="255330">x</a>, <a title="=&gt; G[scalaz.EphemeralStream[B]]" id="255331">ys</a><span class="delimiter">)</span> =&gt; <a href="#255196" title="scalaz.Applicative[G]">G</a>.<a href="Applicative.scala.html#44834" title="(fa: =&gt; G[B], fb: =&gt; G[scalaz.EphemeralStream[B]])(f: (B, scalaz.EphemeralStream[B]) =&gt; java.lang.Object with scalaz.EphemeralStream[B])G[java.lang.Object with scalaz.EphemeralStream[B]]">apply2</a><span class="delimiter">(</span><a href="#255195" title="(v1: A)G[B]">f</a><span class="delimiter">(</span><a href="#255330" title="A">x</a><span class="delimiter">)</span>, <a href="#255331" title="=&gt; G[scalaz.EphemeralStream[B]]">ys</a><span class="delimiter">)</span><span class="delimiter">(</span><span class="delimiter">(</span><a title="B" id="255352">b</a>, <a title="scalaz.EphemeralStream[B]" id="255353">bs</a><span class="delimiter">)</span> =&gt; <a href="#10639" title="object scalaz.EphemeralStream">EphemeralStream</a>.<a href="#253371" title="(a: =&gt; B, as: =&gt; scalaz.EphemeralStream[B])java.lang.Object with scalaz.EphemeralStream[B]">cons</a><span class="delimiter">(</span><a href="#255352" title="B">b</a>, <a href="#255353" title="scalaz.EphemeralStream[B]">bs</a><span class="delimiter">)</span><span class="delimiter">)</span>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>

  <span class="delimiter">}</span>
<span class="delimiter">}</span>

<span class="keyword">trait</span> <a title="trait EphemeralStreamFunctions extends java.lang.Object with ScalaObject" id="24456">EphemeralStreamFunctions</a> <span title="ScalaObject" class="delimiter">{</span>
  <span class="keyword">type</span> <a title="[A]scalaz.EphemeralStream[A]" id="253366">EStream</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="253367">A</a><span class="delimiter">]</span> = <a href="#10638" title="scalaz.EphemeralStream[A]">EphemeralStream</a><span class="delimiter">[</span>A<span class="delimiter">]</span>

  <span class="keyword">def</span> <a title="[A]=&gt; scalaz.EphemeralStream[A]" id="253368">emptyEphemeralStream</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="253370">A</a><span class="delimiter">]</span>: <a href="#10638" title="scalaz.EphemeralStream[A]">EphemeralStream</a><span class="delimiter">[</span>A<span class="delimiter">]</span> = <a href="#255520" title="java.lang.Object with scalaz.EphemeralStream[A]" class="keyword">new</a> <a title="anonymous class $anon extends java.lang.Object with scalaz.EphemeralStream[A]" id="255520">EphemeralStream</a><span class="delimiter">[</span>A<span class="delimiter">]</span> <span class="delimiter">{</span>
    <span class="keyword">def</span> <a title="=&gt; Boolean" id="255524">isEmpty</a> = <span title="Boolean(true)" class="keyword">true</span>

    <span class="keyword">def</span> <a title="=&gt; () =&gt; Nothing" id="255525">head</a>: <span class="delimiter">(</span><span class="delimiter">)</span> =&gt; Nothing = <span class="delimiter">(</span><span class="delimiter">)</span> =&gt; sys.<span title="(message: String)Nothing">error</span><span class="delimiter">(</span><span title="java.lang.String(&quot;head of empty stream&quot;)" class="string">&quot;head of empty stream&quot;</span><span class="delimiter">)</span>

    <span class="keyword">def</span> <a title="=&gt; () =&gt; Nothing" id="255526">tail</a>: <span class="delimiter">(</span><span class="delimiter">)</span> =&gt; Nothing = <span class="delimiter">(</span><span class="delimiter">)</span> =&gt; sys.<span title="(message: String)Nothing">error</span><span class="delimiter">(</span><span title="java.lang.String(&quot;tail of empty stream&quot;)" class="string">&quot;tail of empty stream&quot;</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="[A](a: =&gt; A, as: =&gt; scalaz.EphemeralStream[A])java.lang.Object with scalaz.EphemeralStream[A]" id="253371">cons</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="253373">A</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="=&gt; A" id="253402">a</a>: =&gt; A, <a title="=&gt; scalaz.EphemeralStream[A]" id="253403">as</a>: =&gt; EphemeralStream<span class="delimiter">[</span>A<span class="delimiter">]</span><span class="delimiter">)</span> = <a href="#253406" title="java.lang.Object with scalaz.EphemeralStream[A]{}" class="keyword">new</a> <a title="anonymous class $anon extends java.lang.Object with scalaz.EphemeralStream[A]" id="253406">EphemeralStream</a><span class="delimiter">[</span>A<span class="delimiter">]</span> <span class="delimiter">{</span>
    <span class="keyword">def</span> <a title="=&gt; Boolean" id="253408">isEmpty</a> = <span title="Boolean(false)" class="keyword">false</span>

    <span class="keyword">val</span> <a title="() =&gt; A" id="253409">head</a> = <a href="#253389" title="(f: =&gt; A)() =&gt; A">weakMemo</a><span class="delimiter">(</span><a href="#253402" title="=&gt; A">a</a><span class="delimiter">)</span>
    <span class="keyword">val</span> <a title="() =&gt; scalaz.EphemeralStream[A]" id="253411">tail</a> = <a href="#253389" title="(f: =&gt; scalaz.EphemeralStream[A])() =&gt; scalaz.EphemeralStream[A]">weakMemo</a><span class="delimiter">(</span><a href="#253403" title="=&gt; scalaz.EphemeralStream[A]">as</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="[A, B](b: =&gt; B)(f: B =&gt; Option[(A, B)])scalaz.EphemeralStream[A]" id="253374">unfold</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="253377">A</a>, <a title="&gt;: Nothing &lt;: Any" id="253378">B</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="=&gt; B" id="254967">b</a>: =&gt; B<span class="delimiter">)</span><span class="delimiter">(</span><a title="B =&gt; Option[(A, B)]" id="254968">f</a>: B =&gt; Option<span class="delimiter">[</span><span class="delimiter">(</span>A, B<span class="delimiter">)</span><span class="delimiter">]</span><span class="delimiter">)</span>: <a href="#10638" title="scalaz.EphemeralStream[A]">EphemeralStream</a><span class="delimiter">[</span>A<span class="delimiter">]</span> =
    <a href="#254968" title="(v1: B)Option[(A, B)]">f</a><span class="delimiter">(</span><a href="#254967" title="=&gt; B">b</a><span class="delimiter">)</span> <span title="scalaz.EphemeralStream[A]" class="keyword">match</span> <span class="delimiter">{</span>
      <span class="keyword">case</span> <span title="scalaz.EphemeralStream[A]">None</span>         =&gt; <a href="#253368" title="scalaz.EphemeralStream[A]">emptyEphemeralStream</a>
      <span class="keyword">case</span> <span title="cons extends java.lang.Object with scalaz.EphemeralStream[A]">Some</span><span class="delimiter">(</span><span class="delimiter">(</span><a title="A" id="255543">a</a>, <a title="B" id="255544">r</a><span class="delimiter">)</span><span class="delimiter">)</span> =&gt; <a href="#253371" title="(a: =&gt; A, as: =&gt; scalaz.EphemeralStream[A])java.lang.Object with scalaz.EphemeralStream[A]">cons</a><span class="delimiter">(</span><a href="#255543" title="A">a</a>, <a href="#253374" title="(b: =&gt; B)(f: B =&gt; Option[(A, B)])scalaz.EphemeralStream[A]">unfold</a><span class="delimiter">(</span><a href="#255544" title="B">r</a><span class="delimiter">)</span><span class="delimiter">(</span><a href="#254968" title="B =&gt; Option[(A, B)]">f</a><span class="delimiter">)</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="[A](start: A)(f: A =&gt; A)scalaz.EphemeralStream[A]" id="253379">iterate</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="253381">A</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="A" id="255564">start</a>: <a href="#253381" title="A">A</a><span class="delimiter">)</span><span class="delimiter">(</span><a title="A =&gt; A" id="255565">f</a>: A =&gt; A<span class="delimiter">)</span>: <a href="#10638" title="scalaz.EphemeralStream[A]">EphemeralStream</a><span class="delimiter">[</span>A<span class="delimiter">]</span> =
    <a href="#253374" title="(b: =&gt; A)(f: A =&gt; Option[(A, A)])scalaz.EphemeralStream[A]">unfold</a><span class="delimiter">(</span><a href="#255564" title="A">start</a><span class="delimiter">)</span><span class="delimiter">{</span> <a title="A" id="255578">a</a> =&gt;
      <span class="keyword">val</span> <a title="A" id="255579">fa</a> = <a href="#255565" title="(v1: A)A">f</a><span class="delimiter">(</span><a href="#255578" title="A">a</a><span class="delimiter">)</span>
      <span title="(x: (A, A))Some[(A, A)]">Some</span><span class="delimiter">(</span><span title="(_1: A, _2: A)(A, A)" class="delimiter">(</span><a href="#255579" title="A">fa</a>, <a href="#255579" title="A">fa</a><span class="delimiter">)</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="(lower: Int, upper: Int)scalaz.EphemeralStream[Int]" id="253382">range</a><span class="delimiter">(</span><a title="Int" id="255592">lower</a>: <span title="Int">Int</span>, <a title="Int" id="255593">upper</a>: <span title="Int">Int</span><span class="delimiter">)</span>: <a href="#10638" title="scalaz.EphemeralStream[Int]">EphemeralStream</a><span class="delimiter">[</span>Int<span class="delimiter">]</span> =
    <span title="scalaz.EphemeralStream[Int]" class="keyword">if</span> <span class="delimiter">(</span><a href="#255592" title="Int">lower</a> <span title="(x: Int)Boolean">&gt;=</span> <a href="#255593" title="Int">upper</a><span class="delimiter">)</span> <a href="#253368" title="scalaz.EphemeralStream[Int]">emptyEphemeralStream</a> <span class="keyword">else</span> <a href="#253371" title="(a: =&gt; Int, as: =&gt; scalaz.EphemeralStream[Int])java.lang.Object with scalaz.EphemeralStream[Int]">cons</a><span class="delimiter">(</span><a href="#255592" title="Int">lower</a>, <a href="#253382" title="(lower: Int, upper: Int)scalaz.EphemeralStream[Int]">range</a><span class="delimiter">(</span><a href="#255592" title="Int">lower</a> <span title="(x: Int)Int">+</span> <span title="Int(1)" class="int">1</span>, <a href="#255593" title="Int">upper</a><span class="delimiter">)</span><span class="delimiter">)</span>

  <span class="keyword">def</span> <a title="[A](s: =&gt; Stream[A])scalaz.EphemeralStream[A]" id="253383">fromStream</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="253385">A</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="=&gt; Stream[A]" id="255613">s</a>: =&gt; Stream<span class="delimiter">[</span>A<span class="delimiter">]</span><span class="delimiter">)</span>: <a href="#10638" title="scalaz.EphemeralStream[A]">EphemeralStream</a><span class="delimiter">[</span>A<span class="delimiter">]</span> = <a href="#255613" title="=&gt; Stream[A]">s</a> <span title="scalaz.EphemeralStream[A]" class="keyword">match</span> <span class="delimiter">{</span>
    <span class="keyword">case</span> <a href="#255617" title="scalaz.EphemeralStream[A]">Stream</a><span class="delimiter">(</span><span class="delimiter">)</span> =&gt; <a href="#253368" title="scalaz.EphemeralStream[A]">emptyEphemeralStream</a>
    <span class="keyword">case</span> <a title="cons extends java.lang.Object with scalaz.EphemeralStream[A]" id="255663">h</a> <a href="#255645" title="(xs: scala.collection.immutable.Stream[A])Option[(A, scala.collection.immutable.Stream[A])]">#::</a> <a title="scala.collection.immutable.Stream[A]" id="255664">t</a>  =&gt; <a href="#253371" title="(a: =&gt; A, as: =&gt; scalaz.EphemeralStream[A])java.lang.Object with scalaz.EphemeralStream[A]">cons</a><span class="delimiter">(</span><a href="#255663" title="A">h</a>, <a href="#253383" title="(s: =&gt; Stream[A])scalaz.EphemeralStream[A]">fromStream</a><span class="delimiter">(</span><a href="#255664" title="scala.collection.immutable.Stream[A]">t</a><span class="delimiter">)</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">implicit</span> <span class="keyword">def</span> <a title="[A](e: scalaz.EphemeralStream[A])Iterable[A]" id="253386">toIterable</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="253388">A</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="scalaz.EphemeralStream[A]" id="254798">e</a>: <a href="#10638" title="scalaz.EphemeralStream[A]">EphemeralStream</a><span class="delimiter">[</span>A<span class="delimiter">]</span><span class="delimiter">)</span>: <span title="Iterable[A]">Iterable</span><span class="delimiter">[</span>A<span class="delimiter">]</span> = <a href="#255691" title="java.lang.Object with Iterable[A]" class="keyword">new</a> <a title="anonymous class $anon extends java.lang.Object with Iterable[A]" id="255691">Iterable</a><span class="delimiter">[</span>A<span class="delimiter">]</span> <span class="delimiter">{</span>
    <span class="keyword">def</span> <a title="=&gt; java.lang.Object with Iterator[A]" id="256102">iterator</a> = <a href="#256121" title="java.lang.Object with Iterator[A]{}" class="keyword">new</a> <a title="anonymous class $anon extends java.lang.Object with Iterator[A]" id="256121">Iterator</a><span class="delimiter">[</span>A<span class="delimiter">]</span> <span class="delimiter">{</span>
      <span class="keyword">var</span> <a title="scalaz.EphemeralStream[A]" id="256293">cur</a> = <a href="#254798" title="scalaz.EphemeralStream[A]">e</a>

      <span class="keyword">def</span> <a title="()A" id="256295">next</a><span class="delimiter">(</span><span class="delimiter">)</span> = <span class="delimiter">{</span>
        <span class="keyword">val</span> <a title="A" id="256299">t</a> = <a href="#256293" title="=&gt; scalaz.EphemeralStream[A]">cur</a>.<a href="#253333" title="()A">head</a><span class="delimiter">(</span><span class="delimiter">)</span>
        <a href="#256293" title="(x$1: scalaz.EphemeralStream[A])Unit">cur</a> = <a href="#256293" title="=&gt; scalaz.EphemeralStream[A]">cur</a>.<a href="#253334" title="()scalaz.EphemeralStream[A]">tail</a><span class="delimiter">(</span><span class="delimiter">)</span>
        <a href="#256299" title="A">t</a>
      <span class="delimiter">}</span>

      <span class="keyword">def</span> <a title="=&gt; Boolean" id="256296">hasNext</a> = <span title="=&gt; Boolean">!</span><a href="#256293" title="=&gt; scalaz.EphemeralStream[A]">cur</a>.<a href="#253332" title="=&gt; Boolean">isEmpty</a>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="[V](f: =&gt; V)() =&gt; V" id="253389">weakMemo</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="253391">V</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="=&gt; V" id="253418">f</a>: =&gt; V<span class="delimiter">)</span>: <span class="delimiter">(</span><span class="delimiter">)</span> =&gt; V = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="java.lang.Object" id="256316">latch</a> = <span title="java.lang.Object" class="keyword">new</span> <span title="java.lang.Object">Object</span>
    <span class="comment">// TODO I don't think this annotation does anything, as `v` isn't a class member.</span>
    @volatile <span class="keyword">var</span> <a title="Option[java.lang.ref.WeakReference[V]]" id="256317">v</a>: <span title="Option[java.lang.ref.WeakReference[V]]">Option</span><span class="delimiter">[</span>WeakReference<span class="delimiter">[</span>V<span class="delimiter">]</span><span class="delimiter">]</span> = <span title="object None">None</span>
    <span class="delimiter">(</span><span class="delimiter">)</span> =&gt; <span class="delimiter">{</span>
      <span class="keyword">val</span> <a title="Option[V]" id="256361">a</a> = <a href="#256317" title="Option[java.lang.ref.WeakReference[V]]">v</a>.<span title="(f: java.lang.ref.WeakReference[V] =&gt; V)Option[V]">map</span><span class="delimiter">(</span><a title="java.lang.ref.WeakReference[V]" id="256366">x</a> =&gt; <a href="#256366" title="java.lang.ref.WeakReference[V]">x</a>.<span title="()V">get</span><span class="delimiter">)</span>
      <span title="V" class="keyword">if</span> <span class="delimiter">(</span><a href="#256361" title="Option[V]">a</a>.<span title="=&gt; Boolean">isDefined</span> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <a href="#256361" title="Option[V]">a</a>.<span title="=&gt; V">get</span> <span title="(x$1: Any)Boolean">!=</span> <span title="Null(null)" class="keyword">null</span><span class="delimiter">)</span> <a href="#256361" title="Option[V]">a</a>.<span title="=&gt; V">get</span>
      <span class="keyword">else</span> <a href="#256316" title="java.lang.Object">latch</a>.<span title="(x$1: V)V">synchronized</span> <span class="delimiter">{</span>
        <span class="keyword">val</span> <a title="V" id="256370">x</a> = <a href="#253418" title="=&gt; V">f</a>
        <a href="#256317" title="Option[java.lang.ref.WeakReference[V]]">v</a> = <span title="(x: java.lang.ref.WeakReference[V])Some[java.lang.ref.WeakReference[V]]">Some</span><span class="delimiter">(</span><span title="java.lang.ref.WeakReference[V]" class="keyword">new</span> <span title="java.lang.ref.WeakReference[V]">WeakReference</span><span class="delimiter">(</span><a href="#256370" title="V">x</a><span class="delimiter">)</span><span class="delimiter">)</span>
        <a href="#256370" title="V">x</a>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>
<span class="delimiter">}</span>

        </pre>
    </body>
</html>