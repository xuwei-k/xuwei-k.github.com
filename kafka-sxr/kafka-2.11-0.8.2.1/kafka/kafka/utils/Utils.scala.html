<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <title>kafka/kafka/utils/Utils.scala</title>
        <script type="text/javascript" src="../../../jquery-all.js"></script>
        <script type="text/javascript" src="../../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../../style.css" title="Style"></link>
    </head>
    <body>
        <pre>
<span class="comment">/**
 * Licensed to the Apache Software Foundation (ASF) under one or more
 * contributor license agreements.  See the NOTICE file distributed with
 * this work for additional information regarding copyright ownership.
 * The ASF licenses this file to You under the Apache License, Version 2.0
 * (the &quot;License&quot;); you may not use this file except in compliance with
 * the License.  You may obtain a copy of the License at
 * 
 *    http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */</span>

package kafka.utils

import java.io._
import java.nio._
import charset.Charset
import java.nio.channels._
import java.util.concurrent.locks.<span class="delimiter">{</span>ReadWriteLock, Lock<span class="delimiter">}</span>
import java.lang.management._
import javax.management._
import scala.collection._
import scala.collection.mutable
import java.util.Properties
import kafka.common.KafkaException
import kafka.common.KafkaStorageException


<span class="comment">/**
 * General helper functions!
 * 
 * This is for general helper functions that aren't specific to Kafka logic. Things that should have been included in
 * the standard library etc. 
 * 
 * If you are making a new helper function and want to add it to this class please ensure the following:
 * 1. It has documentation
 * 2. It is the most general possible utility, not just the thing you needed in one particular place
 * 3. You have tests for it if it is nontrivial in any way
 */</span>
object <a title="kafka.utils.Utils.type" id="kafka.utils.Utils">Utils</a> extends <a href="Logging.scala.html#kafka.utils;Logging" title="kafka.utils.Logging">Logging</a> <span class="delimiter">{</span>

  <span class="comment">/**
   * Wrap the given function in a java.lang.Runnable
   * @param fun A function
   * @return A Runnable that just executes the function
   */</span>
  def <a title="(fun: =&gt; Unit)Runnable" id="kafka.utils.Utils.runnable">runnable</a><span class="delimiter">(</span><a title="=&gt; Unit" id="kafka.utils.Utils.runnable.fun">fun</a>: =&gt; Unit<span class="delimiter">)</span>: <span title="Runnable">Runnable</span> =
    new <a title="&lt;$anon: Runnable&gt; extends Object with Runnable" id="kafka.utils.Utils.runnable;$anon">Runnable</a> <span class="delimiter">{</span>
      def <a title="()Unit" id="kafka.utils.Utils.runnable;$anon.run">run</a><span class="delimiter">(</span><span class="delimiter">)</span> = <a href="#kafka.utils.Utils.runnable.fun" title="=&gt; Unit">fun</a>
    <span class="delimiter">}</span>

  <span class="comment">/**
   * Create a daemon thread
   * @param runnable The runnable to execute in the background
   * @return The unstarted thread
   */</span>
  def <a title="(runnable: Runnable)Thread" id="kafka.utils.Utils.daemonThread(098614dade)">daemonThread</a><span class="delimiter">(</span><a title="Runnable" id="kafka.utils.Utils.daemonThread(098614dade).runnable">runnable</a>: <span title="Runnable">Runnable</span><span class="delimiter">)</span>: <span title="Thread">Thread</span> =
    <a href="#kafka.utils.Utils.newThread(e0d341aca2)" title="(runnable: Runnable, daemon: Boolean)Thread">newThread</a><span class="delimiter">(</span><a href="#kafka.utils.Utils.daemonThread(098614dade).runnable" title="Runnable">runnable</a>, true<span class="delimiter">)</span>

  <span class="comment">/**
   * Create a daemon thread
   * @param name The name of the thread
   * @param runnable The runnable to execute in the background
   * @return The unstarted thread
   */</span>
  def <a title="(name: String, runnable: Runnable)Thread" id="kafka.utils.Utils.daemonThread(1e92ffc701)">daemonThread</a><span class="delimiter">(</span><a title="String" id="kafka.utils.Utils.daemonThread(1e92ffc701).name">name</a>: <span title="String">String</span>, <a title="Runnable" id="kafka.utils.Utils.daemonThread(1e92ffc701).runnable">runnable</a>: <span title="Runnable">Runnable</span><span class="delimiter">)</span>: <span title="Thread">Thread</span> = 
    <a href="#kafka.utils.Utils.newThread(dc18ba96a6)" title="(name: String, runnable: Runnable, daemon: Boolean)Thread">newThread</a><span class="delimiter">(</span><a href="#kafka.utils.Utils.daemonThread(1e92ffc701).name" title="String">name</a>, <a href="#kafka.utils.Utils.daemonThread(1e92ffc701).runnable" title="Runnable">runnable</a>, true<span class="delimiter">)</span>
  
  <span class="comment">/**
   * Create a daemon thread
   * @param name The name of the thread
   * @param fun The runction to execute in the thread
   * @return The unstarted thread
   */</span>
  def <a title="(name: String, fun: () =&gt; Unit)Thread" id="kafka.utils.Utils.daemonThread(340490157b)">daemonThread</a><span class="delimiter">(</span><a title="String" id="kafka.utils.Utils.daemonThread(340490157b).name">name</a>: <span title="String">String</span>, <a title="() =&gt; Unit" id="kafka.utils.Utils.daemonThread(340490157b).fun">fun</a>: <span class="delimiter">(</span><span class="delimiter">)</span> =&gt; Unit<span class="delimiter">)</span>: <span title="Thread">Thread</span> = 
    <a href="#kafka.utils.Utils.daemonThread(1e92ffc701)" title="(name: String, runnable: Runnable)Thread">daemonThread</a><span class="delimiter">(</span><a href="#kafka.utils.Utils.daemonThread(340490157b).name" title="String">name</a>, <a href="#kafka.utils.Utils.runnable" title="(fun: =&gt; Unit)Runnable">runnable</a><span class="delimiter">(</span><a href="#kafka.utils.Utils.daemonThread(340490157b).fun" title="() =&gt; Unit">fun</a><span class="delimiter">)</span><span class="delimiter">)</span>
  
  <span class="comment">/**
   * Create a new thread
   * @param name The name of the thread
   * @param runnable The work for the thread to do
   * @param daemon Should the thread block JVM shutdown?
   * @return The unstarted thread
   */</span>
  def <a title="(name: String, runnable: Runnable, daemon: Boolean)Thread" id="kafka.utils.Utils.newThread(dc18ba96a6)">newThread</a><span class="delimiter">(</span><a title="String" id="kafka.utils.Utils.newThread(dc18ba96a6).name">name</a>: <span title="String">String</span>, <a title="Runnable" id="kafka.utils.Utils.newThread(dc18ba96a6).runnable">runnable</a>: <span title="Runnable">Runnable</span>, <a title="Boolean" id="kafka.utils.Utils.newThread(dc18ba96a6).daemon">daemon</a>: <span title="Boolean">Boolean</span><span class="delimiter">)</span>: <span title="Thread">Thread</span> = <span class="delimiter">{</span>
    val <a title="Thread" id="kafka.utils.Utils.newThread(dc18ba96a6).thread">thread</a> = new <span title="Thread">Thread</span><span class="delimiter">(</span><a href="#kafka.utils.Utils.newThread(dc18ba96a6).runnable" title="Runnable">runnable</a>, <a href="#kafka.utils.Utils.newThread(dc18ba96a6).name" title="String">name</a><span class="delimiter">)</span> 
    <a href="#kafka.utils.Utils.newThread(dc18ba96a6).thread" title="Thread">thread</a>.<span title="(x$1: Boolean)Unit">setDaemon</span><span class="delimiter">(</span><a href="#kafka.utils.Utils.newThread(dc18ba96a6).daemon" title="Boolean">daemon</a><span class="delimiter">)</span>
    <a href="#kafka.utils.Utils.newThread(dc18ba96a6).thread" title="Thread">thread</a>.<span title="(x$1: java.lang.Thread.UncaughtExceptionHandler)Unit">setUncaughtExceptionHandler</span><span class="delimiter">(</span>new <a title="&lt;$anon: Thread.UncaughtExceptionHandler&gt; extends Object with Thread.UncaughtExceptionHandler" id="kafka.utils.Utils.newThread(dc18ba96a6);$anon">Thread</a>.<a href="#kafka.utils.Utils.newThread(dc18ba96a6);$anon" title="Thread.UncaughtExceptionHandler">UncaughtExceptionHandler</a><span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span>
      def <a title="(t: Thread, e: Throwable)Unit" id="kafka.utils.Utils.newThread(dc18ba96a6);$anon.uncaughtException">uncaughtException</a><span class="delimiter">(</span><a title="Thread" id="kafka.utils.Utils.newThread(dc18ba96a6);$anon.uncaughtException.t">t</a>: <span title="Thread">Thread</span>, <a title="Throwable" id="kafka.utils.Utils.newThread(dc18ba96a6);$anon.uncaughtException.e">e</a>: <span title="Throwable">Throwable</span><span class="delimiter">)</span> <span class="delimiter">{</span>
        <a href="Logging.scala.html#kafka.utils;Logging.error(cfd112d89b)" title="(msg: =&gt; String, e: =&gt; Throwable)Unit">error</a><span class="delimiter">(</span><span title="String(&quot;Uncaught exception in thread \'&quot;)" class="string">&quot;Uncaught exception in thread '&quot;</span> <span title="(x$1: Any)String">+</span> <a href="#kafka.utils.Utils.newThread(dc18ba96a6);$anon.uncaughtException.t" title="Thread">t</a>.<span title="()String">getName</span> <span title="(x$1: Any)String">+</span> <span title="String(&quot;\':&quot;)" class="string">&quot;':&quot;</span>, <a href="#kafka.utils.Utils.newThread(dc18ba96a6);$anon.uncaughtException.e" title="Throwable">e</a><span class="delimiter">)</span>
      <span class="delimiter">}</span> 
    <span class="delimiter">}</span><span class="delimiter">)</span>
    <a href="#kafka.utils.Utils.newThread(dc18ba96a6).thread" title="Thread">thread</a>
  <span class="delimiter">}</span>
   
  <span class="comment">/**
   * Create a new thread
   * @param runnable The work for the thread to do
   * @param daemon Should the thread block JVM shutdown?
   * @return The unstarted thread
   */</span>
  def <a title="(runnable: Runnable, daemon: Boolean)Thread" id="kafka.utils.Utils.newThread(e0d341aca2)">newThread</a><span class="delimiter">(</span><a title="Runnable" id="kafka.utils.Utils.newThread(e0d341aca2).runnable">runnable</a>: <span title="Runnable">Runnable</span>, <a title="Boolean" id="kafka.utils.Utils.newThread(e0d341aca2).daemon">daemon</a>: <span title="Boolean">Boolean</span><span class="delimiter">)</span>: <span title="Thread">Thread</span> = <span class="delimiter">{</span>
    val <a title="Thread" id="kafka.utils.Utils.newThread(e0d341aca2).thread">thread</a> = new <span title="Thread">Thread</span><span class="delimiter">(</span><a href="#kafka.utils.Utils.newThread(e0d341aca2).runnable" title="Runnable">runnable</a><span class="delimiter">)</span>
    <a href="#kafka.utils.Utils.newThread(e0d341aca2).thread" title="Thread">thread</a>.<span title="(x$1: Boolean)Unit">setDaemon</span><span class="delimiter">(</span><a href="#kafka.utils.Utils.newThread(e0d341aca2).daemon" title="Boolean">daemon</a><span class="delimiter">)</span>
    <a href="#kafka.utils.Utils.newThread(e0d341aca2).thread" title="Thread">thread</a>.<span title="(x$1: java.lang.Thread.UncaughtExceptionHandler)Unit">setUncaughtExceptionHandler</span><span class="delimiter">(</span>new <a title="&lt;$anon: Thread.UncaughtExceptionHandler&gt; extends Object with Thread.UncaughtExceptionHandler" id="kafka.utils.Utils.newThread(e0d341aca2);$anon">Thread</a>.<a href="#kafka.utils.Utils.newThread(e0d341aca2);$anon" title="Thread.UncaughtExceptionHandler">UncaughtExceptionHandler</a><span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span>
      def <a title="(t: Thread, e: Throwable)Unit" id="kafka.utils.Utils.newThread(e0d341aca2);$anon.uncaughtException">uncaughtException</a><span class="delimiter">(</span><a title="Thread" id="kafka.utils.Utils.newThread(e0d341aca2);$anon.uncaughtException.t">t</a>: <span title="Thread">Thread</span>, <a title="Throwable" id="kafka.utils.Utils.newThread(e0d341aca2);$anon.uncaughtException.e">e</a>: <span title="Throwable">Throwable</span><span class="delimiter">)</span> <span class="delimiter">{</span>
        <a href="Logging.scala.html#kafka.utils;Logging.error(cfd112d89b)" title="(msg: =&gt; String, e: =&gt; Throwable)Unit">error</a><span class="delimiter">(</span><span title="String(&quot;Uncaught exception in thread \'&quot;)" class="string">&quot;Uncaught exception in thread '&quot;</span> <span title="(x$1: Any)String">+</span> <a href="#kafka.utils.Utils.newThread(e0d341aca2);$anon.uncaughtException.t" title="Thread">t</a>.<span title="()String">getName</span> <span title="(x$1: Any)String">+</span> <span title="String(&quot;\':&quot;)" class="string">&quot;':&quot;</span>, <a href="#kafka.utils.Utils.newThread(e0d341aca2);$anon.uncaughtException.e" title="Throwable">e</a><span class="delimiter">)</span>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span><span class="delimiter">)</span>
    <a href="#kafka.utils.Utils.newThread(e0d341aca2).thread" title="Thread">thread</a>
  <span class="delimiter">}</span>
  
  <span class="comment">/**
   * Read the given byte buffer into a byte array
   */</span>
  def <a title="(buffer: java.nio.ByteBuffer)Array[Byte]" id="kafka.utils.Utils.readBytes(aa917ecdaa)">readBytes</a><span class="delimiter">(</span><a title="java.nio.ByteBuffer" id="kafka.utils.Utils.readBytes(aa917ecdaa).buffer">buffer</a>: <span title="java.nio.ByteBuffer">ByteBuffer</span><span class="delimiter">)</span>: <span title="Array[Byte]">Array</span><span class="delimiter">[</span>Byte<span class="delimiter">]</span> = <a href="#kafka.utils.Utils.readBytes(b2ab19c440)" title="(buffer: java.nio.ByteBuffer, offset: Int, size: Int)Array[Byte]">readBytes</a><span class="delimiter">(</span><a href="#kafka.utils.Utils.readBytes(aa917ecdaa).buffer" title="java.nio.ByteBuffer">buffer</a>, <span title="Int(0)" class="int">0</span>, <a href="#kafka.utils.Utils.readBytes(aa917ecdaa).buffer" title="java.nio.ByteBuffer">buffer</a>.<span title="()Int">limit</span><span class="delimiter">)</span>

  <span class="comment">/**
   * Read a byte array from the given offset and size in the buffer
   */</span>
  def <a title="(buffer: java.nio.ByteBuffer, offset: Int, size: Int)Array[Byte]" id="kafka.utils.Utils.readBytes(b2ab19c440)">readBytes</a><span class="delimiter">(</span><a title="java.nio.ByteBuffer" id="kafka.utils.Utils.readBytes(b2ab19c440).buffer">buffer</a>: <span title="java.nio.ByteBuffer">ByteBuffer</span>, <a title="Int" id="kafka.utils.Utils.readBytes(b2ab19c440).offset">offset</a>: <span title="Int">Int</span>, <a title="Int" id="kafka.utils.Utils.readBytes(b2ab19c440).size">size</a>: <span title="Int">Int</span><span class="delimiter">)</span>: <span title="Array[Byte]">Array</span><span class="delimiter">[</span>Byte<span class="delimiter">]</span> = <span class="delimiter">{</span>
    val <a title="Array[Byte]" id="kafka.utils.Utils.readBytes(b2ab19c440).dest">dest</a> = new <span title="Array[Byte]">Array</span><span class="delimiter">[</span>Byte<span class="delimiter">]</span><span class="delimiter">(</span><a href="#kafka.utils.Utils.readBytes(b2ab19c440).size" title="Int">size</a><span class="delimiter">)</span>
    if<span class="delimiter">(</span><a href="#kafka.utils.Utils.readBytes(b2ab19c440).buffer" title="java.nio.ByteBuffer">buffer</a>.<span title="()Boolean">hasArray</span><span class="delimiter">)</span> <span class="delimiter">{</span>
      <span title="System.type">System</span>.<span title="(x$1: Any, x$2: Int, x$3: Any, x$4: Int, x$5: Int)Unit">arraycopy</span><span class="delimiter">(</span><a href="#kafka.utils.Utils.readBytes(b2ab19c440).buffer" title="java.nio.ByteBuffer">buffer</a>.<span title="()Array[Byte]">array</span>, <a href="#kafka.utils.Utils.readBytes(b2ab19c440).buffer" title="java.nio.ByteBuffer">buffer</a>.<span title="()Int">arrayOffset</span><span class="delimiter">(</span><span class="delimiter">)</span> <span title="(x: Int)Int">+</span> <a href="#kafka.utils.Utils.readBytes(b2ab19c440).offset" title="Int">offset</a>, <a href="#kafka.utils.Utils.readBytes(b2ab19c440).dest" title="Array[Byte]">dest</a>, <span title="Int(0)" class="int">0</span>, <a href="#kafka.utils.Utils.readBytes(b2ab19c440).size" title="Int">size</a><span class="delimiter">)</span>
    <span class="delimiter">}</span> else <span class="delimiter">{</span>
      <a href="#kafka.utils.Utils.readBytes(b2ab19c440).buffer" title="java.nio.ByteBuffer">buffer</a>.<span title="()java.nio.Buffer">mark</span><span class="delimiter">(</span><span class="delimiter">)</span>
      <a href="#kafka.utils.Utils.readBytes(b2ab19c440).buffer" title="java.nio.ByteBuffer">buffer</a>.<span title="(x$1: Array[Byte])java.nio.ByteBuffer">get</span><span class="delimiter">(</span><a href="#kafka.utils.Utils.readBytes(b2ab19c440).dest" title="Array[Byte]">dest</a><span class="delimiter">)</span>
      <a href="#kafka.utils.Utils.readBytes(b2ab19c440).buffer" title="java.nio.ByteBuffer">buffer</a>.<span title="()java.nio.Buffer">reset</span><span class="delimiter">(</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>
    <a href="#kafka.utils.Utils.readBytes(b2ab19c440).dest" title="Array[Byte]">dest</a>
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Read a properties file from the given path
   * @param filename The path of the file to read
   */</span>
   def <a title="(filename: String)java.util.Properties" id="kafka.utils.Utils.loadProps">loadProps</a><span class="delimiter">(</span><a title="String" id="kafka.utils.Utils.loadProps.filename">filename</a>: <span title="String">String</span><span class="delimiter">)</span>: <span title="java.util.Properties">Properties</span> = <span class="delimiter">{</span>
     val <a title="java.util.Properties" id="kafka.utils.Utils.loadProps.props">props</a> = new <span title="java.util.Properties">Properties</span><span class="delimiter">(</span><span class="delimiter">)</span>
     var <a title="java.io.InputStream" id="kafka.utils.Utils.loadProps.propStream">propStream</a>: <span title="java.io.InputStream">InputStream</span> = null
     try <span class="delimiter">{</span>
       <a href="#kafka.utils.Utils.loadProps.propStream" title="java.io.InputStream">propStream</a> = new <span title="java.io.FileInputStream">FileInputStream</span><span class="delimiter">(</span><a href="#kafka.utils.Utils.loadProps.filename" title="String">filename</a><span class="delimiter">)</span>
       <a href="#kafka.utils.Utils.loadProps.props" title="java.util.Properties">props</a>.<span title="(x$1: java.io.InputStream)Unit">load</span><span class="delimiter">(</span><a href="#kafka.utils.Utils.loadProps.propStream" title="java.io.InputStream">propStream</a><span class="delimiter">)</span>
     <span class="delimiter">}</span> finally <span class="delimiter">{</span>
       if<span class="delimiter">(</span><a href="#kafka.utils.Utils.loadProps.propStream" title="java.io.InputStream">propStream</a> <span title="(x$1: Any)Boolean">!=</span> null<span class="delimiter">)</span>
         <a href="#kafka.utils.Utils.loadProps.propStream" title="java.io.InputStream">propStream</a>.<span title="()Unit">close</span>
     <span class="delimiter">}</span>
     <a href="#kafka.utils.Utils.loadProps.props" title="java.util.Properties">props</a>
   <span class="delimiter">}</span>

  <span class="comment">/**
   * Open a channel for the given file
   */</span>
  def <a title="(file: java.io.File, mutable: Boolean)java.nio.channels.FileChannel" id="kafka.utils.Utils.openChannel">openChannel</a><span class="delimiter">(</span><a title="java.io.File" id="kafka.utils.Utils.openChannel.file">file</a>: <span title="java.io.File">File</span>, <a title="Boolean" id="kafka.utils.Utils.openChannel.mutable">mutable</a>: <span title="Boolean">Boolean</span><span class="delimiter">)</span>: <span title="java.nio.channels.FileChannel">FileChannel</span> = <span class="delimiter">{</span>
    if<span class="delimiter">(</span><a href="#kafka.utils.Utils.openChannel.mutable" title="Boolean">mutable</a><span class="delimiter">)</span>
      new <span title="java.io.RandomAccessFile">RandomAccessFile</span><span class="delimiter">(</span><a href="#kafka.utils.Utils.openChannel.file" title="java.io.File">file</a>, <span title="String(&quot;rw&quot;)" class="string">&quot;rw&quot;</span><span class="delimiter">)</span>.<span title="()java.nio.channels.FileChannel">getChannel</span><span class="delimiter">(</span><span class="delimiter">)</span>
    else
      new <span title="java.io.FileInputStream">FileInputStream</span><span class="delimiter">(</span><a href="#kafka.utils.Utils.openChannel.file" title="java.io.File">file</a><span class="delimiter">)</span>.<span title="()java.nio.channels.FileChannel">getChannel</span><span class="delimiter">(</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>
  
  <span class="comment">/**
   * Do the given action and log any exceptions thrown without rethrowing them
   * @param log The log method to use for logging. E.g. logger.warn
   * @param action The action to execute
   */</span>
  def <a title="(log: (Object, Throwable) =&gt; Unit, action: =&gt; Unit)Unit" id="kafka.utils.Utils.swallow(5db0239460)">swallow</a><span class="delimiter">(</span><a title="(Object, Throwable) =&gt; Unit" id="kafka.utils.Utils.swallow(5db0239460).log">log</a>: <span class="delimiter">(</span>Object, Throwable<span class="delimiter">)</span> =&gt; Unit, <a title="=&gt; Unit" id="kafka.utils.Utils.swallow(5db0239460).action">action</a>: =&gt; Unit<span class="delimiter">)</span> <span class="delimiter">{</span>
    try <span class="delimiter">{</span>
      <a href="#kafka.utils.Utils.swallow(5db0239460).action" title="=&gt; Unit">action</a>
    <span class="delimiter">}</span> catch <span class="delimiter">{</span>
      case <a title="Throwable" id="kafka.utils.Utils.swallow(5db0239460).e">e</a>: <span title="Throwable">Throwable</span> =&gt; <a href="#kafka.utils.Utils.swallow(5db0239460).log" title="(v1: Object, v2: Throwable)Unit">log</a><span class="delimiter">(</span><a href="#kafka.utils.Utils.swallow(5db0239460).e" title="Throwable">e</a>.<span title="()String">getMessage</span><span class="delimiter">(</span><span class="delimiter">)</span>, <a href="#kafka.utils.Utils.swallow(5db0239460).e" title="Throwable">e</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>
  
  <span class="comment">/**
   * Test if two byte buffers are equal. In this case equality means having
   * the same bytes from the current position to the limit
   */</span>
  def <a title="(b1: java.nio.ByteBuffer, b2: java.nio.ByteBuffer)Boolean" id="kafka.utils.Utils.equal">equal</a><span class="delimiter">(</span><a title="java.nio.ByteBuffer" id="kafka.utils.Utils.equal.b1">b1</a>: <span title="java.nio.ByteBuffer">ByteBuffer</span>, <a title="java.nio.ByteBuffer" id="kafka.utils.Utils.equal.b2">b2</a>: <span title="java.nio.ByteBuffer">ByteBuffer</span><span class="delimiter">)</span>: <span title="Boolean">Boolean</span> = <span class="delimiter">{</span>
    <span class="comment">// two byte buffers are equal if their position is the same,</span>
    <span class="comment">// their remaining bytes are the same, and their contents are the same</span>
    if<span class="delimiter">(</span><a href="#kafka.utils.Utils.equal.b1" title="java.nio.ByteBuffer">b1</a>.<span title="()Int">position</span> <span title="(x: Int)Boolean">!=</span> <a href="#kafka.utils.Utils.equal.b2" title="java.nio.ByteBuffer">b2</a>.<span title="()Int">position</span><span class="delimiter">)</span>
      return false
    if<span class="delimiter">(</span><a href="#kafka.utils.Utils.equal.b1" title="java.nio.ByteBuffer">b1</a>.<span title="()Int">remaining</span> <span title="(x: Int)Boolean">!=</span> <a href="#kafka.utils.Utils.equal.b2" title="java.nio.ByteBuffer">b2</a>.<span title="()Int">remaining</span><span class="delimiter">)</span>
      return false
    for<span class="delimiter">(</span><a title="Int" id="kafka.utils.Utils.equal.$anonfun.i">i</a> &lt;- <span title="implicit scala.LowPriorityImplicits.intWrapper : (x: Int)scala.runtime.RichInt" class="int">0</span> <span title="(f: Int =&gt; Unit)Unit">until</span> <a href="#kafka.utils.Utils.equal.b1" title="java.nio.ByteBuffer">b1</a>.<span title="()Int">remaining</span><span class="delimiter">)</span>
      if<span class="delimiter">(</span><a href="#kafka.utils.Utils.equal.b1" title="java.nio.ByteBuffer">b1</a>.<span title="(x$1: Int)Byte">get</span><span class="delimiter">(</span><a href="#kafka.utils.Utils.equal.$anonfun.i" title="Int">i</a><span class="delimiter">)</span> <span title="(x: Byte)Boolean">!=</span> <a href="#kafka.utils.Utils.equal.b2" title="java.nio.ByteBuffer">b2</a>.<span title="(x$1: Int)Byte">get</span><span class="delimiter">(</span><a href="#kafka.utils.Utils.equal.$anonfun.i" title="Int">i</a><span class="delimiter">)</span><span class="delimiter">)</span>
        return false
    return true
  <span class="delimiter">}</span>
  
  <span class="comment">/**
   * Translate the given buffer into a string
   * @param buffer The buffer to translate
   * @param encoding The encoding to use in translating bytes to characters
   */</span>
  def <a title="(buffer: java.nio.ByteBuffer, encoding: String)String" id="kafka.utils.Utils.readString">readString</a><span class="delimiter">(</span><a title="java.nio.ByteBuffer" id="kafka.utils.Utils.readString.buffer">buffer</a>: <span title="java.nio.ByteBuffer">ByteBuffer</span>, <a title="String" id="kafka.utils.Utils.readString$default$2">encoding</a>: <span title="String">String</span> = <span title="java.nio.charset.Charset.type">Charset</span>.<span title="()java.nio.charset.Charset">defaultCharset</span>.<span title="()String">toString</span><span class="delimiter">)</span>: <span title="String">String</span> = <span class="delimiter">{</span>
    val <a title="Array[Byte]" id="kafka.utils.Utils.readString.bytes">bytes</a> = new <span title="Array[Byte]">Array</span><span class="delimiter">[</span>Byte<span class="delimiter">]</span><span class="delimiter">(</span><a href="#kafka.utils.Utils.readString.buffer" title="java.nio.ByteBuffer">buffer</a>.<span title="()Int">remaining</span><span class="delimiter">)</span>
    <a href="#kafka.utils.Utils.readString.buffer" title="java.nio.ByteBuffer">buffer</a>.<span title="(x$1: Array[Byte])java.nio.ByteBuffer">get</span><span class="delimiter">(</span><a href="#kafka.utils.Utils.readString.bytes" title="Array[Byte]">bytes</a><span class="delimiter">)</span>
    new <span title="String">String</span><span class="delimiter">(</span><a href="#kafka.utils.Utils.readString.bytes" title="Array[Byte]">bytes</a>, <a href="#kafka.utils.Utils.readString$default$2" title="String">encoding</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>
  
  <span class="comment">/**
   * Print an error message and shutdown the JVM
   * @param message The error message
   */</span>
  def <a title="(message: String)Unit" id="kafka.utils.Utils.croak">croak</a><span class="delimiter">(</span><a title="String" id="kafka.utils.Utils.croak.message">message</a>: <span title="String">String</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span title="System.type">System</span>.<span title="java.io.PrintStream">err</span>.<span title="(x$1: String)Unit">println</span><span class="delimiter">(</span><a href="#kafka.utils.Utils.croak.message" title="String">message</a><span class="delimiter">)</span>
    <span title="System.type">System</span>.<span title="(x$1: Int)Unit">exit</span><span class="delimiter">(</span><span title="Int(1)" class="int">1</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>
  
  <span class="comment">/**
   * Recursively delete the given file/directory and any subfiles (if any exist)
   * @param file The root file at which to begin deleting
   */</span>
  def <a title="(file: String)Unit" id="kafka.utils.Utils.rm(90cc6393d5)">rm</a><span class="delimiter">(</span><a title="String" id="kafka.utils.Utils.rm(90cc6393d5).file">file</a>: <span title="String">String</span><span class="delimiter">)</span>: <span title="Unit">Unit</span> = <a href="#kafka.utils.Utils.rm(e3f9ce1f75)" title="(file: java.io.File)Unit">rm</a><span class="delimiter">(</span>new <span title="java.io.File">File</span><span class="delimiter">(</span><a href="#kafka.utils.Utils.rm(90cc6393d5).file" title="String">file</a><span class="delimiter">)</span><span class="delimiter">)</span>
  
  <span class="comment">/**
   * Recursively delete the list of files/directories and any subfiles (if any exist)
   * @param a sequence of files to be deleted
   */</span>
  def <a title="(files: Seq[String])Unit" id="kafka.utils.Utils.rm(580767ea6d)">rm</a><span class="delimiter">(</span><a title="Seq[String]" id="kafka.utils.Utils.rm(580767ea6d).files">files</a>: <span title="Seq[String]">Seq</span><span class="delimiter">[</span>String<span class="delimiter">]</span><span class="delimiter">)</span>: <span title="Unit">Unit</span> = <a href="#kafka.utils.Utils.rm(580767ea6d).files" title="Seq[String]">files</a>.<span title="(f: String =&gt; Unit)(implicit bf: scala.collection.generic.CanBuildFrom[Seq[String],Unit,Any])Any">map</span><span title="scala.collection.generic.CanBuildFrom[scala.collection.Seq.Coll,Unit,Seq[Unit]]" class="delimiter">(</span><a title="String" id="kafka.utils.Utils.rm(580767ea6d).$anonfun.f">f</a> =&gt; <a href="#kafka.utils.Utils.rm(e3f9ce1f75)" title="(file: java.io.File)Unit">rm</a><span class="delimiter">(</span>new <span title="java.io.File">File</span><span class="delimiter">(</span><a href="#kafka.utils.Utils.rm(580767ea6d).$anonfun.f" title="String">f</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
  
  <span class="comment">/**
   * Recursively delete the given file/directory and any subfiles (if any exist)
   * @param file The root file at which to begin deleting
   */</span>
  def <a title="(file: java.io.File)Unit" id="kafka.utils.Utils.rm(e3f9ce1f75)">rm</a><span class="delimiter">(</span><a title="java.io.File" id="kafka.utils.Utils.rm(e3f9ce1f75).file">file</a>: <span title="java.io.File">File</span><span class="delimiter">)</span> <span class="delimiter">{</span>
	  if<span class="delimiter">(</span><a href="#kafka.utils.Utils.rm(e3f9ce1f75).file" title="java.io.File">file</a> <span title="(x$1: Any)Boolean">==</span> null<span class="delimiter">)</span> <span class="delimiter">{</span>
	    return
	  <span class="delimiter">}</span> else if<span class="delimiter">(</span><a href="#kafka.utils.Utils.rm(e3f9ce1f75).file" title="java.io.File">file</a>.<span title="()Boolean">isDirectory</span><span class="delimiter">)</span> <span class="delimiter">{</span>
	    val <a title="Array[java.io.File]" id="kafka.utils.Utils.rm(e3f9ce1f75).files">files</a> = <a href="#kafka.utils.Utils.rm(e3f9ce1f75).file" title="java.io.File">file</a>.<span title="()Array[java.io.File]">listFiles</span><span class="delimiter">(</span><span class="delimiter">)</span>
	    if<span class="delimiter">(</span><a href="#kafka.utils.Utils.rm(e3f9ce1f75).files" title="Array[java.io.File]">files</a> <span title="(x$1: Any)Boolean">!=</span> null<span class="delimiter">)</span> <span class="delimiter">{</span>
	      for<span class="delimiter">(</span><a title="java.io.File" id="kafka.utils.Utils.rm(e3f9ce1f75).$anonfun.f">f</a> &lt;- <a href="#kafka.utils.Utils.rm(e3f9ce1f75).files" title="(f: java.io.File =&gt; Unit)Unit">files</a><span class="delimiter">)</span>
	        <a href="#kafka.utils.Utils.rm(e3f9ce1f75)" title="(file: java.io.File)Unit">rm</a><span class="delimiter">(</span><a href="#kafka.utils.Utils.rm(e3f9ce1f75).$anonfun.f" title="java.io.File">f</a><span class="delimiter">)</span>
	    <span class="delimiter">}</span>
	    <a href="#kafka.utils.Utils.rm(e3f9ce1f75).file" title="java.io.File">file</a>.<span title="()Boolean">delete</span><span title="Unit" class="delimiter">(</span><span class="delimiter">)</span>
	  <span class="delimiter">}</span> else <span class="delimiter">{</span>
	    <a href="#kafka.utils.Utils.rm(e3f9ce1f75).file" title="java.io.File">file</a>.<span title="()Boolean">delete</span><span title="Unit" class="delimiter">(</span><span class="delimiter">)</span>
	  <span class="delimiter">}</span>
  <span class="delimiter">}</span>
  
  <span class="comment">/**
   * Register the given mbean with the platform mbean server,
   * unregistering any mbean that was there before. Note,
   * this method will not throw an exception if the registration
   * fails (since there is nothing you can do and it isn't fatal),
   * instead it just returns false indicating the registration failed.
   * @param mbean The object to register as an mbean
   * @param name The name to register this mbean with
   * @return true if the registration succeeded
   */</span>
  def <a title="(mbean: Object, name: String)Boolean" id="kafka.utils.Utils.registerMBean">registerMBean</a><span class="delimiter">(</span><a title="Object" id="kafka.utils.Utils.registerMBean.mbean">mbean</a>: <span title="Object">Object</span>, <a title="String" id="kafka.utils.Utils.registerMBean.name">name</a>: <span title="String">String</span><span class="delimiter">)</span>: <span title="Boolean">Boolean</span> = <span class="delimiter">{</span>
    try <span class="delimiter">{</span>
      val <a title="javax.management.MBeanServer" id="kafka.utils.Utils.registerMBean.mbs">mbs</a> = <span title="java.lang.management.ManagementFactory.type">ManagementFactory</span>.<span title="()javax.management.MBeanServer">getPlatformMBeanServer</span><span class="delimiter">(</span><span class="delimiter">)</span>
      <a href="#kafka.utils.Utils.registerMBean.mbs" title="javax.management.MBeanServer">mbs</a> <span title="(x$1: Boolean)Boolean">synchronized</span> <span class="delimiter">{</span>
        val <a title="javax.management.ObjectName" id="kafka.utils.Utils.registerMBean.objName">objName</a> = new <span title="javax.management.ObjectName">ObjectName</span><span class="delimiter">(</span><a href="#kafka.utils.Utils.registerMBean.name" title="String">name</a><span class="delimiter">)</span>
        if<span class="delimiter">(</span><a href="#kafka.utils.Utils.registerMBean.mbs" title="javax.management.MBeanServer">mbs</a>.<span title="(x$1: javax.management.ObjectName)Boolean">isRegistered</span><span class="delimiter">(</span><a href="#kafka.utils.Utils.registerMBean.objName" title="javax.management.ObjectName">objName</a><span class="delimiter">)</span><span class="delimiter">)</span>
          <a href="#kafka.utils.Utils.registerMBean.mbs" title="javax.management.MBeanServer">mbs</a>.<span title="(x$1: javax.management.ObjectName)Unit">unregisterMBean</span><span class="delimiter">(</span><a href="#kafka.utils.Utils.registerMBean.objName" title="javax.management.ObjectName">objName</a><span class="delimiter">)</span>
        <a href="#kafka.utils.Utils.registerMBean.mbs" title="javax.management.MBeanServer">mbs</a>.<span title="(x$1: Any, x$2: javax.management.ObjectName)javax.management.ObjectInstance">registerMBean</span><span class="delimiter">(</span><a href="#kafka.utils.Utils.registerMBean.mbean" title="Object">mbean</a>, <a href="#kafka.utils.Utils.registerMBean.objName" title="javax.management.ObjectName">objName</a><span class="delimiter">)</span>
        true
      <span class="delimiter">}</span>
    <span class="delimiter">}</span> catch <span class="delimiter">{</span>
      case <a title="Exception" id="kafka.utils.Utils.registerMBean.e">e</a>: <span title="Exception">Exception</span> =&gt; <span class="delimiter">{</span>
        <a href="Logging.scala.html#kafka.utils;Logging.error(cfd112d89b)" title="(msg: =&gt; String, e: =&gt; Throwable)Unit">error</a><span class="delimiter">(</span><span title="String(&quot;Failed to register Mbean &quot;)" class="string">&quot;Failed to register Mbean &quot;</span> <span title="(x$1: Any)String">+</span> <a href="#kafka.utils.Utils.registerMBean.name" title="String">name</a>, <a href="#kafka.utils.Utils.registerMBean.e" title="Exception">e</a><span class="delimiter">)</span>
        false
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>
  
  <span class="comment">/**
   * Unregister the mbean with the given name, if there is one registered
   * @param name The mbean name to unregister
   */</span>
  def <a title="(name: String)Unit" id="kafka.utils.Utils.unregisterMBean">unregisterMBean</a><span class="delimiter">(</span><a title="String" id="kafka.utils.Utils.unregisterMBean.name">name</a>: <span title="String">String</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    val <a title="javax.management.MBeanServer" id="kafka.utils.Utils.unregisterMBean.mbs">mbs</a> = <span title="java.lang.management.ManagementFactory.type">ManagementFactory</span>.<span title="()javax.management.MBeanServer">getPlatformMBeanServer</span><span class="delimiter">(</span><span class="delimiter">)</span>
    <a href="#kafka.utils.Utils.unregisterMBean.mbs" title="javax.management.MBeanServer">mbs</a> <span title="(x$1: Unit)Unit">synchronized</span> <span class="delimiter">{</span>
      val <a title="javax.management.ObjectName" id="kafka.utils.Utils.unregisterMBean.objName">objName</a> = new <span title="javax.management.ObjectName">ObjectName</span><span class="delimiter">(</span><a href="#kafka.utils.Utils.unregisterMBean.name" title="String">name</a><span class="delimiter">)</span>
      if<span class="delimiter">(</span><a href="#kafka.utils.Utils.unregisterMBean.mbs" title="javax.management.MBeanServer">mbs</a>.<span title="(x$1: javax.management.ObjectName)Boolean">isRegistered</span><span class="delimiter">(</span><a href="#kafka.utils.Utils.unregisterMBean.objName" title="javax.management.ObjectName">objName</a><span class="delimiter">)</span><span class="delimiter">)</span>
        <a href="#kafka.utils.Utils.unregisterMBean.mbs" title="javax.management.MBeanServer">mbs</a>.<span title="(x$1: javax.management.ObjectName)Unit">unregisterMBean</span><span class="delimiter">(</span><a href="#kafka.utils.Utils.unregisterMBean.objName" title="javax.management.ObjectName">objName</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>
  
  <span class="comment">/**
   * Read an unsigned integer from the current position in the buffer, 
   * incrementing the position by 4 bytes
   * @param buffer The buffer to read from
   * @return The integer read, as a long to avoid signedness
   */</span>
  def <a title="(buffer: java.nio.ByteBuffer)Long" id="kafka.utils.Utils.readUnsignedInt(edf1a76ca4)">readUnsignedInt</a><span class="delimiter">(</span><a title="java.nio.ByteBuffer" id="kafka.utils.Utils.readUnsignedInt(edf1a76ca4).buffer">buffer</a>: <span title="java.nio.ByteBuffer">ByteBuffer</span><span class="delimiter">)</span>: <span title="Long">Long</span> = 
    <a href="#kafka.utils.Utils.readUnsignedInt(edf1a76ca4).buffer" title="java.nio.ByteBuffer">buffer</a>.<span title="()Int">getInt</span><span class="delimiter">(</span><span class="delimiter">)</span> <span title="(x: Long)Long">&amp;</span> <span title="Long(4294967295L)" class="long">0xffffffffL</span>
  
  <span class="comment">/**
   * Read an unsigned integer from the given position without modifying the buffers
   * position
   * @param buffer the buffer to read from
   * @param index the index from which to read the integer
   * @return The integer read, as a long to avoid signedness
   */</span>
  def <a title="(buffer: java.nio.ByteBuffer, index: Int)Long" id="kafka.utils.Utils.readUnsignedInt(584fd39e10)">readUnsignedInt</a><span class="delimiter">(</span><a title="java.nio.ByteBuffer" id="kafka.utils.Utils.readUnsignedInt(584fd39e10).buffer">buffer</a>: <span title="java.nio.ByteBuffer">ByteBuffer</span>, <a title="Int" id="kafka.utils.Utils.readUnsignedInt(584fd39e10).index">index</a>: <span title="Int">Int</span><span class="delimiter">)</span>: <span title="Long">Long</span> = 
    <a href="#kafka.utils.Utils.readUnsignedInt(584fd39e10).buffer" title="java.nio.ByteBuffer">buffer</a>.<span title="(x$1: Int)Int">getInt</span><span class="delimiter">(</span><a href="#kafka.utils.Utils.readUnsignedInt(584fd39e10).index" title="Int">index</a><span class="delimiter">)</span> <span title="(x: Long)Long">&amp;</span> <span title="Long(4294967295L)" class="long">0xffffffffL</span>
  
  <span class="comment">/**
   * Write the given long value as a 4 byte unsigned integer. Overflow is ignored.
   * @param buffer The buffer to write to
   * @param value The value to write
   */</span>
  def <a title="(buffer: java.nio.ByteBuffer, value: Long)Unit" id="kafka.utils.Utils.writetUnsignedInt">writetUnsignedInt</a><span class="delimiter">(</span><a title="java.nio.ByteBuffer" id="kafka.utils.Utils.writetUnsignedInt.buffer">buffer</a>: <span title="java.nio.ByteBuffer">ByteBuffer</span>, <a title="Long" id="kafka.utils.Utils.writetUnsignedInt.value">value</a>: <span title="Long">Long</span><span class="delimiter">)</span>: <span title="Unit">Unit</span> = 
    <a href="#kafka.utils.Utils.writetUnsignedInt.buffer" title="java.nio.ByteBuffer">buffer</a>.<span title="(x$1: Int)java.nio.ByteBuffer">putInt</span><span title="Unit" class="delimiter">(</span><span class="delimiter">(</span><a href="#kafka.utils.Utils.writetUnsignedInt.value" title="Long">value</a> <span title="(x: Long)Long">&amp;</span> <span title="Long(4294967295L)" class="long">0xffffffffL</span><span class="delimiter">)</span>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="Int" class="delimiter">[</span><span title="Int">Int</span><span class="delimiter">]</span><span class="delimiter">)</span>
  
  <span class="comment">/**
   * Write the given long value as a 4 byte unsigned integer. Overflow is ignored.
   * @param buffer The buffer to write to
   * @param index The position in the buffer at which to begin writing
   * @param value The value to write
   */</span>
  def <a title="(buffer: java.nio.ByteBuffer, index: Int, value: Long)Unit" id="kafka.utils.Utils.writeUnsignedInt">writeUnsignedInt</a><span class="delimiter">(</span><a title="java.nio.ByteBuffer" id="kafka.utils.Utils.writeUnsignedInt.buffer">buffer</a>: <span title="java.nio.ByteBuffer">ByteBuffer</span>, <a title="Int" id="kafka.utils.Utils.writeUnsignedInt.index">index</a>: <span title="Int">Int</span>, <a title="Long" id="kafka.utils.Utils.writeUnsignedInt.value">value</a>: <span title="Long">Long</span><span class="delimiter">)</span>: <span title="Unit">Unit</span> = 
    <a href="#kafka.utils.Utils.writeUnsignedInt.buffer" title="java.nio.ByteBuffer">buffer</a>.<span title="(x$1: Int, x$2: Int)java.nio.ByteBuffer">putInt</span><span title="Unit" class="delimiter">(</span><a href="#kafka.utils.Utils.writeUnsignedInt.index" title="Int">index</a>, <span class="delimiter">(</span><a href="#kafka.utils.Utils.writeUnsignedInt.value" title="Long">value</a> <span title="(x: Long)Long">&amp;</span> <span title="Long(4294967295L)" class="long">0xffffffffL</span><span class="delimiter">)</span>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="Int" class="delimiter">[</span><span title="Int">Int</span><span class="delimiter">]</span><span class="delimiter">)</span>
  
  <span class="comment">/**
   * Compute the CRC32 of the byte array
   * @param bytes The array to compute the checksum for
   * @return The CRC32
   */</span>
  def <a title="(bytes: Array[Byte])Long" id="kafka.utils.Utils.crc32(267361ddb4)">crc32</a><span class="delimiter">(</span><a title="Array[Byte]" id="kafka.utils.Utils.crc32(267361ddb4).bytes">bytes</a>: <span title="Array[Byte]">Array</span><span class="delimiter">[</span>Byte<span class="delimiter">]</span><span class="delimiter">)</span>: <span title="Long">Long</span> = <a href="#kafka.utils.Utils.crc32(d2e8164043)" title="(bytes: Array[Byte], offset: Int, size: Int)Long">crc32</a><span class="delimiter">(</span><a href="#kafka.utils.Utils.crc32(267361ddb4).bytes" title="Array[Byte]">bytes</a>, <span title="Int(0)" class="int">0</span>, <a href="#kafka.utils.Utils.crc32(267361ddb4).bytes" title="Array[Byte]">bytes</a>.<span title="=&gt; Int">length</span><span class="delimiter">)</span>
  
  <span class="comment">/**
   * Compute the CRC32 of the segment of the byte array given by the specificed size and offset
   * @param bytes The bytes to checksum
   * @param offset the offset at which to begin checksumming
   * @param size the number of bytes to checksum
   * @return The CRC32
   */</span>
  def <a title="(bytes: Array[Byte], offset: Int, size: Int)Long" id="kafka.utils.Utils.crc32(d2e8164043)">crc32</a><span class="delimiter">(</span><a title="Array[Byte]" id="kafka.utils.Utils.crc32(d2e8164043).bytes">bytes</a>: <span title="Array[Byte]">Array</span><span class="delimiter">[</span>Byte<span class="delimiter">]</span>, <a title="Int" id="kafka.utils.Utils.crc32(d2e8164043).offset">offset</a>: <span title="Int">Int</span>, <a title="Int" id="kafka.utils.Utils.crc32(d2e8164043).size">size</a>: <span title="Int">Int</span><span class="delimiter">)</span>: <span title="Long">Long</span> = <span class="delimiter">{</span>
    val <a title="kafka.utils.Crc32" id="kafka.utils.Utils.crc32(d2e8164043).crc">crc</a> = new <a href="Crc32.java.html#kafka.utils;Crc32" title="kafka.utils.Crc32">Crc32</a><span class="delimiter">(</span><span class="delimiter">)</span>
    <a href="#kafka.utils.Utils.crc32(d2e8164043).crc" title="kafka.utils.Crc32">crc</a>.<a href="Crc32.java.html#kafka.utils;Crc32.update(d1e731cd20)" title="(b: Array[Byte], off: Int, len: Int)Unit">update</a><span class="delimiter">(</span><a href="#kafka.utils.Utils.crc32(d2e8164043).bytes" title="Array[Byte]">bytes</a>, <a href="#kafka.utils.Utils.crc32(d2e8164043).offset" title="Int">offset</a>, <a href="#kafka.utils.Utils.crc32(d2e8164043).size" title="Int">size</a><span class="delimiter">)</span>
    <a href="#kafka.utils.Utils.crc32(d2e8164043).crc" title="kafka.utils.Crc32">crc</a>.<a href="Crc32.java.html#kafka.utils;Crc32.getValue" title="()Long">getValue</a><span class="delimiter">(</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>
  
  <span class="comment">/**
   * Compute the hash code for the given items
   */</span>
  def <a title="(as: Any*)Int" id="kafka.utils.Utils.hashcode">hashcode</a><span class="delimiter">(</span><a title="Any*" id="kafka.utils.Utils.hashcode.as">as</a>: <span title="Any*">Any</span>*<span class="delimiter">)</span>: <span title="Int">Int</span> = <span class="delimiter">{</span>
    if<span class="delimiter">(</span><a href="#kafka.utils.Utils.hashcode.as" title="Any*">as</a> <span title="(x$1: Any)Boolean">==</span> null<span class="delimiter">)</span>
      return <span title="Int(0)" class="int">0</span>
    var <a title="Int" id="kafka.utils.Utils.hashcode.h">h</a> = <span title="Int(1)" class="int">1</span>
    var <a title="Int" id="kafka.utils.Utils.hashcode.i">i</a> = <span title="Int(0)" class="int">0</span>
    while<span class="delimiter">(</span><a href="#kafka.utils.Utils.hashcode.i" title="Int">i</a> <span title="(x: Int)Boolean">&lt;</span> <a href="#kafka.utils.Utils.hashcode.as" title="Any*">as</a>.<span title="=&gt; Int">length</span><span class="delimiter">)</span> <span class="delimiter">{</span>
      if<span class="delimiter">(</span><a href="#kafka.utils.Utils.hashcode.as" title="(idx: Int)Any">as</a><span class="delimiter">(</span><a href="#kafka.utils.Utils.hashcode.i" title="Int">i</a><span class="delimiter">)</span> <span title="(x$1: Any)Boolean">!=</span> null<span class="delimiter">)</span> <span class="delimiter">{</span>
        <a href="#kafka.utils.Utils.hashcode.h" title="Int">h</a> = <span title="Int(31)" class="int">31</span> <span title="(x: Int)Int">*</span> <a href="#kafka.utils.Utils.hashcode.h" title="Int">h</a> <span title="(x: Int)Int">+</span> <a href="#kafka.utils.Utils.hashcode.as" title="(idx: Int)Any">as</a><span class="delimiter">(</span><a href="#kafka.utils.Utils.hashcode.i" title="Int">i</a><span class="delimiter">)</span>.<span title="()Int">hashCode</span>
        <a href="#kafka.utils.Utils.hashcode.i" title="Int">i</a> <span title="(x: Int)Int">+=</span> <span title="Int(1)" class="int">1</span>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>
    return <a href="#kafka.utils.Utils.hashcode.h" title="Int">h</a>
  <span class="delimiter">}</span>
  
  <span class="comment">/**
   * Group the given values by keys extracted with the given function
   */</span>
  def <a title="[K, V](vals: Iterable[V], f: V =&gt; K)scala.collection.Map[K,List[V]]" id="kafka.utils.Utils.groupby">groupby</a><span class="delimiter">[</span><a title="" id="kafka.utils.Utils.groupby;K">K</a>,<a title="" id="kafka.utils.Utils.groupby;V">V</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="Iterable[V]" id="kafka.utils.Utils.groupby.vals">vals</a>: <span title="Iterable[V]">Iterable</span><span class="delimiter">[</span>V<span class="delimiter">]</span>, <a title="V =&gt; K" id="kafka.utils.Utils.groupby.f">f</a>: V =&gt; K<span class="delimiter">)</span>: <span title="scala.collection.Map[K,List[V]]">Map</span><span class="delimiter">[</span>K,List<span class="delimiter">[</span>V<span class="delimiter">]</span><span class="delimiter">]</span> = <span class="delimiter">{</span>
    val <a title="scala.collection.mutable.HashMap[K,List[V]]" id="kafka.utils.Utils.groupby.m">m</a> = new mutable.<span title="scala.collection.mutable.HashMap[K,List[V]]">HashMap</span><span class="delimiter">[</span>K, List<span class="delimiter">[</span>V<span class="delimiter">]</span><span class="delimiter">]</span>
    for<span class="delimiter">(</span><a title="V" id="kafka.utils.Utils.groupby.$anonfun.v">v</a> &lt;- <a href="#kafka.utils.Utils.groupby.vals" title="(f: V =&gt; Option[List[V]])Unit">vals</a><span class="delimiter">)</span> <span class="delimiter">{</span>
      val <a title="K" id="kafka.utils.Utils.groupby.$anonfun.k">k</a> = <a href="#kafka.utils.Utils.groupby.f" title="(v1: V)K">f</a><span class="delimiter">(</span><a href="#kafka.utils.Utils.groupby.$anonfun.v" title="V">v</a><span class="delimiter">)</span>
      <a href="#kafka.utils.Utils.groupby.m" title="scala.collection.mutable.HashMap[K,List[V]]">m</a>.<span title="(key: K)Option[List[V]]">get</span><span class="delimiter">(</span><a href="#kafka.utils.Utils.groupby.$anonfun.k" title="K">k</a><span class="delimiter">)</span> match <span class="delimiter">{</span>
        case Some<span class="delimiter">(</span><a title="List[V]" id="kafka.utils.Utils.groupby.$anonfun.l">l</a>: <span title="List[V]">List</span><span class="delimiter">[</span>V<span class="delimiter">]</span><span class="delimiter">)</span> =&gt; <a href="#kafka.utils.Utils.groupby.m" title="scala.collection.mutable.HashMap[K,List[V]]">m</a>.<span title="(key: K, value: List[V])Option[List[V]]">put</span><span class="delimiter">(</span><a href="#kafka.utils.Utils.groupby.$anonfun.k" title="K">k</a>, <a href="#kafka.utils.Utils.groupby.$anonfun.v" title="V">v</a> <a href="#kafka.utils.Utils.groupby.$anonfun.x$1" title="(x: V)List[V]">::</a> <a href="#kafka.utils.Utils.groupby.$anonfun.l" title="List[V]">l</a><span class="delimiter">)</span>
        case <span title="None.type">None</span> =&gt; <a href="#kafka.utils.Utils.groupby.m" title="scala.collection.mutable.HashMap[K,List[V]]">m</a>.<span title="(key: K, value: List[V])Option[List[V]]">put</span><span class="delimiter">(</span><a href="#kafka.utils.Utils.groupby.$anonfun.k" title="K">k</a>, <span title="(xs: V*)List[V]">List</span><span class="delimiter">(</span><a href="#kafka.utils.Utils.groupby.$anonfun.v" title="V">v</a><span class="delimiter">)</span><span class="delimiter">)</span>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span> 
    <a href="#kafka.utils.Utils.groupby.m" title="scala.collection.mutable.HashMap[K,List[V]]">m</a>
  <span class="delimiter">}</span>
  
  <span class="comment">/**
   * Read some bytes into the provided buffer, and return the number of bytes read. If the 
   * channel has been closed or we get -1 on the read for any reason, throw an EOFException
   */</span>
  def <a title="(channel: java.nio.channels.ReadableByteChannel, buffer: java.nio.ByteBuffer)Int" id="kafka.utils.Utils.read">read</a><span class="delimiter">(</span><a title="java.nio.channels.ReadableByteChannel" id="kafka.utils.Utils.read.channel">channel</a>: <span title="java.nio.channels.ReadableByteChannel">ReadableByteChannel</span>, <a title="java.nio.ByteBuffer" id="kafka.utils.Utils.read.buffer">buffer</a>: <span title="java.nio.ByteBuffer">ByteBuffer</span><span class="delimiter">)</span>: <span title="Int">Int</span> = <span class="delimiter">{</span>
    <a href="#kafka.utils.Utils.read.channel" title="java.nio.channels.ReadableByteChannel">channel</a>.<span title="(x$1: java.nio.ByteBuffer)Int">read</span><span class="delimiter">(</span><a href="#kafka.utils.Utils.read.buffer" title="java.nio.ByteBuffer">buffer</a><span class="delimiter">)</span> match <span class="delimiter">{</span>
      case <span title="Int(-1)">-</span><span class="int">1</span> =&gt; throw new <span title="java.io.EOFException">EOFException</span><span class="delimiter">(</span><span title="String(&quot;Received -1 when reading from channel, socket has likely been closed.&quot;)" class="string">&quot;Received -1 when reading from channel, socket has likely been closed.&quot;</span><span class="delimiter">)</span>
      case <a title="Int" id="kafka.utils.Utils.read.n">n</a>: <span title="Int">Int</span> =&gt; <a href="#kafka.utils.Utils.read.n" title="Int">n</a>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span> 
  
  <span class="comment">/**
   * Throw an exception if the given value is null, else return it. You can use this like:
   * val myValue = Utils.notNull(expressionThatShouldntBeNull)
   */</span>
  def <a title="[V](v: V)V" id="kafka.utils.Utils.notNull">notNull</a><span class="delimiter">[</span><a title="" id="kafka.utils.Utils.notNull;V">V</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="V" id="kafka.utils.Utils.notNull.v">v</a>: <a href="#kafka.utils.Utils.notNull;V" title="V">V</a><span class="delimiter">)</span> = <span class="delimiter">{</span>
    if<span class="delimiter">(</span><a href="#kafka.utils.Utils.notNull.v" title="V">v</a> <span title="(x$1: Any)Boolean">==</span> null<span class="delimiter">)</span>
      throw new <a href="../common/KafkaException.scala.html#kafka.common;KafkaException" title="kafka.common.KafkaException">KafkaException</a><span class="delimiter">(</span><span title="String(&quot;Value cannot be null.&quot;)" class="string">&quot;Value cannot be null.&quot;</span><span class="delimiter">)</span>
    else
      <a href="#kafka.utils.Utils.notNull.v" title="V">v</a>
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Get the stack trace from an exception as a string
   */</span>
  def <a title="(e: Throwable)String" id="kafka.utils.Utils.stackTrace">stackTrace</a><span class="delimiter">(</span><a title="Throwable" id="kafka.utils.Utils.stackTrace.e">e</a>: <span title="Throwable">Throwable</span><span class="delimiter">)</span>: <span title="String">String</span> = <span class="delimiter">{</span>
    val <a title="java.io.StringWriter" id="kafka.utils.Utils.stackTrace.sw">sw</a> = new <span title="java.io.StringWriter">StringWriter</span>
    val <a title="java.io.PrintWriter" id="kafka.utils.Utils.stackTrace.pw">pw</a> = new <span title="java.io.PrintWriter">PrintWriter</span><span class="delimiter">(</span><a href="#kafka.utils.Utils.stackTrace.sw" title="java.io.StringWriter">sw</a><span class="delimiter">)</span>
    <a href="#kafka.utils.Utils.stackTrace.e" title="Throwable">e</a>.<span title="(x$1: java.io.PrintWriter)Unit">printStackTrace</span><span class="delimiter">(</span><a href="#kafka.utils.Utils.stackTrace.pw" title="java.io.PrintWriter">pw</a><span class="delimiter">)</span>
    <a href="#kafka.utils.Utils.stackTrace.sw" title="java.io.StringWriter">sw</a>.<span title="()String">toString</span><span class="delimiter">(</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="comment">/**
   * This method gets comma separated values which contains key,value pairs and returns a map of
   * key value pairs. the format of allCSVal is key1:val1, key2:val2 ....
   */</span>
  def <a title="(str: String)scala.collection.Map[String,String]" id="kafka.utils.Utils.parseCsvMap">parseCsvMap</a><span class="delimiter">(</span><a title="String" id="kafka.utils.Utils.parseCsvMap.str">str</a>: <span title="String">String</span><span class="delimiter">)</span>: <span title="scala.collection.Map[String,String]">Map</span><span class="delimiter">[</span>String, String<span class="delimiter">]</span> = <span class="delimiter">{</span>
    val <a title="scala.collection.mutable.HashMap[String,String]" id="kafka.utils.Utils.parseCsvMap.map">map</a> = new mutable.<span title="scala.collection.mutable.HashMap[String,String]">HashMap</span><span class="delimiter">[</span>String, String<span class="delimiter">]</span>
    if<span class="delimiter">(</span><span title="String(&quot;&quot;)" class="string">&quot;&quot;</span>.<span title="(x$1: Any)Boolean">equals</span><span class="delimiter">(</span><a href="#kafka.utils.Utils.parseCsvMap.str" title="String">str</a><span class="delimiter">)</span><span class="delimiter">)</span>
      return <a href="#kafka.utils.Utils.parseCsvMap.map" title="scala.collection.mutable.HashMap[String,String]">map</a>    
    val <a title="Array[Array[String]]" id="kafka.utils.Utils.parseCsvMap.keyVals">keyVals</a> = <a href="#kafka.utils.Utils.parseCsvMap.str" title="String">str</a>.<span title="(x$1: String)Array[String]">split</span><span title="(xs: Array[String])scala.collection.mutable.ArrayOps[String]" class="delimiter">(</span><span title="String(&quot;\\s*,\\s*&quot;)" class="string">&quot;\\s*,\\s*&quot;</span><span class="delimiter">)</span>.<span title="(f: String =&gt; Array[String])(implicit bf: scala.collection.generic.CanBuildFrom[Array[String],Array[String],Array[Array[String]]])Array[Array[String]]">map</span><span title="(implicit t: scala.reflect.ClassTag[Array[String]])scala.collection.generic.CanBuildFrom[Array[_],Array[String],Array[Array[String]]]" class="delimiter">(</span><a title="String" id="kafka.utils.Utils.parseCsvMap.keyVals.$anonfun.s">s</a> =&gt; <a href="#kafka.utils.Utils.parseCsvMap.keyVals.$anonfun.s" title="String">s</a>.<span title="(x$1: String)Array[String]">split</span><span class="delimiter">(</span><span title="String(&quot;\\s*:\\s*&quot;)" class="string">&quot;\\s*:\\s*&quot;</span><span class="delimiter">)</span><span class="delimiter">)</span>
    <a href="#kafka.utils.Utils.parseCsvMap.keyVals" title="(xs: Array[Array[String]])scala.collection.mutable.ArrayOps[Array[String]]">keyVals</a>.<span title="(f: Array[String] =&gt; (String, String))(implicit bf: scala.collection.generic.CanBuildFrom[Array[Array[String]],(String, String),Array[(String, String)]])Array[(String, String)]">map</span><span title="(xs: Array[(String, String)])scala.collection.mutable.ArrayOps[(String, String)]" class="delimiter">(</span><a title="Array[String]" id="kafka.utils.Utils.parseCsvMap.$anonfun.pair">pair</a> =&gt; <span title="(_1: String, _2: String)(String, String)" class="delimiter">(</span><a href="#kafka.utils.Utils.parseCsvMap.$anonfun.pair" title="(i: Int)String">pair</a><span class="delimiter">(</span><span title="Int(0)" class="int">0</span><span class="delimiter">)</span>, <a href="#kafka.utils.Utils.parseCsvMap.$anonfun.pair" title="(i: Int)String">pair</a><span class="delimiter">(</span><span title="Int(1)" class="int">1</span><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>.<span title="(implicit ev: &lt;:&lt;[(String, String),(String, String)])scala.collection.immutable.Map[String,String]">toMap</span>
  <span class="delimiter">}</span>
  
  <span class="comment">/**
   * Parse a comma separated string into a sequence of strings.
   * Whitespace surrounding the comma will be removed.
   */</span>
  def <a title="(csvList: String)Seq[String]" id="kafka.utils.Utils.parseCsvList">parseCsvList</a><span class="delimiter">(</span><a title="String" id="kafka.utils.Utils.parseCsvList.csvList">csvList</a>: <span title="String">String</span><span class="delimiter">)</span>: <span title="Seq[String]">Seq</span><span class="delimiter">[</span>String<span class="delimiter">]</span> = <span class="delimiter">{</span>
    if<span class="delimiter">(</span><a href="#kafka.utils.Utils.parseCsvList.csvList" title="String">csvList</a> <span title="(x$1: Any)Boolean">==</span> null <span title="(x: Boolean)Boolean">||</span> <a href="#kafka.utils.Utils.parseCsvList.csvList" title="String">csvList</a>.<span title="()Boolean">isEmpty</span><span class="delimiter">)</span>
      <span title="scala.collection.Seq.type">Seq</span>.<span title="[A]=&gt; Seq[A]">empty</span><span title="Seq[String]" class="delimiter">[</span><span title="String">String</span><span class="delimiter">]</span>
    else <span class="delimiter">{</span>
      <a href="#kafka.utils.Utils.parseCsvList.csvList" title="String">csvList</a>.<span title="(x$1: String)Array[String]">split</span><span title="(xs: Array[String])scala.collection.mutable.ArrayOps[String]" class="delimiter">(</span><span title="String(&quot;\\s*,\\s*&quot;)" class="string">&quot;\\s*,\\s*&quot;</span><span class="delimiter">)</span>.<span title="(p: String =&gt; Boolean)Array[String]">filter</span><span title="(xs: Array[String])scala.collection.mutable.WrappedArray[String]" class="delimiter">(</span><a title="String" id="kafka.utils.Utils.parseCsvList.$anonfun.v">v</a> =&gt; <span title="=&gt; Boolean">!</span><a href="#kafka.utils.Utils.parseCsvList.$anonfun.v" title="String">v</a>.<span title="(x$1: Any)Boolean">equals</span><span class="delimiter">(</span><span title="String(&quot;&quot;)" class="string">&quot;&quot;</span><span class="delimiter">)</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Create an instance of the class with the given class name
   */</span>
  def <a title="[T &lt;: AnyRef](className: String, args: AnyRef*)T" id="kafka.utils.Utils.createObject">createObject</a><span class="delimiter">[</span><a title=" &lt;: AnyRef" id="kafka.utils.Utils.createObject;T">T</a>&lt;:AnyRef<span class="delimiter">]</span><span class="delimiter">(</span><a title="String" id="kafka.utils.Utils.createObject.className">className</a>: <span title="String">String</span>, <a title="AnyRef*" id="kafka.utils.Utils.createObject.args">args</a>: <span title="AnyRef*">AnyRef</span>*<span class="delimiter">)</span>: <a href="#kafka.utils.Utils.createObject;T" title="T">T</a> = <span class="delimiter">{</span>
    val <a title="Class[T]" id="kafka.utils.Utils.createObject.klass">klass</a> = <span title="Class.type">Class</span>.<span title="(x$1: String)Class[_]">forName</span><span class="delimiter">(</span><a href="#kafka.utils.Utils.createObject.className" title="String">className</a><span class="delimiter">)</span>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="Class[T]" class="delimiter">[</span><span title="Class[T]">Class</span><span class="delimiter">[</span>T<span class="delimiter">]</span><span class="delimiter">]</span>
    val <a title="java.lang.reflect.Constructor[T]" id="kafka.utils.Utils.createObject.constructor">constructor</a> = <a href="#kafka.utils.Utils.createObject.klass" title="Class[T]">klass</a>.<span title="(x$1: Class[_]*)java.lang.reflect.Constructor[T]">getConstructor</span><span class="delimiter">(</span><a href="#kafka.utils.Utils.createObject.args" title="AnyRef*">args</a>.<span title="(f: AnyRef =&gt; Class[_ &lt;: AnyRef])(implicit bf: scala.collection.generic.CanBuildFrom[Seq[AnyRef],Class[_ &lt;: AnyRef],Seq[Class[_ &lt;: AnyRef]]])Seq[Class[_ &lt;: AnyRef]]">map</span><span title="scala.collection.generic.CanBuildFrom[scala.collection.Seq.Coll,Class[_ &lt;: AnyRef],Seq[Class[_ &lt;: AnyRef]]]" class="delimiter">(</span><a href="#kafka.utils.Utils.createObject.constructor.$anonfun.x$2" title="AnyRef">_</a>.<span title="()Class[_]">getClass</span><span class="delimiter">)</span>: _*<span class="delimiter">)</span>
    <a href="#kafka.utils.Utils.createObject.constructor" title="java.lang.reflect.Constructor[T]">constructor</a>.<span title="(x$1: Object*)T">newInstance</span><span class="delimiter">(</span><a href="#kafka.utils.Utils.createObject.args" title="AnyRef*">args</a>: _*<span class="delimiter">)</span>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="T" class="delimiter">[</span><a href="#kafka.utils.Utils.createObject;T" title="T">T</a><span class="delimiter">]</span>
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Is the given string null or empty (&quot;&quot;)?
   */</span>
  def <a title="(s: String)Boolean" id="kafka.utils.Utils.nullOrEmpty">nullOrEmpty</a><span class="delimiter">(</span><a title="String" id="kafka.utils.Utils.nullOrEmpty.s">s</a>: <span title="String">String</span><span class="delimiter">)</span>: <span title="Boolean">Boolean</span> = <a href="#kafka.utils.Utils.nullOrEmpty.s" title="String">s</a> <span title="(x$1: Any)Boolean">==</span> null <span title="(x: Boolean)Boolean">||</span> <a href="#kafka.utils.Utils.nullOrEmpty.s" title="String">s</a>.<span title="(x$1: Any)Boolean">equals</span><span class="delimiter">(</span><span title="String(&quot;&quot;)" class="string">&quot;&quot;</span><span class="delimiter">)</span>

  <span class="comment">/**
   * Create a circular (looping) iterator over a collection.
   * @param coll An iterable over the underlying collection.
   * @return A circular iterator over the collection.
   */</span>
  def <a title="[T](coll: Iterable[T])Iterator[T]" id="kafka.utils.Utils.circularIterator">circularIterator</a><span class="delimiter">[</span><a title="" id="kafka.utils.Utils.circularIterator;T">T</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="Iterable[T]" id="kafka.utils.Utils.circularIterator.coll">coll</a>: <span title="Iterable[T]">Iterable</span><span class="delimiter">[</span>T<span class="delimiter">]</span><span class="delimiter">)</span> = <span class="delimiter">{</span>
    val <a title="Stream[T]" id="kafka.utils.Utils.circularIterator.stream">stream</a>: <span title="Stream[T]">Stream</span><span class="delimiter">[</span>T<span class="delimiter">]</span> =
      for <span class="delimiter">(</span><a title="Int" id="kafka.utils.Utils.circularIterator.stream.$anonfun.forever">forever</a> &lt;- <span title="=&gt; collection.immutable.Stream.type">Stream</span>.<span title="(elem: =&gt; Int)scala.collection.immutable.Stream[Int]">continually</span><span title="(f: Int =&gt; scala.collection.GenTraversableOnce[T])(implicit bf: scala.collection.generic.CanBuildFrom[scala.collection.immutable.Stream[Int],T,Stream[T]])Stream[T]" class="delimiter">(</span><span title="Int(1)" class="int">1</span><span class="delimiter">)</span>; <a title="T" id="kafka.utils.Utils.circularIterator.stream.$anonfun.$anonfun.t">t</a> &lt;- <a href="#kafka.utils.Utils.circularIterator.coll" title="(f: T =&gt; T)(implicit bf: scala.collection.generic.CanBuildFrom[Iterable[T],T,Iterable[T]])Iterable[T]">coll</a><span class="delimiter">)</span> yield <a href="#kafka.utils.Utils.circularIterator.stream.$anonfun.$anonfun.t" title="T">t</a>
    <a href="#kafka.utils.Utils.circularIterator.stream" title="Stream[T]">stream</a>.<span title="=&gt; Iterator[T]">iterator</span>
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Attempt to read a file as a string
   */</span>
  def <a title="(path: String, charset: java.nio.charset.Charset)String" id="kafka.utils.Utils.readFileAsString">readFileAsString</a><span class="delimiter">(</span><a title="String" id="kafka.utils.Utils.readFileAsString.path">path</a>: <span title="String">String</span>, <a title="java.nio.charset.Charset" id="kafka.utils.Utils.readFileAsString$default$2">charset</a>: <span title="java.nio.charset.Charset">Charset</span> = <span title="java.nio.charset.Charset.type">Charset</span>.<span title="()java.nio.charset.Charset">defaultCharset</span><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span>: <span title="String">String</span> = <span class="delimiter">{</span>
    val <a title="java.io.FileInputStream" id="kafka.utils.Utils.readFileAsString.stream">stream</a> = new <span title="java.io.FileInputStream">FileInputStream</span><span class="delimiter">(</span>new <span title="java.io.File">File</span><span class="delimiter">(</span><a href="#kafka.utils.Utils.readFileAsString.path" title="String">path</a><span class="delimiter">)</span><span class="delimiter">)</span>
    try <span class="delimiter">{</span>
      val <a title="java.nio.channels.FileChannel" id="kafka.utils.Utils.readFileAsString.fc">fc</a> = <a href="#kafka.utils.Utils.readFileAsString.stream" title="java.io.FileInputStream">stream</a>.<span title="()java.nio.channels.FileChannel">getChannel</span><span class="delimiter">(</span><span class="delimiter">)</span>
      val <a title="java.nio.MappedByteBuffer" id="kafka.utils.Utils.readFileAsString.bb">bb</a> = <a href="#kafka.utils.Utils.readFileAsString.fc" title="java.nio.channels.FileChannel">fc</a>.<span title="(x$1: java.nio.channels.FileChannel.MapMode, x$2: Long, x$3: Long)java.nio.MappedByteBuffer">map</span><span class="delimiter">(</span><span title="java.nio.channels.FileChannel.type">FileChannel</span>.<span title="java.nio.channels.FileChannel.MapMode.type">MapMode</span>.<span title="java.nio.channels.FileChannel.MapMode">READ_ONLY</span>, <span title="Long(0L)" class="int">0</span>, <a href="#kafka.utils.Utils.readFileAsString.fc" title="java.nio.channels.FileChannel">fc</a>.<span title="()Long">size</span><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span>
      <a href="#kafka.utils.Utils.readFileAsString$default$2" title="java.nio.charset.Charset">charset</a>.<span title="(x$1: java.nio.ByteBuffer)java.nio.CharBuffer">decode</span><span class="delimiter">(</span><a href="#kafka.utils.Utils.readFileAsString.bb" title="java.nio.MappedByteBuffer">bb</a><span class="delimiter">)</span>.<span title="()String">toString</span><span class="delimiter">(</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>
    finally <span class="delimiter">{</span>
      <a href="#kafka.utils.Utils.readFileAsString.stream" title="java.io.FileInputStream">stream</a>.<span title="()Unit">close</span><span class="delimiter">(</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>
  
  <span class="comment">/**
   * Get the absolute value of the given number. If the number is Int.MinValue return 0.
   * This is different from java.lang.Math.abs or scala.math.abs in that they return Int.MinValue (!).
   */</span>
  def <a title="(n: Int)Int" id="kafka.utils.Utils.abs">abs</a><span class="delimiter">(</span><a title="Int" id="kafka.utils.Utils.abs.n">n</a>: <span title="Int">Int</span><span class="delimiter">)</span> = if<span class="delimiter">(</span><a href="#kafka.utils.Utils.abs.n" title="Int">n</a> <span title="(x: Int)Boolean">==</span> Integer.<span title="Int(-2147483648)">MIN_VALUE</span><span class="delimiter">)</span> <span title="Int(0)" class="int">0</span> else math.<span title="(x: Int)Int">abs</span><span class="delimiter">(</span><a href="#kafka.utils.Utils.abs.n" title="Int">n</a><span class="delimiter">)</span>

  <span class="comment">/**
   * Replace the given string suffix with the new suffix. If the string doesn't end with the given suffix throw an exception.
   */</span>
  def <a title="(s: String, oldSuffix: String, newSuffix: String)String" id="kafka.utils.Utils.replaceSuffix">replaceSuffix</a><span class="delimiter">(</span><a title="String" id="kafka.utils.Utils.replaceSuffix.s">s</a>: <span title="String">String</span>, <a title="String" id="kafka.utils.Utils.replaceSuffix.oldSuffix">oldSuffix</a>: <span title="String">String</span>, <a title="String" id="kafka.utils.Utils.replaceSuffix.newSuffix">newSuffix</a>: <span title="String">String</span><span class="delimiter">)</span>: <span title="String">String</span> = <span class="delimiter">{</span>
    if<span class="delimiter">(</span><span title="=&gt; Boolean">!</span><a href="#kafka.utils.Utils.replaceSuffix.s" title="String">s</a>.<span title="(x$1: String)Boolean">endsWith</span><span class="delimiter">(</span><a href="#kafka.utils.Utils.replaceSuffix.oldSuffix" title="String">oldSuffix</a><span class="delimiter">)</span><span class="delimiter">)</span>
      throw new <span title="IllegalArgumentException">IllegalArgumentException</span><span class="delimiter">(</span><span title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps" class="string">&quot;Expected string to end with '%s' but string is '%s'&quot;</span>.<span title="(args: Any*)String">format</span><span class="delimiter">(</span><a href="#kafka.utils.Utils.replaceSuffix.oldSuffix" title="String">oldSuffix</a>, <a href="#kafka.utils.Utils.replaceSuffix.s" title="String">s</a><span class="delimiter">)</span><span class="delimiter">)</span>
    <a href="#kafka.utils.Utils.replaceSuffix.s" title="String">s</a>.<span title="(x$1: Int, x$2: Int)String">substring</span><span class="delimiter">(</span><span title="Int(0)" class="int">0</span>, <a href="#kafka.utils.Utils.replaceSuffix.s" title="String">s</a>.<span title="()Int">length</span> <span title="(x: Int)Int">-</span> <a href="#kafka.utils.Utils.replaceSuffix.oldSuffix" title="String">oldSuffix</a>.<span title="()Int">length</span><span class="delimiter">)</span> <span title="(x$1: Any)String">+</span> <a href="#kafka.utils.Utils.replaceSuffix.newSuffix" title="String">newSuffix</a>
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Create a file with the given path
   * @param path The path to create
   * @throws KafkaStorageException If the file create fails
   * @return The created file
   */</span>
  def <a title="(path: String)java.io.File" id="kafka.utils.Utils.createFile">createFile</a><span class="delimiter">(</span><a title="String" id="kafka.utils.Utils.createFile.path">path</a>: <span title="String">String</span><span class="delimiter">)</span>: <span title="java.io.File">File</span> = <span class="delimiter">{</span>
    val <a title="java.io.File" id="kafka.utils.Utils.createFile.f">f</a> = new <span title="java.io.File">File</span><span class="delimiter">(</span><a href="#kafka.utils.Utils.createFile.path" title="String">path</a><span class="delimiter">)</span>
    val <a title="Boolean" id="kafka.utils.Utils.createFile.created">created</a> = <a href="#kafka.utils.Utils.createFile.f" title="java.io.File">f</a>.<span title="()Boolean">createNewFile</span><span class="delimiter">(</span><span class="delimiter">)</span>
    if<span class="delimiter">(</span><span title="=&gt; Boolean">!</span><a href="#kafka.utils.Utils.createFile.created" title="Boolean">created</a><span class="delimiter">)</span>
      throw new <a href="../common/KafkaStorageException.scala.html#kafka.common;KafkaStorageException" title="kafka.common.KafkaStorageException">KafkaStorageException</a><span class="delimiter">(</span><span title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps" class="string">&quot;Failed to create file %s.&quot;</span>.<span title="(args: Any*)String">format</span><span class="delimiter">(</span><a href="#kafka.utils.Utils.createFile.path" title="String">path</a><span class="delimiter">)</span><span class="delimiter">)</span>
    <a href="#kafka.utils.Utils.createFile.f" title="java.io.File">f</a>
  <span class="delimiter">}</span>
  
  <span class="comment">/**
   * Turn a properties map into a string
   */</span>
  def <a title="(props: java.util.Properties)String" id="kafka.utils.Utils.asString">asString</a><span class="delimiter">(</span><a title="java.util.Properties" id="kafka.utils.Utils.asString.props">props</a>: <span title="java.util.Properties">Properties</span><span class="delimiter">)</span>: <span title="String">String</span> = <span class="delimiter">{</span>
    val <a title="java.io.StringWriter" id="kafka.utils.Utils.asString.writer">writer</a> = new <span title="java.io.StringWriter">StringWriter</span><span class="delimiter">(</span><span class="delimiter">)</span>
    <a href="#kafka.utils.Utils.asString.props" title="java.util.Properties">props</a>.<span title="(x$1: java.io.Writer, x$2: String)Unit">store</span><span class="delimiter">(</span><a href="#kafka.utils.Utils.asString.writer" title="java.io.StringWriter">writer</a>, <span title="String(&quot;&quot;)" class="string">&quot;&quot;</span><span class="delimiter">)</span>
    <a href="#kafka.utils.Utils.asString.writer" title="java.io.StringWriter">writer</a>.<span title="()String">toString</span>
  <span class="delimiter">}</span>
  
  <span class="comment">/**
   * Read some properties with the given default values
   */</span>
  def <a title="(s: String, defaults: java.util.Properties)java.util.Properties" id="kafka.utils.Utils.readProps">readProps</a><span class="delimiter">(</span><a title="String" id="kafka.utils.Utils.readProps.s">s</a>: <span title="String">String</span>, <a title="java.util.Properties" id="kafka.utils.Utils.readProps.defaults">defaults</a>: <span title="java.util.Properties">Properties</span><span class="delimiter">)</span>: <span title="java.util.Properties">Properties</span> = <span class="delimiter">{</span>
    val <a title="java.io.StringReader" id="kafka.utils.Utils.readProps.reader">reader</a> = new <span title="java.io.StringReader">StringReader</span><span class="delimiter">(</span><a href="#kafka.utils.Utils.readProps.s" title="String">s</a><span class="delimiter">)</span>
    val <a title="java.util.Properties" id="kafka.utils.Utils.readProps.props">props</a> = new <span title="java.util.Properties">Properties</span><span class="delimiter">(</span><a href="#kafka.utils.Utils.readProps.defaults" title="java.util.Properties">defaults</a><span class="delimiter">)</span>
    <a href="#kafka.utils.Utils.readProps.props" title="java.util.Properties">props</a>.<span title="(x$1: java.io.Reader)Unit">load</span><span class="delimiter">(</span><a href="#kafka.utils.Utils.readProps.reader" title="java.io.StringReader">reader</a><span class="delimiter">)</span>
    <a href="#kafka.utils.Utils.readProps.props" title="java.util.Properties">props</a>
  <span class="delimiter">}</span>
  
  <span class="comment">/**
   * Read a big-endian integer from a byte array
   */</span>
  def <a title="(bytes: Array[Byte], offset: Int)Int" id="kafka.utils.Utils.readInt">readInt</a><span class="delimiter">(</span><a title="Array[Byte]" id="kafka.utils.Utils.readInt.bytes">bytes</a>: <span title="Array[Byte]">Array</span><span class="delimiter">[</span>Byte<span class="delimiter">]</span>, <a title="Int" id="kafka.utils.Utils.readInt.offset">offset</a>: <span title="Int">Int</span><span class="delimiter">)</span>: <span title="Int">Int</span> = <span class="delimiter">{</span>
    <span class="delimiter">(</span><span class="delimiter">(</span><a href="#kafka.utils.Utils.readInt.bytes" title="(i: Int)Byte">bytes</a><span class="delimiter">(</span><a href="#kafka.utils.Utils.readInt.offset" title="Int">offset</a><span class="delimiter">)</span> <span title="(x: Int)Int">&amp;</span> <span title="Int(255)" class="int">0xFF</span><span class="delimiter">)</span> <span title="(x: Int)Int">&lt;&lt;</span> <span title="Int(24)" class="int">24</span><span class="delimiter">)</span> <span title="(x: Int)Int">|</span>
    <span class="delimiter">(</span><span class="delimiter">(</span><a href="#kafka.utils.Utils.readInt.bytes" title="(i: Int)Byte">bytes</a><span class="delimiter">(</span><a href="#kafka.utils.Utils.readInt.offset" title="Int">offset</a> <span title="(x: Int)Int">+</span> <span title="Int(1)" class="int">1</span><span class="delimiter">)</span> <span title="(x: Int)Int">&amp;</span> <span title="Int(255)" class="int">0xFF</span><span class="delimiter">)</span> <span title="(x: Int)Int">&lt;&lt;</span> <span title="Int(16)" class="int">16</span><span class="delimiter">)</span> <span title="(x: Int)Int">|</span>
    <span class="delimiter">(</span><span class="delimiter">(</span><a href="#kafka.utils.Utils.readInt.bytes" title="(i: Int)Byte">bytes</a><span class="delimiter">(</span><a href="#kafka.utils.Utils.readInt.offset" title="Int">offset</a> <span title="(x: Int)Int">+</span> <span title="Int(2)" class="int">2</span><span class="delimiter">)</span> <span title="(x: Int)Int">&amp;</span> <span title="Int(255)" class="int">0xFF</span><span class="delimiter">)</span> <span title="(x: Int)Int">&lt;&lt;</span> <span title="Int(8)" class="int">8</span><span class="delimiter">)</span> <span title="(x: Int)Int">|</span>
    <span class="delimiter">(</span><a href="#kafka.utils.Utils.readInt.bytes" title="(i: Int)Byte">bytes</a><span class="delimiter">(</span><a href="#kafka.utils.Utils.readInt.offset" title="Int">offset</a> <span title="(x: Int)Int">+</span> <span title="Int(3)" class="int">3</span><span class="delimiter">)</span> <span title="(x: Int)Int">&amp;</span> <span title="Int(255)" class="int">0xFF</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>
  
  <span class="comment">/**
   * Execute the given function inside the lock
   */</span>
  def <a title="[T](lock: java.util.concurrent.locks.Lock)(fun: =&gt; T)T" id="kafka.utils.Utils.inLock">inLock</a><span class="delimiter">[</span><a title="" id="kafka.utils.Utils.inLock;T">T</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="java.util.concurrent.locks.Lock" id="kafka.utils.Utils.inLock.lock">lock</a>: <span title="java.util.concurrent.locks.Lock">Lock</span><span class="delimiter">)</span><span class="delimiter">(</span><a title="=&gt; T" id="kafka.utils.Utils.inLock.fun">fun</a>: =&gt; T<span class="delimiter">)</span>: <a href="#kafka.utils.Utils.inLock;T" title="T">T</a> = <span class="delimiter">{</span>
    <a href="#kafka.utils.Utils.inLock.lock" title="java.util.concurrent.locks.Lock">lock</a>.<span title="()Unit">lock</span><span class="delimiter">(</span><span class="delimiter">)</span>
    try <span class="delimiter">{</span>
      <a href="#kafka.utils.Utils.inLock.fun" title="=&gt; T">fun</a>
    <span class="delimiter">}</span> finally <span class="delimiter">{</span>
      <a href="#kafka.utils.Utils.inLock.lock" title="java.util.concurrent.locks.Lock">lock</a>.<span title="()Unit">unlock</span><span class="delimiter">(</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  def <a title="[T](lock: java.util.concurrent.locks.ReadWriteLock)(fun: =&gt; T)T" id="kafka.utils.Utils.inReadLock">inReadLock</a><span class="delimiter">[</span><a title="" id="kafka.utils.Utils.inReadLock;T">T</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="java.util.concurrent.locks.ReadWriteLock" id="kafka.utils.Utils.inReadLock.lock">lock</a>: <span title="java.util.concurrent.locks.ReadWriteLock">ReadWriteLock</span><span class="delimiter">)</span><span class="delimiter">(</span><a title="=&gt; T" id="kafka.utils.Utils.inReadLock.fun">fun</a>: =&gt; T<span class="delimiter">)</span>: <a href="#kafka.utils.Utils.inReadLock;T" title="T">T</a> = <a href="#kafka.utils.Utils.inLock" title="[T](lock: java.util.concurrent.locks.Lock)(fun: =&gt; T)T">inLock</a><span title="(lock: java.util.concurrent.locks.Lock)(fun: =&gt; T)T" class="delimiter">[</span><a href="#kafka.utils.Utils.inReadLock;T" title="T">T</a><span class="delimiter">]</span><span class="delimiter">(</span><a href="#kafka.utils.Utils.inReadLock.lock" title="java.util.concurrent.locks.ReadWriteLock">lock</a>.<span title="()java.util.concurrent.locks.Lock">readLock</span><span class="delimiter">)</span><span class="delimiter">(</span><a href="#kafka.utils.Utils.inReadLock.fun" title="=&gt; T">fun</a><span class="delimiter">)</span>

  def <a title="[T](lock: java.util.concurrent.locks.ReadWriteLock)(fun: =&gt; T)T" id="kafka.utils.Utils.inWriteLock">inWriteLock</a><span class="delimiter">[</span><a title="" id="kafka.utils.Utils.inWriteLock;T">T</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="java.util.concurrent.locks.ReadWriteLock" id="kafka.utils.Utils.inWriteLock.lock">lock</a>: <span title="java.util.concurrent.locks.ReadWriteLock">ReadWriteLock</span><span class="delimiter">)</span><span class="delimiter">(</span><a title="=&gt; T" id="kafka.utils.Utils.inWriteLock.fun">fun</a>: =&gt; T<span class="delimiter">)</span>: <a href="#kafka.utils.Utils.inWriteLock;T" title="T">T</a> = <a href="#kafka.utils.Utils.inLock" title="[T](lock: java.util.concurrent.locks.Lock)(fun: =&gt; T)T">inLock</a><span title="(lock: java.util.concurrent.locks.Lock)(fun: =&gt; T)T" class="delimiter">[</span><a href="#kafka.utils.Utils.inWriteLock;T" title="T">T</a><span class="delimiter">]</span><span class="delimiter">(</span><a href="#kafka.utils.Utils.inWriteLock.lock" title="java.util.concurrent.locks.ReadWriteLock">lock</a>.<span title="()java.util.concurrent.locks.Lock">writeLock</span><span class="delimiter">)</span><span class="delimiter">(</span><a href="#kafka.utils.Utils.inWriteLock.fun" title="=&gt; T">fun</a><span class="delimiter">)</span>


  <span class="comment">//JSON strings need to be escaped based on ECMA-404 standard http://json.org</span>
  def <a title="(s: String)String" id="kafka.utils.Utils.JSONEscapeString">JSONEscapeString</a> <span class="delimiter">(</span><a title="String" id="kafka.utils.Utils.JSONEscapeString.s">s</a> : <span title="String">String</span><span class="delimiter">)</span> : <span title="String">String</span> = <span class="delimiter">{</span>
    <a href="#kafka.utils.Utils.JSONEscapeString.s" title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps">s</a>.<span title="(f: Char =&gt; Any)(implicit bf: scala.collection.generic.CanBuildFrom[String,Any,scala.collection.immutable.IndexedSeq[Any]])scala.collection.immutable.IndexedSeq[Any]">map</span> <a href="#kafka.utils.Utils.JSONEscapeString.$anonfun.x0$1" title="Any" class="delimiter">{</a>
      case <span title="Char('\&quot;')" class="char">'&quot;'</span>  =&gt; <span title="String(&quot;\\\&quot;&quot;)" class="string">&quot;\\\&quot;&quot;</span>
      case <span title="Char('\\')" class="char">'\\'</span> =&gt; <span title="String(&quot;\\\\&quot;)" class="string">&quot;\\\\&quot;</span>
      case <span title="Char('/')" class="char">'/'</span>  =&gt; <span title="String(&quot;\\/&quot;)" class="string">&quot;\\/&quot;</span>
      case <span title="Char('\b')" class="char">'\b'</span> =&gt; <span title="String(&quot;\\b&quot;)" class="string">&quot;\\b&quot;</span>
      case <span title="Char('\f')" class="char">'\f'</span> =&gt; <span title="String(&quot;\\f&quot;)" class="string">&quot;\\f&quot;</span>
      case <span title="Char('\n')" class="char">'\n'</span> =&gt; <span title="String(&quot;\\n&quot;)" class="string">&quot;\\n&quot;</span>
      case <span title="Char('\r')" class="char">'\r'</span> =&gt; <span title="String(&quot;\\r&quot;)" class="string">&quot;\\r&quot;</span>
      case <span title="Char('\t')" class="char">'\t'</span> =&gt; <span title="String(&quot;\\t&quot;)" class="string">&quot;\\t&quot;</span>
      <span class="comment">/* We'll unicode escape any control characters. These include:
       * 0x0 -&gt; 0x1f  : ASCII Control (C0 Control Codes)
       * 0x7f         : ASCII DELETE
       * 0x80 -&gt; 0x9f : C1 Control Codes
       *
       * Per RFC4627, section 2.5, we're not technically required to
       * encode the C1 codes, but we do to be safe.
       */</span>
      case <span title="Char">c</span> if <span class="delimiter">(</span><span class="delimiter">(</span><span title="Char">c</span> <span title="(x: Char)Boolean">&gt;=</span> <span title="Char('\00')" class="char">'\u0000'</span> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <span title="Char">c</span> <span title="(x: Char)Boolean">&lt;=</span> <span title="Char('\037')" class="char">'\u001f'</span><span class="delimiter">)</span> <span title="(x: Boolean)Boolean">||</span> <span class="delimiter">(</span><span title="Char">c</span> <span title="(x: Char)Boolean">&gt;=</span> <span title="Char('\0177')" class="char">'\u007f'</span> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <span title="Char">c</span> <span title="(x: Char)Boolean">&lt;=</span> <span title="Char('\0237')" class="char">'\u009f'</span><span class="delimiter">)</span><span class="delimiter">)</span> =&gt; <span title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps" class="string">&quot;\\u%04x&quot;</span>.<span title="(args: Any*)String">format</span><span class="delimiter">(</span><span title="=&gt; Int">c</span>: <span title="Int">Int</span><span class="delimiter">)</span>
      case <span title="Char">c</span> =&gt; <span title="Char">c</span>
    <span class="delimiter">}</span>.<span title="=&gt; String">mkString</span> 
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Returns a list of duplicated items
   */</span>
  def <a title="[T](s: Traversable[T])Iterable[T]" id="kafka.utils.Utils.duplicates">duplicates</a><span class="delimiter">[</span><a title="" id="kafka.utils.Utils.duplicates;T">T</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="Traversable[T]" id="kafka.utils.Utils.duplicates.s">s</a>: <span title="Traversable[T]">Traversable</span><span class="delimiter">[</span>T<span class="delimiter">]</span><span class="delimiter">)</span>: <span title="Iterable[T]">Iterable</span><span class="delimiter">[</span>T<span class="delimiter">]</span> = <span class="delimiter">{</span>
    <a href="#kafka.utils.Utils.duplicates.s" title="Traversable[T]">s</a>.<span title="(f: T =&gt; T)scala.collection.immutable.Map[T,Traversable[T]]">groupBy</span><span class="delimiter">(</span><a href="#kafka.utils.Utils.duplicates.$anonfun.x" title="(x: T)T">identity</a><span class="delimiter">)</span>
      .<span title="(f: ((T, Traversable[T])) =&gt; (T, Int))(implicit bf: scala.collection.generic.CanBuildFrom[scala.collection.immutable.Map[T,Traversable[T]],(T, Int),scala.collection.immutable.Map[T,Int]])scala.collection.immutable.Map[T,Int]">map</span><a href="#kafka.utils.Utils.duplicates.$anonfun.x0$2" title="(T, Int)" class="delimiter">{</a> case <span class="delimiter">(</span><span title="T">k</span>,<span title="Traversable[T]">l</span><span class="delimiter">)</span> =&gt; <span title="(_1: T, _2: Int)(T, Int)" class="delimiter">(</span><span title="T">k</span>,<span title="Traversable[T]">l</span>.<span title="=&gt; Int">size</span><span class="delimiter">)</span><span class="delimiter">}</span>
      .<span title="(p: ((T, Int)) =&gt; Boolean)scala.collection.immutable.Map[T,Int]">filter</span><a href="#kafka.utils.Utils.duplicates.$anonfun.x0$3" title="Boolean" class="delimiter">{</a> case <span class="delimiter">(</span><span title="T">k</span>,<span title="Int">l</span><span class="delimiter">)</span> =&gt; <span class="delimiter">(</span><span title="Int">l</span> <span title="(x: Int)Boolean">&gt;</span> <span title="Int(1)" class="int">1</span><span class="delimiter">)</span> <span class="delimiter">}</span>
      .<span title="=&gt; Iterable[T]">keys</span>
  <span class="delimiter">}</span>
<span class="delimiter">}</span>

        </pre>
    </body>
</html>
