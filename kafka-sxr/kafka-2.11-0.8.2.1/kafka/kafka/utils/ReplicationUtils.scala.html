<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <title>kafka/kafka/utils/ReplicationUtils.scala</title>
        <script type="text/javascript" src="../../../jquery-all.js"></script>
        <script type="text/javascript" src="../../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../../style.css" title="Style"></link>
    </head>
    <body>
        <pre>
<span class="comment">/**
 * Licensed to the Apache Software Foundation (ASF) under one or more
 * contributor license agreements.  See the NOTICE file distributed with
 * this work for additional information regarding copyright ownership.
 * The ASF licenses this file to You under the Apache License, Version 2.0
 * (the &quot;License&quot;); you may not use this file except in compliance with
 * the License.  You may obtain a copy of the License at
 *
 *    http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */</span>

package kafka.utils

import kafka.api.LeaderAndIsr
import kafka.controller.LeaderIsrAndControllerEpoch
import org.apache.zookeeper.data.Stat
import org.I0Itec.zkclient.ZkClient

import scala.Some
import scala.collection._

object <a title="kafka.utils.ReplicationUtils.type" id="kafka.utils.ReplicationUtils">ReplicationUtils</a> extends <a href="Logging.scala.html#kafka.utils;Logging" title="kafka.utils.Logging">Logging</a> <span class="delimiter">{</span>

  def <a title="(zkClient: org.I0Itec.zkclient.ZkClient, topic: String, partitionId: Int, newLeaderAndIsr: kafka.api.LeaderAndIsr, controllerEpoch: Int, zkVersion: Int)(Boolean, Int)" id="kafka.utils.ReplicationUtils.updateLeaderAndIsr">updateLeaderAndIsr</a><span class="delimiter">(</span><a title="org.I0Itec.zkclient.ZkClient" id="kafka.utils.ReplicationUtils.updateLeaderAndIsr.zkClient">zkClient</a>: <span title="org.I0Itec.zkclient.ZkClient">ZkClient</span>, <a title="String" id="kafka.utils.ReplicationUtils.updateLeaderAndIsr.topic">topic</a>: <span title="String">String</span>, <a title="Int" id="kafka.utils.ReplicationUtils.updateLeaderAndIsr.partitionId">partitionId</a>: <span title="Int">Int</span>, <a title="kafka.api.LeaderAndIsr" id="kafka.utils.ReplicationUtils.updateLeaderAndIsr.newLeaderAndIsr">newLeaderAndIsr</a>: <a href="../api/LeaderAndIsrRequest.scala.html#kafka.api;LeaderAndIsr" title="kafka.api.LeaderAndIsr">LeaderAndIsr</a>, <a title="Int" id="kafka.utils.ReplicationUtils.updateLeaderAndIsr.controllerEpoch">controllerEpoch</a>: <span title="Int">Int</span>,
    <a title="Int" id="kafka.utils.ReplicationUtils.updateLeaderAndIsr.zkVersion">zkVersion</a>: <span title="Int">Int</span><span class="delimiter">)</span>: <span title="(Boolean, Int)" class="delimiter">(</span>Boolean,Int<span class="delimiter">)</span> = <span class="delimiter">{</span>
    <a href="Logging.scala.html#kafka.utils;Logging.debug(1729dbc42f)" title="(msg: =&gt; String)Unit">debug</a><span class="delimiter">(</span><span title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps" class="string">&quot;Updated ISR for partition [%s,%d] to %s&quot;</span>.<span title="(args: Any*)String">format</span><span class="delimiter">(</span><a href="#kafka.utils.ReplicationUtils.updateLeaderAndIsr.topic" title="String">topic</a>, <a href="#kafka.utils.ReplicationUtils.updateLeaderAndIsr.partitionId" title="Int">partitionId</a>, <a href="#kafka.utils.ReplicationUtils.updateLeaderAndIsr.newLeaderAndIsr" title="kafka.api.LeaderAndIsr">newLeaderAndIsr</a>.<a href="../api/LeaderAndIsrRequest.scala.html#kafka.api;LeaderAndIsr.isr" title="=&gt; List[Int]">isr</a>.<span title="(sep: String)String">mkString</span><span class="delimiter">(</span><span title="String(&quot;,&quot;)" class="string">&quot;,&quot;</span><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
    val <a title="String" id="kafka.utils.ReplicationUtils.updateLeaderAndIsr.path">path</a> = <a href="ZkUtils.scala.html#kafka.utils.ZkUtils" title="kafka.utils.ZkUtils.type">ZkUtils</a>.<a href="ZkUtils.scala.html#kafka.utils.ZkUtils.getTopicPartitionLeaderAndIsrPath" title="(topic: String, partitionId: Int)String">getTopicPartitionLeaderAndIsrPath</a><span class="delimiter">(</span><a href="#kafka.utils.ReplicationUtils.updateLeaderAndIsr.topic" title="String">topic</a>, <a href="#kafka.utils.ReplicationUtils.updateLeaderAndIsr.partitionId" title="Int">partitionId</a><span class="delimiter">)</span>
    val <a title="String" id="kafka.utils.ReplicationUtils.updateLeaderAndIsr.newLeaderData">newLeaderData</a> = <a href="ZkUtils.scala.html#kafka.utils.ZkUtils" title="kafka.utils.ZkUtils.type">ZkUtils</a>.<a href="ZkUtils.scala.html#kafka.utils.ZkUtils.leaderAndIsrZkData" title="(leaderAndIsr: kafka.api.LeaderAndIsr, controllerEpoch: Int)String">leaderAndIsrZkData</a><span class="delimiter">(</span><a href="#kafka.utils.ReplicationUtils.updateLeaderAndIsr.newLeaderAndIsr" title="kafka.api.LeaderAndIsr">newLeaderAndIsr</a>, <a href="#kafka.utils.ReplicationUtils.updateLeaderAndIsr.controllerEpoch" title="Int">controllerEpoch</a><span class="delimiter">)</span>
    <span class="comment">// use the epoch of the controller that made the leadership decision, instead of the current controller epoch</span>
    <a href="ZkUtils.scala.html#kafka.utils.ZkUtils" title="kafka.utils.ZkUtils.type">ZkUtils</a>.<a href="ZkUtils.scala.html#kafka.utils.ZkUtils.conditionalUpdatePersistentPath" title="(client: org.I0Itec.zkclient.ZkClient, path: String, data: String, expectVersion: Int, optionalChecker: Option[(org.I0Itec.zkclient.ZkClient, String, String) =&gt; (Boolean, Int)])(Boolean, Int)">conditionalUpdatePersistentPath</a><span class="delimiter">(</span><a href="#kafka.utils.ReplicationUtils.updateLeaderAndIsr.zkClient" title="org.I0Itec.zkclient.ZkClient">zkClient</a>, <a href="#kafka.utils.ReplicationUtils.updateLeaderAndIsr.path" title="String">path</a>, <a href="#kafka.utils.ReplicationUtils.updateLeaderAndIsr.newLeaderData" title="String">newLeaderData</a>, <a href="#kafka.utils.ReplicationUtils.updateLeaderAndIsr.zkVersion" title="Int">zkVersion</a>, <span title="(x: (org.I0Itec.zkclient.ZkClient, String, String) =&gt; (Boolean, Int))Some[(org.I0Itec.zkclient.ZkClient, String, String) =&gt; (Boolean, Int)]">Some</span><span class="delimiter">(</span><a href="#kafka.utils.ReplicationUtils.checkLeaderAndIsrZkData" title="(zkClient: org.I0Itec.zkclient.ZkClient, path: String, expectedLeaderAndIsrInfo: String)(Boolean, Int)">checkLeaderAndIsrZkData</a><span class="delimiter">)</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  def <a title="(zkClient: org.I0Itec.zkclient.ZkClient, path: String, expectedLeaderAndIsrInfo: String)(Boolean, Int)" id="kafka.utils.ReplicationUtils.checkLeaderAndIsrZkData">checkLeaderAndIsrZkData</a><span class="delimiter">(</span><a title="org.I0Itec.zkclient.ZkClient" id="kafka.utils.ReplicationUtils.checkLeaderAndIsrZkData.zkClient">zkClient</a>: <span title="org.I0Itec.zkclient.ZkClient">ZkClient</span>, <a title="String" id="kafka.utils.ReplicationUtils.checkLeaderAndIsrZkData.path">path</a>: <span title="String">String</span>, <a title="String" id="kafka.utils.ReplicationUtils.checkLeaderAndIsrZkData.expectedLeaderAndIsrInfo">expectedLeaderAndIsrInfo</a>: <span title="String">String</span><span class="delimiter">)</span>: <span title="(Boolean, Int)" class="delimiter">(</span>Boolean,Int<span class="delimiter">)</span> = <span class="delimiter">{</span>
    try <span class="delimiter">{</span>
      val <a title="(Option[String], org.apache.zookeeper.data.Stat)" id="kafka.utils.ReplicationUtils.checkLeaderAndIsrZkData.writtenLeaderAndIsrInfo">writtenLeaderAndIsrInfo</a> = <a href="ZkUtils.scala.html#kafka.utils.ZkUtils" title="kafka.utils.ZkUtils.type">ZkUtils</a>.<a href="ZkUtils.scala.html#kafka.utils.ZkUtils.readDataMaybeNull" title="(client: org.I0Itec.zkclient.ZkClient, path: String)(Option[String], org.apache.zookeeper.data.Stat)">readDataMaybeNull</a><span class="delimiter">(</span><a href="#kafka.utils.ReplicationUtils.checkLeaderAndIsrZkData.zkClient" title="org.I0Itec.zkclient.ZkClient">zkClient</a>, <a href="#kafka.utils.ReplicationUtils.checkLeaderAndIsrZkData.path" title="String">path</a><span class="delimiter">)</span>
      val <a title="Option[String]" id="kafka.utils.ReplicationUtils.checkLeaderAndIsrZkData.writtenLeaderOpt">writtenLeaderOpt</a> = <a href="#kafka.utils.ReplicationUtils.checkLeaderAndIsrZkData.writtenLeaderAndIsrInfo" title="(Option[String], org.apache.zookeeper.data.Stat)">writtenLeaderAndIsrInfo</a>.<span title="=&gt; Option[String]">_1</span>
      val <a title="org.apache.zookeeper.data.Stat" id="kafka.utils.ReplicationUtils.checkLeaderAndIsrZkData.writtenStat">writtenStat</a> = <a href="#kafka.utils.ReplicationUtils.checkLeaderAndIsrZkData.writtenLeaderAndIsrInfo" title="(Option[String], org.apache.zookeeper.data.Stat)">writtenLeaderAndIsrInfo</a>.<span title="=&gt; org.apache.zookeeper.data.Stat">_2</span>
      val <span title="Option[kafka.controller.LeaderIsrAndControllerEpoch]">expectedLeader</span> = <a href="#kafka.utils.ReplicationUtils.parseLeaderAndIsr" title="(leaderAndIsrStr: String, path: String, stat: org.apache.zookeeper.data.Stat)Option[kafka.controller.LeaderIsrAndControllerEpoch]">parseLeaderAndIsr</a><span class="delimiter">(</span><a href="#kafka.utils.ReplicationUtils.checkLeaderAndIsrZkData.expectedLeaderAndIsrInfo" title="String">expectedLeaderAndIsrInfo</a>, <a href="#kafka.utils.ReplicationUtils.checkLeaderAndIsrZkData.path" title="String">path</a>, <a href="#kafka.utils.ReplicationUtils.checkLeaderAndIsrZkData.writtenStat" title="org.apache.zookeeper.data.Stat">writtenStat</a><span class="delimiter">)</span>
      <a href="#kafka.utils.ReplicationUtils.checkLeaderAndIsrZkData.writtenLeaderOpt" title="Option[String]">writtenLeaderOpt</a> match <span class="delimiter">{</span>
        case Some<span class="delimiter">(</span><a title="String" id="kafka.utils.ReplicationUtils.checkLeaderAndIsrZkData.writtenData">writtenData</a><span class="delimiter">)</span> =&gt;
          val <span title="Option[kafka.controller.LeaderIsrAndControllerEpoch]">writtenLeader</span> = <a href="#kafka.utils.ReplicationUtils.parseLeaderAndIsr" title="(leaderAndIsrStr: String, path: String, stat: org.apache.zookeeper.data.Stat)Option[kafka.controller.LeaderIsrAndControllerEpoch]">parseLeaderAndIsr</a><span class="delimiter">(</span><a href="#kafka.utils.ReplicationUtils.checkLeaderAndIsrZkData.writtenData" title="String">writtenData</a>, <a href="#kafka.utils.ReplicationUtils.checkLeaderAndIsrZkData.path" title="String">path</a>, <a href="#kafka.utils.ReplicationUtils.checkLeaderAndIsrZkData.writtenStat" title="org.apache.zookeeper.data.Stat">writtenStat</a><span class="delimiter">)</span>
          <span title="(_1: Option[kafka.controller.LeaderIsrAndControllerEpoch], _2: Option[kafka.controller.LeaderIsrAndControllerEpoch])(Option[kafka.controller.LeaderIsrAndControllerEpoch], Option[kafka.controller.LeaderIsrAndControllerEpoch])" class="delimiter">(</span><span title="Option[kafka.controller.LeaderIsrAndControllerEpoch]">expectedLeader</span>,<span title="Option[kafka.controller.LeaderIsrAndControllerEpoch]">writtenLeader</span><span class="delimiter">)</span> match <span class="delimiter">{</span>
            case <span class="delimiter">(</span>Some<span class="delimiter">(</span><span title="kafka.controller.LeaderIsrAndControllerEpoch">expectedLeader</span><span class="delimiter">)</span>,Some<span class="delimiter">(</span><span title="kafka.controller.LeaderIsrAndControllerEpoch">writtenLeader</span><span class="delimiter">)</span><span class="delimiter">)</span> =&gt;
              if<span class="delimiter">(</span><span title="kafka.controller.LeaderIsrAndControllerEpoch">expectedLeader</span> <span title="(x$1: Any)Boolean">==</span> <span title="kafka.controller.LeaderIsrAndControllerEpoch">writtenLeader</span><span class="delimiter">)</span>
                return <span title="(_1: Boolean, _2: Int)(Boolean, Int)" class="delimiter">(</span>true,<a href="#kafka.utils.ReplicationUtils.checkLeaderAndIsrZkData.writtenStat" title="org.apache.zookeeper.data.Stat">writtenStat</a>.<span title="()Int">getVersion</span><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span>
            case _ =&gt;
          <span class="delimiter">}</span>
        case <span title="None.type">None</span> =&gt;
      <span class="delimiter">}</span>
    <span class="delimiter">}</span> catch <span class="delimiter">{</span>
      case <a title="Exception" id="kafka.utils.ReplicationUtils.checkLeaderAndIsrZkData.e1">e1</a>: <span title="Exception">Exception</span> =&gt;
    <span class="delimiter">}</span>
    <span title="(_1: Boolean, _2: Int)(Boolean, Int)" class="delimiter">(</span>false,-<span title="Int(-1)" class="int">1</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  def <a title="(zkClient: org.I0Itec.zkclient.ZkClient, topic: String, partition: Int)Option[kafka.controller.LeaderIsrAndControllerEpoch]" id="kafka.utils.ReplicationUtils.getLeaderIsrAndEpochForPartition">getLeaderIsrAndEpochForPartition</a><span class="delimiter">(</span><a title="org.I0Itec.zkclient.ZkClient" id="kafka.utils.ReplicationUtils.getLeaderIsrAndEpochForPartition.zkClient">zkClient</a>: <span title="org.I0Itec.zkclient.ZkClient">ZkClient</span>, <a title="String" id="kafka.utils.ReplicationUtils.getLeaderIsrAndEpochForPartition.topic">topic</a>: <span title="String">String</span>, <a title="Int" id="kafka.utils.ReplicationUtils.getLeaderIsrAndEpochForPartition.partition">partition</a>: <span title="Int">Int</span><span class="delimiter">)</span>:<span title="Option[kafka.controller.LeaderIsrAndControllerEpoch]">Option</span><span class="delimiter">[</span>LeaderIsrAndControllerEpoch<span class="delimiter">]</span> = <span class="delimiter">{</span>
    val <a title="String" id="kafka.utils.ReplicationUtils.getLeaderIsrAndEpochForPartition.leaderAndIsrPath">leaderAndIsrPath</a> = <a href="ZkUtils.scala.html#kafka.utils.ZkUtils" title="kafka.utils.ZkUtils.type">ZkUtils</a>.<a href="ZkUtils.scala.html#kafka.utils.ZkUtils.getTopicPartitionLeaderAndIsrPath" title="(topic: String, partitionId: Int)String">getTopicPartitionLeaderAndIsrPath</a><span class="delimiter">(</span><a href="#kafka.utils.ReplicationUtils.getLeaderIsrAndEpochForPartition.topic" title="String">topic</a>, <a href="#kafka.utils.ReplicationUtils.getLeaderIsrAndEpochForPartition.partition" title="Int">partition</a><span class="delimiter">)</span>
    val <a title="(Option[String], org.apache.zookeeper.data.Stat)" id="kafka.utils.ReplicationUtils.getLeaderIsrAndEpochForPartition.leaderAndIsrInfo">leaderAndIsrInfo</a> = <a href="ZkUtils.scala.html#kafka.utils.ZkUtils" title="kafka.utils.ZkUtils.type">ZkUtils</a>.<a href="ZkUtils.scala.html#kafka.utils.ZkUtils.readDataMaybeNull" title="(client: org.I0Itec.zkclient.ZkClient, path: String)(Option[String], org.apache.zookeeper.data.Stat)">readDataMaybeNull</a><span class="delimiter">(</span><a href="#kafka.utils.ReplicationUtils.getLeaderIsrAndEpochForPartition.zkClient" title="org.I0Itec.zkclient.ZkClient">zkClient</a>, <a href="#kafka.utils.ReplicationUtils.getLeaderIsrAndEpochForPartition.leaderAndIsrPath" title="String">leaderAndIsrPath</a><span class="delimiter">)</span>
    val <a title="Option[String]" id="kafka.utils.ReplicationUtils.getLeaderIsrAndEpochForPartition.leaderAndIsrOpt">leaderAndIsrOpt</a> = <a href="#kafka.utils.ReplicationUtils.getLeaderIsrAndEpochForPartition.leaderAndIsrInfo" title="(Option[String], org.apache.zookeeper.data.Stat)">leaderAndIsrInfo</a>.<span title="=&gt; Option[String]">_1</span>
    val <a title="org.apache.zookeeper.data.Stat" id="kafka.utils.ReplicationUtils.getLeaderIsrAndEpochForPartition.stat">stat</a> = <a href="#kafka.utils.ReplicationUtils.getLeaderIsrAndEpochForPartition.leaderAndIsrInfo" title="(Option[String], org.apache.zookeeper.data.Stat)">leaderAndIsrInfo</a>.<span title="=&gt; org.apache.zookeeper.data.Stat">_2</span>
    <a href="#kafka.utils.ReplicationUtils.getLeaderIsrAndEpochForPartition.leaderAndIsrOpt" title="Option[String]">leaderAndIsrOpt</a> match <span class="delimiter">{</span>
      case Some<span class="delimiter">(</span><a title="String" id="kafka.utils.ReplicationUtils.getLeaderIsrAndEpochForPartition.leaderAndIsrStr">leaderAndIsrStr</a><span class="delimiter">)</span> =&gt; <a href="#kafka.utils.ReplicationUtils.parseLeaderAndIsr" title="(leaderAndIsrStr: String, path: String, stat: org.apache.zookeeper.data.Stat)Option[kafka.controller.LeaderIsrAndControllerEpoch]">parseLeaderAndIsr</a><span class="delimiter">(</span><a href="#kafka.utils.ReplicationUtils.getLeaderIsrAndEpochForPartition.leaderAndIsrStr" title="String">leaderAndIsrStr</a>, <a href="#kafka.utils.ReplicationUtils.getLeaderIsrAndEpochForPartition.leaderAndIsrPath" title="String">leaderAndIsrPath</a>, <a href="#kafka.utils.ReplicationUtils.getLeaderIsrAndEpochForPartition.stat" title="org.apache.zookeeper.data.Stat">stat</a><span class="delimiter">)</span>
      case <span title="None.type">None</span> =&gt; <span title="None.type">None</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  private def <a title="(leaderAndIsrStr: String, path: String, stat: org.apache.zookeeper.data.Stat)Option[kafka.controller.LeaderIsrAndControllerEpoch]" id="kafka.utils.ReplicationUtils.parseLeaderAndIsr">parseLeaderAndIsr</a><span class="delimiter">(</span><a title="String" id="kafka.utils.ReplicationUtils.parseLeaderAndIsr.leaderAndIsrStr">leaderAndIsrStr</a>: <span title="String">String</span>, <a title="String" id="kafka.utils.ReplicationUtils.parseLeaderAndIsr.path">path</a>: <span title="String">String</span>, <a title="org.apache.zookeeper.data.Stat" id="kafka.utils.ReplicationUtils.parseLeaderAndIsr.stat">stat</a>: <span title="org.apache.zookeeper.data.Stat">Stat</span><span class="delimiter">)</span>
      : <span title="Option[kafka.controller.LeaderIsrAndControllerEpoch]">Option</span><span class="delimiter">[</span>LeaderIsrAndControllerEpoch<span class="delimiter">]</span> = <span class="delimiter">{</span>
    <a href="Json.scala.html#kafka.utils.Json" title="kafka.utils.Json.type">Json</a>.<a href="Json.scala.html#kafka.utils.Json.parseFull" title="(input: String)Option[Any]">parseFull</a><span class="delimiter">(</span><a href="#kafka.utils.ReplicationUtils.parseLeaderAndIsr.leaderAndIsrStr" title="String">leaderAndIsrStr</a><span class="delimiter">)</span> match <span class="delimiter">{</span>
      case Some<span class="delimiter">(</span><a title="Any" id="kafka.utils.ReplicationUtils.parseLeaderAndIsr.m">m</a><span class="delimiter">)</span> =&gt;
        val <a title="scala.collection.Map[String,Any]" id="kafka.utils.ReplicationUtils.parseLeaderAndIsr.leaderIsrAndEpochInfo">leaderIsrAndEpochInfo</a> = <a href="#kafka.utils.ReplicationUtils.parseLeaderAndIsr.m" title="Any">m</a>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="scala.collection.Map[String,Any]" class="delimiter">[</span><span title="scala.collection.Map[String,Any]">Map</span><span class="delimiter">[</span>String, Any<span class="delimiter">]</span><span class="delimiter">]</span>
        val <a title="Int" id="kafka.utils.ReplicationUtils.parseLeaderAndIsr.leader">leader</a> = <a href="#kafka.utils.ReplicationUtils.parseLeaderAndIsr.leaderIsrAndEpochInfo" title="scala.collection.Map[String,Any]">leaderIsrAndEpochInfo</a>.<span title="(key: String)Option[Any]">get</span><span class="delimiter">(</span><span title="String(&quot;leader&quot;)" class="string">&quot;leader&quot;</span><span class="delimiter">)</span>.<span title="=&gt; Any">get</span>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="Int" class="delimiter">[</span><span title="Int">Int</span><span class="delimiter">]</span>
        val <a title="Int" id="kafka.utils.ReplicationUtils.parseLeaderAndIsr.epoch">epoch</a> = <a href="#kafka.utils.ReplicationUtils.parseLeaderAndIsr.leaderIsrAndEpochInfo" title="scala.collection.Map[String,Any]">leaderIsrAndEpochInfo</a>.<span title="(key: String)Option[Any]">get</span><span class="delimiter">(</span><span title="String(&quot;leader_epoch&quot;)" class="string">&quot;leader_epoch&quot;</span><span class="delimiter">)</span>.<span title="=&gt; Any">get</span>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="Int" class="delimiter">[</span><span title="Int">Int</span><span class="delimiter">]</span>
        val <a title="List[Int]" id="kafka.utils.ReplicationUtils.parseLeaderAndIsr.isr">isr</a> = <a href="#kafka.utils.ReplicationUtils.parseLeaderAndIsr.leaderIsrAndEpochInfo" title="scala.collection.Map[String,Any]">leaderIsrAndEpochInfo</a>.<span title="(key: String)Option[Any]">get</span><span class="delimiter">(</span><span title="String(&quot;isr&quot;)" class="string">&quot;isr&quot;</span><span class="delimiter">)</span>.<span title="=&gt; Any">get</span>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="List[Int]" class="delimiter">[</span><span title="List[Int]">List</span><span class="delimiter">[</span>Int<span class="delimiter">]</span><span class="delimiter">]</span>
        val <a title="Int" id="kafka.utils.ReplicationUtils.parseLeaderAndIsr.controllerEpoch">controllerEpoch</a> = <a href="#kafka.utils.ReplicationUtils.parseLeaderAndIsr.leaderIsrAndEpochInfo" title="scala.collection.Map[String,Any]">leaderIsrAndEpochInfo</a>.<span title="(key: String)Option[Any]">get</span><span class="delimiter">(</span><span title="String(&quot;controller_epoch&quot;)" class="string">&quot;controller_epoch&quot;</span><span class="delimiter">)</span>.<span title="=&gt; Any">get</span>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="Int" class="delimiter">[</span><span title="Int">Int</span><span class="delimiter">]</span>
        val <a title="Int" id="kafka.utils.ReplicationUtils.parseLeaderAndIsr.zkPathVersion">zkPathVersion</a> = <a href="#kafka.utils.ReplicationUtils.parseLeaderAndIsr.stat" title="org.apache.zookeeper.data.Stat">stat</a>.<span title="()Int">getVersion</span>
        <a href="Logging.scala.html#kafka.utils;Logging.debug(1729dbc42f)" title="(msg: =&gt; String)Unit">debug</a><span class="delimiter">(</span><span title="implicit scala.Predef.augmentString : (x: String)scala.collection.immutable.StringOps" class="string">&quot;Leader %d, Epoch %d, Isr %s, Zk path version %d for leaderAndIsrPath %s&quot;</span>.<span title="(args: Any*)String">format</span><span class="delimiter">(</span><a href="#kafka.utils.ReplicationUtils.parseLeaderAndIsr.leader" title="Int">leader</a>, <a href="#kafka.utils.ReplicationUtils.parseLeaderAndIsr.epoch" title="Int">epoch</a>,
          <a href="#kafka.utils.ReplicationUtils.parseLeaderAndIsr.isr" title="List[Int]">isr</a>.<span title="()String">toString</span><span class="delimiter">(</span><span class="delimiter">)</span>, <a href="#kafka.utils.ReplicationUtils.parseLeaderAndIsr.zkPathVersion" title="Int">zkPathVersion</a>, <a href="#kafka.utils.ReplicationUtils.parseLeaderAndIsr.path" title="String">path</a><span class="delimiter">)</span><span class="delimiter">)</span>
        <span title="(x: kafka.controller.LeaderIsrAndControllerEpoch)Some[kafka.controller.LeaderIsrAndControllerEpoch]">Some</span><span class="delimiter">(</span><a href="../controller/KafkaController.scala.html#kafka.controller;LeaderIsrAndControllerEpoch" title="(leaderAndIsr: kafka.api.LeaderAndIsr, controllerEpoch: Int)kafka.controller.LeaderIsrAndControllerEpoch">LeaderIsrAndControllerEpoch</a><span class="delimiter">(</span><a href="../api/LeaderAndIsrRequest.scala.html#kafka.api;LeaderAndIsr" title="(leader: Int, leaderEpoch: Int, isr: List[Int], zkVersion: Int)kafka.api.LeaderAndIsr">LeaderAndIsr</a><span class="delimiter">(</span><a href="#kafka.utils.ReplicationUtils.parseLeaderAndIsr.leader" title="Int">leader</a>, <a href="#kafka.utils.ReplicationUtils.parseLeaderAndIsr.epoch" title="Int">epoch</a>, <a href="#kafka.utils.ReplicationUtils.parseLeaderAndIsr.isr" title="List[Int]">isr</a>, <a href="#kafka.utils.ReplicationUtils.parseLeaderAndIsr.zkPathVersion" title="Int">zkPathVersion</a><span class="delimiter">)</span>, <a href="#kafka.utils.ReplicationUtils.parseLeaderAndIsr.controllerEpoch" title="Int">controllerEpoch</a><span class="delimiter">)</span><span class="delimiter">)</span>
      case <span title="None.type">None</span> =&gt; <span title="None.type">None</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

<span class="delimiter">}</span>

        </pre>
    </body>
</html>
