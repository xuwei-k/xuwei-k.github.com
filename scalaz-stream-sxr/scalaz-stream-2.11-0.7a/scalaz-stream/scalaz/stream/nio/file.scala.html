<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <title>scalaz-stream/scalaz/stream/nio/file.scala</title>
        <script type="text/javascript" src="../../../../jquery-all.js"></script>
        <script type="text/javascript" src="../../../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../../../style.css" title="Style"></link>
    </head>
    <body>
        <pre>
package scalaz.stream
package nio

import scalaz.concurrent.Task
import scalaz.<span class="delimiter">{</span>-\/, \/-<span class="delimiter">}</span>
import scalaz.stream.<a href="../Process.scala.html#scalaz.stream.Process" title="scalaz.stream.Process.type">Process</a>.<span class="delimiter">{</span>emit, suspend<span class="delimiter">}</span>
import scalaz.stream.<a href="../Cause.scala.html#scalaz.stream.Cause" title="scalaz.stream.Cause.type">Cause</a>.<span class="delimiter">{</span>Error, Terminated, End<span class="delimiter">}</span>

import scodec.bits.ByteVector

import scala.io.Codec

import java.nio.channels.<span class="delimiter">{</span>CompletionHandler, AsynchronousFileChannel<span class="delimiter">}</span>
import java.nio.<span class="delimiter">{</span>CharBuffer, ByteBuffer<span class="delimiter">}</span>
import java.nio.file.<span class="delimiter">{</span>StandardOpenOption, Path, Paths<span class="delimiter">}</span>
import java.net.URI


object <a title="scalaz.stream.nio.file.type" id="scalaz.stream.nio.file">file</a> <a href="#scalaz.stream.nio.file" title="scalaz.stream.nio.file.type" class="delimiter">{</a>

  import <a href="../io.scala.html#scalaz.stream.io" title="scalaz.stream.io.type">io</a>.resource

  <span class="comment">/**
   * Creates a `Channel[Task,Int,ByteVector]` from an `AsynchronousFileChannel`
   * opened for the provided path by repeatedly requesting the given number of
   * bytes. The last chunk may be less than the requested size.
   *
   * This implementation closes the `AsynchronousFileChannel` when finished
   * or in the event of an error.
   */</span>
  def <a title="(path: String)scalaz.stream.Channel[scalaz.concurrent.Task,Int,scodec.bits.ByteVector]" id="scalaz.stream.nio.file.chunkR(43ef83800b)">chunkR</a><span class="delimiter">(</span><a title="String" id="scalaz.stream.nio.file.chunkR(43ef83800b).path">path</a>: <span title="String">String</span><span class="delimiter">)</span>: <a href="../Process.scala.html#scalaz.stream;Process" title="scalaz.stream.Channel[scalaz.concurrent.Task,Int,scodec.bits.ByteVector]">Channel</a><span class="delimiter">[</span>Task, Int, ByteVector<span class="delimiter">]</span> = <a href="#scalaz.stream.nio.file.chunkR(83e0c4fb3e)" title="(path: java.nio.file.Path)scalaz.stream.Channel[scalaz.concurrent.Task,Int,scodec.bits.ByteVector]">chunkR</a><span class="delimiter">(</span><span title="java.nio.file.Paths.type">Paths</span>.<span title="(x$1: String, x$2: String*)java.nio.file.Path">get</span><span class="delimiter">(</span><a href="#scalaz.stream.nio.file.chunkR(43ef83800b).path" title="String">path</a><span class="delimiter">)</span><span class="delimiter">)</span>

  <span class="comment">/**
   * Creates a `Channel[Task,Int,ByteVector]` from an `AsynchronousFileChannel`
   * opened for the provided `URI` by repeatedly requesting the given number of
   * bytes. The last chunk may be less than the requested size.
   *
   * This implementation closes the `AsynchronousFileChannel` when finished
   * or in the event of an error.
   */</span>
  def <a title="(uri: java.net.URI)scalaz.stream.Channel[scalaz.concurrent.Task,Int,scodec.bits.ByteVector]" id="scalaz.stream.nio.file.chunkR(e69f8ba915)">chunkR</a><span class="delimiter">(</span><a title="java.net.URI" id="scalaz.stream.nio.file.chunkR(e69f8ba915).uri">uri</a>: <span title="java.net.URI">URI</span><span class="delimiter">)</span>: <a href="../Process.scala.html#scalaz.stream;Process" title="scalaz.stream.Channel[scalaz.concurrent.Task,Int,scodec.bits.ByteVector]">Channel</a><span class="delimiter">[</span>Task, Int, ByteVector<span class="delimiter">]</span> = <a href="#scalaz.stream.nio.file.chunkR(83e0c4fb3e)" title="(path: java.nio.file.Path)scalaz.stream.Channel[scalaz.concurrent.Task,Int,scodec.bits.ByteVector]">chunkR</a><span class="delimiter">(</span><span title="java.nio.file.Paths.type">Paths</span>.<span title="(x$1: java.net.URI)java.nio.file.Path">get</span><span class="delimiter">(</span><a href="#scalaz.stream.nio.file.chunkR(e69f8ba915).uri" title="java.net.URI">uri</a><span class="delimiter">)</span><span class="delimiter">)</span>

  <span class="comment">/**
   * Creates a `Channel[Task,Int,ByteVector]` from an `AsynchronousFileChannel`
   * opened for the provided `Path` by repeatedly requesting the given number of
   * bytes. The last chunk may be less than the requested size.
   *
   * This implementation closes the `AsynchronousFileChannel` when finished
   * or in the event of an error.
   */</span>
  def <a title="(path: java.nio.file.Path)scalaz.stream.Channel[scalaz.concurrent.Task,Int,scodec.bits.ByteVector]" id="scalaz.stream.nio.file.chunkR(83e0c4fb3e)">chunkR</a><span class="delimiter">(</span><a title="java.nio.file.Path" id="scalaz.stream.nio.file.chunkR(83e0c4fb3e).path">path</a>: <span title="java.nio.file.Path">Path</span><span class="delimiter">)</span>: <a href="../Process.scala.html#scalaz.stream;Process" title="scalaz.stream.Channel[scalaz.concurrent.Task,Int,scodec.bits.ByteVector]">Channel</a><span class="delimiter">[</span>Task, Int, ByteVector<span class="delimiter">]</span> =
    <a href="#scalaz.stream.nio.file.chunkR(be686c4b91)" title="(src: =&gt; java.nio.channels.AsynchronousFileChannel)scalaz.stream.Channel[scalaz.concurrent.Task,Int,scodec.bits.ByteVector]">chunkR</a><span class="delimiter">(</span><span title="java.nio.channels.AsynchronousFileChannel.type">AsynchronousFileChannel</span>.<span title="(x$1: java.nio.file.Path, x$2: java.nio.file.OpenOption*)java.nio.channels.AsynchronousFileChannel">open</span><span class="delimiter">(</span><a href="#scalaz.stream.nio.file.chunkR(83e0c4fb3e).path" title="java.nio.file.Path">path</a>, StandardOpenOption.<span title="java.nio.file.StandardOpenOption(READ)">READ</span><span class="delimiter">)</span><span class="delimiter">)</span>

  <span class="comment">/**
   * Creates a `Channel[Task,Int,ByteVector]` from an `AsynchronousFileChannel`
   * by repeatedly requesting the given number of bytes. The last chunk
   * may be less than the requested size.
   *
   * This implementation closes the `AsynchronousFileChannel` when finished
   * or in the event of an error.
   */</span>
  def <a title="(src: =&gt; java.nio.channels.AsynchronousFileChannel)scalaz.stream.Channel[scalaz.concurrent.Task,Int,scodec.bits.ByteVector]" id="scalaz.stream.nio.file.chunkR(be686c4b91)">chunkR</a><span class="delimiter">(</span><a title="=&gt; java.nio.channels.AsynchronousFileChannel" id="scalaz.stream.nio.file.chunkR(be686c4b91).src">src</a>: =&gt; AsynchronousFileChannel<span class="delimiter">)</span>: <a href="../Process.scala.html#scalaz.stream;Process" title="scalaz.stream.Channel[scalaz.concurrent.Task,Int,scodec.bits.ByteVector]">Channel</a><span class="delimiter">[</span>Task, Int, ByteVector<span class="delimiter">]</span> =
    <a href="#scalaz.stream.nio.file.chunkReadBuffer" title="(src: =&gt; java.nio.channels.AsynchronousFileChannel)scalaz.stream.Channel[scalaz.concurrent.Task,Int,java.nio.ByteBuffer]">chunkReadBuffer</a><a href="../Process.scala.html#scalaz.stream.Process.ChannelSyntax(f213a79260)" title="(self: scalaz.stream.Channel[scalaz.concurrent.Task,Int,java.nio.ByteBuffer])scalaz.stream.Process.ChannelSyntax[scalaz.concurrent.Task,Int,java.nio.ByteBuffer]" class="delimiter">(</a><a href="#scalaz.stream.nio.file.chunkR(be686c4b91).src" title="=&gt; java.nio.channels.AsynchronousFileChannel">src</a><span class="delimiter">)</span>.<a href="../Process.scala.html#scalaz.stream.Process;ChannelSyntax.mapOut" title="(f: java.nio.ByteBuffer =&gt; scodec.bits.ByteVector)(implicit F: scalaz.Functor[scalaz.concurrent.Task])scalaz.stream.Channel[scalaz.concurrent.Task,Int,scodec.bits.ByteVector]">mapOut</a><span title="=&gt; scalaz.Nondeterminism[scalaz.concurrent.Task] with scalaz.Catchable[scalaz.concurrent.Task] with scalaz.MonadError[[α, β]scalaz.concurrent.Task[β],Throwable]" class="delimiter">(</span><span title="scodec.bits.ByteVector.type">ByteVector</span>.<a href="#scalaz.stream.nio.file.chunkR(be686c4b91).$anonfun.bytes" title="(bytes: java.nio.ByteBuffer)scodec.bits.ByteVector">view</a><span class="delimiter">)</span>

  <span class="comment">/**
   * Creates a `Sink[Task, ByteVector]` representation of an `AsynchronousFileChannel`,
   * creating the file if necessary, which will be closed
   * when this `Process` is halted.
   */</span>
  def <a title="(path: String)scalaz.stream.Sink[scalaz.concurrent.Task,scodec.bits.ByteVector]" id="scalaz.stream.nio.file.chunkW(1ae83da59f)">chunkW</a><span class="delimiter">(</span><a title="String" id="scalaz.stream.nio.file.chunkW(1ae83da59f).path">path</a>: <span title="String">String</span><span class="delimiter">)</span>: <a href="../Process.scala.html#scalaz.stream;Process" title="scalaz.stream.Sink[scalaz.concurrent.Task,scodec.bits.ByteVector]">Sink</a><span class="delimiter">[</span>Task, ByteVector<span class="delimiter">]</span> = <a href="#scalaz.stream.nio.file.chunkW(36676bd129)" title="(path: String, create: Boolean)scalaz.stream.Sink[scalaz.concurrent.Task,scodec.bits.ByteVector]">chunkW</a><span class="delimiter">(</span><a href="#scalaz.stream.nio.file.chunkW(1ae83da59f).path" title="String">path</a>, true<span class="delimiter">)</span>

  <span class="comment">/**
   * Creates a `Sink[Task, ByteVector]` representation of an `AsynchronousFileChannel`
   * which will be closed when this `Process` is halted.
   */</span>
  def <a title="(path: String, create: Boolean)scalaz.stream.Sink[scalaz.concurrent.Task,scodec.bits.ByteVector]" id="scalaz.stream.nio.file.chunkW(36676bd129)">chunkW</a><span class="delimiter">(</span><a title="String" id="scalaz.stream.nio.file.chunkW(36676bd129).path">path</a>: <span title="String">String</span>, <a title="Boolean" id="scalaz.stream.nio.file.chunkW(36676bd129).create">create</a>: <span title="Boolean">Boolean</span><span class="delimiter">)</span>: <a href="../Process.scala.html#scalaz.stream;Process" title="scalaz.stream.Sink[scalaz.concurrent.Task,scodec.bits.ByteVector]">Sink</a><span class="delimiter">[</span>Task, ByteVector<span class="delimiter">]</span> = <a href="#scalaz.stream.nio.file.chunkW(5de8174e47)" title="(path: java.nio.file.Path, create: Boolean)scalaz.stream.Sink[scalaz.concurrent.Task,scodec.bits.ByteVector]">chunkW</a><span class="delimiter">(</span><span title="java.nio.file.Paths.type">Paths</span>.<span title="(x$1: String, x$2: String*)java.nio.file.Path">get</span><span class="delimiter">(</span><a href="#scalaz.stream.nio.file.chunkW(36676bd129).path" title="String">path</a><span class="delimiter">)</span>, <a href="#scalaz.stream.nio.file.chunkW(36676bd129).create" title="Boolean">create</a><span class="delimiter">)</span>

  <span class="comment">/**
   * Creates a `Sink[Task, ByteVector]` representation of an `AsynchronousFileChannel`,
   * creating the file if necessary, which will be closed
   * when this `Process` is halted.
   */</span>
  def <a title="(uri: java.net.URI)scalaz.stream.Sink[scalaz.concurrent.Task,scodec.bits.ByteVector]" id="scalaz.stream.nio.file.chunkW(28a060bf03)">chunkW</a><span class="delimiter">(</span><a title="java.net.URI" id="scalaz.stream.nio.file.chunkW(28a060bf03).uri">uri</a>: <span title="java.net.URI">URI</span><span class="delimiter">)</span>: <a href="../Process.scala.html#scalaz.stream;Process" title="scalaz.stream.Sink[scalaz.concurrent.Task,scodec.bits.ByteVector]">Sink</a><span class="delimiter">[</span>Task, ByteVector<span class="delimiter">]</span> = <a href="#scalaz.stream.nio.file.chunkW(667722ef49)" title="(uri: java.net.URI, create: Boolean)scalaz.stream.Sink[scalaz.concurrent.Task,scodec.bits.ByteVector]">chunkW</a><span class="delimiter">(</span><a href="#scalaz.stream.nio.file.chunkW(28a060bf03).uri" title="java.net.URI">uri</a>, true<span class="delimiter">)</span>

  <span class="comment">/**
   * Creates a `Sink[Task, ByteVector]` representation of an `AsynchronousFileChannel`
   * which will be closed when this `Process` is halted.
   */</span>
  def <a title="(uri: java.net.URI, create: Boolean)scalaz.stream.Sink[scalaz.concurrent.Task,scodec.bits.ByteVector]" id="scalaz.stream.nio.file.chunkW(667722ef49)">chunkW</a><span class="delimiter">(</span><a title="java.net.URI" id="scalaz.stream.nio.file.chunkW(667722ef49).uri">uri</a>: <span title="java.net.URI">URI</span>, <a title="Boolean" id="scalaz.stream.nio.file.chunkW(667722ef49).create">create</a>: <span title="Boolean">Boolean</span><span class="delimiter">)</span>: <a href="../Process.scala.html#scalaz.stream;Process" title="scalaz.stream.Sink[scalaz.concurrent.Task,scodec.bits.ByteVector]">Sink</a><span class="delimiter">[</span>Task, ByteVector<span class="delimiter">]</span> = <a href="#scalaz.stream.nio.file.chunkW(5de8174e47)" title="(path: java.nio.file.Path, create: Boolean)scalaz.stream.Sink[scalaz.concurrent.Task,scodec.bits.ByteVector]">chunkW</a><span class="delimiter">(</span><span title="java.nio.file.Paths.type">Paths</span>.<span title="(x$1: java.net.URI)java.nio.file.Path">get</span><span class="delimiter">(</span><a href="#scalaz.stream.nio.file.chunkW(667722ef49).uri" title="java.net.URI">uri</a><span class="delimiter">)</span>, <a href="#scalaz.stream.nio.file.chunkW(667722ef49).create" title="Boolean">create</a><span class="delimiter">)</span>

  <span class="comment">/**
   * Creates a `Sink[Task, ByteVector]` representation of an `AsynchronousFileChannel`,
   * creating the file at the specified `Path` if necessary, which will be closed
   * when this `Process` is halted.
   */</span>
  def <a title="(path: java.nio.file.Path)scalaz.stream.Sink[scalaz.concurrent.Task,scodec.bits.ByteVector]" id="scalaz.stream.nio.file.chunkW(2a517a6030)">chunkW</a><span class="delimiter">(</span><a title="java.nio.file.Path" id="scalaz.stream.nio.file.chunkW(2a517a6030).path">path</a>: <span title="java.nio.file.Path">Path</span><span class="delimiter">)</span>: <a href="../Process.scala.html#scalaz.stream;Process" title="scalaz.stream.Sink[scalaz.concurrent.Task,scodec.bits.ByteVector]">Sink</a><span class="delimiter">[</span>Task, ByteVector<span class="delimiter">]</span> = <a href="#scalaz.stream.nio.file.chunkW(5de8174e47)" title="(path: java.nio.file.Path, create: Boolean)scalaz.stream.Sink[scalaz.concurrent.Task,scodec.bits.ByteVector]">chunkW</a><span class="delimiter">(</span><a href="#scalaz.stream.nio.file.chunkW(2a517a6030).path" title="java.nio.file.Path">path</a>, true<span class="delimiter">)</span>

  <span class="comment">/**
   * Creates a `Sink[Task, ByteVector]` representation of an `AsynchronousFileChannel`
   * at the specified `Path` which will be closed when this `Process` is halted.
   */</span>
  def <a title="(path: java.nio.file.Path, create: Boolean)scalaz.stream.Sink[scalaz.concurrent.Task,scodec.bits.ByteVector]" id="scalaz.stream.nio.file.chunkW(5de8174e47)">chunkW</a><span class="delimiter">(</span><a title="java.nio.file.Path" id="scalaz.stream.nio.file.chunkW(5de8174e47).path">path</a>: <span title="java.nio.file.Path">Path</span>, <a title="Boolean" id="scalaz.stream.nio.file.chunkW(5de8174e47).create">create</a>: <span title="Boolean">Boolean</span><span class="delimiter">)</span>: <a href="../Process.scala.html#scalaz.stream;Process" title="scalaz.stream.Sink[scalaz.concurrent.Task,scodec.bits.ByteVector]">Sink</a><span class="delimiter">[</span>Task, ByteVector<span class="delimiter">]</span> = <span class="delimiter">{</span>
    if <span class="delimiter">(</span><a href="#scalaz.stream.nio.file.chunkW(5de8174e47).create" title="Boolean">create</a><span class="delimiter">)</span> <a href="#scalaz.stream.nio.file.chunkW(ed0404c323)" title="(src: =&gt; java.nio.channels.AsynchronousFileChannel)scalaz.stream.Sink[scalaz.concurrent.Task,scodec.bits.ByteVector]">chunkW</a><span class="delimiter">(</span><span title="java.nio.channels.AsynchronousFileChannel.type">AsynchronousFileChannel</span>.<span title="(x$1: java.nio.file.Path, x$2: java.nio.file.OpenOption*)java.nio.channels.AsynchronousFileChannel">open</span><span class="delimiter">(</span><a href="#scalaz.stream.nio.file.chunkW(5de8174e47).path" title="java.nio.file.Path">path</a>, StandardOpenOption.<span title="java.nio.file.StandardOpenOption(WRITE)">WRITE</span>, StandardOpenOption.<span title="java.nio.file.StandardOpenOption(CREATE)">CREATE</span><span class="delimiter">)</span><span class="delimiter">)</span>
    else <a href="#scalaz.stream.nio.file.chunkW(ed0404c323)" title="(src: =&gt; java.nio.channels.AsynchronousFileChannel)scalaz.stream.Sink[scalaz.concurrent.Task,scodec.bits.ByteVector]">chunkW</a><span class="delimiter">(</span><span title="java.nio.channels.AsynchronousFileChannel.type">AsynchronousFileChannel</span>.<span title="(x$1: java.nio.file.Path, x$2: java.nio.file.OpenOption*)java.nio.channels.AsynchronousFileChannel">open</span><span class="delimiter">(</span><a href="#scalaz.stream.nio.file.chunkW(5de8174e47).path" title="java.nio.file.Path">path</a>, StandardOpenOption.<span title="java.nio.file.StandardOpenOption(WRITE)">WRITE</span><span class="delimiter">)</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Creates a `Sink[Task, ByteVector]` representation of the `AsynchronousFileChannel`
   * which will be closed when this `Process` is halted.
   */</span>
  def <a title="(src: =&gt; java.nio.channels.AsynchronousFileChannel)scalaz.stream.Sink[scalaz.concurrent.Task,scodec.bits.ByteVector]" id="scalaz.stream.nio.file.chunkW(ed0404c323)">chunkW</a><span class="delimiter">(</span><a title="=&gt; java.nio.channels.AsynchronousFileChannel" id="scalaz.stream.nio.file.chunkW(ed0404c323).src">src</a>: =&gt; AsynchronousFileChannel<span class="delimiter">)</span>: <a href="../Process.scala.html#scalaz.stream;Process" title="scalaz.stream.Sink[scalaz.concurrent.Task,scodec.bits.ByteVector]">Sink</a><span class="delimiter">[</span>Task, ByteVector<span class="delimiter">]</span> =
    <a href="#scalaz.stream.nio.file.chunkWriteBuffer" title="(src: =&gt; java.nio.channels.AsynchronousFileChannel)scalaz.stream.Sink[scalaz.concurrent.Task,java.nio.ByteBuffer]">chunkWriteBuffer</a><span class="delimiter">(</span><a href="#scalaz.stream.nio.file.chunkW(ed0404c323).src" title="=&gt; java.nio.channels.AsynchronousFileChannel">src</a><span class="delimiter">)</span>.<a href="../Process.scala.html#scalaz.stream;Process.map" title="(f: (java.nio.ByteBuffer =&gt; scalaz.concurrent.Task[Unit]) =&gt; (scodec.bits.ByteVector =&gt; scalaz.concurrent.Task[Unit]))scalaz.stream.Process[scalaz.concurrent.Task,scodec.bits.ByteVector =&gt; scalaz.concurrent.Task[Unit]]">map</a><span class="delimiter">{</span> <a title="java.nio.ByteBuffer =&gt; scalaz.concurrent.Task[Unit]" id="scalaz.stream.nio.file.chunkW(ed0404c323).$anonfun.buffToTask">buffToTask</a> =&gt;
      vec: <span title="scodec.bits.ByteVector">ByteVector</span> =&gt; <a href="#scalaz.stream.nio.file.chunkW(ed0404c323).$anonfun.buffToTask" title="(v1: java.nio.ByteBuffer)scalaz.concurrent.Task[Unit]">buffToTask</a><span class="delimiter">(</span><a href="#scalaz.stream.nio.file.chunkW(ed0404c323).$anonfun.$anonfun.vec" title="scodec.bits.ByteVector">vec</a>.<span title="=&gt; java.nio.ByteBuffer">toByteBuffer</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>

  <span class="comment">/**
   * Creates a `Process[Task,String]` from the lines of a file, using
   * the nio2 framework to make the process asynchronous. The
   * `resource` combinator is used to ensure the AsynchronousFileChannel
   * is automatically closed on completion.
   */</span>
  def <a title="(filename: String)(implicit codec: scala.io.Codec)scalaz.stream.Process[scalaz.concurrent.Task,String]" id="scalaz.stream.nio.file.linesR(a59878835d)">linesR</a><span class="delimiter">(</span><a title="String" id="scalaz.stream.nio.file.linesR(a59878835d).filename">filename</a>: <span title="String">String</span><span class="delimiter">)</span><span class="delimiter">(</span>implicit <a title="scala.io.Codec" id="scalaz.stream.nio.file.linesR(a59878835d).codec">codec</a>: <span title="scala.io.Codec">Codec</span><span class="delimiter">)</span>: <a href="../Process.scala.html#scalaz.stream;Process" title="scalaz.stream.Process[scalaz.concurrent.Task,String]">Process</a><span class="delimiter">[</span>Task,String<span class="delimiter">]</span> =
    <a href="#scalaz.stream.nio.file.linesR(b74d1c40fa)" title="(path: java.nio.file.Path)(implicit codec: scala.io.Codec)scalaz.stream.Process[scalaz.concurrent.Task,String]">linesR</a><span class="delimiter">(</span><span title="java.nio.file.Paths.type">Paths</span>.<span title="(x$1: String, x$2: String*)java.nio.file.Path">get</span><span class="delimiter">(</span><a href="#scalaz.stream.nio.file.linesR(a59878835d).filename" title="String">filename</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">(</span><a href="#scalaz.stream.nio.file.linesR(a59878835d).codec" title="scala.io.Codec">codec</a><span class="delimiter">)</span>

  <span class="comment">/**
   * Creates a `Process[Task,String]` from the lines of a file, using
   * the nio2 `AsynchronousFileChannel` to make the process asynchronous. The
   * `resource` combinator is used to ensure the `AsynchronousFileChannel`
   * is automatically closed on completion.
   */</span>
  def <a title="(path: java.nio.file.Path)(implicit codec: scala.io.Codec)scalaz.stream.Process[scalaz.concurrent.Task,String]" id="scalaz.stream.nio.file.linesR(b74d1c40fa)">linesR</a><span class="delimiter">(</span><a title="java.nio.file.Path" id="scalaz.stream.nio.file.linesR(b74d1c40fa).path">path</a>: <span title="java.nio.file.Path">Path</span><span class="delimiter">)</span><span class="delimiter">(</span>implicit <a title="scala.io.Codec" id="scalaz.stream.nio.file.linesR(b74d1c40fa).codec">codec</a>: <span title="scala.io.Codec">Codec</span><span class="delimiter">)</span>: <a href="../Process.scala.html#scalaz.stream;Process" title="scalaz.stream.Process[scalaz.concurrent.Task,String]">Process</a><span class="delimiter">[</span>Task,String<span class="delimiter">]</span> =
    <a href="#scalaz.stream.nio.file.linesR(d0aae2d2a4)" title="(src: =&gt; java.nio.channels.AsynchronousFileChannel)(implicit codec: scala.io.Codec)scalaz.stream.Process[scalaz.concurrent.Task,String]">linesR</a><span class="delimiter">(</span><span title="java.nio.channels.AsynchronousFileChannel.type">AsynchronousFileChannel</span>.<span title="(x$1: java.nio.file.Path, x$2: java.nio.file.OpenOption*)java.nio.channels.AsynchronousFileChannel">open</span><span class="delimiter">(</span><a href="#scalaz.stream.nio.file.linesR(b74d1c40fa).path" title="java.nio.file.Path">path</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">(</span><a href="#scalaz.stream.nio.file.linesR(b74d1c40fa).codec" title="scala.io.Codec">codec</a><span class="delimiter">)</span>

  <span class="comment">/**
   * Creates a `Process[Task,String]` from the lines of the `AsynchronousFileChannel`
   * using the nio2 framework to make the process asynchronous. The
   * `resource` combinator is used to ensure the AsynchronousFileChannel
   * is automatically closed on completion.
   */</span>
  def <a title="(src: =&gt; java.nio.channels.AsynchronousFileChannel)(implicit codec: scala.io.Codec)scalaz.stream.Process[scalaz.concurrent.Task,String]" id="scalaz.stream.nio.file.linesR(d0aae2d2a4)">linesR</a><span class="delimiter">(</span><a title="=&gt; java.nio.channels.AsynchronousFileChannel" id="scalaz.stream.nio.file.linesR(d0aae2d2a4).src">src</a>: =&gt; AsynchronousFileChannel<span class="delimiter">)</span><span class="delimiter">(</span>implicit <a title="scala.io.Codec" id="scalaz.stream.nio.file.linesR(d0aae2d2a4).codec">codec</a>: <span title="scala.io.Codec">Codec</span><span class="delimiter">)</span>: <a href="../Process.scala.html#scalaz.stream;Process" title="scalaz.stream.Process[scalaz.concurrent.Task,String]">Process</a><span class="delimiter">[</span>Task,String<span class="delimiter">]</span> =
    <a href="#scalaz.stream.nio.file.textR" title="(src: =&gt; java.nio.channels.AsynchronousFileChannel)(implicit codec: scala.io.Codec)scalaz.stream.Process[scalaz.concurrent.Task,String]">textR</a><span class="delimiter">(</span><a href="#scalaz.stream.nio.file.linesR(d0aae2d2a4).src" title="=&gt; java.nio.channels.AsynchronousFileChannel">src</a><span class="delimiter">)</span><span class="delimiter">(</span><a href="#scalaz.stream.nio.file.linesR(d0aae2d2a4).codec" title="scala.io.Codec">codec</a><span class="delimiter">)</span>.<a href="../Process.scala.html#scalaz.stream;Process.pipe" title="(p1: scalaz.stream.Process1[String,String])scalaz.stream.Process[scalaz.concurrent.Task,String]">pipe</a><span class="delimiter">(</span><a href="../text.scala.html#scalaz.stream.text" title="scalaz.stream.text.type">text</a>.<a href="../text.scala.html#scalaz.stream.text.lines" title="(maxLineLength: Int)scalaz.stream.Process1[String,String]">lines</a><span class="delimiter">(</span>-<span title="Int(-1)" class="int">1</span><span class="delimiter">)</span><span class="delimiter">)</span>

  <span class="comment">/**
   * Creates a `Process[Task,String]` from the text of the `AsynchronousFileChannel`
   * using the nio2 framework to make the process asynchronous. The
   * `resource` combinator is used to ensure the AsynchronousFileChannel
   * is automatically closed on completion.
   */</span>
  def <a title="(src: =&gt; java.nio.channels.AsynchronousFileChannel)(implicit codec: scala.io.Codec)scalaz.stream.Process[scalaz.concurrent.Task,String]" id="scalaz.stream.nio.file.textR">textR</a><span class="delimiter">(</span><a title="=&gt; java.nio.channels.AsynchronousFileChannel" id="scalaz.stream.nio.file.textR.src">src</a>: =&gt; AsynchronousFileChannel<span class="delimiter">)</span><span class="delimiter">(</span>implicit <a title="scala.io.Codec" id="scalaz.stream.nio.file.textR.codec">codec</a>: <span title="scala.io.Codec">Codec</span><span class="delimiter">)</span>: <a href="../Process.scala.html#scalaz.stream;Process" title="scalaz.stream.Process[scalaz.concurrent.Task,String]">Process</a><span class="delimiter">[</span>Task,String<span class="delimiter">]</span> = <a href="../Process.scala.html#scalaz.stream.Process.suspend" title="(p: =&gt; scalaz.stream.Process[scalaz.concurrent.Task,String])scalaz.stream.Process[scalaz.concurrent.Task,String]">suspend</a> <span class="delimiter">{</span>
    val <a title="java.nio.ByteBuffer =&gt; java.nio.CharBuffer" id="scalaz.stream.nio.file.textR.f">f</a> = <a href="#scalaz.stream.nio.file.decodeByteBuff" title="(codec: scala.io.Codec)java.nio.ByteBuffer =&gt; java.nio.CharBuffer">decodeByteBuff</a><span class="delimiter">(</span><a href="#scalaz.stream.nio.file.textR.codec" title="scala.io.Codec">codec</a><span class="delimiter">)</span>
    <a href="../Process.scala.html#scalaz.stream.Process" title="scalaz.stream.Process.type">Process</a>.<a href="../Process.scala.html#scalaz.stream.Process.constant" title="(a: Int, chunkSize: Int)scalaz.stream.Process0[Int]">constant</a><a href="../Process.scala.html#scalaz.stream.Process.Process0Syntax(0cbdd80600)" title="(self: scalaz.stream.Process0[Int])scalaz.stream.Process.Process0Syntax[Int]" class="delimiter">(</a><span title="Int(1024)" class="int">1024</span><span class="delimiter">)</span>
      .<a href="../Process.scala.html#scalaz.stream.Process.ProcessSyntax(90c98207c6)" title="(self: scalaz.stream.Process[scalaz.concurrent.Task,Int])scalaz.stream.Process.ProcessSyntax[scalaz.concurrent.Task,Int]">toSource</a>
      .<a href="../Process.scala.html#scalaz.stream.Process;ProcessSyntax.through" title="(f: scalaz.stream.Channel[[x]scalaz.concurrent.Task[x],Int,java.nio.ByteBuffer])scalaz.stream.Process[[x]scalaz.concurrent.Task[x],java.nio.ByteBuffer]">through</a><span class="delimiter">(</span><a href="#scalaz.stream.nio.file.chunkReadBuffer" title="(src: =&gt; java.nio.channels.AsynchronousFileChannel)scalaz.stream.Channel[scalaz.concurrent.Task,Int,java.nio.ByteBuffer]">chunkReadBuffer</a><span class="delimiter">(</span><a href="#scalaz.stream.nio.file.textR.src" title="=&gt; java.nio.channels.AsynchronousFileChannel">src</a><span class="delimiter">)</span><span class="delimiter">)</span>.<a href="../Process.scala.html#scalaz.stream;Process.flatMap" title="(f: java.nio.ByteBuffer =&gt; scalaz.stream.Process[[x]scalaz.concurrent.Task[x],String])scalaz.stream.Process[[x]scalaz.concurrent.Task[x],String]">flatMap</a> <span class="delimiter">{</span> <a title="java.nio.ByteBuffer" id="scalaz.stream.nio.file.textR.$anonfun.buff">buff</a> =&gt;
        val <a title="java.nio.CharBuffer" id="scalaz.stream.nio.file.textR.$anonfun.charbuff">charbuff</a> = <a href="#scalaz.stream.nio.file.textR.f" title="(v1: java.nio.ByteBuffer)java.nio.CharBuffer">f</a><span class="delimiter">(</span><a href="#scalaz.stream.nio.file.textR.$anonfun.buff" title="java.nio.ByteBuffer">buff</a><span class="delimiter">)</span>
        val <a title="String" id="scalaz.stream.nio.file.textR.$anonfun.res">res</a>= <span title="java.nio.CharBuffer.type">CharBuffer</span>.<span title="(x$1: CharSequence)java.nio.CharBuffer">wrap</span><span class="delimiter">(</span><a href="#scalaz.stream.nio.file.textR.$anonfun.charbuff" title="java.nio.CharBuffer">charbuff</a><span class="delimiter">)</span>.<span title="()String">toString</span>
        <a href="../Process.scala.html#scalaz.stream.Process.emit" title="(o: String)scalaz.stream.Process0[String]">emit</a><span class="delimiter">(</span><a href="#scalaz.stream.nio.file.textR.$anonfun.res" title="String">res</a><span class="delimiter">)</span>
      <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Creates a `Channel[Task,Int,ByteBuffer]` from an `AsynchronousFileChannel`
   * by repeatedly requesting the given number of bytes. The last chunk
   * may be less than the requested size. The emitted `ByteBuffer` isn't reused.
   *
   * This implementation closes the `AsynchronousFileChannel` when finished
   * or in the event of an error.
   */</span>
  def <a title="(src: =&gt; java.nio.channels.AsynchronousFileChannel)scalaz.stream.Channel[scalaz.concurrent.Task,Int,java.nio.ByteBuffer]" id="scalaz.stream.nio.file.chunkReadBuffer">chunkReadBuffer</a><span class="delimiter">(</span><a title="=&gt; java.nio.channels.AsynchronousFileChannel" id="scalaz.stream.nio.file.chunkReadBuffer.src">src</a>: =&gt; AsynchronousFileChannel<span class="delimiter">)</span>: <a href="../Process.scala.html#scalaz.stream;Process" title="scalaz.stream.Channel[scalaz.concurrent.Task,Int,java.nio.ByteBuffer]">Channel</a><span class="delimiter">[</span>Task,Int,ByteBuffer<span class="delimiter">]</span> = <span class="delimiter">{</span>
    var <a title="Int" id="scalaz.stream.nio.file.chunkReadBuffer.pos">pos</a> = <span title="Int(0)" class="int">0</span>
    <a href="../io.scala.html#scalaz.stream.io.resource" title="(acquire: scalaz.concurrent.Task[java.nio.channels.AsynchronousFileChannel])(release: java.nio.channels.AsynchronousFileChannel =&gt; scalaz.concurrent.Task[Unit])(step: java.nio.channels.AsynchronousFileChannel =&gt; scalaz.concurrent.Task[Int =&gt; scalaz.concurrent.Task[java.nio.ByteBuffer]])scalaz.stream.Process[scalaz.concurrent.Task,Int =&gt; scalaz.concurrent.Task[java.nio.ByteBuffer]]">resource</a><span class="delimiter">(</span><span title="scalaz.concurrent.Task.type">Task</span>.<span title="(a: =&gt; java.nio.channels.AsynchronousFileChannel)scalaz.concurrent.Task[java.nio.channels.AsynchronousFileChannel]">delay</span><span class="delimiter">(</span><a href="#scalaz.stream.nio.file.chunkReadBuffer.src" title="=&gt; java.nio.channels.AsynchronousFileChannel">src</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">(</span>
      <span title="java.nio.channels.AsynchronousFileChannel">src</span> =&gt; <span title="scalaz.concurrent.Task.type">Task</span>.<span title="(a: =&gt; Unit)scalaz.concurrent.Task[Unit]">delay</span><span class="delimiter">(</span><span title="java.nio.channels.AsynchronousFileChannel">src</span>.<span title="()Unit">close</span><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">{</span> <span title="java.nio.channels.AsynchronousFileChannel">src</span> =&gt;
      <span title="scalaz.concurrent.Task.type">Task</span>.<span title="(a: Int =&gt; scalaz.concurrent.Task[java.nio.ByteBuffer])scalaz.concurrent.Task[Int =&gt; scalaz.concurrent.Task[java.nio.ByteBuffer]]">now</span> <span class="delimiter">{</span> <span class="delimiter">(</span>size: <span title="Int">Int</span><span class="delimiter">)</span> =&gt; <span title="scalaz.concurrent.Task.type">Task</span>.<span title="[A](register: (scalaz.\/[Throwable,A] =&gt; Unit) =&gt; Unit)scalaz.concurrent.Task[A]">async</span><span title="(register: (scalaz.\/[Throwable,java.nio.ByteBuffer] =&gt; Unit) =&gt; Unit)scalaz.concurrent.Task[java.nio.ByteBuffer]" class="delimiter">[</span><span title="java.nio.ByteBuffer">ByteBuffer</span><span class="delimiter">]</span> <span class="delimiter">{</span> <a title="scalaz.\/[Throwable,java.nio.ByteBuffer] =&gt; Unit" id="scalaz.stream.nio.file.chunkReadBuffer.$anonfun.$anonfun.$anonfun.cb">cb</a> =&gt;
        val <a title="java.nio.ByteBuffer" id="scalaz.stream.nio.file.chunkReadBuffer.$anonfun.$anonfun.$anonfun.buff">buff</a> = <span title="java.nio.ByteBuffer.type">ByteBuffer</span>.<span title="(x$1: Int)java.nio.ByteBuffer">allocate</span><span class="delimiter">(</span><a href="#scalaz.stream.nio.file.chunkReadBuffer.$anonfun.$anonfun.size" title="Int">size</a><span class="delimiter">)</span>
        <span title="java.nio.channels.AsynchronousFileChannel">src</span>.<span title="(x$1: java.nio.ByteBuffer, x$2: Long, x$3: Null, x$4: java.nio.channels.CompletionHandler[Integer, _ &gt;: Null])Unit">read</span><span class="delimiter">(</span><a href="#scalaz.stream.nio.file.chunkReadBuffer.$anonfun.$anonfun.$anonfun.buff" title="java.nio.ByteBuffer">buff</a>, <a href="#scalaz.stream.nio.file.chunkReadBuffer.pos" title="=&gt; Long">pos</a>, null, new <a title="&lt;$anon: java.nio.channels.CompletionHandler[Integer,Null]&gt; extends Object with java.nio.channels.CompletionHandler[Integer,Null]" id="scalaz.stream.nio.file.chunkReadBuffer.$anonfun.$anonfun.$anonfun;$anon">CompletionHandler</a><span class="delimiter">[</span>Integer, Null<span class="delimiter">]</span> <span class="delimiter">{</span>
          override def <a title="(result: Integer, attachment: Null)Unit" id="scalaz.stream.nio.file.chunkReadBuffer.$anonfun.$anonfun.$anonfun;$anon.completed">completed</a><span class="delimiter">(</span><a title="Integer" id="scalaz.stream.nio.file.chunkReadBuffer.$anonfun.$anonfun.$anonfun;$anon.completed.result">result</a>: <span title="Integer">Integer</span>, <a title="Null" id="scalaz.stream.nio.file.chunkReadBuffer.$anonfun.$anonfun.$anonfun;$anon.completed.attachment">attachment</a>: <span title="Null">Null</span><span class="delimiter">)</span>: <span title="Unit">Unit</span> = <span class="delimiter">{</span>
            if <span class="delimiter">(</span><a href="#scalaz.stream.nio.file.chunkReadBuffer.$anonfun.$anonfun.$anonfun;$anon.completed.result" title="Integer">result</a> <span title="(x$1: Any)Boolean">==</span> -<span title="Int(-1)" class="int">1</span><span class="delimiter">)</span> <a href="#scalaz.stream.nio.file.chunkReadBuffer.$anonfun.$anonfun.$anonfun.cb" title="(v1: scalaz.\/[Throwable,java.nio.ByteBuffer])Unit">cb</a><span class="delimiter">(</span><span title="(a: scalaz.stream.Cause.Terminated)scalaz.-\/[scalaz.stream.Cause.Terminated]">-\/</span><span class="delimiter">(</span><a href="../Cause.scala.html#scalaz.stream.Cause;Terminated" title="(cause: scalaz.stream.Cause)scalaz.stream.Cause.Terminated">Terminated</a><span class="delimiter">(</span><a href="../Cause.scala.html#scalaz.stream.Cause.End" title="scalaz.stream.Cause.End.type">End</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span> <span class="comment">// finished</span>
            else <span class="delimiter">{</span>
              <a href="#scalaz.stream.nio.file.chunkReadBuffer.pos" title="Int">pos</a> <span title="(x: Int)Int">+=</span> <a href="#scalaz.stream.nio.file.chunkReadBuffer.$anonfun.$anonfun.$anonfun;$anon.completed.result" title="implicit scala.Predef.Integer2int : (x: Integer)Int">result</a>
              <a href="#scalaz.stream.nio.file.chunkReadBuffer.$anonfun.$anonfun.$anonfun.buff" title="java.nio.ByteBuffer">buff</a>.<span title="()java.nio.Buffer">flip</span><span class="delimiter">(</span><span class="delimiter">)</span>
              <a href="#scalaz.stream.nio.file.chunkReadBuffer.$anonfun.$anonfun.$anonfun.cb" title="(v1: scalaz.\/[Throwable,java.nio.ByteBuffer])Unit">cb</a><span class="delimiter">(</span><span title="(b: java.nio.ByteBuffer)scalaz.\/-[java.nio.ByteBuffer]">\/-</span><span class="delimiter">(</span><a href="#scalaz.stream.nio.file.chunkReadBuffer.$anonfun.$anonfun.$anonfun.buff" title="java.nio.ByteBuffer">buff</a><span class="delimiter">)</span><span class="delimiter">)</span>
            <span class="delimiter">}</span>
          <span class="delimiter">}</span>

          override def <a title="(exc: Throwable, attachment: Null)Unit" id="scalaz.stream.nio.file.chunkReadBuffer.$anonfun.$anonfun.$anonfun;$anon.failed">failed</a><span class="delimiter">(</span><a title="Throwable" id="scalaz.stream.nio.file.chunkReadBuffer.$anonfun.$anonfun.$anonfun;$anon.failed.exc">exc</a>: <span title="Throwable">Throwable</span>, <a title="Null" id="scalaz.stream.nio.file.chunkReadBuffer.$anonfun.$anonfun.$anonfun;$anon.failed.attachment">attachment</a>: <span title="Null">Null</span><span class="delimiter">)</span>: <span title="Unit">Unit</span> =
            <a href="#scalaz.stream.nio.file.chunkReadBuffer.$anonfun.$anonfun.$anonfun.cb" title="(v1: scalaz.\/[Throwable,java.nio.ByteBuffer])Unit">cb</a><span class="delimiter">(</span><span title="(a: scalaz.stream.Cause.Terminated)scalaz.-\/[scalaz.stream.Cause.Terminated]">-\/</span><span class="delimiter">(</span><a href="../Cause.scala.html#scalaz.stream.Cause;Terminated" title="(cause: scalaz.stream.Cause)scalaz.stream.Cause.Terminated">Terminated</a><span class="delimiter">(</span><a href="../Cause.scala.html#scalaz.stream.Cause;Error" title="(rsn: Throwable)scalaz.stream.Cause.Error">Error</a><span class="delimiter">(</span><a href="#scalaz.stream.nio.file.chunkReadBuffer.$anonfun.$anonfun.$anonfun;$anon.failed.exc" title="Throwable">exc</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
        <span class="delimiter">}</span><span class="delimiter">)</span>
      <span class="delimiter">}</span><span class="delimiter">}</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Creates a `Sink[Task,ByteBuffer]` from an `AsynchronousFileChannel`,
   * which will be closed when this `Process` is halted.
   */</span>
  def <a title="(src: =&gt; java.nio.channels.AsynchronousFileChannel)scalaz.stream.Sink[scalaz.concurrent.Task,java.nio.ByteBuffer]" id="scalaz.stream.nio.file.chunkWriteBuffer">chunkWriteBuffer</a><span class="delimiter">(</span><a title="=&gt; java.nio.channels.AsynchronousFileChannel" id="scalaz.stream.nio.file.chunkWriteBuffer.src">src</a>: =&gt; AsynchronousFileChannel<span class="delimiter">)</span>: <a href="../Process.scala.html#scalaz.stream;Process" title="scalaz.stream.Sink[scalaz.concurrent.Task,java.nio.ByteBuffer]">Sink</a><span class="delimiter">[</span>Task, ByteBuffer<span class="delimiter">]</span> = <span class="delimiter">{</span>
    var <a title="Int" id="scalaz.stream.nio.file.chunkWriteBuffer.pos">pos</a> = <span title="Int(0)" class="int">0</span>
    <a href="../io.scala.html#scalaz.stream.io.resource" title="(acquire: scalaz.concurrent.Task[java.nio.channels.AsynchronousFileChannel])(release: java.nio.channels.AsynchronousFileChannel =&gt; scalaz.concurrent.Task[Unit])(step: java.nio.channels.AsynchronousFileChannel =&gt; scalaz.concurrent.Task[java.nio.ByteBuffer =&gt; scalaz.concurrent.Task[Unit]])scalaz.stream.Process[scalaz.concurrent.Task,java.nio.ByteBuffer =&gt; scalaz.concurrent.Task[Unit]]">resource</a><span class="delimiter">(</span><span title="scalaz.concurrent.Task.type">Task</span>.<span title="(a: =&gt; java.nio.channels.AsynchronousFileChannel)scalaz.concurrent.Task[java.nio.channels.AsynchronousFileChannel]">delay</span><span class="delimiter">(</span><a href="#scalaz.stream.nio.file.chunkWriteBuffer.src" title="=&gt; java.nio.channels.AsynchronousFileChannel">src</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">(</span>
      <span title="java.nio.channels.AsynchronousFileChannel">src</span> =&gt; <span title="scalaz.concurrent.Task.type">Task</span>.<span title="(a: =&gt; Unit)scalaz.concurrent.Task[Unit]">delay</span><span class="delimiter">(</span><span title="java.nio.channels.AsynchronousFileChannel">src</span>.<span title="()Unit">close</span><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">{</span> <span title="java.nio.channels.AsynchronousFileChannel">src</span> =&gt;
      <span title="scalaz.concurrent.Task.type">Task</span>.<span title="(a: java.nio.ByteBuffer =&gt; scalaz.concurrent.Task[Unit])scalaz.concurrent.Task[java.nio.ByteBuffer =&gt; scalaz.concurrent.Task[Unit]]">now</span> <span class="delimiter">{</span> <span class="delimiter">(</span>buff: <span title="java.nio.ByteBuffer">ByteBuffer</span><span class="delimiter">)</span> =&gt;
        <span title="scalaz.concurrent.Task.type">Task</span>.<span title="[A](register: (scalaz.\/[Throwable,A] =&gt; Unit) =&gt; Unit)scalaz.concurrent.Task[A]">async</span><span title="(register: (scalaz.\/[Throwable,Unit] =&gt; Unit) =&gt; Unit)scalaz.concurrent.Task[Unit]" class="delimiter">[</span><span title="Unit">Unit</span><span class="delimiter">]</span> <span class="delimiter">{</span> <a title="scalaz.\/[Throwable,Unit] =&gt; Unit" id="scalaz.stream.nio.file.chunkWriteBuffer.$anonfun.$anonfun.$anonfun.cb">cb</a> =&gt;
          def <a title="()Unit" id="scalaz.stream.nio.file.chunkWriteBuffer.$anonfun.$anonfun.$anonfun.go">go</a><span class="delimiter">(</span><span class="delimiter">)</span>: <span title="Unit">Unit</span> = <span class="delimiter">{</span>
            <span title="java.nio.channels.AsynchronousFileChannel">src</span>.<span title="(x$1: java.nio.ByteBuffer, x$2: Long, x$3: Null, x$4: java.nio.channels.CompletionHandler[Integer, _ &gt;: Null])Unit">write</span><span class="delimiter">(</span><a href="#scalaz.stream.nio.file.chunkWriteBuffer.$anonfun.$anonfun.buff" title="java.nio.ByteBuffer">buff</a>, <a href="#scalaz.stream.nio.file.chunkWriteBuffer.pos" title="=&gt; Long">pos</a>, null, new <a title="&lt;$anon: java.nio.channels.CompletionHandler[Integer,Null]&gt; extends Object with java.nio.channels.CompletionHandler[Integer,Null]" id="scalaz.stream.nio.file.chunkWriteBuffer.$anonfun.$anonfun.$anonfun.go;$anon">CompletionHandler</a><span class="delimiter">[</span>Integer, Null<span class="delimiter">]</span> <span class="delimiter">{</span>
              override def <a title="(result: Integer, attachment: Null)Unit" id="scalaz.stream.nio.file.chunkWriteBuffer.$anonfun.$anonfun.$anonfun.go;$anon.completed">completed</a><span class="delimiter">(</span><a title="Integer" id="scalaz.stream.nio.file.chunkWriteBuffer.$anonfun.$anonfun.$anonfun.go;$anon.completed.result">result</a>: <span title="Integer">Integer</span>, <a title="Null" id="scalaz.stream.nio.file.chunkWriteBuffer.$anonfun.$anonfun.$anonfun.go;$anon.completed.attachment">attachment</a>: <span title="Null">Null</span><span class="delimiter">)</span>: <span title="Unit">Unit</span> = <span class="delimiter">{</span>
                if <span class="delimiter">(</span><a href="#scalaz.stream.nio.file.chunkWriteBuffer.$anonfun.$anonfun.$anonfun.go;$anon.completed.result" title="Integer">result</a> <span title="(x$1: Any)Boolean">==</span> -<span title="Int(-1)" class="int">1</span><span class="delimiter">)</span> <a href="#scalaz.stream.nio.file.chunkWriteBuffer.$anonfun.$anonfun.$anonfun.cb" title="(v1: scalaz.\/[Throwable,Unit])Unit">cb</a><span class="delimiter">(</span><span title="(a: scalaz.stream.Cause.Terminated)scalaz.-\/[scalaz.stream.Cause.Terminated]">-\/</span><span class="delimiter">(</span><a href="../Cause.scala.html#scalaz.stream.Cause;Terminated" title="(cause: scalaz.stream.Cause)scalaz.stream.Cause.Terminated">Terminated</a><span class="delimiter">(</span><a href="../Cause.scala.html#scalaz.stream.Cause.End" title="scalaz.stream.Cause.End.type">End</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span> <span class="comment">// finished</span>
                else <span class="delimiter">{</span>
                  <a href="#scalaz.stream.nio.file.chunkWriteBuffer.pos" title="Int">pos</a> <span title="(x: Int)Int">+=</span> <a href="#scalaz.stream.nio.file.chunkWriteBuffer.$anonfun.$anonfun.$anonfun.go;$anon.completed.result" title="implicit scala.Predef.Integer2int : (x: Integer)Int">result</a>
                  if <span class="delimiter">(</span><a href="#scalaz.stream.nio.file.chunkWriteBuffer.$anonfun.$anonfun.buff" title="java.nio.ByteBuffer">buff</a>.<span title="()Int">remaining</span><span class="delimiter">(</span><span class="delimiter">)</span> <span title="(x: Int)Boolean">!=</span> <span title="Int(0)" class="int">0</span><span class="delimiter">)</span> <a href="#scalaz.stream.nio.file.chunkWriteBuffer.$anonfun.$anonfun.$anonfun.go" title="()Unit">go</a><span class="delimiter">(</span><span class="delimiter">)</span>
                  else <a href="#scalaz.stream.nio.file.chunkWriteBuffer.$anonfun.$anonfun.$anonfun.cb" title="(v1: scalaz.\/[Throwable,Unit])Unit">cb</a><span class="delimiter">(</span><span title="(b: Unit)scalaz.\/-[Unit]">\/-</span><span class="delimiter">(</span><span title="Unit" class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
                <span class="delimiter">}</span>
              <span class="delimiter">}</span>
              override def <a title="(exc: Throwable, attachment: Null)Unit" id="scalaz.stream.nio.file.chunkWriteBuffer.$anonfun.$anonfun.$anonfun.go;$anon.failed">failed</a><span class="delimiter">(</span><a title="Throwable" id="scalaz.stream.nio.file.chunkWriteBuffer.$anonfun.$anonfun.$anonfun.go;$anon.failed.exc">exc</a>: <span title="Throwable">Throwable</span>, <a title="Null" id="scalaz.stream.nio.file.chunkWriteBuffer.$anonfun.$anonfun.$anonfun.go;$anon.failed.attachment">attachment</a>: <span title="Null">Null</span><span class="delimiter">)</span>: <span title="Unit">Unit</span> =
                <a href="#scalaz.stream.nio.file.chunkWriteBuffer.$anonfun.$anonfun.$anonfun.cb" title="(v1: scalaz.\/[Throwable,Unit])Unit">cb</a><span class="delimiter">(</span><span title="(a: scalaz.stream.Cause.Terminated)scalaz.-\/[scalaz.stream.Cause.Terminated]">-\/</span><span class="delimiter">(</span><a href="../Cause.scala.html#scalaz.stream.Cause;Terminated" title="(cause: scalaz.stream.Cause)scalaz.stream.Cause.Terminated">Terminated</a><span class="delimiter">(</span><a href="../Cause.scala.html#scalaz.stream.Cause;Error" title="(rsn: Throwable)scalaz.stream.Cause.Error">Error</a><span class="delimiter">(</span><a href="#scalaz.stream.nio.file.chunkWriteBuffer.$anonfun.$anonfun.$anonfun.go;$anon.failed.exc" title="Throwable">exc</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
            <span class="delimiter">}</span><span class="delimiter">)</span>
          <span class="delimiter">}</span>
          <a href="#scalaz.stream.nio.file.chunkWriteBuffer.$anonfun.$anonfun.$anonfun.go" title="()Unit">go</a><span class="delimiter">(</span><span class="delimiter">)</span>
        <span class="delimiter">}</span>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="comment">// Helper that creates a text decoder.</span>
  private def <a title="(codec: scala.io.Codec)java.nio.ByteBuffer =&gt; java.nio.CharBuffer" id="scalaz.stream.nio.file.decodeByteBuff">decodeByteBuff</a><span class="delimiter">(</span><a title="scala.io.Codec" id="scalaz.stream.nio.file.decodeByteBuff.codec">codec</a>: <span title="scala.io.Codec">Codec</span><span class="delimiter">)</span>: ByteBuffer =&gt; CharBuffer = <span class="delimiter">{</span>
    var <a title="java.nio.ByteBuffer" id="scalaz.stream.nio.file.decodeByteBuff.currentBuff">currentBuff</a>: <span title="java.nio.ByteBuffer">ByteBuffer</span> = null
    val <a title="java.nio.charset.CharsetDecoder" id="scalaz.stream.nio.file.decodeByteBuff.dec">dec</a> = <a href="#scalaz.stream.nio.file.decodeByteBuff.codec" title="scala.io.Codec">codec</a>.<span title="=&gt; java.nio.charset.CharsetDecoder">decoder</span>

    def <a title="(buff: java.nio.ByteBuffer)Unit" id="scalaz.stream.nio.file.decodeByteBuff.concat">concat</a><span class="delimiter">(</span><a title="java.nio.ByteBuffer" id="scalaz.stream.nio.file.decodeByteBuff.concat.buff">buff</a>: <span title="java.nio.ByteBuffer">ByteBuffer</span><span class="delimiter">)</span> <span class="delimiter">{</span>
      if <span class="delimiter">(</span><a href="#scalaz.stream.nio.file.decodeByteBuff.currentBuff" title="java.nio.ByteBuffer">currentBuff</a> <span title="(x$1: Any)Boolean">==</span> null<span class="delimiter">)</span> <a href="#scalaz.stream.nio.file.decodeByteBuff.currentBuff" title="java.nio.ByteBuffer">currentBuff</a> = <a href="#scalaz.stream.nio.file.decodeByteBuff.concat.buff" title="java.nio.ByteBuffer">buff</a>
      else <span class="delimiter">{</span>
        val <a title="java.nio.ByteBuffer" id="scalaz.stream.nio.file.decodeByteBuff.concat.newbuff">newbuff</a> = <span title="java.nio.ByteBuffer.type">ByteBuffer</span>.<span title="(x$1: Int)java.nio.ByteBuffer">allocate</span><span class="delimiter">(</span><a href="#scalaz.stream.nio.file.decodeByteBuff.currentBuff" title="java.nio.ByteBuffer">currentBuff</a>.<span title="()Int">remaining</span><span class="delimiter">(</span><span class="delimiter">)</span> <span title="(x: Int)Int">+</span> <a href="#scalaz.stream.nio.file.decodeByteBuff.concat.buff" title="java.nio.ByteBuffer">buff</a>.<span title="()Int">remaining</span><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span>
        <a href="#scalaz.stream.nio.file.decodeByteBuff.concat.newbuff" title="java.nio.ByteBuffer">newbuff</a>.<span title="(x$1: java.nio.ByteBuffer)java.nio.ByteBuffer">put</span><span class="delimiter">(</span><a href="#scalaz.stream.nio.file.decodeByteBuff.currentBuff" title="java.nio.ByteBuffer">currentBuff</a><span class="delimiter">)</span>.<span title="(x$1: java.nio.ByteBuffer)java.nio.ByteBuffer">put</span><span class="delimiter">(</span><a href="#scalaz.stream.nio.file.decodeByteBuff.concat.buff" title="java.nio.ByteBuffer">buff</a><span class="delimiter">)</span>.<span title="()java.nio.Buffer">flip</span><span class="delimiter">(</span><span class="delimiter">)</span>
        <a href="#scalaz.stream.nio.file.decodeByteBuff.currentBuff" title="java.nio.ByteBuffer">currentBuff</a> = <a href="#scalaz.stream.nio.file.decodeByteBuff.concat.newbuff" title="java.nio.ByteBuffer">newbuff</a>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>

    <a title="java.nio.ByteBuffer" id="scalaz.stream.nio.file.decodeByteBuff.$anonfun.buff">buff</a> =&gt; <span class="delimiter">{</span>
      <a href="#scalaz.stream.nio.file.decodeByteBuff.concat" title="(buff: java.nio.ByteBuffer)Unit">concat</a><span class="delimiter">(</span><a href="#scalaz.stream.nio.file.decodeByteBuff.$anonfun.buff" title="java.nio.ByteBuffer">buff</a><span class="delimiter">)</span>
      val <a title="java.nio.CharBuffer" id="scalaz.stream.nio.file.decodeByteBuff.$anonfun.str">str</a> = <a href="#scalaz.stream.nio.file.decodeByteBuff.dec" title="java.nio.charset.CharsetDecoder">dec</a>.<span title="(x$1: java.nio.ByteBuffer)java.nio.CharBuffer">decode</span><span class="delimiter">(</span><a href="#scalaz.stream.nio.file.decodeByteBuff.currentBuff" title="java.nio.ByteBuffer">currentBuff</a><span class="delimiter">)</span>
      if <span class="delimiter">(</span><a href="#scalaz.stream.nio.file.decodeByteBuff.currentBuff" title="java.nio.ByteBuffer">currentBuff</a>.<span title="()Int">remaining</span><span class="delimiter">(</span><span class="delimiter">)</span> <span title="(x: Int)Boolean">==</span> <span title="Int(0)" class="int">0</span><span class="delimiter">)</span> <a href="#scalaz.stream.nio.file.decodeByteBuff.currentBuff" title="java.nio.ByteBuffer">currentBuff</a> = null  <span class="comment">// don't hold on to ref</span>
      <a href="#scalaz.stream.nio.file.decodeByteBuff.$anonfun.str" title="java.nio.CharBuffer">str</a>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>
<span class="delimiter">}</span>
        </pre>
    </body>
</html>
