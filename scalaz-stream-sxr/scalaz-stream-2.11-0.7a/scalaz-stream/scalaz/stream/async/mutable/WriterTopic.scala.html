<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <title>scalaz-stream/scalaz/stream/async/mutable/WriterTopic.scala</title>
        <script type="text/javascript" src="../../../../../jquery-all.js"></script>
        <script type="text/javascript" src="../../../../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../../../../style.css" title="Style"></link>
    </head>
    <body>
        <pre>
package scalaz.stream.async.mutable

import scalaz.stream.<a href="../../Cause.scala.html#scalaz.stream.Cause" title="scalaz.stream.Cause.type">Cause</a>._
import scalaz.concurrent.<span class="delimiter">{</span>Actor, Strategy, Task<span class="delimiter">}</span>
import scalaz.stream.<a href="../../Process.scala.html#scalaz.stream.Process" title="scalaz.stream.Process.type">Process</a>.<span class="delimiter">{</span>Cont, Halt<span class="delimiter">}</span>
import scalaz.stream._
import scalaz.stream.async.immutable
import scalaz.<span class="delimiter">{</span>-\/, \/, \/-<span class="delimiter">}</span>

<span class="comment">/**
 * Like a `Topic`, but allows to specify `Writer1` to eventually `write` the state `W` or produce `O`
 * from arriving messages of `I` to this topic
 *
 */</span>
trait <a title="trait WriterTopic[W, I, O] extends AnyRef" id="scalaz.stream.async.mutable;WriterTopic">WriterTopic</a><span class="delimiter">[</span><a title="" id="scalaz.stream.async.mutable;WriterTopic;W">W</a>, <a title="" id="scalaz.stream.async.mutable;WriterTopic;I">I</a>, <a title="" id="scalaz.stream.async.mutable;WriterTopic;O">O</a><span class="delimiter">]</span> <span title="Unit" class="delimiter">{</span>



  <span class="comment">/**
   * Gets publisher to this writer topic. There may be multiple publishers to this writer topic.
   */</span>
  def <a title="=&gt; scalaz.stream.Sink[scalaz.concurrent.Task,I]" id="scalaz.stream.async.mutable;WriterTopic.publish">publish</a>: <a href="../../Process.scala.html#scalaz.stream;Process" title="scalaz.stream.Sink[scalaz.concurrent.Task,I]">Sink</a><span class="delimiter">[</span>Task, I<span class="delimiter">]</span>

  <span class="comment">/**
   * Gets subscriber from this writer topic. There may be multiple subscribers to this writer topic. Subscriber
   * subscribes and un-subscribes when it is run or terminated.
   *
   * If writer topic has `W` written, it will be first value written by this topic, following any `B` or `W` produced after.
   * @return
   */</span>
  def <a title="=&gt; scalaz.stream.Writer[scalaz.concurrent.Task,W,O]" id="scalaz.stream.async.mutable;WriterTopic.subscribe">subscribe</a>: <a href="../../Process.scala.html#scalaz.stream;Process" title="scalaz.stream.Writer[scalaz.concurrent.Task,W,O]">Writer</a><span class="delimiter">[</span>Task, W, O<span class="delimiter">]</span>

  <span class="comment">/**
   * Subscribes to `O` values from this writer topic only.
   */</span>
  def <a title="=&gt; scalaz.stream.Process[scalaz.concurrent.Task,O]" id="scalaz.stream.async.mutable;WriterTopic.subscribeO">subscribeO</a>: <a href="../../Process.scala.html#scalaz.stream;Process" title="scalaz.stream.Process[scalaz.concurrent.Task,O]">Process</a><span class="delimiter">[</span>Task, O<span class="delimiter">]</span>

  <span class="comment">/** Subscribes to `W` values only from this Writer topic */</span>
  def <a title="=&gt; scalaz.stream.Process[scalaz.concurrent.Task,W]" id="scalaz.stream.async.mutable;WriterTopic.subscribeW">subscribeW</a>: <a href="../../Process.scala.html#scalaz.stream;Process" title="scalaz.stream.Process[scalaz.concurrent.Task,W]">Process</a><span class="delimiter">[</span>Task, W<span class="delimiter">]</span>

  <span class="comment">/**
   * Provides signal of `W` values as they were emitted by Writer1 of this Writer topic
   */</span>
  def <a title="=&gt; scalaz.stream.async.immutable.Signal[W]" id="scalaz.stream.async.mutable;WriterTopic.signal">signal</a>: scalaz.stream.async.immutable.<a href="../immutable/Signal.scala.html#scalaz.stream.async.immutable;Signal" title="scalaz.stream.async.immutable.Signal[W]">Signal</a><span class="delimiter">[</span>W<span class="delimiter">]</span>


  <span class="comment">/**
   * Publishes single `I` to this writer topic.
   */</span>
  def <a title="(i: I)scalaz.concurrent.Task[Unit]" id="scalaz.stream.async.mutable;WriterTopic.publishOne">publishOne</a><span class="delimiter">(</span><a title="I" id="scalaz.stream.async.mutable;WriterTopic.publishOne.i">i</a>: <a href="#scalaz.stream.async.mutable;WriterTopic;I" title="I">I</a><span class="delimiter">)</span>: <span title="scalaz.concurrent.Task[Unit]">Task</span><span class="delimiter">[</span>Unit<span class="delimiter">]</span>

  <span class="comment">/**
   * Will `close` this writer topic. Once `closed` all publishers and subscribers are halted via `End`.
   *
   * @return
   */</span>
  def <a title="=&gt; scalaz.concurrent.Task[Unit]" id="scalaz.stream.async.mutable;WriterTopic.close">close</a>: <span title="scalaz.concurrent.Task[Unit]">Task</span><span class="delimiter">[</span>Unit<span class="delimiter">]</span> = <a href="#scalaz.stream.async.mutable;WriterTopic.failWithCause" title="(c: scalaz.stream.Cause)scalaz.concurrent.Task[Unit]">failWithCause</a><span class="delimiter">(</span><a href="../../Cause.scala.html#scalaz.stream.Cause.End" title="scalaz.stream.Cause.End.type">End</a><span class="delimiter">)</span>

  <span class="comment">/**
   * Kills the writer topic. All subscribers and publishers are immediately terminated with `Kill` cause.
   * @return
   */</span>
  def <a title="=&gt; scalaz.concurrent.Task[Unit]" id="scalaz.stream.async.mutable;WriterTopic.kill">kill</a>: <span title="scalaz.concurrent.Task[Unit]">Task</span><span class="delimiter">[</span>Unit<span class="delimiter">]</span> = <a href="#scalaz.stream.async.mutable;WriterTopic.failWithCause" title="(c: scalaz.stream.Cause)scalaz.concurrent.Task[Unit]">failWithCause</a><span class="delimiter">(</span><a href="../../Cause.scala.html#scalaz.stream.Cause.Kill" title="scalaz.stream.Cause.Kill.type">Kill</a><span class="delimiter">)</span>

  <span class="comment">/**
   * Will `fail` this writer topic. All subscribers and publishers are immediately terminated with `Error` cause.
   *
   * The resulting task is completed _after_ all publishers and subscribers finished
   *
   */</span>
  def <a title="(err: Throwable)scalaz.concurrent.Task[Unit]" id="scalaz.stream.async.mutable;WriterTopic.fail">fail</a><span class="delimiter">(</span><a title="Throwable" id="scalaz.stream.async.mutable;WriterTopic.fail.err">err</a>: <span title="Throwable">Throwable</span><span class="delimiter">)</span>: <span title="scalaz.concurrent.Task[Unit]">Task</span><span class="delimiter">[</span>Unit<span class="delimiter">]</span> = <a href="#scalaz.stream.async.mutable;WriterTopic.failWithCause" title="(c: scalaz.stream.Cause)scalaz.concurrent.Task[Unit]">failWithCause</a><span class="delimiter">(</span><a href="../../Cause.scala.html#scalaz.stream.Cause;Error" title="(rsn: Throwable)scalaz.stream.Cause.Error">Error</a><span class="delimiter">(</span><a href="#scalaz.stream.async.mutable;WriterTopic.fail.err" title="Throwable">err</a><span class="delimiter">)</span><span class="delimiter">)</span>


  private<span class="delimiter">[</span>stream<span class="delimiter">]</span> def <a title="(c: scalaz.stream.Cause)scalaz.concurrent.Task[Unit]" id="scalaz.stream.async.mutable;WriterTopic.failWithCause">failWithCause</a><span class="delimiter">(</span><a title="scalaz.stream.Cause" id="scalaz.stream.async.mutable;WriterTopic.failWithCause.c">c</a>:<a href="../../Cause.scala.html#scalaz.stream;Cause" title="scalaz.stream.Cause">Cause</a><span class="delimiter">)</span>: <span title="scalaz.concurrent.Task[Unit]">Task</span><span class="delimiter">[</span>Unit<span class="delimiter">]</span>

<span class="delimiter">}</span>


private<span class="delimiter">[</span>stream<span class="delimiter">]</span> object <a title="scalaz.stream.async.mutable.WriterTopic.type" id="scalaz.stream.async.mutable.WriterTopic">WriterTopic</a> <a href="#scalaz.stream.async.mutable.WriterTopic" title="scalaz.stream.async.mutable.WriterTopic.type" class="delimiter">{</a>


  def <a title="[W, I, O](writer: scalaz.stream.Writer1[W,I,O])(source: scalaz.stream.Process[scalaz.concurrent.Task,I], haltOnSource: Boolean)(implicit S: scalaz.concurrent.Strategy)scalaz.stream.async.mutable.WriterTopic[W,I,O]" id="scalaz.stream.async.mutable.WriterTopic.apply">apply</a><span class="delimiter">[</span><a title="" id="scalaz.stream.async.mutable.WriterTopic.apply;W">W</a>, <a title="" id="scalaz.stream.async.mutable.WriterTopic.apply;I">I</a>, <a title="" id="scalaz.stream.async.mutable.WriterTopic.apply;O">O</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="scalaz.stream.Writer1[W,I,O]" id="scalaz.stream.async.mutable.WriterTopic.apply.writer">writer</a>: <a href="../../Process.scala.html#scalaz.stream;Process" title="scalaz.stream.Writer1[W,I,O]">Writer1</a><span class="delimiter">[</span>W, I, O<span class="delimiter">]</span><span class="delimiter">)</span><span class="delimiter">(</span><a title="scalaz.stream.Process[scalaz.concurrent.Task,I]" id="scalaz.stream.async.mutable.WriterTopic.apply.source">source</a>: <a href="../../Process.scala.html#scalaz.stream;Process" title="scalaz.stream.Process[scalaz.concurrent.Task,I]">Process</a><span class="delimiter">[</span>Task, I<span class="delimiter">]</span>, <a title="Boolean" id="scalaz.stream.async.mutable.WriterTopic.apply.haltOnSource">haltOnSource</a>: <span title="Boolean">Boolean</span><span class="delimiter">)</span><span class="delimiter">(</span>implicit <a title="scalaz.concurrent.Strategy" id="scalaz.stream.async.mutable.WriterTopic.apply.S">S</a>: <span title="scalaz.concurrent.Strategy">Strategy</span><span class="delimiter">)</span>: <a href="#scalaz.stream.async.mutable;WriterTopic" title="scalaz.stream.async.mutable.WriterTopic[W,I,O]">WriterTopic</a><span class="delimiter">[</span>W, I, O<span class="delimiter">]</span> = <span class="delimiter">{</span>
    import scalaz.stream.<a href="../../Util.scala.html#scalaz.stream.Util" title="scalaz.stream.Util.type">Util</a>._
    sealed trait <a title="trait M extends AnyRef" id="scalaz.stream.async.mutable.WriterTopic.apply;M">M</a>

    case class <a title="class Subscribe extends AnyRef with M with Product with Serializable" id="scalaz.stream.async.mutable.WriterTopic.apply;Subscribe.readResolve">Subscribe</a><span title="Product" class="delimiter">(</span><a title="Subscription" id="scalaz.stream.async.mutable.WriterTopic.apply;Subscribe.sub">sub</a>: <a href="#scalaz.stream.async.mutable.WriterTopic.apply;Subscription" title="Subscription">Subscription</a>, <a title="scalaz.\/[Throwable,Unit] =&gt; Unit" id="scalaz.stream.async.mutable.WriterTopic.apply;Subscribe.cb">cb</a>: <span class="delimiter">(</span>Throwable \/ Unit<span class="delimiter">)</span> =&gt; Unit<span class="delimiter">)</span> extends <a href="#scalaz.stream.async.mutable.WriterTopic.apply;M" title="M">M</a>
    case class <a title="class Ready extends AnyRef with M with Product with Serializable" id="scalaz.stream.async.mutable.WriterTopic.apply;Ready.readResolve">Ready</a><span title="Product" class="delimiter">(</span><a title="Subscription" id="scalaz.stream.async.mutable.WriterTopic.apply;Ready.sub">sub</a>: <a href="#scalaz.stream.async.mutable.WriterTopic.apply;Subscription" title="Subscription">Subscription</a>, <a title="scalaz.\/[Throwable,Seq[scalaz.\/[W,O]]] =&gt; Unit" id="scalaz.stream.async.mutable.WriterTopic.apply;Ready.cb">cb</a>: <span class="delimiter">(</span>Throwable \/ Seq<span class="delimiter">[</span>W \/ O<span class="delimiter">]</span><span class="delimiter">)</span> =&gt; Unit<span class="delimiter">)</span> extends <a href="#scalaz.stream.async.mutable.WriterTopic.apply;M" title="M">M</a>
    case class <a title="class UnSubscribe extends AnyRef with M with Product with Serializable" id="scalaz.stream.async.mutable.WriterTopic.apply;UnSubscribe.readResolve">UnSubscribe</a><span title="Product" class="delimiter">(</span><a title="Subscription" id="scalaz.stream.async.mutable.WriterTopic.apply;UnSubscribe.sub">sub</a>: <a href="#scalaz.stream.async.mutable.WriterTopic.apply;Subscription" title="Subscription">Subscription</a>, <a title="scalaz.\/[Throwable,Unit] =&gt; Unit" id="scalaz.stream.async.mutable.WriterTopic.apply;UnSubscribe.cb">cb</a>: <span class="delimiter">(</span>Throwable \/ Unit<span class="delimiter">)</span> =&gt; Unit<span class="delimiter">)</span> extends <a href="#scalaz.stream.async.mutable.WriterTopic.apply;M" title="M">M</a>
    case class <a title="class Upstream extends AnyRef with M with Product with Serializable" id="scalaz.stream.async.mutable.WriterTopic.apply;Upstream.readResolve">Upstream</a><span title="Product" class="delimiter">(</span><a title="scalaz.\/[scalaz.stream.Cause,(Seq[I], scalaz.stream.Process.Cont[scalaz.concurrent.Task,I])]" id="scalaz.stream.async.mutable.WriterTopic.apply;Upstream.result">result</a>: Cause <span title="scalaz.\/[scalaz.stream.Cause,(Seq[I], scalaz.stream.Process.Cont[scalaz.concurrent.Task,I])]">\/</span> <span class="delimiter">(</span>Seq<span class="delimiter">[</span>I<span class="delimiter">]</span>, Cont<span class="delimiter">[</span>Task,I<span class="delimiter">]</span><span class="delimiter">)</span><span class="delimiter">)</span> extends <a href="#scalaz.stream.async.mutable.WriterTopic.apply;M" title="M">M</a>
    case class <a title="class Publish extends AnyRef with M with Product with Serializable" id="scalaz.stream.async.mutable.WriterTopic.apply;Publish.readResolve">Publish</a><span title="Product" class="delimiter">(</span><a title="Seq[I]" id="scalaz.stream.async.mutable.WriterTopic.apply;Publish.is">is</a>: <span title="Seq[I]">Seq</span><span class="delimiter">[</span>I<span class="delimiter">]</span>, <a title="scalaz.\/[Throwable,Unit] =&gt; Unit" id="scalaz.stream.async.mutable.WriterTopic.apply;Publish.cb">cb</a>: Throwable \/ Unit =&gt; Unit<span class="delimiter">)</span> extends <a href="#scalaz.stream.async.mutable.WriterTopic.apply;M" title="M">M</a>
    case class <a title="class Fail extends AnyRef with M with Product with Serializable" id="scalaz.stream.async.mutable.WriterTopic.apply;Fail.readResolve">Fail</a><span title="Product" class="delimiter">(</span><a title="scalaz.stream.Cause" id="scalaz.stream.async.mutable.WriterTopic.apply;Fail.cause">cause</a>: <a href="../../Cause.scala.html#scalaz.stream;Cause" title="scalaz.stream.Cause">Cause</a>, <a title="scalaz.\/[Throwable,Unit] =&gt; Unit" id="scalaz.stream.async.mutable.WriterTopic.apply;Fail.cb">cb</a>: Throwable \/ Unit =&gt; Unit<span class="delimiter">)</span> extends <a href="#scalaz.stream.async.mutable.WriterTopic.apply;M" title="M">M</a>
    case class <a title="class Get extends AnyRef with M with Product with Serializable" id="scalaz.stream.async.mutable.WriterTopic.apply;Get.readResolve">Get</a><span title="Product" class="delimiter">(</span><a title="scalaz.\/[Throwable,Seq[W]] =&gt; Unit" id="scalaz.stream.async.mutable.WriterTopic.apply;Get.cb">cb</a>:<span class="delimiter">(</span>Throwable \/ Seq<span class="delimiter">[</span>W<span class="delimiter">]</span><span class="delimiter">)</span> =&gt; Unit<span class="delimiter">)</span> extends <a href="#scalaz.stream.async.mutable.WriterTopic.apply;M" title="M">M</a>

    class <a title="class Subscription extends AnyRef" id="scalaz.stream.async.mutable.WriterTopic.apply;Subscription">Subscription</a><a href="#scalaz.stream.async.mutable.WriterTopic.apply;Subscription" title="Subscription" class="delimiter">(</a>var <a title="scalaz.\/[Vector[scalaz.\/[W,O]],scalaz.\/[Throwable,Seq[scalaz.\/[W,O]]] =&gt; Unit]" id="scalaz.stream.async.mutable.WriterTopic.apply;Subscription.state">state</a>: <span class="delimiter">(</span>Vector<span class="delimiter">[</span>W \/ O<span class="delimiter">]</span><span class="delimiter">)</span> <span title="scalaz.\/[Vector[scalaz.\/[W,O]],scalaz.\/[Throwable,Seq[scalaz.\/[W,O]]] =&gt; Unit]">\/</span> <span class="delimiter">(</span><span class="delimiter">(</span>Throwable \/ Seq<span class="delimiter">[</span>W \/ O<span class="delimiter">]</span><span class="delimiter">)</span> =&gt; Unit<span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">{</span>

      def <a title="(cb: scalaz.\/[Throwable,Seq[scalaz.\/[W,O]]] =&gt; Unit)Unit" id="scalaz.stream.async.mutable.WriterTopic.apply;Subscription.getOrAwait">getOrAwait</a><span class="delimiter">(</span><a title="scalaz.\/[Throwable,Seq[scalaz.\/[W,O]]] =&gt; Unit" id="scalaz.stream.async.mutable.WriterTopic.apply;Subscription.getOrAwait.cb">cb</a>: <span class="delimiter">(</span><span class="delimiter">(</span>Throwable \/ Seq<span class="delimiter">[</span>W \/ O<span class="delimiter">]</span><span class="delimiter">)</span> =&gt; Unit<span class="delimiter">)</span><span class="delimiter">)</span>: <span title="Unit">Unit</span> = <a href="#scalaz.stream.async.mutable.WriterTopic.apply;Subscription.state" title="=&gt; scalaz.\/[Vector[scalaz.\/[W,O]],scalaz.\/[Throwable,Seq[scalaz.\/[W,O]]] =&gt; Unit]">state</a> match <span class="delimiter">{</span>
        case -\/<span class="delimiter">(</span><span title="Vector[scalaz.\/[W,O]]">v</span><span class="delimiter">)</span> if <span title="Vector[scalaz.\/[W,O]]">v</span>.<span title="=&gt; Boolean">isEmpty</span> =&gt; <a href="#scalaz.stream.async.mutable.WriterTopic.apply;Subscription.state" title="(x$1: scalaz.\/[Vector[scalaz.\/[W,O]],scalaz.\/[Throwable,Seq[scalaz.\/[W,O]]] =&gt; Unit])Unit">state</a> = <span title="(b: scalaz.\/[Throwable,Seq[scalaz.\/[W,O]]] =&gt; Unit)scalaz.\/-[scalaz.\/[Throwable,Seq[scalaz.\/[W,O]]] =&gt; Unit]">\/-</span><span class="delimiter">(</span><a href="#scalaz.stream.async.mutable.WriterTopic.apply;Subscription.getOrAwait.cb" title="scalaz.\/[Throwable,Seq[scalaz.\/[W,O]]] =&gt; Unit">cb</a><span class="delimiter">)</span>
        case -\/<span class="delimiter">(</span><span title="Vector[scalaz.\/[W,O]]">v</span><span class="delimiter">)</span> =&gt; <a href="#scalaz.stream.async.mutable.WriterTopic.apply;Subscription.state" title="(x$1: scalaz.\/[Vector[scalaz.\/[W,O]],scalaz.\/[Throwable,Seq[scalaz.\/[W,O]]] =&gt; Unit])Unit">state</a> = <span title="(a: scala.collection.immutable.Vector[Nothing])scalaz.-\/[scala.collection.immutable.Vector[Nothing]]">-\/</span><span class="delimiter">(</span><span title="=&gt; collection.immutable.Vector.type">Vector</span>.<span title="scala.collection.immutable.Vector[Nothing]">empty</span><span class="delimiter">)</span>; <a href="#scalaz.stream.async.mutable.WriterTopic.apply.S" title="(a: =&gt; Unit)() =&gt; Unit">S</a><span title="Unit" class="delimiter">(</span><a href="#scalaz.stream.async.mutable.WriterTopic.apply;Subscription.getOrAwait.cb" title="(v1: scalaz.\/[Throwable,Seq[scalaz.\/[W,O]]])Unit">cb</a><span class="delimiter">(</span><span title="(b: Vector[scalaz.\/[W,O]])scalaz.\/-[Vector[scalaz.\/[W,O]]]">\/-</span><span class="delimiter">(</span><span title="Vector[scalaz.\/[W,O]]">v</span><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
        case \/-<span class="delimiter">(</span>_<span class="delimiter">)</span> =&gt; <a href="#scalaz.stream.async.mutable.WriterTopic.apply;Subscription.state" title="(x$1: scalaz.\/[Vector[scalaz.\/[W,O]],scalaz.\/[Throwable,Seq[scalaz.\/[W,O]]] =&gt; Unit])Unit">state</a> = <span title="(b: scalaz.\/[Throwable,Seq[scalaz.\/[W,O]]] =&gt; Unit)scalaz.\/-[scalaz.\/[Throwable,Seq[scalaz.\/[W,O]]] =&gt; Unit]">\/-</span><span class="delimiter">(</span><a href="#scalaz.stream.async.mutable.WriterTopic.apply;Subscription.getOrAwait.cb" title="scalaz.\/[Throwable,Seq[scalaz.\/[W,O]]] =&gt; Unit">cb</a><span class="delimiter">)</span> <span class="comment">//impossible</span>
      <span class="delimiter">}</span>


      def <a title="(wo: Seq[scalaz.\/[W,O]])Unit" id="scalaz.stream.async.mutable.WriterTopic.apply;Subscription.publish">publish</a><span class="delimiter">(</span><a title="Seq[scalaz.\/[W,O]]" id="scalaz.stream.async.mutable.WriterTopic.apply;Subscription.publish.wo">wo</a>: <span title="Seq[scalaz.\/[W,O]]">Seq</span><span class="delimiter">[</span>W \/ O<span class="delimiter">]</span><span class="delimiter">)</span>: <span title="Unit">Unit</span> = <span class="delimiter">{</span>
        val <a title="scalaz.\/[Vector[scalaz.\/[W,O]],scalaz.\/[Throwable,Seq[scalaz.\/[W,O]]] =&gt; Unit]" id="scalaz.stream.async.mutable.WriterTopic.apply;Subscription.publish.ns">ns</a> = <a href="#scalaz.stream.async.mutable.WriterTopic.apply;Subscription.state" title="=&gt; scalaz.\/[Vector[scalaz.\/[W,O]],scalaz.\/[Throwable,Seq[scalaz.\/[W,O]]] =&gt; Unit]">state</a>
        <a href="#scalaz.stream.async.mutable.WriterTopic.apply;Subscription.state" title="=&gt; scalaz.\/[Vector[scalaz.\/[W,O]],scalaz.\/[Throwable,Seq[scalaz.\/[W,O]]] =&gt; Unit]">state</a> match <span class="delimiter">{</span>
          case -\/<span class="delimiter">(</span><a title="Vector[scalaz.\/[W,O]]" id="scalaz.stream.async.mutable.WriterTopic.apply;Subscription.publish.v">v</a><span class="delimiter">)</span>  =&gt; <a href="#scalaz.stream.async.mutable.WriterTopic.apply;Subscription.state" title="(x$1: scalaz.\/[Vector[scalaz.\/[W,O]],scalaz.\/[Throwable,Seq[scalaz.\/[W,O]]] =&gt; Unit])Unit">state</a> = <span title="(a: Vector[scalaz.\/[W,O]])scalaz.-\/[Vector[scalaz.\/[W,O]]]">-\/</span><span class="delimiter">(</span><a href="../../Util.scala.html#scalaz.stream.Util.AppendSyntax(629eae9601)" title="(self: Vector[scalaz.\/[W,O]])scalaz.stream.Util.AppendSyntax[scalaz.\/[W,O]]">v</a> <a href="../../Util.scala.html#scalaz.stream.Util;AppendSyntax.fast_++" title="(other: Seq[scalaz.\/[W,O]])Vector[scalaz.\/[W,O]]">fast_++</a> <a href="#scalaz.stream.async.mutable.WriterTopic.apply;Subscription.publish.wo" title="Seq[scalaz.\/[W,O]]">wo</a><span class="delimiter">)</span>
          case \/-<span class="delimiter">(</span><a title="scalaz.\/[Throwable,Seq[scalaz.\/[W,O]]] =&gt; Unit" id="scalaz.stream.async.mutable.WriterTopic.apply;Subscription.publish.cb">cb</a><span class="delimiter">)</span> =&gt; <a href="#scalaz.stream.async.mutable.WriterTopic.apply;Subscription.state" title="(x$1: scalaz.\/[Vector[scalaz.\/[W,O]],scalaz.\/[Throwable,Seq[scalaz.\/[W,O]]] =&gt; Unit])Unit">state</a> = <span title="(a: scala.collection.immutable.Vector[Nothing])scalaz.-\/[scala.collection.immutable.Vector[Nothing]]">-\/</span><span class="delimiter">(</span><span title="=&gt; collection.immutable.Vector.type">Vector</span>.<span title="scala.collection.immutable.Vector[Nothing]">empty</span><span class="delimiter">)</span>; <a href="#scalaz.stream.async.mutable.WriterTopic.apply.S" title="(a: =&gt; Unit)() =&gt; Unit">S</a><span title="Unit" class="delimiter">(</span><a href="#scalaz.stream.async.mutable.WriterTopic.apply;Subscription.publish.cb" title="(v1: scalaz.\/[Throwable,Seq[scalaz.\/[W,O]]])Unit">cb</a><span class="delimiter">(</span><span title="(b: Seq[scalaz.\/[W,O]])scalaz.\/-[Seq[scalaz.\/[W,O]]]">\/-</span><span class="delimiter">(</span><a href="#scalaz.stream.async.mutable.WriterTopic.apply;Subscription.publish.wo" title="Seq[scalaz.\/[W,O]]">wo</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
        <span class="delimiter">}</span>
      <span class="delimiter">}</span>

      def <a title="(cause: scalaz.stream.Cause)Unit" id="scalaz.stream.async.mutable.WriterTopic.apply;Subscription.close">close</a><span class="delimiter">(</span><a title="scalaz.stream.Cause" id="scalaz.stream.async.mutable.WriterTopic.apply;Subscription.close.cause">cause</a>: <a href="../../Cause.scala.html#scalaz.stream;Cause" title="scalaz.stream.Cause">Cause</a><span class="delimiter">)</span>: <span title="Unit">Unit</span> = <a href="#scalaz.stream.async.mutable.WriterTopic.apply;Subscription.state" title="=&gt; scalaz.\/[Vector[scalaz.\/[W,O]],scalaz.\/[Throwable,Seq[scalaz.\/[W,O]]] =&gt; Unit]">state</a> match <span class="delimiter">{</span>
        case \/-<span class="delimiter">(</span><a title="scalaz.\/[Throwable,Seq[scalaz.\/[W,O]]] =&gt; Unit" id="scalaz.stream.async.mutable.WriterTopic.apply;Subscription.close.cb">cb</a><span class="delimiter">)</span> =&gt;
          <a href="#scalaz.stream.async.mutable.WriterTopic.apply;Subscription.state" title="(x$1: scalaz.\/[Vector[scalaz.\/[W,O]],scalaz.\/[Throwable,Seq[scalaz.\/[W,O]]] =&gt; Unit])Unit">state</a> = <span title="(a: scala.collection.immutable.Vector[Nothing])scalaz.-\/[scala.collection.immutable.Vector[Nothing]]">-\/</span><span class="delimiter">(</span><span title="=&gt; collection.immutable.Vector.type">Vector</span>.<span title="scala.collection.immutable.Vector[Nothing]">empty</span><span class="delimiter">)</span>
          <a href="#scalaz.stream.async.mutable.WriterTopic.apply.S" title="(a: =&gt; Unit)() =&gt; Unit">S</a><span title="Unit" class="delimiter">(</span><a href="#scalaz.stream.async.mutable.WriterTopic.apply;Subscription.close.cb" title="(v1: scalaz.\/[Throwable,Seq[scalaz.\/[W,O]]])Unit">cb</a><span class="delimiter">(</span><span title="(a: scalaz.stream.Cause.Terminated)scalaz.-\/[scalaz.stream.Cause.Terminated]">-\/</span><span class="delimiter">(</span><a href="../../Cause.scala.html#scalaz.stream.Cause;Terminated" title="(cause: scalaz.stream.Cause)scalaz.stream.Cause.Terminated">Terminated</a><span class="delimiter">(</span><a href="#scalaz.stream.async.mutable.WriterTopic.apply;Subscription.close.cause" title="scalaz.stream.Cause">cause</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>

        case _ =&gt; <span class="comment">// no-op</span>
      <span class="delimiter">}</span>

      def <a title="(cause: scalaz.stream.Cause, cb: scalaz.\/[Throwable,Seq[scalaz.\/[W,O]]] =&gt; Unit)Unit" id="scalaz.stream.async.mutable.WriterTopic.apply;Subscription.flushOrClose">flushOrClose</a><span class="delimiter">(</span><a title="scalaz.stream.Cause" id="scalaz.stream.async.mutable.WriterTopic.apply;Subscription.flushOrClose.cause">cause</a>: <a href="../../Cause.scala.html#scalaz.stream;Cause" title="scalaz.stream.Cause">Cause</a>, <span title="scalaz.\/[Throwable,Seq[scalaz.\/[W,O]]] =&gt; Unit">cb</span>: <span class="delimiter">(</span>Throwable \/ Seq<span class="delimiter">[</span>W \/ O<span class="delimiter">]</span><span class="delimiter">)</span> =&gt; Unit<span class="delimiter">)</span>: <span title="Unit">Unit</span> = <a href="#scalaz.stream.async.mutable.WriterTopic.apply;Subscription.state" title="=&gt; scalaz.\/[Vector[scalaz.\/[W,O]],scalaz.\/[Throwable,Seq[scalaz.\/[W,O]]] =&gt; Unit]">state</a> match <span class="delimiter">{</span>
        case -\/<span class="delimiter">(</span><span title="Vector[scalaz.\/[W,O]]">v</span><span class="delimiter">)</span> if <span title="Vector[scalaz.\/[W,O]]">v</span>.<span title="=&gt; Boolean">isEmpty</span> =&gt; <a href="#scalaz.stream.async.mutable.WriterTopic.apply;Subscription.state" title="(x$1: scalaz.\/[Vector[scalaz.\/[W,O]],scalaz.\/[Throwable,Seq[scalaz.\/[W,O]]] =&gt; Unit])Unit">state</a> = <span title="(b: scalaz.\/[Throwable,Seq[scalaz.\/[W,O]]] =&gt; Unit)scalaz.\/-[scalaz.\/[Throwable,Seq[scalaz.\/[W,O]]] =&gt; Unit]">\/-</span><span class="delimiter">(</span><span title="scalaz.\/[Throwable,Seq[scalaz.\/[W,O]]] =&gt; Unit">cb</span><span class="delimiter">)</span>; <a href="#scalaz.stream.async.mutable.WriterTopic.apply;Subscription.close" title="(cause: scalaz.stream.Cause)Unit">close</a><span class="delimiter">(</span><a href="#scalaz.stream.async.mutable.WriterTopic.apply;Subscription.flushOrClose.cause" title="scalaz.stream.Cause">cause</a><span class="delimiter">)</span>
        case -\/<span class="delimiter">(</span><span title="Vector[scalaz.\/[W,O]]">v</span><span class="delimiter">)</span>              =&gt; <a href="#scalaz.stream.async.mutable.WriterTopic.apply;Subscription.getOrAwait" title="(cb: scalaz.\/[Throwable,Seq[scalaz.\/[W,O]]] =&gt; Unit)Unit">getOrAwait</a><span class="delimiter">(</span><span title="scalaz.\/[Throwable,Seq[scalaz.\/[W,O]]] =&gt; Unit">cb</span><span class="delimiter">)</span>
        case \/-<span class="delimiter">(</span><span title="scalaz.\/[Throwable,Seq[scalaz.\/[W,O]]] =&gt; Unit">cb</span><span class="delimiter">)</span>             =&gt; <span class="comment">//impossible</span>
      <span class="delimiter">}</span>

    <span class="delimiter">}</span>

    <span class="comment">///////////////////////</span>

    <span class="comment">// subscriptions to W \/ O</span>
    var <a title="Vector[Subscription]" id="scalaz.stream.async.mutable.WriterTopic.apply.subscriptions">subscriptions</a>: <span title="Vector[Subscription]">Vector</span><span class="delimiter">[</span>Subscription<span class="delimiter">]</span> = <span title="=&gt; collection.immutable.Vector.type">Vector</span>.<span title="scala.collection.immutable.Vector[Nothing]">empty</span>

    <span class="comment">// call backs on single W that can't be completed as there is no `W` yet</span>
    var <a title="Vector[scalaz.\/[Throwable,Seq[W]] =&gt; Unit]" id="scalaz.stream.async.mutable.WriterTopic.apply.awaitingW">awaitingW</a>: <span title="Vector[scalaz.\/[Throwable,Seq[W]] =&gt; Unit]">Vector</span><span class="delimiter">[</span><span class="delimiter">(</span>Throwable \/ Seq<span class="delimiter">[</span>W<span class="delimiter">]</span><span class="delimiter">)</span> =&gt; Unit<span class="delimiter">]</span> = <span title="=&gt; collection.immutable.Vector.type">Vector</span>.<span title="scala.collection.immutable.Vector[Nothing]">empty</span>

    <span class="comment">//last memorized `W`</span>
    var <a title="Option[W]" id="scalaz.stream.async.mutable.WriterTopic.apply.lastW">lastW</a>: <span title="Option[W]">Option</span><span class="delimiter">[</span>W<span class="delimiter">]</span> = <span title="None.type">None</span>

    <span class="comment">//contains an reason of termination</span>
    var <a title="Option[scalaz.stream.Cause]" id="scalaz.stream.async.mutable.WriterTopic.apply.closed">closed</a>: <span title="Option[scalaz.stream.Cause]">Option</span><span class="delimiter">[</span>Cause<span class="delimiter">]</span> = <span title="None.type">None</span>

    <span class="comment">// state of upstream. Upstream is running and left is interrupt, or upstream is stopped.</span>
    var <a title="Option[scalaz.\/[scalaz.stream.Cause,scalaz.stream.Cause.EarlyCause =&gt; Unit]]" id="scalaz.stream.async.mutable.WriterTopic.apply.upState">upState</a>: <span title="Option[scalaz.\/[scalaz.stream.Cause,scalaz.stream.Cause.EarlyCause =&gt; Unit]]">Option</span><span class="delimiter">[</span>Cause \/ <span class="delimiter">(</span>EarlyCause =&gt; Unit<span class="delimiter">)</span><span class="delimiter">]</span> = <span title="None.type">None</span>

    var <a title="scalaz.stream.Writer1[W,I,O]" id="scalaz.stream.async.mutable.WriterTopic.apply.w">w</a>: <a href="../../Process.scala.html#scalaz.stream;Process" title="scalaz.stream.Writer1[W,I,O]">Writer1</a><span class="delimiter">[</span>W, I, O<span class="delimiter">]</span> = <a href="#scalaz.stream.async.mutable.WriterTopic.apply.writer" title="scalaz.stream.Writer1[W,I,O]">writer</a>

    def <a title="(cause: scalaz.stream.Cause)Unit" id="scalaz.stream.async.mutable.WriterTopic.apply.fail">fail</a><span class="delimiter">(</span><a title="scalaz.stream.Cause" id="scalaz.stream.async.mutable.WriterTopic.apply.fail.cause">cause</a>: <a href="../../Cause.scala.html#scalaz.stream;Cause" title="scalaz.stream.Cause">Cause</a><span class="delimiter">)</span>: <span title="Unit">Unit</span> = <span class="delimiter">{</span>
      <a href="#scalaz.stream.async.mutable.WriterTopic.apply.closed" title="Option[scalaz.stream.Cause]">closed</a> = <span title="(x: scalaz.stream.Cause)Some[scalaz.stream.Cause]">Some</span><span class="delimiter">(</span><a href="#scalaz.stream.async.mutable.WriterTopic.apply.fail.cause" title="scalaz.stream.Cause">cause</a><span class="delimiter">)</span>
      <a href="#scalaz.stream.async.mutable.WriterTopic.apply.upState" title="Option[scalaz.\/[scalaz.stream.Cause,scalaz.stream.Cause.EarlyCause =&gt; Unit]]">upState</a>.<span title="(pf: PartialFunction[scalaz.\/[scalaz.stream.Cause,scalaz.stream.Cause.EarlyCause =&gt; Unit],Unit])Option[Unit]">collect</span> <a title="&lt;$anon: scalaz.\/[scalaz.stream.Cause,scalaz.stream.Cause.EarlyCause =&gt; Unit] =&gt; Unit&gt; extends scala.runtime.AbstractPartialFunction[scalaz.\/[scalaz.stream.Cause,scalaz.stream.Cause.EarlyCause =&gt; Unit],Unit] with Serializable" id="scalaz.stream.async.mutable.WriterTopic.apply.fail;$anonfun.isDefinedAt.defaultCase$" class="delimiter">{</a> case \/-<span class="delimiter">(</span><a title="scalaz.stream.Cause.EarlyCause =&gt; Unit" id="scalaz.stream.async.mutable.WriterTopic.apply.fail;$anonfun.isDefinedAt.interrupt">interrupt</a><span class="delimiter">)</span> =&gt; <a href="#scalaz.stream.async.mutable.WriterTopic.apply.fail;$anonfun.isDefinedAt.interrupt" title="(v1: scalaz.stream.Cause.EarlyCause)Unit">interrupt</a><span title="Boolean(true)" class="delimiter">(</span><a href="../../Cause.scala.html#scalaz.stream.Cause.Kill" title="scalaz.stream.Cause.Kill.type">Kill</a><span class="delimiter">)</span><span class="delimiter">}</span>
      val <a href="#scalaz.stream.async.mutable.WriterTopic.apply.fail.wos" title="(Seq[scalaz.\/[W,O]], scalaz.stream.Process[Nothing,scalaz.\/[W,O]])" class="delimiter">(</a><a href="#scalaz.stream.async.mutable.WriterTopic.apply.fail.x$1" title="Seq[scalaz.\/[W,O]]" id="scalaz.stream.async.mutable.WriterTopic.apply.fail.wos">wos</a>,<a href="#scalaz.stream.async.mutable.WriterTopic.apply.fail.x$1" title="scalaz.stream.Process[Nothing,scalaz.\/[W,O]]" id="scalaz.stream.async.mutable.WriterTopic.apply.fail.next">next</a><span class="delimiter">)</span> = <a href="#scalaz.stream.async.mutable.WriterTopic.apply.w" title="scalaz.stream.Writer1[W,I,O]">w</a>.<a href="../../Process.scala.html#scalaz.stream;Process.disconnect" title="(cause: scalaz.stream.Cause.EarlyCause)scalaz.stream.Process0[scalaz.\/[W,O]]">disconnect</a><span class="delimiter">(</span><a href="#scalaz.stream.async.mutable.WriterTopic.apply.fail.cause" title="scalaz.stream.Cause">cause</a>.<a href="../../Cause.scala.html#scalaz.stream;Cause.kill" title="=&gt; scalaz.stream.Cause.EarlyCause">kill</a><span class="delimiter">)</span>.<a href="../../Process.scala.html#scalaz.stream;Process.unemit" title="=&gt; (Seq[scalaz.\/[W,O]], scalaz.stream.Process[Nothing,scalaz.\/[W,O]])">unemit</a>
      <a href="#scalaz.stream.async.mutable.WriterTopic.apply.w" title="scalaz.stream.Writer1[W,I,O]">w</a> = <a href="#scalaz.stream.async.mutable.WriterTopic.apply.fail.next" title="scalaz.stream.Process[Nothing,scalaz.\/[W,O]]">next</a>
      if <span class="delimiter">(</span><a href="#scalaz.stream.async.mutable.WriterTopic.apply.fail.wos" title="Seq[scalaz.\/[W,O]]">wos</a>.<span title="=&gt; Boolean">nonEmpty</span><span class="delimiter">)</span> <a href="#scalaz.stream.async.mutable.WriterTopic.apply.subscriptions" title="Vector[Subscription]">subscriptions</a>.<span title="(f: Subscription =&gt; Unit)Unit">foreach</span><span class="delimiter">(</span><a href="#scalaz.stream.async.mutable.WriterTopic.apply.fail.$anonfun.x$2" title="Subscription">_</a>.<a href="#scalaz.stream.async.mutable.WriterTopic.apply;Subscription.publish" title="(wo: Seq[scalaz.\/[W,O]])Unit">publish</a><span class="delimiter">(</span><a href="#scalaz.stream.async.mutable.WriterTopic.apply.fail.wos" title="Seq[scalaz.\/[W,O]]">wos</a><span class="delimiter">)</span><span class="delimiter">)</span>
      <a href="#scalaz.stream.async.mutable.WriterTopic.apply.subscriptions" title="Vector[Subscription]">subscriptions</a>.<span title="(f: Subscription =&gt; Unit)Unit">foreach</span><span class="delimiter">(</span><a href="#scalaz.stream.async.mutable.WriterTopic.apply.fail.$anonfun.x$3" title="Subscription">_</a>.<a href="#scalaz.stream.async.mutable.WriterTopic.apply;Subscription.close" title="(cause: scalaz.stream.Cause)Unit">close</a><span class="delimiter">(</span><a href="#scalaz.stream.async.mutable.WriterTopic.apply.fail.cause" title="scalaz.stream.Cause">cause</a><span class="delimiter">)</span><span class="delimiter">)</span>
      <a href="#scalaz.stream.async.mutable.WriterTopic.apply.subscriptions" title="Vector[Subscription]">subscriptions</a> = <span title="=&gt; collection.immutable.Vector.type">Vector</span>.<span title="scala.collection.immutable.Vector[Nothing]">empty</span>
      <a href="#scalaz.stream.async.mutable.WriterTopic.apply.awaitingW" title="Vector[scalaz.\/[Throwable,Seq[W]] =&gt; Unit]">awaitingW</a>.<span title="(f: (scalaz.\/[Throwable,Seq[W]] =&gt; Unit) =&gt; (() =&gt; Unit))Unit">foreach</span><span class="delimiter">(</span><a title="scalaz.\/[Throwable,Seq[W]] =&gt; Unit" id="scalaz.stream.async.mutable.WriterTopic.apply.fail.$anonfun.cb">cb</a>=&gt;<a href="#scalaz.stream.async.mutable.WriterTopic.apply.S" title="(a: =&gt; Unit)() =&gt; Unit">S</a><span class="delimiter">(</span><a href="#scalaz.stream.async.mutable.WriterTopic.apply.fail.$anonfun.cb" title="(v1: scalaz.\/[Throwable,Seq[W]])Unit">cb</a><span class="delimiter">(</span><span title="(a: Throwable)scalaz.-\/[Throwable]">-\/</span><span class="delimiter">(</span><a href="#scalaz.stream.async.mutable.WriterTopic.apply.fail.cause" title="scalaz.stream.Cause">cause</a>.<a href="../../Cause.scala.html#scalaz.stream;Cause.asThrowable" title="=&gt; Throwable">asThrowable</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
      <a href="#scalaz.stream.async.mutable.WriterTopic.apply.awaitingW" title="Vector[scalaz.\/[Throwable,Seq[W]] =&gt; Unit]">awaitingW</a> = <span title="=&gt; collection.immutable.Vector.type">Vector</span>.<span title="scala.collection.immutable.Vector[Nothing]">empty</span>
    <span class="delimiter">}</span>

    def <a title="(is: Seq[I])Unit" id="scalaz.stream.async.mutable.WriterTopic.apply.publish">publish</a><span class="delimiter">(</span><a title="Seq[I]" id="scalaz.stream.async.mutable.WriterTopic.apply.publish.is">is</a>: <span title="Seq[I]">Seq</span><span class="delimiter">[</span>I<span class="delimiter">]</span><span class="delimiter">)</span> = <span class="delimiter">{</span>
      <a href="../../process1.scala.html#scalaz.stream.process1" title="scalaz.stream.process1.type">process1</a>.<a href="../../process1.scala.html#scalaz.stream.process1.feed" title="(i: Seq[I])(p: scalaz.stream.Process1[I,scalaz.\/[W,O]])scalaz.stream.Process1[I,scalaz.\/[W,O]]">feed</a><span class="delimiter">(</span><a href="#scalaz.stream.async.mutable.WriterTopic.apply.publish.is" title="Seq[I]">is</a><span class="delimiter">)</span><span class="delimiter">(</span><a href="#scalaz.stream.async.mutable.WriterTopic.apply.w" title="scalaz.stream.Writer1[W,I,O]">w</a><span class="delimiter">)</span>.<a href="../../Process.scala.html#scalaz.stream;Process.unemit" title="=&gt; (Seq[scalaz.\/[W,O]], scalaz.stream.Process[scalaz.stream.Process.Env[I,Any]#Is,scalaz.\/[W,O]])">unemit</a> match <span class="delimiter">{</span>
        case <span class="delimiter">(</span><a title="Seq[scalaz.\/[W,O]]" id="scalaz.stream.async.mutable.WriterTopic.apply.publish.wos">wos</a>, <a title="scalaz.stream.Process[scalaz.stream.Process.Env[I,Any]#Is,scalaz.\/[W,O]]" id="scalaz.stream.async.mutable.WriterTopic.apply.publish.next">next</a><span class="delimiter">)</span> =&gt;
          <a href="#scalaz.stream.async.mutable.WriterTopic.apply.w" title="scalaz.stream.Writer1[W,I,O]">w</a> = <a href="#scalaz.stream.async.mutable.WriterTopic.apply.publish.next" title="scalaz.stream.Process[scalaz.stream.Process.Env[I,Any]#Is,scalaz.\/[W,O]]">next</a>
          <a href="#scalaz.stream.async.mutable.WriterTopic.apply.lastW" title="Option[W]">lastW</a> = <a href="#scalaz.stream.async.mutable.WriterTopic.apply.publish.wos" title="Seq[scalaz.\/[W,O]]">wos</a>.<span title="(pf: PartialFunction[scalaz.\/[W,O],W])(implicit bf: scala.collection.generic.CanBuildFrom[Seq[scalaz.\/[W,O]],W,Seq[W]])Seq[W]">collect</span><span title="scala.collection.generic.CanBuildFrom[scala.collection.Seq.Coll,W,Seq[W]]" class="delimiter">(</span><a title="&lt;$anon: scalaz.\/[W,O] =&gt; W&gt; extends scala.runtime.AbstractPartialFunction[scalaz.\/[W,O],W] with Serializable" id="scalaz.stream.async.mutable.WriterTopic.apply.publish;$anonfun.isDefinedAt.defaultCase$" class="delimiter">{</a> case -\/<span class="delimiter">(</span><a title="W" id="scalaz.stream.async.mutable.WriterTopic.apply.publish;$anonfun.isDefinedAt.w">w</a><span class="delimiter">)</span> =&gt; <a href="#scalaz.stream.async.mutable.WriterTopic.apply.publish;$anonfun.isDefinedAt.w" title="W">w</a> <span class="delimiter">}</span><span class="delimiter">)</span>.<span title="=&gt; Option[W]">lastOption</span> <span title="(alternative: =&gt; Option[W])Option[W]">orElse</span> <a href="#scalaz.stream.async.mutable.WriterTopic.apply.lastW" title="Option[W]">lastW</a>
          if <span class="delimiter">(</span><a href="#scalaz.stream.async.mutable.WriterTopic.apply.awaitingW" title="Vector[scalaz.\/[Throwable,Seq[W]] =&gt; Unit]">awaitingW</a>.<span title="=&gt; Boolean">nonEmpty</span>  <span class="delimiter">)</span>  <a href="#scalaz.stream.async.mutable.WriterTopic.apply.lastW" title="Option[W]">lastW</a>.<span title="(f: W =&gt; Unit)Unit">foreach</span> <span class="delimiter">{</span> <a title="W" id="scalaz.stream.async.mutable.WriterTopic.apply.publish.$anonfun.w">w</a> =&gt;
            <a href="#scalaz.stream.async.mutable.WriterTopic.apply.awaitingW" title="Vector[scalaz.\/[Throwable,Seq[W]] =&gt; Unit]">awaitingW</a>.<span title="(f: (scalaz.\/[Throwable,Seq[W]] =&gt; Unit) =&gt; (() =&gt; Unit))Unit">foreach</span><span class="delimiter">(</span><a title="scalaz.\/[Throwable,Seq[W]] =&gt; Unit" id="scalaz.stream.async.mutable.WriterTopic.apply.publish.$anonfun.$anonfun.cb">cb</a> =&gt; <a href="#scalaz.stream.async.mutable.WriterTopic.apply.S" title="(a: =&gt; Unit)() =&gt; Unit">S</a><span class="delimiter">(</span><a href="#scalaz.stream.async.mutable.WriterTopic.apply.publish.$anonfun.$anonfun.cb" title="(v1: scalaz.\/[Throwable,Seq[W]])Unit">cb</a><span class="delimiter">(</span><span title="(b: Seq[W])scalaz.\/-[Seq[W]]">\/-</span><span class="delimiter">(</span><span title="(elems: W*)Seq[W]">Seq</span><span class="delimiter">(</span><a href="#scalaz.stream.async.mutable.WriterTopic.apply.publish.$anonfun.w" title="W">w</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
            <a href="#scalaz.stream.async.mutable.WriterTopic.apply.awaitingW" title="Vector[scalaz.\/[Throwable,Seq[W]] =&gt; Unit]">awaitingW</a> = <span title="=&gt; collection.immutable.Vector.type">Vector</span>.<span title="scala.collection.immutable.Vector[Nothing]">empty</span>
          <span class="delimiter">}</span>
          if <span class="delimiter">(</span><a href="#scalaz.stream.async.mutable.WriterTopic.apply.publish.wos" title="Seq[scalaz.\/[W,O]]">wos</a>.<span title="=&gt; Boolean">nonEmpty</span><span class="delimiter">)</span> <a href="#scalaz.stream.async.mutable.WriterTopic.apply.subscriptions" title="Vector[Subscription]">subscriptions</a>.<span title="(f: Subscription =&gt; Unit)Unit">foreach</span><span class="delimiter">(</span><a href="#scalaz.stream.async.mutable.WriterTopic.apply.publish.$anonfun.x$4" title="Subscription">_</a>.<a href="#scalaz.stream.async.mutable.WriterTopic.apply;Subscription.publish" title="(wo: Seq[scalaz.\/[W,O]])Unit">publish</a><span class="delimiter">(</span><a href="#scalaz.stream.async.mutable.WriterTopic.apply.publish.wos" title="Seq[scalaz.\/[W,O]]">wos</a><span class="delimiter">)</span><span class="delimiter">)</span>
          <a href="#scalaz.stream.async.mutable.WriterTopic.apply.publish.next" title="scalaz.stream.Process[scalaz.stream.Process.Env[I,Any]#Is,scalaz.\/[W,O]]">next</a> match <span class="delimiter">{</span>
            case <a title="scalaz.stream.Process.Halt" id="scalaz.stream.async.mutable.WriterTopic.apply.publish.hlt">hlt</a>@Halt<span class="delimiter">(</span><a title="scalaz.stream.Cause" id="scalaz.stream.async.mutable.WriterTopic.apply.publish.rsn">rsn</a><span class="delimiter">)</span> =&gt;  <a href="#scalaz.stream.async.mutable.WriterTopic.apply.fail" title="(cause: scalaz.stream.Cause)Unit">fail</a><span class="delimiter">(</span><a href="#scalaz.stream.async.mutable.WriterTopic.apply.publish.rsn" title="scalaz.stream.Cause">rsn</a><span class="delimiter">)</span>
            case _             =&gt;  <span class="comment">//no-op</span>
          <span class="delimiter">}</span>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>

    var <a title="scalaz.concurrent.Actor[M]" id="scalaz.stream.async.mutable.WriterTopic.apply.actor">actor</a>: <span title="scalaz.concurrent.Actor[M]">Actor</span><span class="delimiter">[</span>M<span class="delimiter">]</span> = null

    def <a title="(p: scalaz.stream.Process[scalaz.concurrent.Task,I])Unit" id="scalaz.stream.async.mutable.WriterTopic.apply.getNext">getNext</a><span class="delimiter">(</span><a title="scalaz.stream.Process[scalaz.concurrent.Task,I]" id="scalaz.stream.async.mutable.WriterTopic.apply.getNext.p">p</a>: <a href="../../Process.scala.html#scalaz.stream;Process" title="scalaz.stream.Process[scalaz.concurrent.Task,I]">Process</a><span class="delimiter">[</span>Task, I<span class="delimiter">]</span><span class="delimiter">)</span> = <span class="delimiter">{</span>
      <a href="#scalaz.stream.async.mutable.WriterTopic.apply.upState" title="Option[scalaz.\/[scalaz.stream.Cause,scalaz.stream.Cause.EarlyCause =&gt; Unit]]">upState</a>= <span title="(x: scalaz.\/-[scalaz.stream.Cause.EarlyCause =&gt; Unit])Some[scalaz.\/-[scalaz.stream.Cause.EarlyCause =&gt; Unit]]">Some</span><span class="delimiter">(</span><span title="(b: scalaz.stream.Cause.EarlyCause =&gt; Unit)scalaz.\/-[scalaz.stream.Cause.EarlyCause =&gt; Unit]">\/-</span><span class="delimiter">(</span>
        <a href="../../Process.scala.html#scalaz.stream.Process.SourceSyntax" title="(self: scalaz.stream.Process[scalaz.concurrent.Task,I])scalaz.stream.Process.SourceSyntax[I]">p</a>.<a href="../../Process.scala.html#scalaz.stream.Process;SourceSyntax.stepAsync" title="(cb: scalaz.\/[scalaz.stream.Cause,(Seq[I], scalaz.stream.Process.Cont[scalaz.concurrent.Task,I])] =&gt; Unit)(implicit S: scalaz.concurrent.Strategy)scalaz.stream.Cause.EarlyCause =&gt; Unit">stepAsync</a><span class="delimiter">(</span><span class="delimiter">{</span> <a href="#scalaz.stream.async.mutable.WriterTopic.apply.actor" title="scalaz.concurrent.Actor[M]">actor</a> <span title="(a: M)Unit">!</span> <a href="#scalaz.stream.async.mutable.WriterTopic.apply;Upstream.readResolve" title="(result: scalaz.\/[scalaz.stream.Cause,(Seq[I], scalaz.stream.Process.Cont[scalaz.concurrent.Task,I])])Upstream">Upstream</a><span class="delimiter">(</span><a href="#scalaz.stream.async.mutable.WriterTopic.apply.getNext.$anonfun.x$5" title="scalaz.\/[scalaz.stream.Cause,(Seq[I], scalaz.stream.Process.Cont[scalaz.concurrent.Task,I])]">_</a><span class="delimiter">)</span> <span class="delimiter">}</span><span class="delimiter">)</span><span class="delimiter">(</span><a href="#scalaz.stream.async.mutable.WriterTopic.apply.S" title="scalaz.concurrent.Strategy">S</a><span class="delimiter">)</span>
      <span class="delimiter">)</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>

    def <a title="=&gt; Unit" id="scalaz.stream.async.mutable.WriterTopic.apply.startIfNotYet">startIfNotYet</a> =
      if <span class="delimiter">(</span><a href="#scalaz.stream.async.mutable.WriterTopic.apply.upState" title="Option[scalaz.\/[scalaz.stream.Cause,scalaz.stream.Cause.EarlyCause =&gt; Unit]]">upState</a>.<span title="=&gt; Boolean">isEmpty</span><span class="delimiter">)</span> <span class="delimiter">{</span>
        <a href="#scalaz.stream.async.mutable.WriterTopic.apply.publish" title="(is: Seq[I])Unit">publish</a><span class="delimiter">(</span><span title="scala.collection.immutable.Nil.type">Nil</span><span class="delimiter">)</span> <span class="comment">// causes un-emit of first `w`</span>
        <a href="#scalaz.stream.async.mutable.WriterTopic.apply.getNext" title="(p: scalaz.stream.Process[scalaz.concurrent.Task,I])Unit">getNext</a><span class="delimiter">(</span><a href="#scalaz.stream.async.mutable.WriterTopic.apply.source" title="scalaz.stream.Process[scalaz.concurrent.Task,I]">source</a><span class="delimiter">)</span>
      <span class="delimiter">}</span>

    <a href="#scalaz.stream.async.mutable.WriterTopic.apply.actor" title="scalaz.concurrent.Actor[M]">actor</a> = <span title="[A](handler: A =&gt; Unit, onError: Throwable =&gt; Unit)(implicit strategy: scalaz.concurrent.Strategy)scalaz.concurrent.Actor[A]">Actor</span><span title="(handler: M =&gt; Unit, onError: Throwable =&gt; Unit)(implicit strategy: scalaz.concurrent.Strategy)scalaz.concurrent.Actor[M]" class="delimiter">[</span><a href="#scalaz.stream.async.mutable.WriterTopic.apply;M" title="M">M</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="M" id="scalaz.stream.async.mutable.WriterTopic.apply.$anonfun.m">m</a> =&gt; <span class="delimiter">{</span>
      <a href="#scalaz.stream.async.mutable.WriterTopic.apply.closed" title="Option[scalaz.stream.Cause]">closed</a>.<span title="(ifEmpty: =&gt; Any)(f: scalaz.stream.Cause =&gt; Any)Any">fold</span><span class="delimiter">(</span><a href="#scalaz.stream.async.mutable.WriterTopic.apply.$anonfun.m" title="M">m</a> match <span class="delimiter">{</span>
        case <a href="#scalaz.stream.async.mutable.WriterTopic.apply;Subscribe.readResolve" title="(x$0: Subscribe)Option[(Subscription, scalaz.\/[Throwable,Unit] =&gt; Unit)]">Subscribe</a><span class="delimiter">(</span><span title="Subscription">sub</span>, <span title="scalaz.\/[Throwable,Unit] =&gt; Unit">cb</span><span class="delimiter">)</span> =&gt;
          <a href="#scalaz.stream.async.mutable.WriterTopic.apply.subscriptions" title="Vector[Subscription]">subscriptions</a> = <a href="#scalaz.stream.async.mutable.WriterTopic.apply.subscriptions" title="Vector[Subscription]">subscriptions</a> <span title="(elem: Subscription)(implicit bf: scala.collection.generic.CanBuildFrom[scala.collection.immutable.Vector[Subscription],Subscription,Vector[Subscription]])Vector[Subscription]">:+</span> <span title="Subscription">sub</span>
          <a href="#scalaz.stream.async.mutable.WriterTopic.apply.lastW" title="Option[W]">lastW</a>.<span title="(f: W =&gt; Unit)Unit">foreach</span><span class="delimiter">(</span><a title="W" id="scalaz.stream.async.mutable.WriterTopic.apply.$anonfun.$anonfun.w">w</a> =&gt; <span title="Subscription">sub</span>.<a href="#scalaz.stream.async.mutable.WriterTopic.apply;Subscription.publish" title="(wo: Seq[scalaz.\/[W,O]])Unit">publish</a><span class="delimiter">(</span><span title="(elems: scalaz.-\/[W]*)Seq[scalaz.-\/[W]]">Seq</span><span class="delimiter">(</span><span title="(a: W)scalaz.-\/[W]">-\/</span><span class="delimiter">(</span><a href="#scalaz.stream.async.mutable.WriterTopic.apply.$anonfun.$anonfun.w" title="W">w</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
          <a href="#scalaz.stream.async.mutable.WriterTopic.apply.S" title="(a: =&gt; Unit)() =&gt; Unit">S</a><span class="delimiter">(</span><span title="(v1: scalaz.\/[Throwable,Unit])Unit">cb</span><span class="delimiter">(</span><span title="(b: Unit)scalaz.\/-[Unit]">\/-</span><span class="delimiter">(</span><span title="Unit" class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
          <a href="#scalaz.stream.async.mutable.WriterTopic.apply.startIfNotYet" title="=&gt; Unit">startIfNotYet</a>

        case <a href="#scalaz.stream.async.mutable.WriterTopic.apply;UnSubscribe.readResolve" title="(x$0: UnSubscribe)Option[(Subscription, scalaz.\/[Throwable,Unit] =&gt; Unit)]">UnSubscribe</a><span class="delimiter">(</span><span title="Subscription">sub</span>, <span title="scalaz.\/[Throwable,Unit] =&gt; Unit">cb</span><span class="delimiter">)</span> =&gt;
          <a href="#scalaz.stream.async.mutable.WriterTopic.apply.subscriptions" title="Vector[Subscription]">subscriptions</a> = <a href="#scalaz.stream.async.mutable.WriterTopic.apply.subscriptions" title="Vector[Subscription]">subscriptions</a>.<span title="(p: Subscription =&gt; Boolean)scala.collection.immutable.Vector[Subscription]">filterNot</span><span class="delimiter">(</span><a href="#scalaz.stream.async.mutable.WriterTopic.apply.$anonfun.$anonfun.x$6" title="Subscription">_</a> <span title="(x$1: Any)Boolean">==</span> <span title="Subscription">sub</span><span class="delimiter">)</span>
          <a href="#scalaz.stream.async.mutable.WriterTopic.apply.S" title="(a: =&gt; Unit)() =&gt; Unit">S</a><span class="delimiter">(</span><span title="(v1: scalaz.\/[Throwable,Unit])Unit">cb</span><span class="delimiter">(</span><span title="(b: Unit)scalaz.\/-[Unit]">\/-</span><span class="delimiter">(</span><span title="Unit" class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>


        case <a href="#scalaz.stream.async.mutable.WriterTopic.apply;Ready.readResolve" title="(x$0: Ready)Option[(Subscription, scalaz.\/[Throwable,Seq[scalaz.\/[W,O]]] =&gt; Unit)]">Ready</a><span class="delimiter">(</span><span title="Subscription">sub</span>, <span title="scalaz.\/[Throwable,Seq[scalaz.\/[W,O]]] =&gt; Unit">cb</span><span class="delimiter">)</span> =&gt;
          <span title="Subscription">sub</span>.<a href="#scalaz.stream.async.mutable.WriterTopic.apply;Subscription.getOrAwait" title="(cb: scalaz.\/[Throwable,Seq[scalaz.\/[W,O]]] =&gt; Unit)Unit">getOrAwait</a><span class="delimiter">(</span><span title="scalaz.\/[Throwable,Seq[scalaz.\/[W,O]]] =&gt; Unit">cb</span><span class="delimiter">)</span>

        case <a href="#scalaz.stream.async.mutable.WriterTopic.apply;Get.readResolve" title="(x$0: Get)Option[scalaz.\/[Throwable,Seq[W]] =&gt; Unit]">Get</a><span class="delimiter">(</span><span title="scalaz.\/[Throwable,Seq[W]] =&gt; Unit">cb</span><span class="delimiter">)</span> =&gt;
          <a href="#scalaz.stream.async.mutable.WriterTopic.apply.startIfNotYet" title="=&gt; Unit">startIfNotYet</a>
          <a href="#scalaz.stream.async.mutable.WriterTopic.apply.lastW" title="Option[W]">lastW</a> match <span class="delimiter">{</span>
            case Some<span class="delimiter">(</span><a title="W" id="scalaz.stream.async.mutable.WriterTopic.apply.$anonfun.w">w</a><span class="delimiter">)</span> =&gt; <a href="#scalaz.stream.async.mutable.WriterTopic.apply.S" title="(a: =&gt; Unit)() =&gt; Unit">S</a><span class="delimiter">(</span><span title="(v1: scalaz.\/[Throwable,Seq[W]])Unit">cb</span><span class="delimiter">(</span><span title="(b: Seq[W])scalaz.\/-[Seq[W]]">\/-</span><span class="delimiter">(</span><span title="(elems: W*)Seq[W]">Seq</span><span class="delimiter">(</span><a href="#scalaz.stream.async.mutable.WriterTopic.apply.$anonfun.w" title="W">w</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
            case <span title="None.type">None</span> =&gt; <a href="#scalaz.stream.async.mutable.WriterTopic.apply.awaitingW" title="Vector[scalaz.\/[Throwable,Seq[W]] =&gt; Unit]">awaitingW</a> = <a href="#scalaz.stream.async.mutable.WriterTopic.apply.awaitingW" title="Vector[scalaz.\/[Throwable,Seq[W]] =&gt; Unit]">awaitingW</a> <span title="(elem: scalaz.\/[Throwable,Seq[W]] =&gt; Unit)(implicit bf: scala.collection.generic.CanBuildFrom[scala.collection.immutable.Vector[scalaz.\/[Throwable,Seq[W]] =&gt; Unit],scalaz.\/[Throwable,Seq[W]] =&gt; Unit,Vector[scalaz.\/[Throwable,Seq[W]] =&gt; Unit]])Vector[scalaz.\/[Throwable,Seq[W]] =&gt; Unit]">:+</span> <span title="scalaz.\/[Throwable,Seq[W]] =&gt; Unit">cb</span>
          <span class="delimiter">}</span>

        case <a href="#scalaz.stream.async.mutable.WriterTopic.apply;Upstream.readResolve" title="(x$0: Upstream)Option[scalaz.\/[scalaz.stream.Cause,(Seq[I], scalaz.stream.Process.Cont[scalaz.concurrent.Task,I])]]">Upstream</a><span class="delimiter">(</span>-\/<span class="delimiter">(</span><span title="scalaz.stream.Cause">rsn</span><span class="delimiter">)</span><span class="delimiter">)</span> =&gt;
          if <span class="delimiter">(</span><a href="#scalaz.stream.async.mutable.WriterTopic.apply.haltOnSource" title="Boolean">haltOnSource</a> <span title="(x: Boolean)Boolean">||</span> <span title="scalaz.stream.Cause">rsn</span> <span title="(x$1: Any)Boolean">!=</span> <a href="../../Cause.scala.html#scalaz.stream.Cause.End" title="scalaz.stream.Cause.End.type">End</a><span class="delimiter">)</span> <a href="#scalaz.stream.async.mutable.WriterTopic.apply.fail" title="(cause: scalaz.stream.Cause)Unit">fail</a><span class="delimiter">(</span><span title="scalaz.stream.Cause">rsn</span><span class="delimiter">)</span>
          <a href="#scalaz.stream.async.mutable.WriterTopic.apply.upState" title="Option[scalaz.\/[scalaz.stream.Cause,scalaz.stream.Cause.EarlyCause =&gt; Unit]]">upState</a> = <span title="(x: scalaz.-\/[scalaz.stream.Cause])Some[scalaz.-\/[scalaz.stream.Cause]]">Some</span><span class="delimiter">(</span><span title="(a: scalaz.stream.Cause)scalaz.-\/[scalaz.stream.Cause]">-\/</span><span class="delimiter">(</span><span title="scalaz.stream.Cause">rsn</span><span class="delimiter">)</span><span class="delimiter">)</span>

        case <a href="#scalaz.stream.async.mutable.WriterTopic.apply;Upstream.readResolve" title="(x$0: Upstream)Option[scalaz.\/[scalaz.stream.Cause,(Seq[I], scalaz.stream.Process.Cont[scalaz.concurrent.Task,I])]]">Upstream</a><span class="delimiter">(</span>\/-<span class="delimiter">(</span><span class="delimiter">(</span><span title="Seq[I]">is</span>, <a title="scalaz.stream.Process.Cont[scalaz.concurrent.Task,I]" id="scalaz.stream.async.mutable.WriterTopic.apply.$anonfun.cont">cont</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span> =&gt;
          <a href="#scalaz.stream.async.mutable.WriterTopic.apply.publish" title="(is: Seq[I])Unit">publish</a><span class="delimiter">(</span><span title="Seq[I]">is</span><span class="delimiter">)</span>
          <a href="#scalaz.stream.async.mutable.WriterTopic.apply.getNext" title="(p: scalaz.stream.Process[scalaz.concurrent.Task,I])Unit">getNext</a><span class="delimiter">(</span><a href="../../Util.scala.html#scalaz.stream.Util" title="scalaz.stream.Util.type">Util</a>.<a href="../../Util.scala.html#scalaz.stream.Util.Try" title="(p: =&gt; scalaz.stream.Process[scalaz.concurrent.Task,I])scalaz.stream.Process[scalaz.concurrent.Task,I]">Try</a><span class="delimiter">(</span><a href="#scalaz.stream.async.mutable.WriterTopic.apply.$anonfun.cont" title="scalaz.stream.Process.Cont[scalaz.concurrent.Task,I]">cont</a>.<a href="../../Process.scala.html#scalaz.stream.Process;Cont.continue" title="=&gt; scalaz.stream.Process[scalaz.concurrent.Task,I]">continue</a><span class="delimiter">)</span><span class="delimiter">)</span>

        case <a href="#scalaz.stream.async.mutable.WriterTopic.apply;Publish.readResolve" title="(x$0: Publish)Option[(Seq[I], scalaz.\/[Throwable,Unit] =&gt; Unit)]">Publish</a><span class="delimiter">(</span><span title="Seq[I]">is</span>, <span title="scalaz.\/[Throwable,Unit] =&gt; Unit">cb</span><span class="delimiter">)</span> =&gt;
          <a href="#scalaz.stream.async.mutable.WriterTopic.apply.publish" title="(is: Seq[I])Unit">publish</a><span class="delimiter">(</span><span title="Seq[I]">is</span><span class="delimiter">)</span>
          <a href="#scalaz.stream.async.mutable.WriterTopic.apply.S" title="(a: =&gt; Unit)() =&gt; Unit">S</a><span class="delimiter">(</span><span title="(v1: scalaz.\/[Throwable,Unit])Unit">cb</span><span class="delimiter">(</span><span title="(b: Unit)scalaz.\/-[Unit]">\/-</span><span class="delimiter">(</span><span title="Unit" class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>

        case <a href="#scalaz.stream.async.mutable.WriterTopic.apply;Fail.readResolve" title="(x$0: Fail)Option[(scalaz.stream.Cause, scalaz.\/[Throwable,Unit] =&gt; Unit)]">Fail</a><span class="delimiter">(</span><span title="scalaz.stream.Cause">rsn</span>, <span title="scalaz.\/[Throwable,Unit] =&gt; Unit">cb</span><span class="delimiter">)</span> =&gt;
          <a href="#scalaz.stream.async.mutable.WriterTopic.apply.fail" title="(cause: scalaz.stream.Cause)Unit">fail</a><span class="delimiter">(</span><span title="scalaz.stream.Cause">rsn</span><span class="delimiter">)</span>
          <a href="#scalaz.stream.async.mutable.WriterTopic.apply.upState" title="Option[scalaz.\/[scalaz.stream.Cause,scalaz.stream.Cause.EarlyCause =&gt; Unit]]">upState</a>.<span title="(pf: PartialFunction[scalaz.\/[scalaz.stream.Cause,scalaz.stream.Cause.EarlyCause =&gt; Unit],Unit])Option[Unit]">collect</span> <a title="&lt;$anon: scalaz.\/[scalaz.stream.Cause,scalaz.stream.Cause.EarlyCause =&gt; Unit] =&gt; Unit&gt; extends scala.runtime.AbstractPartialFunction[scalaz.\/[scalaz.stream.Cause,scalaz.stream.Cause.EarlyCause =&gt; Unit],Unit] with Serializable" id="scalaz.stream.async.mutable.WriterTopic.apply.$anonfun;$anonfun.isDefinedAt.defaultCase$" class="delimiter">{</a> case \/-<span class="delimiter">(</span><a title="scalaz.stream.Cause.EarlyCause =&gt; Unit" id="scalaz.stream.async.mutable.WriterTopic.apply.$anonfun;$anonfun.isDefinedAt.interrupt">interrupt</a><span class="delimiter">)</span> =&gt; <a href="#scalaz.stream.async.mutable.WriterTopic.apply.$anonfun;$anonfun.isDefinedAt.interrupt" title="(v1: scalaz.stream.Cause.EarlyCause)Unit">interrupt</a><span title="Boolean(true)" class="delimiter">(</span><a href="../../Cause.scala.html#scalaz.stream.Cause.Kill" title="scalaz.stream.Cause.Kill.type">Kill</a><span class="delimiter">)</span> <span class="delimiter">}</span>
          <a href="#scalaz.stream.async.mutable.WriterTopic.apply.S" title="(a: =&gt; Unit)() =&gt; Unit">S</a><span class="delimiter">(</span><span title="(v1: scalaz.\/[Throwable,Unit])Unit">cb</span><span class="delimiter">(</span><span title="(b: Unit)scalaz.\/-[Unit]">\/-</span><span class="delimiter">(</span><span title="Unit" class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>

      <span class="delimiter">}</span><span class="delimiter">)</span><span title="Unit" class="delimiter">(</span><a title="scalaz.stream.Cause" id="scalaz.stream.async.mutable.WriterTopic.apply.$anonfun.$anonfun.rsn">rsn</a> =&gt; <a href="#scalaz.stream.async.mutable.WriterTopic.apply.$anonfun.m" title="M">m</a> match <span class="delimiter">{</span>
        case <a href="#scalaz.stream.async.mutable.WriterTopic.apply;Subscribe.readResolve" title="(x$0: Subscribe)Option[(Subscription, scalaz.\/[Throwable,Unit] =&gt; Unit)]">Subscribe</a><span class="delimiter">(</span>_, <span title="scalaz.\/[Throwable,Unit] =&gt; Unit">cb</span><span class="delimiter">)</span>         =&gt; <a href="#scalaz.stream.async.mutable.WriterTopic.apply.S" title="(a: =&gt; Unit)() =&gt; Unit">S</a><span class="delimiter">(</span><span title="(v1: scalaz.\/[Throwable,Unit])Unit">cb</span><span class="delimiter">(</span><span title="(a: Throwable)scalaz.-\/[Throwable]">-\/</span><span class="delimiter">(</span><a href="#scalaz.stream.async.mutable.WriterTopic.apply.$anonfun.$anonfun.rsn" title="scalaz.stream.Cause">rsn</a>.<a href="../../Cause.scala.html#scalaz.stream;Cause.asThrowable" title="=&gt; Throwable">asThrowable</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
        case <a href="#scalaz.stream.async.mutable.WriterTopic.apply;UnSubscribe.readResolve" title="(x$0: UnSubscribe)Option[(Subscription, scalaz.\/[Throwable,Unit] =&gt; Unit)]">UnSubscribe</a><span class="delimiter">(</span>_, <span title="scalaz.\/[Throwable,Unit] =&gt; Unit">cb</span><span class="delimiter">)</span>       =&gt; <a href="#scalaz.stream.async.mutable.WriterTopic.apply.S" title="(a: =&gt; Unit)() =&gt; Unit">S</a><span class="delimiter">(</span><span title="(v1: scalaz.\/[Throwable,Unit])Unit">cb</span><span class="delimiter">(</span><span title="(b: Unit)scalaz.\/-[Unit]">\/-</span><span class="delimiter">(</span><span title="Unit" class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
        case <a href="#scalaz.stream.async.mutable.WriterTopic.apply;Ready.readResolve" title="(x$0: Ready)Option[(Subscription, scalaz.\/[Throwable,Seq[scalaz.\/[W,O]]] =&gt; Unit)]">Ready</a><span class="delimiter">(</span><a title="Subscription" id="scalaz.stream.async.mutable.WriterTopic.apply.$anonfun.$anonfun.sub">sub</a>, <span title="scalaz.\/[Throwable,Seq[scalaz.\/[W,O]]] =&gt; Unit">cb</span><span class="delimiter">)</span>           =&gt; <a href="#scalaz.stream.async.mutable.WriterTopic.apply.$anonfun.$anonfun.sub" title="Subscription">sub</a>.<a href="#scalaz.stream.async.mutable.WriterTopic.apply;Subscription.flushOrClose" title="(cause: scalaz.stream.Cause, cb: scalaz.\/[Throwable,Seq[scalaz.\/[W,O]]] =&gt; Unit)Unit">flushOrClose</a><span class="delimiter">(</span><a href="#scalaz.stream.async.mutable.WriterTopic.apply.$anonfun.$anonfun.rsn" title="scalaz.stream.Cause">rsn</a>,<span title="scalaz.\/[Throwable,Seq[scalaz.\/[W,O]]] =&gt; Unit">cb</span><span class="delimiter">)</span>
        case <a href="#scalaz.stream.async.mutable.WriterTopic.apply;Get.readResolve" title="(x$0: Get)Option[scalaz.\/[Throwable,Seq[W]] =&gt; Unit]">Get</a><span class="delimiter">(</span><span title="scalaz.\/[Throwable,Seq[W]] =&gt; Unit">cb</span><span class="delimiter">)</span>                  =&gt; <a href="#scalaz.stream.async.mutable.WriterTopic.apply.S" title="(a: =&gt; Unit)() =&gt; Unit">S</a><span class="delimiter">(</span><span title="(v1: scalaz.\/[Throwable,Seq[W]])Unit">cb</span><span class="delimiter">(</span><span title="(a: Throwable)scalaz.-\/[Throwable]">-\/</span><span class="delimiter">(</span><a href="#scalaz.stream.async.mutable.WriterTopic.apply.$anonfun.$anonfun.rsn" title="scalaz.stream.Cause">rsn</a>.<a href="../../Cause.scala.html#scalaz.stream;Cause.asThrowable" title="=&gt; Throwable">asThrowable</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
        case <a href="#scalaz.stream.async.mutable.WriterTopic.apply;Publish.readResolve" title="(x$0: Publish)Option[(Seq[I], scalaz.\/[Throwable,Unit] =&gt; Unit)]">Publish</a><span class="delimiter">(</span>_, <span title="scalaz.\/[Throwable,Unit] =&gt; Unit">cb</span><span class="delimiter">)</span>           =&gt; <a href="#scalaz.stream.async.mutable.WriterTopic.apply.S" title="(a: =&gt; Unit)() =&gt; Unit">S</a><span class="delimiter">(</span><span title="(v1: scalaz.\/[Throwable,Unit])Unit">cb</span><span class="delimiter">(</span><span title="(a: Throwable)scalaz.-\/[Throwable]">-\/</span><span class="delimiter">(</span><a href="#scalaz.stream.async.mutable.WriterTopic.apply.$anonfun.$anonfun.rsn" title="scalaz.stream.Cause">rsn</a>.<a href="../../Cause.scala.html#scalaz.stream;Cause.asThrowable" title="=&gt; Throwable">asThrowable</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
        case <a href="#scalaz.stream.async.mutable.WriterTopic.apply;Fail.readResolve" title="(x$0: Fail)Option[(scalaz.stream.Cause, scalaz.\/[Throwable,Unit] =&gt; Unit)]">Fail</a><span class="delimiter">(</span>_, <span title="scalaz.\/[Throwable,Unit] =&gt; Unit">cb</span><span class="delimiter">)</span>              =&gt; <a href="#scalaz.stream.async.mutable.WriterTopic.apply.S" title="(a: =&gt; Unit)() =&gt; Unit">S</a><span class="delimiter">(</span><span title="(v1: scalaz.\/[Throwable,Unit])Unit">cb</span><span class="delimiter">(</span><span title="(b: Unit)scalaz.\/-[Unit]">\/-</span><span class="delimiter">(</span><span title="Unit" class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
        case <a href="#scalaz.stream.async.mutable.WriterTopic.apply;Upstream.readResolve" title="(x$0: Upstream)Option[scalaz.\/[scalaz.stream.Cause,(Seq[I], scalaz.stream.Process.Cont[scalaz.concurrent.Task,I])]]">Upstream</a><span class="delimiter">(</span>-\/<span class="delimiter">(</span>_<span class="delimiter">)</span><span class="delimiter">)</span>         =&gt; <span class="comment">//no-op</span>
        case <a href="#scalaz.stream.async.mutable.WriterTopic.apply;Upstream.readResolve" title="(x$0: Upstream)Option[scalaz.\/[scalaz.stream.Cause,(Seq[I], scalaz.stream.Process.Cont[scalaz.concurrent.Task,I])]]">Upstream</a><span class="delimiter">(</span>\/-<span class="delimiter">(</span><span class="delimiter">(</span>_, <a title="scalaz.stream.Process.Cont[scalaz.concurrent.Task,I]" id="scalaz.stream.async.mutable.WriterTopic.apply.$anonfun.$anonfun.cont">cont</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span> =&gt; <a href="#scalaz.stream.async.mutable.WriterTopic.apply.S" title="(a: =&gt; scalaz.stream.Cause.EarlyCause =&gt; Unit)() =&gt; scalaz.stream.Cause.EarlyCause =&gt; Unit">S</a><span class="delimiter">(</span><span class="delimiter">(</span><a href="../../Process.scala.html#scalaz.stream.Process;Halt" title="(cause: scalaz.stream.Cause)scalaz.stream.Process.Halt">Halt</a><span class="delimiter">(</span><a href="../../Cause.scala.html#scalaz.stream.Cause.Kill" title="scalaz.stream.Cause.Kill.type">Kill</a><span class="delimiter">)</span> <a href="../../Process.scala.html#scalaz.stream.Process.SourceSyntax" title="(self: scalaz.stream.Process[scalaz.concurrent.Task,I])scalaz.stream.Process.SourceSyntax[I]">+:</a> <a href="#scalaz.stream.async.mutable.WriterTopic.apply.$anonfun.$anonfun.cont" title="scalaz.stream.Process.Cont[scalaz.concurrent.Task,I]">cont</a><span class="delimiter">)</span> <a href="../../Process.scala.html#scalaz.stream.Process;SourceSyntax.stepAsync" title="(cb: scalaz.\/[scalaz.stream.Cause,(Seq[I], scalaz.stream.Process.Cont[scalaz.concurrent.Task,I])] =&gt; Unit)(implicit S: scalaz.concurrent.Strategy)scalaz.stream.Cause.EarlyCause =&gt; Unit">stepAsync</a> <span class="delimiter">{</span> <a title="scalaz.\/[scalaz.stream.Cause,(Seq[I], scalaz.stream.Process.Cont[scalaz.concurrent.Task,I])]" id="scalaz.stream.async.mutable.WriterTopic.apply.$anonfun.$anonfun.$anonfun.x$8">_</a> =&gt; <span title="Unit" class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">}</span><span class="delimiter">)</span>
      <span class="delimiter">}</span><span class="delimiter">)</span>
    <span class="delimiter">}</span><span class="delimiter">)</span><span class="delimiter">(</span><a href="#scalaz.stream.async.mutable.WriterTopic.apply.S" title="scalaz.concurrent.Strategy">S</a><span class="delimiter">)</span>


    new <a title="&lt;$anon: scalaz.stream.async.mutable.WriterTopic[W,I,O]&gt; extends AnyRef with scalaz.stream.async.mutable.WriterTopic[W,I,O]" id="scalaz.stream.async.mutable.WriterTopic.apply;$anon">WriterTopic</a><span class="delimiter">[</span>W, I, O<span class="delimiter">]</span> <span class="delimiter">{</span>
      def <a title="=&gt; scalaz.stream.Sink[scalaz.concurrent.Task,I]" id="scalaz.stream.async.mutable.WriterTopic.apply;$anon.publish">publish</a>: <a href="../../Process.scala.html#scalaz.stream;Process" title="scalaz.stream.Sink[scalaz.concurrent.Task,I]">Sink</a><span class="delimiter">[</span>Task, I<span class="delimiter">]</span> = <a href="../../Process.scala.html#scalaz.stream.Process" title="scalaz.stream.Process.type">Process</a>.<a href="../../Process.scala.html#scalaz.stream.Process.constant" title="(a: I =&gt; scalaz.concurrent.Task[Unit], chunkSize: Int)scalaz.stream.Process0[I =&gt; scalaz.concurrent.Task[Unit]]">constant</a><span class="delimiter">(</span><a href="#scalaz.stream.async.mutable.WriterTopic.apply;$anon.publishOne" title="(i: I)scalaz.concurrent.Task[Unit]">publishOne</a> _<span class="delimiter">)</span>
      def <a title="(i: I)scalaz.concurrent.Task[Unit]" id="scalaz.stream.async.mutable.WriterTopic.apply;$anon.publishOne">publishOne</a><span class="delimiter">(</span><a title="I" id="scalaz.stream.async.mutable.WriterTopic.apply;$anon.publishOne.i">i</a>: <a href="#scalaz.stream.async.mutable.WriterTopic.apply;I" title="I">I</a><span class="delimiter">)</span>: <span title="scalaz.concurrent.Task[Unit]">Task</span><span class="delimiter">[</span>Unit<span class="delimiter">]</span> = <span title="scalaz.concurrent.Task.type">Task</span>.<span title="(register: (scalaz.\/[Throwable,Unit] =&gt; Unit) =&gt; Unit)scalaz.concurrent.Task[Unit]">async</span> <span class="delimiter">{</span> <a title="scalaz.\/[Throwable,Unit] =&gt; Unit" id="scalaz.stream.async.mutable.WriterTopic.apply;$anon.publishOne.$anonfun.cb">cb</a> =&gt; <a href="#scalaz.stream.async.mutable.WriterTopic.apply.actor" title="scalaz.concurrent.Actor[M]">actor</a> <span title="(a: M)Unit">!</span> <a href="#scalaz.stream.async.mutable.WriterTopic.apply;Publish.readResolve" title="(is: Seq[I], cb: scalaz.\/[Throwable,Unit] =&gt; Unit)Publish">Publish</a><span class="delimiter">(</span><span title="(elems: I*)Seq[I]">Seq</span><span class="delimiter">(</span><a href="#scalaz.stream.async.mutable.WriterTopic.apply;$anon.publishOne.i" title="I">i</a><span class="delimiter">)</span>, <a href="#scalaz.stream.async.mutable.WriterTopic.apply;$anon.publishOne.$anonfun.cb" title="scalaz.\/[Throwable,Unit] =&gt; Unit">cb</a><span class="delimiter">)</span> <span class="delimiter">}</span>
      def <a title="(cause: scalaz.stream.Cause)scalaz.concurrent.Task[Unit]" id="scalaz.stream.async.mutable.WriterTopic.apply;$anon.failWithCause">failWithCause</a><span class="delimiter">(</span><a title="scalaz.stream.Cause" id="scalaz.stream.async.mutable.WriterTopic.apply;$anon.failWithCause.cause">cause</a>: <a href="../../Cause.scala.html#scalaz.stream;Cause" title="scalaz.stream.Cause">Cause</a><span class="delimiter">)</span>: <span title="scalaz.concurrent.Task[Unit]">Task</span><span class="delimiter">[</span>Unit<span class="delimiter">]</span> = <span title="scalaz.concurrent.Task.type">Task</span>.<span title="(register: (scalaz.\/[Throwable,Unit] =&gt; Unit) =&gt; Unit)scalaz.concurrent.Task[Unit]">async</span> <span class="delimiter">{</span> <a title="scalaz.\/[Throwable,Unit] =&gt; Unit" id="scalaz.stream.async.mutable.WriterTopic.apply;$anon.failWithCause.$anonfun.cb">cb</a> =&gt; <a href="#scalaz.stream.async.mutable.WriterTopic.apply.actor" title="scalaz.concurrent.Actor[M]">actor</a> <span title="(a: M)Unit">!</span> <a href="#scalaz.stream.async.mutable.WriterTopic.apply;Fail.readResolve" title="(cause: scalaz.stream.Cause, cb: scalaz.\/[Throwable,Unit] =&gt; Unit)Fail">Fail</a><span class="delimiter">(</span><a href="#scalaz.stream.async.mutable.WriterTopic.apply;$anon.failWithCause.cause" title="scalaz.stream.Cause">cause</a>, <a href="#scalaz.stream.async.mutable.WriterTopic.apply;$anon.failWithCause.$anonfun.cb" title="scalaz.\/[Throwable,Unit] =&gt; Unit">cb</a><span class="delimiter">)</span> <span class="delimiter">}</span>

      def <a title="=&gt; scalaz.stream.Writer[scalaz.concurrent.Task,W,O]" id="scalaz.stream.async.mutable.WriterTopic.apply;$anon.subscribe">subscribe</a>: <a href="../../Process.scala.html#scalaz.stream;Process" title="scalaz.stream.Writer[scalaz.concurrent.Task,W,O]">Writer</a><span class="delimiter">[</span>Task, W, O<span class="delimiter">]</span> = <a href="../../Process.scala.html#scalaz.stream.Process" title="scalaz.stream.Process.type">Process</a>.<a href="../../Process.scala.html#scalaz.stream.Process.suspend" title="(p: =&gt; scalaz.stream.Process[scalaz.concurrent.Task,scalaz.\/[W,O]])scalaz.stream.Process[scalaz.concurrent.Task,scalaz.\/[W,O]]">suspend</a> <span class="delimiter">{</span>

        val <a title="Subscription" id="scalaz.stream.async.mutable.WriterTopic.apply;$anon.subscribe.subscription">subscription</a> = new <a href="#scalaz.stream.async.mutable.WriterTopic.apply;Subscription" title="Subscription">Subscription</a><span class="delimiter">(</span><span title="(a: scala.collection.immutable.Vector[scalaz.\/[W,O]])scalaz.-\/[scala.collection.immutable.Vector[scalaz.\/[W,O]]]">-\/</span><span class="delimiter">(</span><span title="=&gt; collection.immutable.Vector.type">Vector</span>.<span title="[A]=&gt; scala.collection.immutable.Vector[A]">empty</span><span title="scala.collection.immutable.Vector[scalaz.\/[W,O]]" class="delimiter">[</span>W <span title="scalaz.\/[W,O]">\/</span> O<span class="delimiter">]</span><span class="delimiter">)</span><span class="delimiter">)</span>
        val <a title="scalaz.concurrent.Task[Unit]" id="scalaz.stream.async.mutable.WriterTopic.apply;$anon.subscribe.register">register</a> = <span title="scalaz.concurrent.Task.type">Task</span>.<span title="[A](register: (scalaz.\/[Throwable,A] =&gt; Unit) =&gt; Unit)scalaz.concurrent.Task[A]">async</span><span title="(register: (scalaz.\/[Throwable,Unit] =&gt; Unit) =&gt; Unit)scalaz.concurrent.Task[Unit]" class="delimiter">[</span><span title="Unit">Unit</span><span class="delimiter">]</span> <span class="delimiter">{</span> <a title="scalaz.\/[Throwable,Unit] =&gt; Unit" id="scalaz.stream.async.mutable.WriterTopic.apply;$anon.subscribe.register.$anonfun.cb">cb</a> =&gt; <a href="#scalaz.stream.async.mutable.WriterTopic.apply.actor" title="scalaz.concurrent.Actor[M]">actor</a> <span title="(a: M)Unit">!</span> <a href="#scalaz.stream.async.mutable.WriterTopic.apply;Subscribe.readResolve" title="(sub: Subscription, cb: scalaz.\/[Throwable,Unit] =&gt; Unit)Subscribe">Subscribe</a><span class="delimiter">(</span><a href="#scalaz.stream.async.mutable.WriterTopic.apply;$anon.subscribe.subscription" title="Subscription">subscription</a>, <a href="#scalaz.stream.async.mutable.WriterTopic.apply;$anon.subscribe.register.$anonfun.cb" title="scalaz.\/[Throwable,Unit] =&gt; Unit">cb</a><span class="delimiter">)</span> <span class="delimiter">}</span>
        val <a title="scalaz.concurrent.Task[Unit]" id="scalaz.stream.async.mutable.WriterTopic.apply;$anon.subscribe.unRegister">unRegister</a> = <span title="scalaz.concurrent.Task.type">Task</span>.<span title="[A](register: (scalaz.\/[Throwable,A] =&gt; Unit) =&gt; Unit)scalaz.concurrent.Task[A]">async</span><span title="(register: (scalaz.\/[Throwable,Unit] =&gt; Unit) =&gt; Unit)scalaz.concurrent.Task[Unit]" class="delimiter">[</span><span title="Unit">Unit</span><span class="delimiter">]</span> <span class="delimiter">{</span> <a title="scalaz.\/[Throwable,Unit] =&gt; Unit" id="scalaz.stream.async.mutable.WriterTopic.apply;$anon.subscribe.unRegister.$anonfun.cb">cb</a> =&gt; <a href="#scalaz.stream.async.mutable.WriterTopic.apply.actor" title="scalaz.concurrent.Actor[M]">actor</a> <span title="(a: M)Unit">!</span> <a href="#scalaz.stream.async.mutable.WriterTopic.apply;UnSubscribe.readResolve" title="(sub: Subscription, cb: scalaz.\/[Throwable,Unit] =&gt; Unit)UnSubscribe">UnSubscribe</a><span class="delimiter">(</span><a href="#scalaz.stream.async.mutable.WriterTopic.apply;$anon.subscribe.subscription" title="Subscription">subscription</a>, <a href="#scalaz.stream.async.mutable.WriterTopic.apply;$anon.subscribe.unRegister.$anonfun.cb" title="scalaz.\/[Throwable,Unit] =&gt; Unit">cb</a><span class="delimiter">)</span> <span class="delimiter">}</span>
        val <a title="scalaz.concurrent.Task[Seq[scalaz.\/[W,O]]]" id="scalaz.stream.async.mutable.WriterTopic.apply;$anon.subscribe.oneChunk">oneChunk</a> = <span title="scalaz.concurrent.Task.type">Task</span>.<span title="[A](register: (scalaz.\/[Throwable,A] =&gt; Unit) =&gt; Unit)scalaz.concurrent.Task[A]">async</span><span title="(register: (scalaz.\/[Throwable,Seq[scalaz.\/[W,O]]] =&gt; Unit) =&gt; Unit)scalaz.concurrent.Task[Seq[scalaz.\/[W,O]]]" class="delimiter">[</span><span title="Seq[scalaz.\/[W,O]]">Seq</span><span class="delimiter">[</span>W \/ O<span class="delimiter">]</span><span class="delimiter">]</span> <span class="delimiter">{</span> <a title="scalaz.\/[Throwable,Seq[scalaz.\/[W,O]]] =&gt; Unit" id="scalaz.stream.async.mutable.WriterTopic.apply;$anon.subscribe.oneChunk.$anonfun.cb">cb</a> =&gt; <a href="#scalaz.stream.async.mutable.WriterTopic.apply.actor" title="scalaz.concurrent.Actor[M]">actor</a> <span title="(a: M)Unit">!</span> <a href="#scalaz.stream.async.mutable.WriterTopic.apply;Ready.readResolve" title="(sub: Subscription, cb: scalaz.\/[Throwable,Seq[scalaz.\/[W,O]]] =&gt; Unit)Ready">Ready</a><span class="delimiter">(</span><a href="#scalaz.stream.async.mutable.WriterTopic.apply;$anon.subscribe.subscription" title="Subscription">subscription</a>, <a href="#scalaz.stream.async.mutable.WriterTopic.apply;$anon.subscribe.oneChunk.$anonfun.cb" title="scalaz.\/[Throwable,Seq[scalaz.\/[W,O]]] =&gt; Unit">cb</a><span class="delimiter">)</span> <span class="delimiter">}</span>
        <span class="delimiter">(</span><a href="../../Process.scala.html#scalaz.stream.Process" title="scalaz.stream.Process.type">Process</a>.<a href="../../Process.scala.html#scalaz.stream.Process.eval_" title="(f: scalaz.concurrent.Task[Unit])scalaz.stream.Process[scalaz.concurrent.Task,Nothing]">eval_</a><span class="delimiter">(</span><a href="#scalaz.stream.async.mutable.WriterTopic.apply;$anon.subscribe.register" title="scalaz.concurrent.Task[Unit]">register</a><span class="delimiter">)</span> <a href="../../Process.scala.html#scalaz.stream;Process.++" title="(p2: =&gt; scalaz.stream.Process[[x]scalaz.concurrent.Task[x],scalaz.\/[W,O]])scalaz.stream.Process[[x]scalaz.concurrent.Task[x],scalaz.\/[W,O]]">++</a> <a href="../../Process.scala.html#scalaz.stream.Process" title="scalaz.stream.Process.type">Process</a>.<a href="../../Process.scala.html#scalaz.stream.Process.repeatEval" title="(f: scalaz.concurrent.Task[Seq[scalaz.\/[W,O]]])scalaz.stream.Process[scalaz.concurrent.Task,Seq[scalaz.\/[W,O]]]">repeatEval</a><span class="delimiter">(</span><a href="#scalaz.stream.async.mutable.WriterTopic.apply;$anon.subscribe.oneChunk" title="scalaz.concurrent.Task[Seq[scalaz.\/[W,O]]]">oneChunk</a><span class="delimiter">)</span>.<a href="../../Process.scala.html#scalaz.stream;Process.flatMap" title="(f: Seq[scalaz.\/[W,O]] =&gt; scalaz.stream.Process[[x]scalaz.concurrent.Task[x],scalaz.\/[W,O]])scalaz.stream.Process[[x]scalaz.concurrent.Task[x],scalaz.\/[W,O]]">flatMap</a><span class="delimiter">(</span><a href="../../Process.scala.html#scalaz.stream.Process" title="scalaz.stream.Process.type">Process</a>.<a href="../../Process.scala.html#scalaz.stream.Process.emitAll" title="(os: Seq[scalaz.\/[W,O]])scalaz.stream.Process0[scalaz.\/[W,O]]">emitAll</a><span class="delimiter">)</span><span class="delimiter">)</span>
        .<a href="../../Process.scala.html#scalaz.stream;Process.onComplete" title="(p2: =&gt; scalaz.stream.Process[[x]scalaz.concurrent.Task[x],scalaz.\/[W,O]])scalaz.stream.Process[[x]scalaz.concurrent.Task[x],scalaz.\/[W,O]]">onComplete</a><span class="delimiter">(</span><a href="../../Process.scala.html#scalaz.stream.Process" title="scalaz.stream.Process.type">Process</a>.<a href="../../Process.scala.html#scalaz.stream.Process.eval_" title="(f: scalaz.concurrent.Task[Unit])scalaz.stream.Process[scalaz.concurrent.Task,Nothing]">eval_</a><span class="delimiter">(</span><a href="#scalaz.stream.async.mutable.WriterTopic.apply;$anon.subscribe.unRegister" title="scalaz.concurrent.Task[Unit]">unRegister</a><span class="delimiter">)</span><span class="delimiter">)</span>
      <span class="delimiter">}</span>


      def <a title="=&gt; scalaz.stream.Process[scalaz.concurrent.Task,O]" id="scalaz.stream.async.mutable.WriterTopic.apply;$anon.subscribeO">subscribeO</a>: <a href="../../Process.scala.html#scalaz.stream;Process" title="scalaz.stream.Process[scalaz.concurrent.Task,O]">Process</a><span class="delimiter">[</span>Task, O<span class="delimiter">]</span> = <a href="#scalaz.stream.async.mutable.WriterTopic.apply;$anon.subscribe" title="=&gt; scalaz.stream.Writer[scalaz.concurrent.Task,W,O]">subscribe</a>.<a href="../../process1.scala.html#scalaz.stream;Process1Ops.collect" title="(pf: PartialFunction[scalaz.\/[W,O],O])scalaz.stream.Process[scalaz.concurrent.Task,O]">collect</a> <a title="&lt;$anon: scalaz.\/[W,O] =&gt; O&gt; extends scala.runtime.AbstractPartialFunction[scalaz.\/[W,O],O] with Serializable" id="scalaz.stream.async.mutable.WriterTopic.apply;$anon.subscribeO;$anonfun.isDefinedAt.defaultCase$" class="delimiter">{</a> case \/-<span class="delimiter">(</span><a title="O" id="scalaz.stream.async.mutable.WriterTopic.apply;$anon.subscribeO;$anonfun.isDefinedAt.o">o</a><span class="delimiter">)</span> =&gt; <a href="#scalaz.stream.async.mutable.WriterTopic.apply;$anon.subscribeO;$anonfun.isDefinedAt.o" title="O">o</a> <span class="delimiter">}</span>
      def <a title="=&gt; scalaz.stream.Process[scalaz.concurrent.Task,W]" id="scalaz.stream.async.mutable.WriterTopic.apply;$anon.subscribeW">subscribeW</a>: <a href="../../Process.scala.html#scalaz.stream;Process" title="scalaz.stream.Process[scalaz.concurrent.Task,W]">Process</a><span class="delimiter">[</span>Task, W<span class="delimiter">]</span> = <a href="#scalaz.stream.async.mutable.WriterTopic.apply;$anon.subscribe" title="=&gt; scalaz.stream.Writer[scalaz.concurrent.Task,W,O]">subscribe</a>.<a href="../../process1.scala.html#scalaz.stream;Process1Ops.collect" title="(pf: PartialFunction[scalaz.\/[W,O],W])scalaz.stream.Process[scalaz.concurrent.Task,W]">collect</a> <a title="&lt;$anon: scalaz.\/[W,O] =&gt; W&gt; extends scala.runtime.AbstractPartialFunction[scalaz.\/[W,O],W] with Serializable" id="scalaz.stream.async.mutable.WriterTopic.apply;$anon.subscribeW;$anonfun.isDefinedAt.defaultCase$" class="delimiter">{</a> case -\/<span class="delimiter">(</span><a title="W" id="scalaz.stream.async.mutable.WriterTopic.apply;$anon.subscribeW;$anonfun.isDefinedAt.w">w</a><span class="delimiter">)</span> =&gt; <a href="#scalaz.stream.async.mutable.WriterTopic.apply;$anon.subscribeW;$anonfun.isDefinedAt.w" title="W">w</a> <span class="delimiter">}</span>
      def <a title="=&gt; scalaz.stream.async.immutable.Signal[W]" id="scalaz.stream.async.mutable.WriterTopic.apply;$anon.signal">signal</a>: immutable.<a href="../immutable/Signal.scala.html#scalaz.stream.async.immutable;Signal" title="scalaz.stream.async.immutable.Signal[W]">Signal</a><span class="delimiter">[</span>W<span class="delimiter">]</span> = new <a title="&lt;$anon: scalaz.stream.async.immutable.Signal[W]&gt; extends AnyRef with scalaz.stream.async.immutable.Signal[W]" id="scalaz.stream.async.mutable.WriterTopic.apply;$anon.signal;$anon">immutable</a>.<a href="../immutable/Signal.scala.html#scalaz.stream.async.immutable;Signal" title="scalaz.stream.async.immutable.Signal[W]">Signal</a><span class="delimiter">[</span>W<span class="delimiter">]</span> <span class="delimiter">{</span>
        def <a title="=&gt; scalaz.stream.Process[scalaz.concurrent.Task,Unit]" id="scalaz.stream.async.mutable.WriterTopic.apply;$anon.signal;$anon.changes">changes</a>: <a href="../../Process.scala.html#scalaz.stream;Process" title="scalaz.stream.Process[scalaz.concurrent.Task,Unit]">Process</a><span class="delimiter">[</span>Task, Unit<span class="delimiter">]</span> = <a href="#scalaz.stream.async.mutable.WriterTopic.apply;$anon.signal;$anon.discrete" title="=&gt; scalaz.stream.Process[scalaz.concurrent.Task,W]">discrete</a>.<a href="../../Process.scala.html#scalaz.stream;Process.map" title="(f: W =&gt; Unit)scalaz.stream.Process[scalaz.concurrent.Task,Unit]">map</a><span class="delimiter">(</span><a title="W" id="scalaz.stream.async.mutable.WriterTopic.apply;$anon.signal;$anon.changes.$anonfun.x$9">_</a>=&gt;<span title="Unit" class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span>

        def <a title="=&gt; scalaz.stream.Process[scalaz.concurrent.Task,W]" id="scalaz.stream.async.mutable.WriterTopic.apply;$anon.signal;$anon.continuous">continuous</a>: <a href="../../Process.scala.html#scalaz.stream;Process" title="scalaz.stream.Process[scalaz.concurrent.Task,W]">Process</a><span class="delimiter">[</span>Task, W<span class="delimiter">]</span> =
         <a href="../../Process.scala.html#scalaz.stream.Process" title="scalaz.stream.Process.type">Process</a>.<a href="../../Process.scala.html#scalaz.stream.Process.repeatEval" title="(f: scalaz.concurrent.Task[Seq[W]])scalaz.stream.Process[scalaz.concurrent.Task,Seq[W]]">repeatEval</a><span class="delimiter">(</span><span title="scalaz.concurrent.Task.type">Task</span>.<span title="[A](register: (scalaz.\/[Throwable,A] =&gt; Unit) =&gt; Unit)scalaz.concurrent.Task[A]">async</span><span title="(register: (scalaz.\/[Throwable,Seq[W]] =&gt; Unit) =&gt; Unit)scalaz.concurrent.Task[Seq[W]]" class="delimiter">[</span><span title="Seq[W]">Seq</span><span class="delimiter">[</span>W<span class="delimiter">]</span><span class="delimiter">]</span><span class="delimiter">(</span><a title="scalaz.\/[Throwable,Seq[W]] =&gt; Unit" id="scalaz.stream.async.mutable.WriterTopic.apply;$anon.signal;$anon.continuous.$anonfun.cb">cb</a> =&gt; <a href="#scalaz.stream.async.mutable.WriterTopic.apply.actor" title="scalaz.concurrent.Actor[M]">actor</a> <span title="(a: M)Unit">!</span> <a href="#scalaz.stream.async.mutable.WriterTopic.apply;Get.readResolve" title="(cb: scalaz.\/[Throwable,Seq[W]] =&gt; Unit)Get">Get</a><span class="delimiter">(</span><a href="#scalaz.stream.async.mutable.WriterTopic.apply;$anon.signal;$anon.continuous.$anonfun.cb" title="scalaz.\/[Throwable,Seq[W]] =&gt; Unit">cb</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
         .<a href="../../Process.scala.html#scalaz.stream;Process.flatMap" title="(f: Seq[W] =&gt; scalaz.stream.Process[[x]scalaz.concurrent.Task[x],W])scalaz.stream.Process[[x]scalaz.concurrent.Task[x],W]">flatMap</a><span class="delimiter">(</span><a href="../../Process.scala.html#scalaz.stream.Process" title="scalaz.stream.Process.type">Process</a>.<a href="../../Process.scala.html#scalaz.stream.Process.emitAll" title="(os: Seq[W])scalaz.stream.Process0[W]">emitAll</a><span class="delimiter">)</span>

        def <a title="=&gt; scalaz.stream.Process[scalaz.concurrent.Task,W]" id="scalaz.stream.async.mutable.WriterTopic.apply;$anon.signal;$anon.discrete">discrete</a>: <a href="../../Process.scala.html#scalaz.stream;Process" title="scalaz.stream.Process[scalaz.concurrent.Task,W]">Process</a><span class="delimiter">[</span>Task, W<span class="delimiter">]</span> = <a href="#scalaz.stream.async.mutable.WriterTopic.apply;$anon.subscribeW" title="=&gt; scalaz.stream.Process[scalaz.concurrent.Task,W]">subscribeW</a>

        def <a title="=&gt; scalaz.stream.Process[scalaz.concurrent.Task,Boolean]" id="scalaz.stream.async.mutable.WriterTopic.apply;$anon.signal;$anon.changed">changed</a>: <a href="../../Process.scala.html#scalaz.stream;Process" title="scalaz.stream.Process[scalaz.concurrent.Task,Boolean]">Process</a><span class="delimiter">[</span>Task, Boolean<span class="delimiter">]</span> =
          <a href="#scalaz.stream.async.mutable.WriterTopic.apply;$anon.signal;$anon.discrete" title="=&gt; scalaz.stream.Process[scalaz.concurrent.Task,W]">discrete</a>.<a href="../../Process.scala.html#scalaz.stream;Process.map" title="(f: W =&gt; Boolean)scalaz.stream.Process[scalaz.concurrent.Task,Boolean]">map</a><a href="../../Process.scala.html#scalaz.stream.Process.SourceSyntax" title="(self: scalaz.stream.Process[scalaz.concurrent.Task,Boolean])scalaz.stream.Process.SourceSyntax[Boolean]" class="delimiter">(</a><a title="W" id="scalaz.stream.async.mutable.WriterTopic.apply;$anon.signal;$anon.changed.$anonfun.x$10">_</a> =&gt; true<span class="delimiter">)</span>
          .<a href="../../wye.scala.html#scalaz.stream;WyeOps.wye" title="(p2: scalaz.stream.Process[scalaz.concurrent.Task,Boolean])(y: scalaz.stream.Wye[Boolean,Boolean,Boolean])(implicit S: scalaz.concurrent.Strategy)scalaz.stream.Process[scalaz.concurrent.Task,Boolean]">wye</a><span class="delimiter">(</span><a href="../../Process.scala.html#scalaz.stream.Process" title="scalaz.stream.Process.type">Process</a>.<a href="../../Process.scala.html#scalaz.stream.Process.repeatEval" title="(f: scalaz.concurrent.Task[Boolean])scalaz.stream.Process[scalaz.concurrent.Task,Boolean]">repeatEval</a><span class="delimiter">(</span><span title="scalaz.concurrent.Task.type">Task</span>.<span title="(a: Boolean)scalaz.concurrent.Task[Boolean]">now</span><span class="delimiter">(</span>false<span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span><a href="#scalaz.stream.async.mutable.WriterTopic.apply.S" title="scalaz.concurrent.Strategy" class="delimiter">(</a><a href="../../wye.scala.html#scalaz.stream.wye" title="scalaz.stream.wye.type">wye</a>.<a href="../../wye.scala.html#scalaz.stream.wye.mergeHaltL" title="scalaz.stream.Wye[Boolean,Boolean,Boolean]">mergeHaltL</a><span class="delimiter">)</span>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

<span class="delimiter">}</span>

        </pre>
    </body>
</html>
