<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <title>scalaz-stream/scalaz/stream/async/mutable/Signal.scala</title>
        <script type="text/javascript" src="../../../../../jquery-all.js"></script>
        <script type="text/javascript" src="../../../../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../../../../style.css" title="Style"></link>
    </head>
    <body>
        <pre>
package scalaz.stream.async.mutable

import scalaz.stream.<a href="../../Cause.scala.html#scalaz.stream.Cause" title="scalaz.stream.Cause.type">Cause</a>._
import scalaz.\/
import scalaz.<span title="scalaz.\/.type">\/</span>._
import scalaz.concurrent._
import scalaz.stream.<a href="../../Process.scala.html#scalaz.stream.Process" title="scalaz.stream.Process.type">Process</a>._
import scalaz.stream._
import scalaz.stream.async.mutable
import java.util.concurrent.atomic.AtomicReference


<span class="comment">/**
 * A signal whose value may be set asynchronously. Provides continuous
 * and discrete streams for responding to changes to this value.
 */</span>
trait <a title="trait Signal[A] extends AnyRef with scalaz.stream.async.immutable.Signal[A]" id="scalaz.stream.async.mutable;Signal">Signal</a><span class="delimiter">[</span><a title="" id="scalaz.stream.async.mutable;Signal;A">A</a><span class="delimiter">]</span> extends scalaz.stream.async.immutable.<a href="../immutable/Signal.scala.html#scalaz.stream.async.immutable;Signal" title="scalaz.stream.async.immutable.Signal[A]">Signal</a><span class="delimiter">[</span>A<span class="delimiter">]</span> <span class="delimiter">{</span>


  <span class="comment">/**
   * Returns sink that can be used to set this signal
   */</span>
  def <a title="=&gt; scalaz.stream.Sink[scalaz.concurrent.Task,scalaz.stream.async.mutable.Signal.Msg[A]]" id="scalaz.stream.async.mutable;Signal.sink">sink</a>: <a href="../../Process.scala.html#scalaz.stream;Process" title="scalaz.stream.Sink[scalaz.concurrent.Task,scalaz.stream.async.mutable.Signal.Msg[A]]">Sink</a><span class="delimiter">[</span>Task, Signal.Msg<span class="delimiter">[</span>A<span class="delimiter">]</span><span class="delimiter">]</span>


  <span class="comment">/**
   * Asynchronously refreshes the value of the signal,
   * keep the value of this `Signal` the same, but notify any listeners.
   * If the `Signal` is not yet set, this is no-op
   */</span>
  def <a title="=&gt; scalaz.concurrent.Task[Unit]" id="scalaz.stream.async.mutable;Signal.refresh">refresh</a>: <span title="scalaz.concurrent.Task[Unit]">Task</span><span class="delimiter">[</span>Unit<span class="delimiter">]</span> = <a href="#scalaz.stream.async.mutable;Signal.compareAndSet" title="(f: Option[A] =&gt; Option[A])scalaz.concurrent.Task[Option[A]]">compareAndSet</a><span class="delimiter">(</span><a title="Option[A]" id="scalaz.stream.async.mutable;Signal.refresh.$anonfun.oa">oa</a>=&gt;<a href="#scalaz.stream.async.mutable;Signal.refresh.$anonfun.oa" title="Option[A]">oa</a><span class="delimiter">)</span>.<span title="(f: Option[A] =&gt; Unit)scalaz.concurrent.Task[Unit]">map</span><span class="delimiter">(</span><a title="Option[A]" id="scalaz.stream.async.mutable;Signal.refresh.$anonfun.x$1">_</a>=&gt;<span title="Unit" class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span>

  <span class="comment">/**
   * Asynchronously get the current value of this `Signal`
   */</span>
  def <a title="=&gt; scalaz.concurrent.Task[A]" id="scalaz.stream.async.mutable;Signal.get">get</a>: <span title="scalaz.concurrent.Task[A]">Task</span><span class="delimiter">[</span>A<span class="delimiter">]</span>


  <span class="comment">/**
   * Sets the value of this `Signal`.
   */</span>
  def <a title="(a: A)scalaz.concurrent.Task[Unit]" id="scalaz.stream.async.mutable;Signal.set">set</a><span class="delimiter">(</span><a title="A" id="scalaz.stream.async.mutable;Signal.set.a">a</a>: <a href="#scalaz.stream.async.mutable;Signal;A" title="A">A</a><span class="delimiter">)</span>: <span title="scalaz.concurrent.Task[Unit]">Task</span><span class="delimiter">[</span>Unit<span class="delimiter">]</span>

  <span class="comment">/**
   * Asynchronously sets the current value of this `Signal` and returns previous value of the `Signal`.
   * If this `Signal` has not been set yet, the Task will return None and value is set. If this `Signal`
   * is `finished` Task will fail with `End` exception. If this `Signal` is `failed` Task will fail
   * with `Signal` failure exception.
   *
   */</span>
  def <a title="(a: A)scalaz.concurrent.Task[Option[A]]" id="scalaz.stream.async.mutable;Signal.getAndSet">getAndSet</a><span class="delimiter">(</span><a title="A" id="scalaz.stream.async.mutable;Signal.getAndSet.a">a</a>:<a href="#scalaz.stream.async.mutable;Signal;A" title="A">A</a><span class="delimiter">)</span> : <span title="scalaz.concurrent.Task[Option[A]]">Task</span><span class="delimiter">[</span>Option<span class="delimiter">[</span>A<span class="delimiter">]</span><span class="delimiter">]</span>

  <span class="comment">/**
   * Asynchronously sets the current value of this `Signal` and returns new value os this `Signal`.
   * If this `Signal` has not been set yet, the Task will return None and value is set. If this `Signal`
   * is `finished` Task will fail with `End` exception. If this `Signal` is `failed` Task will fail
   * with `Signal` failure exception.
   *
   * Furthermore if `f` results in evaluating to None, this Task is no-op and will return current value of the
   * `Signal`.
   *
   */</span>
  def <a title="(f: Option[A] =&gt; Option[A])scalaz.concurrent.Task[Option[A]]" id="scalaz.stream.async.mutable;Signal.compareAndSet">compareAndSet</a><span class="delimiter">(</span><a title="Option[A] =&gt; Option[A]" id="scalaz.stream.async.mutable;Signal.compareAndSet.f">f</a>: Option<span class="delimiter">[</span>A<span class="delimiter">]</span> =&gt; Option<span class="delimiter">[</span>A<span class="delimiter">]</span><span class="delimiter">)</span> : <span title="scalaz.concurrent.Task[Option[A]]">Task</span><span class="delimiter">[</span>Option<span class="delimiter">[</span>A<span class="delimiter">]</span><span class="delimiter">]</span>

  <span class="comment">/**
   * Indicate that the value is no longer valid. Any attempts to `set` or `get` this
   * `Signal` after a `close` will fail with `Terminated(End)` exception. This `Signal` is `finished` from now on.
   *
   * Running this task once the `Signal` is `failed` or `finished` is no-op and this task will not fail.
   *
   */</span>
  def <a title="=&gt; scalaz.concurrent.Task[Unit]" id="scalaz.stream.async.mutable;Signal.close">close</a> : <span title="scalaz.concurrent.Task[Unit]">Task</span><span class="delimiter">[</span>Unit<span class="delimiter">]</span> = <a href="#scalaz.stream.async.mutable;Signal.failWithCause" title="(c: scalaz.stream.Cause)scalaz.concurrent.Task[Unit]">failWithCause</a><span class="delimiter">(</span><a href="../../Cause.scala.html#scalaz.stream.Cause.End" title="scalaz.stream.Cause.End.type">End</a><span class="delimiter">)</span>

  <span class="comment">/**
   * Indicate that the value is no longer valid. Any attempts to `set` or `get` this
   * `Signal` after a `close` will fail with `Terminated(Kill)` exception. This `Signal` is `finished` from now on.
   *
   * Running this task once the `Signal` is `failed` or `finished` is no-op and this task will not fail.
   *
   */</span>
  def <a title="=&gt; scalaz.concurrent.Task[Unit]" id="scalaz.stream.async.mutable;Signal.kill">kill</a>: <span title="scalaz.concurrent.Task[Unit]">Task</span><span class="delimiter">[</span>Unit<span class="delimiter">]</span> = <a href="#scalaz.stream.async.mutable;Signal.failWithCause" title="(c: scalaz.stream.Cause)scalaz.concurrent.Task[Unit]">failWithCause</a><span class="delimiter">(</span><a href="../../Cause.scala.html#scalaz.stream.Cause.Kill" title="scalaz.stream.Cause.Kill.type">Kill</a><span class="delimiter">)</span>

  <span class="comment">/**
   * Raise an asynchronous error for readers of this `Signal`. Any attempts to
   * `set` or `get` this `Ref` after the `fail` will result in task failing with `Terminated(Error(errr))`.
   * This `Signal` is `failed` from now on.
   *
   * Running this task once the `Signal` is `failed` or `finished` is no-op and this task will not fail.
   */</span>
  def <a title="(error: Throwable)scalaz.concurrent.Task[Unit]" id="scalaz.stream.async.mutable;Signal.fail">fail</a><span class="delimiter">(</span><a title="Throwable" id="scalaz.stream.async.mutable;Signal.fail.error">error</a>: <span title="Throwable">Throwable</span><span class="delimiter">)</span>: <span title="scalaz.concurrent.Task[Unit]">Task</span><span class="delimiter">[</span>Unit<span class="delimiter">]</span> = <a href="#scalaz.stream.async.mutable;Signal.failWithCause" title="(c: scalaz.stream.Cause)scalaz.concurrent.Task[Unit]">failWithCause</a><span class="delimiter">(</span><a href="../../Cause.scala.html#scalaz.stream.Cause;Error" title="(rsn: Throwable)scalaz.stream.Cause.Error">Error</a><span class="delimiter">(</span><a href="#scalaz.stream.async.mutable;Signal.fail.error" title="Throwable">error</a><span class="delimiter">)</span><span class="delimiter">)</span>



  private<span class="delimiter">[</span>stream<span class="delimiter">]</span> def <a title="(c: scalaz.stream.Cause)scalaz.concurrent.Task[Unit]" id="scalaz.stream.async.mutable;Signal.failWithCause">failWithCause</a><span class="delimiter">(</span><a title="scalaz.stream.Cause" id="scalaz.stream.async.mutable;Signal.failWithCause.c">c</a>:<a href="../../Cause.scala.html#scalaz.stream;Cause" title="scalaz.stream.Cause">Cause</a><span class="delimiter">)</span>:<span title="scalaz.concurrent.Task[Unit]">Task</span><span class="delimiter">[</span>Unit<span class="delimiter">]</span>


<span class="delimiter">}</span>


object <a title="scalaz.stream.async.mutable.Signal.type" id="scalaz.stream.async.mutable.Signal">Signal</a> <a href="#scalaz.stream.async.mutable.Signal" title="scalaz.stream.async.mutable.Signal.type" class="delimiter">{</a>

  sealed trait <a title="trait Msg[+A] extends AnyRef" id="scalaz.stream.async.mutable.Signal;Msg">Msg</a><span class="delimiter">[</span>+<a title="" id="scalaz.stream.async.mutable.Signal;Msg;A">A</a><span class="delimiter">]</span>

  <span class="comment">/**
   * Sets the signal to given value
   */</span>
  case class <a href="#scalaz.stream.async.mutable.Signal;Set.productElement.x$1" title="class Set[A] extends AnyRef with scalaz.stream.async.mutable.Signal.Msg[A] with Product with Serializable" id="scalaz.stream.async.mutable.Signal.Set.readResolve">Set</a><span class="delimiter">[</span><a title="" id="scalaz.stream.async.mutable.Signal;Set;A">A</a><span class="delimiter">]</span><span title="Product" class="delimiter">(</span><a title="A" id="scalaz.stream.async.mutable.Signal;Set.a">a</a>:<a href="#scalaz.stream.async.mutable.Signal;Set;A" title="A">A</a><span class="delimiter">)</span> extends <a href="#scalaz.stream.async.mutable.Signal;Msg" title="scalaz.stream.async.mutable.Signal.Msg[A]">Msg</a><span class="delimiter">[</span>A<span class="delimiter">]</span>

  <span class="comment">/**
   * Conditionally sets signal to given value. Acts similarly as `Signal.compareAndSet`
   */</span>
  case class <a href="#scalaz.stream.async.mutable.Signal;CompareAndSet.productElement.x$1" title="class CompareAndSet[A] extends AnyRef with scalaz.stream.async.mutable.Signal.Msg[A] with Product with Serializable" id="scalaz.stream.async.mutable.Signal.CompareAndSet.readResolve">CompareAndSet</a><span class="delimiter">[</span><a title="" id="scalaz.stream.async.mutable.Signal;CompareAndSet;A">A</a><span class="delimiter">]</span><span title="Product" class="delimiter">(</span><a title="Option[A] =&gt; Option[A]" id="scalaz.stream.async.mutable.Signal;CompareAndSet.f">f</a>:Option<span class="delimiter">[</span>A<span class="delimiter">]</span> =&gt; Option<span class="delimiter">[</span>A<span class="delimiter">]</span><span class="delimiter">)</span> extends <a href="#scalaz.stream.async.mutable.Signal;Msg" title="scalaz.stream.async.mutable.Signal.Msg[A]">Msg</a><span class="delimiter">[</span>A<span class="delimiter">]</span>



  protected<span class="delimiter">[</span>async<span class="delimiter">]</span> def <a title="[A]=&gt; scalaz.stream.Writer1[A,scalaz.stream.async.mutable.Signal.Msg[A],Nothing]" id="scalaz.stream.async.mutable.Signal.signalWriter">signalWriter</a><span class="delimiter">[</span><a title="" id="scalaz.stream.async.mutable.Signal.signalWriter;A">A</a><span class="delimiter">]</span>: <a href="../../Process.scala.html#scalaz.stream;Process" title="scalaz.stream.Writer1[A,scalaz.stream.async.mutable.Signal.Msg[A],Nothing]">Writer1</a><span class="delimiter">[</span>A,Msg<span class="delimiter">[</span>A<span class="delimiter">]</span>,Nothing<span class="delimiter">]</span> = <span class="delimiter">{</span>
    def <a title="(oa: Option[A])scalaz.stream.Writer1[A,scalaz.stream.async.mutable.Signal.Msg[A],Nothing]" id="scalaz.stream.async.mutable.Signal.signalWriter.go">go</a><span class="delimiter">(</span><a title="Option[A]" id="scalaz.stream.async.mutable.Signal.signalWriter.go.oa">oa</a>:<span title="Option[A]">Option</span><span class="delimiter">[</span>A<span class="delimiter">]</span><span class="delimiter">)</span> : <a href="../../Process.scala.html#scalaz.stream;Process" title="scalaz.stream.Writer1[A,scalaz.stream.async.mutable.Signal.Msg[A],Nothing]">Writer1</a><span class="delimiter">[</span>A,Msg<span class="delimiter">[</span>A<span class="delimiter">]</span>,Nothing<span class="delimiter">]</span> =
    <a href="../../Process.scala.html#scalaz.stream.Process.receive1" title="[I, O](rcv: I =&gt; scalaz.stream.Process1[I,O])scalaz.stream.Process1[I,O]">receive1</a><span title="(rcv: scalaz.stream.async.mutable.Signal.Msg[A] =&gt; scalaz.stream.Process1[scalaz.stream.async.mutable.Signal.Msg[A],scalaz.\/[A,Nothing]])scalaz.stream.Process1[scalaz.stream.async.mutable.Signal.Msg[A],scalaz.\/[A,Nothing]]" class="delimiter">[</span><a href="#scalaz.stream.async.mutable.Signal;Msg" title="scalaz.stream.async.mutable.Signal.Msg[A]">Msg</a><span class="delimiter">[</span>A<span class="delimiter">]</span>, A <span title="scalaz.\/[A,Nothing]">\/</span> Nothing<span class="delimiter">]</span> <a href="#scalaz.stream.async.mutable.Signal.signalWriter.go.$anonfun.x0$1" title="scalaz.stream.Process1[scalaz.stream.async.mutable.Signal.Msg[A],scalaz.\/[A,Nothing]]" class="delimiter">{</a>
      case Set<span class="delimiter">(</span><span title="A">a</span><span class="delimiter">)</span> =&gt; <a href="../../Process.scala.html#scalaz.stream.Process.tell" title="(s: A)scalaz.stream.Process0[scalaz.\/[A,Nothing]]">tell</a><span class="delimiter">(</span><span title="A">a</span><span class="delimiter">)</span> <a href="../../Process.scala.html#scalaz.stream;Process.++" title="(p2: =&gt; scalaz.stream.Process[scalaz.stream.Process.Env[scalaz.stream.async.mutable.Signal.Msg[A],Any]#Is,scalaz.\/[A,Nothing]])scalaz.stream.Process[scalaz.stream.Process.Env[scalaz.stream.async.mutable.Signal.Msg[A],Any]#Is,scalaz.\/[A,Nothing]]">++</a> <a href="#scalaz.stream.async.mutable.Signal.signalWriter.go" title="(oa: Option[A])scalaz.stream.Writer1[A,scalaz.stream.async.mutable.Signal.Msg[A],Nothing]">go</a><span class="delimiter">(</span><span title="(x: A)Some[A]">Some</span><span class="delimiter">(</span><span title="A">a</span><span class="delimiter">)</span><span class="delimiter">)</span>
      case CompareAndSet<span class="delimiter">(</span><a title="Option[?A2] =&gt; Option[?A2]" id="scalaz.stream.async.mutable.Signal.signalWriter.go.$anonfun.f">f</a>:<span class="delimiter">(</span>Option<span class="delimiter">[</span>A<span class="delimiter">]</span> =&gt; Option<span class="delimiter">[</span>A<span class="delimiter">]</span><span class="delimiter">)</span>@<span title="Option[A] =&gt; Option[A] @unchecked">unchecked</span><span class="delimiter">)</span> =&gt;
        val <a title="Option[?A2]" id="scalaz.stream.async.mutable.Signal.signalWriter.go.$anonfun.next">next</a> = <a href="#scalaz.stream.async.mutable.Signal.signalWriter.go.$anonfun.f" title="(v1: Option[?A2])Option[?A2]">f</a><span class="delimiter">(</span><a href="#scalaz.stream.async.mutable.Signal.signalWriter.go.oa" title="Option[A]">oa</a><span class="delimiter">)</span>
        <a href="#scalaz.stream.async.mutable.Signal.signalWriter.go.$anonfun.next" title="Option[?A2]">next</a> match <span class="delimiter">{</span>
          case Some<span class="delimiter">(</span><span title="?A2">a</span><span class="delimiter">)</span> =&gt; <a href="../../Process.scala.html#scalaz.stream.Process.tell" title="(s: ?A2)scalaz.stream.Process0[scalaz.\/[?A2,Nothing]]">tell</a><span class="delimiter">(</span><span title="?A2">a</span><span class="delimiter">)</span> <a href="../../Process.scala.html#scalaz.stream;Process.++" title="(p2: =&gt; scalaz.stream.Process[scalaz.stream.Process.Env[scalaz.stream.async.mutable.Signal.Msg[A],Any]#Is,scalaz.\/[?A2,Nothing]])scalaz.stream.Process[scalaz.stream.Process.Env[scalaz.stream.async.mutable.Signal.Msg[A],Any]#Is,scalaz.\/[?A2,Nothing]]">++</a> <a href="#scalaz.stream.async.mutable.Signal.signalWriter.go" title="(oa: Option[A])scalaz.stream.Writer1[A,scalaz.stream.async.mutable.Signal.Msg[A],Nothing]">go</a><span class="delimiter">(</span><span title="(x: ?A2)Some[?A2]">Some</span><span class="delimiter">(</span><span title="?A2">a</span><span class="delimiter">)</span><span class="delimiter">)</span>
          case <span title="None.type">None</span> =&gt; <a href="#scalaz.stream.async.mutable.Signal.signalWriter.go" title="(oa: Option[A])scalaz.stream.Writer1[A,scalaz.stream.async.mutable.Signal.Msg[A],Nothing]">go</a><span class="delimiter">(</span><a href="#scalaz.stream.async.mutable.Signal.signalWriter.go.oa" title="Option[A]">oa</a><span class="delimiter">)</span>
        <span class="delimiter">}</span>
    <span class="delimiter">}</span>
    <a href="#scalaz.stream.async.mutable.Signal.signalWriter.go" title="(oa: Option[A])scalaz.stream.Writer1[A,scalaz.stream.async.mutable.Signal.Msg[A],Nothing]">go</a><span class="delimiter">(</span><span title="None.type">None</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>


  protected<span class="delimiter">[</span>async<span class="delimiter">]</span> def <a title="[A](source: scalaz.stream.Process[scalaz.concurrent.Task,scalaz.stream.async.mutable.Signal.Msg[A]], haltOnSource: Boolean)(implicit S: scalaz.concurrent.Strategy)scalaz.stream.async.mutable.Signal[A]" id="scalaz.stream.async.mutable.Signal.apply">apply</a><span class="delimiter">[</span><a title="" id="scalaz.stream.async.mutable.Signal.apply;A">A</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="scalaz.stream.Process[scalaz.concurrent.Task,scalaz.stream.async.mutable.Signal.Msg[A]]" id="scalaz.stream.async.mutable.Signal.apply.source">source</a>:<a href="../../Process.scala.html#scalaz.stream;Process" title="scalaz.stream.Process[scalaz.concurrent.Task,scalaz.stream.async.mutable.Signal.Msg[A]]">Process</a><span class="delimiter">[</span>Task,Msg<span class="delimiter">[</span>A<span class="delimiter">]</span><span class="delimiter">]</span>, <a title="Boolean" id="scalaz.stream.async.mutable.Signal.apply.haltOnSource">haltOnSource</a> : <span title="Boolean">Boolean</span><span class="delimiter">)</span><span class="delimiter">(</span>implicit <a title="scalaz.concurrent.Strategy" id="scalaz.stream.async.mutable.Signal.apply.S">S</a>: <span title="scalaz.concurrent.Strategy">Strategy</span><span class="delimiter">)</span> : <a href="#scalaz.stream.async.mutable;Signal" title="scalaz.stream.async.mutable.Signal[A]">Signal</a><span class="delimiter">[</span>A<span class="delimiter">]</span> = <span class="delimiter">{</span>
    val <a title="scalaz.stream.async.mutable.WriterTopic[A,scalaz.stream.async.mutable.Signal.Msg[A],Nothing]" id="scalaz.stream.async.mutable.Signal.apply.topic">topic</a> = <a href="WriterTopic.scala.html#scalaz.stream.async.mutable.WriterTopic" title="scalaz.stream.async.mutable.WriterTopic.type">WriterTopic</a>.<a href="WriterTopic.scala.html#scalaz.stream.async.mutable.WriterTopic.apply" title="[W, I, O](writer: scalaz.stream.Writer1[W,I,O])(source: scalaz.stream.Process[scalaz.concurrent.Task,I], haltOnSource: Boolean)(implicit S: scalaz.concurrent.Strategy)scalaz.stream.async.mutable.WriterTopic[W,I,O]">apply</a><span title="(writer: scalaz.stream.Writer1[A,scalaz.stream.async.mutable.Signal.Msg[A],Nothing])(source: scalaz.stream.Process[scalaz.concurrent.Task,scalaz.stream.async.mutable.Signal.Msg[A]], haltOnSource: Boolean)(implicit S: scalaz.concurrent.Strategy)scalaz.stream.async.mutable.WriterTopic[A,scalaz.stream.async.mutable.Signal.Msg[A],Nothing]" class="delimiter">[</span><a href="#scalaz.stream.async.mutable.Signal.apply;A" title="A">A</a>,<a href="#scalaz.stream.async.mutable.Signal;Msg" title="scalaz.stream.async.mutable.Signal.Msg[A]">Msg</a><span class="delimiter">[</span>A<span class="delimiter">]</span>,<span title="Nothing">Nothing</span><span class="delimiter">]</span><span class="delimiter">(</span><a href="#scalaz.stream.async.mutable.Signal.signalWriter" title="scalaz.stream.Writer1[A,scalaz.stream.async.mutable.Signal.Msg[A],Nothing]">signalWriter</a><span class="delimiter">)</span><a href="#scalaz.stream.async.mutable.Signal.apply.S" title="scalaz.concurrent.Strategy" class="delimiter">(</a><a href="#scalaz.stream.async.mutable.Signal.apply.source" title="scalaz.stream.Process[scalaz.concurrent.Task,scalaz.stream.async.mutable.Signal.Msg[A]]">source</a>, <a href="#scalaz.stream.async.mutable.Signal.apply.haltOnSource" title="Boolean">haltOnSource</a><span class="delimiter">)</span>
    new <a title="&lt;$anon: scalaz.stream.async.mutable.Signal[A]&gt; extends AnyRef with scalaz.stream.async.mutable.Signal[A]" id="scalaz.stream.async.mutable.Signal.apply;$anon">mutable</a>.<a href="#scalaz.stream.async.mutable;Signal" title="scalaz.stream.async.mutable.Signal[A]">Signal</a><span class="delimiter">[</span>A<span class="delimiter">]</span> <span class="delimiter">{</span>
      def <a title="=&gt; scalaz.stream.Process[scalaz.concurrent.Task,Boolean]" id="scalaz.stream.async.mutable.Signal.apply;$anon.changed">changed</a>: <a href="../../Process.scala.html#scalaz.stream;Process" title="scalaz.stream.Process[scalaz.concurrent.Task,Boolean]">Process</a><span class="delimiter">[</span>Task, Boolean<span class="delimiter">]</span> = <a href="#scalaz.stream.async.mutable.Signal.apply.topic" title="scalaz.stream.async.mutable.WriterTopic[A,scalaz.stream.async.mutable.Signal.Msg[A],Nothing]">topic</a>.<a href="WriterTopic.scala.html#scalaz.stream.async.mutable;WriterTopic.signal" title="=&gt; scalaz.stream.async.immutable.Signal[A]">signal</a>.<a href="../immutable/Signal.scala.html#scalaz.stream.async.immutable;Signal.changed" title="=&gt; scalaz.stream.Process[scalaz.concurrent.Task,Boolean]">changed</a>
      def <a title="=&gt; scalaz.stream.Process[scalaz.concurrent.Task,A]" id="scalaz.stream.async.mutable.Signal.apply;$anon.discrete">discrete</a>: <a href="../../Process.scala.html#scalaz.stream;Process" title="scalaz.stream.Process[scalaz.concurrent.Task,A]">Process</a><span class="delimiter">[</span>Task, A<span class="delimiter">]</span> = <a href="#scalaz.stream.async.mutable.Signal.apply.topic" title="scalaz.stream.async.mutable.WriterTopic[A,scalaz.stream.async.mutable.Signal.Msg[A],Nothing]">topic</a>.<a href="WriterTopic.scala.html#scalaz.stream.async.mutable;WriterTopic.signal" title="=&gt; scalaz.stream.async.immutable.Signal[A]">signal</a>.<a href="../immutable/Signal.scala.html#scalaz.stream.async.immutable;Signal.discrete" title="=&gt; scalaz.stream.Process[scalaz.concurrent.Task,A]">discrete</a>
      def <a title="=&gt; scalaz.stream.Process[scalaz.concurrent.Task,A]" id="scalaz.stream.async.mutable.Signal.apply;$anon.continuous">continuous</a>: <a href="../../Process.scala.html#scalaz.stream;Process" title="scalaz.stream.Process[scalaz.concurrent.Task,A]">Process</a><span class="delimiter">[</span>Task, A<span class="delimiter">]</span> = <a href="#scalaz.stream.async.mutable.Signal.apply.topic" title="scalaz.stream.async.mutable.WriterTopic[A,scalaz.stream.async.mutable.Signal.Msg[A],Nothing]">topic</a>.<a href="WriterTopic.scala.html#scalaz.stream.async.mutable;WriterTopic.signal" title="=&gt; scalaz.stream.async.immutable.Signal[A]">signal</a>.<a href="../immutable/Signal.scala.html#scalaz.stream.async.immutable;Signal.continuous" title="=&gt; scalaz.stream.Process[scalaz.concurrent.Task,A]">continuous</a>
      def <a title="=&gt; scalaz.stream.Process[scalaz.concurrent.Task,Unit]" id="scalaz.stream.async.mutable.Signal.apply;$anon.changes">changes</a>: <a href="../../Process.scala.html#scalaz.stream;Process" title="scalaz.stream.Process[scalaz.concurrent.Task,Unit]">Process</a><span class="delimiter">[</span>Task, Unit<span class="delimiter">]</span> = <a href="#scalaz.stream.async.mutable.Signal.apply.topic" title="scalaz.stream.async.mutable.WriterTopic[A,scalaz.stream.async.mutable.Signal.Msg[A],Nothing]">topic</a>.<a href="WriterTopic.scala.html#scalaz.stream.async.mutable;WriterTopic.signal" title="=&gt; scalaz.stream.async.immutable.Signal[A]">signal</a>.<a href="../immutable/Signal.scala.html#scalaz.stream.async.immutable;Signal.changes" title="=&gt; scalaz.stream.Process[scalaz.concurrent.Task,Unit]">changes</a>
      def <a title="=&gt; scalaz.stream.Sink[scalaz.concurrent.Task,scalaz.stream.async.mutable.Signal.Msg[A]]" id="scalaz.stream.async.mutable.Signal.apply;$anon.sink">sink</a>: <a href="../../Process.scala.html#scalaz.stream;Process" title="scalaz.stream.Sink[scalaz.concurrent.Task,scalaz.stream.async.mutable.Signal.Msg[A]]">Sink</a><span class="delimiter">[</span>Task, Msg<span class="delimiter">[</span>A<span class="delimiter">]</span><span class="delimiter">]</span> = <a href="#scalaz.stream.async.mutable.Signal.apply.topic" title="scalaz.stream.async.mutable.WriterTopic[A,scalaz.stream.async.mutable.Signal.Msg[A],Nothing]">topic</a>.<a href="WriterTopic.scala.html#scalaz.stream.async.mutable;WriterTopic.publish" title="=&gt; scalaz.stream.Sink[scalaz.concurrent.Task,scalaz.stream.async.mutable.Signal.Msg[A]]">publish</a>
      def <a title="=&gt; scalaz.concurrent.Task[A]" id="scalaz.stream.async.mutable.Signal.apply;$anon.get">get</a>: <span title="scalaz.concurrent.Task[A]">Task</span><span class="delimiter">[</span>A<span class="delimiter">]</span> = <a href="#scalaz.stream.async.mutable.Signal.apply;$anon.discrete" title="=&gt; scalaz.stream.Process[scalaz.concurrent.Task,A]">discrete</a>.<a href="../../process1.scala.html#scalaz.stream;Process1Ops.take" title="(n: Int)scalaz.stream.Process[scalaz.concurrent.Task,A]">take</a><span class="delimiter">(</span><span title="Int(1)" class="int">1</span><span class="delimiter">)</span>.<a href="../../Process.scala.html#scalaz.stream;Process.runLast" title="(implicit F: scalaz.Monad[[x]scalaz.concurrent.Task[x]], implicit C: scalaz.Catchable[[x]scalaz.concurrent.Task[x]])scalaz.concurrent.Task[Option[A]]">runLast</a>.<span title="(f: Option[A] =&gt; scalaz.concurrent.Task[A])scalaz.concurrent.Task[A]">flatMap</span> <a href="#scalaz.stream.async.mutable.Signal.apply;$anon.get.$anonfun.x0$2" title="scalaz.concurrent.Task[A]" class="delimiter">{</a>
        case Some<span class="delimiter">(</span><a title="A" id="scalaz.stream.async.mutable.Signal.apply;$anon.get.$anonfun.a">a</a><span class="delimiter">)</span> =&gt; <span title="scalaz.concurrent.Task.type">Task</span>.<span title="(a: A)scalaz.concurrent.Task[A]">now</span><span class="delimiter">(</span><a href="#scalaz.stream.async.mutable.Signal.apply;$anon.get.$anonfun.a" title="A">a</a><span class="delimiter">)</span>
        case <span title="None.type">None</span>    =&gt; <span title="scalaz.concurrent.Task.type">Task</span>.<span title="(e: Throwable)scalaz.concurrent.Task[Nothing]">fail</span><span class="delimiter">(</span><a href="../../Cause.scala.html#scalaz.stream.Cause;Terminated" title="(cause: scalaz.stream.Cause)scalaz.stream.Cause.Terminated">Terminated</a><span class="delimiter">(</span><a href="../../Cause.scala.html#scalaz.stream.Cause.End" title="scalaz.stream.Cause.End.type">End</a><span class="delimiter">)</span><span class="delimiter">)</span>
      <span class="delimiter">}</span>
      def <a title="(a: A)scalaz.concurrent.Task[Option[A]]" id="scalaz.stream.async.mutable.Signal.apply;$anon.getAndSet">getAndSet</a><span class="delimiter">(</span><a title="A" id="scalaz.stream.async.mutable.Signal.apply;$anon.getAndSet.a">a</a>: <a href="#scalaz.stream.async.mutable.Signal.apply;A" title="A">A</a><span class="delimiter">)</span>: <span title="scalaz.concurrent.Task[Option[A]]">Task</span><span class="delimiter">[</span>Option<span class="delimiter">[</span>A<span class="delimiter">]</span><span class="delimiter">]</span> = <span class="delimiter">{</span>
        for <span class="delimiter">{</span>
          <a title="java.util.concurrent.atomic.AtomicReference[Option[A]]" id="scalaz.stream.async.mutable.Signal.apply;$anon.getAndSet.$anonfun.ref">ref</a> &lt;- <span title="scalaz.concurrent.Task.type">Task</span>.<span title="(a: =&gt; java.util.concurrent.atomic.AtomicReference[Option[A]])scalaz.concurrent.Task[java.util.concurrent.atomic.AtomicReference[Option[A]]]">delay</span><span title="(f: java.util.concurrent.atomic.AtomicReference[Option[A]] =&gt; scalaz.concurrent.Task[Option[A]])scalaz.concurrent.Task[Option[A]]" class="delimiter">(</span>new <span title="java.util.concurrent.atomic.AtomicReference[Option[A]]">AtomicReference</span><span class="delimiter">[</span>Option<span class="delimiter">[</span>A<span class="delimiter">]</span><span class="delimiter">]</span><span class="delimiter">(</span><span title="None.type">None</span><span class="delimiter">)</span><span class="delimiter">)</span>
          <a title="Unit" id="scalaz.stream.async.mutable.Signal.apply;$anon.getAndSet.$anonfun.$anonfun._">_</a> &lt;- <a href="#scalaz.stream.async.mutable.Signal.apply.topic" title="scalaz.stream.async.mutable.WriterTopic[A,scalaz.stream.async.mutable.Signal.Msg[A],Nothing]">topic</a>.<a href="WriterTopic.scala.html#scalaz.stream.async.mutable;WriterTopic.publishOne" title="(i: scalaz.stream.async.mutable.Signal.Msg[A])scalaz.concurrent.Task[Unit]">publishOne</a><span title="(f: Unit =&gt; Option[A])scalaz.concurrent.Task[Option[A]]" class="delimiter">(</span><a href="#scalaz.stream.async.mutable.Signal.CompareAndSet.readResolve" title="[A](f: Option[A] =&gt; Option[A])scalaz.stream.async.mutable.Signal.CompareAndSet[A]">CompareAndSet</a><span title="(f: Option[A] =&gt; Option[A])scalaz.stream.async.mutable.Signal.CompareAndSet[A]" class="delimiter">[</span><a href="#scalaz.stream.async.mutable.Signal.apply;A" title="A">A</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="Option[A]" id="scalaz.stream.async.mutable.Signal.apply;$anon.getAndSet.$anonfun.$anonfun.curr">curr</a> =&gt; <a href="#scalaz.stream.async.mutable.Signal.apply;$anon.getAndSet.$anonfun.$anonfun.curr" title="Option[A]">curr</a>.<span title="(f: A =&gt; A)Option[A]">map</span><span class="delimiter">{</span><a title="A" id="scalaz.stream.async.mutable.Signal.apply;$anon.getAndSet.$anonfun.$anonfun.$anonfun.ca">ca</a> =&gt; <a href="#scalaz.stream.async.mutable.Signal.apply;$anon.getAndSet.$anonfun.ref" title="java.util.concurrent.atomic.AtomicReference[Option[A]]">ref</a>.<span title="(x$1: Option[A])Unit">set</span><span class="delimiter">(</span><span title="(x: A)Some[A]">Some</span><span class="delimiter">(</span><a href="#scalaz.stream.async.mutable.Signal.apply;$anon.getAndSet.$anonfun.$anonfun.$anonfun.ca" title="A">ca</a><span class="delimiter">)</span><span class="delimiter">)</span>; <a href="#scalaz.stream.async.mutable.Signal.apply;$anon.getAndSet.a" title="A">a</a><span class="delimiter">}</span><span class="delimiter">)</span><span class="delimiter">)</span>
        <span class="delimiter">}</span> yield <a href="#scalaz.stream.async.mutable.Signal.apply;$anon.getAndSet.$anonfun.ref" title="java.util.concurrent.atomic.AtomicReference[Option[A]]">ref</a>.<span title="()Option[A]">get</span><span class="delimiter">(</span><span class="delimiter">)</span>
      <span class="delimiter">}</span>
      def <a title="(a: A)scalaz.concurrent.Task[Unit]" id="scalaz.stream.async.mutable.Signal.apply;$anon.set">set</a><span class="delimiter">(</span><a title="A" id="scalaz.stream.async.mutable.Signal.apply;$anon.set.a">a</a>: <a href="#scalaz.stream.async.mutable.Signal.apply;A" title="A">A</a><span class="delimiter">)</span>: <span title="scalaz.concurrent.Task[Unit]">Task</span><span class="delimiter">[</span>Unit<span class="delimiter">]</span> = <a href="#scalaz.stream.async.mutable.Signal.apply.topic" title="scalaz.stream.async.mutable.WriterTopic[A,scalaz.stream.async.mutable.Signal.Msg[A],Nothing]">topic</a>.<a href="WriterTopic.scala.html#scalaz.stream.async.mutable;WriterTopic.publishOne" title="(i: scalaz.stream.async.mutable.Signal.Msg[A])scalaz.concurrent.Task[Unit]">publishOne</a><span class="delimiter">(</span><a href="#scalaz.stream.async.mutable.Signal.Set.readResolve" title="(a: A)scalaz.stream.async.mutable.Signal.Set[A]">Set</a><span class="delimiter">(</span><a href="#scalaz.stream.async.mutable.Signal.apply;$anon.set.a" title="A">a</a><span class="delimiter">)</span><span class="delimiter">)</span>
      def <a title="(f: Option[A] =&gt; Option[A])scalaz.concurrent.Task[Option[A]]" id="scalaz.stream.async.mutable.Signal.apply;$anon.compareAndSet">compareAndSet</a><span class="delimiter">(</span><a title="Option[A] =&gt; Option[A]" id="scalaz.stream.async.mutable.Signal.apply;$anon.compareAndSet.f">f</a>: <span class="delimiter">(</span>Option<span class="delimiter">[</span>A<span class="delimiter">]</span><span class="delimiter">)</span> =&gt; Option<span class="delimiter">[</span>A<span class="delimiter">]</span><span class="delimiter">)</span>: <span title="scalaz.concurrent.Task[Option[A]]">Task</span><span class="delimiter">[</span>Option<span class="delimiter">[</span>A<span class="delimiter">]</span><span class="delimiter">]</span> = <span class="delimiter">{</span>
        for <span class="delimiter">{</span>
          <a title="java.util.concurrent.atomic.AtomicReference[Option[A]]" id="scalaz.stream.async.mutable.Signal.apply;$anon.compareAndSet.$anonfun.ref">ref</a> &lt;- <span title="scalaz.concurrent.Task.type">Task</span>.<span title="(a: =&gt; java.util.concurrent.atomic.AtomicReference[Option[A]])scalaz.concurrent.Task[java.util.concurrent.atomic.AtomicReference[Option[A]]]">delay</span><span title="(f: java.util.concurrent.atomic.AtomicReference[Option[A]] =&gt; scalaz.concurrent.Task[Option[A]])scalaz.concurrent.Task[Option[A]]" class="delimiter">(</span>new <span title="java.util.concurrent.atomic.AtomicReference[Option[A]]">AtomicReference</span><span class="delimiter">[</span>Option<span class="delimiter">[</span>A<span class="delimiter">]</span><span class="delimiter">]</span><span class="delimiter">(</span><span title="None.type">None</span><span class="delimiter">)</span><span class="delimiter">)</span>
          <a title="Unit" id="scalaz.stream.async.mutable.Signal.apply;$anon.compareAndSet.$anonfun.$anonfun._">_</a> &lt;- <a href="#scalaz.stream.async.mutable.Signal.apply.topic" title="scalaz.stream.async.mutable.WriterTopic[A,scalaz.stream.async.mutable.Signal.Msg[A],Nothing]">topic</a>.<a href="WriterTopic.scala.html#scalaz.stream.async.mutable;WriterTopic.publishOne" title="(i: scalaz.stream.async.mutable.Signal.Msg[A])scalaz.concurrent.Task[Unit]">publishOne</a><span title="(f: Unit =&gt; Option[A])scalaz.concurrent.Task[Option[A]]" class="delimiter">(</span><a href="#scalaz.stream.async.mutable.Signal.CompareAndSet.readResolve" title="[A](f: Option[A] =&gt; Option[A])scalaz.stream.async.mutable.Signal.CompareAndSet[A]">CompareAndSet</a><span title="(f: Option[A] =&gt; Option[A])scalaz.stream.async.mutable.Signal.CompareAndSet[A]" class="delimiter">[</span><a href="#scalaz.stream.async.mutable.Signal.apply;A" title="A">A</a><span class="delimiter">]</span><span class="delimiter">(</span><span class="delimiter">{</span> <a title="Option[A]" id="scalaz.stream.async.mutable.Signal.apply;$anon.compareAndSet.$anonfun.$anonfun.curr">curr</a> =&gt;
            val <a title="Option[A]" id="scalaz.stream.async.mutable.Signal.apply;$anon.compareAndSet.$anonfun.$anonfun.r">r</a> = <a href="#scalaz.stream.async.mutable.Signal.apply;$anon.compareAndSet.f" title="(v1: Option[A])Option[A]">f</a><span class="delimiter">(</span><a href="#scalaz.stream.async.mutable.Signal.apply;$anon.compareAndSet.$anonfun.$anonfun.curr" title="Option[A]">curr</a><span class="delimiter">)</span>
            <a href="#scalaz.stream.async.mutable.Signal.apply;$anon.compareAndSet.$anonfun.ref" title="java.util.concurrent.atomic.AtomicReference[Option[A]]">ref</a>.<span title="(x$1: Option[A])Unit">set</span><span class="delimiter">(</span><a href="#scalaz.stream.async.mutable.Signal.apply;$anon.compareAndSet.$anonfun.$anonfun.r" title="Option[A]">r</a> <span title="(alternative: =&gt; Option[A])Option[A]">orElse</span> <a href="#scalaz.stream.async.mutable.Signal.apply;$anon.compareAndSet.$anonfun.$anonfun.curr" title="Option[A]">curr</a><span class="delimiter">)</span>
            <a href="#scalaz.stream.async.mutable.Signal.apply;$anon.compareAndSet.$anonfun.$anonfun.r" title="Option[A]">r</a>
          <span class="delimiter">}</span><span class="delimiter">)</span><span class="delimiter">)</span>
        <span class="delimiter">}</span> yield <a href="#scalaz.stream.async.mutable.Signal.apply;$anon.compareAndSet.$anonfun.ref" title="java.util.concurrent.atomic.AtomicReference[Option[A]]">ref</a>.<span title="()Option[A]">get</span><span class="delimiter">(</span><span class="delimiter">)</span>
      <span class="delimiter">}</span>
      private<span class="delimiter">[</span>stream<span class="delimiter">]</span> def <a title="(c: scalaz.stream.Cause)scalaz.concurrent.Task[Unit]" id="scalaz.stream.async.mutable.Signal.apply;$anon.failWithCause">failWithCause</a><span class="delimiter">(</span><a title="scalaz.stream.Cause" id="scalaz.stream.async.mutable.Signal.apply;$anon.failWithCause.c">c</a>: <a href="../../Cause.scala.html#scalaz.stream;Cause" title="scalaz.stream.Cause">Cause</a><span class="delimiter">)</span>: <span title="scalaz.concurrent.Task[Unit]">Task</span><span class="delimiter">[</span>Unit<span class="delimiter">]</span> = <a href="#scalaz.stream.async.mutable.Signal.apply.topic" title="scalaz.stream.async.mutable.WriterTopic[A,scalaz.stream.async.mutable.Signal.Msg[A],Nothing]">topic</a>.<a href="WriterTopic.scala.html#scalaz.stream.async.mutable;WriterTopic.failWithCause" title="(c: scalaz.stream.Cause)scalaz.concurrent.Task[Unit]">failWithCause</a><span class="delimiter">(</span><a href="#scalaz.stream.async.mutable.Signal.apply;$anon.failWithCause.c" title="scalaz.stream.Cause">c</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>

  <span class="delimiter">}</span>


<span class="delimiter">}</span>

        </pre>
    </body>
</html>
