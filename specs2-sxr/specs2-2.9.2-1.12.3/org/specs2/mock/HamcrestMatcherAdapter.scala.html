<?xml version="1.0" encoding="utf-8"?>
      <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <meta http-equiv="Expires" content="0" />
        <title>org/specs2/mock/HamcrestMatcherAdapter.scala</title>
        <script type="text/javascript" src="../../../jquery-all.js"></script>
        <script type="text/javascript" src="../../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../../style.css" title="Style"></link>
    </head>
    <body>
        <pre>
<span class="keyword">package</span> org.specs2
<span class="keyword">package</span> mock

<span class="keyword">import</span> org.hamcrest.<span class="delimiter">{</span> Description, TypeSafeMatcher <span class="delimiter">}</span>
<span class="keyword">import</span> matcher._

<span class="comment">/** 
 * Adapter class to use specs2 matchers as Hamcrest matchers 
 */</span>
case <span class="keyword">class</span> <a title="class HamcrestMatcherAdapter[T] extends org.hamcrest.TypeSafeMatcher[T] with ScalaObject with Product with Serializable" id="260335">HamcrestMatcherAdapter</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="260292">T</a><span class="delimiter">]</span><a href="#260335" title="ScalaObject" class="delimiter">(</a><a title="org.specs2.matcher.Matcher[T]" id="260331">m</a>: <a href="../matcher/Matcher.scala.html#10945" title="org.specs2.matcher.Matcher[T]">Matcher</a><span class="delimiter">[</span>T<span class="delimiter">]</span><span class="delimiter">)</span> <span class="keyword">extends</span> <span title="org.hamcrest.TypeSafeMatcher[T]">TypeSafeMatcher</span><span class="delimiter">[</span>T<span class="delimiter">]</span> <span class="delimiter">{</span>
  <span class="comment">/** this variable is necessary to store the result of a match */</span> 
  <span class="keyword">private</span> <span class="keyword">var</span> <a title="java.lang.String" id="260209">message</a> = <span title="java.lang.String(&quot;&quot;)" class="string">&quot;&quot;</span>
    
  <span class="keyword">def</span> <a title="(item: T)Boolean" id="260211">matchesSafely</a><span class="delimiter">(</span><a title="T" id="260229">item</a>: <a href="#260292" title="T">T</a><span class="delimiter">)</span>: <span title="Boolean">Boolean</span> = <span class="delimiter">{</span>
    <span class="comment">// special case for by-name arguments</span>
    <span class="comment">// in that case we apply the Function0 to get the value</span>
    <span class="keyword">val</span> <a title="T" id="260232">i</a> = <span title="T" class="keyword">if</span> <span class="delimiter">(</span><a href="#260229" title="T">item</a>.<span title="[T0]=&gt; Boolean">isInstanceOf</span><span title="Boolean" class="delimiter">[</span><span title="Function0[_]">Function0</span><span class="delimiter">[</span>_<span class="delimiter">]</span><span class="delimiter">]</span><span class="delimiter">)</span> <a href="#260229" title="T">item</a>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="() =&gt; _$2" class="delimiter">[</span><span title="Function0[_]">Function0</span><span class="delimiter">[</span>_<span class="delimiter">]</span><span class="delimiter">]</span>.<span title="()_$2">apply</span><span class="delimiter">(</span><span class="delimiter">)</span>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="T" class="delimiter">[</span><a href="#260292" title="T">T</a><span class="delimiter">]</span> <span class="keyword">else</span> <a href="#260229" title="T">item</a>
    <a href="#260331" title="=&gt; org.specs2.matcher.Matcher[T]">m</a>.<a href="../matcher/Matcher.scala.html#39592" title="(t: org.specs2.matcher.Expectable[T])org.specs2.matcher.MatchResult[T]">apply</a><span class="delimiter">(</span><a href="../matcher/Expectable.scala.html#53801" title="(t: =&gt; T)org.specs2.matcher.Expectable[T]">Expectable</a><span class="delimiter">(</span><a href="#260232" title="T">i</a><span class="delimiter">)</span><span class="delimiter">)</span> <span title="Boolean" class="keyword">match</span> <span class="delimiter">{</span>
      <span class="keyword">case</span> <span title="Boolean">MatchFailure</span><span class="delimiter">(</span>_, <a title="() =&gt; String" id="260272">ko</a>, _, _<span class="delimiter">)</span> =&gt; <a href="#260209" title="(x$1: java.lang.String)Unit">message</a> = <a href="#260272" title="()String">ko</a><span class="delimiter">(</span><span class="delimiter">)</span>; <span title="Boolean(false)" class="keyword">false</span>
      <span class="keyword">case</span> <span title="Boolean(true)">_</span> =&gt; <span title="Boolean(true)" class="keyword">true</span>
    <span class="delimiter">}</span>
    
  <span class="delimiter">}</span>
  <span class="keyword">def</span> <a title="(description: org.hamcrest.Description)Unit" id="260212">describeTo</a><span class="delimiter">(</span><a title="org.hamcrest.Description" id="260273">description</a>: <span title="org.hamcrest.Description">Description</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    <a href="#260273" title="org.hamcrest.Description">description</a>.<span title="(x$1: java.lang.String)org.hamcrest.Description">appendText</span><span title="Unit" class="delimiter">(</span><a href="#260209" title="=&gt; java.lang.String">message</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>
<span class="delimiter">}</span>




        </pre>
    </body>
</html>