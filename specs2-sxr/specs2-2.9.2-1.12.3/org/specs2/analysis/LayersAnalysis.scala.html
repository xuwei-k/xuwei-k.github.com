<?xml version="1.0" encoding="utf-8"?>
      <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <meta http-equiv="Expires" content="0" />
        <title>org/specs2/analysis/LayersAnalysis.scala</title>
        <script type="text/javascript" src="../../../jquery-all.js"></script>
        <script type="text/javascript" src="../../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../../style.css" title="Style"></link>
    </head>
    <body>
        <pre>
<span class="keyword">package</span> org.specs2
<span class="keyword">package</span> analysis

<span class="keyword">import</span> data.IncludedExcluded
<span class="keyword">import</span> util.<span title="object scala.util.Properties">Properties</span>._
<span class="comment">/**
 * This trait allows to define expected dependencies between packages layers
 */</span>
<span class="keyword">trait</span> <a title="trait LayersAnalysis extends java.lang.Object with org.specs2.analysis.ClassycleDependencyFinder with ScalaObject" id="9855">LayersAnalysis</a> <span title="ScalaObject" class="keyword">extends</span> <a href="ClassycleDependencyFinder.scala.html#9822" title="org.specs2.analysis.ClassycleDependencyFinder">ClassycleDependencyFinder</a> <span class="delimiter">{</span>

  <span class="comment">/** this implicit definition allows to use a single string instead of a Layer object */</span>
  <span class="keyword">implicit</span> <span class="keyword">def</span> <a title="implicit org.specs2.analysis.LayersAnalysis.toLayer : (s: String)LayersAnalysis.this.Layer" id="90687">toLayer</a><span class="delimiter">(</span><a title="String" id="90698">s</a>: <span title="String">String</span><span class="delimiter">)</span>: <a href="#91318" title="LayersAnalysis.this.Layer">Layer</a> = <a href="#90688" title="(names: String*)LayersAnalysis.this.Layer">layer</a><span class="delimiter">(</span><a href="#90698" title="String">s</a>.<span title="(x$1: java.lang.String)Array[java.lang.String]">split</span><span title="(xs: Array[java.lang.String])scala.collection.mutable.ArrayOps[java.lang.String]" class="delimiter">(</span><span title="java.lang.String(&quot;\\s&quot;)" class="string">&quot;\\s&quot;</span><span class="delimiter">)</span>.<span title="(f: java.lang.String =&gt; java.lang.String)(implicit bf: scala.collection.generic.CanBuildFrom[Array[java.lang.String],java.lang.String,Array[java.lang.String]])Array[java.lang.String]">map</span><span title="(implicit m: scala.reflect.ClassManifest[java.lang.String])scala.collection.generic.CanBuildFrom[Array[_],java.lang.String,Array[java.lang.String]]" class="delimiter">(</span><a title="java.lang.String" id="91267">l</a> =&gt; <a href="#91267" title="java.lang.String">l</a>.<span title="()java.lang.String">trim</span><span class="delimiter">)</span>:_*<span class="delimiter">)</span>
  <span class="comment">/**
   * @return a new Layer object. If a prefix is defined, it will apply to each given name
   */</span>
  <span class="keyword">def</span> <a title="(names: String*)LayersAnalysis.this.Layer" id="90688">layer</a><span class="delimiter">(</span><a title="String*" id="90813">names</a>: <span title="String*">String</span>*<span class="delimiter">)</span>: <a href="#91318" title="LayersAnalysis.this.Layer">Layer</a> = <a href="#92268" title="LayersAnalysis.this.Layer" class="keyword">new</a> <a href="#91318" title="LayersAnalysis.this.Layer">Layer</a><span class="delimiter">(</span><a href="#90813" title="String*">names</a>.<span title="(p: String =&gt; Boolean)Seq[String]">filterNot</span><span class="delimiter">(</span><a href="#91338" title="String">_</a>.<span title="()Boolean">isEmpty</span><span class="delimiter">)</span>.<span title="scala.collection.immutable.Set[String]">toSet</span><span class="delimiter">)</span>
  <span class="comment">/**
   * @return a new Layers object, composed of other layers. If a prefix is defined it will apply to each layer
   */</span>
  <span class="keyword">def</span> <a title="(ls: LayersAnalysis.this.Layer*)LayersAnalysis.this.Layers" id="90689">layers</a><span class="delimiter">(</span><a title="LayersAnalysis.this.Layer*" id="91380">ls</a>: <span title="LayersAnalysis.this.Layer*">Layer</span>*<span class="delimiter">)</span> = <a href="#91385" title="(layers: Seq[LayersAnalysis.this.Layer])LayersAnalysis.this.Layers">Layers</a><span class="delimiter">(</span><a href="#91380" title="LayersAnalysis.this.Layer*">ls</a><span class="delimiter">)</span>

  <span class="comment">/**
   * The Layer class represent a list of packages.
   *
   * If those packages share a common prefix, it will be stored in the `prefix` member
   */</span>
  case <span class="keyword">class</span> <a title="class Layer extends java.lang.Object with ScalaObject with Product with Serializable" id="91318">Layer</a><a href="#91318" title="ScalaObject" class="delimiter">(</a><a title="Set[String]" id="92255">names</a>: <span title="Set[String]">Set</span><span class="delimiter">[</span>String<span class="delimiter">]</span>, <a title="String" id="92268">prefix</a>: <span title="String">String</span> = <span title="java.lang.String(&quot;&quot;)" class="string">&quot;&quot;</span>,
                   <a title="String" id="92269">sourceDir</a>: <span title="String">String</span> = <span title="java.lang.String(&quot;src/main/scala/&quot;)" class="string">&quot;src/main/scala/&quot;</span>,
                   <a title="String" id="92270">targetDir</a>: <span title="String">String</span> = <span title="java.lang.String(&quot;target/scala-&quot;)" class="string">&quot;target/scala-&quot;</span><span title="(x$1: Any)java.lang.String">+</span><span title="=&gt; Option[String]">releaseVersion</span>.<span title="(alternative: =&gt; Option[String])Option[String]">orElse</span><span class="delimiter">(</span><span title="=&gt; Option[String]">developmentVersion</span><span class="delimiter">)</span>.<span title="(default: =&gt; String)String">getOrElse</span><span class="delimiter">(</span><span title="java.lang.String(&quot;2.9.1&quot;)" class="string">&quot;2.9.1&quot;</span><span class="delimiter">)</span><span title="(x$1: Any)java.lang.String">+</span><span title="java.lang.String(&quot;/classes/&quot;)" class="string">&quot;/classes/&quot;</span>,
                   <a title="Seq[String]" id="92271">included</a>: <span title="Seq[String]">Seq</span><span class="delimiter">[</span>String<span class="delimiter">]</span> = <span title="(elems: Nothing*)Seq[Nothing]">Seq</span><span class="delimiter">(</span><span class="delimiter">)</span>, <a title="Seq[String]" id="92272">excluded</a>: <span title="Seq[String]">Seq</span><span class="delimiter">[</span>String<span class="delimiter">]</span> = <span title="(elems: Nothing*)Seq[Nothing]">Seq</span><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span class="comment">/** specify a prefix for this layer packages */</span>
    <span class="keyword">def</span> <a title="(p: String)LayersAnalysis.this.Layer" id="90798">withPrefix</a><span class="delimiter">(</span><a title="String" id="91623">p</a>: <span title="String">String</span><span class="delimiter">)</span> = <a href="#92255" title="Set[String]" id="91659">copy</a><span class="delimiter">(</span>prefix = <a title="String" id="91654" class="keyword">if</a> <span class="delimiter">(</span><a href="#91318" title="Layer.this.type" class="keyword">this</a>.<a href="#92268" title="=&gt; String">prefix</a>.<span title="()Boolean">isEmpty</span><span class="delimiter">)</span> <a href="#91623" title="String">p</a> <span class="keyword">else</span> <a href="#91623" title="String">p</a><span title="(x$1: Any)java.lang.String">+</span><span title="java.lang.String(&quot;.&quot;)" class="string">&quot;.&quot;</span><span title="(x$1: Any)java.lang.String">+</span><a href="#91318" title="Layer.this.type" class="keyword">this</a>.<a href="#92268" title="=&gt; String">prefix</a><span class="delimiter">)</span>
    <span class="comment">/** specify a source directory for this layer packages */</span>
    <span class="keyword">def</span> <a title="(s: String)LayersAnalysis.this.Layer" id="90799">inSourceDir</a><span class="delimiter">(</span><a title="String" id="91660">s</a>: <span title="String">String</span><span class="delimiter">)</span> = <a href="#92255" title="Set[String]" id="91671">copy</a><span class="delimiter">(</span>sourceDir = <a href="#91660" title="String" id="91666">s</a><span class="delimiter">)</span>
    <span class="comment">/** specify a target directory for this layer packages */</span>
    <span class="keyword">def</span> <a title="(s: String)LayersAnalysis.this.Layer" id="90800">inTargetDir</a><span class="delimiter">(</span><a title="String" id="91672">s</a>: <span title="String">String</span><span class="delimiter">)</span> = <a href="#92255" title="Set[String]" id="91680">copy</a><span class="delimiter">(</span>targetDir = <a href="#91672" title="String" id="91675">s</a><span class="delimiter">)</span>

    <span class="keyword">override</span> <span class="keyword">def</span> <a title="()java.lang.String" id="90801">toString</a> = <a href="#92255" title="=&gt; Set[String]">names</a>.<span title="(sep: String)String">mkString</span><span class="delimiter">(</span><span title="java.lang.String(&quot;\012&quot;)" class="string">&quot;\n&quot;</span><span class="delimiter">)</span> <span title="(x$1: Any)java.lang.String">+</span> <span class="delimiter">(</span><span title="Any" class="keyword">if</span> <span class="delimiter">(</span><a href="#92268" title="=&gt; String">prefix</a> <span title="(x$1: AnyRef)Boolean">==</span> <span title="java.lang.String(&quot;&quot;)" class="string">&quot;&quot;</span><span class="delimiter">)</span> <span title="java.lang.String(&quot;&quot;)" class="string">&quot;&quot;</span> <span class="keyword">else</span> <span title="java.lang.String(&quot; (&quot;)" class="string">&quot; (&quot;</span><span title="(x$1: Any)java.lang.String">+</span><a href="#92268" title="=&gt; String">prefix</a><span title="(x$1: Any)java.lang.String">+</span><span title="java.lang.String(&quot;)&quot;)" class="string">&quot;)&quot;</span><span class="delimiter">)</span>
    <span class="comment">/** @return the package names */</span>
    <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="scala.collection.immutable.Set[String]" id="90803">packageNames</a> = <a href="#92255" title="=&gt; Set[String]">names</a>.<span title="(f: String =&gt; String)(implicit bf: scala.collection.generic.CanBuildFrom[scala.collection.immutable.Set[String],String,scala.collection.immutable.Set[String]])scala.collection.immutable.Set[String]">map</span><span title="scala.collection.generic.CanBuildFrom[scala.collection.immutable.Set.Coll,String,scala.collection.immutable.Set[String]]" class="delimiter">(</span><a title="String" id="91436">n</a> =&gt; <span title="String" class="keyword">if</span> <span class="delimiter">(</span><a href="#92268" title="=&gt; String">prefix</a>.<span title="()Boolean">isEmpty</span><span class="delimiter">)</span> <a href="#91436" title="String">n</a> <span class="keyword">else</span> <a href="#92268" title="=&gt; String">prefix</a><span title="(x$1: Any)java.lang.String">+</span><span title="java.lang.String(&quot;.&quot;)" class="string">&quot;.&quot;</span><span title="(x$1: Any)java.lang.String">+</span><a href="#91436" title="String">n</a><span class="delimiter">)</span>

    <span class="comment">/** @return the list of dependents of each package of this layer */</span>
    <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="Set[org.specs2.analysis.Dependency]" id="90805">getDependents</a>: <span title="Set[org.specs2.analysis.Dependency]">Set</span><span class="delimiter">[</span>Dependency<span class="delimiter">]</span> = <a href="#90802" title="=&gt; scala.collection.immutable.Set[String]">packageNames</a>.<span title="(f: String =&gt; scala.collection.GenTraversableOnce[org.specs2.analysis.Dependency])(implicit bf: scala.collection.generic.CanBuildFrom[scala.collection.immutable.Set[String],org.specs2.analysis.Dependency,Set[org.specs2.analysis.Dependency]])Set[org.specs2.analysis.Dependency]">flatMap</span><span title="scala.collection.generic.CanBuildFrom[scala.collection.immutable.Set.Coll,org.specs2.analysis.Dependency,scala.collection.immutable.Set[org.specs2.analysis.Dependency]]" class="delimiter">(</span><a title="String" id="91718">p</a> =&gt; <a href="ClassycleDependencyFinder.scala.html#66814" title="(packageName: String, sourceDir: String, targetDir: String)Seq[org.specs2.analysis.Dependency]">getPackageDependents</a><span class="delimiter">(</span><a href="#91718" title="String">p</a>, <a href="#92269" title="=&gt; String">sourceDir</a>, <a href="#92270" title="=&gt; String">targetDir</a><span class="delimiter">)</span><span class="delimiter">)</span>

    <span class="comment">/**
     * @return the list of dependencies showing that this layer depends on the `other` layer
     * meaning thisLayer -- depends on --&gt; otherLayer
     */</span>
    <span class="keyword">def</span> <a title="(otherLayer: LayersAnalysis.this.Layer)scala.collection.immutable.Set[org.specs2.analysis.Dependency]" id="90806">dependsOn</a><span class="delimiter">(</span><a title="LayersAnalysis.this.Layer" id="91743">otherLayer</a>: <a href="#91318" title="LayersAnalysis.this.Layer">Layer</a><span class="delimiter">)</span> = <a href="#91743" title="LayersAnalysis.this.Layer">otherLayer</a>.<a href="#90804" title="=&gt; Set[org.specs2.analysis.Dependency]">getDependents</a>.<span title="(p: org.specs2.analysis.Dependency =&gt; Boolean)scala.collection.immutable.Set[org.specs2.analysis.Dependency]">filter</span><span class="delimiter">(</span><a href="#90809" title="(d: org.specs2.analysis.Dependency)Boolean">inThisLayer</a><span class="delimiter">)</span>

    <span class="comment">/** use regexes to include fully qualified class names in the layer */</span>
    <span class="keyword">def</span> <a title="(names: String*)LayersAnalysis.this.Layer" id="90807">include</a><span class="delimiter">(</span><a title="String*" id="91805">names</a>: <span title="String*">String</span>*<span class="delimiter">)</span> = <a href="#92255" title="Set[String]" id="91858">copy</a><span class="delimiter">(</span>included = <a href="#91805" title="String*">names</a>.<span title="(f: String =&gt; java.lang.String)(implicit bf: scala.collection.generic.CanBuildFrom[Seq[String],java.lang.String,Seq[String]])Seq[String]">map</span><a title="Seq[String]" id="91853" class="delimiter">(</a><a title="String" id="91833">n</a> =&gt; <span title="java.lang.String(&quot;.*&quot;)" class="string">&quot;.*&quot;</span><span title="(x$1: Any)java.lang.String">+</span><a href="#91833" title="String">n</a><span title="(x$1: Any)java.lang.String">+</span><span title="java.lang.String(&quot;.*&quot;)" class="string">&quot;.*&quot;</span><span class="delimiter">)</span><span class="delimiter">)</span>
    <span class="comment">/** use regexes to exclude fully qualified class names from the layer */</span>
    <span class="keyword">def</span> <a title="(names: String*)LayersAnalysis.this.Layer" id="90808">exclude</a><span class="delimiter">(</span><a title="String*" id="91859">names</a>: <span title="String*">String</span>*<span class="delimiter">)</span> = <a href="#92255" title="Set[String]" id="91903">copy</a><span class="delimiter">(</span>excluded = <a href="#91859" title="String*">names</a>.<span title="(f: String =&gt; java.lang.String)(implicit bf: scala.collection.generic.CanBuildFrom[Seq[String],java.lang.String,Seq[String]])Seq[String]">map</span><a title="Seq[String]" id="91898" class="delimiter">(</a><a title="String" id="91878">n</a> =&gt; <span title="java.lang.String(&quot;.*&quot;)" class="string">&quot;.*&quot;</span><span title="(x$1: Any)java.lang.String">+</span><a href="#91878" title="String">n</a><span title="(x$1: Any)java.lang.String">+</span><span title="java.lang.String(&quot;.*&quot;)" class="string">&quot;.*&quot;</span><span class="delimiter">)</span><span class="delimiter">)</span>

    <span class="comment">/** @return true if the dependent class of this dependency has its package in this layer */</span>
    <span class="keyword">def</span> <a title="(d: org.specs2.analysis.Dependency)Boolean" id="90809">inThisLayer</a><span class="delimiter">(</span><a title="org.specs2.analysis.Dependency" id="91748">d</a>: <a href="Dependency.scala.html#9840" title="org.specs2.analysis.Dependency">Dependency</a><span class="delimiter">)</span> = <a href="#90810" title="=&gt; java.lang.Object with org.specs2.data.IncludedExcluded[String]">includedExcluded</a>.<a href="../data/IncludedExcluded.scala.html#91761" title="(t: String)Boolean">keep</a><span class="delimiter">(</span><a href="#91748" title="org.specs2.analysis.Dependency">d</a>.<a href="Dependency.scala.html#67900" title="=&gt; String">dependentClassName</a><span class="delimiter">)</span> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <span class="delimiter">(</span><a href="#90802" title="=&gt; scala.collection.immutable.Set[String]">packageNames</a> <span title="(elem: String)Boolean">contains</span> <a href="#91748" title="org.specs2.analysis.Dependency">d</a>.<a href="Dependency.scala.html#67904" title="=&gt; String">dependentPackageName</a><span class="delimiter">)</span>

    <span class="comment">/**
     * check if a class name should be included or excluded from the dependency analysis, based on include/exclude regular expressions
     */</span>
    <span class="keyword">private</span> <span class="keyword">def</span> <a title="=&gt; java.lang.Object with org.specs2.data.IncludedExcluded[String]" id="90810">includedExcluded</a> = <a href="#91754" title="java.lang.Object with org.specs2.data.IncludedExcluded[String]{}" class="keyword">new</a> <a title="anonymous class $anon extends java.lang.Object with org.specs2.data.IncludedExcluded[String]" id="91754">IncludedExcluded</a><span class="delimiter">[</span>String<span class="delimiter">]</span> <span class="delimiter">{</span>
      <span class="keyword">val</span> <a title="Seq[String]" id="91768">include</a> = <a href="#92271" title="=&gt; Seq[String]">included</a>
      <span class="keyword">val</span> <a title="Seq[String]" id="91770">exclude</a> = <a href="#92272" title="=&gt; Seq[String]">excluded</a>

      <span class="keyword">val</span> <a title="(String, Seq[String]) =&gt; Boolean" id="91772">keepFunction</a>    = <span class="delimiter">(</span>n: <span title="String">String</span>, tags: <span title="Seq[String]">Seq</span><span class="delimiter">[</span>String<span class="delimiter">]</span><span class="delimiter">)</span> =&gt; <a href="#91776" title="Seq[String]">tags</a>.<span title="(p: String =&gt; Boolean)Boolean">exists</span><span class="delimiter">(</span><a title="String" id="91782">t</a> =&gt; <a href="#91775" title="String">n</a>.<span title="(x$1: java.lang.String)Boolean">matches</span><span class="delimiter">(</span><a href="#90811" title="(n: String)String">prefixed</a><span class="delimiter">(</span><a href="#91782" title="String">t</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>

    <span class="keyword">private</span> <span class="keyword">def</span> <a title="(n: String)String" id="90811">prefixed</a><span class="delimiter">(</span><a title="String" id="91783">n</a>: <span title="String">String</span><span class="delimiter">)</span> = <span title="String" class="keyword">if</span> <span class="delimiter">(</span><a href="#92268" title="=&gt; String">prefix</a>.<span title="()Boolean">isEmpty</span><span class="delimiter">)</span> <a href="#91783" title="String">n</a> <span class="keyword">else</span> <a href="#92268" title="=&gt; String">prefix</a><span title="(x$1: Any)java.lang.String">+</span><span title="java.lang.String(&quot;.&quot;)" class="string">&quot;.&quot;</span><span title="(x$1: Any)java.lang.String">+</span><a href="#91783" title="String">n</a>
  <span class="delimiter">}</span>

  <span class="comment">/**
   * This class represents an ordered set of layers, where each package on a given layer can only depend on packages defined in lower layers
   */</span>
  case <span class="keyword">class</span> <a title="class Layers extends java.lang.Object with ScalaObject with Product with Serializable" id="91385">Layers</a><a href="#91385" title="ScalaObject" class="delimiter">(</a><a title="Seq[LayersAnalysis.this.Layer]" id="91402">layers</a>: <span title="Seq[LayersAnalysis.this.Layer]">Seq</span><span class="delimiter">[</span>Layer<span class="delimiter">]</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span class="comment">/** specify a prefix for all layers */</span>
    <span class="keyword">def</span> <a title="(p: String)LayersAnalysis.this.Layers" id="91390">withPrefix</a><span class="delimiter">(</span><a title="String" id="92040">p</a>: <span title="String">String</span><span class="delimiter">)</span> = <a href="#91385" title="(layers: Seq[LayersAnalysis.this.Layer])LayersAnalysis.this.Layers">copy</a><span class="delimiter">(</span>layers = <a href="#91402" title="=&gt; Seq[LayersAnalysis.this.Layer]">layers</a>.<span title="(f: LayersAnalysis.this.Layer =&gt; LayersAnalysis.this.Layer)(implicit bf: scala.collection.generic.CanBuildFrom[Seq[LayersAnalysis.this.Layer],LayersAnalysis.this.Layer,Seq[LayersAnalysis.this.Layer]])Seq[LayersAnalysis.this.Layer]">map</span><span title="scala.collection.generic.CanBuildFrom[scala.collection.Seq.Coll,LayersAnalysis.this.Layer,Seq[LayersAnalysis.this.Layer]]" class="delimiter">(</span><a href="#92071" title="LayersAnalysis.this.Layer">_</a>.<a href="#90798" title="(p: String)LayersAnalysis.this.Layer">withPrefix</a><span class="delimiter">(</span><a href="#92040" title="String">p</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
    <span class="comment">/** specify a source directory for all layers */</span>
    <span class="keyword">def</span> <a title="(s: String)LayersAnalysis.this.Layers" id="91391">inSourceDir</a><span class="delimiter">(</span><a title="String" id="92091">s</a>: <span title="String">String</span><span class="delimiter">)</span> = <a href="#91385" title="(layers: Seq[LayersAnalysis.this.Layer])LayersAnalysis.this.Layers">copy</a><span class="delimiter">(</span>layers = <a href="#91402" title="=&gt; Seq[LayersAnalysis.this.Layer]">layers</a>.<span title="(f: LayersAnalysis.this.Layer =&gt; LayersAnalysis.this.Layer)(implicit bf: scala.collection.generic.CanBuildFrom[Seq[LayersAnalysis.this.Layer],LayersAnalysis.this.Layer,Seq[LayersAnalysis.this.Layer]])Seq[LayersAnalysis.this.Layer]">map</span><span title="scala.collection.generic.CanBuildFrom[scala.collection.Seq.Coll,LayersAnalysis.this.Layer,Seq[LayersAnalysis.this.Layer]]" class="delimiter">(</span><a href="#92104" title="LayersAnalysis.this.Layer">_</a>.<a href="#90799" title="(s: String)LayersAnalysis.this.Layer">inSourceDir</a><span class="delimiter">(</span><a href="#92091" title="String">s</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
    <span class="comment">/** specify a target directory for all layers */</span>
    <span class="keyword">def</span> <a title="(s: String)LayersAnalysis.this.Layers" id="91392">inTargetDir</a><span class="delimiter">(</span><a title="String" id="92124">s</a>: <span title="String">String</span><span class="delimiter">)</span> = <a href="#91385" title="(layers: Seq[LayersAnalysis.this.Layer])LayersAnalysis.this.Layers">copy</a><span class="delimiter">(</span>layers = <a href="#91402" title="=&gt; Seq[LayersAnalysis.this.Layer]">layers</a>.<span title="(f: LayersAnalysis.this.Layer =&gt; LayersAnalysis.this.Layer)(implicit bf: scala.collection.generic.CanBuildFrom[Seq[LayersAnalysis.this.Layer],LayersAnalysis.this.Layer,Seq[LayersAnalysis.this.Layer]])Seq[LayersAnalysis.this.Layer]">map</span><span title="scala.collection.generic.CanBuildFrom[scala.collection.Seq.Coll,LayersAnalysis.this.Layer,Seq[LayersAnalysis.this.Layer]]" class="delimiter">(</span><a href="#92137" title="LayersAnalysis.this.Layer">_</a>.<a href="#90800" title="(s: String)LayersAnalysis.this.Layer">inTargetDir</a><span class="delimiter">(</span><a href="#92124" title="String">s</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>

    <span class="keyword">override</span> <span class="keyword">def</span> <a title="()String" id="91393">toString</a> = <a href="#91402" title="=&gt; Seq[LayersAnalysis.this.Layer]">layers</a>.<span title="(sep: String)String">mkString</span><span class="delimiter">(</span><span title="java.lang.String(&quot;\012&quot;)" class="string">&quot;\n&quot;</span><span class="delimiter">)</span>
    <span class="comment">/** @return the layers as Markdown bullet points */</span>
    <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="String" id="91395">toMarkdown</a>: <span title="String">String</span> = <a href="#91402" title="=&gt; Seq[LayersAnalysis.this.Layer]">layers</a>.<span title="(f: LayersAnalysis.this.Layer =&gt; java.lang.String)(implicit bf: scala.collection.generic.CanBuildFrom[Seq[LayersAnalysis.this.Layer],java.lang.String,Seq[java.lang.String]])Seq[java.lang.String]">map</span><span title="scala.collection.generic.CanBuildFrom[scala.collection.Seq.Coll,java.lang.String,Seq[java.lang.String]]" class="delimiter">(</span><a title="LayersAnalysis.this.Layer" id="92172">l</a> =&gt; <span title="java.lang.String(&quot; * &quot;)" class="string">&quot; * &quot;</span><span title="(x$1: Any)java.lang.String">+</span><a href="#92172" title="LayersAnalysis.this.Layer">l</a>.<a href="#92255" title="=&gt; Set[String]">names</a>.<span title="(sep: String)String">mkString</span><span class="delimiter">(</span><span title="java.lang.String(&quot; &quot;)" class="string">&quot; &quot;</span><span class="delimiter">)</span><span class="delimiter">)</span>.<span title="(sep: String)String">mkString</span><span class="delimiter">(</span><span title="java.lang.String(&quot;\012&quot;)" class="string">&quot;\n&quot;</span><span class="delimiter">)</span>
    <span class="comment">/** the list of dependencies which are not respecting the layers definitions */</span>
    <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="org.specs2.analysis.Dependencies" id="91397">unsatisfied</a>: <a href="Dependency.scala.html#9843" title="org.specs2.analysis.Dependencies">Dependencies</a> = <span title="org.specs2.analysis.Dependencies" class="keyword">new</span> <a href="Dependency.scala.html#9843" title="org.specs2.analysis.Dependencies">Dependencies</a><span class="delimiter">(</span><a href="#91398" title="=&gt; Seq[org.specs2.analysis.Dependency]">unsatisfiedDependencies</a><span class="delimiter">)</span>

    <span class="comment">/**
     * @return the list of unsatisfied dependencies by:
     *
     * - taking all the subsequences of layers with at least 2 elements, say `Layers(l1, l2, l3) =&gt; Seq(Seq(l1, l2, l3), Seq(l1, l2))`
     * - getting all the dependencies of the last element of a sequence with all its parents (should always be empty)
     */</span>
    <span class="keyword">private</span> <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="Seq[org.specs2.analysis.Dependency]" id="91399">unsatisfiedDependencies</a> = <span class="delimiter">{</span>
      <a href="#91402" title="=&gt; Seq[LayersAnalysis.this.Layer]">layers</a>.<span title="=&gt; Iterator[Seq[LayersAnalysis.this.Layer]]">inits</span>.<span title="(p: Seq[LayersAnalysis.this.Layer] =&gt; Boolean)Iterator[Seq[LayersAnalysis.this.Layer]]">filter</span><span class="delimiter">(</span><a href="#91984" title="Seq[LayersAnalysis.this.Layer]">_</a>.<span title="=&gt; Int">size</span> <span title="(x: Int)Boolean">&gt;</span> <span title="Int(1)" class="int">1</span><span class="delimiter">)</span>.<span title="(f: Seq[LayersAnalysis.this.Layer] =&gt; scala.collection.GenTraversableOnce[org.specs2.analysis.Dependency])Iterator[org.specs2.analysis.Dependency]">flatMap</span><span class="delimiter">(</span><a title="Seq[LayersAnalysis.this.Layer]" id="91993">parents</a> =&gt; <a href="#91993" title="Seq[LayersAnalysis.this.Layer]">parents</a>.<span title="(n: Int)Seq[LayersAnalysis.this.Layer]">dropRight</span><span class="delimiter">(</span><span title="Int(1)" class="int">1</span><span class="delimiter">)</span>.<span title="(f: LayersAnalysis.this.Layer =&gt; scala.collection.GenTraversableOnce[org.specs2.analysis.Dependency])(implicit bf: scala.collection.generic.CanBuildFrom[Seq[LayersAnalysis.this.Layer],org.specs2.analysis.Dependency,Seq[org.specs2.analysis.Dependency]])Seq[org.specs2.analysis.Dependency]">flatMap</span><span title="scala.collection.generic.CanBuildFrom[scala.collection.Seq.Coll,org.specs2.analysis.Dependency,Seq[org.specs2.analysis.Dependency]]" class="delimiter">(</span><a title="LayersAnalysis.this.Layer" id="92017">p</a> =&gt; <a href="#91993" title="Seq[LayersAnalysis.this.Layer]">parents</a>.<span title="=&gt; LayersAnalysis.this.Layer">last</span>.<a href="#90806" title="(otherLayer: LayersAnalysis.this.Layer)scala.collection.immutable.Set[org.specs2.analysis.Dependency]">dependsOn</a><span class="delimiter">(</span><a href="#92017" title="LayersAnalysis.this.Layer">p</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>.<span title="=&gt; Seq[org.specs2.analysis.Dependency]">toSeq</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

<span class="delimiter">}</span>
        </pre>
    </body>
</html>