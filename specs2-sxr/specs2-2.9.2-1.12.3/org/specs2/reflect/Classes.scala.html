<?xml version="1.0" encoding="utf-8"?>
      <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <meta http-equiv="Expires" content="0" />
        <title>org/specs2/reflect/Classes.scala</title>
        <script type="text/javascript" src="../../../jquery-all.js"></script>
        <script type="text/javascript" src="../../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../../style.css" title="Style"></link>
    </head>
    <body>
        <pre>
<span class="keyword">package</span> org.specs2
<span class="keyword">package</span> reflect

<span class="keyword">import</span> scala.reflect.Manifest
<span class="keyword">import</span> <a href="ClassName.scala.html#11858" title="object org.specs2.reflect.ClassName">ClassName</a>._
<span class="keyword">import</span> control.<a href="../control/Exceptions.scala.html#9922" title="object org.specs2.control.Exceptions">Exceptions</a>._
<span class="keyword">import</span> control.<a href="../control/Throwablex.scala.html#10005" title="object org.specs2.control.Throwablex">Throwablex</a>._
<span class="keyword">import</span> io._
<span class="keyword">import</span> sys._
<span class="keyword">import</span> java.lang.reflect.Constructor
<span class="keyword">import</span> internal.scalaz.<span title="object org.specs2.internal.scalaz.Digit">Digit</span>._0

<span class="comment">/**
* This trait provides utility functions for classes
*/</span>
<span class="keyword">private</span><span class="delimiter">[</span>specs2<span class="delimiter">]</span>
<span class="keyword">trait</span> <a title="trait Classes extends java.lang.Object with org.specs2.io.Output with ScalaObject" id="11871">Classes</a> <span title="ScalaObject" class="keyword">extends</span> <a href="../io/Output.scala.html#10534" title="org.specs2.io.Output">Output</a> <span class="delimiter">{</span>

  <span class="comment">/** @return an instance of a given class, returning either the instance, or an exception */</span>
  <span class="keyword">def</span> <a title="[T &lt;: AnyRef](className: String, classLoader: java.lang.ClassLoader)(implicit m: scala.reflect.Manifest[T])Either[Throwable,T]" id="126715">create</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: AnyRef" id="290312">T</a> &lt;: AnyRef<span class="delimiter">]</span><span class="delimiter">(</span><a title="String" id="290310">className</a>: <span title="String">String</span> = <span title="java.lang.String(&quot;&quot;)" class="string">&quot;&quot;</span>, <a title="java.lang.ClassLoader" id="290313">classLoader</a>: <span title="java.lang.ClassLoader">ClassLoader</span> = <span title="object java.lang.Thread">Thread</span>.<span title="()java.lang.Thread">currentThread</span>.<span title="()java.lang.ClassLoader">getContextClassLoader</span><span class="delimiter">)</span>
                         <span class="delimiter">(</span><span class="keyword">implicit</span> <a title="scala.reflect.Manifest[T]" id="290308">m</a>: <span title="scala.reflect.Manifest[T]">Manifest</span><span class="delimiter">[</span>T<span class="delimiter">]</span><span class="delimiter">)</span>: <span title="Either[Throwable,T]">Either</span><span class="delimiter">[</span>Throwable, T<span class="delimiter">]</span> =
    <a href="../control/Exceptions.scala.html#15383" title="(a: =&gt; T)(implicit f: Exception =&gt; Throwable)Either[Throwable,T]">trye</a><span title="&lt;:&lt;[Exception,Exception]" class="delimiter">(</span><a href="#126742" title="(klass: Class[T])(implicit m: scala.reflect.Manifest[T])T">createInstanceFor</a><a href="#290308" title="scala.reflect.Manifest[T]" class="delimiter">(</a><a href="#126752" title="[T &lt;: AnyRef](className: String, loader: java.lang.ClassLoader)Class[T]">loadClassOf</a><span title="(className: String, loader: java.lang.ClassLoader)Class[T]" class="delimiter">[</span><a href="#290312" title="T">T</a><span class="delimiter">]</span><span class="delimiter">(</span><a href="#290310" title="String">className</a>, loader = <a href="#290313" title="java.lang.ClassLoader">classLoader</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>

  <span class="comment">/** @return an instance of a given class */</span>
  <span class="keyword">def</span> <a title="[T &lt;: AnyRef](className: String)(implicit m: scala.reflect.Manifest[T])Option[T]" id="126718">createObject</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: AnyRef" id="126720">T</a> &lt;: AnyRef<span class="delimiter">]</span><span class="delimiter">(</span><a title="String" id="290350">className</a>: <span title="String">String</span><span class="delimiter">)</span><span class="delimiter">(</span><span class="keyword">implicit</span> <a title="scala.reflect.Manifest[T]" id="290351">m</a>: <span title="scala.reflect.Manifest[T]">Manifest</span><span class="delimiter">[</span>T<span class="delimiter">]</span><span class="delimiter">)</span>: <span title="Option[T]">Option</span><span class="delimiter">[</span>T<span class="delimiter">]</span> =
    <a href="#126721" title="[T &lt;: AnyRef](className: String, printMessage: Boolean)(implicit m: scala.reflect.Manifest[T])Option[T]">createObject</a><span title="(className: String, printMessage: Boolean)(implicit m: scala.reflect.Manifest[T])Option[T]" class="delimiter">[</span><a href="#126720" title="T">T</a><span class="delimiter">]</span><span class="delimiter">(</span><a href="#290350" title="String">className</a>, <span title="Boolean(false)" class="keyword">false</span><span class="delimiter">)</span><span class="delimiter">(</span><a href="#290351" title="scala.reflect.Manifest[T]">m</a><span class="delimiter">)</span>
  
  <span class="comment">/** @return an instance of a given class and optionally print message if the class can't be loaded */</span>
  <span class="keyword">def</span> <a title="[T &lt;: AnyRef](className: String, printMessage: Boolean)(implicit m: scala.reflect.Manifest[T])Option[T]" id="126721">createObject</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: AnyRef" id="126723">T</a> &lt;: AnyRef<span class="delimiter">]</span><span class="delimiter">(</span><a title="String" id="290367">className</a>: <span title="String">String</span>, <a title="Boolean" id="290368">printMessage</a>: <span title="Boolean">Boolean</span><span class="delimiter">)</span>
                               <span class="delimiter">(</span><span class="keyword">implicit</span> <a title="scala.reflect.Manifest[T]" id="290369">m</a>: <span title="scala.reflect.Manifest[T]">Manifest</span><span class="delimiter">[</span>T<span class="delimiter">]</span><span class="delimiter">)</span>: <span title="Option[T]">Option</span><span class="delimiter">[</span>T<span class="delimiter">]</span> =
    <a href="#126724" title="(className: String, printMessage: Boolean, printStackTrace: Boolean)(implicit m: scala.reflect.Manifest[T])Option[T]">createObject</a><span class="delimiter">(</span><a href="#290367" title="String">className</a>, <a href="#290368" title="Boolean">printMessage</a>, <span title="Boolean(false)" class="keyword">false</span><span class="delimiter">)</span><span class="delimiter">(</span><a href="#290369" title="scala.reflect.Manifest[T]">m</a><span class="delimiter">)</span>

  <span class="comment">/**
   * A system property 'debugCreateObject' can be set to override the printMessage and printStackTrace parameters
   * so that the exception message and stacktrace are printed when the object can't be created
   * 
   * @return an instance of a given class and optionally print message and/or the stacktrace if the class can't be loaded.
   */</span>
  <span class="keyword">def</span> <a title="[T &lt;: AnyRef](className: String, printMessage: Boolean, printStackTrace: Boolean)(implicit m: scala.reflect.Manifest[T])Option[T]" id="126724">createObject</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: AnyRef" id="126726">T</a> &lt;: AnyRef<span class="delimiter">]</span><span class="delimiter">(</span><a title="String" id="290360">className</a>: <span title="String">String</span>, <a title="Boolean" id="290361">printMessage</a>: <span title="Boolean">Boolean</span>, <a title="Boolean" id="290362">printStackTrace</a>: <span title="Boolean">Boolean</span><span class="delimiter">)</span>
                               <span class="delimiter">(</span><span class="keyword">implicit</span> <a title="scala.reflect.Manifest[T]" id="290363">m</a>: <span title="scala.reflect.Manifest[T]">Manifest</span><span class="delimiter">[</span>T<span class="delimiter">]</span><span class="delimiter">)</span>: <span title="Option[T]">Option</span><span class="delimiter">[</span>T<span class="delimiter">]</span> = <span class="delimiter">{</span>
    <a href="../control/Exceptions.scala.html#15357" title="(a: =&gt; Option[T])(implicit f: Exception =&gt; Unit)Option[Option[T]]">tryo</a><span class="delimiter">(</span><a href="#126736" title="[T &lt;: AnyRef](c: Option[Class[T]])(implicit m: scala.reflect.Manifest[T])Option[T]">createInstanceOf</a><span title="(c: Option[Class[T]])(implicit m: scala.reflect.Manifest[T])Option[T]" class="delimiter">[</span><a href="#126726" title="T">T</a><span class="delimiter">]</span><a href="#290363" title="scala.reflect.Manifest[T]" class="delimiter">(</a><a href="#126745" title="[T &lt;: AnyRef](className: String, loader: java.lang.ClassLoader)Option[Class[T]]">loadClass</a><span title="(className: String, loader: java.lang.ClassLoader)Option[Class[T]]" class="delimiter">[</span><a href="#126726" title="T">T</a><span class="delimiter">]</span><span class="delimiter">(</span><a href="#290360" title="String">className</a>, <a href="#290363" title="scala.reflect.Manifest[T]">m</a>.<span title="=&gt; java.lang.Class[_]">erasure</span>.<span title="()java.lang.ClassLoader">getClassLoader</span><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">{</span> <span class="delimiter">(</span>e: <span title="Exception">Exception</span><span class="delimiter">)</span> =&gt;
      <span class="keyword">val</span> <a title="Boolean" id="290413">debugCreateObject</a> = sys.<span title="(key: String)String">props</span><span class="delimiter">(</span><span title="java.lang.String(&quot;debugCreateObject&quot;)" class="string">&quot;debugCreateObject&quot;</span><span class="delimiter">)</span> <span title="(x$1: AnyRef)Boolean">!=</span> <span title="Null(null)" class="keyword">null</span>
      <span class="keyword">val</span> <a title="Boolean" id="290414">shouldPrintStackTrace</a> = <a href="#290362" title="Boolean">printStackTrace</a> <span title="(x: Boolean)Boolean">||</span> <a href="#290413" title="Boolean">debugCreateObject</a>
      <span class="keyword">val</span> <a title="Boolean" id="290415">shouldPrintMessage</a> = <a href="#290361" title="Boolean">printMessage</a> <span title="(x: Boolean)Boolean">||</span> <a href="#290413" title="Boolean">debugCreateObject</a>
      <span class="keyword">val</span> <a title="java.lang.String" id="290416">msg</a> = <span title="(_1: Boolean, _2: Boolean)(Boolean, Boolean)" class="delimiter">(</span><a href="#290415" title="Boolean">shouldPrintMessage</a>, <a href="#290414" title="Boolean">shouldPrintStackTrace</a><span class="delimiter">)</span> <span title="java.lang.String" class="keyword">match</span> <span class="delimiter">{</span>
        <span class="keyword">case</span> <span title="java.lang.String" class="delimiter">(</span>_, <span title="Boolean(true)" class="keyword">true</span><span class="delimiter">)</span> =&gt; <span title="java.lang.String(&quot;Could not instantiate class: &quot;)" class="string">&quot;Could not instantiate class: &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="../control/Throwablex.scala.html#39767" title="(t: Exception)org.specs2.control.Throwablex.ExtendedThrowable[Exception]">e</a>.<a href="../control/Throwablex.scala.html#65406" title="=&gt; String">getFullStackTraceAsString</a>
        <span class="keyword">case</span> <span title="java.lang.String" class="delimiter">(</span><span title="Boolean(true)" class="keyword">true</span>, <span title="Boolean(false)" class="keyword">false</span><span class="delimiter">)</span> =&gt; <span title="java.lang.String(&quot;Could not instantiate class: &quot;)" class="string">&quot;Could not instantiate class: &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#290360" title="String">className</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot;: &quot;)" class="string">&quot;: &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#290412" title="Exception">e</a>.<span title="()java.lang.String">getMessage</span>
        <span class="keyword">case</span> <span title="java.lang.String(&quot;&quot;)" class="delimiter">(</span><span title="Boolean(false)" class="keyword">false</span>, <span title="Boolean(false)" class="keyword">false</span><span class="delimiter">)</span> =&gt; <span title="java.lang.String(&quot;&quot;)" class="string">&quot;&quot;</span>
      <span class="delimiter">}</span>
      <a href="../io/Output.scala.html#16415" title="(m: Any)Unit">println</a><span class="delimiter">(</span><a href="#290416" title="java.lang.String">msg</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>.<span title="(f: Option[T] =&gt; Option[T])Option[T]">flatMap</span><span class="delimiter">(</span><a href="#290472" title="(x: Option[T])Option[T]">identity</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Try to create an instance of a given class by using whatever constructor is available
   * and trying to instantiate the first parameter recursively if there is a parameter for that constructor.
   * 
   * This is useful to instantiate nested classes which are referencing their outer class in their constructor
   */</span>
  <span class="keyword">def</span> <a title="[T &lt;: AnyRef](className: String, printMessage: Boolean, printStackTrace: Boolean, loader: java.lang.ClassLoader, parameter: Option[AnyRef])(implicit m: scala.reflect.Manifest[T])Option[T]" id="126727">tryToCreateObject</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: AnyRef" id="290485">T</a> &lt;: AnyRef<span class="delimiter">]</span><span class="delimiter">(</span><a title="String" id="290476">className</a>: <span title="String">String</span>,
                                     <a title="Boolean" id="290483">printMessage</a>: <span title="Boolean">Boolean</span> = <span title="Boolean(true)" class="keyword">true</span>,
                                     <a title="Boolean" id="290486">printStackTrace</a>: <span title="Boolean">Boolean</span> = <span title="Boolean(true)" class="keyword">true</span>,
                                     <a title="java.lang.ClassLoader" id="290489">loader</a>: <span title="java.lang.ClassLoader">ClassLoader</span> = <span title="object java.lang.Thread">Thread</span>.<span title="()java.lang.Thread">currentThread</span>.<span title="()java.lang.ClassLoader">getContextClassLoader</span>,
                                     <a title="Option[AnyRef]" id="290492">parameter</a>: <span title="Option[AnyRef]">Option</span><span class="delimiter">[</span>AnyRef<span class="delimiter">]</span> = <span title="object None">None</span><span class="delimiter">)</span>
                                    <span class="delimiter">(</span><span class="keyword">implicit</span> <a title="scala.reflect.Manifest[T]" id="290481">m</a>: <span title="scala.reflect.Manifest[T]">Manifest</span><span class="delimiter">[</span>T<span class="delimiter">]</span><span class="delimiter">)</span>: <span title="Option[T]">Option</span><span class="delimiter">[</span>T<span class="delimiter">]</span> = <span class="delimiter">{</span>

    <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="Boolean" id="290497">canPrintMessage</a>    = <a href="#290483" title="Boolean">printMessage</a>    <span title="(x: Boolean)Boolean">||</span> sys.<span title="(key: String)String">props</span><span class="delimiter">(</span><span title="java.lang.String(&quot;debugCreateObject&quot;)" class="string">&quot;debugCreateObject&quot;</span><span class="delimiter">)</span> <span title="(x$1: AnyRef)Boolean">!=</span> <span title="Null(null)" class="keyword">null</span>
    <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="Boolean" id="290499">canPrintStackTrace</a> = <a href="#290486" title="Boolean">printStackTrace</a> <span title="(x: Boolean)Boolean">||</span> sys.<span title="(key: String)String">props</span><span class="delimiter">(</span><span title="java.lang.String(&quot;debugCreateObject&quot;)" class="string">&quot;debugCreateObject&quot;</span><span class="delimiter">)</span> <span title="(x$1: AnyRef)Boolean">!=</span> <span title="Null(null)" class="keyword">null</span>

    <a href="#126730" title="(className: String, loader: java.lang.ClassLoader, parameter: Option[AnyRef])(implicit m: scala.reflect.Manifest[T])Either[Throwable,T]">tryToCreateObjectEither</a><a href="#290481" title="scala.reflect.Manifest[T]" class="delimiter">(</a><a href="#290476" title="String">className</a>, <a href="#290489" title="java.lang.ClassLoader">loader</a>, <a href="#290492" title="Option[AnyRef]">parameter</a><span class="delimiter">)</span> <span title="Option[T]" class="keyword">match</span> <span class="delimiter">{</span>
      <span class="keyword">case</span> <span title="Some[T]">Right</span><span class="delimiter">(</span><a title="T" id="290564">o</a><span class="delimiter">)</span> =&gt; <span title="(x: T)Some[T]">Some</span><span class="delimiter">(</span><a href="#290564" title="T">o</a><span class="delimiter">)</span>
      <span class="keyword">case</span> <span title="None.type">Left</span><span class="delimiter">(</span><a title="Throwable" id="290569">e</a><span class="delimiter">)</span>  =&gt; <span class="delimiter">{</span>
        <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#290496" title="=&gt; Boolean">canPrintMessage</a><span class="delimiter">)</span> <a href="../io/Output.scala.html#16415" title="(m: Any)Unit">println</a><span class="delimiter">(</span><a href="#290569" title="Throwable">e</a><span class="delimiter">)</span>
        <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#290498" title="=&gt; Boolean">canPrintStackTrace</a><span class="delimiter">)</span> <a href="../control/Throwablex.scala.html#39767" title="(t: Throwable)org.specs2.control.Throwablex.ExtendedThrowable[Throwable]">e</a>.<a href="../control/Throwablex.scala.html#65405" title="=&gt; List[java.lang.StackTraceElement]">getFullStackTrace</a> <span title="(f: java.lang.StackTraceElement =&gt; Unit)Unit">foreach</span> <span class="delimiter">(</span><a title="java.lang.StackTraceElement" id="290604">s</a> =&gt; <a href="../io/Output.scala.html#16415" title="(m: Any)Unit">println</a><span class="delimiter">(</span><a href="#290604" title="java.lang.StackTraceElement">s</a>.<span title="()java.lang.String">toString</span><span class="delimiter">)</span><span class="delimiter">)</span>
        <span title="object None">None</span>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Try to create an instance of a given class by using whatever constructor is available
   * and trying to instantiate the first parameter recursively if there is a parameter for that constructor.
   *
   * This is useful to instantiate nested classes which are referencing their outer class in their constructor
   */</span>
  <span class="keyword">def</span> <a title="[T &lt;: AnyRef](className: String, loader: java.lang.ClassLoader, parameter: Option[AnyRef])(implicit m: scala.reflect.Manifest[T])Either[Throwable,T]" id="126730">tryToCreateObjectEither</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: AnyRef" id="290551">T</a> &lt;: AnyRef<span class="delimiter">]</span><span class="delimiter">(</span><a title="String" id="290544">className</a>: <span title="String">String</span>,
                                           <a title="java.lang.ClassLoader" id="290549">loader</a>: <span title="java.lang.ClassLoader">ClassLoader</span> = <span title="object java.lang.Thread">Thread</span>.<span title="()java.lang.Thread">currentThread</span>.<span title="()java.lang.ClassLoader">getContextClassLoader</span>,
                                           <a title="Option[AnyRef]" id="290552">parameter</a>: <span title="Option[AnyRef]">Option</span><span class="delimiter">[</span>AnyRef<span class="delimiter">]</span> = <span title="object None">None</span><span class="delimiter">)</span>
                                          <span class="delimiter">(</span><span class="keyword">implicit</span> <a title="scala.reflect.Manifest[T]" id="290547">m</a>: <span title="scala.reflect.Manifest[T]">Manifest</span><span class="delimiter">[</span>T<span class="delimiter">]</span><span class="delimiter">)</span>: <span title="Either[Throwable,T]">Either</span><span class="delimiter">[</span>Throwable, T<span class="delimiter">]</span> = <span class="delimiter">{</span>
    <a href="#126749" title="(className: String, loader: java.lang.ClassLoader)Either[Throwable,Class[Nothing]]">loadClassEither</a><span class="delimiter">(</span><a href="#290544" title="String">className</a>, <a href="#290549" title="java.lang.ClassLoader">loader</a><span class="delimiter">)</span> <span title="Either[Throwable,T]" class="keyword">match</span> <span class="delimiter">{</span>
      <span class="keyword">case</span> <span title="Left[Throwable,Nothing]">Left</span><span class="delimiter">(</span><a title="Throwable" id="290614">e</a><span class="delimiter">)</span> =&gt; <span title="(a: Throwable)Left[Throwable,Nothing]">Left</span><span class="delimiter">(</span><a href="#290614" title="Throwable">e</a><span class="delimiter">)</span>
      <span class="keyword">case</span> <span title="Either[Throwable,T]">Right</span><span class="delimiter">(</span><a title="java.lang.Class[Nothing]" id="290620">c</a>: <span title="Class[_]">Class</span><span class="delimiter">[</span>_<span class="delimiter">]</span><span class="delimiter">)</span> =&gt; <span class="delimiter">{</span>
        <span class="keyword">try</span> <span class="delimiter">{</span>
          <span class="keyword">val</span> <a title="List[java.lang.reflect.Constructor[_]]" id="290623">constructors</a> = <a href="#290620" title="java.lang.Class[Nothing]">c</a>.<span title="(xs: Array[java.lang.reflect.Constructor[_]])scala.collection.mutable.ArrayOps[java.lang.reflect.Constructor[_]]">getDeclaredConstructors</span>.<span title="=&gt; List[java.lang.reflect.Constructor[_]]">toList</span>.<span title="(p: java.lang.reflect.Constructor[_] =&gt; Boolean)List[java.lang.reflect.Constructor[_]]">filter</span><span class="delimiter">(</span><a href="#290772" title="java.lang.reflect.Constructor[_]">_</a>.<span title="(xs: Array[java.lang.Class[_]])scala.collection.mutable.ArrayOps[java.lang.Class[_]]">getParameterTypes</span>.<span title="=&gt; Int">size</span> <span title="(x: Int)Boolean">&lt;=</span> <span title="Int(1)" class="int">1</span><span class="delimiter">)</span>.<span title="(f: java.lang.reflect.Constructor[_] =&gt; Int)(implicit ord: scala.math.Ordering[Int])List[java.lang.reflect.Constructor[_]]">sortBy</span><span title="object scala.math.Ordering.Int" class="delimiter">(</span><a href="#290926" title="java.lang.reflect.Constructor[_]">_</a>.<span title="(xs: Array[java.lang.Class[_]])scala.collection.mutable.ArrayOps[java.lang.Class[_]]">getParameterTypes</span>.<span title="=&gt; Int">size</span><span class="delimiter">)</span>
          <span title="Either[Throwable,T]" class="keyword">if</span> <span class="delimiter">(</span><a href="#290623" title="List[java.lang.reflect.Constructor[_]]">constructors</a>.<span title="=&gt; Boolean">isEmpty</span><span class="delimiter">)</span>
            <span title="(a: java.lang.Exception)Left[java.lang.Exception,Nothing]">Left</span><span class="delimiter">(</span><span title="(x$1: java.lang.String)java.lang.Exception" class="keyword">new</span> <span title="java.lang.Exception">Exception</span><span class="delimiter">(</span><span title="java.lang.String(&quot;Can\'t find a constructor for class &quot;)" class="string">&quot;Can't find a constructor for class &quot;</span><span title="(x$1: Any)java.lang.String">+</span><a href="#290620" title="java.lang.Class[Nothing]">c</a>.<span title="()java.lang.String">getName</span><span class="delimiter">)</span><span class="delimiter">)</span>
          <span class="keyword">else</span> <span class="delimiter">{</span>
            <span class="keyword">val</span> <a title="scala.collection.SeqView[Either[Throwable,T],Seq[_]]" id="291133">results</a> = <a href="#290623" title="List[java.lang.reflect.Constructor[_]]">constructors</a>.<span title="=&gt; java.lang.Object with scala.collection.SeqView[java.lang.reflect.Constructor[_],List[java.lang.reflect.Constructor[_]]]">view</span>.<span title="(f: java.lang.reflect.Constructor[_] =&gt; Either[Throwable,T])(implicit bf: scala.collection.generic.CanBuildFrom[scala.collection.SeqView[java.lang.reflect.Constructor[_],List[java.lang.reflect.Constructor[_]]],Either[Throwable,T],scala.collection.SeqView[Either[Throwable,T],Seq[_]]])scala.collection.SeqView[Either[Throwable,T],Seq[_]]">map</span><span title="scala.collection.generic.CanBuildFrom[scala.collection.SeqView.Coll,Either[Throwable,T],scala.collection.SeqView[Either[Throwable,T],Seq[_]]]" class="delimiter">(</span><a title="java.lang.reflect.Constructor[_]" id="291730">constructor</a> =&gt; <a href="#291734" title="(c: Class[_], constructor: java.lang.reflect.Constructor[_], parameter: Option[AnyRef])(implicit evidence$1: scala.reflect.Manifest[T])Either[Throwable,T]">createInstanceForConstructor</a><a href="#290547" title="scala.reflect.Manifest[T]" class="delimiter">(</a><a href="#290620" title="java.lang.Class[Nothing]">c</a>, <a href="#291730" title="java.lang.reflect.Constructor[_]">constructor</a>, <a href="#290552" title="Option[AnyRef]">parameter</a><span class="delimiter">)</span><span class="delimiter">)</span>
            <span class="keyword">val</span> <a href="#291135" title="(scala.collection.SeqView[Right[Throwable,T],Seq[_]], scala.collection.SeqView[Left[Throwable,T],Seq[_]])" class="delimiter">(</a><a href="#291134" title="scala.collection.SeqView[Right[Throwable,T],Seq[_]]" id="291135">ok</a>, <a href="#291134" title="scala.collection.SeqView[Left[Throwable,T],Seq[_]]" id="291136">ko</a><span class="delimiter">)</span> = <span title="(_1: scala.collection.SeqView[Right[Throwable,T],Seq[_]], _2: scala.collection.SeqView[Left[Throwable,T],Seq[_]])(scala.collection.SeqView[Right[Throwable,T],Seq[_]], scala.collection.SeqView[Left[Throwable,T],Seq[_]])" class="delimiter">(</span><a href="#291133" title="scala.collection.SeqView[Either[Throwable,T],Seq[_]]">results</a>.<span title="(pf: PartialFunction[Either[Throwable,T],Right[Throwable,T]])(implicit bf: scala.collection.generic.CanBuildFrom[scala.collection.SeqView[Either[Throwable,T],Seq[_]],Right[Throwable,T],scala.collection.SeqView[Right[Throwable,T],Seq[_]]])scala.collection.SeqView[Right[Throwable,T],Seq[_]]">collect</span> <a href="#292386" title="Right[Throwable,T]" class="delimiter">{</a> <span class="keyword">case</span> <a title="Right[Throwable,T]" id="292387">r</a> @ Right<span class="delimiter">(</span>_<span class="delimiter">)</span> =&gt; <a href="#292387" title="Right[Throwable,T]">r</a> <span class="delimiter">}</span> , <a href="#291133" title="scala.collection.SeqView[Either[Throwable,T],Seq[_]]">results</a>.<span title="(pf: PartialFunction[Either[Throwable,T],Left[Throwable,T]])(implicit bf: scala.collection.generic.CanBuildFrom[scala.collection.SeqView[Either[Throwable,T],Seq[_]],Left[Throwable,T],scala.collection.SeqView[Left[Throwable,T],Seq[_]]])scala.collection.SeqView[Left[Throwable,T],Seq[_]]">collect</span> <a href="#292450" title="Left[Throwable,T]" class="delimiter">{</a> <span class="keyword">case</span> <a title="Left[Throwable,T]" id="292451">l</a> @ Left<span class="delimiter">(</span>_<span class="delimiter">)</span> =&gt; <a href="#292451" title="Left[Throwable,T]">l</a> <span class="delimiter">}</span><span class="delimiter">)</span>
            <a href="#291135" title="scala.collection.SeqView[Right[Throwable,T],Seq[_]]">ok</a>.<span title="=&gt; Option[Right[Throwable,T]]">headOption</span> <span title="Either[Throwable,T]" class="keyword">match</span> <span class="delimiter">{</span>
              <span class="keyword">case</span> <span title="Right[Throwable,T]">Some</span><span class="delimiter">(</span><a title="Right[Throwable,T]" id="292537">r</a> @ Right<span class="delimiter">(</span>_<span class="delimiter">)</span><span class="delimiter">)</span> =&gt; <a href="#292537" title="Right[Throwable,T]">r</a>
              <span class="keyword">case</span> <a title="Left[java.lang.Exception,Nothing]" id="292539">other</a>              =&gt; <span class="delimiter">{</span>
                <span class="keyword">val</span> <a title="Throwable" id="292540">exception</a> = <a href="#291136" title="(idx: Int)Left[Throwable,T]">ko</a><span class="delimiter">(</span><span title="Int(0)" class="int">0</span><span class="delimiter">)</span>.<span title="=&gt; Throwable">a</span>
                <span title="(a: java.lang.Exception)Left[java.lang.Exception,Nothing]">Left</span><span class="delimiter">(</span><span title="(x$1: java.lang.String, x$2: java.lang.Throwable)java.lang.Exception" class="keyword">new</span> <span title="java.lang.Exception">Exception</span><span class="delimiter">(</span><span title="java.lang.String(&quot;Could not instantiate class &quot;)" class="string">&quot;Could not instantiate class &quot;</span><span title="(x$1: Any)java.lang.String">+</span><a href="#290620" title="java.lang.Class[Nothing]">c</a>.<span title="()java.lang.String">getName</span><span title="(x$1: Any)java.lang.String">+</span><span title="java.lang.String(&quot;: &quot;)" class="string">&quot;: &quot;</span><span title="(x$1: Any)java.lang.String">+</span><a href="#291136" title="scala.collection.SeqView[Left[Throwable,T],Seq[_]]">ko</a>.<span title="(pf: PartialFunction[Left[Throwable,T],java.lang.String])(implicit bf: scala.collection.generic.CanBuildFrom[scala.collection.SeqView[Left[Throwable,T],Seq[_]],java.lang.String,scala.collection.SeqView[java.lang.String,Seq[_]]])scala.collection.SeqView[java.lang.String,Seq[_]]">collect</span> <a href="#292589" title="java.lang.String" class="delimiter">{</a> <span class="keyword">case</span> <span title="java.lang.String">Left</span><span class="delimiter">(</span><a title="Throwable" id="292591">e</a><span class="delimiter">)</span> =&gt; <a href="#292591" title="Throwable">e</a>.<span title="()java.lang.String">getMessage</span><span class="delimiter">}</span>.<span title="(sep: String)String">mkString</span><span class="delimiter">(</span><span title="java.lang.String(&quot;, &quot;)" class="string">&quot;, &quot;</span><span class="delimiter">)</span>, <a href="#292540" title="Throwable">exception</a><span class="delimiter">)</span><span class="delimiter">)</span>
              <span class="delimiter">}</span>
            <span class="delimiter">}</span>
          <span class="delimiter">}</span>
        <span class="delimiter">}</span> <span class="keyword">catch</span> <span class="delimiter">{</span>
          <span class="keyword">case</span> <a title="Left[java.lang.Exception,Nothing]" id="292663">e</a>: <span title="Throwable">Throwable</span> =&gt; <span title="(a: java.lang.Exception)Left[java.lang.Exception,Nothing]">Left</span><span class="delimiter">(</span><span title="(x$1: java.lang.String, x$2: java.lang.Throwable)java.lang.Exception" class="keyword">new</span> <span title="java.lang.Exception">Exception</span><span class="delimiter">(</span><span title="java.lang.String(&quot;Could not instantiate class &quot;)" class="string">&quot;Could not instantiate class &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#290544" title="String">className</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot;: &quot;)" class="string">&quot;: &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#292663" title="java.lang.Throwable">e</a>.<span title="()java.lang.String">getMessage</span>, <a href="#292663" title="java.lang.Throwable">e</a><span class="delimiter">)</span><span class="delimiter">)</span>
        <span class="delimiter">}</span>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Given a class, a zero or one-paramenter constructor, return an instance of that class
   */</span>
  <span class="keyword">private</span> <span class="keyword">def</span> <a title="[T &lt;: AnyRef](c: Class[_], constructor: java.lang.reflect.Constructor[_], parameter: Option[AnyRef])(implicit evidence$1: scala.reflect.Manifest[T])Either[Throwable,T]" id="291734">createInstanceForConstructor</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: AnyRef" id="291738">T</a> &lt;: AnyRef : Manifest<span class="delimiter">]</span><span class="delimiter">(</span><a title="Class[_]" id="291731">c</a>: <span title="Class[_]">Class</span><span class="delimiter">[</span>_<span class="delimiter">]</span>, <a title="java.lang.reflect.Constructor[_]" id="291732">constructor</a>: <span title="java.lang.reflect.Constructor[_]">Constructor</span><span class="delimiter">[</span>_<span class="delimiter">]</span>, <a title="Option[AnyRef]" id="291736">parameter</a>: <span title="Option[AnyRef]">Option</span><span class="delimiter">[</span>AnyRef<span class="delimiter">]</span> = <span title="object None">None</span><span class="delimiter">)</span>: <span title="Either[Throwable,T]">Either</span><span class="delimiter">[</span>Throwable, T<span class="delimiter">]</span> = <span class="delimiter">{</span>
    <span title="Either[Throwable,T]" class="keyword">if</span> <span class="delimiter">(</span><a href="#291732" title="java.lang.reflect.Constructor[_]">constructor</a>.<span title="(xs: Array[java.lang.Class[_]])scala.collection.mutable.ArrayOps[java.lang.Class[_]]">getParameterTypes</span>.<span title="=&gt; Boolean">isEmpty</span><span class="delimiter">)</span>
      <a href="#126739" title="[T &lt;: AnyRef](c: Option[Class[T]])(implicit m: scala.reflect.Manifest[T])Either[Throwable,T]">createInstanceOfEither</a><span title="(c: Option[Class[T]])(implicit m: scala.reflect.Manifest[T])Either[Throwable,T]" class="delimiter">[</span><a href="#291738" title="T">T</a><span class="delimiter">]</span><a href="#291734" title="scala.reflect.Manifest[T]" class="delimiter">(</a><span title="[A](x: A)Some[A]">Some</span><span title="(x: Class[T])Some[Class[T]]" class="delimiter">[</span><span title="Class[T]">Class</span><span class="delimiter">[</span>T<span class="delimiter">]</span><span class="delimiter">]</span><span class="delimiter">(</span><a href="#291731" title="Class[_]">c</a>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="Class[T]" class="delimiter">[</span><span title="Class[T]">Class</span><span class="delimiter">[</span>T<span class="delimiter">]</span><span class="delimiter">]</span><span class="delimiter">)</span><span class="delimiter">)</span>
    <span class="keyword">else</span> <span title="Either[Throwable,T]" class="keyword">if</span> <span class="delimiter">(</span><a href="#291732" title="java.lang.reflect.Constructor[_]">constructor</a>.<span title="(xs: Array[java.lang.Class[_]])scala.collection.mutable.ArrayOps[java.lang.Class[_]]">getParameterTypes</span>.<span title="=&gt; Int">size</span> <span title="(x: Int)Boolean">==</span> <span title="Int(1)" class="int">1</span><span class="delimiter">)</span> <span class="delimiter">{</span>
      <span class="comment">// if the specification has a construction, it is either because it is a nested class</span>
      <span class="comment">// or if it has an Arguments parameter</span>
      <span class="comment">// or it might have a parameter that has a 0 args constructor</span>
      <span class="keyword">val</span> <a title="Option[T]" id="292991">outerClass</a> = <a href="#126727" title="[T &lt;: AnyRef](className: String, printMessage: Boolean, printStackTrace: Boolean, loader: java.lang.ClassLoader, parameter: Option[AnyRef])(implicit m: scala.reflect.Manifest[T])Option[T]">tryToCreateObject</a><a href="#290489" title="(className: String, printMessage: Boolean, printStackTrace: Boolean, loader: java.lang.ClassLoader, parameter: Option[AnyRef])(implicit m: scala.reflect.Manifest[T])Option[T]" class="delimiter">[</a><a href="#291738" title="T">T</a><span class="delimiter">]</span><a href="#291734" title="scala.reflect.Manifest[T]" class="delimiter">(</a><a href="ClassName.scala.html#51214" title="(c: Class[_])String">getOuterClassName</a><span class="delimiter">(</span><a href="#291731" title="Class[_]">c</a><span class="delimiter">)</span>, <span title="Boolean(false)" class="keyword">false</span>, <span title="Boolean(false)" class="keyword">false</span><span class="delimiter">)</span>
      <span class="keyword">val</span> <a title="Option[AnyRef]" id="292992">constructorParameter</a> =
        <a href="#292991" title="Option[T]">outerClass</a>.
        <span title="(alternative: =&gt; Option[AnyRef])Option[AnyRef]">orElse</span><span class="delimiter">(</span><a href="#291736" title="Option[AnyRef]">parameter</a><span class="delimiter">)</span>.
        <span title="(alternative: =&gt; Option[AnyRef])Option[AnyRef]">orElse</span><span class="delimiter">(</span><a href="#126727" title="[T &lt;: AnyRef](className: String, printMessage: Boolean, printStackTrace: Boolean, loader: java.lang.ClassLoader, parameter: Option[AnyRef])(implicit m: scala.reflect.Manifest[T])Option[T]">tryToCreateObject</a><a href="#290489" title="(className: String, printMessage: Boolean, printStackTrace: Boolean, loader: java.lang.ClassLoader, parameter: Option[AnyRef])(implicit m: scala.reflect.Manifest[AnyRef])Option[AnyRef]" class="delimiter">[</a><span title="AnyRef">AnyRef</span><span class="delimiter">]</span><span title="=&gt; scala.reflect.Manifest[java.lang.Object]" class="delimiter">(</span><a href="#291732" title="java.lang.reflect.Constructor[_]">constructor</a>.<span title="(xs: Array[java.lang.Class[_]])scala.collection.mutable.ArrayOps[java.lang.Class[_]]">getParameterTypes</span>.<span title="(idx: Int)java.lang.Class[_]">toSeq</span><span class="delimiter">(</span><span title="Int(0)" class="int">0</span><span class="delimiter">)</span>.<span title="()java.lang.String">getName</span>, <span title="Boolean(false)" class="keyword">false</span>, <span title="Boolean(false)" class="keyword">false</span><span class="delimiter">)</span><span class="delimiter">)</span>

      <a href="#292992" title="Option[AnyRef]">constructorParameter</a>.<span title="(f: AnyRef =&gt; T)Option[T]">map</span><span class="delimiter">(</span><a href="#291732" title="java.lang.reflect.Constructor[_]">constructor</a>.<span title="(x$1: &lt;repeated...&gt;[java.lang.Object])Any">newInstance</span><span class="delimiter">(</span><a href="#293171" title="AnyRef">_</a><span class="delimiter">)</span>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="T" class="delimiter">[</span><a href="#291738" title="T">T</a><span class="delimiter">]</span><span class="delimiter">)</span>.<span title="(left: =&gt; java.lang.Exception)Product with Serializable with Either[java.lang.Exception,T]">toRight</span> <span class="delimiter">{</span>
        <span title="(x$1: java.lang.String)java.lang.Exception" class="keyword">new</span> <span title="java.lang.Exception">Exception</span><span class="delimiter">(</span><span title="java.lang.String(&quot;can\'t create an instance of &quot;)" class="string">&quot;can't create an instance of &quot;</span><span title="(x$1: Any)java.lang.String">+</span><a href="#291731" title="Class[_]">c</a><span title="(x$1: Any)java.lang.String">+</span><span title="java.lang.String(&quot; for a constructor with parameter &quot;)" class="string">&quot; for a constructor with parameter &quot;</span><span title="(x$1: Any)java.lang.String">+</span><a href="#292992" title="Option[AnyRef]">constructorParameter</a><span class="delimiter">)</span>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>
    <span class="keyword">else</span> <span title="(a: java.lang.Exception)Left[java.lang.Exception,Nothing]">Left</span><span class="delimiter">(</span><span title="(x$1: java.lang.String)java.lang.Exception" class="keyword">new</span> <span title="java.lang.Exception">Exception</span><span class="delimiter">(</span><span title="java.lang.String(&quot;Can\'t find a suitable constructor for class &quot;)" class="string">&quot;Can't find a suitable constructor for class &quot;</span><span title="(x$1: Any)java.lang.String">+</span><a href="#291731" title="Class[_]">c</a>.<span title="()java.lang.String">getName</span><span class="delimiter">)</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>
  <span class="comment">/**
   * @return an instance of a given class, checking that the created instance typechecks as expected
   */</span>
  <span class="keyword">private</span><span class="delimiter">[</span>reflect<span class="delimiter">]</span> <span class="keyword">def</span> <a title="[T &lt;: AnyRef](c: Option[Class[T]])(implicit m: scala.reflect.Manifest[T])Option[T]" id="126736">createInstanceOf</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: AnyRef" id="126738">T</a> &lt;: AnyRef<span class="delimiter">]</span><span class="delimiter">(</span><a title="Option[Class[T]]" id="290396">c</a>: <span title="Option[Class[T]]">Option</span><span class="delimiter">[</span>Class<span class="delimiter">[</span>T<span class="delimiter">]</span><span class="delimiter">]</span><span class="delimiter">)</span><span class="delimiter">(</span><span class="keyword">implicit</span> <a title="scala.reflect.Manifest[T]" id="290397">m</a>: <span title="scala.reflect.Manifest[T]">Manifest</span><span class="delimiter">[</span>T<span class="delimiter">]</span><span class="delimiter">)</span>: <span title="Option[T]">Option</span><span class="delimiter">[</span>T<span class="delimiter">]</span> = <span class="delimiter">{</span>
    <a href="#290396" title="Option[Class[T]]">c</a>.<span title="(f: Class[T] =&gt; T)Option[T]">map</span><span class="delimiter">(</span><a href="#126742" title="(klass: Class[T])(implicit m: scala.reflect.Manifest[T])T">createInstanceFor</a><a href="#290397" title="scala.reflect.Manifest[T]" class="delimiter">(</a><a href="#293198" title="Class[T]">_</a><span class="delimiter">)</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>
  <span class="comment">/**
   * @return an instance of a given class, checking that the created instance typechecks as expected
   */</span>
  <span class="keyword">private</span><span class="delimiter">[</span>reflect<span class="delimiter">]</span> <span class="keyword">def</span> <a title="[T &lt;: AnyRef](c: Option[Class[T]])(implicit m: scala.reflect.Manifest[T])Either[Throwable,T]" id="126739">createInstanceOfEither</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: AnyRef" id="126741">T</a> &lt;: AnyRef<span class="delimiter">]</span><span class="delimiter">(</span><a title="Option[Class[T]]" id="292835">c</a>: <span title="Option[Class[T]]">Option</span><span class="delimiter">[</span>Class<span class="delimiter">[</span>T<span class="delimiter">]</span><span class="delimiter">]</span><span class="delimiter">)</span><span class="delimiter">(</span><span class="keyword">implicit</span> <a title="scala.reflect.Manifest[T]" id="292836">m</a>: <span title="scala.reflect.Manifest[T]">Manifest</span><span class="delimiter">[</span>T<span class="delimiter">]</span><span class="delimiter">)</span>: <span title="Either[Throwable,T]">Either</span><span class="delimiter">[</span>Throwable, T<span class="delimiter">]</span> = <span class="delimiter">{</span>
    <span class="keyword">try</span> <span class="delimiter">{</span> <a href="#292835" title="Option[Class[T]]">c</a>.<span title="(f: Class[T] =&gt; T)Option[T]">map</span><span class="delimiter">(</span><a href="#126742" title="(klass: Class[T])(implicit m: scala.reflect.Manifest[T])T">createInstanceFor</a><a href="#292836" title="scala.reflect.Manifest[T]" class="delimiter">(</a><a href="#293211" title="Class[T]">_</a><span class="delimiter">)</span><span class="delimiter">)</span>.<span title="(left: =&gt; java.lang.Exception)Product with Serializable with Either[java.lang.Exception,T]">toRight</span><span class="delimiter">(</span><span title="java.lang.Exception" class="keyword">new</span> <span title="java.lang.Exception">Exception</span><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">}</span>
    <span class="keyword">catch</span> <span class="delimiter">{</span> <span class="keyword">case</span> <a title="Left[java.lang.Throwable,Nothing]" id="293230">e</a> =&gt; <span title="(a: java.lang.Throwable)Left[java.lang.Throwable,Nothing]">Left</span><span class="delimiter">(</span><a href="#293230" title="java.lang.Throwable">e</a><span class="delimiter">)</span> <span class="delimiter">}</span>
  <span class="delimiter">}</span>
  <span class="comment">/**
   * @return an instance of a given class, checking that the created instance typechecks as expected
   */</span>
  <span class="keyword">private</span><span class="delimiter">[</span>reflect<span class="delimiter">]</span> <span class="keyword">def</span> <a title="[T &lt;: AnyRef](klass: Class[T])(implicit m: scala.reflect.Manifest[T])T" id="126742">createInstanceFor</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: AnyRef" id="126744">T</a> &lt;: AnyRef<span class="delimiter">]</span><span class="delimiter">(</span><a title="Class[T]" id="290322">klass</a>: <span title="Class[T]">Class</span><span class="delimiter">[</span>T<span class="delimiter">]</span><span class="delimiter">)</span><span class="delimiter">(</span><span class="keyword">implicit</span> <a title="scala.reflect.Manifest[T]" id="290323">m</a>: <span title="scala.reflect.Manifest[T]">Manifest</span><span class="delimiter">[</span>T<span class="delimiter">]</span><span class="delimiter">)</span>: <a href="#126744" title="T">T</a> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="java.lang.reflect.Constructor[_]" id="293235">constructor</a> = <a href="#290322" title="Class[T]">klass</a>.<span title="()Array[java.lang.reflect.Constructor[_]]">getDeclaredConstructors</span><span title="(i: Int)java.lang.reflect.Constructor[_]" class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">(</span><span title="Int(0)" class="int">0</span><span class="delimiter">)</span>
    <a href="#293235" title="java.lang.reflect.Constructor[_]">constructor</a>.<span title="(x$1: Boolean)Unit">setAccessible</span><span class="delimiter">(</span><span title="Boolean(true)" class="keyword">true</span><span class="delimiter">)</span>
  	<span class="keyword">try</span> <span class="delimiter">{</span>
      <span class="keyword">var</span> <a title="AnyRef" id="293238">instance</a>: <span title="AnyRef">AnyRef</span> = <a href="#293235" title="java.lang.reflect.Constructor[_]">constructor</a>.<span title="(x$1: &lt;repeated...&gt;[java.lang.Object])Any">newInstance</span><span class="delimiter">(</span><span class="delimiter">)</span>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="AnyRef" class="delimiter">[</span><span title="AnyRef">AnyRef</span><span class="delimiter">]</span>
      <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><span title="=&gt; Boolean">!</span><a href="#290323" title="scala.reflect.Manifest[T]">m</a>.<span title="=&gt; java.lang.Class[_]">erasure</span>.<span title="(x$1: Any)Boolean">isInstance</span><span class="delimiter">(</span><a href="#293238" title="AnyRef">instance</a><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">{</span>
        <span title="(message: String)Nothing">error</span><span class="delimiter">(</span><a href="#293238" title="implicit scala.Predef.any2stringadd : (x: Any)scala.runtime.StringAdd">instance</a> <span title="(other: String)java.lang.String">+</span> <span title="java.lang.String(&quot; is not an instance of &quot;)" class="string">&quot; is not an instance of &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#290323" title="scala.reflect.Manifest[T]">m</a>.<span title="=&gt; java.lang.Class[_]">erasure</span>.<span title="()java.lang.String">getName</span><span class="delimiter">)</span>
      <span class="delimiter">}</span>
      <a href="#293238" title="AnyRef">instance</a>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="T" class="delimiter">[</span><a href="#126744" title="T">T</a><span class="delimiter">]</span>
  	<span class="delimiter">}</span> <span class="keyword">catch</span> <span class="delimiter">{</span>
  	  <span class="keyword">case</span> <a title="Nothing" id="293243">e</a>: java.lang.reflect.<span title="java.lang.reflect.InvocationTargetException">InvocationTargetException</span> =&gt; <span title="Nothing" class="keyword">throw</span> <a href="#293243" title="java.lang.reflect.InvocationTargetException">e</a>.<span title="()java.lang.Throwable">getTargetException</span>
  	<span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Load a class, given the class name
   * 
   * If the 'debugLoadClass' property is set, then an error message is printed out to the Console
   */</span>
  <span class="keyword">private</span><span class="delimiter">[</span>reflect<span class="delimiter">]</span> <span class="keyword">def</span> <a title="[T &lt;: AnyRef](className: String, loader: java.lang.ClassLoader)Option[Class[T]]" id="126745">loadClass</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: AnyRef" id="290408">T</a> &lt;: AnyRef<span class="delimiter">]</span><span class="delimiter">(</span><a title="String" id="290403">className</a>: <span title="String">String</span>, <a title="java.lang.ClassLoader" id="290406">loader</a>: <span title="java.lang.ClassLoader">ClassLoader</span> = <span title="object java.lang.Thread">Thread</span>.<span title="()java.lang.Thread">currentThread</span>.<span title="()java.lang.ClassLoader">getContextClassLoader</span><span class="delimiter">)</span>: <span title="Option[Class[T]]">Option</span><span class="delimiter">[</span>Class<span class="delimiter">[</span>T<span class="delimiter">]</span><span class="delimiter">]</span> = <span class="delimiter">{</span>
    <a href="#126749" title="(className: String, loader: java.lang.ClassLoader)Either[Throwable,Class[Nothing]]">loadClassEither</a><span class="delimiter">(</span><a href="#290403" title="String">className</a>, <a href="#290406" title="java.lang.ClassLoader">loader</a><span class="delimiter">)</span> <span title="Option[Class[T]]" class="keyword">match</span> <span class="delimiter">{</span>
      <span class="keyword">case</span> <span title="Some[Class[T]]">Right</span><span class="delimiter">(</span><a title="Class[Nothing]" id="293263">c</a><span class="delimiter">)</span> =&gt; <span title="(x: Class[T])Some[Class[T]]">Some</span><span class="delimiter">(</span><a href="#293263" title="Class[Nothing]">c</a>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="Class[T]" class="delimiter">[</span><span title="Class[T]">Class</span><span class="delimiter">[</span>T<span class="delimiter">]</span><span class="delimiter">]</span><span class="delimiter">)</span>
      <span class="keyword">case</span> <span title="None.type">Left</span><span class="delimiter">(</span><a title="Throwable" id="293268">e</a><span class="delimiter">)</span>  =&gt; <span class="delimiter">{</span>
        <a href="#126748" title="(className: String, loader: java.lang.ClassLoader, e: Throwable)Unit">printError</a><span class="delimiter">(</span><a href="#290403" title="String">className</a>, <a href="#290406" title="java.lang.ClassLoader">loader</a>, <a href="#293268" title="Throwable">e</a><span class="delimiter">)</span>
        <span title="object None">None</span>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(className: String, loader: java.lang.ClassLoader, e: Throwable)Unit" id="126748">printError</a><span class="delimiter">(</span><a title="String" id="293269">className</a>: <span title="String">String</span>, <a title="java.lang.ClassLoader" id="293270">loader</a>: <span title="java.lang.ClassLoader">ClassLoader</span>, <a title="Throwable" id="293271">e</a>: <span title="Throwable">Throwable</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span>sys.<span title="(key: String)String">props</span><span class="delimiter">(</span><span title="java.lang.String(&quot;debugLoadClass&quot;)" class="string">&quot;debugLoadClass&quot;</span><span class="delimiter">)</span> <span title="(x$1: AnyRef)Boolean">!=</span> <span title="Null(null)" class="keyword">null</span><span class="delimiter">)</span> <span class="delimiter">{</span>
      <a href="../io/Output.scala.html#16415" title="(m: Any)Unit">println</a><span class="delimiter">(</span><span title="java.lang.String(&quot;loader is &quot;)" class="string">&quot;loader is &quot;</span><span title="(x$1: Any)java.lang.String">+</span><a href="#293270" title="java.lang.ClassLoader">loader</a><span class="delimiter">)</span>
      <a href="../io/Output.scala.html#16415" title="(m: Any)Unit">println</a><span class="delimiter">(</span><span title="java.lang.String(&quot;Could not load class &quot;)" class="string">&quot;Could not load class &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#293269" title="String">className</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot;: &quot;)" class="string">&quot;: &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#293271" title="Throwable">e</a>.<span title="()java.lang.String">getMessage</span><span class="delimiter">)</span>
      <a href="#293271" title="Throwable">e</a>.<span title="(xs: Array[java.lang.StackTraceElement])scala.collection.mutable.ArrayOps[java.lang.StackTraceElement]">getStackTrace</span> <span title="(f: java.lang.StackTraceElement =&gt; Unit)Unit">foreach</span> <span class="delimiter">(</span><a title="java.lang.StackTraceElement" id="293897">s</a> =&gt; <a href="../io/Output.scala.html#16415" title="(m: Any)Unit">println</a><span class="delimiter">(</span><a href="#293897" title="java.lang.StackTraceElement">s</a>.<span title="()java.lang.String">toString</span><span class="delimiter">)</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Load a class, given the class name
   *
   * If the 'debugLoadClass' property is set, then an error message is printed out to the Console
   */</span>
  <span class="keyword">private</span><span class="delimiter">[</span>reflect<span class="delimiter">]</span> <span class="keyword">def</span> <a title="[T &lt;: AnyRef](className: String, loader: java.lang.ClassLoader)Either[Throwable,Class[T]]" id="126749">loadClassEither</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: AnyRef" id="290611">T</a> &lt;: AnyRef<span class="delimiter">]</span><span class="delimiter">(</span><a title="String" id="290606">className</a>: <span title="String">String</span>, <a title="java.lang.ClassLoader" id="290609">loader</a>: <span title="java.lang.ClassLoader">ClassLoader</span> = <span title="object java.lang.Thread">Thread</span>.<span title="()java.lang.Thread">currentThread</span>.<span title="()java.lang.ClassLoader">getContextClassLoader</span><span class="delimiter">)</span>:
    <span title="Either[Throwable,Class[T]]">Either</span><span class="delimiter">[</span>Throwable, Class<span class="delimiter">[</span>T<span class="delimiter">]</span><span class="delimiter">]</span> = <span class="delimiter">{</span>
    <a href="../control/Exceptions.scala.html#15383" title="(a: =&gt; Class[T])(implicit f: Exception =&gt; Throwable)Either[Throwable,Class[T]]">trye</a><span class="delimiter">(</span><a href="#126752" title="(className: String, loader: java.lang.ClassLoader)Class[Nothing]">loadClassOf</a><span class="delimiter">(</span><a href="#290606" title="String">className</a>, <a href="#290609" title="java.lang.ClassLoader">loader</a><span class="delimiter">)</span>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="Class[T]" class="delimiter">[</span><span title="Class[T]">Class</span><span class="delimiter">[</span>T<span class="delimiter">]</span><span class="delimiter">]</span><span class="delimiter">)</span> <a href="#294000" title="Throwable" class="delimiter">{</a> <span class="keyword">case</span> <a title="Exception" id="294001">e</a> =&gt;
      <a href="#126748" title="(className: String, loader: java.lang.ClassLoader, e: Throwable)Unit">printError</a><span class="delimiter">(</span><a href="#290606" title="String">className</a>, <a href="#290609" title="java.lang.ClassLoader">loader</a>, <a href="#294001" title="Exception">e</a><span class="delimiter">)</span>
      <a href="#294001" title="Exception">e</a>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>
  <span class="comment">/**
   * Load a class, given the class name, without catching exceptions
   */</span>
  <span class="keyword">private</span><span class="delimiter">[</span>specs2<span class="delimiter">]</span> <span class="keyword">def</span> <a title="[T &lt;: AnyRef](className: String, loader: java.lang.ClassLoader)Class[T]" id="126752">loadClassOf</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: AnyRef" id="290336">T</a> &lt;: AnyRef<span class="delimiter">]</span><span class="delimiter">(</span><a title="String" id="290334">className</a>: <span title="String">String</span> = <span title="java.lang.String(&quot;&quot;)" class="string">&quot;&quot;</span>, <a title="java.lang.ClassLoader" id="290337">loader</a>: <span title="java.lang.ClassLoader">ClassLoader</span> = <span title="object java.lang.Thread">Thread</span>.<span title="()java.lang.Thread">currentThread</span>.<span title="()java.lang.ClassLoader">getContextClassLoader</span><span class="delimiter">)</span>: <span title="Class[T]">Class</span><span class="delimiter">[</span>T<span class="delimiter">]</span> = <span class="delimiter">{</span>
    <a href="#290337" title="java.lang.ClassLoader">loader</a>.<span title="(x$1: java.lang.String)java.lang.Class[_]">loadClass</span><span class="delimiter">(</span><a href="#290334" title="String">className</a><span class="delimiter">)</span>.<span title="[T0]=&gt; T0">asInstanceOf</span><span title="Class[T]" class="delimiter">[</span><span title="Class[T]">Class</span><span class="delimiter">[</span>T<span class="delimiter">]</span><span class="delimiter">]</span>
  <span class="delimiter">}</span>
<span class="delimiter">}</span>
<span class="comment">/**
 * This object provides simple functions to instantiate classes.
 */</span>
<span class="keyword">private</span><span class="delimiter">[</span>specs2<span class="delimiter">]</span>
<span class="keyword">object</span> <a title="object org.specs2.reflect.Classes" id="11872">Classes</a> <span title="ScalaObject" class="keyword">extends</span> <a href="#11871" title="org.specs2.reflect.Classes">Classes</a> <span class="keyword">with</span> <a href="../io/ConsoleOutput.scala.html#10454" title="org.specs2.io.ConsoleOutput">ConsoleOutput</a>

        </pre>
    </body>
</html>