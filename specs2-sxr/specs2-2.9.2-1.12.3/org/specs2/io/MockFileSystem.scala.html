<?xml version="1.0" encoding="utf-8"?>
      <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <meta http-equiv="Expires" content="0" />
        <title>org/specs2/io/MockFileSystem.scala</title>
        <script type="text/javascript" src="../../../jquery-all.js"></script>
        <script type="text/javascript" src="../../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../../style.css" title="Style"></link>
    </head>
    <body>
        <pre>
<span class="keyword">package</span> org.specs2
<span class="keyword">package</span> io
<span class="keyword">import</span> scala.collection.mutable. <span class="delimiter">{</span> ListBuffer, HashMap <span class="delimiter">}</span>
<span class="keyword">import</span> control.<a href="../control/Exceptions.scala.html#9922" title="object org.specs2.control.Exceptions">Exceptions</a>._
<span class="keyword">import</span> scala.xml.NodeSeq
<span class="keyword">import</span> scala.io.<span title="object scala.io.Source">Source</span>._
<span class="keyword">import</span> scala.xml.parsing.XhtmlParser
<span class="keyword">import</span> xml.<a href="../xml/Nodex.scala.html#13373" title="object org.specs2.xml.Nodex">Nodex</a>._
<span class="keyword">import</span> java.io.File

<span class="comment">/**
 * The MockFileSystem trait mocks the FileSystem by storing a Map[path, content] representing the content of the FileSystem
 */</span>
<span class="keyword">trait</span> <a title="trait MockFileSystem extends java.lang.Object with org.specs2.io.FileSystem with ScalaObject" id="10521">MockFileSystem</a> <span title="ScalaObject" class="keyword">extends</span> <a href="FileSystem.scala.html#10481" title="org.specs2.io.FileSystem">FileSystem</a> <span class="delimiter">{</span>

  <span class="comment">/** default extension which can be used when creating default file names */</span>
  <span class="keyword">var</span> <a title="java.lang.String" id="155806">defaultExtension</a> = <span title="java.lang.String(&quot;&quot;)" class="string">&quot;&quot;</span>

  <span class="comment">/** this map associates some file paths with file contents */</span>
  <span class="keyword">var</span> <a title="scala.collection.mutable.HashMap[String,String]" id="155809">files</a> = <span title="()scala.collection.mutable.HashMap[String,String]" class="keyword">new</span> <span title="scala.collection.mutable.HashMap[String,String]">HashMap</span><span class="delimiter">[</span>String, String<span class="delimiter">]</span>

  <span class="comment">/** this list registers created directories*/</span>
  <span class="keyword">var</span> <a title="List[String]" id="155812">createdDirs</a> = List<span class="delimiter">[</span>String<span class="delimiter">]</span><span title="object Nil" class="delimiter">(</span><span class="delimiter">)</span>

  <span class="comment">/** this map associates some file paths with children paths */</span>
  <span class="keyword">var</span> <a title="scala.collection.mutable.HashMap[String,scala.collection.mutable.ListBuffer[String]]" id="155815">children</a> = <span title="()scala.collection.mutable.HashMap[String,scala.collection.mutable.ListBuffer[String]]" class="keyword">new</span> <span title="scala.collection.mutable.HashMap[String,scala.collection.mutable.ListBuffer[String]]">HashMap</span><span class="delimiter">[</span>String, ListBuffer<span class="delimiter">[</span>String<span class="delimiter">]</span><span class="delimiter">]</span>

  <span class="comment">/** this list stores readable files */</span>
  <span class="keyword">var</span> <a title="List[String]" id="155818">readableFiles</a> = List<span class="delimiter">[</span>String<span class="delimiter">]</span><span title="object Nil" class="delimiter">(</span><span class="delimiter">)</span>

  <span class="comment">/** this list stores writable files */</span>
  <span class="keyword">var</span> <a title="List[String]" id="155821">writableFiles</a> = List<span class="delimiter">[</span>String<span class="delimiter">]</span><span title="object Nil" class="delimiter">(</span><span class="delimiter">)</span>

  <span class="comment">/** @return the content of a file corresponding to a given path */</span>
  <span class="keyword">override</span> <span class="keyword">def</span> <a title="(path: String)scala.collection.immutable.IndexedSeq[java.lang.String]" id="155823">readLines</a><span class="delimiter">(</span><a title="String" id="155940">path</a>: <span title="String">String</span><span class="delimiter">)</span> = <a href="#155824" title="(path: String)String">readFile</a><span class="delimiter">(</span><a href="#155940" title="String">path</a><span class="delimiter">)</span>.<span title="(x$1: java.lang.String)Array[java.lang.String]">split</span><span title="(xs: Array[java.lang.String])scala.collection.mutable.ArrayOps[java.lang.String]" class="delimiter">(</span><span title="java.lang.String(&quot;\012&quot;)" class="string">&quot;\n&quot;</span><span class="delimiter">)</span>.<span title="scala.collection.immutable.IndexedSeq[java.lang.String]">toIndexedSeq</span>

  <span class="comment">/** @return the content of a file corresponding to a given path */</span>
  <span class="keyword">override</span> <span class="keyword">def</span> <a title="(path: String)String" id="155824">readFile</a><span class="delimiter">(</span><a title="String" id="155943">path</a>: <span title="String">String</span><span class="delimiter">)</span> = <a href="#155809" title="(key: String)String">files</a><span class="delimiter">(</span><a href="#155943" title="String">path</a><span class="delimiter">)</span>

  <span class="comment">/** @return all file paths */</span>
  <span class="keyword">override</span> <span class="keyword">def</span> <a title="(basePath: String, path: String, verbose: Boolean)List[String]" id="155825">filePaths</a><span class="delimiter">(</span><a title="String" id="156190">basePath</a>: <span title="String">String</span> = <span title="java.lang.String(&quot;.&quot;)" class="string">&quot;.&quot;</span>, <a title="String" id="156191">path</a>: <span title="String">String</span> = <span title="java.lang.String(&quot;*&quot;)" class="string">&quot;*&quot;</span>, <a title="Boolean" id="156192">verbose</a>: <span title="Boolean">Boolean</span> = <span title="Boolean(false)" class="keyword">false</span><span class="delimiter">)</span> = <a href="#155809" title="=&gt; scala.collection.mutable.HashMap[String,String]">files</a>.<span title="=&gt; scala.collection.Set[String]">keySet</span>.<span title="=&gt; List[String]">toList</span>

  <span class="comment">/** adds a new file to the FileSystem. The file path will be a default one */</span>
  <span class="keyword">def</span> <a title="(content: String)Unit" id="155826">addFile</a><span class="delimiter">(</span><a title="String" id="156215">content</a>: <span title="String">String</span><span class="delimiter">)</span>: <span title="Unit">Unit</span> = <a href="#155827" title="(path: String, content: String)Unit">addFile</a><span class="delimiter">(</span><a href="#155840" title="=&gt; java.lang.String">defaultFilePath</a>, <a href="#156215" title="String">content</a><span class="delimiter">)</span>

  <span class="comment">/** adds a new file to the FileSystem with a specific file path */</span>
  <span class="keyword">def</span> <a title="(path: String, content: String)Unit" id="155827">addFile</a><span class="delimiter">(</span><a title="String" id="156221">path</a>: <span title="String">String</span>, <a title="String" id="156222">content</a>: <span title="String">String</span><span class="delimiter">)</span> = <span class="delimiter">{</span>
    <a href="#155809" title="=&gt; scala.collection.mutable.HashMap[String,String]">files</a> <span title="(kv: (java.lang.String, java.lang.String))scala.collection.mutable.HashMap[String,String]">+=</span> <span title="(x: String, y: String)(String, String)">Pair</span><span class="delimiter">(</span><a href="#156221" title="String">path</a>, <a href="#156222" title="String">content</a><span class="delimiter">)</span>
    <a href="#155818" title="(x$1: List[String])Unit">readableFiles</a> <span title="(x: String)List[String]">::=</span> <a href="#156221" title="String">path</a>
    <a href="#155821" title="(x$1: List[String])Unit">writableFiles</a> <span title="(x: String)List[String]">::=</span> <a href="#156221" title="String">path</a>
  <span class="delimiter">}</span>
  <span class="comment">/** adds a new child to a given file */</span>
  <span class="keyword">def</span> <a title="(parent: String, child: String)Unit" id="155828">addChild</a><span class="delimiter">(</span><a title="String" id="156275">parent</a>: <span title="String">String</span>, <a title="String" id="156276">child</a>: <span title="String">String</span><span class="delimiter">)</span>: <span title="Unit">Unit</span> = <span class="delimiter">{</span>
    <a href="#155815" title="=&gt; scala.collection.mutable.HashMap[String,scala.collection.mutable.ListBuffer[String]]">children</a>.<span title="(key: String)Option[scala.collection.mutable.ListBuffer[String]]">get</span><span class="delimiter">(</span><a href="#156275" title="String">parent</a><span class="delimiter">)</span> <span title="Any" class="keyword">match</span> <span class="delimiter">{</span>
      <span class="keyword">case</span> <span title="Unit">Some</span><span class="delimiter">(</span><a title="scala.collection.mutable.ListBuffer[String]" id="156312">l</a><span class="delimiter">)</span> =&gt; <span title="Unit" class="delimiter">(</span><span class="delimiter">)</span> 
      <span class="keyword">case</span> <span title="Option[scala.collection.mutable.ListBuffer[String]]">None</span> =&gt; <a href="#155815" title="=&gt; scala.collection.mutable.HashMap[String,scala.collection.mutable.ListBuffer[String]]">children</a>.<span title="(key: String, value: scala.collection.mutable.ListBuffer[String])Option[scala.collection.mutable.ListBuffer[String]]">put</span><span class="delimiter">(</span><a href="#156275" title="String">parent</a>, <span title="scala.collection.mutable.ListBuffer[String]" class="keyword">new</span> <span title="scala.collection.mutable.ListBuffer[String]">ListBuffer</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>
    <a href="#155815" title="=&gt; scala.collection.mutable.HashMap[String,scala.collection.mutable.ListBuffer[String]]">children</a>.<span title="(key: String)Option[scala.collection.mutable.ListBuffer[String]]">get</span><span class="delimiter">(</span><a href="#156275" title="String">parent</a><span class="delimiter">)</span>.<span title="=&gt; scala.collection.mutable.ListBuffer[String]">get</span> <span title="(x: java.lang.String)scala.collection.mutable.ListBuffer[String]">+=</span> <a href="#156276" title="String">child</a>
  <span class="delimiter">}</span>
  <span class="comment">/** sets a file as readable */</span>
  <span class="keyword">def</span> <a title="(path: String)String" id="155829">setReadable</a><span class="delimiter">(</span><a title="String" id="156646">path</a>: <span title="String">String</span><span class="delimiter">)</span> = <span class="delimiter">{</span>
    <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><span title="=&gt; Boolean">!</span><a href="#155833" title="(path: String)Boolean">canRead</a><span class="delimiter">(</span><a href="#156646" title="String">path</a><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">(</span><a href="#155818" title="(x$1: List[String])Unit">readableFiles</a> <span title="(x: String)List[String]">::=</span> <a href="#156646" title="String">path</a><span class="delimiter">)</span>
    <a href="#156646" title="String">path</a>
  <span class="delimiter">}</span>
  <span class="comment">/** sets a file as writable */</span>
  <span class="keyword">def</span> <a title="(path: String)String" id="155830">setWritable</a><span class="delimiter">(</span><a title="String" id="156670">path</a>: <span title="String">String</span><span class="delimiter">)</span> = <span class="delimiter">{</span>
    <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><span title="=&gt; Boolean">!</span><a href="#155834" title="(path: String)Boolean">canWrite</a><span class="delimiter">(</span><a href="#156670" title="String">path</a><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">(</span><a href="#155821" title="(x$1: List[String])Unit">writableFiles</a> <span title="(x: String)List[String]">::=</span> <a href="#156670" title="String">path</a><span class="delimiter">)</span>
    <a href="#156670" title="String">path</a>
  <span class="delimiter">}</span>
  <span class="comment">/** sets a file as not readable */</span>
  <span class="keyword">def</span> <a title="(path: String)String" id="155831">setNotReadable</a><span class="delimiter">(</span><a title="String" id="156694">path</a>: <span title="String">String</span><span class="delimiter">)</span> = <span class="delimiter">{</span>
    <a href="#155818" title="(x$1: List[String])Unit">readableFiles</a> = <a href="#155818" title="=&gt; List[String]">readableFiles</a>.<span title="(p: String =&gt; Boolean)List[String]">filterNot</span><span class="delimiter">(</span><a href="#156702" title="String">_</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="#156694" title="String">path</a><span class="delimiter">)</span>
    <a href="#156694" title="String">path</a>
  <span class="delimiter">}</span>
  <span class="comment">/** sets a file as not writable */</span>
  <span class="keyword">def</span> <a title="(path: String)String" id="155832">setNotWritable</a><span class="delimiter">(</span><a title="String" id="156707">path</a>: <span title="String">String</span><span class="delimiter">)</span> = <span class="delimiter">{</span>
    <a href="#155821" title="(x$1: List[String])Unit">writableFiles</a> = <a href="#155821" title="=&gt; List[String]">writableFiles</a>.<span title="(p: String =&gt; Boolean)List[String]">filterNot</span><span class="delimiter">(</span><a href="#156715" title="String">_</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="#156707" title="String">path</a><span class="delimiter">)</span>
    <a href="#156707" title="String">path</a>
  <span class="delimiter">}</span>
  <span class="comment">/** overrides the canRead definition checking in the readableFiles list */</span>
  <span class="keyword">override</span> <span class="keyword">def</span> <a title="(path: String)Boolean" id="155833">canRead</a><span class="delimiter">(</span><a title="String" id="156649">path</a>: <span title="String">String</span><span class="delimiter">)</span> = <a href="#155818" title="=&gt; List[String]">readableFiles</a>.<span title="(p: String =&gt; Boolean)Boolean">exists</span><span class="delimiter">(</span><a href="#156660" title="String">_</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="#156649" title="String">path</a><span class="delimiter">)</span>
  <span class="comment">/** overrides the canWrite definition checking in the writableFiles list */</span>
  <span class="keyword">override</span> <span class="keyword">def</span> <a title="(path: String)Boolean" id="155834">canWrite</a><span class="delimiter">(</span><a title="String" id="156673">path</a>: <span title="String">String</span><span class="delimiter">)</span> = <a href="#155821" title="=&gt; List[String]">writableFiles</a>.<span title="(p: String =&gt; Boolean)Boolean">exists</span><span class="delimiter">(</span><a href="#156684" title="String">_</a> <span title="(x$1: AnyRef)Boolean">==</span> <a href="#156673" title="String">path</a><span class="delimiter">)</span>
  <span class="comment">/** overrides the isAbsolute definition checking if it starts with / (partial definition) */</span>
  <span class="keyword">override</span> <span class="keyword">def</span> <a title="(path: String)Boolean" id="155835">isAbsolute</a><span class="delimiter">(</span><a title="String" id="156720">path</a>: <span title="String">String</span><span class="delimiter">)</span> = <a href="#156720" title="String">path</a>.<span title="(x$1: java.lang.String)Boolean">startsWith</span><span class="delimiter">(</span><span title="java.lang.String(&quot;/&quot;)" class="string">&quot;/&quot;</span><span class="delimiter">)</span> <span title="(x: Boolean)Boolean">||</span> <a href="#156720" title="String">path</a>.<span title="(x$1: java.lang.String)Boolean">startsWith</span><span class="delimiter">(</span><span title="java.lang.String(&quot;\\&quot;)" class="string">&quot;\\&quot;</span><span class="delimiter">)</span>
  <span class="comment">/** overrides the isHidden definition checking if it starts with . (partial definition) */</span>
  <span class="keyword">override</span> <span class="keyword">def</span> <a title="(path: String)Boolean" id="155836">isHidden</a><span class="delimiter">(</span><a title="String" id="156727">path</a>: <span title="String">String</span><span class="delimiter">)</span> = <a href="#156727" title="String">path</a>.<span title="(x$1: java.lang.String)Boolean">startsWith</span><span class="delimiter">(</span><span title="java.lang.String(&quot;.&quot;)" class="string">&quot;.&quot;</span><span class="delimiter">)</span>
  <span class="comment">/** overrides the isFile definition checking if it doesn't end with / (partial definition) */</span>
  <span class="keyword">override</span> <span class="keyword">def</span> <a title="(path: String)Boolean" id="155837">isFile</a><span class="delimiter">(</span><a title="String" id="156732">path</a>: <span title="String">String</span><span class="delimiter">)</span> = <a href="#156732" title="String">path</a>.<span title="(x$1: java.lang.String)Boolean">matches</span><span class="delimiter">(</span><span title="java.lang.String(&quot;.*\\..*&quot;)" class="string">&quot;.*\\..*&quot;</span><span class="delimiter">)</span>
  <span class="comment">/** overrides the isDirectory definition checking if it ends with / (partial definition) */</span>
  <span class="keyword">override</span> <span class="keyword">def</span> <a title="(path: String)Boolean" id="155838">isDirectory</a><span class="delimiter">(</span><a title="String" id="156735">path</a>: <span title="String">String</span><span class="delimiter">)</span> = <span title="=&gt; Boolean">!</span><a href="#155837" title="(path: String)Boolean">isFile</a><span class="delimiter">(</span><a href="#156735" title="String">path</a><span class="delimiter">)</span>
  <span class="comment">/** overrides the listFiles definition */</span>
  <span class="keyword">override</span> <span class="keyword">def</span> <a title="(path: String)List[String]" id="155839">listFiles</a><span class="delimiter">(</span><a title="String" id="156738">path</a>: <span title="String">String</span><span class="delimiter">)</span> = <a href="#155815" title="=&gt; scala.collection.mutable.HashMap[String,scala.collection.mutable.ListBuffer[String]]">children</a>.<span title="(key: String)Option[scala.collection.mutable.ListBuffer[String]]">get</span><span class="delimiter">(</span><a href="#156738" title="String">path</a>.<span title="(x$1: java.lang.String, x$2: java.lang.String)java.lang.String">replaceAll</span><span class="delimiter">(</span><span title="java.lang.String(&quot;\\\\&quot;)" class="string">&quot;\\\\&quot;</span>, <span title="java.lang.String(&quot;/&quot;)" class="string">&quot;/&quot;</span><span class="delimiter">)</span><span class="delimiter">)</span>.<span title="(f: scala.collection.mutable.ListBuffer[String] =&gt; List[String])Option[List[String]]">map</span><span class="delimiter">(</span><a href="#156750" title="scala.collection.mutable.ListBuffer[String]">_</a>.<span title="=&gt; List[String]">toList</span><span class="delimiter">)</span>.<span title="(default: =&gt; List[String])List[String]">getOrElse</span><span class="delimiter">(</span><span title="object Nil">Nil</span><span class="delimiter">)</span>
  <span class="comment">/** @return a default file path. All default file paths will be different from each other */</span>
  <span class="keyword">def</span> <a title="=&gt; java.lang.String" id="155840">defaultFilePath</a> = <span title="java.lang.String(&quot;name&quot;)" class="string">&quot;name&quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#155809" title="=&gt; scala.collection.mutable.HashMap[String,String]">files</a>.<span title="=&gt; Int">size</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#155806" title="=&gt; java.lang.String">defaultExtension</a>

  <span class="comment">/** creates a file with the specified path but an empty content */</span>
  <span class="keyword">override</span> <span class="keyword">def</span> <a title="(path: String)Boolean" id="155841">createFile</a><span class="delimiter">(</span><a title="String" id="156768">path</a>: <span title="String">String</span><span class="delimiter">)</span> = <span class="delimiter">{</span><a href="#155809" title="=&gt; scala.collection.mutable.HashMap[String,String]">files</a> <span title="(kv: (java.lang.String, java.lang.String))scala.collection.mutable.HashMap[String,String]">+=</span> <span class="delimiter">(</span><a href="#156768" title="(x: String)ArrowAssoc[String]">path</a> <span title="(y: java.lang.String)(String, java.lang.String)">-&gt;</span> <span title="java.lang.String(&quot;&quot;)" class="string">&quot;&quot;</span><span class="delimiter">)</span>; <span title="Boolean(true)" class="keyword">true</span><span class="delimiter">}</span>

  <span class="comment">/** delete a file with the specified path */</span>
  <span class="keyword">override</span> <span class="keyword">def</span> <a title="(path: String)Boolean" id="155842">delete</a><span class="delimiter">(</span><a title="String" id="156809">path</a>: <span title="String">String</span><span class="delimiter">)</span> = <span class="delimiter">{</span><a href="#155809" title="=&gt; scala.collection.mutable.HashMap[String,String]">files</a> <span title="(key: java.lang.String)scala.collection.mutable.HashMap[String,String]">-=</span> <a href="#156809" title="String">path</a>; <span title="Boolean(true)" class="keyword">true</span><span class="delimiter">}</span>

  <span class="comment">/** create a new directory */</span>
  <span class="keyword">override</span> <span class="keyword">def</span> <a title="(path: String)Boolean" id="155843">mkdirs</a><span class="delimiter">(</span><a title="String" id="156833">path</a>: <span title="String">String</span><span class="delimiter">)</span> = <span class="delimiter">{</span> <a href="#155812" title="(x$1: List[String])Unit">createdDirs</a> = <a href="#156833" title="String">path</a> <a href="#156836" title="(x: String)List[String]">::</a> <a href="#155812" title="=&gt; List[String]">createdDirs</a>; <span title="Boolean(true)" class="keyword">true</span> <span class="delimiter">}</span>
  <span class="comment">/** create a new directory */</span>
  <span class="keyword">override</span> <span class="keyword">def</span> <a title="(path: String)Boolean" id="155844">createDir</a><span class="delimiter">(</span><a title="String" id="156840">path</a>: <span title="String">String</span><span class="delimiter">)</span> = <a href="#155843" title="(path: String)Boolean">mkdirs</a><span class="delimiter">(</span><a href="#156840" title="String">path</a><span class="delimiter">)</span>

  <span class="comment">/** @return a mock FileWriter for a specific path */</span>
  <span class="keyword">override</span> <span class="keyword">def</span> <a title="(path: String, append: Boolean)MockFileSystem.this.MockFileWriter" id="155845">getWriter</a><span class="delimiter">(</span><a title="String" id="156843">path</a>: <span title="String">String</span>, <a title="Boolean" id="156847">append</a>: <span title="Boolean">Boolean</span> = <span title="Boolean(false)" class="keyword">false</span><span class="delimiter">)</span> = <a href="#156850" title="(path: String)MockFileSystem.this.MockFileWriter">MockFileWriter</a><span class="delimiter">(</span><a href="#156843" title="String">path</a><span class="delimiter">)</span>

  case <span class="keyword">class</span> <a title="class MockFileWriter extends java.io.Writer with org.specs2.io.MockWriter with ScalaObject with Product with Serializable" id="156850">MockFileWriter</a><a href="#156850" title="ScalaObject" class="delimiter">(</a><a title="String" id="156858">path</a>: <span title="String">String</span><span class="delimiter">)</span> <span class="keyword">extends</span> <a href="MockWriter.scala.html#10530" title="org.specs2.io.MockWriter">MockWriter</a> <span class="delimiter">{</span>
    <span class="keyword">override</span> <span class="keyword">def</span> <a title="(m: String)Unit" id="156855">write</a><span class="delimiter">(</span><a title="String" id="156869">m</a>: <span title="String">String</span><span class="delimiter">)</span>: <span title="Unit">Unit</span> = <a href="#155809" title="(key: String, value: String)Unit">files</a><span class="delimiter">(</span><a href="#156858" title="=&gt; String">path</a><span class="delimiter">)</span> = <a href="#155809" title="=&gt; scala.collection.mutable.HashMap[String,String]">files</a>.<span title="(key: String, default: =&gt; String)String">getOrElse</span><span class="delimiter">(</span><a href="#156858" title="=&gt; String">path</a>, <span title="java.lang.String(&quot;&quot;)" class="string">&quot;&quot;</span><span class="delimiter">)</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#156869" title="String">m</a>
  <span class="delimiter">}</span>
  <span class="comment">/** removes all specified files */</span>
  <span class="keyword">def</span> <a title="=&gt; MockFileSystem.this.type" id="155849">reset</a>: <span class="keyword">this</span>.<span class="keyword">type</span> = <span class="delimiter">{</span>
    <a href="#155809" title="(x$1: scala.collection.mutable.HashMap[String,String])Unit">files</a> = <span title="()scala.collection.mutable.HashMap[String,String]" class="keyword">new</span> <span title="scala.collection.mutable.HashMap[String,String]">HashMap</span><span class="delimiter">[</span>String, String<span class="delimiter">]</span>
    <a href="#155815" title="(x$1: scala.collection.mutable.HashMap[String,scala.collection.mutable.ListBuffer[String]])Unit">children</a> = <span title="()scala.collection.mutable.HashMap[String,scala.collection.mutable.ListBuffer[String]]" class="keyword">new</span> <span title="scala.collection.mutable.HashMap[String,scala.collection.mutable.ListBuffer[String]]">HashMap</span><span class="delimiter">[</span>String, ListBuffer<span class="delimiter">[</span>String<span class="delimiter">]</span><span class="delimiter">]</span>
    <a href="#155818" title="(x$1: List[String])Unit">readableFiles</a> = <span title="object Nil">Nil</span>
    <a href="#155821" title="(x$1: List[String])Unit">writableFiles</a> = <span title="object Nil">Nil</span>
    <a href="#10521" title="MockFileSystem.this.type" class="keyword">this</a>
  <span class="delimiter">}</span>
  
  <span class="keyword">override</span> <span class="keyword">def</span> <a title="(path: String)Boolean" id="155850">exists</a><span class="delimiter">(</span><a title="String" id="156943">path</a>: <span title="String">String</span><span class="delimiter">)</span> = <a href="#155809" title="=&gt; scala.collection.mutable.HashMap[String,String]">files</a>.<span title="=&gt; Iterable[String]">keys</span>.<span title="(p: String =&gt; Boolean)Boolean">exists</span><span class="delimiter">(</span><a title="String" id="156963">f</a> =&gt; <a href="FileSystem.scala.html#52521" title="(p1: String, p2: String)Boolean">samePath</a><span class="delimiter">(</span><a href="#156963" title="String">f</a>, <a href="#156943" title="String">path</a><span class="delimiter">)</span><span class="delimiter">)</span>
  
  <span class="keyword">override</span> <span class="keyword">def</span> <a title="(filePath: String)java.io.InputStream" id="155851">inputStream</a><span class="delimiter">(</span><a title="String" id="156964">filePath</a>: <span title="String">String</span><span class="delimiter">)</span> = <a href="#156967" title="java.io.InputStream{}" class="keyword">new</a> <a title="anonymous class $anon extends java.io.InputStream" id="156967">java</a>.io.<span title="java.io.InputStream">InputStream</span> <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="java.io.StringReader" id="156971">reader</a> = <span title="java.io.StringReader" class="keyword">new</span> java.io.<span title="java.io.StringReader">StringReader</span><span class="delimiter">(</span><a href="#155824" title="(path: String)String">readFile</a><span class="delimiter">(</span><a href="#156964" title="String">filePath</a><span class="delimiter">)</span><span class="delimiter">)</span>
    <span class="keyword">def</span> <a title="()Int" id="156973">read</a><span class="delimiter">(</span><span class="delimiter">)</span> = <a href="#156971" title="=&gt; java.io.StringReader">reader</a>.<span title="()Int">read</span><span class="delimiter">(</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">override</span> <span class="keyword">def</span> <a title="(filePath: String)(report: Exception =&gt; Unit)scala.xml.NodeSeq" id="155852">loadXmlFile</a><span class="delimiter">(</span><a title="String" id="157245">filePath</a>: <span title="String">String</span><span class="delimiter">)</span><span class="delimiter">(</span><a title="Exception =&gt; Unit" id="157155">report</a>: Exception =&gt; Unit = <span class="delimiter">(</span>e:<span title="Exception">Exception</span><span class="delimiter">)</span> =&gt; <a href="#157242" title="Exception">e</a>.<span title="()Unit">printStackTrace</span><span class="delimiter">)</span> = <span class="delimiter">{</span>
    <a href="../control/Exceptions.scala.html#15357" title="(a: =&gt; scala.xml.NodeSeq)(implicit f: Exception =&gt; Unit)Option[scala.xml.NodeSeq]">tryo</a> <a href="../control/Exceptions.scala.html#15354" title="(t: Any)Unit" class="delimiter">{</a>
      <span class="keyword">val</span> <a title="scala.io.Source" id="157158">xhtml</a> = <span title="(s: String)scala.io.Source">fromString</span><span class="delimiter">(</span><span title="java.lang.String(&quot;&lt;e&gt;&quot;)" class="string">&quot;&lt;e&gt;&quot;</span><span title="(x$1: Any)java.lang.String">+</span><a href="#155824" title="(path: String)String">readFile</a><span class="delimiter">(</span><a href="#157245" title="String">filePath</a><span class="delimiter">)</span><span title="(x$1: Any)java.lang.String">+</span><span title="java.lang.String(&quot;&lt;/e&gt;&quot;)" class="string">&quot;&lt;/e&gt;&quot;</span><span class="delimiter">)</span>
      <span class="delimiter">(</span><span title="(source: scala.io.Source)scala.xml.NodeSeq">XhtmlParser</span><span class="delimiter">(</span><a href="#157158" title="scala.io.Source">xhtml</a><span class="delimiter">)</span><span title="(i: Int)scala.xml.Node">\\</span><span title="java.lang.String(&quot;e&quot;)" class="string">&quot;e&quot;</span><span class="delimiter">)</span><span class="delimiter">(</span><span title="Int(0)" class="int">0</span><span class="delimiter">)</span>.<a href="../xml/Nodex.scala.html#62837" title="implicit org.specs2.xml.Nodex.reducable : (ns: Seq[scala.xml.NodeSeq])org.specs2.xml.Nodex.Reducable">child</a>.<a href="../xml/Nodex.scala.html#127398" title="=&gt; scala.xml.NodeSeq">reduceNodes</a>
    <span class="delimiter">}</span>.<span title="(default: =&gt; scala.xml.NodeSeq)scala.xml.NodeSeq">getOrElse</span><span class="delimiter">(</span><span title="object scala.xml.NodeSeq">NodeSeq</span>.<span title="=&gt; scala.xml.NodeSeq">Empty</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

<span class="delimiter">}</span>

        </pre>
    </body>
</html>