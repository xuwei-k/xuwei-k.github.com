<?xml version="1.0" encoding="utf-8"?>
      <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <meta http-equiv="Expires" content="0" />
        <title>org/specs2/reporter/JUnitReporter.scala</title>
        <script type="text/javascript" src="../../../jquery-all.js"></script>
        <script type="text/javascript" src="../../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../../style.css" title="Style"></link>
    </head>
    <body>
        <pre>
<span class="keyword">package</span> org.specs2
<span class="keyword">package</span> reporter

<span class="keyword">import</span> _root_.org.junit.runner.notification.RunNotifier
<span class="keyword">import</span> _root_.org.junit._
<span class="keyword">import</span> _root_.org.junit.runner._
<span class="keyword">import</span> org.specs2.internal.scalaz.Scalaz
<span class="keyword">import</span> <span title="object org.specs2.internal.scalaz.Scalaz">Scalaz</span>._
<span class="keyword">import</span> main.<span class="delimiter">{</span>SystemProperties, Arguments<span class="delimiter">}</span>
<span class="keyword">import</span> execute._
<span class="keyword">import</span> specification._
<span class="keyword">import</span> text.AnsiColors
<span class="keyword">import</span> control.<span class="delimiter">{</span>ExecutionOrigin, Throwablex<span class="delimiter">}</span>
<span class="keyword">import</span> junit.framework.AssertionFailedError

<span class="comment">/**
 * The JUnitReporter reports a specification by using a JUnit RunNotifier
 *
 * To do so, it uses most of the execution pipeline of a normal reporter but overrides the fragments execution so as
 * to notify JUnit of the appropriate events
 */</span>
<span class="keyword">trait</span> <a title="trait JUnitReporter extends java.lang.Object with org.specs2.control.ExecutionOrigin with org.specs2.reporter.DefaultReporter with org.specs2.reporter.Exporters with ScalaObject" id="12130">JUnitReporter</a> <span title="ScalaObject" class="keyword">extends</span> <a href="../control/ExecutionOrigin.scala.html#9927" title="org.specs2.control.ExecutionOrigin">ExecutionOrigin</a> <span class="keyword">with</span> <a href="Reporter.scala.html#12257" title="org.specs2.reporter.DefaultReporter">DefaultReporter</a> <span class="keyword">with</span> <a href="Exporters.scala.html#11956" title="org.specs2.reporter.Exporters">Exporters</a> <span class="delimiter">{</span>

  <span class="comment">/** the selected fragments to report */</span>
  <span class="keyword">def</span> <a title="=&gt; org.specs2.specification.SpecificationStructure" id="312769">selected</a>: <a href="../specification/BaseSpecification.scala.html#12610" title="org.specs2.specification.SpecificationStructure">SpecificationStructure</a>
  <span class="comment">/** map providing a description for each fragment */</span>
  <span class="keyword">def</span> <a title="=&gt; Map[org.specs2.specification.Fragment,org.junit.runner.Description]" id="312770">descriptions</a>: <span title="Map[org.specs2.specification.Fragment,org.junit.runner.Description]">Map</span><span class="delimiter">[</span>Fragment, Description<span class="delimiter">]</span>
  <span class="comment">/** arguments for the specification */</span>
  <span class="keyword">implicit</span> <span class="keyword">def</span> <a title="=&gt; org.specs2.main.Arguments" id="312771">args</a>: <a href="../main/Arguments.scala.html#10577" title="org.specs2.main.Arguments">Arguments</a>
  <span class="comment">/** system properties */</span>
  <span class="keyword">implicit</span> <span class="keyword">def</span> <a title="=&gt; org.specs2.main.SystemProperties" id="312772">properties</a>: <a href="../main/SystemProperties.scala.html#10643" title="org.specs2.main.SystemProperties">SystemProperties</a>

  <span class="comment">/** the junit notifier to use */</span>
  <span class="keyword">def</span> <a title="=&gt; org.junit.runner.notification.RunNotifier" id="312773">notifier</a>: <span title="org.junit.runner.notification.RunNotifier">RunNotifier</span>

  <span class="comment">/**
   * run the suite by executing each fragment related to a description:
   * - execute all fragments (including Steps which are reported as steps)
   * - for each result, report the failure/error/skipped or pending message as a
   *   junit failure or ignored event on the RunNotifier
  */</span>
  <span class="keyword">def</span> <a title="=&gt; Unit" id="312774">report</a> <span class="delimiter">{</span>
    <a href="#312769" title="(x: =&gt; org.specs2.specification.SpecificationStructure)org.specs2.internal.scalaz.Identity[org.specs2.specification.SpecificationStructure]">selected</a> <span title="(x: =&gt; org.specs2.reporter.ExecutableSpecification)org.specs2.internal.scalaz.Identity[org.specs2.reporter.ExecutableSpecification]">|&gt;</span> <a href="Sequence.scala.html#295695" title="(implicit arguments: org.specs2.main.Arguments)org.specs2.specification.SpecificationStructure =&gt; org.specs2.reporter.ExecutableSpecification">sequence</a> <span title="(x: =&gt; org.specs2.specification.ExecutingSpecification)org.specs2.internal.scalaz.Identity[org.specs2.specification.ExecutingSpecification]">|&gt;</span> <a href="ExecutionStrategy.scala.html#295700" title="(implicit arguments: org.specs2.main.Arguments)org.specs2.reporter.ExecutableSpecification =&gt; org.specs2.specification.ExecutingSpecification">execute</a> <span title="(x: =&gt; org.specs2.specification.ExecutingSpecification)org.specs2.internal.scalaz.Identity[org.specs2.specification.ExecutingSpecification]">|&gt;</span> <a href="Storing.scala.html#295717" title="(implicit args: org.specs2.main.Arguments)org.specs2.specification.ExecutingSpecification =&gt; org.specs2.specification.ExecutingSpecification">store</a> <span title="(f: org.specs2.specification.ExecutingSpecification =&gt; org.specs2.specification.ExecutedSpecification)org.specs2.specification.ExecutedSpecification">|&gt;</span> <a href="#312777" title="(implicit args: org.specs2.main.Arguments)org.specs2.specification.ExecutingSpecification =&gt; org.specs2.specification.ExecutedSpecification">export</a>
  <span class="delimiter">}</span>

  <span class="keyword">override</span> <span class="keyword">def</span> <a title="(implicit arguments: org.specs2.main.Arguments)org.specs2.specification.Fragment =&gt; org.specs2.specification.ExecutedFragment" id="312775">executeFragment</a><span class="delimiter">(</span><span class="keyword">implicit</span> <a title="org.specs2.main.Arguments" id="313212">arguments</a>: <a href="../main/Arguments.scala.html#10577" title="org.specs2.main.Arguments">Arguments</a><span class="delimiter">)</span>: <span title="org.specs2.specification.Fragment =&gt; org.specs2.specification.ExecutedFragment">Function</span><span class="delimiter">[</span>Fragment, ExecutedFragment<span class="delimiter">]</span> = <span class="delimiter">(</span>fragment: <a href="../specification/Fragment.scala.html#12773" title="org.specs2.specification.Fragment">Fragment</a><span class="delimiter">)</span> =&gt; <span class="delimiter">{</span>
    <span class="keyword">def</span> <a title="(aFragment: org.specs2.specification.Fragment)org.specs2.specification.ExecutedFragment" id="313216">execute</a><span class="delimiter">(</span><a title="org.specs2.specification.Fragment" id="313218">aFragment</a>: <a href="../specification/Fragment.scala.html#12773" title="org.specs2.specification.Fragment">Fragment</a><span class="delimiter">)</span> = <a href="#12130" title="org.specs2.reporter.JUnitReporter" class="keyword">super</a>.<a href="../specification/FragmentExecution.scala.html#295709" title="(implicit arguments: org.specs2.main.Arguments)org.specs2.specification.Fragment =&gt; org.specs2.specification.ExecutedFragment">executeFragment</a><span title="(v1: org.specs2.specification.Fragment)org.specs2.specification.ExecutedFragment" class="delimiter">(</span><a href="#313212" title="org.specs2.main.Arguments">arguments</a><span class="delimiter">)</span><span class="delimiter">(</span><a href="#313218" title="org.specs2.specification.Fragment">aFragment</a><span class="delimiter">)</span>
    <span class="comment">// the description for a given fragment. It *should* always be found by construction</span>
    <span class="keyword">val</span> <a title="org.junit.runner.Description" id="313217">desc</a> = <a href="#312770" title="(key: org.specs2.specification.Fragment)org.junit.runner.Description">descriptions</a><span class="delimiter">(</span><a href="#313215" title="org.specs2.specification.Fragment">fragment</a><span class="delimiter">)</span>

    <a href="#313215" title="org.specs2.specification.Fragment">fragment</a> <span title="org.specs2.specification.ExecutedFragment" class="keyword">match</span> <span class="delimiter">{</span>
      <span class="keyword">case</span> <a title="org.specs2.specification.ExecutedFragment" id="313244">f</a> @ Example<span class="delimiter">(</span>_, _<span class="delimiter">)</span> =&gt; <span class="delimiter">{</span>
        <a href="#312773" title="=&gt; org.junit.runner.notification.RunNotifier">notifier</a>.<span title="(x$1: org.junit.runner.Description)Unit">fireTestStarted</span><span class="delimiter">(</span><a href="#313217" title="org.junit.runner.Description">desc</a><span class="delimiter">)</span>
        <span class="keyword">val</span> <a title="org.specs2.specification.ExecutedFragment" id="313245">result</a> = <a href="#313216" title="(aFragment: org.specs2.specification.Fragment)org.specs2.specification.ExecutedFragment">execute</a><span class="delimiter">(</span><a href="#313244" title="org.specs2.specification.Example">f</a><span class="delimiter">)</span>
        <a href="#312776" title="(desc: org.junit.runner.Description, result: org.specs2.specification.ExecutedFragment)org.specs2.specification.ExecutedFragment">notifyResult</a><span class="delimiter">(</span><a href="#313217" title="org.junit.runner.Description">desc</a>, <a href="#313245" title="org.specs2.specification.ExecutedFragment">result</a><span class="delimiter">)</span>
        <a href="#312773" title="=&gt; org.junit.runner.notification.RunNotifier">notifier</a>.<span title="(x$1: org.junit.runner.Description)Unit">fireTestFinished</span><span class="delimiter">(</span><a href="#313217" title="org.junit.runner.Description">desc</a><span class="delimiter">)</span>
        <a href="#313245" title="org.specs2.specification.ExecutedFragment">result</a>
      <span class="delimiter">}</span>
      <span class="keyword">case</span> <a title="org.specs2.specification.ExecutedFragment" id="313249">f</a> @ Step<span class="delimiter">(</span>_, _<span class="delimiter">)</span>         =&gt; <a href="#312776" title="(desc: org.junit.runner.Description, result: org.specs2.specification.ExecutedFragment)org.specs2.specification.ExecutedFragment">notifyResult</a><span class="delimiter">(</span><a href="#313217" title="org.junit.runner.Description">desc</a>, <a href="#313216" title="(aFragment: org.specs2.specification.Fragment)org.specs2.specification.ExecutedFragment">execute</a><span class="delimiter">(</span><a href="#313249" title="org.specs2.specification.Step">f</a><span class="delimiter">)</span><span class="delimiter">)</span>
      <span class="keyword">case</span> <a title="org.specs2.specification.ExecutedFragment" id="313250">f</a> @ Action<span class="delimiter">(</span>_<span class="delimiter">)</span>          =&gt; <a href="#312776" title="(desc: org.junit.runner.Description, result: org.specs2.specification.ExecutedFragment)org.specs2.specification.ExecutedFragment">notifyResult</a><span class="delimiter">(</span><a href="#313217" title="org.junit.runner.Description">desc</a>, <a href="#313216" title="(aFragment: org.specs2.specification.Fragment)org.specs2.specification.ExecutedFragment">execute</a><span class="delimiter">(</span><a href="#313250" title="org.specs2.specification.Action">f</a><span class="delimiter">)</span><span class="delimiter">)</span>
      <span class="keyword">case</span> <a title="org.specs2.specification.ExecutedFragment" id="313251">f</a> @ SpecStart<span class="delimiter">(</span>_, _, _<span class="delimiter">)</span> =&gt; <a href="#312773" title="=&gt; org.junit.runner.notification.RunNotifier">notifier</a>.<span title="(x$1: org.junit.runner.Description)Unit">fireTestRunStarted</span><span class="delimiter">(</span><a href="#313217" title="org.junit.runner.Description">desc</a><span class="delimiter">)</span>; <a href="#313216" title="(aFragment: org.specs2.specification.Fragment)org.specs2.specification.ExecutedFragment">execute</a><span class="delimiter">(</span><a href="#313251" title="org.specs2.specification.SpecStart">f</a><span class="delimiter">)</span>
      <span class="keyword">case</span> <a title="org.specs2.specification.ExecutedFragment" id="313252">f</a> @ SpecEnd<span class="delimiter">(</span>_, _<span class="delimiter">)</span>      =&gt; <a href="#312773" title="=&gt; org.junit.runner.notification.RunNotifier">notifier</a>.<span title="(x$1: org.junit.runner.Result)Unit">fireTestRunFinished</span><span class="delimiter">(</span><span title="org.junit.runner.Result" class="keyword">new</span> org.junit.runner.<span title="org.junit.runner.Result">Result</span><span class="delimiter">)</span>; <a href="#313216" title="(aFragment: org.specs2.specification.Fragment)org.specs2.specification.ExecutedFragment">execute</a><span class="delimiter">(</span><a href="#313252" title="org.specs2.specification.SpecEnd">f</a><span class="delimiter">)</span>
      <span class="keyword">case</span> <a title="org.specs2.specification.ExecutedFragment" id="313280">other</a>                  =&gt; <a href="#313216" title="(aFragment: org.specs2.specification.Fragment)org.specs2.specification.ExecutedFragment">execute</a><span class="delimiter">(</span><a href="#313280" title="org.specs2.specification.Fragment">other</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="comment">/**
   * notify JUnit of a new result
   */</span>
  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(desc: org.junit.runner.Description, result: org.specs2.specification.ExecutedFragment)org.specs2.specification.ExecutedFragment" id="312776">notifyResult</a><span class="delimiter">(</span><a title="org.junit.runner.Description" id="313246">desc</a>: <span title="org.junit.runner.Description">Description</span>, <a title="org.specs2.specification.ExecutedFragment" id="313247">result</a>: <a href="../specification/ExecutedFragment.scala.html#12676" title="org.specs2.specification.ExecutedFragment">ExecutedFragment</a><span class="delimiter">)</span>: <a href="../specification/ExecutedFragment.scala.html#12676" title="org.specs2.specification.ExecutedFragment">ExecutedFragment</a> = <span class="delimiter">{</span>
    <a href="#313247" title="org.specs2.specification.ExecutedFragment">result</a> <span title="Unit" class="keyword">match</span> <span class="delimiter">{</span>
      <span class="keyword">case</span> <span title="Unit">ExecutedResult</span><span class="delimiter">(</span>_, <a title="org.specs2.execute.Result" id="313281">r</a>, <a title="org.specs2.time.SimpleTimer" id="313282">timer</a>, _, _<span class="delimiter">)</span> =&gt; <span class="delimiter">{</span>
        <a href="#313281" title="org.specs2.execute.Result">r</a> <span title="Unit" class="keyword">match</span> <span class="delimiter">{</span>
          <span class="keyword">case</span> <a title="Unit" id="313283">f</a>@Failure<span class="delimiter">(</span><a title="String" id="313284">m</a>, <a title="String" id="313285">e</a>, <a title="List[java.lang.StackTraceElement]" id="313286">st</a>, <a title="org.specs2.execute.Details" id="313287">d</a><span class="delimiter">)</span>                     =&gt; <a href="#312773" title="=&gt; org.junit.runner.notification.RunNotifier">notifier</a>.<span title="(x$1: org.junit.runner.notification.Failure)Unit">fireTestFailure</span><span class="delimiter">(</span><span title="org.junit.runner.notification.Failure" class="keyword">new</span> notification.<span title="org.junit.runner.notification.Failure">Failure</span><span class="delimiter">(</span><a href="#313246" title="org.junit.runner.Description">desc</a>, <a href="#312778" title="(f: org.specs2.execute.Failure)(implicit args: org.specs2.main.Arguments)Throwable">junitFailure</a><a href="#312771" title="=&gt; org.specs2.main.Arguments" class="delimiter">(</a><a href="#313283" title="org.specs2.execute.Failure">f</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
          <span class="keyword">case</span> <a title="Unit" id="313300">e</a>@Error<span class="delimiter">(</span><a title="String" id="313301">m</a>, <a title="Exception" id="313302">st</a><span class="delimiter">)</span>                             =&gt; <a href="#312773" title="=&gt; org.junit.runner.notification.RunNotifier">notifier</a>.<span title="(x$1: org.junit.runner.notification.Failure)Unit">fireTestFailure</span><span class="delimiter">(</span><span title="org.junit.runner.notification.Failure" class="keyword">new</span> notification.<span title="org.junit.runner.notification.Failure">Failure</span><span class="delimiter">(</span><a href="#313246" title="org.junit.runner.Description">desc</a>, <a href="#312771" title="=&gt; org.specs2.main.Arguments">args</a>.<a href="../control/StackTraceFilter.scala.html#96449" title="(e: Exception)Exception">traceFilter</a><span class="delimiter">(</span><a href="#313300" title="org.specs2.execute.Error">e</a>.<a href="../execute/Result.scala.html#64131" title="=&gt; Exception">exception</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
          <span class="keyword">case</span> <span title="Unit">DecoratedResult</span><span class="delimiter">(</span>_, <a title="org.specs2.execute.Failure" id="313364">f</a>@Failure<span class="delimiter">(</span><a title="String" id="313365">m</a>, <a title="String" id="313366">e</a>, <a title="List[java.lang.StackTraceElement]" id="313367">st</a>, <a title="org.specs2.execute.Details" id="313368">d</a><span class="delimiter">)</span><span class="delimiter">)</span> =&gt; <a href="#312773" title="=&gt; org.junit.runner.notification.RunNotifier">notifier</a>.<span title="(x$1: org.junit.runner.notification.Failure)Unit">fireTestFailure</span><span class="delimiter">(</span><span title="org.junit.runner.notification.Failure" class="keyword">new</span> notification.<span title="org.junit.runner.notification.Failure">Failure</span><span class="delimiter">(</span><a href="#313246" title="org.junit.runner.Description">desc</a>, <a href="#312778" title="(f: org.specs2.execute.Failure)(implicit args: org.specs2.main.Arguments)Throwable">junitFailure</a><a href="#312771" title="=&gt; org.specs2.main.Arguments" class="delimiter">(</a><a href="#313364" title="org.specs2.execute.Failure">f</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
          <span class="keyword">case</span> <span title="Unit">DecoratedResult</span><span class="delimiter">(</span>_, <a title="org.specs2.execute.Error" id="313371">e</a>@Error<span class="delimiter">(</span><a title="String" id="313372">m</a>, <a title="Exception" id="313373">st</a><span class="delimiter">)</span><span class="delimiter">)</span>         =&gt; <a href="#312773" title="=&gt; org.junit.runner.notification.RunNotifier">notifier</a>.<span title="(x$1: org.junit.runner.notification.Failure)Unit">fireTestFailure</span><span class="delimiter">(</span><span title="org.junit.runner.notification.Failure" class="keyword">new</span> notification.<span title="org.junit.runner.notification.Failure">Failure</span><span class="delimiter">(</span><a href="#313246" title="org.junit.runner.Description">desc</a>, <a href="#312771" title="=&gt; org.specs2.main.Arguments">args</a>.<a href="../control/StackTraceFilter.scala.html#96449" title="(e: Exception)Exception">traceFilter</a><span class="delimiter">(</span><a href="#313371" title="org.specs2.execute.Error">e</a>.<a href="../execute/Result.scala.html#64131" title="=&gt; Exception">exception</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
          <span class="keyword">case</span> <span title="Unit">Pending</span><span class="delimiter">(</span>_<span class="delimiter">)</span> | Skipped<span class="delimiter">(</span>_, _<span class="delimiter">)</span>                 =&gt; <a href="#312773" title="=&gt; org.junit.runner.notification.RunNotifier">notifier</a>.<span title="(x$1: org.junit.runner.Description)Unit">fireTestIgnored</span><span class="delimiter">(</span><a href="#313246" title="org.junit.runner.Description">desc</a><span class="delimiter">)</span>
          <span class="keyword">case</span> <span title="Unit">Success</span><span class="delimiter">(</span>_, _<span class="delimiter">)</span> | DecoratedResult<span class="delimiter">(</span>_, _<span class="delimiter">)</span>      =&gt; <span title="Unit" class="delimiter">(</span><span class="delimiter">)</span>
        <span class="delimiter">}</span>
      <span class="delimiter">}</span>
      <span class="keyword">case</span> <a title="Unit" id="313435">other</a> =&gt; <span title="Unit" class="delimiter">(</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>
    <a href="#313247" title="org.specs2.specification.ExecutedFragment">result</a>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="(implicit args: org.specs2.main.Arguments)org.specs2.specification.ExecutingSpecification =&gt; org.specs2.specification.ExecutedSpecification" id="312777">export</a><span class="delimiter">(</span><span class="keyword">implicit</span> <a title="org.specs2.main.Arguments" id="313103">args</a>: <a href="../main/Arguments.scala.html#10577" title="org.specs2.main.Arguments">Arguments</a><span class="delimiter">)</span> = <span class="delimiter">(</span>executing: <a href="../specification/ExecutingSpecification.scala.html#12736" title="org.specs2.specification.ExecutingSpecification">ExecutingSpecification</a><span class="delimiter">)</span> =&gt; <span class="delimiter">{</span>
    <span class="keyword">def</span> <a title="=&gt; String =&gt; Boolean" id="313108">exportTo</a> = <span class="delimiter">(</span>name: <span title="String">String</span><span class="delimiter">)</span> =&gt; <a href="#312772" title="=&gt; org.specs2.main.SystemProperties">properties</a>.<a href="../main/SystemProperties.scala.html#152927" title="(p: String)Boolean">isDefined</a><span class="delimiter">(</span><a href="#313110" title="String">name</a><span class="delimiter">)</span> <span title="(x: Boolean)Boolean">||</span> <a href="#313103" title="org.specs2.main.Arguments">args</a>.<a href="../main/Arguments.scala.html#36592" title="(a: String)Boolean">contains</a><span class="delimiter">(</span><a href="#313110" title="String">name</a><span class="delimiter">)</span>

    <a href="Exporters.scala.html#294355" title="(args: org.specs2.main.Arguments, accept: String =&gt; Boolean)org.specs2.specification.ExecutingSpecification =&gt; org.specs2.specification.ExecutedSpecification">exportAll</a><span title="(v1: org.specs2.specification.ExecutingSpecification)org.specs2.specification.ExecutedSpecification" class="delimiter">(</span><a href="#313103" title="org.specs2.main.Arguments">args</a>, <a href="#313108" title="=&gt; String =&gt; Boolean">exportTo</a><span class="delimiter">)</span><span class="delimiter">(</span><a href="#313107" title="org.specs2.specification.ExecutingSpecification">executing</a><span class="delimiter">)</span>
    <a href="#313107" title="org.specs2.specification.ExecutingSpecification">executing</a>.<a href="../specification/ExecutingSpecification.scala.html#294696" title="=&gt; org.specs2.specification.ExecutedSpecification">executed</a>
  <span class="delimiter">}</span>

  <span class="comment">/** @return a Throwable expected by JUnit Failure object */</span>
  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(f: org.specs2.execute.Failure)(implicit args: org.specs2.main.Arguments)Throwable" id="312778">junitFailure</a><span class="delimiter">(</span><a title="org.specs2.execute.Failure" id="313297">f</a>: <a href="../execute/Result.scala.html#10134" title="org.specs2.execute.Failure">Failure</a><span class="delimiter">)</span><span class="delimiter">(</span><span class="keyword">implicit</span> <a title="org.specs2.main.Arguments" id="313298">args</a>: <a href="../main/Arguments.scala.html#10577" title="org.specs2.main.Arguments">Arguments</a><span class="delimiter">)</span>: <span title="Throwable">Throwable</span> = <a href="#313297" title="org.specs2.execute.Failure">f</a> <span title="Throwable" class="keyword">match</span> <span class="delimiter">{</span>
    <span class="keyword">case</span> <span title="org.specs2.reporter.SpecFailureAssertionFailedError">Failure</span><span class="delimiter">(</span><a title="String" id="313436">m</a>, <a title="String" id="313437">e</a>, <a title="List[java.lang.StackTraceElement]" id="313438">st</a>, NoDetails<span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span> =&gt;
      <span title="org.specs2.reporter.SpecFailureAssertionFailedError" class="keyword">new</span> <a href="#12132" title="org.specs2.reporter.SpecFailureAssertionFailedError">SpecFailureAssertionFailedError</a><span class="delimiter">(</span><a href="../control/Throwablex.scala.html#10005" title="object org.specs2.control.Throwablex">Throwablex</a>.<a href="../control/Throwablex.scala.html#39773" title="(m: String, st: Seq[java.lang.StackTraceElement], cause: Throwable)Exception">exception</a><span class="delimiter">(</span><a href="../text/AnsiColors.scala.html#13145" title="object org.specs2.text.AnsiColors">AnsiColors</a>.<a href="../text/AnsiColors.scala.html#162945" title="(s: String, doIt: Boolean)String">removeColors</a><span class="delimiter">(</span><a href="#313436" title="String">m</a><span class="delimiter">)</span>, <a href="#313298" title="org.specs2.main.Arguments">args</a>.<a href="../control/StackTraceFilter.scala.html#96448" title="(e: Seq[java.lang.StackTraceElement])Seq[java.lang.StackTraceElement]">traceFilter</a><span class="delimiter">(</span><a href="#313438" title="List[java.lang.StackTraceElement]">st</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>

    <span class="keyword">case</span> <span title="org.junit.ComparisonFailure{}">Failure</span><span class="delimiter">(</span><a title="String" id="313514">m</a>, <a title="String" id="313515">e</a>, <a title="List[java.lang.StackTraceElement]" id="313516">st</a>, FailureDetails<span class="delimiter">(</span><a title="String" id="313517">expected</a>, <a title="String" id="313518">actual</a><span class="delimiter">)</span><span class="delimiter">)</span> =&gt; <a href="#313519" title="org.junit.ComparisonFailure{}" class="keyword">new</a> <a title="anonymous class $anon extends org.junit.ComparisonFailure" id="313519">ComparisonFailure</a><span class="delimiter">(</span><a href="../text/AnsiColors.scala.html#13145" title="object org.specs2.text.AnsiColors">AnsiColors</a>.<a href="../text/AnsiColors.scala.html#162945" title="(s: String, doIt: Boolean)String">removeColors</a><span class="delimiter">(</span><a href="#313514" title="String">m</a><span class="delimiter">)</span>, <a href="#313517" title="String">expected</a>, <a href="#313518" title="String">actual</a><span class="delimiter">)</span> <span class="delimiter">{</span>
      <span class="keyword">private</span> <span class="keyword">val</span> <a title="Exception" id="313523">e</a> = <a href="#313298" title="org.specs2.main.Arguments">args</a>.<a href="../control/StackTraceFilter.scala.html#96449" title="(e: Exception)Exception">traceFilter</a><span class="delimiter">(</span><a href="#313297" title="org.specs2.execute.Failure">f</a>.<a href="../execute/Result.scala.html#63965" title="=&gt; Exception">exception</a><span class="delimiter">)</span>
      <span class="keyword">override</span> <span class="keyword">def</span> <a title="()Array[java.lang.StackTraceElement]" id="313525">getStackTrace</a> = <a href="#313523" title="=&gt; Exception">e</a>.<span title="()Array[java.lang.StackTraceElement]">getStackTrace</span>
      <span class="keyword">override</span> <span class="keyword">def</span> <a title="()java.lang.Throwable" id="313526">getCause</a> = <a href="#313523" title="=&gt; Exception">e</a>.<span title="()java.lang.Throwable">getCause</span>
      <span class="keyword">override</span> <span class="keyword">def</span> <a title="()Unit" id="313527">printStackTrace</a><span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span> <a href="#313523" title="=&gt; Exception">e</a>.<span title="()Unit">printStackTrace</span><span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">}</span>
      <span class="keyword">override</span> <span class="keyword">def</span> <a title="(w: java.io.PrintStream)Unit" id="313528">printStackTrace</a><span class="delimiter">(</span><a title="java.io.PrintStream" id="313548">w</a>: java.io.<span title="java.io.PrintStream">PrintStream</span><span class="delimiter">)</span> <span class="delimiter">{</span> <a href="#313523" title="=&gt; Exception">e</a>.<span title="(x$1: java.io.PrintStream)Unit">printStackTrace</span><span class="delimiter">(</span><a href="#313548" title="java.io.PrintStream">w</a><span class="delimiter">)</span> <span class="delimiter">}</span>
      <span class="keyword">override</span> <span class="keyword">def</span> <a title="(w: java.io.PrintWriter)Unit" id="313529">printStackTrace</a><span class="delimiter">(</span><a title="java.io.PrintWriter" id="313551">w</a>: java.io.<span title="java.io.PrintWriter">PrintWriter</span><span class="delimiter">)</span> <span class="delimiter">{</span> <a href="#313523" title="=&gt; Exception">e</a>.<span title="(x$1: java.io.PrintWriter)Unit">printStackTrace</span><span class="delimiter">(</span><a href="#313551" title="java.io.PrintWriter">w</a><span class="delimiter">)</span> <span class="delimiter">}</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>
<span class="delimiter">}</span>


<span class="comment">/**
 * Descriptions for a seq of Fragments to execute
 */</span>
<span class="keyword">class</span> <a title="class JUnitDescriptionsFragments extends org.specs2.reporter.JUnitDescriptions[org.specs2.specification.Fragment] with ScalaObject" id="12131">JUnitDescriptionsFragments</a><a href="#12131" title="ScalaObject" class="delimiter">(</a><a title="String" id="313666">className</a>: <span title="String">String</span><span class="delimiter">)</span> <span class="keyword">extends</span> <a href="JUnitDescriptions.scala.html#12108" title="org.specs2.reporter.JUnitDescriptions[org.specs2.specification.Fragment]">JUnitDescriptions</a><span class="delimiter">[</span>Fragment<span class="delimiter">]</span><span class="delimiter">(</span><a href="#313666" title="String">className</a><span class="delimiter">)</span> <span class="delimiter">{</span>
  <span class="keyword">def</span> <a title="(className: String)org.specs2.specification.Text" id="313662">initialFragment</a><span class="delimiter">(</span><a title="String" id="313670">className</a>: <span title="String">String</span><span class="delimiter">)</span> = <a href="../specification/Fragment.scala.html#286702" title="(t: String)org.specs2.specification.Text">Text</a><span class="delimiter">(</span><a href="#313670" title="String">className</a><span class="delimiter">)</span>
  <span class="comment">/**
  * This function is used to map each node in a Tree[Fragment] to a pair of
  * (Description, Fragment)
  *
  * The Int argument is the numeric label of the current TreeNode being mapped.
  * It is used to create a unique description of the example to executed which is required
  * by JUnit
  */</span>
  <span class="keyword">def</span> <a title="(className: String)(org.specs2.specification.Fragment, Seq[(org.specs2.specification.Fragment, org.junit.runner.Description)], Int) =&gt; Option[(org.specs2.specification.Fragment, org.junit.runner.Description)]" id="313663">mapper</a><span class="delimiter">(</span><a title="String" id="313675">className</a>: <span title="String">String</span><span class="delimiter">)</span>: <span class="delimiter">(</span>Fragment, Seq<span class="delimiter">[</span>DescribedFragment<span class="delimiter">]</span>, Int<span class="delimiter">)</span> =&gt; Option<span class="delimiter">[</span>DescribedFragment<span class="delimiter">]</span> =
    <span class="delimiter">(</span>f: <a href="../specification/Fragment.scala.html#12773" title="org.specs2.specification.Fragment">Fragment</a>, parentNodes: <span title="Seq[(org.specs2.specification.Fragment, org.junit.runner.Description)]">Seq</span><span class="delimiter">[</span>DescribedFragment<span class="delimiter">]</span>, nodeLabel: <span title="Int">Int</span><span class="delimiter">)</span> =&gt; <a href="#313678" title="org.specs2.specification.Fragment">f</a> <span title="Option[(org.specs2.specification.Fragment, org.junit.runner.Description)]" class="keyword">match</span> <span class="delimiter">{</span>
      <span class="keyword">case</span> <a title="Some[(org.specs2.specification.Fragment, org.junit.runner.Description)]" id="313681">s</a> @ SpecStart<span class="delimiter">(</span>_,_,_<span class="delimiter">)</span>       =&gt; <span title="(x: (org.specs2.specification.Fragment, org.junit.runner.Description))Some[(org.specs2.specification.Fragment, org.junit.runner.Description)]">Some</span><span class="delimiter">(</span><a href="#313678" title="(x: org.specs2.specification.Fragment)ArrowAssoc[org.specs2.specification.Fragment]">f</a> <span title="(y: org.junit.runner.Description)(org.specs2.specification.Fragment, org.junit.runner.Description)">-&gt;</span> <a href="JUnitDescriptions.scala.html#310689" title="(className: String, suiteName: String, testName: String, label: String)org.junit.runner.Description">createDescription</a><span class="delimiter">(</span><a href="#313675" title="String">className</a>, suiteName=<a href="JUnitDescriptions.scala.html#310692" title="(s: String, parentNodes: Seq[String])String">testName</a><span class="delimiter">(</span><a href="#313681" title="org.specs2.specification.SpecStart">s</a>.<a href="../specification/Fragment.scala.html#51002" title="=&gt; String">name</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
      <span class="keyword">case</span> <span title="Some[(org.specs2.specification.Fragment, org.junit.runner.Description)]">Text</span><span class="delimiter">(</span><a title="String" id="313727">t</a><span class="delimiter">)</span>                    =&gt; <span title="(x: (org.specs2.specification.Fragment, org.junit.runner.Description))Some[(org.specs2.specification.Fragment, org.junit.runner.Description)]">Some</span><span class="delimiter">(</span><a href="#313678" title="(x: org.specs2.specification.Fragment)ArrowAssoc[org.specs2.specification.Fragment]">f</a> <span title="(y: org.junit.runner.Description)(org.specs2.specification.Fragment, org.junit.runner.Description)">-&gt;</span> <a href="JUnitDescriptions.scala.html#310689" title="(className: String, suiteName: String, testName: String, label: String)org.junit.runner.Description">createDescription</a><span class="delimiter">(</span><a href="#313675" title="String">className</a>, suiteName=<a href="JUnitDescriptions.scala.html#310692" title="(s: String, parentNodes: Seq[String])String">testName</a><span class="delimiter">(</span><a href="#313727" title="String">t</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
      <span class="keyword">case</span> <span title="Some[(org.specs2.specification.Fragment, org.junit.runner.Description)]">Example</span><span class="delimiter">(</span><a title="org.specs2.text.MarkupString" id="313770">description</a>, <a title="() =&gt; org.specs2.execute.Result" id="313771">body</a><span class="delimiter">)</span> =&gt; <span title="(x: (org.specs2.specification.Fragment, org.junit.runner.Description))Some[(org.specs2.specification.Fragment, org.junit.runner.Description)]">Some</span><span class="delimiter">(</span><a href="#313678" title="(x: org.specs2.specification.Fragment)ArrowAssoc[org.specs2.specification.Fragment]">f</a> <span title="(y: org.junit.runner.Description)(org.specs2.specification.Fragment, org.junit.runner.Description)">-&gt;</span> <a href="JUnitDescriptions.scala.html#310770" title="String" id="313816">createDescription</a><span class="delimiter">(</span><a href="#313675" title="String" id="313813">className</a>, label=<a href="#313680" title="Int">nodeLabel</a>.<a title="java.lang.String" id="313814">toString</a>, testName=<a href="JUnitDescriptions.scala.html#310692" title="(s: String, parentNodes: Seq[String])String">testName</a><a title="String" id="313815" class="delimiter">(</a><a href="#313770" title="org.specs2.text.MarkupString">description</a>.<span title="()java.lang.String">toString</span>, <a href="JUnitDescriptions.scala.html#310691" title="(parentNodes: Seq[(org.specs2.specification.Fragment, org.junit.runner.Description)])Seq[java.lang.String]">parentPath</a><span class="delimiter">(</span><a href="#313679" title="Seq[(org.specs2.specification.Fragment, org.junit.runner.Description)]">parentNodes</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
      <span class="keyword">case</span> <span title="Some[(org.specs2.specification.Fragment, org.junit.runner.Description)]">Step</span><span class="delimiter">(</span><a title="org.specs2.control.LazyParameter[org.specs2.execute.Result]" id="313819">action</a>,_<span class="delimiter">)</span>             =&gt; <span title="(x: (org.specs2.specification.Fragment, org.junit.runner.Description))Some[(org.specs2.specification.Fragment, org.junit.runner.Description)]">Some</span><span class="delimiter">(</span><a href="#313678" title="(x: org.specs2.specification.Fragment)ArrowAssoc[org.specs2.specification.Fragment]">f</a> <span title="(y: org.junit.runner.Description)(org.specs2.specification.Fragment, org.junit.runner.Description)">-&gt;</span> <a href="JUnitDescriptions.scala.html#310770" title="String" id="313863">createDescription</a><span class="delimiter">(</span><a href="#313675" title="String" id="313860">className</a>, label=<a href="#313680" title="Int">nodeLabel</a>.<a title="java.lang.String" id="313861">toString</a>, testName=<a title="java.lang.String(&quot;step&quot;)" id="313862" class="string">&quot;step&quot;</a><span class="delimiter">)</span><span class="delimiter">)</span>
      <span class="keyword">case</span> <span title="Some[(org.specs2.specification.Fragment, org.junit.runner.Description)]">Action</span><span class="delimiter">(</span><a title="org.specs2.control.LazyParameter[org.specs2.execute.Result]" id="313866">action</a><span class="delimiter">)</span>             =&gt; <span title="(x: (org.specs2.specification.Fragment, org.junit.runner.Description))Some[(org.specs2.specification.Fragment, org.junit.runner.Description)]">Some</span><span class="delimiter">(</span><a href="#313678" title="(x: org.specs2.specification.Fragment)ArrowAssoc[org.specs2.specification.Fragment]">f</a> <span title="(y: org.junit.runner.Description)(org.specs2.specification.Fragment, org.junit.runner.Description)">-&gt;</span> <a href="JUnitDescriptions.scala.html#310770" title="String" id="313910">createDescription</a><span class="delimiter">(</span><a href="#313675" title="String" id="313907">className</a>, label=<a href="#313680" title="Int">nodeLabel</a>.<a title="java.lang.String" id="313908">toString</a>, testName=<a title="java.lang.String(&quot;action&quot;)" id="313909" class="string">&quot;action&quot;</a><span class="delimiter">)</span><span class="delimiter">)</span>
      <span class="keyword">case</span> <a title="None.type" id="313913">other</a>                      =&gt; <span title="object None">None</span>
    <span class="delimiter">}</span>
<span class="delimiter">}</span>
<span class="comment">/**
 * This class refines the &lt;code&gt;AssertionFailedError&lt;/code&gt; from junit
 * and provides the stackTrace of an exception which occurred during the specification execution
 */</span>
<span class="keyword">class</span> <a title="class SpecFailureAssertionFailedError extends junit.framework.AssertionFailedError with ScalaObject" id="12132">SpecFailureAssertionFailedError</a><a href="#12132" title="ScalaObject" class="delimiter">(</a><a title="Exception" id="313447">e</a>: <span title="Exception">Exception</span><span class="delimiter">)</span> <span class="keyword">extends</span> <span title="junit.framework.AssertionFailedError">AssertionFailedError</span><span class="delimiter">(</span><a href="#313447" title="Exception">e</a>.<span title="()java.lang.String">getMessage</span><span class="delimiter">)</span> <span class="delimiter">{</span>
  <span class="keyword">override</span> <span class="keyword">def</span> <a title="()Array[java.lang.StackTraceElement]" id="313442">getStackTrace</a> = <a href="#313447" title="Exception">e</a>.<span title="()Array[java.lang.StackTraceElement]">getStackTrace</span>
  <span class="keyword">override</span> <span class="keyword">def</span> <a title="()java.lang.Throwable" id="313443">getCause</a> = <a href="#313447" title="Exception">e</a>.<span title="()java.lang.Throwable">getCause</span>
  <span class="keyword">override</span> <span class="keyword">def</span> <a title="()Unit" id="313444">printStackTrace</a><span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">{</span> <a href="#313447" title="Exception">e</a>.<span title="()Unit">printStackTrace</span><span class="delimiter">(</span><span class="delimiter">)</span> <span class="delimiter">}</span>
  <span class="keyword">override</span> <span class="keyword">def</span> <a title="(w: java.io.PrintStream)Unit" id="313445">printStackTrace</a><span class="delimiter">(</span><a title="java.io.PrintStream" id="314021">w</a>: java.io.<span title="java.io.PrintStream">PrintStream</span><span class="delimiter">)</span> <span class="delimiter">{</span> <a href="#313447" title="Exception">e</a>.<span title="(x$1: java.io.PrintStream)Unit">printStackTrace</span><span class="delimiter">(</span><a href="#314021" title="java.io.PrintStream">w</a><span class="delimiter">)</span> <span class="delimiter">}</span>
  <span class="keyword">override</span> <span class="keyword">def</span> <a title="(w: java.io.PrintWriter)Unit" id="313446">printStackTrace</a><span class="delimiter">(</span><a title="java.io.PrintWriter" id="314028">w</a>: java.io.<span title="java.io.PrintWriter">PrintWriter</span><span class="delimiter">)</span> <span class="delimiter">{</span> <a href="#313447" title="Exception">e</a>.<span title="(x$1: java.io.PrintWriter)Unit">printStackTrace</span><span class="delimiter">(</span><a href="#314028" title="java.io.PrintWriter">w</a><span class="delimiter">)</span> <span class="delimiter">}</span>
<span class="delimiter">}</span>



        </pre>
    </body>
</html>