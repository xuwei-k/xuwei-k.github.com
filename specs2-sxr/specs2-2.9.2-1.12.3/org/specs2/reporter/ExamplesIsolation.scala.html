<?xml version="1.0" encoding="utf-8"?>
      <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <meta http-equiv="Expires" content="0" />
        <title>org/specs2/reporter/ExamplesIsolation.scala</title>
        <script type="text/javascript" src="../../../jquery-all.js"></script>
        <script type="text/javascript" src="../../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../../style.css" title="Style"></link>
    </head>
    <body>
        <pre>
<span class="keyword">package</span> org.specs2
<span class="keyword">package</span> reporter

<span class="keyword">import</span> main.Arguments
<span class="keyword">import</span> control.<a href="../control/LazyParameter.scala.html#9955" title="object org.specs2.control.LazyParameters">LazyParameters</a>._
<span class="keyword">import</span> execute.Result
<span class="keyword">import</span> specification._
<span class="keyword">import</span> specification.<a href="../specification/Fragments.scala.html#12820" title="object org.specs2.specification.Fragments">Fragments</a>._
<span class="keyword">import</span> reflect.Classes

<span class="comment">/**
 * This trait &quot;isolates&quot; examples by replacing their body with another one, created from a clone of the specification.
 *
 */</span>
<span class="keyword">trait</span> <a title="trait ExamplesIsolation extends java.lang.Object with ScalaObject" id="11929">ExamplesIsolation</a> <span title="ScalaObject" class="delimiter">{</span> self: DefaultSelection =&gt;

  <span class="comment">/**
   * This function &quot;clones&quot; the body of each example if the applicable arguments indicate that the specification should
   * be isolated
   */</span>
  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="(implicit arguments: org.specs2.main.Arguments)Seq[(org.specs2.specification.Fragment, org.specs2.main.Arguments, org.specs2.specification.SpecName)] =&gt; Seq[org.specs2.specification.Fragment]" id="66727">isolateExamples</a><span class="delimiter">(</span><span class="keyword">implicit</span> <a title="org.specs2.main.Arguments" id="298507">arguments</a>: <a href="../main/Arguments.scala.html#10577" title="org.specs2.main.Arguments">Arguments</a><span class="delimiter">)</span> = <span class="delimiter">(</span>fs: <span title="Seq[(org.specs2.specification.Fragment, org.specs2.main.Arguments, org.specs2.specification.SpecName)]">Seq</span><span class="delimiter">[</span><span class="delimiter">(</span>Fragment, Arguments, SpecName<span class="delimiter">)</span><span class="delimiter">]</span><span class="delimiter">)</span>=&gt; <span class="delimiter">{</span>
    <a href="#298511" title="Seq[(org.specs2.specification.Fragment, org.specs2.main.Arguments, org.specs2.specification.SpecName)]">fs</a>.<span title="(f: ((org.specs2.specification.Fragment, org.specs2.main.Arguments, org.specs2.specification.SpecName)) =&gt; org.specs2.specification.Fragment)(implicit bf: scala.collection.generic.CanBuildFrom[Seq[(org.specs2.specification.Fragment, org.specs2.main.Arguments, org.specs2.specification.SpecName)],org.specs2.specification.Fragment,Seq[org.specs2.specification.Fragment]])Seq[org.specs2.specification.Fragment]">map</span> <span title="scala.collection.generic.CanBuildFrom[scala.collection.Seq.Coll,org.specs2.specification.Fragment,Seq[org.specs2.specification.Fragment]]" class="delimiter">{</span> <a title="(org.specs2.specification.Fragment, org.specs2.main.Arguments, org.specs2.specification.SpecName)" id="298528">fan</a>  =&gt;
      <span class="keyword">val</span> <a href="#298530" title="(org.specs2.specification.Fragment, org.specs2.main.Arguments, org.specs2.specification.SpecName)" class="delimiter">(</a><a href="#298529" title="org.specs2.specification.Fragment" id="298530">fragment</a>, <a href="#298529" title="org.specs2.main.Arguments" id="298531">args</a>, <a href="#298529" title="org.specs2.specification.SpecName" id="298532">name</a><span class="delimiter">)</span> = <a href="#298528" title="(org.specs2.specification.Fragment, org.specs2.main.Arguments, org.specs2.specification.SpecName)">fan</a>
      <span title="org.specs2.specification.Fragment" class="keyword">if</span> <span class="delimiter">(</span><span class="delimiter">(</span><a href="#298507" title="org.specs2.main.Arguments">arguments</a> <a href="../main/Arguments.scala.html#36593" title="(other: org.specs2.main.Arguments)org.specs2.main.Arguments">&lt;|</a> <a href="#298531" title="org.specs2.main.Arguments">args</a><span class="delimiter">)</span>.<a href="../main/Arguments.scala.html#36577" title="=&gt; Boolean">isolated</a><span class="delimiter">)</span> <span class="delimiter">{</span>
        <a href="#298530" title="org.specs2.specification.Fragment">fragment</a> <span title="org.specs2.specification.Fragment" class="keyword">match</span> <span class="delimiter">{</span>
          <span class="keyword">case</span> <a title="org.specs2.specification.Example" id="298548">e</a> @ Example<span class="delimiter">(</span>_,_<span class="delimiter">)</span> <span class="keyword">if</span> <a href="#298548" title="org.specs2.specification.Example">e</a>.<a href="../specification/Fragment.scala.html#36512" title="=&gt; Boolean">isolable</a> =&gt; <a href="#298548" title="org.specs2.specification.Example">e</a>.<a href="../specification/Fragment.scala.html#298552" title="org.specs2.text.MarkupString" id="298995">copy</a><span class="delimiter">(</span>body = <span class="delimiter">(</span><span class="delimiter">)</span> =&gt; <a href="#66728" title="(name: org.specs2.specification.SpecName, f: org.specs2.specification.Fragment, body: =&gt; org.specs2.execute.Result)(implicit arguments: org.specs2.main.Arguments)org.specs2.execute.Result">copyBody</a><a href="#298507" title="org.specs2.main.Arguments" class="delimiter">(</a><a href="#298532" title="org.specs2.specification.SpecName">name</a>, <a href="#298548" title="org.specs2.specification.Example">e</a>, <a href="#298548" title="org.specs2.specification.Example">e</a>.<a href="../specification/Fragment.scala.html#36509" title="()org.specs2.execute.Result">body</a><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
          <span class="keyword">case</span> <a title="org.specs2.specification.Action" id="298996">a</a> @ Action<span class="delimiter">(</span>_<span class="delimiter">)</span>    <span class="keyword">if</span> <a href="#298996" title="org.specs2.specification.Action">a</a>.<a href="../specification/Fragment.scala.html#284893" title="=&gt; Boolean">isolable</a> =&gt; <a href="#298996" title="org.specs2.specification.Action">a</a>.<a href="../specification/Fragment.scala.html#284904" title="(action: org.specs2.control.LazyParameter[org.specs2.execute.Result])org.specs2.specification.Action">copy</a><span class="delimiter">(</span>action = <a href="../control/LazyParameter.scala.html#36486" title="(value: =&gt; org.specs2.execute.Result)org.specs2.control.LazyParameter[org.specs2.execute.Result]">lazyfy</a><span class="delimiter">(</span><a href="#66728" title="(name: org.specs2.specification.SpecName, f: org.specs2.specification.Fragment, body: =&gt; org.specs2.execute.Result)(implicit arguments: org.specs2.main.Arguments)org.specs2.execute.Result">copyBody</a><a href="#298507" title="org.specs2.main.Arguments" class="delimiter">(</a><a href="#298532" title="org.specs2.specification.SpecName">name</a>, <a href="#298996" title="org.specs2.specification.Action">a</a>, <a href="#298996" title="org.specs2.specification.Action">a</a>.<a href="../specification/Fragment.scala.html#284897" title="=&gt; org.specs2.execute.Result">execute</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
          <span class="keyword">case</span> <a title="org.specs2.specification.Fragment" id="299003">other</a>                          =&gt; <a href="#299003" title="org.specs2.specification.Fragment">other</a>
        <span class="delimiter">}</span>
      <span class="delimiter">}</span> <span class="keyword">else</span> <a href="#298530" title="org.specs2.specification.Fragment">fragment</a>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="comment">/**
   * @return an Example which body comes from the execution of that example in a brand new instance of the Specification
   */</span>
  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="(name: org.specs2.specification.SpecName, f: org.specs2.specification.Fragment, body: =&gt; org.specs2.execute.Result)(implicit arguments: org.specs2.main.Arguments)org.specs2.execute.Result" id="66728">copyBody</a><span class="delimiter">(</span><a title="org.specs2.specification.SpecName" id="298558">name</a>: <a href="../specification/SpecName.scala.html#13075" title="org.specs2.specification.SpecName">SpecName</a>, <a title="org.specs2.specification.Fragment" id="298559">f</a>: <a href="../specification/Fragment.scala.html#12773" title="org.specs2.specification.Fragment">Fragment</a>, <a title="=&gt; org.specs2.execute.Result" id="298560">body</a>: =&gt;Result<span class="delimiter">)</span><span class="delimiter">(</span><span class="keyword">implicit</span> <a title="org.specs2.main.Arguments" id="298561">arguments</a>: <a href="../main/Arguments.scala.html#10577" title="org.specs2.main.Arguments">Arguments</a><span class="delimiter">)</span> = <span class="delimiter">{</span>
    <a href="../reflect/Classes.scala.html#11872" title="object org.specs2.reflect.Classes">Classes</a>.<a href="../reflect/Classes.scala.html#126727" title="[T &lt;: AnyRef](className: String, printMessage: Boolean, printStackTrace: Boolean, loader: java.lang.ClassLoader, parameter: Option[AnyRef])(implicit m: scala.reflect.Manifest[T])Option[T]">tryToCreateObject</a><a href="../reflect/Classes.scala.html#290483" title="(className: String, printMessage: Boolean, printStackTrace: Boolean, loader: java.lang.ClassLoader, parameter: Option[AnyRef])(implicit m: scala.reflect.Manifest[org.specs2.specification.SpecificationNavigation])Option[org.specs2.specification.SpecificationNavigation]" class="delimiter">[</a><a href="../specification/SpecificationNavigation.scala.html#13087" title="org.specs2.specification.SpecificationNavigation">SpecificationNavigation</a><span class="delimiter">]</span><span title="(clazz: Class[_])scala.reflect.Manifest[org.specs2.specification.SpecificationNavigation]" class="delimiter">(</span><a href="#298558" title="org.specs2.specification.SpecName">name</a>.<a href="../specification/SpecName.scala.html#51073" title="=&gt; String">javaClassName</a><span class="delimiter">)</span>.<span title="(f: org.specs2.specification.SpecificationNavigation =&gt; org.specs2.execute.Result)Option[org.specs2.execute.Result]">map</span> <span class="delimiter">{</span> <a title="org.specs2.specification.SpecificationNavigation" id="298582">specification</a> =&gt;
      <span class="keyword">val</span> <a title="scala.collection.immutable.IndexedSeq[org.specs2.specification.Fragment]" id="298583">fragments</a> = <a href="Selection.scala.html#66731" title="(fragments: Seq[org.specs2.specification.Fragment])(implicit arguments: org.specs2.main.Arguments)Seq[org.specs2.specification.Fragment]">select</a><a href="#298561" title="org.specs2.main.Arguments" class="delimiter">(</a><a href="#298582" title="org.specs2.specification.SpecificationNavigation">specification</a>.<a href="../specification/SpecificationNavigation.scala.html#52793" title="(f: org.specs2.specification.Fragment)Seq[org.specs2.specification.Fragment]">fragmentsTo</a><span class="delimiter">(</span><a href="#298559" title="org.specs2.specification.Fragment">f</a><span class="delimiter">)</span><span class="delimiter">)</span>.<span title="scala.collection.immutable.IndexedSeq[org.specs2.specification.Fragment]">toIndexedSeq</span>

      <span class="keyword">def</span> <a title="=&gt; Unit" id="298584">executeStepsBefore</a> = <a href="#298583" title="scala.collection.immutable.IndexedSeq[org.specs2.specification.Fragment]">fragments</a>.<span title="(pf: PartialFunction[org.specs2.specification.Fragment,org.specs2.specification.Step])(implicit bf: scala.collection.generic.CanBuildFrom[scala.collection.immutable.IndexedSeq[org.specs2.specification.Fragment],org.specs2.specification.Step,scala.collection.immutable.IndexedSeq[org.specs2.specification.Step]])scala.collection.immutable.IndexedSeq[org.specs2.specification.Step]">collect</span><span title="scala.collection.generic.CanBuildFrom[scala.collection.immutable.IndexedSeq.Coll,org.specs2.specification.Step,scala.collection.immutable.IndexedSeq[org.specs2.specification.Step]]" class="delimiter">(</span><a href="../specification/Fragments.scala.html#48507" title="=&gt; PartialFunction[org.specs2.specification.Fragment,org.specs2.specification.Step]">isAStep</a><span class="delimiter">)</span>.<span title="(p: org.specs2.specification.Step =&gt; Boolean)scala.collection.immutable.IndexedSeq[org.specs2.specification.Step]">filter</span><span class="delimiter">(</span><a href="#298671" title="org.specs2.specification.Step">_</a>.<a href="../specification/Fragment.scala.html#284938" title="=&gt; Boolean">isolable</a><span class="delimiter">)</span>.<span title="(f: org.specs2.specification.Step =&gt; org.specs2.execute.Result)Unit">foreach</span><span class="delimiter">(</span><a href="#298703" title="org.specs2.specification.Step">_</a>.<a href="../specification/Fragment.scala.html#284940" title="=&gt; org.specs2.execute.Result">execute</a><span class="delimiter">)</span>

      <a href="#298583" title="scala.collection.immutable.IndexedSeq[org.specs2.specification.Fragment]">fragments</a>.<span title="(pf: PartialFunction[org.specs2.specification.Fragment,Product with Serializable with org.specs2.execute.Executable with org.specs2.specification.Fragment with org.specs2.execute.Isolable{def map(f: org.specs2.execute.Result =&gt; org.specs2.execute.Result): Product with Serializable with org.specs2.execute.Executable with org.specs2.specification.Fragment with org.specs2.execute.Isolable{def map(f: org.specs2.execute.Result =&gt; org.specs2.execute.Result): Product with Serializable with org.specs2.execute.Executable with org.specs2.specification.Fragment with org.specs2.execute.Isolable}}])(implicit bf: scala.collection.generic.CanBuildFrom[scala.collection.immutable.IndexedSeq[org.specs2.specification.Fragment],Product with Serializable with org.specs2.execute.Executable with org.specs2.specification.Fragment with org.specs2.execute.Isolable{def map(f: org.specs2.execute.Result =&gt; org.specs2.execute.Result): Product with Serializable with org.specs2.execute.Executable with org.specs2.specification.Fragment with org.specs2.execute.Isolable{def map(f: org.specs2.execute.Result =&gt; org.specs2.execute.Result): Product with Serializable with org.specs2.execute.Executable with org.specs2.specification.Fragment with org.specs2.execute.Isolable}},scala.collection.immutable.IndexedSeq[Product with Serializable with org.specs2.execute.Executable with org.specs2.specification.Fragment with org.specs2.execute.Isolable{def map(f: org.specs2.execute.Result =&gt; org.specs2.execute.Result): Product with Serializable with org.specs2.execute.Executable with org.specs2.specification.Fragment with org.specs2.execute.Isolable{def map(f: org.specs2.execute.Result =&gt; org.specs2.execute.Result): Product with Serializable with org.specs2.execute.Executable with org.specs2.specification.Fragment with org.specs2.execute.Isolable}}]])scala.collection.immutable.IndexedSeq[Product with Serializable with org.specs2.execute.Executable with org.specs2.specification.Fragment with org.specs2.execute.Isolable{def map(f: org.specs2.execute.Result =&gt; org.specs2.execute.Result): Product with Serializable with org.specs2.execute.Executable with org.specs2.specification.Fragment with org.specs2.execute.Isolable{def map(f: org.specs2.execute.Result =&gt; org.specs2.execute.Result): Product with Serializable with org.specs2.execute.Executable with org.specs2.specification.Fragment with org.specs2.execute.Isolable}}]">collect</span><span title="scala.collection.generic.CanBuildFrom[scala.collection.immutable.IndexedSeq.Coll,Product with Serializable with org.specs2.execute.Executable with org.specs2.specification.Fragment with org.specs2.execute.Isolable{def map(f: org.specs2.execute.Result =&gt; org.specs2.execute.Result): Product with Serializable with org.specs2.execute.Executable with org.specs2.specification.Fragment with org.specs2.execute.Isolable{def map(f: org.specs2.execute.Result =&gt; org.specs2.execute.Result): Product with Serializable with org.specs2.execute.Executable with org.specs2.specification.Fragment with org.specs2.execute.Isolable}},scala.collection.immutable.IndexedSeq[Product with Serializable with org.specs2.execute.Executable with org.specs2.specification.Fragment with org.specs2.execute.Isolable{def map(f: org.specs2.execute.Result =&gt; org.specs2.execute.Result): Product with Serializable with org.specs2.execute.Executable with org.specs2.specification.Fragment with org.specs2.execute.Isolable{def map(f: org.specs2.execute.Result =&gt; org.specs2.execute.Result): Product with Serializable with org.specs2.execute.Executable with org.specs2.specification.Fragment with org.specs2.execute.Isolable}}]]" class="delimiter">(</span><a href="../specification/Fragments.scala.html#48499" title="=&gt; PartialFunction[org.specs2.specification.Fragment,org.specs2.specification.Example]">isAnExample</a>.<span title="(that: PartialFunction[org.specs2.specification.Fragment,Product with Serializable with org.specs2.execute.Executable with org.specs2.specification.Fragment with org.specs2.execute.Isolable{def map(f: org.specs2.execute.Result =&gt; org.specs2.execute.Result): Product with Serializable with org.specs2.execute.Executable with org.specs2.specification.Fragment with org.specs2.execute.Isolable{def map(f: org.specs2.execute.Result =&gt; org.specs2.execute.Result): Product with Serializable with org.specs2.execute.Executable with org.specs2.specification.Fragment with org.specs2.execute.Isolable}}])PartialFunction[org.specs2.specification.Fragment,Product with Serializable with org.specs2.execute.Executable with org.specs2.specification.Fragment with org.specs2.execute.Isolable{def map(f: org.specs2.execute.Result =&gt; org.specs2.execute.Result): Product with Serializable with org.specs2.execute.Executable with org.specs2.specification.Fragment with org.specs2.execute.Isolable{def map(f: org.specs2.execute.Result =&gt; org.specs2.execute.Result): Product with Serializable with org.specs2.execute.Executable with org.specs2.specification.Fragment with org.specs2.execute.Isolable}}]">orElse</span><span class="delimiter">(</span><a href="../specification/Fragments.scala.html#48508" title="=&gt; PartialFunction[org.specs2.specification.Fragment,org.specs2.specification.Action]">isAnAction</a><span class="delimiter">)</span><span class="delimiter">)</span>.<span title="=&gt; Option[Product with Serializable with org.specs2.execute.Executable with org.specs2.specification.Fragment with org.specs2.execute.Isolable{def map(f: org.specs2.execute.Result =&gt; org.specs2.execute.Result): Product with Serializable with org.specs2.execute.Executable with org.specs2.specification.Fragment with org.specs2.execute.Isolable{def map(f: org.specs2.execute.Result =&gt; org.specs2.execute.Result): Product with Serializable with org.specs2.execute.Executable with org.specs2.specification.Fragment with org.specs2.execute.Isolable}}]">lastOption</span> <span title="org.specs2.execute.Result" class="keyword">match</span> <span class="delimiter">{</span>
        <span class="keyword">case</span> <span title="org.specs2.execute.Result">Some</span><span class="delimiter">(</span><a title="org.specs2.specification.Example" id="298957">e</a> @ Example<span class="delimiter">(</span>_, _<span class="delimiter">)</span><span class="delimiter">)</span> =&gt; <a href="#298584" title="=&gt; Unit">executeStepsBefore</a>; <a href="#298957" title="org.specs2.specification.Example">e</a>.<a href="../specification/Fragment.scala.html#36516" title="=&gt; org.specs2.execute.Result">execute</a>
        <span class="keyword">case</span> <span title="org.specs2.execute.Result">Some</span><span class="delimiter">(</span><a title="org.specs2.specification.Action" id="298971">a</a> @ Action<span class="delimiter">(</span>_<span class="delimiter">)</span><span class="delimiter">)</span>     =&gt; <a href="#298584" title="=&gt; Unit">executeStepsBefore</a>; <a href="#298971" title="org.specs2.specification.Action">a</a>.<a href="../specification/Fragment.scala.html#284897" title="=&gt; org.specs2.execute.Result">execute</a>
        <span class="keyword">case</span> <a title="org.specs2.execute.Result" id="298987">other</a>                   =&gt; <a href="#298560" title="=&gt; org.specs2.execute.Result">body</a>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>.<span title="(default: =&gt; org.specs2.execute.Result)org.specs2.execute.Result">getOrElse</span><span class="delimiter">(</span><a href="#298560" title="=&gt; org.specs2.execute.Result">body</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>
<span title="Int(2)" class="int">2</span>
<span class="delimiter">}</span>

        </pre>
    </body>
</html>