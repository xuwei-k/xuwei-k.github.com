<?xml version="1.0" encoding="utf-8"?>
      <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <meta http-equiv="Expires" content="0" />
        <title>org/specs2/reporter/NestedBlocks.scala</title>
        <script type="text/javascript" src="../../../jquery-all.js"></script>
        <script type="text/javascript" src="../../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../../style.css" title="Style"></link>
    </head>
    <body>
        <pre>
<span class="keyword">package</span> org.specs2
<span class="keyword">package</span> reporter

<span class="keyword">import</span> org.specs2.internal.scalaz._
<span class="keyword">import</span>  <span title="object org.specs2.internal.scalaz.Scalaz">Scalaz</span>._
<span class="keyword">import</span> data.<a href="../data/Trees.scala.html#10059" title="object org.specs2.data.Trees">Trees</a>._
<span class="keyword">import</span> specification.<span class="delimiter">{</span>SpecEnd, SpecStart, Fragment, ExecutedSpecEnd, ExecutedSpecStart, ExecutedFragment<span class="delimiter">}</span>

<span class="comment">/**
* This trait takes a sequence of delimited blocks and uses that information to either:
*
* - define what is the &quot;current&quot; context and makes sure that the current context is overriding the &quot;parent&quot; context
* - sum the &quot;values&quot; of the current context and cumulate the total of children contexts into the parent context
*
*/</span>
<span class="keyword">private</span><span class="delimiter">[</span>specs2<span class="delimiter">]</span>
<span class="keyword">trait</span> <a title="trait NestedBlocks extends java.lang.Object with ScalaObject" id="12227">NestedBlocks</a> <span title="ScalaObject" class="delimiter">{</span>
  <span class="keyword">sealed</span> <span class="keyword">trait</span> <a title="trait SpecBlock[T] extends java.lang.Object" id="294854">SpecBlock</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="294855">T</a><span class="delimiter">]</span> <span title="java.lang.Object" class="delimiter">{</span>
    <span class="keyword">def</span> <a title="=&gt; T" id="305467">value</a>: <a href="#294855" title="T">T</a>
    <span class="keyword">def</span> <a title="[S](value: S)NestedBlocks.this.SpecBlock[S]" id="305468">update</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="305470">S</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="S" id="318022">value</a>: <a href="#305470" title="S">S</a><span class="delimiter">)</span>: <a href="#294854" title="NestedBlocks.this.SpecBlock[S]">SpecBlock</a><span class="delimiter">[</span>S<span class="delimiter">]</span>
  <span class="delimiter">}</span>
  case <span class="keyword">class</span> <a title="class BlockStart[T] extends java.lang.Object with NestedBlocks.this.SpecBlock[T] with ScalaObject with Product with Serializable" id="305484">BlockStart</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="305486">T</a><span class="delimiter">]</span><a href="#305484" title="ScalaObject" class="delimiter">(</a><a title="T" id="305500">value</a>: <a href="#305486" title="T">T</a><span class="delimiter">)</span> <span class="keyword">extends</span> <a href="#294854" title="NestedBlocks.this.SpecBlock[T]">SpecBlock</a><span class="delimiter">[</span>T<span class="delimiter">]</span> <span class="delimiter">{</span>
    <span class="keyword">def</span> <a title="[S](value: S)NestedBlocks.this.SpecBlock[S]" id="305491">update</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="305493">S</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="S" id="318027">value</a>: <a href="#305493" title="S">S</a><span class="delimiter">)</span>: <a href="#294854" title="NestedBlocks.this.SpecBlock[S]">SpecBlock</a><span class="delimiter">[</span>S<span class="delimiter">]</span> = <a href="#305484" title="(value: S)NestedBlocks.this.BlockStart[S]">BlockStart</a><span class="delimiter">(</span><a href="#318027" title="S">value</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>
  case <span class="keyword">class</span> <a title="class BlockEnd[T] extends java.lang.Object with NestedBlocks.this.SpecBlock[T] with ScalaObject with Product with Serializable" id="305558">BlockEnd</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="305560">T</a><span class="delimiter">]</span><a href="#305558" title="ScalaObject" class="delimiter">(</a><a title="T" id="305574">value</a>: <a href="#305560" title="T">T</a><span class="delimiter">)</span> <span class="keyword">extends</span> <a href="#294854" title="NestedBlocks.this.SpecBlock[T]">SpecBlock</a><span class="delimiter">[</span>T<span class="delimiter">]</span>  <span class="delimiter">{</span>
    <span class="keyword">def</span> <a title="[S](value: S)NestedBlocks.this.SpecBlock[S]" id="305565">update</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="305567">S</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="S" id="318080">value</a>: <a href="#305567" title="S">S</a><span class="delimiter">)</span>: <a href="#294854" title="NestedBlocks.this.SpecBlock[S]">SpecBlock</a><span class="delimiter">[</span>S<span class="delimiter">]</span> = <a href="#305558" title="(value: S)NestedBlocks.this.BlockEnd[S]">BlockEnd</a><span class="delimiter">(</span><a href="#318080" title="S">value</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>
  case <span class="keyword">class</span> <a title="class BlockBit[T] extends java.lang.Object with NestedBlocks.this.SpecBlock[T] with ScalaObject with Product with Serializable" id="305625">BlockBit</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="305627">T</a><span class="delimiter">]</span><a href="#305625" title="ScalaObject" class="delimiter">(</a><a title="T" id="305641">value</a>: <a href="#305627" title="T">T</a><span class="delimiter">)</span> <span class="keyword">extends</span> <a href="#294854" title="NestedBlocks.this.SpecBlock[T]">SpecBlock</a><span class="delimiter">[</span>T<span class="delimiter">]</span> <span class="delimiter">{</span>
    <span class="keyword">def</span> <a title="[S](value: S)NestedBlocks.this.SpecBlock[S]" id="305632">update</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="305634">S</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="S" id="318133">value</a>: <a href="#305634" title="S">S</a><span class="delimiter">)</span>: <a href="#294854" title="NestedBlocks.this.SpecBlock[S]">SpecBlock</a><span class="delimiter">[</span>S<span class="delimiter">]</span> = <a href="#305625" title="(value: S)NestedBlocks.this.BlockBit[S]">BlockBit</a><span class="delimiter">(</span><a href="#318133" title="S">value</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>
  <span class="keyword">def</span> <a title="[T](b: NestedBlocks.this.SpecBlock[T])Boolean" id="294868">isBlockStart</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="294870">T</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="NestedBlocks.this.SpecBlock[T]" id="318183">b</a>: <a href="#294854" title="NestedBlocks.this.SpecBlock[T]">SpecBlock</a><span class="delimiter">[</span>T<span class="delimiter">]</span><span class="delimiter">)</span> = <a href="#318183" title="NestedBlocks.this.SpecBlock[T]">b</a> <span title="Boolean" class="keyword">match</span> <span class="delimiter">{</span> <span class="keyword">case</span> <span title="Boolean(true)">BlockStart</span><span class="delimiter">(</span>_<span class="delimiter">)</span> =&gt; <span title="Boolean(true)" class="keyword">true</span>; <span class="keyword">case</span> <span title="Boolean(false)">_</span> =&gt; <span title="Boolean(false)" class="keyword">false</span> <span class="delimiter">}</span>
  <span class="keyword">def</span> <a title="[T](b: NestedBlocks.this.SpecBlock[T])Boolean" id="294871">isBlockEnd</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="294873">T</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="NestedBlocks.this.SpecBlock[T]" id="318188">b</a>: <a href="#294854" title="NestedBlocks.this.SpecBlock[T]">SpecBlock</a><span class="delimiter">[</span>T<span class="delimiter">]</span><span class="delimiter">)</span>   = <a href="#318188" title="NestedBlocks.this.SpecBlock[T]">b</a> <span title="Boolean" class="keyword">match</span> <span class="delimiter">{</span> <span class="keyword">case</span> <span title="Boolean(true)">BlockEnd</span><span class="delimiter">(</span>_<span class="delimiter">)</span>   =&gt; <span title="Boolean(true)" class="keyword">true</span>; <span class="keyword">case</span> <span title="Boolean(false)">_</span> =&gt; <span title="Boolean(false)" class="keyword">false</span> <span class="delimiter">}</span>
  <span class="keyword">def</span> <a title="[T](b: NestedBlocks.this.SpecBlock[T])Boolean" id="294874">isBlockBit</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="294876">T</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="NestedBlocks.this.SpecBlock[T]" id="318193">b</a>: <a href="#294854" title="NestedBlocks.this.SpecBlock[T]">SpecBlock</a><span class="delimiter">[</span>T<span class="delimiter">]</span><span class="delimiter">)</span>   = <a href="#318193" title="NestedBlocks.this.SpecBlock[T]">b</a> <span title="Boolean" class="keyword">match</span> <span class="delimiter">{</span> <span class="keyword">case</span> <span title="Boolean(true)">BlockBit</span><span class="delimiter">(</span>_<span class="delimiter">)</span>   =&gt; <span title="Boolean(true)" class="keyword">true</span>; <span class="keyword">case</span> <span title="Boolean(false)">_</span> =&gt; <span title="Boolean(false)" class="keyword">false</span> <span class="delimiter">}</span>

  <span class="comment">/**
   * The context is overriden when we enter a Nested Block.
   * This is used for Arguments management, where arguments of an included specification must override those of the parent
   * one.
   */</span>
  <span class="keyword">def</span> <a title="[T](blocks: Seq[NestedBlocks.this.SpecBlock[T]])(implicit evidence$1: org.specs2.internal.scalaz.Monoid[T])Seq[T]" id="318199">overrideContext</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="294879">T</a> : Monoid<span class="delimiter">]</span><span class="delimiter">(</span><a title="Seq[NestedBlocks.this.SpecBlock[T]]" id="318198">blocks</a>: <span title="Seq[NestedBlocks.this.SpecBlock[T]]">Seq</span><span class="delimiter">[</span>SpecBlock<span class="delimiter">[</span>T<span class="delimiter">]</span><span class="delimiter">]</span><span class="delimiter">)</span>: <span title="Seq[T]">Seq</span><span class="delimiter">[</span>T<span class="delimiter">]</span> = <a href="#318209" title="(blocks: Seq[NestedBlocks.this.SpecBlock[T]], f: T =&gt; T)(implicit evidence$2: org.specs2.internal.scalaz.Monoid[T])Seq[T]">overrideContext</a><a href="#318199" title="org.specs2.internal.scalaz.Monoid[T]" class="delimiter">(</a><a href="#318198" title="Seq[NestedBlocks.this.SpecBlock[T]]">blocks</a>, <span title="[A](x: A)A">identity</span><a href="#318300" title="(x: T)T" class="delimiter">[</a><a href="#294879" title="T">T</a><span class="delimiter">]</span><span class="delimiter">)</span>
  <span class="keyword">def</span> <a title="[T, S](blocks: Seq[NestedBlocks.this.SpecBlock[T]], f: T =&gt; S)(implicit evidence$2: org.specs2.internal.scalaz.Monoid[T])Seq[S]" id="318209">overrideContext</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="294883">T</a> : Monoid, <a title="&gt;: Nothing &lt;: Any" id="294884">S</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="Seq[NestedBlocks.this.SpecBlock[T]]" id="318207">blocks</a>: <span title="Seq[NestedBlocks.this.SpecBlock[T]]">Seq</span><span class="delimiter">[</span>SpecBlock<span class="delimiter">[</span>T<span class="delimiter">]</span><span class="delimiter">]</span>, <a title="T =&gt; S" id="318208">f</a>: T =&gt; S<span class="delimiter">)</span>: <span title="Seq[S]">Seq</span><span class="delimiter">[</span>S<span class="delimiter">]</span> = <span class="delimiter">{</span>
    <a href="#318207" title="Seq[NestedBlocks.this.SpecBlock[T]]">blocks</a>.<span title="(z: (Seq[S], Seq[T]))(op: ((Seq[S], Seq[T]), NestedBlocks.this.SpecBlock[T]) =&gt; (Seq[S], Seq[T]))(Seq[S], Seq[T])">foldLeft</span><span class="delimiter">(</span><span title="(_1: Seq[S], _2: Seq[T])(Seq[S], Seq[T])" class="delimiter">(</span><span title="(elems: Nothing*)scala.collection.immutable.Vector[Nothing]">Vector</span><span class="delimiter">(</span><span class="delimiter">)</span>: <span title="Seq[S]">Seq</span><span class="delimiter">[</span>S<span class="delimiter">]</span>, <span title="(elems: Nothing*)scala.collection.immutable.Vector[Nothing]">Vector</span><span class="delimiter">(</span><span class="delimiter">)</span>: <span title="Seq[T]">Seq</span><span class="delimiter">[</span>T<span class="delimiter">]</span><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">{</span> <span class="delimiter">(</span><a title="(Seq[S], Seq[T])" id="318366">res</a>, <a title="NestedBlocks.this.SpecBlock[T]" id="318367">cur</a><span class="delimiter">)</span> =&gt;
      <span class="keyword">val</span> <a href="#318369" title="(Seq[S], Seq[T])" class="delimiter">(</a><a href="#318368" title="Seq[S]" id="318369">result</a>, <a href="#318368" title="Seq[T]" id="318370">stack</a><span class="delimiter">)</span> = <a href="#318366" title="(Seq[S], Seq[T])">res</a>
      <a href="#318367" title="NestedBlocks.this.SpecBlock[T]">cur</a> <span title="(Seq[S], Seq[T])" class="keyword">match</span> <span class="delimiter">{</span>
        <span class="keyword">case</span> <span title="(Seq[S], Seq[T])">BlockStart</span><span class="delimiter">(</span><a title="T" id="318382">value</a><span class="delimiter">)</span>       =&gt; <span title="(_1: Seq[S], _2: Seq[T])(Seq[S], Seq[T])" class="delimiter">(</span><a href="#318369" title="Seq[S]">result</a> <span title="(elem: S)(implicit bf: scala.collection.generic.CanBuildFrom[Seq[S],S,Seq[S]])Seq[S]">:+</span> <a href="#318208" title="(v1: T)S">f</a><span class="delimiter">(</span><a href="#318406" title="(stack: Seq[T])(implicit evidence$7: org.specs2.internal.scalaz.Monoid[T])T">top</a><a href="#318209" title="(x: =&gt; T)org.specs2.internal.scalaz.Identity[T]" class="delimiter">(</a><a href="#318370" title="Seq[T]">stack</a><span class="delimiter">)</span> <a href="#318209" title="(a: =&gt; T)(implicit s: org.specs2.internal.scalaz.Semigroup[T])T">|+|</a> <a href="#318382" title="T">value</a><span class="delimiter">)</span>, <span class="delimiter">(</span><a href="#318406" title="(stack: Seq[T])(implicit evidence$7: org.specs2.internal.scalaz.Monoid[T])T">top</a><a href="#318209" title="(x: =&gt; T)org.specs2.internal.scalaz.Identity[T]" class="delimiter">(</a><a href="#318370" title="Seq[T]">stack</a><span class="delimiter">)</span> <a href="#318209" title="(a: =&gt; T)(implicit s: org.specs2.internal.scalaz.Semigroup[T])T">|+|</a> <a href="#318382" title="T">value</a><span class="delimiter">)</span> <a href="#318518" title="(elem: T)(implicit bf: scala.collection.generic.CanBuildFrom[Seq[T],T,Seq[T]])Seq[T]">+:</a> <a href="#318370" title="Seq[T]">stack</a><span class="delimiter">)</span>
        <span class="keyword">case</span> <span title="(Seq[S], Seq[T])">BlockBit</span><span class="delimiter">(</span><a title="T" id="318645">value</a><span class="delimiter">)</span>         =&gt; <span title="(_1: Seq[S], _2: Seq[T])(Seq[S], Seq[T])" class="delimiter">(</span><a href="#318369" title="Seq[S]">result</a> <span title="(elem: S)(implicit bf: scala.collection.generic.CanBuildFrom[Seq[S],S,Seq[S]])Seq[S]">:+</span> <a href="#318208" title="(v1: T)S">f</a><span class="delimiter">(</span><a href="#318406" title="(stack: Seq[T])(implicit evidence$7: org.specs2.internal.scalaz.Monoid[T])T">top</a><a href="#318209" title="org.specs2.internal.scalaz.Monoid[T]" class="delimiter">(</a><a href="#318370" title="Seq[T]">stack</a><span class="delimiter">)</span><span class="delimiter">)</span>, <a href="#318370" title="Seq[T]">stack</a><span class="delimiter">)</span>
        <span class="keyword">case</span> <span title="(Seq[S], Seq[T])">BlockEnd</span><span class="delimiter">(</span><a title="T" id="318695">value</a><span class="delimiter">)</span>         =&gt; <span title="(_1: Seq[S], _2: Seq[T])(Seq[S], Seq[T])" class="delimiter">(</span><a href="#318369" title="Seq[S]">result</a> <span title="(elem: S)(implicit bf: scala.collection.generic.CanBuildFrom[Seq[S],S,Seq[S]])Seq[S]">:+</span> <a href="#318208" title="(v1: T)S">f</a><span class="delimiter">(</span><a href="#318406" title="(stack: Seq[T])(implicit evidence$7: org.specs2.internal.scalaz.Monoid[T])T">top</a><a href="#318209" title="org.specs2.internal.scalaz.Monoid[T]" class="delimiter">(</a><a href="#318370" title="Seq[T]">stack</a><span class="delimiter">)</span><span class="delimiter">)</span>, <a href="#294907" title="(stack: Seq[T])Seq[T]">pop</a><span class="delimiter">(</span><a href="#318370" title="Seq[T]">stack</a><span class="delimiter">)</span><span class="delimiter">)</span>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>.<span title="=&gt; Seq[S]">_1</span>
  <span class="delimiter">}</span>

  <span class="comment">/**
   * The context is reset when we enter a Nested Block and totaled when we leave it.
   * This is used for Statistics management where an included specification must start new Statistics then add its
   * total to the parent ones.
   */</span>
  <span class="keyword">def</span> <a title="[T](blocks: Seq[NestedBlocks.this.SpecBlock[T]])(implicit evidence$3: org.specs2.internal.scalaz.Monoid[T])Seq[T]" id="318763">totalContext</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="294887">T</a> : Monoid<span class="delimiter">]</span><span class="delimiter">(</span><a title="Seq[NestedBlocks.this.SpecBlock[T]]" id="318762">blocks</a>: <span title="Seq[NestedBlocks.this.SpecBlock[T]]">Seq</span><span class="delimiter">[</span>SpecBlock<span class="delimiter">[</span>T<span class="delimiter">]</span><span class="delimiter">]</span><span class="delimiter">)</span>: <span title="Seq[T]">Seq</span><span class="delimiter">[</span>T<span class="delimiter">]</span> = <a href="#318773" title="(blocks: Seq[NestedBlocks.this.SpecBlock[T]], f: T =&gt; T)(implicit evidence$4: org.specs2.internal.scalaz.Monoid[T])Seq[T]">totalContext</a><a href="#318763" title="org.specs2.internal.scalaz.Monoid[T]" class="delimiter">(</a><a href="#318762" title="Seq[NestedBlocks.this.SpecBlock[T]]">blocks</a>, <span title="[A](x: A)A">identity</span><a href="#318861" title="(x: T)T" class="delimiter">[</a><a href="#294887" title="T">T</a><span class="delimiter">]</span><span class="delimiter">)</span>
  <span class="keyword">def</span> <a title="[T, S](blocks: Seq[NestedBlocks.this.SpecBlock[T]], f: T =&gt; S)(implicit evidence$4: org.specs2.internal.scalaz.Monoid[T])Seq[S]" id="318773">totalContext</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="294891">T</a> : Monoid, <a title="&gt;: Nothing &lt;: Any" id="294892">S</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="Seq[NestedBlocks.this.SpecBlock[T]]" id="318771">blocks</a>: <span title="Seq[NestedBlocks.this.SpecBlock[T]]">Seq</span><span class="delimiter">[</span>SpecBlock<span class="delimiter">[</span>T<span class="delimiter">]</span><span class="delimiter">]</span>, <a title="T =&gt; S" id="318772">f</a>: T =&gt; S<span class="delimiter">)</span>: <span title="Seq[S]">Seq</span><span class="delimiter">[</span>S<span class="delimiter">]</span> = <span class="delimiter">{</span>
    <a href="#318771" title="Seq[NestedBlocks.this.SpecBlock[T]]">blocks</a>.<span title="(z: (Seq[S], Seq[T]))(op: ((Seq[S], Seq[T]), NestedBlocks.this.SpecBlock[T]) =&gt; (Seq[S], Seq[T]))(Seq[S], Seq[T])">foldLeft</span><span class="delimiter">(</span><span title="(_1: Seq[S], _2: Seq[T])(Seq[S], Seq[T])" class="delimiter">(</span><span title="(elems: Nothing*)scala.collection.immutable.Vector[Nothing]">Vector</span><span class="delimiter">(</span><span class="delimiter">)</span>: <span title="Seq[S]">Seq</span><span class="delimiter">[</span>S<span class="delimiter">]</span>, <span title="(elems: Nothing*)scala.collection.immutable.Vector[Nothing]">Vector</span><span class="delimiter">(</span><span class="delimiter">)</span>: <span title="Seq[T]">Seq</span><span class="delimiter">[</span>T<span class="delimiter">]</span><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">{</span> <span class="delimiter">(</span><a title="(Seq[S], Seq[T])" id="318927">res</a>, <a title="NestedBlocks.this.SpecBlock[T]" id="318928">cur</a><span class="delimiter">)</span> =&gt;
      <span class="keyword">val</span> <a href="#318930" title="(Seq[S], Seq[T])" class="delimiter">(</a><a href="#318929" title="Seq[S]" id="318930">result</a>, <a href="#318929" title="Seq[T]" id="318931">stack</a><span class="delimiter">)</span> = <a href="#318927" title="(Seq[S], Seq[T])">res</a>
      <a href="#318928" title="NestedBlocks.this.SpecBlock[T]">cur</a> <span title="(Seq[S], Seq[T])" class="keyword">match</span> <span class="delimiter">{</span>
        <span class="keyword">case</span> <span title="(Seq[S], Seq[T])">BlockStart</span><span class="delimiter">(</span><a title="T" id="318943">value</a><span class="delimiter">)</span>       =&gt; <span title="(_1: Seq[S], _2: Seq[T])(Seq[S], Seq[T])" class="delimiter">(</span><a href="#318930" title="Seq[S]">result</a> <span title="(elem: S)(implicit bf: scala.collection.generic.CanBuildFrom[Seq[S],S,Seq[S]])Seq[S]">:+</span> <a href="#318772" title="(v1: T)S">f</a><span class="delimiter">(</span><a href="#318943" title="T">value</a><span class="delimiter">)</span>,      <a href="#318943" title="T">value</a> <a href="#318985" title="(elem: T)(implicit bf: scala.collection.generic.CanBuildFrom[Seq[T],T,Seq[T]])Seq[T]">+:</a> <a href="#318931" title="Seq[T]">stack</a><span class="delimiter">)</span>
        <span class="keyword">case</span> <span title="(Seq[S], Seq[T])">BlockBit</span><span class="delimiter">(</span><a title="T" id="319025">value</a><span class="delimiter">)</span>         =&gt; <span title="(_1: Seq[S], _2: Seq[T])(Seq[S], Seq[T])" class="delimiter">(</span><a href="#318930" title="Seq[S]">result</a> <span title="(elem: S)(implicit bf: scala.collection.generic.CanBuildFrom[Seq[S],S,Seq[S]])Seq[S]">:+</span> <a href="#318772" title="(v1: T)S">f</a><span class="delimiter">(</span><a href="#319025" title="T">value</a><span class="delimiter">)</span>,      <a href="#319058" title="(stack: Seq[T], value: T)(implicit evidence$6: org.specs2.internal.scalaz.Monoid[T])Seq[T]">addToTop</a><a href="#318773" title="org.specs2.internal.scalaz.Monoid[T]" class="delimiter">(</a><a href="#318931" title="Seq[T]">stack</a>, <a href="#319025" title="T">value</a><span class="delimiter">)</span><span class="delimiter">)</span>
        <span class="keyword">case</span> <span title="(Seq[S], Seq[T])">BlockEnd</span><span class="delimiter">(</span><a title="T" id="319244">value</a><span class="delimiter">)</span>         =&gt; <span title="(_1: Seq[S], _2: Seq[T])(Seq[S], Seq[T])" class="delimiter">(</span><a href="#318930" title="Seq[S]">result</a> <span title="(elem: S)(implicit bf: scala.collection.generic.CanBuildFrom[Seq[S],S,Seq[S]])Seq[S]">:+</span> <a href="#318772" title="(v1: T)S">f</a><span class="delimiter">(</span><a href="#318406" title="(stack: Seq[T])(implicit evidence$7: org.specs2.internal.scalaz.Monoid[T])T">top</a><a href="#318773" title="org.specs2.internal.scalaz.Monoid[T]" class="delimiter">(</a><a href="#319058" title="(stack: Seq[T], value: T)(implicit evidence$6: org.specs2.internal.scalaz.Monoid[T])Seq[T]">addToTop</a><a href="#318773" title="org.specs2.internal.scalaz.Monoid[T]" class="delimiter">(</a><a href="#318931" title="Seq[T]">stack</a>, <a href="#319244" title="T">value</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>, <a href="#319058" title="(stack: Seq[T], value: T)(implicit evidence$6: org.specs2.internal.scalaz.Monoid[T])Seq[T]">addToTop</a><a href="#318773" title="org.specs2.internal.scalaz.Monoid[T]" class="delimiter">(</a><a href="#294907" title="(stack: Seq[T])Seq[T]">pop</a><span class="delimiter">(</span><a href="#318931" title="Seq[T]">stack</a><span class="delimiter">)</span>, <a href="#318406" title="(stack: Seq[T])(implicit evidence$7: org.specs2.internal.scalaz.Monoid[T])T">top</a><a href="#318773" title="org.specs2.internal.scalaz.Monoid[T]" class="delimiter">(</a><a href="#318931" title="Seq[T]">stack</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>.<span title="=&gt; Seq[S]">_1</span>
  <span class="delimiter">}</span>

  <span class="comment">/**
   * The context is added when we enter a Nested Block and reset when we leave it.
   * This is used for Level management where an included specification must go on with indenting text, then reset
   * to the previous indentation level when finished.
   */</span>
  <span class="keyword">def</span> <a title="[T](blocks: Seq[NestedBlocks.this.SpecBlock[T]])(implicit evidence$5: org.specs2.internal.scalaz.Monoid[T])Seq[T]" id="305648">sumContext</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="294895">T</a> : Monoid<span class="delimiter">]</span><span class="delimiter">(</span><a title="Seq[NestedBlocks.this.SpecBlock[T]]" id="305647">blocks</a>: <span title="Seq[NestedBlocks.this.SpecBlock[T]]">Seq</span><span class="delimiter">[</span>SpecBlock<span class="delimiter">[</span>T<span class="delimiter">]</span><span class="delimiter">]</span><span class="delimiter">)</span>: <span title="Seq[T]">Seq</span><span class="delimiter">[</span>T<span class="delimiter">]</span> = <span class="delimiter">{</span>
    <a href="#305647" title="Seq[NestedBlocks.this.SpecBlock[T]]">blocks</a>.<span title="(z: (Seq[T], Seq[T]))(op: ((Seq[T], Seq[T]), NestedBlocks.this.SpecBlock[T]) =&gt; (Seq[T], Seq[T]))(Seq[T], Seq[T])">foldLeft</span><span class="delimiter">(</span><span title="(_1: Seq[T], _2: Seq[T])(Seq[T], Seq[T])" class="delimiter">(</span><span title="(elems: Nothing*)scala.collection.immutable.Vector[Nothing]">Vector</span><span class="delimiter">(</span><span class="delimiter">)</span>: <span title="Seq[T]">Seq</span><span class="delimiter">[</span>T<span class="delimiter">]</span>, <span title="(elems: Nothing*)scala.collection.immutable.Vector[Nothing]">Vector</span><span class="delimiter">(</span><span class="delimiter">)</span>: <span title="Seq[T]">Seq</span><span class="delimiter">[</span>T<span class="delimiter">]</span><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">{</span> <span class="delimiter">(</span><a title="(Seq[T], Seq[T])" id="319391">res</a>, <a title="NestedBlocks.this.SpecBlock[T]" id="319392">cur</a><span class="delimiter">)</span> =&gt;
      <span class="keyword">val</span> <a href="#319394" title="(Seq[T], Seq[T])" class="delimiter">(</a><a href="#319393" title="Seq[T]" id="319394">result</a>, <a href="#319393" title="Seq[T]" id="319395">stack</a><span class="delimiter">)</span> = <a href="#319391" title="(Seq[T], Seq[T])">res</a>
      <a href="#319392" title="NestedBlocks.this.SpecBlock[T]">cur</a> <span title="(Seq[T], Seq[T])" class="keyword">match</span> <span class="delimiter">{</span>
        <span class="keyword">case</span> <span title="(Seq[T], Seq[T])">BlockStart</span><span class="delimiter">(</span><a title="T" id="319407">value</a><span class="delimiter">)</span>       =&gt; <span title="(_1: Seq[T], _2: Seq[T])(Seq[T], Seq[T])" class="delimiter">(</span><a href="#319394" title="Seq[T]">result</a> <span title="(elem: T)(implicit bf: scala.collection.generic.CanBuildFrom[Seq[T],T,Seq[T]])Seq[T]">:+</span> <a href="#319407" title="T">value</a>,                       <a href="#319407" title="T">value</a> <a href="#319448" title="(elem: T)(implicit bf: scala.collection.generic.CanBuildFrom[Seq[T],T,Seq[T]])Seq[T]">+:</a> <a href="#319395" title="Seq[T]">stack</a><span class="delimiter">)</span>
        <span class="keyword">case</span> <span title="(Seq[T], Seq[T])">BlockBit</span><span class="delimiter">(</span><a title="T" id="319488">value</a><span class="delimiter">)</span>         =&gt; <span title="(_1: Seq[T], _2: Seq[T])(Seq[T], Seq[T])" class="delimiter">(</span><a href="#319394" title="Seq[T]">result</a> <span title="(elem: T)(implicit bf: scala.collection.generic.CanBuildFrom[Seq[T],T,Seq[T]])Seq[T]">:+</span> <a href="#318406" title="(stack: Seq[T])(implicit evidence$7: org.specs2.internal.scalaz.Monoid[T])T">top</a><a href="#305648" title="org.specs2.internal.scalaz.Monoid[T]" class="delimiter">(</a><a href="#319058" title="(stack: Seq[T], value: T)(implicit evidence$6: org.specs2.internal.scalaz.Monoid[T])Seq[T]">addToTop</a><a href="#305648" title="org.specs2.internal.scalaz.Monoid[T]" class="delimiter">(</a><a href="#319395" title="Seq[T]">stack</a>, <a href="#319488" title="T">value</a><span class="delimiter">)</span><span class="delimiter">)</span>, <a href="#319058" title="(stack: Seq[T], value: T)(implicit evidence$6: org.specs2.internal.scalaz.Monoid[T])Seq[T]">addToTop</a><a href="#305648" title="org.specs2.internal.scalaz.Monoid[T]" class="delimiter">(</a><a href="#319395" title="Seq[T]">stack</a>, <a href="#319488" title="T">value</a><span class="delimiter">)</span><span class="delimiter">)</span>
        <span class="keyword">case</span> <span title="(Seq[T], Seq[T])">BlockEnd</span><span class="delimiter">(</span><a title="T" id="319575">value</a><span class="delimiter">)</span>         =&gt; <span title="(_1: Seq[T], _2: Seq[T])(Seq[T], Seq[T])" class="delimiter">(</span><a href="#319394" title="Seq[T]">result</a> <span title="(elem: T)(implicit bf: scala.collection.generic.CanBuildFrom[Seq[T],T,Seq[T]])Seq[T]">:+</span> <a href="#318406" title="(stack: Seq[T])(implicit evidence$7: org.specs2.internal.scalaz.Monoid[T])T">top</a><a href="#305648" title="org.specs2.internal.scalaz.Monoid[T]" class="delimiter">(</a><a href="#319058" title="(stack: Seq[T], value: T)(implicit evidence$6: org.specs2.internal.scalaz.Monoid[T])Seq[T]">addToTop</a><a href="#305648" title="org.specs2.internal.scalaz.Monoid[T]" class="delimiter">(</a><a href="#319395" title="Seq[T]">stack</a>, <a href="#319575" title="T">value</a><span class="delimiter">)</span><span class="delimiter">)</span>, <a href="#294907" title="(stack: Seq[T])Seq[T]">pop</a><span class="delimiter">(</span><a href="#319395" title="Seq[T]">stack</a><span class="delimiter">)</span><span class="delimiter">)</span>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>.<span title="=&gt; Seq[T]">_1</span>
  <span class="delimiter">}</span>

  <span class="keyword">trait</span> <a title="trait TreeNode[T] extends java.lang.Object" id="294896">TreeNode</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="294897">T</a><span class="delimiter">]</span> <span title="java.lang.Object" class="delimiter">{</span>
    <span class="keyword">def</span> <a title="(b: NestedBlocks.this.SpecBlock[T])Unit" id="319655">addStart</a><span class="delimiter">(</span><a title="NestedBlocks.this.SpecBlock[T]" id="319657">b</a>: <a href="#294854" title="NestedBlocks.this.SpecBlock[T]">SpecBlock</a><span class="delimiter">[</span>T<span class="delimiter">]</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="[T](blocks: Seq[NestedBlocks.this.SpecBlock[T]], f: (T, T) =&gt; (T, T))Seq[T]" id="294898">associateStartEnd</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="294900">T</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="Seq[NestedBlocks.this.SpecBlock[T]]" id="319658">blocks</a>: <span title="Seq[NestedBlocks.this.SpecBlock[T]]">Seq</span><span class="delimiter">[</span>SpecBlock<span class="delimiter">[</span>T<span class="delimiter">]</span><span class="delimiter">]</span>, <a title="(T, T) =&gt; (T, T)" id="319659">f</a>: <span class="delimiter">(</span>T, T<span class="delimiter">)</span> =&gt; <span class="delimiter">(</span>T, T<span class="delimiter">)</span><span class="delimiter">)</span>: <span title="Seq[T]">Seq</span><span class="delimiter">[</span>T<span class="delimiter">]</span> = <span class="delimiter">{</span>
    <a href="#319658" title="Seq[NestedBlocks.this.SpecBlock[T]]">blocks</a>.<span title="=&gt; Option[NestedBlocks.this.SpecBlock[T]]">headOption</span> <span title="Seq[T]" class="keyword">match</span> <span class="delimiter">{</span>
      <span class="keyword">case</span> <span title="Seq[Nothing]">None</span>         =&gt; <span title="(elems: Nothing*)Seq[Nothing]">Seq</span><span class="delimiter">(</span><span class="delimiter">)</span>
      <span class="keyword">case</span> <span title="scala.collection.immutable.Seq[T]">Some</span><span class="delimiter">(</span><a title="NestedBlocks.this.SpecBlock[T]" id="319667">start</a><span class="delimiter">)</span>  =&gt; <span class="delimiter">{</span>
        <a href="#319658" title="Seq[NestedBlocks.this.SpecBlock[T]]">blocks</a>.<span title="(n: Int)Seq[NestedBlocks.this.SpecBlock[T]]">drop</span><span class="delimiter">(</span><span title="Int(1)" class="int">1</span><span class="delimiter">)</span>.<span title="(z: org.specs2.internal.scalaz.TreeLoc[NestedBlocks.this.SpecBlock[T]])(op: (org.specs2.internal.scalaz.TreeLoc[NestedBlocks.this.SpecBlock[T]], NestedBlocks.this.SpecBlock[T]) =&gt; org.specs2.internal.scalaz.TreeLoc[NestedBlocks.this.SpecBlock[T]])org.specs2.internal.scalaz.TreeLoc[NestedBlocks.this.SpecBlock[T]]">foldLeft</span><span class="delimiter">(</span><span title="(root: =&gt; NestedBlocks.this.SpecBlock[T])org.specs2.internal.scalaz.Tree[NestedBlocks.this.SpecBlock[T]]">leaf</span><span class="delimiter">(</span><a href="#319667" title="NestedBlocks.this.SpecBlock[T]">start</a><span class="delimiter">)</span>.<span title="=&gt; org.specs2.internal.scalaz.TreeLoc[NestedBlocks.this.SpecBlock[T]]">loc</span><span class="delimiter">)</span> <span class="delimiter">{</span> <span class="delimiter">(</span><a title="org.specs2.internal.scalaz.TreeLoc[NestedBlocks.this.SpecBlock[T]]" id="319687">res</a>, <a title="NestedBlocks.this.SpecBlock[T]" id="319688">cur</a><span class="delimiter">)</span> =&gt;
          <a href="#319688" title="NestedBlocks.this.SpecBlock[T]">cur</a> <span title="org.specs2.internal.scalaz.TreeLoc[NestedBlocks.this.SpecBlock[T]]" class="keyword">match</span> <span class="delimiter">{</span>
            <span class="keyword">case</span> <span title="org.specs2.internal.scalaz.TreeLoc[NestedBlocks.this.SpecBlock[T]]">BlockStart</span><span class="delimiter">(</span><a title="T" id="319690">value</a><span class="delimiter">)</span>       =&gt; <a href="#319687" title="org.specs2.internal.scalaz.TreeLoc[NestedBlocks.this.SpecBlock[T]]">res</a>.<span title="(t: org.specs2.internal.scalaz.Tree[NestedBlocks.this.SpecBlock[T]])org.specs2.internal.scalaz.TreeLoc[NestedBlocks.this.SpecBlock[T]]">insertDownLast</span><span class="delimiter">(</span><span title="(root: =&gt; NestedBlocks.this.SpecBlock[T])org.specs2.internal.scalaz.Tree[NestedBlocks.this.SpecBlock[T]]">leaf</span><span class="delimiter">(</span><a href="#319688" title="NestedBlocks.this.SpecBlock[T]">cur</a><span class="delimiter">)</span><span class="delimiter">)</span>
            <span class="keyword">case</span> <span title="org.specs2.internal.scalaz.TreeLoc[NestedBlocks.this.SpecBlock[T]]">BlockBit</span><span class="delimiter">(</span><a title="T" id="319700">value</a><span class="delimiter">)</span>         =&gt; <a href="../data/Trees.scala.html#103888" title="(t: org.specs2.internal.scalaz.TreeLoc[NestedBlocks.this.SpecBlock[T]])org.specs2.data.Trees.TreeLocx[NestedBlocks.this.SpecBlock[T]]">res</a>.<a href="../data/Trees.scala.html#108954" title="(c: NestedBlocks.this.SpecBlock[T])org.specs2.internal.scalaz.TreeLoc[NestedBlocks.this.SpecBlock[T]]">addChild</a><span class="delimiter">(</span><a href="#319688" title="NestedBlocks.this.SpecBlock[T]">cur</a><span class="delimiter">)</span>
            <span class="keyword">case</span> <span title="org.specs2.internal.scalaz.TreeLoc[NestedBlocks.this.SpecBlock[T]]">BlockEnd</span><span class="delimiter">(</span><a title="T" id="319743">value</a><span class="delimiter">)</span>         =&gt; <span class="delimiter">{</span>
              <span class="keyword">val</span> <a href="#319745" title="(T, T)" class="delimiter">(</a><a href="#319744" title="T" id="319745">st</a>, <a href="#319744" title="T" id="319746">en</a><span class="delimiter">)</span> = <a href="#319659" title="(v1: T, v2: T)(T, T)">f</a><span title="(T, T) @unchecked" class="delimiter">(</span><a href="#319687" title="org.specs2.internal.scalaz.TreeLoc[NestedBlocks.this.SpecBlock[T]]">res</a>.<span title="=&gt; NestedBlocks.this.SpecBlock[T]">getLabel</span>.<a href="#305467" title="=&gt; T">value</a>, <a href="#319743" title="T">value</a><span class="delimiter">)</span>
              <a href="../data/Trees.scala.html#103888" title="(t: org.specs2.internal.scalaz.TreeLoc[NestedBlocks.this.SpecBlock[T]])org.specs2.data.Trees.TreeLocx[NestedBlocks.this.SpecBlock[T]]">res</a>.<a href="../data/Trees.scala.html#108953" title="(f: NestedBlocks.this.SpecBlock[T] =&gt; NestedBlocks.this.SpecBlock[T])org.specs2.internal.scalaz.TreeLoc[NestedBlocks.this.SpecBlock[T]]">updateLabel</a><a href="../data/Trees.scala.html#103888" title="(t: org.specs2.internal.scalaz.TreeLoc[NestedBlocks.this.SpecBlock[T]])org.specs2.data.Trees.TreeLocx[NestedBlocks.this.SpecBlock[T]]" class="delimiter">(</a><a href="#319801" title="NestedBlocks.this.SpecBlock[T]">_</a>.<a href="#305468" title="(value: T)NestedBlocks.this.SpecBlock[T]">update</a><span class="delimiter">(</span><a href="#319745" title="T">st</a><span class="delimiter">)</span><span class="delimiter">)</span>.<a href="../data/Trees.scala.html#108954" title="(c: NestedBlocks.this.SpecBlock[T])org.specs2.internal.scalaz.TreeLoc[NestedBlocks.this.SpecBlock[T]]">addChild</a><a href="../data/Trees.scala.html#103888" title="(t: org.specs2.internal.scalaz.TreeLoc[NestedBlocks.this.SpecBlock[T]])org.specs2.data.Trees.TreeLocx[NestedBlocks.this.SpecBlock[T]]" class="delimiter">(</a><a href="#319688" title="NestedBlocks.this.SpecBlock[T]">cur</a>.<a href="#305468" title="(value: T)NestedBlocks.this.SpecBlock[T]">update</a><span class="delimiter">(</span><a href="#319746" title="T">en</a><span class="delimiter">)</span><span class="delimiter">)</span>.<a href="../data/Trees.scala.html#108952" title="=&gt; org.specs2.internal.scalaz.TreeLoc[NestedBlocks.this.SpecBlock[T]]">getParent</a>
            <span class="delimiter">}</span>
          <span class="delimiter">}</span>
        <span class="delimiter">}</span>.<span title="=&gt; org.specs2.internal.scalaz.TreeLoc[NestedBlocks.this.SpecBlock[T]]">root</span>.<a href="../data/Trees.scala.html#103849" title="(t: org.specs2.internal.scalaz.Tree[NestedBlocks.this.SpecBlock[T]])org.specs2.data.Trees.Treex[NestedBlocks.this.SpecBlock[T]]">tree</a>.<a href="../data/Trees.scala.html#103923" title="=&gt; Stream[NestedBlocks.this.SpecBlock[T]]">flattenLeft</a>.<span title="(f: NestedBlocks.this.SpecBlock[T] =&gt; T)(implicit bf: scala.collection.generic.CanBuildFrom[scala.collection.immutable.Stream[NestedBlocks.this.SpecBlock[T]],T,scala.collection.immutable.Stream[T]])scala.collection.immutable.Stream[T]">map</span><span title="scala.collection.generic.CanBuildFrom[scala.collection.immutable.Stream.Coll,T,scala.collection.immutable.Stream[T]]" class="delimiter">(</span><a href="#319953" title="NestedBlocks.this.SpecBlock[T]">_</a>.<a href="#305467" title="=&gt; T">value</a><span class="delimiter">)</span>.<span title="=&gt; scala.collection.immutable.Seq[T]">toSeq</span>
      <span class="delimiter">}</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>


  <span class="keyword">def</span> <a title="[T](stack: Seq[T], value: T)(implicit evidence$6: org.specs2.internal.scalaz.Monoid[T])Seq[T]" id="319058">addToTop</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="294903">T</a> : Monoid<span class="delimiter">]</span><span class="delimiter">(</span><a title="Seq[T]" id="319056">stack</a>: <span title="Seq[T]">Seq</span><span class="delimiter">[</span>T<span class="delimiter">]</span>, <a title="T" id="319057">value</a>: <a href="#294903" title="T">T</a><span class="delimiter">)</span> = <span class="delimiter">(</span><a href="#318406" title="(stack: Seq[T])(implicit evidence$7: org.specs2.internal.scalaz.Monoid[T])T">top</a><a href="#319058" title="(x: =&gt; T)org.specs2.internal.scalaz.Identity[T]" class="delimiter">(</a><a href="#319056" title="Seq[T]">stack</a><span class="delimiter">)</span> <a href="#319058" title="(a: =&gt; T)(implicit s: org.specs2.internal.scalaz.Semigroup[T])T">|+|</a> <a href="#319057" title="T">value</a><span class="delimiter">)</span> <a href="#319061" title="(elem: T)(implicit bf: scala.collection.generic.CanBuildFrom[Seq[T],T,Seq[T]])Seq[T]">+:</a> <a href="#294907" title="(stack: Seq[T])Seq[T]">pop</a><span class="delimiter">(</span><a href="#319056" title="Seq[T]">stack</a><span class="delimiter">)</span>
  <span class="keyword">def</span> <a title="[T](stack: Seq[T])(implicit evidence$7: org.specs2.internal.scalaz.Monoid[T])T" id="318406">top</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="294906">T</a> : Monoid<span class="delimiter">]</span><span class="delimiter">(</span><a title="Seq[T]" id="318405">stack</a>: <span title="Seq[T]">Seq</span><span class="delimiter">[</span>T<span class="delimiter">]</span><span class="delimiter">)</span>: <a href="#294906" title="T">T</a> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="org.specs2.internal.scalaz.Monoid[T]" id="319998">monoid</a> = <span title="[T](implicit e: T)T">implicitly</span><a href="#318406" title="(implicit e: org.specs2.internal.scalaz.Monoid[T])org.specs2.internal.scalaz.Monoid[T]" class="delimiter">[</a><span title="org.specs2.internal.scalaz.Monoid[T]">Monoid</span><span class="delimiter">[</span>T<span class="delimiter">]</span><span class="delimiter">]</span>
    <a href="#318405" title="Seq[T]">stack</a>.<span title="=&gt; Option[T]">headOption</span>.<span title="(default: =&gt; T)T">getOrElse</span><span class="delimiter">(</span><a href="#319998" title="org.specs2.internal.scalaz.Monoid[T]">monoid</a>.<span title="=&gt; T">zero</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>
  <span class="keyword">def</span> <a title="[T](stack: Seq[T])Seq[T]" id="294907">pop</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="294909">T</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="Seq[T]" id="318742">stack</a>: <span title="Seq[T]">Seq</span><span class="delimiter">[</span>T<span class="delimiter">]</span><span class="delimiter">)</span> = <a href="#318742" title="Seq[T]">stack</a>.<span title="(n: Int)Seq[T]">drop</span><span class="delimiter">(</span><span title="Int(1)" class="int">1</span><span class="delimiter">)</span>
  
  <span class="keyword">private</span> <span class="keyword">def</span> <a title="[T](f: (T, T) =&gt; (T, T))(NestedBlocks.this.SpecBlock[T], NestedBlocks.this.SpecBlock[T]) =&gt; (NestedBlocks.this.SpecBlock[T], NestedBlocks.this.SpecBlock[T])" id="294910">lift</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="294912">T</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="(T, T) =&gt; (T, T)" id="320005">f</a>: <span class="delimiter">(</span>T, T<span class="delimiter">)</span> =&gt; <span class="delimiter">(</span>T, T<span class="delimiter">)</span><span class="delimiter">)</span>: <span class="delimiter">(</span>SpecBlock<span class="delimiter">[</span>T<span class="delimiter">]</span>, SpecBlock<span class="delimiter">[</span>T<span class="delimiter">]</span><span class="delimiter">)</span> =&gt; <span class="delimiter">(</span>SpecBlock<span class="delimiter">[</span>T<span class="delimiter">]</span>, SpecBlock<span class="delimiter">[</span>T<span class="delimiter">]</span><span class="delimiter">)</span> = <span class="delimiter">{</span> <span class="delimiter">(</span><a title="NestedBlocks.this.SpecBlock[T]" id="320009">b1</a>, <a title="NestedBlocks.this.SpecBlock[T]" id="320010">b2</a><span class="delimiter">)</span> =&gt;
    <span class="keyword">val</span> <a href="#320012" title="(T, T)" class="delimiter">(</a><a href="#320011" title="T" id="320012">updated1</a>, <a href="#320011" title="T" id="320013">updated2</a><span class="delimiter">)</span> = <a href="#320005" title="(v1: T, v2: T)(T, T)">f</a><span title="(T, T) @unchecked" class="delimiter">(</span><a href="#320009" title="NestedBlocks.this.SpecBlock[T]">b1</a>.<a href="#305467" title="=&gt; T">value</a>, <a href="#320010" title="NestedBlocks.this.SpecBlock[T]">b2</a>.<a href="#305467" title="=&gt; T">value</a><span class="delimiter">)</span>
    <span title="(_1: NestedBlocks.this.SpecBlock[T], _2: NestedBlocks.this.SpecBlock[T])(NestedBlocks.this.SpecBlock[T], NestedBlocks.this.SpecBlock[T])" class="delimiter">(</span><a href="#320009" title="NestedBlocks.this.SpecBlock[T]">b1</a>.<a href="#305468" title="(value: T)NestedBlocks.this.SpecBlock[T]">update</a><span class="delimiter">(</span><a href="#320012" title="T">updated1</a><span class="delimiter">)</span>, <a href="#320010" title="NestedBlocks.this.SpecBlock[T]">b2</a>.<a href="#305468" title="(value: T)NestedBlocks.this.SpecBlock[T]">update</a><span class="delimiter">(</span><a href="#320013" title="T">updated2</a><span class="delimiter">)</span><span class="delimiter">)</span> 
  <span class="delimiter">}</span>
  
  <span class="keyword">def</span> <a title="=&gt; org.specs2.specification.Fragment =&gt; Product with Serializable with NestedBlocks.this.SpecBlock[org.specs2.specification.Fragment]" id="294913">fragmentsToSpecBlock</a> = <span class="delimiter">(</span>f: <a href="../specification/Fragment.scala.html#12773" title="org.specs2.specification.Fragment">Fragment</a><span class="delimiter">)</span> =&gt; <a href="#320042" title="org.specs2.specification.Fragment">f</a> <span title="&lt;none&gt; extends Product with Serializable with NestedBlocks.this.SpecBlock[org.specs2.specification.Fragment]" class="keyword">match</span> <span class="delimiter">{</span>
    <span class="keyword">case</span> <span title="NestedBlocks.this.BlockStart[org.specs2.specification.Fragment]">SpecStart</span><span class="delimiter">(</span>_,_,_<span class="delimiter">)</span> =&gt; <a href="#305484" title="(value: org.specs2.specification.Fragment)NestedBlocks.this.BlockStart[org.specs2.specification.Fragment]">BlockStart</a><span class="delimiter">(</span><a href="#320042" title="org.specs2.specification.Fragment">f</a><span class="delimiter">)</span>
    <span class="keyword">case</span> <span title="NestedBlocks.this.BlockEnd[org.specs2.specification.Fragment]">SpecEnd</span><span class="delimiter">(</span>_,_<span class="delimiter">)</span>     =&gt; <a href="#305558" title="(value: org.specs2.specification.Fragment)NestedBlocks.this.BlockEnd[org.specs2.specification.Fragment]">BlockEnd</a><span class="delimiter">(</span><a href="#320042" title="org.specs2.specification.Fragment">f</a><span class="delimiter">)</span>
    <span class="keyword">case</span> <a title="NestedBlocks.this.BlockBit[org.specs2.specification.Fragment]" id="320049">other</a>            =&gt; <a href="#305625" title="(value: org.specs2.specification.Fragment)NestedBlocks.this.BlockBit[org.specs2.specification.Fragment]">BlockBit</a><span class="delimiter">(</span><a href="#320042" title="org.specs2.specification.Fragment">f</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="=&gt; org.specs2.specification.ExecutedFragment =&gt; Product with Serializable with NestedBlocks.this.SpecBlock[org.specs2.specification.ExecutedFragment]" id="294914">executedFragmentsToSpecBlock</a> = <span class="delimiter">(</span>f: <a href="../specification/ExecutedFragment.scala.html#12676" title="org.specs2.specification.ExecutedFragment">ExecutedFragment</a><span class="delimiter">)</span> =&gt; <a href="#320072" title="org.specs2.specification.ExecutedFragment">f</a> <span title="&lt;none&gt; extends Product with Serializable with NestedBlocks.this.SpecBlock[org.specs2.specification.ExecutedFragment]" class="keyword">match</span> <span class="delimiter">{</span>
    <span class="keyword">case</span> <span title="NestedBlocks.this.BlockStart[org.specs2.specification.ExecutedFragment]">ExecutedSpecStart</span><span class="delimiter">(</span>_,_,_<span class="delimiter">)</span> =&gt; <a href="#305484" title="(value: org.specs2.specification.ExecutedFragment)NestedBlocks.this.BlockStart[org.specs2.specification.ExecutedFragment]">BlockStart</a><span class="delimiter">(</span><a href="#320072" title="org.specs2.specification.ExecutedFragment">f</a><span class="delimiter">)</span>
    <span class="keyword">case</span> <span title="NestedBlocks.this.BlockEnd[org.specs2.specification.ExecutedFragment]">ExecutedSpecEnd</span><span class="delimiter">(</span>_,_,_<span class="delimiter">)</span>   =&gt; <a href="#305558" title="(value: org.specs2.specification.ExecutedFragment)NestedBlocks.this.BlockEnd[org.specs2.specification.ExecutedFragment]">BlockEnd</a><span class="delimiter">(</span><a href="#320072" title="org.specs2.specification.ExecutedFragment">f</a><span class="delimiter">)</span>
    <span class="keyword">case</span> <a title="NestedBlocks.this.BlockBit[org.specs2.specification.ExecutedFragment]" id="320079">other</a>                    =&gt; <a href="#305625" title="(value: org.specs2.specification.ExecutedFragment)NestedBlocks.this.BlockBit[org.specs2.specification.ExecutedFragment]">BlockBit</a><span class="delimiter">(</span><a href="#320072" title="org.specs2.specification.ExecutedFragment">f</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>

<span class="delimiter">}</span>
<span class="keyword">private</span><span class="delimiter">[</span>specs2<span class="delimiter">]</span>
<span class="keyword">object</span> <a title="object org.specs2.reporter.NestedBlocks" id="12228">NestedBlocks</a> <span title="ScalaObject" class="keyword">extends</span> <a href="#12227" title="org.specs2.reporter.NestedBlocks">NestedBlocks</a>

        </pre>
    </body>
</html>