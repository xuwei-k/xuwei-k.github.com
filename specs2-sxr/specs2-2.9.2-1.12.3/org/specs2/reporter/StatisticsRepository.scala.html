<?xml version="1.0" encoding="utf-8"?>
      <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <meta http-equiv="Expires" content="0" />
        <title>org/specs2/reporter/StatisticsRepository.scala</title>
        <script type="text/javascript" src="../../../jquery-all.js"></script>
        <script type="text/javascript" src="../../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../../style.css" title="Style"></link>
    </head>
    <body>
        <pre>
<span class="keyword">package</span> org.specs2
<span class="keyword">package</span> reporter

<span class="keyword">import</span> internal.scalaz.<span title="object org.specs2.internal.scalaz.Scalaz">Scalaz</span>._
<span class="keyword">import</span> scala.xml._
<span class="keyword">import</span> xml.<a href="../xml/Nodex.scala.html#13373" title="object org.specs2.xml.Nodex">Nodex</a>._
<span class="keyword">import</span> specification.<span class="delimiter">{</span>Example, ExecutedResult, Stats, SpecName<span class="delimiter">}</span>
<span class="keyword">import</span> execute.<span class="delimiter">{</span>Result, Success<span class="delimiter">}</span>

<span class="keyword">trait</span> <a title="trait StatisticsRepository extends java.lang.Object" id="12348">StatisticsRepository</a> <span title="java.lang.Object" class="delimiter">{</span>
  <span class="keyword">def</span> <a title="(specName: org.specs2.specification.SpecName)Option[org.specs2.specification.Stats]" id="321397">getStatistics</a><span class="delimiter">(</span><a title="org.specs2.specification.SpecName" id="327210">specName</a>: <a href="../specification/SpecName.scala.html#13075" title="org.specs2.specification.SpecName">SpecName</a><span class="delimiter">)</span>: <span title="Option[org.specs2.specification.Stats]">Option</span><span class="delimiter">[</span>Stats<span class="delimiter">]</span>
  <span class="keyword">def</span> <a title="(specName: org.specs2.specification.SpecName, stats: org.specs2.specification.Stats)StatisticsRepository.this.type" id="321398">storeStatistics</a><span class="delimiter">(</span><a title="org.specs2.specification.SpecName" id="327211">specName</a>: <a href="../specification/SpecName.scala.html#13075" title="org.specs2.specification.SpecName">SpecName</a>, <a title="org.specs2.specification.Stats" id="327212">stats</a>: <a href="../specification/Stats.scala.html#13108" title="org.specs2.specification.Stats">Stats</a><span class="delimiter">)</span>: <span class="keyword">this</span>.<span class="keyword">type</span>
  <span class="keyword">def</span> <a title="(specName: org.specs2.specification.SpecName, result: Seq[org.specs2.specification.ExecutedResult])StatisticsRepository.this.type" id="321399">storeResults</a><span class="delimiter">(</span><a title="org.specs2.specification.SpecName" id="327213">specName</a>: <a href="../specification/SpecName.scala.html#13075" title="org.specs2.specification.SpecName">SpecName</a>, <a title="Seq[org.specs2.specification.ExecutedResult]" id="327214">result</a>: <span title="Seq[org.specs2.specification.ExecutedResult]">Seq</span><span class="delimiter">[</span>ExecutedResult<span class="delimiter">]</span><span class="delimiter">)</span>: <span class="keyword">this</span>.<span class="keyword">type</span>

  <span class="comment">/**
   * remove previously stored statistics
   */</span>
  <span class="keyword">def</span> <a title="=&gt; StatisticsRepository.this.type" id="321400">resetStatistics</a>: <span class="keyword">this</span>.<span class="keyword">type</span>
  <span class="comment">/**
   * @return the previous executed result of an example
   */</span>
  <span class="keyword">def</span> <a title="(specName: org.specs2.specification.SpecName, e: org.specs2.specification.Example)Option[org.specs2.execute.Result]" id="321401">previousResult</a><span class="delimiter">(</span><a title="org.specs2.specification.SpecName" id="321402">specName</a>: <a href="../specification/SpecName.scala.html#13075" title="org.specs2.specification.SpecName">SpecName</a>, <a title="org.specs2.specification.Example" id="321403">e</a>: <a href="../specification/Fragment.scala.html#12783" title="org.specs2.specification.Example">Example</a><span class="delimiter">)</span>: <span title="Option[org.specs2.execute.Result]">Option</span><span class="delimiter">[</span>Result<span class="delimiter">]</span>
<span class="delimiter">}</span>

<span class="comment">/**
 * This repository store the results in one file per specification, in a special directory
 *
 * This solution is preferred over having a single file for all specifications because of the possible
 * concurrent execution of specifications
 */</span>
<span class="keyword">trait</span> <a title="trait DefaultStatisticsRepository extends java.lang.Object with org.specs2.reporter.StatisticsRepository with org.specs2.reporter.OutputDir with ScalaObject" id="12349">DefaultStatisticsRepository</a> <span title="ScalaObject" class="keyword">extends</span> <a href="#12348" title="org.specs2.reporter.StatisticsRepository">StatisticsRepository</a> <span class="keyword">with</span> <a href="OutputDir.scala.html#12248" title="org.specs2.reporter.OutputDir">OutputDir</a> <span class="delimiter">{</span>

  <span class="comment">/**
   * @return the latest statistics for a given specification
   */</span>
  <span class="keyword">def</span> <a title="(specName: org.specs2.specification.SpecName)Option[org.specs2.specification.Stats]" id="327216">getStatistics</a><span class="delimiter">(</span><a title="org.specs2.specification.SpecName" id="327238">specName</a>: <a href="../specification/SpecName.scala.html#13075" title="org.specs2.specification.SpecName">SpecName</a><span class="delimiter">)</span>: <span title="Option[org.specs2.specification.Stats]">Option</span><span class="delimiter">[</span>Stats<span class="delimiter">]</span> = <a href="#327217" title="(specName: org.specs2.specification.SpecName)Option[scala.xml.Node]">latestSpecStats</a><span title="(x: =&gt; Option[scala.xml.Node])org.specs2.internal.scalaz.Identity[Option[scala.xml.Node]]" class="delimiter">(</span><a href="#327238" title="org.specs2.specification.SpecName">specName</a><span class="delimiter">)</span> <span title="(f: Option[scala.xml.Node] =&gt; Option[org.specs2.specification.Stats])Option[org.specs2.specification.Stats]">|&gt;</span> <a href="#327222" title="=&gt; Option[scala.xml.Node] =&gt; Option[org.specs2.specification.Stats]">extractStats</a>

  <span class="comment">/**
   * @return the latest saved statistics of a given specification
   */</span>
  <span class="keyword">def</span> <a title="(specName: org.specs2.specification.SpecName)Option[scala.xml.Node]" id="327217">latestSpecStats</a><span class="delimiter">(</span><a title="org.specs2.specification.SpecName" id="327240">specName</a>: <a href="../specification/SpecName.scala.html#13075" title="org.specs2.specification.SpecName">SpecName</a><span class="delimiter">)</span>: <span title="Option[scala.xml.Node]">Option</span><span class="delimiter">[</span>Node<span class="delimiter">]</span> = <span class="delimiter">(</span><a href="#327224" title="(specName: org.specs2.specification.SpecName)scala.xml.NodeSeq">loadStatistics</a><span class="delimiter">(</span><a href="#327240" title="org.specs2.specification.SpecName">specName</a><span class="delimiter">)</span> <span title="(that: String)scala.xml.NodeSeq">\\</span> <a href="#327229" title="(specName: org.specs2.specification.SpecName)java.lang.String">statsTag</a><span class="delimiter">(</span><a href="#327240" title="org.specs2.specification.SpecName">specName</a><span class="delimiter">)</span><span class="delimiter">)</span>.<span title="=&gt; Option[scala.xml.Node]">lastOption</span>
  <span class="comment">/**
   * @return the latest saved results of a given specification
   */</span>
  <span class="keyword">def</span> <a title="(specName: org.specs2.specification.SpecName)Option[scala.xml.Node]" id="327218">latestSpecResults</a><span class="delimiter">(</span><a title="org.specs2.specification.SpecName" id="327350">specName</a>: <a href="../specification/SpecName.scala.html#13075" title="org.specs2.specification.SpecName">SpecName</a><span class="delimiter">)</span>: <span title="Option[scala.xml.Node]">Option</span><span class="delimiter">[</span>Node<span class="delimiter">]</span> = <span class="delimiter">(</span><a href="#327224" title="(specName: org.specs2.specification.SpecName)scala.xml.NodeSeq">loadStatistics</a><span class="delimiter">(</span><a href="#327350" title="org.specs2.specification.SpecName">specName</a><span class="delimiter">)</span> <span title="(that: String)scala.xml.NodeSeq">\\</span> <a href="#327230" title="(specName: org.specs2.specification.SpecName)java.lang.String">resultsTag</a><span class="delimiter">(</span><a href="#327350" title="org.specs2.specification.SpecName">specName</a><span class="delimiter">)</span><span class="delimiter">)</span>.<span title="=&gt; Option[scala.xml.Node]">lastOption</span>

  <span class="comment">/**
   * reset the statistics
   */</span>
  <span class="keyword">def</span> <a title="=&gt; DefaultStatisticsRepository.this.type" id="327219">resetStatistics</a> = <span class="delimiter">{</span>
    <a href="OutputDir.scala.html#299692" title="=&gt; java.lang.Object with org.specs2.io.FileWriter">fileWriter</a>.<a href="../io/FileWriter.scala.html#52584" title="(path: String)Boolean">delete</a><span class="delimiter">(</span><a href="OutputDir.scala.html#299696" title="=&gt; String">statsDirPath</a><span class="delimiter">)</span>
    <a href="#12349" title="DefaultStatisticsRepository.this.type" class="keyword">this</a>
  <span class="delimiter">}</span>
  <span class="comment">/**
   * @return the previous executed result of an example
   */</span>
  <span class="keyword">def</span> <a title="(specName: org.specs2.specification.SpecName, e: org.specs2.specification.Example)Option[org.specs2.execute.Result]" id="327220">previousResult</a><span class="delimiter">(</span><a title="org.specs2.specification.SpecName" id="327358">specName</a>: <a href="../specification/SpecName.scala.html#13075" title="org.specs2.specification.SpecName">SpecName</a>, <a title="org.specs2.specification.Example" id="327359">e</a>: <a href="../specification/Fragment.scala.html#12783" title="org.specs2.specification.Example">Example</a><span class="delimiter">)</span>: <span title="Option[org.specs2.execute.Result]">Option</span><span class="delimiter">[</span>Result<span class="delimiter">]</span> = <a href="#327218" title="(specName: org.specs2.specification.SpecName)Option[scala.xml.Node]">latestSpecResults</a><span class="delimiter">(</span><a href="#327358" title="org.specs2.specification.SpecName">specName</a><span class="delimiter">)</span>.<span title="(default: =&gt; scala.xml.NodeSeq)scala.xml.NodeSeq">getOrElse</span><span title="(x: =&gt; scala.xml.NodeSeq)org.specs2.internal.scalaz.Identity[scala.xml.NodeSeq]" class="delimiter">(</span><span title="object scala.xml.NodeSeq">NodeSeq</span>.<span title="=&gt; scala.xml.NodeSeq">Empty</span><span class="delimiter">)</span> <span title="(f: scala.xml.NodeSeq =&gt; Option[Product with Serializable with org.specs2.execute.Result{def mute: Product with Serializable with org.specs2.execute.Result}])Option[Product with Serializable with org.specs2.execute.Result{def mute: Product with Serializable with org.specs2.execute.Result}]">|&gt;</span> <a href="#327221" title="(e: org.specs2.specification.Example)scala.xml.NodeSeq =&gt; Option[Product with Serializable with org.specs2.execute.Result{def mute: Product with Serializable with org.specs2.execute.Result}]">findPreviousStats</a><span class="delimiter">(</span><a href="#327359" title="org.specs2.specification.Example">e</a><span class="delimiter">)</span>

  <span class="comment">/**
   * find the pr of an example in the loaded xml
   */</span>
  <span class="keyword">def</span> <a title="(e: org.specs2.specification.Example)scala.xml.NodeSeq =&gt; Option[Product with Serializable with org.specs2.execute.Result{def mute: Product with Serializable with org.specs2.execute.Result}]" id="327221">findPreviousStats</a><span class="delimiter">(</span><a title="org.specs2.specification.Example" id="327434">e</a>: <a href="../specification/Fragment.scala.html#12783" title="org.specs2.specification.Example">Example</a><span class="delimiter">)</span> = <span class="delimiter">(</span>n: <span title="scala.xml.NodeSeq">NodeSeq</span><span class="delimiter">)</span> =&gt; <span class="delimiter">{</span>
   <span class="delimiter">(</span><a href="#327438" title="scala.xml.NodeSeq">n</a> <span title="(that: String)scala.xml.NodeSeq">\\</span> <span title="java.lang.String(&quot;_&quot;)" class="string">&quot;_&quot;</span> <span title="(x: =&gt; Option[scala.xml.Node])org.specs2.internal.scalaz.Identity[Option[scala.xml.Node]]">find</span> <a href="#327223" title="(value: String)(node: scala.xml.Node)Boolean">attributeValueEquals</a><a href="#327473" title="scala.xml.Node" class="delimiter">(</a><a href="#327235" title="(e: org.specs2.specification.Example)String">exampleId</a><a href="#327471" title="String" class="delimiter">(</a><a href="#327434" title="org.specs2.specification.Example">e</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span> <span title="(f: Option[scala.xml.Node] =&gt; Option[org.specs2.specification.Stats])Option[org.specs2.specification.Stats]">|&gt;</span>
     <a href="#327222" title="=&gt; Option[scala.xml.Node] =&gt; Option[org.specs2.specification.Stats]">extractStats</a> <span title="(f: org.specs2.specification.Stats =&gt; Product with Serializable with org.specs2.execute.Result{def mute: Product with Serializable with org.specs2.execute.Result})Option[Product with Serializable with org.specs2.execute.Result{def mute: Product with Serializable with org.specs2.execute.Result}]">map</span> <span class="delimiter">(</span><a href="#327548" title="org.specs2.specification.Stats">_</a>.<a href="../specification/Stats.scala.html#295811" title="=&gt; Product with Serializable with org.specs2.execute.Result{def mute: Product with Serializable with org.specs2.execute.Result}">result</a><span class="delimiter">)</span> <span title="(alternative: =&gt; Option[Product with Serializable with org.specs2.execute.Result{def mute: Product with Serializable with org.specs2.execute.Result}])Option[Product with Serializable with org.specs2.execute.Result{def mute: Product with Serializable with org.specs2.execute.Result}]">orElse</span>
     <span title="(x: org.specs2.execute.Success)Some[org.specs2.execute.Success]">Some</span><span class="delimiter">(</span><a href="../execute/Result.scala.html#119277" title="(m: String, exp: String)org.specs2.execute.Success">Success</a><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">private</span> <span class="keyword">def</span> <a title="=&gt; Option[scala.xml.Node] =&gt; Option[org.specs2.specification.Stats]" id="327222">extractStats</a> = <span class="delimiter">(</span>n: <span title="Option[scala.xml.Node]">Option</span><span class="delimiter">[</span>Node<span class="delimiter">]</span><span class="delimiter">)</span> =&gt; <a href="#327318" title="Option[scala.xml.Node]">n</a> <span title="(f: scala.xml.Node =&gt; Option[scala.xml.Node])Option[scala.xml.Node]">flatMap</span> <span class="delimiter">(</span><a href="#327323" title="scala.xml.Node">_</a>.<span title="=&gt; Seq[scala.xml.Node]">child</span>.<span title="=&gt; Option[scala.xml.Node]">headOption</span><span class="delimiter">)</span> <span title="(f: scala.xml.Node =&gt; Option[org.specs2.specification.Stats])Option[org.specs2.specification.Stats]">flatMap</span> <a href="../specification/Stats.scala.html#13109" title="object org.specs2.specification.Stats">Stats</a>.<a href="../specification/Stats.scala.html#295779" title="(stats: scala.xml.Node)Option[org.specs2.specification.Stats]">fromXml</a>

  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(value: String)(node: scala.xml.Node)Boolean" id="327223">attributeValueEquals</a><span class="delimiter">(</span><a title="String" id="327445">value</a>: <span title="String">String</span><span class="delimiter">)</span><span class="delimiter">(</span><a title="scala.xml.Node" id="327446">node</a>: <span title="scala.xml.Node">Node</span><span class="delimiter">)</span> = <a href="#327446" title="scala.xml.Node">node</a>.<span title="=&gt; scala.xml.MetaData">attributes</span>.<span title="(p: scala.xml.MetaData =&gt; Boolean)Boolean">exists</span><span class="delimiter">(</span><a href="#327462" title="scala.xml.MetaData">_</a>.<span title="=&gt; Seq[scala.xml.Node]">value</span>.<span title="()String">toString</span> <span title="(x$1: AnyRef)Boolean">==</span> <a href="#327445" title="String">value</a><span class="delimiter">)</span>


  <span class="keyword">def</span> <a title="(specName: org.specs2.specification.SpecName)scala.xml.NodeSeq" id="327224">loadStatistics</a><span class="delimiter">(</span><a title="org.specs2.specification.SpecName" id="327334">specName</a>: <a href="../specification/SpecName.scala.html#13075" title="org.specs2.specification.SpecName">SpecName</a><span class="delimiter">)</span>: <span title="scala.xml.NodeSeq">NodeSeq</span> = <a href="OutputDir.scala.html#299690" title="=&gt; java.lang.Object with org.specs2.io.FileSystem">fileSystem</a>.<a href="../io/FileReader.scala.html#52490" title="(filePath: String, report: (Exception, String) =&gt; Unit, sourceErrors: Boolean)scala.xml.NodeSeq">loadXhtmlFile</a><span class="delimiter">(</span><a href="#327227" title="(specName: org.specs2.specification.SpecName)java.lang.String">specStatsPath</a><span class="delimiter">(</span><a href="#327334" title="org.specs2.specification.SpecName">specName</a><span class="delimiter">)</span><span class="delimiter">)</span>

  <span class="keyword">def</span> <a title="(specName: org.specs2.specification.SpecName, results: Seq[org.specs2.specification.ExecutedResult])DefaultStatisticsRepository.this.type" id="327225">storeResults</a><span class="delimiter">(</span><a title="org.specs2.specification.SpecName" id="327574">specName</a>: <a href="../specification/SpecName.scala.html#13075" title="org.specs2.specification.SpecName">SpecName</a>, <a title="Seq[org.specs2.specification.ExecutedResult]" id="327575">results</a>: <span title="Seq[org.specs2.specification.ExecutedResult]">Seq</span><span class="delimiter">[</span>ExecutedResult<span class="delimiter">]</span><span class="delimiter">)</span> = <span class="delimiter">{</span>
    <a href="OutputDir.scala.html#299692" title="=&gt; java.lang.Object with org.specs2.io.FileWriter">fileWriter</a>.<a href="../io/FileWriter.scala.html#52588" title="(path: String, content: =&gt; scala.xml.NodeSeq)Unit">appendToXmlFile</a><span class="delimiter">(</span><a href="#327227" title="(specName: org.specs2.specification.SpecName)java.lang.String">specStatsPath</a><span class="delimiter">(</span><a href="#327574" title="org.specs2.specification.SpecName">specName</a><span class="delimiter">)</span>, <a href="#327232" title="(specName: org.specs2.specification.SpecName, results: Seq[org.specs2.specification.ExecutedResult])scala.xml.NodeSeq">resultsToXml</a><span class="delimiter">(</span><a href="#327574" title="org.specs2.specification.SpecName">specName</a>, <a href="#327575" title="Seq[org.specs2.specification.ExecutedResult]">results</a><span class="delimiter">)</span><span class="delimiter">)</span>
    <a href="#327224" title="(specName: org.specs2.specification.SpecName)scala.xml.NodeSeq">loadStatistics</a><span class="delimiter">(</span><a href="#327574" title="org.specs2.specification.SpecName">specName</a><span class="delimiter">)</span>
    <a href="#12349" title="DefaultStatisticsRepository.this.type" class="keyword">this</a>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="(specName: org.specs2.specification.SpecName, stats: org.specs2.specification.Stats)DefaultStatisticsRepository.this.type" id="327226">storeStatistics</a><span class="delimiter">(</span><a title="org.specs2.specification.SpecName" id="327581">specName</a>: <a href="../specification/SpecName.scala.html#13075" title="org.specs2.specification.SpecName">SpecName</a>, <a title="org.specs2.specification.Stats" id="327582">stats</a>: <a href="../specification/Stats.scala.html#13108" title="org.specs2.specification.Stats">Stats</a><span class="delimiter">)</span> = <span class="delimiter">{</span>
    <a href="OutputDir.scala.html#299692" title="=&gt; java.lang.Object with org.specs2.io.FileWriter">fileWriter</a>.<a href="../io/FileWriter.scala.html#52588" title="(path: String, content: =&gt; scala.xml.NodeSeq)Unit">appendToXmlFile</a><span class="delimiter">(</span><a href="#327227" title="(specName: org.specs2.specification.SpecName)java.lang.String">specStatsPath</a><span class="delimiter">(</span><a href="#327581" title="org.specs2.specification.SpecName">specName</a><span class="delimiter">)</span>, <a href="#327231" title="(specName: org.specs2.specification.SpecName, stats: org.specs2.specification.Stats)scala.xml.NodeSeq">statsToXml</a><span class="delimiter">(</span><a href="#327581" title="org.specs2.specification.SpecName">specName</a>, <a href="#327582" title="org.specs2.specification.Stats">stats</a><span class="delimiter">)</span><span class="delimiter">)</span>
    <a href="#12349" title="DefaultStatisticsRepository.this.type" class="keyword">this</a>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="(specName: org.specs2.specification.SpecName)java.lang.String" id="327227">specStatsPath</a><span class="delimiter">(</span><a title="org.specs2.specification.SpecName" id="327571">specName</a>: <a href="../specification/SpecName.scala.html#13075" title="org.specs2.specification.SpecName">SpecName</a><span class="delimiter">)</span> = <a href="OutputDir.scala.html#299696" title="=&gt; String">statsDirPath</a> <span title="(x$1: Any)java.lang.String">+</span> <a href="#327228" title="(specName: org.specs2.specification.SpecName)java.lang.String">nameTag</a><span class="delimiter">(</span><a href="#327571" title="org.specs2.specification.SpecName">specName</a><span class="delimiter">)</span> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot;.stats&quot;)" class="string">&quot;.stats&quot;</span>

  <span class="comment">/**
   * make sure that no empty tag name is used to search the xml stats, and is unique, even for an anonymous class
   */</span>
  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(specName: org.specs2.specification.SpecName)java.lang.String" id="327228">nameTag</a><span class="delimiter">(</span><a title="org.specs2.specification.SpecName" id="327339">specName</a>: <a href="../specification/SpecName.scala.html#13075" title="org.specs2.specification.SpecName">SpecName</a><span class="delimiter">)</span> =
    <span title="java.lang.String" class="keyword">if</span> <span class="delimiter">(</span><a href="#327339" title="org.specs2.specification.SpecName">specName</a>.<a href="../specification/SpecName.scala.html#51072" title="=&gt; String">fullName</a>.<span title="()Boolean">isEmpty</span> <span title="(x: Boolean)Boolean">||</span> <a href="#327339" title="org.specs2.specification.SpecName">specName</a>.<a href="../specification/SpecName.scala.html#51072" title="=&gt; String">fullName</a> <span title="(x$1: AnyRef)Boolean">==</span> <span title="java.lang.String(&quot;anon&quot;)" class="string">&quot;anon&quot;</span><span class="delimiter">)</span> <span title="java.lang.String(&quot;anon&quot;)" class="string">&quot;anon&quot;</span><span title="(x$1: Any)java.lang.String">+</span><a href="#327339" title="org.specs2.specification.SpecName">specName</a>.<a href="../specification/SpecName.scala.html#51073" title="=&gt; String">javaClassName</a>.<span title="()Int">hashCode</span>
    <span class="keyword">else</span>                                                          <a href="#327339" title="org.specs2.specification.SpecName">specName</a>.<a href="../specification/SpecName.scala.html#51072" title="=&gt; String">fullName</a>

  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(specName: org.specs2.specification.SpecName)java.lang.String" id="327229">statsTag</a><span class="delimiter">(</span><a title="org.specs2.specification.SpecName" id="327336">specName</a>: <a href="../specification/SpecName.scala.html#13075" title="org.specs2.specification.SpecName">SpecName</a><span class="delimiter">)</span> = <a href="#327228" title="(specName: org.specs2.specification.SpecName)java.lang.String">nameTag</a><span class="delimiter">(</span><a href="#327336" title="org.specs2.specification.SpecName">specName</a><span class="delimiter">)</span><span title="(x$1: Any)java.lang.String">+</span><span title="java.lang.String(&quot;-stats&quot;)" class="string">&quot;-stats&quot;</span>
  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(specName: org.specs2.specification.SpecName)java.lang.String" id="327230">resultsTag</a><span class="delimiter">(</span><a title="org.specs2.specification.SpecName" id="327352">specName</a>: <a href="../specification/SpecName.scala.html#13075" title="org.specs2.specification.SpecName">SpecName</a><span class="delimiter">)</span> = <a href="#327228" title="(specName: org.specs2.specification.SpecName)java.lang.String">nameTag</a><span class="delimiter">(</span><a href="#327352" title="org.specs2.specification.SpecName">specName</a><span class="delimiter">)</span><span title="(x$1: Any)java.lang.String">+</span><span title="java.lang.String(&quot;-results&quot;)" class="string">&quot;-results&quot;</span>

  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(specName: org.specs2.specification.SpecName, stats: org.specs2.specification.Stats)scala.xml.NodeSeq" id="327231">statsToXml</a><span class="delimiter">(</span><a title="org.specs2.specification.SpecName" id="327585">specName</a>: <a href="../specification/SpecName.scala.html#13075" title="org.specs2.specification.SpecName">SpecName</a>, <a title="org.specs2.specification.Stats" id="327586">stats</a>: <a href="../specification/Stats.scala.html#13108" title="org.specs2.specification.Stats">Stats</a><span class="delimiter">)</span>: <span title="scala.xml.NodeSeq">NodeSeq</span> = <span class="delimiter">{</span>
    <span title="(prefix: String, label: String, attributes: scala.xml.MetaData, scope: scala.xml.NamespaceBinding, child: scala.xml.Node*)scala.xml.Elem">Elem</span><span class="delimiter">(</span><span title="Null(null)" class="keyword">null</span>, <a href="#327229" title="(specName: org.specs2.specification.SpecName)java.lang.String">statsTag</a><span class="delimiter">(</span><a href="#327585" title="org.specs2.specification.SpecName">specName</a><span class="delimiter">)</span>,
         <span title="(key: String, value: String, next: scala.xml.MetaData)scala.xml.UnprefixedAttribute" class="keyword">new</span> <span title="scala.xml.UnprefixedAttribute">UnprefixedAttribute</span><span class="delimiter">(</span><span title="java.lang.String(&quot;timestamp&quot;)" class="string">&quot;timestamp&quot;</span>, <span title="object java.lang.System">System</span>.<span title="()Long">currentTimeMillis</span><span class="delimiter">(</span><span class="delimiter">)</span>.<span title="()java.lang.String">toString</span>, <span title="object scala.xml.Null">Null</span><span class="delimiter">)</span>, <span title="object scala.xml.TopScope">TopScope</span>, <a href="#327586" title="org.specs2.specification.Stats">stats</a>.<a href="../specification/Stats.scala.html#295819" title="=&gt; scala.xml.Elem">toXml</a><span class="delimiter">)</span> <span title="(that: scala.collection.GenTraversableOnce[scala.xml.Node])(implicit bf: scala.collection.generic.CanBuildFrom[scala.xml.NodeSeq,scala.xml.Node,scala.xml.NodeSeq])scala.xml.NodeSeq">++</span> <span title="(_data: String)scala.xml.Text">Text</span><span class="delimiter">(</span><span title="java.lang.String(&quot;\012&quot;)" class="string">&quot;\n&quot;</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(specName: org.specs2.specification.SpecName, results: Seq[org.specs2.specification.ExecutedResult])scala.xml.NodeSeq" id="327232">resultsToXml</a><span class="delimiter">(</span><a title="org.specs2.specification.SpecName" id="327578">specName</a>: <a href="../specification/SpecName.scala.html#13075" title="org.specs2.specification.SpecName">SpecName</a>, <a title="Seq[org.specs2.specification.ExecutedResult]" id="327579">results</a>: <span title="Seq[org.specs2.specification.ExecutedResult]">Seq</span><span class="delimiter">[</span>ExecutedResult<span class="delimiter">]</span><span class="delimiter">)</span>: <span title="scala.xml.NodeSeq">NodeSeq</span> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="scala.xml.NodeSeq" id="327638">xmlResults</a> = <a href="../xml/Nodex.scala.html#62839" title="(ns: Seq[org.specs2.specification.ExecutedResult])org.specs2.xml.Nodex.AnyReducable[org.specs2.specification.ExecutedResult]">results</a> <a href="../xml/Nodex.scala.html#127368" title="(f: org.specs2.specification.ExecutedResult =&gt; scala.xml.NodeSeq)scala.xml.NodeSeq">reduceNodes</a> <a href="#327233" title="=&gt; org.specs2.specification.ExecutedResult =&gt; scala.xml.NodeSeq">resultToXml</a>
    <span title="scala.xml.NodeSeq" class="keyword">if</span> <span class="delimiter">(</span><a href="#327638" title="scala.xml.NodeSeq">xmlResults</a>.<span title="=&gt; Boolean">isEmpty</span><span class="delimiter">)</span>  <a href="#327638" title="scala.xml.NodeSeq">xmlResults</a>
    <span class="keyword">else</span>                     <span title="(prefix: String, label: String, attributes: scala.xml.MetaData, scope: scala.xml.NamespaceBinding, child: scala.xml.Node*)scala.xml.Elem">Elem</span><span class="delimiter">(</span><span title="Null(null)" class="keyword">null</span>, <a href="#327230" title="(specName: org.specs2.specification.SpecName)java.lang.String">resultsTag</a><span class="delimiter">(</span><a href="#327578" title="org.specs2.specification.SpecName">specName</a><span class="delimiter">)</span>,
                               <span title="(key: String, value: String, next: scala.xml.MetaData)scala.xml.UnprefixedAttribute" class="keyword">new</span> <span title="scala.xml.UnprefixedAttribute">UnprefixedAttribute</span><span class="delimiter">(</span><span title="java.lang.String(&quot;timestamp&quot;)" class="string">&quot;timestamp&quot;</span>, <span title="object java.lang.System">System</span>.<span title="()Long">currentTimeMillis</span><span class="delimiter">(</span><span class="delimiter">)</span>.<span title="()java.lang.String">toString</span>, <span title="object scala.xml.Null">Null</span><span class="delimiter">)</span>, <span title="object scala.xml.TopScope">TopScope</span>, <a href="#327638" title="scala.xml.NodeSeq">xmlResults</a>:_*<span class="delimiter">)</span> <span title="(that: scala.collection.GenTraversableOnce[scala.xml.Node])(implicit bf: scala.collection.generic.CanBuildFrom[scala.xml.NodeSeq,scala.xml.Node,scala.xml.NodeSeq])scala.xml.NodeSeq">++</span> <span title="(_data: String)scala.xml.Text">Text</span><span class="delimiter">(</span><span title="java.lang.String(&quot;\012&quot;)" class="string">&quot;\n&quot;</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="comment">/**
   * Transform a result to xml for storage. Only non-successes are stored. The results are referenced with a hashcode based on the result description
   * Location are stored for easier reference
   */</span>
  <span class="keyword">private</span> <span class="keyword">def</span> <a title="=&gt; org.specs2.specification.ExecutedResult =&gt; scala.xml.NodeSeq" id="327233">resultToXml</a>: ExecutedResult =&gt; NodeSeq = <span class="delimiter">(</span>r: <a href="../specification/ExecutedFragment.scala.html#12682" title="org.specs2.specification.ExecutedResult">ExecutedResult</a><span class="delimiter">)</span> =&gt; <span class="delimiter">{</span>
    <span class="delimiter">(</span>&lt;<a title="scala.xml.MetaData" id="327764">result</a> location=<span class="delimiter">{</span><a href="#327752" title="org.specs2.specification.ExecutedResult">r</a>.<a href="../specification/ExecutedFragment.scala.html#296832" title="=&gt; org.specs2.io.Location">location</a>.<a href="../io/Location.scala.html#155610" title="()String">toString</a><span class="delimiter">}</span> id=<span class="delimiter">{</span><a href="#327234" title="(r: org.specs2.specification.ExecutedResult)String">resultId</a><span class="delimiter">(</span><a href="#327752" title="org.specs2.specification.ExecutedResult">r</a><span class="delimiter">)</span><span class="delimiter">}</span>&gt;<span class="delimiter">{</span><a href="#327752" title="org.specs2.specification.ExecutedResult">r</a>.<a href="../specification/ExecutedFragment.scala.html#296839" title="=&gt; org.specs2.specification.Stats">stats</a>.<a href="../specification/Stats.scala.html#295819" title="=&gt; scala.xml.Elem">toXml</a><span class="delimiter">}</span>&lt;/result&gt; <a href="../xml/Nodex.scala.html#62844" title="implicit org.specs2.xml.Nodex.unless : (ns: =&gt; scala.xml.NodeSeq)org.specs2.xml.Nodex.UnlessEmpty">++</a> <span title="(_data: String)scala.xml.Text">Text</span><span class="delimiter">(</span><span title="java.lang.String(&quot;\012&quot;)" class="string">&quot;\n&quot;</span><span class="delimiter">)</span><span class="delimiter">)</span> <a href="../xml/Nodex.scala.html#127447" title="(b: Boolean)scala.xml.NodeSeq">unless</a> <a href="#327752" title="org.specs2.specification.ExecutedResult">r</a>.<a href="../specification/ExecutedFragment.scala.html#296841" title="=&gt; Boolean">isSuccess</a>
  <span class="delimiter">}</span>

  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(r: org.specs2.specification.ExecutedResult)String" id="327234">resultId</a><span class="delimiter">(</span><a title="org.specs2.specification.ExecutedResult" id="327758">r</a>: <a href="../specification/ExecutedFragment.scala.html#12682" title="org.specs2.specification.ExecutedResult">ExecutedResult</a><span class="delimiter">)</span>: <span title="String">String</span> = <a href="#327758" title="org.specs2.specification.ExecutedResult">r</a>.<a href="../specification/ExecutedFragment.scala.html#296826" title="=&gt; org.specs2.text.MarkupString">s</a>.<span title="()java.lang.String">toString</span>.<span title="()Int">hashCode</span>.<span title="()java.lang.String">toString</span>
  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(e: org.specs2.specification.Example)String" id="327235">exampleId</a><span class="delimiter">(</span><a title="org.specs2.specification.Example" id="327469">e</a>: <a href="../specification/Fragment.scala.html#12783" title="org.specs2.specification.Example">Example</a><span class="delimiter">)</span>: <span title="String">String</span> = <a href="#327469" title="org.specs2.specification.Example">e</a>.<a href="../specification/Fragment.scala.html#36507" title="=&gt; org.specs2.text.MarkupString">desc</a>.<span title="()java.lang.String">toString</span>.<span title="()Int">hashCode</span>.<span title="()java.lang.String">toString</span>


<span class="delimiter">}</span>
<span class="keyword">private</span><span class="delimiter">[</span>specs2<span class="delimiter">]</span>
<span class="keyword">object</span> <a title="object org.specs2.reporter.DefaultStatisticsRepository" id="12350">DefaultStatisticsRepository</a> <span title="ScalaObject" class="keyword">extends</span> <a href="#12349" title="org.specs2.reporter.DefaultStatisticsRepository">DefaultStatisticsRepository</a>

<span class="keyword">private</span><span class="delimiter">[</span>specs2<span class="delimiter">]</span>
<span class="keyword">trait</span> <a title="trait WithStatisticsRepository extends java.lang.Object" id="12352">WithStatisticsRepository</a> <span title="java.lang.Object" class="delimiter">{</span>
  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="=&gt; org.specs2.reporter.StatisticsRepository" id="66736">repository</a>: <a href="#12348" title="org.specs2.reporter.StatisticsRepository">StatisticsRepository</a>
<span class="delimiter">}</span>
<span class="keyword">private</span><span class="delimiter">[</span>specs2<span class="delimiter">]</span>
<span class="keyword">trait</span> <a title="trait WithDefaultStatisticsRepository extends java.lang.Object with org.specs2.reporter.WithStatisticsRepository with ScalaObject" id="12353">WithDefaultStatisticsRepository</a> <span title="ScalaObject" class="keyword">extends</span> <a href="#12352" title="org.specs2.reporter.WithStatisticsRepository">WithStatisticsRepository</a> <span class="delimiter">{</span>
  <span class="keyword">protected</span> <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="org.specs2.reporter.StatisticsRepository" id="66739">repository</a>: <a href="#12348" title="org.specs2.reporter.StatisticsRepository">StatisticsRepository</a> = <a href="#12350" title="object org.specs2.reporter.DefaultStatisticsRepository">DefaultStatisticsRepository</a>
<span class="delimiter">}</span>

<span class="keyword">private</span><span class="delimiter">[</span>specs2<span class="delimiter">]</span>
<span class="keyword">object</span> <a title="object org.specs2.reporter.NoStatisticsRepository" id="12354">NoStatisticsRepository</a> <span title="ScalaObject" class="keyword">extends</span> <a href="#12348" title="org.specs2.reporter.StatisticsRepository">StatisticsRepository</a> <span class="delimiter">{</span>
  <span class="keyword">def</span> <a title="(specName: org.specs2.specification.SpecName)Option[org.specs2.specification.Stats]" id="327876">getStatistics</a><span class="delimiter">(</span><a title="org.specs2.specification.SpecName" id="327882">specName</a>: <a href="../specification/SpecName.scala.html#13075" title="org.specs2.specification.SpecName">SpecName</a><span class="delimiter">)</span>: <span title="Option[org.specs2.specification.Stats]">Option</span><span class="delimiter">[</span>Stats<span class="delimiter">]</span> = <span title="object None">None</span>
  <span class="keyword">def</span> <a title="(specName: org.specs2.specification.SpecName, stats: org.specs2.specification.Stats)org.specs2.reporter.NoStatisticsRepository.type" id="327877">storeStatistics</a><span class="delimiter">(</span><a title="org.specs2.specification.SpecName" id="327884">specName</a>: <a href="../specification/SpecName.scala.html#13075" title="org.specs2.specification.SpecName">SpecName</a>, <a title="org.specs2.specification.Stats" id="327885">stats</a>: <a href="../specification/Stats.scala.html#13108" title="org.specs2.specification.Stats">Stats</a><span class="delimiter">)</span> = <span class="keyword">this</span>
  <span class="keyword">def</span> <a title="(specName: org.specs2.specification.SpecName, result: Seq[org.specs2.specification.ExecutedResult])org.specs2.reporter.NoStatisticsRepository.type" id="327878">storeResults</a><span class="delimiter">(</span><a title="org.specs2.specification.SpecName" id="327888">specName</a>: <a href="../specification/SpecName.scala.html#13075" title="org.specs2.specification.SpecName">SpecName</a>, <a title="Seq[org.specs2.specification.ExecutedResult]" id="327889">result</a>: <span title="Seq[org.specs2.specification.ExecutedResult]">Seq</span><span class="delimiter">[</span>ExecutedResult<span class="delimiter">]</span><span class="delimiter">)</span> = <span class="keyword">this</span>
  <span class="keyword">def</span> <a title="=&gt; org.specs2.reporter.NoStatisticsRepository.type" id="327879">resetStatistics</a> = <span class="keyword">this</span>
  <span class="keyword">def</span> <a title="(specName: org.specs2.specification.SpecName, e: org.specs2.specification.Example)Option[org.specs2.execute.Result]" id="327880">previousResult</a><span class="delimiter">(</span><a title="org.specs2.specification.SpecName" id="327895">specName</a>: <a href="../specification/SpecName.scala.html#13075" title="org.specs2.specification.SpecName">SpecName</a>, <a title="org.specs2.specification.Example" id="327896">e</a>: <a href="../specification/Fragment.scala.html#12783" title="org.specs2.specification.Example">Example</a><span class="delimiter">)</span>: <span title="Option[org.specs2.execute.Result]">Option</span><span class="delimiter">[</span>Result<span class="delimiter">]</span> = <span title="object None">None</span>
<span class="delimiter">}</span>

        </pre>
    </body>
</html>