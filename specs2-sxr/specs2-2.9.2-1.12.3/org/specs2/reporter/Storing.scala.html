<?xml version="1.0" encoding="utf-8"?>
      <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <meta http-equiv="Expires" content="0" />
        <title>org/specs2/reporter/Storing.scala</title>
        <script type="text/javascript" src="../../../jquery-all.js"></script>
        <script type="text/javascript" src="../../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../../style.css" title="Style"></link>
    </head>
    <body>
        <pre>
<span class="keyword">package</span> org.specs2
<span class="keyword">package</span> reporter

<span class="keyword">import</span> org.specs2.internal.scalaz._
<span class="keyword">import</span> <span title="object org.specs2.internal.scalaz.Scalaz">Scalaz</span>._
<span class="keyword">import</span> specification._
<span class="keyword">import</span> <a href="NestedBlocks.scala.html#12228" title="object org.specs2.reporter.NestedBlocks">NestedBlocks</a>._
<span class="keyword">import</span> collection.<a href="../collection/Iterablex.scala.html#9887" title="object org.specs2.collection.Iterablex">Iterablex</a>._
<span class="keyword">import</span> main.Arguments

<span class="comment">/**
* This trait stores the results of an executed specification
* It also updates the statistics of:
*
*  - SpecStart fragments from SpecEnd fragments
*/</span>
<span class="keyword">private</span><span class="delimiter">[</span>specs2<span class="delimiter">]</span>
<span class="keyword">trait</span> <a title="trait Storing extends java.lang.Object" id="12371">Storing</a> <span title="java.lang.Object" class="delimiter">{</span>
  <span class="comment">/** @return a function storing ExecutedFragments */</span>
  <span class="keyword">def</span> <a title="(implicit args: org.specs2.main.Arguments)org.specs2.specification.ExecutingSpecification =&gt; org.specs2.specification.ExecutingSpecification" id="294349">store</a><span class="delimiter">(</span><span class="keyword">implicit</span> <a title="org.specs2.main.Arguments" id="294852">args</a>: <a href="../main/Arguments.scala.html#10577" title="org.specs2.main.Arguments">Arguments</a><span class="delimiter">)</span>: ExecutingSpecification =&gt; ExecutingSpecification

<span class="delimiter">}</span>

<span class="keyword">private</span><span class="delimiter">[</span>specs2<span class="delimiter">]</span>
<span class="keyword">trait</span> <a title="trait DefaultStoring extends java.lang.Object with org.specs2.reporter.Storing with org.specs2.reporter.Statistics with org.specs2.reporter.WithDefaultStatisticsRepository with ScalaObject" id="12372">DefaultStoring</a> <span title="ScalaObject" class="keyword">extends</span> <a href="#12371" title="org.specs2.reporter.Storing">Storing</a> <span class="keyword">with</span> <a href="Statistics.scala.html#12337" title="org.specs2.reporter.Statistics">Statistics</a> <span class="keyword">with</span> <a href="StatisticsRepository.scala.html#12353" title="org.specs2.reporter.WithDefaultStatisticsRepository">WithDefaultStatisticsRepository</a> <span class="delimiter">{</span>

  <span class="keyword">def</span> <a title="(implicit args: org.specs2.main.Arguments)org.specs2.specification.ExecutingSpecification =&gt; org.specs2.specification.ExecutingSpecification" id="295717">store</a><span class="delimiter">(</span><span class="keyword">implicit</span> <a title="org.specs2.main.Arguments" id="295762">args</a>: <a href="../main/Arguments.scala.html#10577" title="org.specs2.main.Arguments">Arguments</a><span class="delimiter">)</span>: ExecutingSpecification =&gt; ExecutingSpecification = <span class="delimiter">(</span>spec: <a href="../specification/ExecutingSpecification.scala.html#12736" title="org.specs2.specification.ExecutingSpecification">ExecutingSpecification</a><span class="delimiter">)</span> =&gt; <span class="delimiter">{</span>
    <span title="Any" class="keyword">if</span> <span class="delimiter">(</span><a href="#295762" title="org.specs2.main.Arguments">args</a>.<a href="../main/Arguments.scala.html#36556" title="=&gt; org.specs2.main.Store">store</a>.<a href="../main/Arguments.scala.html#159755" title="=&gt; Boolean">reset</a><span class="delimiter">)</span> <a href="StatisticsRepository.scala.html#66738" title="=&gt; org.specs2.reporter.StatisticsRepository">repository</a>.<a href="StatisticsRepository.scala.html#321400" title="=&gt; DefaultStoring.this.repository.type">resetStatistics</a>
    <span class="keyword">val</span> <a title="Seq[org.specs2.specification.ExecutedFragment]" id="327909">fragmentsWithSpecStartUpdatedWithStatistics</a> =
      <a href="NestedBlocks.scala.html#294898" title="(blocks: Seq[org.specs2.reporter.NestedBlocks.SpecBlock[org.specs2.specification.ExecutedFragment]], f: (org.specs2.specification.ExecutedFragment, org.specs2.specification.ExecutedFragment) =&gt; (org.specs2.specification.ExecutedFragment, org.specs2.specification.ExecutedFragment))Seq[org.specs2.specification.ExecutedFragment]">associateStartEnd</a><span title="(x: =&gt; Seq[org.specs2.specification.ExecutedFragment])org.specs2.internal.scalaz.Identity[Seq[org.specs2.specification.ExecutedFragment]]" class="delimiter">(</span><a href="#295718" title="(fragments: Seq[org.specs2.specification.ExecutedFragment])(implicit args: org.specs2.main.Arguments)Seq[Product with Serializable with org.specs2.reporter.NestedBlocks.SpecBlock[org.specs2.specification.ExecutedFragment]]">statisticsTotals</a><a href="#295762" title="org.specs2.main.Arguments" class="delimiter">(</a><a href="#327908" title="org.specs2.specification.ExecutingSpecification">spec</a>.<a href="../specification/ExecutingSpecification.scala.html#294694" title="=&gt; org.specs2.specification.ExecutedSpecification">execute</a>.<a href="../specification/ExecutedSpecification.scala.html#294387" title="=&gt; Seq[org.specs2.specification.ExecutedFragment]">fragments</a><span class="delimiter">)</span>, <a href="#295720" title="=&gt; (org.specs2.specification.ExecutedFragment, org.specs2.specification.ExecutedFragment) =&gt; (org.specs2.specification.ExecutedFragment, org.specs2.specification.ExecutedFragment)">updateStatsOnSpecStart</a><span class="delimiter">)</span> <span title="(f: Seq[org.specs2.specification.ExecutedFragment] =&gt; Seq[org.specs2.specification.ExecutedFragment])Seq[org.specs2.specification.ExecutedFragment]">|&gt;</span> <a href="#295721" title="(implicit args: org.specs2.main.Arguments)Seq[org.specs2.specification.ExecutedFragment] =&gt; Seq[org.specs2.specification.ExecutedFragment]">storeStatistics</a>

    <a href="../specification/ExecutingSpecification.scala.html#12737" title="object org.specs2.specification.ExecutingSpecification">ExecutingSpecification</a>.<a href="../specification/ExecutingSpecification.scala.html#294730" title="(name: org.specs2.specification.SpecName, fs: Seq[org.specs2.specification.ExecutedFragment], args: org.specs2.main.Arguments)org.specs2.specification.ExecutingSpecification">create</a><span class="delimiter">(</span><a href="#327908" title="org.specs2.specification.ExecutingSpecification">spec</a>.<a href="../specification/ExecutingSpecification.scala.html#294685" title="=&gt; org.specs2.specification.SpecName">name</a>, <a href="#327909" title="Seq[org.specs2.specification.ExecutedFragment]">fragmentsWithSpecStartUpdatedWithStatistics</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(fragments: Seq[org.specs2.specification.ExecutedFragment])(implicit args: org.specs2.main.Arguments)Seq[Product with Serializable with org.specs2.reporter.NestedBlocks.SpecBlock[org.specs2.specification.ExecutedFragment]]" id="295718">statisticsTotals</a><span class="delimiter">(</span><a title="Seq[org.specs2.specification.ExecutedFragment]" id="327923">fragments</a>: <span title="Seq[org.specs2.specification.ExecutedFragment]">Seq</span><span class="delimiter">[</span>ExecutedFragment<span class="delimiter">]</span><span class="delimiter">)</span><span class="delimiter">(</span><span class="keyword">implicit</span> <a title="org.specs2.main.Arguments" id="327924">args</a>: <a href="../main/Arguments.scala.html#10577" title="org.specs2.main.Arguments">Arguments</a><span class="delimiter">)</span> = <span class="delimiter">{</span>
    <span class="keyword">val</span> <a title="Seq[(org.specs2.specification.ExecutedFragment, org.specs2.specification.Stats)]" id="327927">totals</a> = <a href="#327923" title="Seq[org.specs2.specification.ExecutedFragment]">fragments</a> <span title="(that: scala.collection.GenIterable[org.specs2.specification.Stats])(implicit bf: scala.collection.generic.CanBuildFrom[Seq[org.specs2.specification.ExecutedFragment],(org.specs2.specification.ExecutedFragment, org.specs2.specification.Stats),Seq[(org.specs2.specification.ExecutedFragment, org.specs2.specification.Stats)]])Seq[(org.specs2.specification.ExecutedFragment, org.specs2.specification.Stats)]">zip</span> <a href="../collection/Iterablex.scala.html#48522" title="(xs: scala.collection.GenIterable[org.specs2.specification.ExecutedFragment])org.specs2.collection.Iterablex.ExtendedIterable[org.specs2.specification.ExecutedFragment]">fragments</a>.<a href="../collection/Iterablex.scala.html#92549" title="(reducer: org.specs2.internal.scalaz.Reducer[org.specs2.specification.ExecutedFragment,DefaultStoring.this.SpecsStatistics])DefaultStoring.this.SpecsStatistics">reduceWith</a><span class="delimiter">(</span><a href="Statistics.scala.html#295728" title="object DefaultStoring.this.StatisticsReducer">StatisticsReducer</a><span class="delimiter">)</span>.<a href="Statistics.scala.html#295917" title="=&gt; Seq[org.specs2.specification.Stats]">totals</a>
    <a href="#327927" title="Seq[(org.specs2.specification.ExecutedFragment, org.specs2.specification.Stats)]">totals</a> <span title="(f: ((org.specs2.specification.ExecutedFragment, org.specs2.specification.Stats)) =&gt; Product with Serializable with org.specs2.reporter.NestedBlocks.SpecBlock[org.specs2.specification.ExecutedFragment])(implicit bf: scala.collection.generic.CanBuildFrom[Seq[(org.specs2.specification.ExecutedFragment, org.specs2.specification.Stats)],Product with Serializable with org.specs2.reporter.NestedBlocks.SpecBlock[org.specs2.specification.ExecutedFragment],Seq[Product with Serializable with org.specs2.reporter.NestedBlocks.SpecBlock[org.specs2.specification.ExecutedFragment]]])Seq[Product with Serializable with org.specs2.reporter.NestedBlocks.SpecBlock[org.specs2.specification.ExecutedFragment]]">map</span> <span class="delimiter">(</span><a href="#295719" title="(implicit args: org.specs2.main.Arguments)((org.specs2.specification.ExecutedFragment, org.specs2.specification.Stats)) =&gt; org.specs2.specification.ExecutedFragment">setStatsOnSpecEndFragments</a> <span title="(g: org.specs2.specification.ExecutedFragment =&gt; Product with Serializable with org.specs2.reporter.NestedBlocks.SpecBlock[org.specs2.specification.ExecutedFragment])((org.specs2.specification.ExecutedFragment, org.specs2.specification.Stats)) =&gt; Product with Serializable with org.specs2.reporter.NestedBlocks.SpecBlock[org.specs2.specification.ExecutedFragment]">andThen</span> <a href="NestedBlocks.scala.html#294914" title="=&gt; org.specs2.specification.ExecutedFragment =&gt; Product with Serializable with org.specs2.reporter.NestedBlocks.SpecBlock[org.specs2.specification.ExecutedFragment]">executedFragmentsToSpecBlock</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="comment">/**
   * set the statistics on SpecEndFragments after they've been computed by the StatisticsReducer
   * Those statistics are updated from previously executed statistics to calculate trends
   */</span>
  <span class="keyword">def</span> <a title="(implicit args: org.specs2.main.Arguments)((org.specs2.specification.ExecutedFragment, org.specs2.specification.Stats)) =&gt; org.specs2.specification.ExecutedFragment" id="295719">setStatsOnSpecEndFragments</a><span class="delimiter">(</span><span class="keyword">implicit</span> <a title="org.specs2.main.Arguments" id="328036">args</a>: <a href="../main/Arguments.scala.html#10577" title="org.specs2.main.Arguments">Arguments</a><span class="delimiter">)</span> = <span class="delimiter">(</span>fs: <span title="(org.specs2.specification.ExecutedFragment, org.specs2.specification.Stats)" class="delimiter">(</span>ExecutedFragment, Stats<span class="delimiter">)</span><span class="delimiter">)</span> =&gt; <a href="#328040" title="(org.specs2.specification.ExecutedFragment, org.specs2.specification.Stats)">fs</a> <span title="org.specs2.specification.ExecutedFragment" class="keyword">match</span> <span class="delimiter">{</span>
    <span class="keyword">case</span> <span title="org.specs2.specification.ExecutedSpecEnd" class="delimiter">(</span>ExecutedSpecEnd<span class="delimiter">(</span><a title="org.specs2.specification.SpecEnd" id="328043">n</a>, <a title="org.specs2.io.Location" id="328044">l</a>, <a title="org.specs2.specification.Stats" id="328045">s</a><span class="delimiter">)</span>, <a title="org.specs2.specification.Stats" id="328046">stats</a><span class="delimiter">)</span> <span class="keyword">if</span> <span title="=&gt; Boolean">!</span><a href="#328036" title="org.specs2.main.Arguments">args</a>.<a href="../main/Arguments.scala.html#36556" title="=&gt; org.specs2.main.Store">store</a>.<a href="../main/Arguments.scala.html#159756" title="=&gt; Boolean">never</a> =&gt; <a href="../specification/ExecutedFragment.scala.html#297342" title="(end: org.specs2.specification.SpecEnd, location: org.specs2.io.Location, stats: org.specs2.specification.Stats)org.specs2.specification.ExecutedSpecEnd">ExecutedSpecEnd</a><span class="delimiter">(</span><a href="#328043" title="org.specs2.specification.SpecEnd">n</a>, <a href="#328044" title="org.specs2.io.Location">l</a>, <a href="#328046" title="org.specs2.specification.Stats">stats</a>.<a href="../specification/Stats.scala.html#295822" title="(previous: Option[org.specs2.specification.Stats])org.specs2.specification.Stats">updateFrom</a><span class="delimiter">(</span><a href="StatisticsRepository.scala.html#66738" title="=&gt; org.specs2.reporter.StatisticsRepository">repository</a>.<a href="StatisticsRepository.scala.html#321397" title="(specName: org.specs2.specification.SpecName)Option[org.specs2.specification.Stats]">getStatistics</a><span class="delimiter">(</span><a href="#328043" title="org.specs2.specification.SpecEnd">n</a>.<a href="../specification/Fragment.scala.html#51135" title="=&gt; org.specs2.specification.SpecName">specName</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
    <span class="keyword">case</span> <span title="org.specs2.specification.ExecutedFragment" class="delimiter">(</span><a title="org.specs2.specification.ExecutedFragment" id="328063">other</a>, <a title="org.specs2.specification.Stats" id="328064">s</a><span class="delimiter">)</span>                                             =&gt; <a href="#328063" title="org.specs2.specification.ExecutedFragment">other</a>
  <span class="delimiter">}</span>

  <span class="comment">/**
   *  &quot;associate&quot; function to set up the statistics on the SpecStart fragments after they've been computed and set on SpecEnd fragments.
   */</span>
  <span class="keyword">private</span> <span class="keyword">def</span> <a title="=&gt; (org.specs2.specification.ExecutedFragment, org.specs2.specification.ExecutedFragment) =&gt; (org.specs2.specification.ExecutedFragment, org.specs2.specification.ExecutedFragment)" id="295720">updateStatsOnSpecStart</a> = <span class="delimiter">(</span>start: <a href="../specification/ExecutedFragment.scala.html#12676" title="org.specs2.specification.ExecutedFragment">ExecutedFragment</a>, end: <a href="../specification/ExecutedFragment.scala.html#12676" title="org.specs2.specification.ExecutedFragment">ExecutedFragment</a><span class="delimiter">)</span> =&gt; <span class="delimiter">{</span>
    <span title="(_1: org.specs2.specification.ExecutedFragment, _2: org.specs2.specification.ExecutedFragment)(org.specs2.specification.ExecutedFragment, org.specs2.specification.ExecutedFragment)" class="delimiter">(</span><a href="#328096" title="org.specs2.specification.ExecutedFragment">start</a>, <a href="#328097" title="org.specs2.specification.ExecutedFragment">end</a><span class="delimiter">)</span> <span title="(org.specs2.specification.ExecutedFragment, org.specs2.specification.ExecutedFragment)" class="keyword">match</span> <span class="delimiter">{</span>
      <span class="keyword">case</span> <span title="(org.specs2.specification.ExecutedSpecStart, org.specs2.specification.ExecutedSpecEnd)" class="delimiter">(</span>ExecutedSpecStart<span class="delimiter">(</span><a title="org.specs2.specification.SpecStart" id="328106">ns</a>, <a title="org.specs2.io.Location" id="328107">ss</a>, <a title="org.specs2.specification.Stats" id="328108">ls</a><span class="delimiter">)</span>, ExecutedSpecEnd<span class="delimiter">(</span><a title="org.specs2.specification.SpecEnd" id="328109">ne</a>, <a title="org.specs2.io.Location" id="328110">se</a>, <a title="org.specs2.specification.Stats" id="328111">le</a><span class="delimiter">)</span><span class="delimiter">)</span> =&gt; <span title="(_1: org.specs2.specification.ExecutedSpecStart, _2: org.specs2.specification.ExecutedSpecEnd)(org.specs2.specification.ExecutedSpecStart, org.specs2.specification.ExecutedSpecEnd)" class="delimiter">(</span><a href="../specification/ExecutedFragment.scala.html#297248" title="(start: org.specs2.specification.SpecStart, location: org.specs2.io.Location, stats: org.specs2.specification.Stats)org.specs2.specification.ExecutedSpecStart">ExecutedSpecStart</a><span class="delimiter">(</span><a href="#328106" title="org.specs2.specification.SpecStart">ns</a>, <a href="#328110" title="org.specs2.io.Location">se</a>, <a href="#328111" title="org.specs2.specification.Stats">le</a><span class="delimiter">)</span>, <a href="../specification/ExecutedFragment.scala.html#297342" title="(end: org.specs2.specification.SpecEnd, location: org.specs2.io.Location, stats: org.specs2.specification.Stats)org.specs2.specification.ExecutedSpecEnd">ExecutedSpecEnd</a><span class="delimiter">(</span><a href="#328109" title="org.specs2.specification.SpecEnd">ne</a>.<a href="../specification/Fragment.scala.html#51142" title="(s: Boolean)org.specs2.specification.SpecEnd">seeOnlyLinkIs</a><span class="delimiter">(</span><a href="#328106" title="org.specs2.specification.SpecStart">ns</a>.<a href="../specification/Fragment.scala.html#51009" title="=&gt; Boolean">isSeeOnlyLink</a><span class="delimiter">)</span>, <a href="#328110" title="org.specs2.io.Location">se</a>, <a href="#328111" title="org.specs2.specification.Stats">le</a><span class="delimiter">)</span><span class="delimiter">)</span>
      <span class="keyword">case</span> <a title="(org.specs2.specification.ExecutedFragment, org.specs2.specification.ExecutedFragment)" id="328143">other</a>                                                        =&gt; <span title="(_1: org.specs2.specification.ExecutedFragment, _2: org.specs2.specification.ExecutedFragment)(org.specs2.specification.ExecutedFragment, org.specs2.specification.ExecutedFragment)" class="delimiter">(</span><a href="#328096" title="org.specs2.specification.ExecutedFragment">start</a>, <a href="#328097" title="org.specs2.specification.ExecutedFragment">end</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(implicit args: org.specs2.main.Arguments)Seq[org.specs2.specification.ExecutedFragment] =&gt; Seq[org.specs2.specification.ExecutedFragment]" id="295721">storeStatistics</a><span class="delimiter">(</span><span class="keyword">implicit</span> <a title="org.specs2.main.Arguments" id="328230">args</a>: <a href="../main/Arguments.scala.html#10577" title="org.specs2.main.Arguments">Arguments</a><span class="delimiter">)</span> = <span class="delimiter">(</span>fragments: <span title="Seq[org.specs2.specification.ExecutedFragment]">Seq</span><span class="delimiter">[</span>ExecutedFragment<span class="delimiter">]</span><span class="delimiter">)</span> =&gt; <span class="delimiter">{</span>
    <span title="Seq[org.specs2.specification.ExecutedFragment]" class="keyword">if</span> <span class="delimiter">(</span><a href="#328230" title="org.specs2.main.Arguments">args</a>.<a href="../main/Arguments.scala.html#36556" title="=&gt; org.specs2.main.Store">store</a>.<a href="../main/Arguments.scala.html#159756" title="=&gt; Boolean">never</a><span class="delimiter">)</span> <a href="#328234" title="Seq[org.specs2.specification.ExecutedFragment]">fragments</a>
    <span class="keyword">else</span> <span class="delimiter">{</span>
      <span class="keyword">val</span> <a title="Seq[(org.specs2.specification.ExecutedFragment, org.specs2.specification.SpecName)]" id="328235">fn</a> = <a href="SpecsArguments.scala.html#12312" title="object org.specs2.reporter.SpecsArguments">SpecsArguments</a>.<a href="SpecsArguments.scala.html#294481" title="(fs: Seq[org.specs2.specification.ExecutedFragment])(implicit reducer: org.specs2.internal.scalaz.Reducer[org.specs2.specification.ExecutedFragment,org.specs2.reporter.SpecsArguments[org.specs2.specification.ExecutedFragment]])org.specs2.reporter.SpecsArguments[org.specs2.specification.ExecutedFragment]">foldAll</a><a href="SpecsArguments.scala.html#294486" title="object org.specs2.reporter.SpecsArguments.SpecsArgumentsReducer" class="delimiter">(</a><a href="#328234" title="Seq[org.specs2.specification.ExecutedFragment]">fragments</a><span class="delimiter">)</span>.<a href="SpecsArguments.scala.html#294505" title="=&gt; Seq[(org.specs2.specification.ExecutedFragment, org.specs2.specification.SpecName)]">fragmentAndSpecNames</a>
      <span class="keyword">val</span> <a title="scala.collection.immutable.Map[org.specs2.specification.SpecName,Seq[(org.specs2.specification.SpecName, org.specs2.specification.ExecutedResult)]]" id="328236">results</a> = <a href="#328235" title="Seq[(org.specs2.specification.ExecutedFragment, org.specs2.specification.SpecName)]">fn</a> <span title="(pf: PartialFunction[(org.specs2.specification.ExecutedFragment, org.specs2.specification.SpecName),(org.specs2.specification.SpecName, org.specs2.specification.ExecutedResult)])(implicit bf: scala.collection.generic.CanBuildFrom[Seq[(org.specs2.specification.ExecutedFragment, org.specs2.specification.SpecName)],(org.specs2.specification.SpecName, org.specs2.specification.ExecutedResult),Seq[(org.specs2.specification.SpecName, org.specs2.specification.ExecutedResult)]])Seq[(org.specs2.specification.SpecName, org.specs2.specification.ExecutedResult)]">collect</span> <a href="#328266" title="(org.specs2.specification.SpecName, org.specs2.specification.ExecutedResult)" class="delimiter">{</a> <span class="keyword">case</span> <span title="(org.specs2.specification.SpecName, org.specs2.specification.ExecutedResult)" class="delimiter">(</span><a title="org.specs2.specification.ExecutedResult" id="328269">r</a> @ ExecutedResult<span class="delimiter">(</span>_, _, _, _, _<span class="delimiter">)</span>, <a title="org.specs2.specification.SpecName" id="328270">name</a><span class="delimiter">)</span> =&gt; <span title="(_1: org.specs2.specification.SpecName, _2: org.specs2.specification.ExecutedResult)(org.specs2.specification.SpecName, org.specs2.specification.ExecutedResult)" class="delimiter">(</span><a href="#328270" title="org.specs2.specification.SpecName">name</a>, <a href="#328269" title="org.specs2.specification.ExecutedResult">r</a><span class="delimiter">)</span> <span class="delimiter">}</span> <span title="(f: ((org.specs2.specification.SpecName, org.specs2.specification.ExecutedResult)) =&gt; org.specs2.specification.SpecName)scala.collection.immutable.Map[org.specs2.specification.SpecName,Seq[(org.specs2.specification.SpecName, org.specs2.specification.ExecutedResult)]]">groupBy</span> <span class="delimiter">(</span><a href="#328306" title="(org.specs2.specification.SpecName, org.specs2.specification.ExecutedResult)">_</a>.<span title="=&gt; org.specs2.specification.SpecName">_1</span><span class="delimiter">)</span>
      <a href="#328236" title="scala.collection.immutable.Map[org.specs2.specification.SpecName,Seq[(org.specs2.specification.SpecName, org.specs2.specification.ExecutedResult)]]">results</a> <span title="(f: ((org.specs2.specification.SpecName, Seq[(org.specs2.specification.SpecName, org.specs2.specification.ExecutedResult)])) =&gt; org.specs2.reporter.StatisticsRepository)(implicit bf: scala.collection.generic.CanBuildFrom[scala.collection.immutable.Map[org.specs2.specification.SpecName,Seq[(org.specs2.specification.SpecName, org.specs2.specification.ExecutedResult)]],org.specs2.reporter.StatisticsRepository,scala.collection.immutable.Iterable[org.specs2.reporter.StatisticsRepository]])scala.collection.immutable.Iterable[org.specs2.reporter.StatisticsRepository]">map</span> <a href="#295723" title="=&gt; ((org.specs2.specification.SpecName, Seq[(org.specs2.specification.SpecName, org.specs2.specification.ExecutedResult)])) =&gt; DefaultStoring.this.repository.type">storeResults</a>
      <span class="comment">// toList is called to &quot;force&quot; the view</span>
      <span class="comment">// the result of storeStats is returned because SpecStarts might have been updated from the repository</span>
      <a href="#328235" title="Seq[(org.specs2.specification.ExecutedFragment, org.specs2.specification.SpecName)]">fn</a>.<span title="=&gt; List[(org.specs2.specification.ExecutedFragment, org.specs2.specification.SpecName)]">toList</span> <span title="(f: ((org.specs2.specification.ExecutedFragment, org.specs2.specification.SpecName)) =&gt; org.specs2.specification.ExecutedFragment)(implicit bf: scala.collection.generic.CanBuildFrom[List[(org.specs2.specification.ExecutedFragment, org.specs2.specification.SpecName)],org.specs2.specification.ExecutedFragment,List[org.specs2.specification.ExecutedFragment]])List[org.specs2.specification.ExecutedFragment]">map</span> <a href="#295722" title="=&gt; ((org.specs2.specification.ExecutedFragment, org.specs2.specification.SpecName)) =&gt; org.specs2.specification.ExecutedFragment">storeStats</a>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>
  <span class="comment">/**
   * store the statistics:
   * - for SpecEnd -&gt; put the stats in the repository
   * - for a SpecStart that's a link -&gt; read the status of the previous execution
   */</span>
  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="=&gt; ((org.specs2.specification.ExecutedFragment, org.specs2.specification.SpecName)) =&gt; org.specs2.specification.ExecutedFragment" id="295722">storeStats</a> = <span class="delimiter">(</span>fn: <span title="(org.specs2.specification.ExecutedFragment, org.specs2.specification.SpecName)" class="delimiter">(</span>ExecutedFragment, SpecName<span class="delimiter">)</span><span class="delimiter">)</span> =&gt; <span class="delimiter">{</span>
    <a href="#328450" title="(org.specs2.specification.ExecutedFragment, org.specs2.specification.SpecName)">fn</a> <span title="org.specs2.specification.ExecutedFragment" class="keyword">match</span> <span class="delimiter">{</span>
      <span class="keyword">case</span> <span title="org.specs2.specification.ExecutedSpecStart" class="delimiter">(</span>ExecutedSpecStart<span class="delimiter">(</span><a title="org.specs2.specification.SpecStart" id="328453">start</a> @ SpecStart<span class="delimiter">(</span>_,_,_<span class="delimiter">)</span>, <a title="org.specs2.io.Location" id="328454">loc</a>, <a title="org.specs2.specification.Stats" id="328455">st</a><span class="delimiter">)</span>, _<span class="delimiter">)</span> <span class="keyword">if</span> <a href="#328453" title="org.specs2.specification.SpecStart">start</a>.<a href="../specification/Fragment.scala.html#51009" title="=&gt; Boolean">isSeeOnlyLink</a> =&gt;
        <a href="../specification/ExecutedFragment.scala.html#297248" title="(start: org.specs2.specification.SpecStart, location: org.specs2.io.Location, stats: org.specs2.specification.Stats)org.specs2.specification.ExecutedSpecStart">ExecutedSpecStart</a><span class="delimiter">(</span><a href="#328453" title="org.specs2.specification.SpecStart">start</a>, <a href="#328454" title="org.specs2.io.Location">loc</a>, <a href="StatisticsRepository.scala.html#66738" title="=&gt; org.specs2.reporter.StatisticsRepository">repository</a>.<a href="StatisticsRepository.scala.html#321397" title="(specName: org.specs2.specification.SpecName)Option[org.specs2.specification.Stats]">getStatistics</a><span class="delimiter">(</span><a href="#328453" title="org.specs2.specification.SpecStart">start</a>.<a href="../specification/Fragment.scala.html#50995" title="=&gt; org.specs2.specification.SpecName">specName</a><span class="delimiter">)</span>.<span title="(default: =&gt; org.specs2.specification.Stats)org.specs2.specification.Stats">getOrElse</span><span class="delimiter">(</span><a href="#328455" title="org.specs2.specification.Stats">st</a><span class="delimiter">)</span><span class="delimiter">)</span>
      <span class="comment">// if the specification is see-only don't store the stats</span>
      <span class="comment">// otherwise the index page will think that the last execution was successful</span>
      <span class="keyword">case</span> <span title="org.specs2.specification.ExecutedSpecEnd" class="delimiter">(</span><a title="org.specs2.specification.ExecutedSpecEnd" id="328469">f</a> @ ExecutedSpecEnd<span class="delimiter">(</span><a title="org.specs2.specification.SpecEnd" id="328470">end</a> @ SpecEnd<span class="delimiter">(</span>_,_<span class="delimiter">)</span>, <a title="org.specs2.io.Location" id="328471">loc</a>, <a title="org.specs2.specification.Stats" id="328472">st</a><span class="delimiter">)</span>, _<span class="delimiter">)</span> <span class="keyword">if</span> <span title="=&gt; Boolean">!</span><a href="#328470" title="org.specs2.specification.SpecEnd">end</a>.<a href="../specification/Fragment.scala.html#51137" title="=&gt; Boolean">isSeeOnlyLink</a> =&gt; <a href="StatisticsRepository.scala.html#66738" title="=&gt; org.specs2.reporter.StatisticsRepository">repository</a>.<a href="StatisticsRepository.scala.html#321398" title="(specName: org.specs2.specification.SpecName, stats: org.specs2.specification.Stats)DefaultStoring.this.repository.type">storeStatistics</a><span class="delimiter">(</span><a href="#328470" title="org.specs2.specification.SpecEnd">end</a>.<a href="../specification/Fragment.scala.html#51135" title="=&gt; org.specs2.specification.SpecName">specName</a>, <a href="#328472" title="org.specs2.specification.Stats">st</a><span class="delimiter">)</span>; <a href="#328469" title="org.specs2.specification.ExecutedSpecEnd">f</a>
      <span class="keyword">case</span> <span title="org.specs2.specification.ExecutedFragment" class="delimiter">(</span><a title="org.specs2.specification.ExecutedFragment" id="328475">other</a>, <a title="org.specs2.specification.SpecName" id="328476">name</a><span class="delimiter">)</span>                                                               =&gt; <a href="#328475" title="org.specs2.specification.ExecutedFragment">other</a>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>
  <span class="comment">/**
   * store the results by spec name
   */</span>
  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="=&gt; ((org.specs2.specification.SpecName, Seq[(org.specs2.specification.SpecName, org.specs2.specification.ExecutedResult)])) =&gt; DefaultStoring.this.repository.type" id="295723">storeResults</a> = <span class="delimiter">(</span>r: <span title="(org.specs2.specification.SpecName, Seq[(org.specs2.specification.SpecName, org.specs2.specification.ExecutedResult)])" class="delimiter">(</span>SpecName, Seq<span class="delimiter">[</span><span class="delimiter">(</span>SpecName, ExecutedResult<span class="delimiter">)</span><span class="delimiter">]</span><span class="delimiter">)</span><span class="delimiter">)</span> =&gt; <span class="delimiter">{</span>
    <span class="keyword">val</span> <a href="#328329" title="(org.specs2.specification.SpecName, Seq[(org.specs2.specification.SpecName, org.specs2.specification.ExecutedResult)])" class="delimiter">(</a><a href="#328328" title="org.specs2.specification.SpecName" id="328329">name</a>, <a href="#328328" title="Seq[(org.specs2.specification.SpecName, org.specs2.specification.ExecutedResult)]" id="328330">results</a><span class="delimiter">)</span> = <a href="#328327" title="(org.specs2.specification.SpecName, Seq[(org.specs2.specification.SpecName, org.specs2.specification.ExecutedResult)])">r</a>
    <a href="StatisticsRepository.scala.html#66738" title="=&gt; org.specs2.reporter.StatisticsRepository">repository</a>.<a href="StatisticsRepository.scala.html#321399" title="(specName: org.specs2.specification.SpecName, result: Seq[org.specs2.specification.ExecutedResult])DefaultStoring.this.repository.type">storeResults</a><span class="delimiter">(</span><a href="#328329" title="org.specs2.specification.SpecName">name</a>, <a href="#328330" title="Seq[(org.specs2.specification.SpecName, org.specs2.specification.ExecutedResult)]">results</a>.<span title="(f: ((org.specs2.specification.SpecName, org.specs2.specification.ExecutedResult)) =&gt; org.specs2.specification.ExecutedResult)(implicit bf: scala.collection.generic.CanBuildFrom[Seq[(org.specs2.specification.SpecName, org.specs2.specification.ExecutedResult)],org.specs2.specification.ExecutedResult,Seq[org.specs2.specification.ExecutedResult]])Seq[org.specs2.specification.ExecutedResult]">map</span><span title="scala.collection.generic.CanBuildFrom[scala.collection.Seq.Coll,org.specs2.specification.ExecutedResult,Seq[org.specs2.specification.ExecutedResult]]" class="delimiter">(</span><a href="#328366" title="(org.specs2.specification.SpecName, org.specs2.specification.ExecutedResult)">_</a>.<span title="=&gt; org.specs2.specification.ExecutedResult">_2</span><span class="delimiter">)</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>
<span class="delimiter">}</span>

        </pre>
    </body>
</html>