<?xml version="1.0" encoding="utf-8"?>
      <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <meta http-equiv="Expires" content="0" />
        <title>org/specs2/reporter/ExecutionStrategy.scala</title>
        <script type="text/javascript" src="../../../jquery-all.js"></script>
        <script type="text/javascript" src="../../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../../style.css" title="Style"></link>
    </head>
    <body>
        <pre>
<span class="keyword">package</span> org.specs2
<span class="keyword">package</span> reporter

<span class="keyword">import</span> java.util.concurrent.Executors
<span class="keyword">import</span> org.specs2.internal.scalaz._
<span class="keyword">import</span> <span title="object org.specs2.internal.scalaz.Scalaz">Scalaz</span>._
<span class="keyword">import</span> concurrent._
<span class="keyword">import</span> <span title="object org.specs2.internal.scalaz.concurrent.Strategy">Strategy</span>._
<span class="keyword">import</span> specification._
<span class="keyword">import</span> control.NamedThreadFactory
<span class="keyword">import</span> main.<span class="delimiter">{</span>ArgumentsArgs, Arguments<span class="delimiter">}</span>
<span class="keyword">import</span> <a href="../specification/ExecutedFragment.scala.html#12677" title="object org.specs2.specification.ExecutedFragment">ExecutedFragment</a>._

<span class="comment">/**
 * Generic trait for executing Fragments, which are sorted according to their dependencies
 */</span>
<span class="keyword">private</span><span class="delimiter">[</span>specs2<span class="delimiter">]</span>
<span class="keyword">trait</span> <a title="trait ExecutionStrategy extends java.lang.Object" id="11948">ExecutionStrategy</a> <span title="java.lang.Object" class="delimiter">{</span>
  <span class="keyword">def</span> <a title="(implicit arguments: org.specs2.main.Arguments)org.specs2.reporter.ExecutableSpecification =&gt; org.specs2.specification.ExecutingSpecification" id="294348">execute</a><span class="delimiter">(</span><span class="keyword">implicit</span> <a title="org.specs2.main.Arguments" id="294668">arguments</a>: <a href="../main/Arguments.scala.html#10577" title="org.specs2.main.Arguments">Arguments</a><span class="delimiter">)</span>: ExecutableSpecification =&gt; ExecutingSpecification
<span class="delimiter">}</span>

<span class="comment">/**
 * This trait uses Scalaz promises to execute Fragments concurrently
 * 
 * It uses a Fixed thread pool with a number of threads to execute the fragments.
 * The default number is the number of available threads by default but this can be overriden by providing different Arguments
 */</span>
<span class="keyword">private</span><span class="delimiter">[</span>specs2<span class="delimiter">]</span>
<span class="keyword">trait</span> <a title="trait DefaultExecutionStrategy extends java.lang.Object with org.specs2.reporter.ExecutionStrategy with org.specs2.specification.FragmentExecution with ScalaObject" id="11949">DefaultExecutionStrategy</a> <span title="ScalaObject" class="keyword">extends</span> <a href="#11948" title="org.specs2.reporter.ExecutionStrategy">ExecutionStrategy</a> <span class="keyword">with</span> <a href="../specification/FragmentExecution.scala.html#12807" title="org.specs2.specification.FragmentExecution">FragmentExecution</a> <span class="delimiter">{</span>
  <span class="keyword">import</span> <a href="../main/ArgumentsArgs.scala.html#10604" title="object org.specs2.main.ArgumentsArgs">ArgumentsArgs</a>._

  <span class="comment">/**
   * execute sequences of Fragments.
   *
   * If the stopOnFail argument is true, we check that the execution is ok before executing the next sequence.
   */</span>
  <span class="keyword">def</span> <a title="(implicit arguments: org.specs2.main.Arguments)org.specs2.reporter.ExecutableSpecification =&gt; org.specs2.specification.ExecutingSpecification" id="295700">execute</a><span class="delimiter">(</span><span class="keyword">implicit</span> <a title="org.specs2.main.Arguments" id="296402">arguments</a>: <a href="../main/Arguments.scala.html#10577" title="org.specs2.main.Arguments">Arguments</a><span class="delimiter">)</span> = <span class="delimiter">(</span>spec: <a href="Sequence.scala.html#12286" title="org.specs2.reporter.ExecutableSpecification">ExecutableSpecification</a><span class="delimiter">)</span> =&gt; <span class="delimiter">{</span>
    <span class="keyword">implicit</span> <span class="keyword">val</span> <a title="java.util.concurrent.ExecutorService" id="297544">executor</a> = <span title="object java.util.concurrent.Executors">Executors</span>.<span title="(x$1: Int, x$2: java.util.concurrent.ThreadFactory)java.util.concurrent.ExecutorService">newFixedThreadPool</span><span class="delimiter">(</span><a href="#297543" title="org.specs2.reporter.ExecutableSpecification">spec</a>.<a href="Sequence.scala.html#294589" title="=&gt; org.specs2.main.Arguments">arguments</a>.<a href="../main/Arguments.scala.html#36578" title="=&gt; Int">threadsNb</a>, <a href="../control/NamedThreadFactory.scala.html#95861" title="org.specs2.control.NamedThreadFactory" class="keyword">new</a> <a href="../control/NamedThreadFactory.scala.html#9964" title="org.specs2.control.NamedThreadFactory">NamedThreadFactory</a><span class="delimiter">(</span><span title="java.lang.String(&quot;specs2.DefaultExecutionStrategy&quot;)" class="string">&quot;specs2.DefaultExecutionStrategy&quot;</span><span class="delimiter">)</span><span class="delimiter">)</span>
    <span class="keyword">try</span> <span class="delimiter">{</span>
      <span class="keyword">val</span> <a title="DefaultExecutionStrategy.this.ExecutingFragments" id="297735">executing</a> = <a href="#297543" title="org.specs2.reporter.ExecutableSpecification">spec</a>.<a href="Sequence.scala.html#294591" title="=&gt; Seq[org.specs2.reporter.FragmentSeq]">fs</a>.<span title="(z: DefaultExecutionStrategy.this.ExecutingFragments)(op: (DefaultExecutionStrategy.this.ExecutingFragments, org.specs2.reporter.FragmentSeq) =&gt; DefaultExecutionStrategy.this.ExecutingFragments)DefaultExecutionStrategy.this.ExecutingFragments">foldLeft</span><span class="delimiter">(</span><a href="#297746" title="(fragments: Seq[org.specs2.specification.ExecutingFragment], lastSequence: Seq[org.specs2.specification.ExecutingFragment], barrier: () =&gt; Any, nextMustSkip: Boolean)DefaultExecutionStrategy.this.ExecutingFragments">ExecutingFragments</a><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span> <span class="delimiter">{</span> <span class="delimiter">(</span><a title="DefaultExecutionStrategy.this.ExecutingFragments" id="297796">res</a>, <a title="org.specs2.reporter.FragmentSeq" id="297797">fs</a><span class="delimiter">)</span> =&gt;
        <span class="keyword">val</span> <a title="org.specs2.main.Arguments" id="297808">fsArgs</a> = <a href="#296402" title="org.specs2.main.Arguments">arguments</a> <a href="../main/Arguments.scala.html#36593" title="(other: org.specs2.main.Arguments)org.specs2.main.Arguments">&lt;|</a> <a href="#297797" title="org.specs2.reporter.FragmentSeq">fs</a>.<a href="Sequence.scala.html#297802" title="=&gt; org.specs2.main.Arguments">arguments</a>
        <span class="keyword">val</span> <a title="Seq[org.specs2.specification.ExecutingFragment]" id="297809">executing</a> = <a href="#295705" title="(fs: org.specs2.reporter.FragmentSeq, barrier: =&gt; Any)(implicit args: org.specs2.main.Arguments, implicit strategy: org.specs2.internal.scalaz.concurrent.Strategy)Seq[org.specs2.specification.ExecutingFragment]">executeSequence</a><span class="delimiter">(</span><a href="#297797" title="org.specs2.reporter.FragmentSeq">fs</a>, <a href="#297796" title="DefaultExecutionStrategy.this.ExecutingFragments">res</a>.<a href="#297769" title="()Any">barrier</a><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">(</span><a href="#295704" title="(arguments: org.specs2.main.Arguments, nextMustSkip: Boolean)org.specs2.main.Arguments">executionArgs</a><span class="delimiter">(</span><a href="#297808" title="org.specs2.main.Arguments">fsArgs</a>, <a href="#297796" title="DefaultExecutionStrategy.this.ExecutingFragments">res</a>.<a href="#297770" title="=&gt; Boolean">nextMustSkip</a><span class="delimiter">)</span>, <span title="implicit org.specs2.internal.scalaz.concurrent.StrategyLow.Executor : (implicit s: java.util.concurrent.ExecutorService)java.lang.Object with org.specs2.internal.scalaz.concurrent.Strategy">Executor</span><span class="delimiter">(</span><a href="#297544" title="java.util.concurrent.ExecutorService">executor</a><span class="delimiter">)</span><span class="delimiter">)</span>
        <a href="#297796" title="DefaultExecutionStrategy.this.ExecutingFragments">res</a>.<a href="#297760" title="(fs: Seq[org.specs2.specification.ExecutingFragment], previousSequence: Seq[org.specs2.specification.ExecutingFragment], arguments: org.specs2.main.Arguments)DefaultExecutionStrategy.this.ExecutingFragments">addExecutingFragments</a><span class="delimiter">(</span><a href="#297809" title="Seq[org.specs2.specification.ExecutingFragment]">executing</a>, <a href="#297796" title="DefaultExecutionStrategy.this.ExecutingFragments">res</a>.<a href="#297768" title="=&gt; Seq[org.specs2.specification.ExecutingFragment]">lastSequence</a>, <a href="#297808" title="org.specs2.main.Arguments">fsArgs</a><span class="delimiter">)</span>
      <span class="delimiter">}</span>
      <a href="../specification/ExecutingSpecification.scala.html#294733" title="(name: org.specs2.specification.SpecName, arguments: org.specs2.main.Arguments, fs: Seq[org.specs2.specification.ExecutingFragment], executor: java.util.concurrent.ExecutorService)org.specs2.specification.ExecutingSpecification">ExecutingSpecification</a><span class="delimiter">(</span><a href="#297543" title="org.specs2.reporter.ExecutableSpecification">spec</a>.<a href="Sequence.scala.html#294587" title="=&gt; org.specs2.specification.SpecName">name</a>, <a href="#297543" title="org.specs2.reporter.ExecutableSpecification">spec</a>.<a href="Sequence.scala.html#294589" title="=&gt; org.specs2.main.Arguments">arguments</a>, <a href="#297735" title="DefaultExecutionStrategy.this.ExecutingFragments">executing</a>.<a href="#297767" title="=&gt; Seq[org.specs2.specification.ExecutingFragment]">fragments</a>, <a href="#297544" title="java.util.concurrent.ExecutorService">executor</a><span class="delimiter">)</span>
    <span class="delimiter">}</span> <span class="keyword">catch</span> <span class="delimiter">{</span>
      <span class="comment">// just in case something bad happens, or if there's an InterruptedException, shutdown the executor</span>
      <span class="keyword">case</span> <a title="Nothing" id="298225">e</a> =&gt; <a href="#297544" title="java.util.concurrent.ExecutorService">executor</a>.<span title="()Unit">shutdown</span>; <span title="Nothing" class="keyword">throw</span> <a href="#298225" title="java.lang.Throwable">e</a>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="comment">/**
   * This class:
   *
   * - collect the list of executing fragments
   * - keeps a &quot;barrier&quot;: that's a function containing a group of executing fragments which must terminate before a new group of
   *   fragments starts being executed. This makes sure that Steps will only start after a group of concurrent examples has finished
   *   executing (and vice-versa)
   * - keeps the status of the previous executions to be able to stop the execution when &quot;stopOnFail&quot; is true and one execution failed
   *
   */</span>
  <span class="keyword">private</span> case <span class="keyword">class</span> <a title="class ExecutingFragments extends java.lang.Object with ScalaObject with Product with Serializable" id="297746">ExecutingFragments</a><a href="#297746" title="ScalaObject" class="delimiter">(</a><a title="Seq[org.specs2.specification.ExecutingFragment]" id="297767">fragments</a>: <span title="Seq[org.specs2.specification.ExecutingFragment]">Seq</span><span class="delimiter">[</span>ExecutingFragment<span class="delimiter">]</span> = <span title="[A](elems: A*)Seq[A]">Seq</span><span title="(elems: org.specs2.specification.ExecutingFragment*)Seq[org.specs2.specification.ExecutingFragment]" class="delimiter">[</span><a href="../specification/ExecutedFragment.scala.html#12675" title="org.specs2.specification.ExecutingFragment">ExecutingFragment</a><span class="delimiter">]</span><span class="delimiter">(</span><span class="delimiter">)</span>,
                                        <a title="Seq[org.specs2.specification.ExecutingFragment]" id="297768">lastSequence</a>: <span title="Seq[org.specs2.specification.ExecutingFragment]">Seq</span><span class="delimiter">[</span>ExecutingFragment<span class="delimiter">]</span> = <span title="[A](elems: A*)Seq[A]">Seq</span><span title="(elems: org.specs2.specification.ExecutingFragment*)Seq[org.specs2.specification.ExecutingFragment]" class="delimiter">[</span><a href="../specification/ExecutedFragment.scala.html#12675" title="org.specs2.specification.ExecutingFragment">ExecutingFragment</a><span class="delimiter">]</span><span class="delimiter">(</span><span class="delimiter">)</span>,
                                        <a title="() =&gt; Any" id="297769">barrier</a>: <span class="delimiter">(</span><span class="delimiter">)</span> =&gt; Any = <span class="delimiter">(</span><span class="delimiter">)</span> =&gt; <span title="Int(1)" class="int">1</span>,
                                        <a title="Boolean" id="297770">nextMustSkip</a>: <span title="Boolean">Boolean</span> = <span title="Boolean(false)" class="keyword">false</span><span class="delimiter">)</span> <span class="delimiter">{</span>

    <span class="keyword">def</span> <a title="(fs: Seq[org.specs2.specification.ExecutingFragment], previousSequence: Seq[org.specs2.specification.ExecutingFragment], arguments: org.specs2.main.Arguments)DefaultExecutionStrategy.this.ExecutingFragments" id="297760">addExecutingFragments</a><span class="delimiter">(</span><a title="Seq[org.specs2.specification.ExecutingFragment]" id="297889">fs</a>: <span title="Seq[org.specs2.specification.ExecutingFragment]">Seq</span><span class="delimiter">[</span>ExecutingFragment<span class="delimiter">]</span>, <a title="Seq[org.specs2.specification.ExecutingFragment]" id="297890">previousSequence</a>: <span title="Seq[org.specs2.specification.ExecutingFragment]">Seq</span><span class="delimiter">[</span>ExecutingFragment<span class="delimiter">]</span>, <a title="org.specs2.main.Arguments" id="297891">arguments</a>: <a href="../main/Arguments.scala.html#10577" title="org.specs2.main.Arguments">Arguments</a><span class="delimiter">)</span> =
      <a href="#297746" title="(fragments: Seq[org.specs2.specification.ExecutingFragment], lastSequence: Seq[org.specs2.specification.ExecutingFragment], barrier: () =&gt; Any, nextMustSkip: Boolean)DefaultExecutionStrategy.this.ExecutingFragments">copy</a><span class="delimiter">(</span>fragments = <a href="#297767" title="=&gt; Seq[org.specs2.specification.ExecutingFragment]">fragments</a> <span title="(that: scala.collection.GenTraversableOnce[org.specs2.specification.ExecutingFragment])(implicit bf: scala.collection.generic.CanBuildFrom[Seq[org.specs2.specification.ExecutingFragment],org.specs2.specification.ExecutingFragment,Seq[org.specs2.specification.ExecutingFragment]])Seq[org.specs2.specification.ExecutingFragment]">++</span> <a href="#297889" title="Seq[org.specs2.specification.ExecutingFragment]">fs</a>,
           lastSequence = <span title="Seq[org.specs2.specification.ExecutingFragment]" class="keyword">if</span> <span class="delimiter">(</span><a href="#297891" title="org.specs2.main.Arguments">arguments</a>.<a href="../main/Arguments.scala.html#36576" title="=&gt; Boolean">sequential</a><span class="delimiter">)</span> <a href="#297768" title="=&gt; Seq[org.specs2.specification.ExecutingFragment]">lastSequence</a> <span title="(that: scala.collection.GenTraversableOnce[org.specs2.specification.ExecutingFragment])(implicit bf: scala.collection.generic.CanBuildFrom[Seq[org.specs2.specification.ExecutingFragment],org.specs2.specification.ExecutingFragment,Seq[org.specs2.specification.ExecutingFragment]])Seq[org.specs2.specification.ExecutingFragment]">++</span> <a href="#297889" title="Seq[org.specs2.specification.ExecutingFragment]">fs</a> <span class="keyword">else</span> <a href="#297889" title="Seq[org.specs2.specification.ExecutingFragment]">fs</a>,
           barrier = <span class="delimiter">(</span><span class="delimiter">)</span> =&gt; <a href="#297889" title="Seq[org.specs2.specification.ExecutingFragment]">fs</a>.<span title="(f: org.specs2.specification.ExecutingFragment =&gt; org.specs2.specification.ExecutedFragment)(implicit bf: scala.collection.generic.CanBuildFrom[Seq[org.specs2.specification.ExecutingFragment],org.specs2.specification.ExecutedFragment,Any])Any">map</span><span title="scala.collection.generic.CanBuildFrom[scala.collection.Seq.Coll,org.specs2.specification.ExecutedFragment,Seq[org.specs2.specification.ExecutedFragment]]" class="delimiter">(</span><a href="#298011" title="org.specs2.specification.ExecutingFragment">_</a>.<a href="../specification/ExecutedFragment.scala.html#297938" title="=&gt; org.specs2.specification.ExecutedFragment">get</a><span class="delimiter">)</span>,
           nextMustSkip = <a href="#297770" title="=&gt; Boolean">nextMustSkip</a> <span title="(x: Boolean)Boolean">||</span> <a href="#297761" title="(fs: Seq[org.specs2.specification.ExecutingFragment], arguments: org.specs2.main.Arguments, previousSequence: Seq[org.specs2.specification.ExecutingFragment])Boolean">nextSequenceMustSkipped</a><span class="delimiter">(</span><a href="#297889" title="Seq[org.specs2.specification.ExecutingFragment]">fs</a>, <a href="#297891" title="org.specs2.main.Arguments">arguments</a>, <a href="#297890" title="Seq[org.specs2.specification.ExecutingFragment]">previousSequence</a><span class="delimiter">)</span><span class="delimiter">)</span>

    <span class="keyword">def</span> <a title="(fs: Seq[org.specs2.specification.ExecutingFragment], arguments: org.specs2.main.Arguments, previousSequence: Seq[org.specs2.specification.ExecutingFragment])Boolean" id="297761">nextSequenceMustSkipped</a><span class="delimiter">(</span><a title="Seq[org.specs2.specification.ExecutingFragment]" id="298031">fs</a>: <span title="Seq[org.specs2.specification.ExecutingFragment]">Seq</span><span class="delimiter">[</span>ExecutingFragment<span class="delimiter">]</span>, <a title="org.specs2.main.Arguments" id="298032">arguments</a>: <a href="../main/Arguments.scala.html#10577" title="org.specs2.main.Arguments">Arguments</a>, <a title="Seq[org.specs2.specification.ExecutingFragment]" id="298033">previousSequence</a>: <span title="Seq[org.specs2.specification.ExecutingFragment]">Seq</span><span class="delimiter">[</span>ExecutingFragment<span class="delimiter">]</span><span class="delimiter">)</span> =
      <a href="#297763" title="(fs: Seq[org.specs2.specification.ExecutingFragment], stopOnSkip: Boolean)Boolean">skipAllAfterSkipped</a><span class="delimiter">(</span><a href="#298031" title="Seq[org.specs2.specification.ExecutingFragment]">fs</a>, <a href="#298032" title="org.specs2.main.Arguments">arguments</a>.<a href="../main/Arguments.scala.html#36575" title="=&gt; Boolean">stopOnSkip</a><span class="delimiter">)</span> <span title="(x: Boolean)Boolean">||</span>
      <a href="#297762" title="(fs: Seq[org.specs2.specification.ExecutingFragment], stopOnFail: Boolean)Boolean">skipAllAfterFailure</a><span class="delimiter">(</span><a href="#298031" title="Seq[org.specs2.specification.ExecutingFragment]">fs</a>, <a href="#298032" title="org.specs2.main.Arguments">arguments</a>.<a href="../main/Arguments.scala.html#36574" title="=&gt; Boolean">stopOnFail</a><span class="delimiter">)</span> <span title="(x: Boolean)Boolean">||</span>
      <a href="#297764" title="(fs: Seq[org.specs2.specification.ExecutingFragment], previousSequence: Seq[org.specs2.specification.ExecutingFragment])Boolean">skipAllAfterStopOnFailStep</a><span class="delimiter">(</span><a href="#298031" title="Seq[org.specs2.specification.ExecutingFragment]">fs</a>, <a href="#298033" title="Seq[org.specs2.specification.ExecutingFragment]">previousSequence</a><span class="delimiter">)</span>

    <span class="keyword">def</span> <a title="(fs: Seq[org.specs2.specification.ExecutingFragment], stopOnFail: Boolean)Boolean" id="297762">skipAllAfterFailure</a><span class="delimiter">(</span><a title="Seq[org.specs2.specification.ExecutingFragment]" id="298091">fs</a>: <span title="Seq[org.specs2.specification.ExecutingFragment]">Seq</span><span class="delimiter">[</span>ExecutingFragment<span class="delimiter">]</span>, <a title="Boolean" id="298092">stopOnFail</a>: <span title="Boolean">Boolean</span><span class="delimiter">)</span> =
      <a href="#298092" title="Boolean">stopOnFail</a> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <a href="#298091" title="Seq[org.specs2.specification.ExecutingFragment]">fs</a>.<span title="(p: org.specs2.specification.ExecutingFragment =&gt; Boolean)Boolean">exists</span><span class="delimiter">(</span><a title="org.specs2.specification.ExecutingFragment" id="298100">f</a> =&gt; <span title="=&gt; Boolean">!</span><a href="../specification/ExecutedFragment.scala.html#294679" title="(v1: org.specs2.specification.ExecutedFragment)Boolean">isOk</a><span class="delimiter">(</span><a href="#298100" title="org.specs2.specification.ExecutingFragment">f</a>.<a href="../specification/ExecutedFragment.scala.html#297938" title="=&gt; org.specs2.specification.ExecutedFragment">get</a><span class="delimiter">)</span><span class="delimiter">)</span>

    <span class="keyword">def</span> <a title="(fs: Seq[org.specs2.specification.ExecutingFragment], stopOnSkip: Boolean)Boolean" id="297763">skipAllAfterSkipped</a><span class="delimiter">(</span><a title="Seq[org.specs2.specification.ExecutingFragment]" id="298036">fs</a>: <span title="Seq[org.specs2.specification.ExecutingFragment]">Seq</span><span class="delimiter">[</span>ExecutingFragment<span class="delimiter">]</span>, <a title="Boolean" id="298037">stopOnSkip</a>: <span title="Boolean">Boolean</span><span class="delimiter">)</span> =
      <a href="#298037" title="Boolean">stopOnSkip</a> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <a href="#298036" title="Seq[org.specs2.specification.ExecutingFragment]">fs</a>.<span title="(p: org.specs2.specification.ExecutingFragment =&gt; Boolean)Boolean">exists</span><span class="delimiter">(</span><a title="org.specs2.specification.ExecutingFragment" id="298045">f</a> =&gt; <a href="../specification/ExecutedFragment.scala.html#294680" title="(v1: org.specs2.specification.ExecutedFragment)Boolean">isSkipped</a><span class="delimiter">(</span><a href="#298045" title="org.specs2.specification.ExecutingFragment">f</a>.<a href="../specification/ExecutedFragment.scala.html#297938" title="=&gt; org.specs2.specification.ExecutedFragment">get</a><span class="delimiter">)</span><span class="delimiter">)</span>

    <span class="keyword">def</span> <a title="(fs: Seq[org.specs2.specification.ExecutingFragment], previousSequence: Seq[org.specs2.specification.ExecutingFragment])Boolean" id="297764">skipAllAfterStopOnFailStep</a><span class="delimiter">(</span><a title="Seq[org.specs2.specification.ExecutingFragment]" id="298108">fs</a>: <span title="Seq[org.specs2.specification.ExecutingFragment]">Seq</span><span class="delimiter">[</span>ExecutingFragment<span class="delimiter">]</span>, <a title="Seq[org.specs2.specification.ExecutingFragment]" id="298109">previousSequence</a>: <span title="Seq[org.specs2.specification.ExecutingFragment]">Seq</span><span class="delimiter">[</span>ExecutingFragment<span class="delimiter">]</span><span class="delimiter">)</span> =
      <span class="delimiter">(</span><a href="#298108" title="Seq[org.specs2.specification.ExecutingFragment]">fs</a>.<span title="=&gt; List[org.specs2.specification.ExecutingFragment]">toList</span> <span title="Boolean" class="keyword">match</span> <span class="delimiter">{</span>
        <span class="keyword">case</span> <span title="Boolean">LazyExecutingFragment</span><span class="delimiter">(</span>_, Step<span class="delimiter">(</span>_, <a title="Boolean" id="298156">stopOnFail</a><span class="delimiter">)</span><span class="delimiter">)</span> :: _     =&gt; <a href="#298156" title="Boolean">stopOnFail</a>
        <span class="keyword">case</span> <span title="Boolean">FinishedExecutingFragment</span><span class="delimiter">(</span>_, Step<span class="delimiter">(</span>_, <a title="Boolean" id="298200">stopOnFail</a><span class="delimiter">)</span><span class="delimiter">)</span> :: _ =&gt; <a href="#298200" title="Boolean">stopOnFail</a>
        <span class="keyword">case</span> <a title="Boolean(false)" id="298201">other</a>                                                  =&gt; <span title="Boolean(false)" class="keyword">false</span>
      <span class="delimiter">}</span><span class="delimiter">)</span> <span title="(x: Boolean)Boolean">&amp;&amp;</span> <a href="#298109" title="Seq[org.specs2.specification.ExecutingFragment]">previousSequence</a>.<span title="(p: org.specs2.specification.ExecutingFragment =&gt; Boolean)Boolean">exists</span><span class="delimiter">(</span><a title="org.specs2.specification.ExecutingFragment" id="298207">f</a> =&gt; <span title="=&gt; Boolean">!</span><a href="../specification/ExecutedFragment.scala.html#294679" title="(v1: org.specs2.specification.ExecutedFragment)Boolean">isOk</a><span class="delimiter">(</span><a href="#298207" title="org.specs2.specification.ExecutingFragment">f</a>.<a href="../specification/ExecutedFragment.scala.html#297938" title="=&gt; org.specs2.specification.ExecutedFragment">get</a><span class="delimiter">)</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(arguments: org.specs2.main.Arguments, nextMustSkip: Boolean)org.specs2.main.Arguments" id="295704">executionArgs</a><span class="delimiter">(</span><a title="org.specs2.main.Arguments" id="297815">arguments</a>: <a href="../main/Arguments.scala.html#10577" title="org.specs2.main.Arguments">Arguments</a>, <a title="Boolean" id="297819">nextMustSkip</a>: <span title="Boolean">Boolean</span> = <span title="Boolean(false)" class="keyword">false</span><span class="delimiter">)</span> =
    <span title="org.specs2.main.Arguments" class="keyword">if</span> <span class="delimiter">(</span><a href="#297819" title="Boolean">nextMustSkip</a><span class="delimiter">)</span> <a href="#297815" title="org.specs2.main.Arguments">arguments</a> <a href="../main/Arguments.scala.html#36593" title="(other: org.specs2.main.Arguments)org.specs2.main.Arguments">&lt;|</a> <a href="../main/ArgumentsArgs.scala.html#168007" title="org.specs2.main.ArgProperty[String]" id="297888">args</a><span class="delimiter">(</span>skipAll=<a href="../main/ArgumentsArgs.scala.html#51701" title="org.specs2.main.ArgProperty[Boolean]" id="297873" class="keyword">true</a><span class="delimiter">)</span>
    <span class="keyword">else</span>              <a href="#297815" title="org.specs2.main.Arguments">arguments</a>

  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(fs: org.specs2.reporter.FragmentSeq, barrier: =&gt; Any)(implicit args: org.specs2.main.Arguments, implicit strategy: org.specs2.internal.scalaz.concurrent.Strategy)Seq[org.specs2.specification.ExecutingFragment]" id="295705">executeSequence</a><span class="delimiter">(</span><a title="org.specs2.reporter.FragmentSeq" id="297810">fs</a>: <a href="Sequence.scala.html#12290" title="org.specs2.reporter.FragmentSeq">FragmentSeq</a>, <a title="=&gt; Any" id="297811">barrier</a>: =&gt;Any<span class="delimiter">)</span><span class="delimiter">(</span><span class="keyword">implicit</span> <a title="org.specs2.main.Arguments" id="297812">args</a>: <a href="../main/Arguments.scala.html#10577" title="org.specs2.main.Arguments">Arguments</a>, <a title="org.specs2.internal.scalaz.concurrent.Strategy" id="297813">strategy</a>: <span title="org.specs2.internal.scalaz.concurrent.Strategy">Strategy</span><span class="delimiter">)</span>: <span title="Seq[org.specs2.specification.ExecutingFragment]">Seq</span><span class="delimiter">[</span>ExecutingFragment<span class="delimiter">]</span> = <span class="delimiter">{</span>
    <span title="Seq[org.specs2.specification.ExecutingFragment]" class="keyword">if</span> <span class="delimiter">(</span><span title="=&gt; Boolean">!</span><a href="#297812" title="org.specs2.main.Arguments">args</a>.<a href="../main/Arguments.scala.html#36576" title="=&gt; Boolean">sequential</a><span class="delimiter">)</span> <a href="#295706" title="(fs: org.specs2.reporter.FragmentSeq, barrier: =&gt; Any, args: org.specs2.main.Arguments)(implicit strategy: org.specs2.internal.scalaz.concurrent.Strategy)Seq[Product with Serializable with org.specs2.specification.ExecutingFragment{def map(function: org.specs2.specification.ExecutedFragment =&gt; org.specs2.specification.ExecutedFragment): Product with Serializable with org.specs2.specification.ExecutingFragment}]">executeConcurrently</a><span class="delimiter">(</span><a href="#297810" title="org.specs2.reporter.FragmentSeq">fs</a>, <a href="#297811" title="=&gt; Any">barrier</a>, <a href="#297812" title="org.specs2.main.Arguments">args</a><span class="delimiter">)</span><span class="delimiter">(</span><a href="#297813" title="org.specs2.internal.scalaz.concurrent.Strategy">strategy</a><span class="delimiter">)</span>
    <span class="keyword">else</span>                  <a href="#297810" title="org.specs2.reporter.FragmentSeq">fs</a>.<a href="Sequence.scala.html#297800" title="=&gt; Seq[org.specs2.specification.Fragment]">fragments</a>.<span title="(f: org.specs2.specification.Fragment =&gt; org.specs2.specification.FinishedExecutingFragment)(implicit bf: scala.collection.generic.CanBuildFrom[Seq[org.specs2.specification.Fragment],org.specs2.specification.FinishedExecutingFragment,Seq[org.specs2.specification.ExecutingFragment]])Seq[org.specs2.specification.ExecutingFragment]">map</span><span title="scala.collection.generic.CanBuildFrom[scala.collection.Seq.Coll,org.specs2.specification.FinishedExecutingFragment,Seq[org.specs2.specification.FinishedExecutingFragment]]" class="delimiter">(</span><a title="org.specs2.specification.Fragment" id="299442">f</a> =&gt; <a href="../specification/ExecutedFragment.scala.html#298163" title="(f: org.specs2.specification.ExecutedFragment, original: org.specs2.specification.Fragment)org.specs2.specification.FinishedExecutingFragment">FinishedExecutingFragment</a><span class="delimiter">(</span><a href="../specification/FragmentExecution.scala.html#295709" title="(implicit arguments: org.specs2.main.Arguments)org.specs2.specification.Fragment =&gt; org.specs2.specification.ExecutedFragment">executeFragment</a><span title="(v1: org.specs2.specification.Fragment)org.specs2.specification.ExecutedFragment" class="delimiter">(</span><a href="#297812" title="org.specs2.main.Arguments">args</a><span class="delimiter">)</span><span class="delimiter">(</span><a href="#299442" title="org.specs2.specification.Fragment">f</a><span class="delimiter">)</span>, <a href="#299442" title="org.specs2.specification.Fragment">f</a><span class="delimiter">)</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">private</span> <span class="keyword">def</span> <a title="(fs: org.specs2.reporter.FragmentSeq, barrier: =&gt; Any, args: org.specs2.main.Arguments)(implicit strategy: org.specs2.internal.scalaz.concurrent.Strategy)Seq[Product with Serializable with org.specs2.specification.ExecutingFragment{def map(function: org.specs2.specification.ExecutedFragment =&gt; org.specs2.specification.ExecutedFragment): Product with Serializable with org.specs2.specification.ExecutingFragment}]" id="295706">executeConcurrently</a><span class="delimiter">(</span><a title="org.specs2.reporter.FragmentSeq" id="299274">fs</a>: <a href="Sequence.scala.html#12290" title="org.specs2.reporter.FragmentSeq">FragmentSeq</a>, <a title="=&gt; Any" id="299275">barrier</a>: =&gt;Any, <a title="org.specs2.main.Arguments" id="299276">args</a>: <a href="../main/Arguments.scala.html#10577" title="org.specs2.main.Arguments">Arguments</a><span class="delimiter">)</span><span class="delimiter">(</span><span class="keyword">implicit</span> <a title="org.specs2.internal.scalaz.concurrent.Strategy" id="299277">strategy</a>: <span title="org.specs2.internal.scalaz.concurrent.Strategy">Strategy</span><span class="delimiter">)</span> = <span class="delimiter">{</span>
    <span class="keyword">def</span> <a title="(f: org.specs2.specification.Fragment)org.specs2.specification.ExecutedFragment" id="299280">executeWithBarrier</a><span class="delimiter">(</span><a title="org.specs2.specification.Fragment" id="299281">f</a>: <a href="../specification/Fragment.scala.html#12773" title="org.specs2.specification.Fragment">Fragment</a><span class="delimiter">)</span> = <span class="delimiter">{</span> <a href="#299275" title="=&gt; Any">barrier</a>; <a href="../specification/FragmentExecution.scala.html#295709" title="(implicit arguments: org.specs2.main.Arguments)org.specs2.specification.Fragment =&gt; org.specs2.specification.ExecutedFragment">executeFragment</a><span title="(v1: org.specs2.specification.Fragment)org.specs2.specification.ExecutedFragment" class="delimiter">(</span><a href="#299276" title="org.specs2.main.Arguments">args</a><span class="delimiter">)</span><span class="delimiter">(</span><a href="#299281" title="org.specs2.specification.Fragment">f</a><span class="delimiter">)</span> <span class="delimiter">}</span>
    <a href="#299274" title="org.specs2.reporter.FragmentSeq">fs</a>.<a href="Sequence.scala.html#297800" title="=&gt; Seq[org.specs2.specification.Fragment]">fragments</a>.<span title="(f: org.specs2.specification.Fragment =&gt; Product with Serializable with org.specs2.specification.ExecutingFragment{def map(function: org.specs2.specification.ExecutedFragment =&gt; org.specs2.specification.ExecutedFragment): Product with Serializable with org.specs2.specification.ExecutingFragment})(implicit bf: scala.collection.generic.CanBuildFrom[Seq[org.specs2.specification.Fragment],Product with Serializable with org.specs2.specification.ExecutingFragment{def map(function: org.specs2.specification.ExecutedFragment =&gt; org.specs2.specification.ExecutedFragment): Product with Serializable with org.specs2.specification.ExecutingFragment},Seq[Product with Serializable with org.specs2.specification.ExecutingFragment{def map(function: org.specs2.specification.ExecutedFragment =&gt; org.specs2.specification.ExecutedFragment): Product with Serializable with org.specs2.specification.ExecutingFragment}]])Seq[Product with Serializable with org.specs2.specification.ExecutingFragment{def map(function: org.specs2.specification.ExecutedFragment =&gt; org.specs2.specification.ExecutedFragment): Product with Serializable with org.specs2.specification.ExecutingFragment}]">map</span> <a href="#299301" title="&lt;none&gt; extends Product with Serializable with org.specs2.specification.ExecutingFragment" class="delimiter">{</a>
      <span class="keyword">case</span> <a title="org.specs2.specification.PromisedExecutingFragment" id="299302">f</a>: <a href="../specification/Fragment.scala.html#12783" title="org.specs2.specification.Example">Example</a> =&gt; <a href="../specification/ExecutedFragment.scala.html#299305" title="(promised: org.specs2.internal.scalaz.concurrent.Promise[org.specs2.specification.ExecutedFragment], f: org.specs2.specification.Fragment)org.specs2.specification.PromisedExecutingFragment">PromisedExecutingFragment</a><span class="delimiter">(</span><span title="(a: =&gt; org.specs2.specification.ExecutedFragment)(implicit s: org.specs2.internal.scalaz.concurrent.Strategy)org.specs2.internal.scalaz.concurrent.Promise[org.specs2.specification.ExecutedFragment]">promise</span><span class="delimiter">(</span><a href="#299280" title="(f: org.specs2.specification.Fragment)org.specs2.specification.ExecutedFragment">executeWithBarrier</a><span class="delimiter">(</span><a href="#299302" title="org.specs2.specification.Example">f</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">(</span><a href="#299277" title="org.specs2.internal.scalaz.concurrent.Strategy">strategy</a><span class="delimiter">)</span>, <a href="#299302" title="org.specs2.specification.Example">f</a><span class="delimiter">)</span>
      <span class="keyword">case</span> <a title="org.specs2.specification.PromisedExecutingFragment" id="299329">f</a>: <a href="../specification/Fragment.scala.html#12789" title="org.specs2.specification.Action">Action</a>  =&gt; <a href="../specification/ExecutedFragment.scala.html#299305" title="(promised: org.specs2.internal.scalaz.concurrent.Promise[org.specs2.specification.ExecutedFragment], f: org.specs2.specification.Fragment)org.specs2.specification.PromisedExecutingFragment">PromisedExecutingFragment</a><span class="delimiter">(</span><span title="(a: =&gt; org.specs2.specification.ExecutedFragment)(implicit s: org.specs2.internal.scalaz.concurrent.Strategy)org.specs2.internal.scalaz.concurrent.Promise[org.specs2.specification.ExecutedFragment]">promise</span><span class="delimiter">(</span><a href="#299280" title="(f: org.specs2.specification.Fragment)org.specs2.specification.ExecutedFragment">executeWithBarrier</a><span class="delimiter">(</span><a href="#299329" title="org.specs2.specification.Action">f</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">(</span><a href="#299277" title="org.specs2.internal.scalaz.concurrent.Strategy">strategy</a><span class="delimiter">)</span>, <a href="#299329" title="org.specs2.specification.Action">f</a><span class="delimiter">)</span>
      <span class="keyword">case</span> <a title="org.specs2.specification.FinishedExecutingFragment" id="299337">f</a>: <a href="../specification/Fragment.scala.html#12786" title="org.specs2.specification.Step">Step</a>    =&gt; <a href="../specification/ExecutedFragment.scala.html#298163" title="(f: org.specs2.specification.ExecutedFragment, original: org.specs2.specification.Fragment)org.specs2.specification.FinishedExecutingFragment">FinishedExecutingFragment</a><span class="delimiter">(</span><a href="#299280" title="(f: org.specs2.specification.Fragment)org.specs2.specification.ExecutedFragment">executeWithBarrier</a><span class="delimiter">(</span><a href="#299337" title="org.specs2.specification.Step">f</a><span class="delimiter">)</span>, <a href="#299337" title="org.specs2.specification.Step">f</a><span class="delimiter">)</span>
      <span class="keyword">case</span> <a title="org.specs2.specification.FinishedExecutingFragment" id="299347">f</a>: <a href="../specification/Fragment.scala.html#12777" title="org.specs2.specification.SpecEnd">SpecEnd</a> =&gt; <a href="../specification/ExecutedFragment.scala.html#298163" title="(f: org.specs2.specification.ExecutedFragment, original: org.specs2.specification.Fragment)org.specs2.specification.FinishedExecutingFragment">FinishedExecutingFragment</a><span class="delimiter">(</span><a href="#299280" title="(f: org.specs2.specification.Fragment)org.specs2.specification.ExecutedFragment">executeWithBarrier</a><span class="delimiter">(</span><a href="#299347" title="org.specs2.specification.SpecEnd">f</a><span class="delimiter">)</span>, <a href="#299347" title="org.specs2.specification.SpecEnd">f</a><span class="delimiter">)</span>
      <span class="keyword">case</span> <a title="org.specs2.specification.FinishedExecutingFragment" id="299352">f</a>          =&gt; <a href="../specification/ExecutedFragment.scala.html#298163" title="(f: org.specs2.specification.ExecutedFragment, original: org.specs2.specification.Fragment)org.specs2.specification.FinishedExecutingFragment">FinishedExecutingFragment</a><span class="delimiter">(</span><a href="../specification/FragmentExecution.scala.html#295709" title="(implicit arguments: org.specs2.main.Arguments)org.specs2.specification.Fragment =&gt; org.specs2.specification.ExecutedFragment">executeFragment</a><span title="(v1: org.specs2.specification.Fragment)org.specs2.specification.ExecutedFragment" class="delimiter">(</span><a href="#299276" title="org.specs2.main.Arguments">args</a><span class="delimiter">)</span><span class="delimiter">(</span><a href="#299352" title="org.specs2.specification.Fragment">f</a><span class="delimiter">)</span>, <a href="#299352" title="org.specs2.specification.Fragment">f</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>
<span class="delimiter">}</span>

        </pre>
    </body>
</html>