<?xml version="1.0" encoding="utf-8"?>
      <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <meta http-equiv="Expires" content="0" />
        <title>org/specs2/runner/FilesRunner.scala</title>
        <script type="text/javascript" src="../../../jquery-all.js"></script>
        <script type="text/javascript" src="../../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../../style.css" title="Style"></link>
    </head>
    <body>
        <pre>
<span class="keyword">package</span> org.specs2
<span class="keyword">package</span> runner

<span class="keyword">import</span> io.FromSource
<span class="keyword">import</span> main._
<span class="keyword">import</span> <a href="../main/ArgumentsArgs.scala.html#10608" title="object org.specs2.main.ArgProperties">ArgProperties</a>._
<span class="keyword">import</span> specification._
<span class="keyword">import</span> reporter._

<span class="comment">/**
 * This trait finds specifications in the source directory, instantiate them as one big
 * specification and report them using the ConsoleReporter or the HtmlReporter depending on the presence of the html flag
 * 
 * @see org.specs2.io.FromSource for the definition of the source directory
 * @see org.specs2.main.Arguments for the regular expression defining the specification names
 * to extract and other options
 */</span>
<span class="keyword">trait</span> <a title="trait FilesRunner extends java.lang.Object with org.specs2.runner.SpecificationsFinder with org.specs2.runner.SystemExit with ScalaObject" id="12464">FilesRunner</a> <span title="ScalaObject" class="keyword">extends</span> <a href="SpecificationsFinder.scala.html#12511" title="org.specs2.runner.SpecificationsFinder">SpecificationsFinder</a> <span class="keyword">with</span> <a href="SystemExit.scala.html#12518" title="org.specs2.runner.SystemExit">SystemExit</a> <span class="delimiter">{</span>

  <span class="keyword">def</span> <a title="(arguments: Array[String])Unit" id="126590">main</a><span class="delimiter">(</span><a title="Array[String]" id="340380">arguments</a>: <span title="Array[String]">Array</span><span class="delimiter">[</span>String<span class="delimiter">]</span><span class="delimiter">)</span> <span class="delimiter">{</span>
    <a href="SystemExit.scala.html#126762" title="(executed: Seq[org.specs2.specification.ExecutedSpecification])Unit">exitSystem</a><span class="delimiter">(</span><a href="#126591" title="(arguments: Array[String])List[org.specs2.specification.ExecutedSpecification]">run</a><span class="delimiter">(</span><a href="#340380" title="Array[String]">arguments</a><span class="delimiter">)</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="(arguments: Array[String])List[org.specs2.specification.ExecutedSpecification]" id="126591">run</a><span class="delimiter">(</span><a title="Array[String]" id="340388">arguments</a>: <span title="Array[String]">Array</span><span class="delimiter">[</span>String<span class="delimiter">]</span><span class="delimiter">)</span> = <span class="delimiter">{</span>
    <span class="keyword">implicit</span> <span class="keyword">val</span> <a title="org.specs2.main.Arguments" id="340391">args</a> = <a href="#126596" title="(arguments: Array[String])org.specs2.main.Arguments">createArguments</a><span class="delimiter">(</span><a href="#340388" title="Array[String]">arguments</a><span class="delimiter">)</span>
    <a href="#126594" title="(implicit args: org.specs2.main.Arguments)Unit">beforeExecution</a>

    <span class="keyword">val</span> <a title="Seq[org.specs2.specification.SpecificationStructure]" id="340392">specs</a> = <a href="SpecificationsFinder.scala.html#340445" title="String =&gt; Boolean" id="340473">specifications</a><a href="#340391" title="org.specs2.main.Arguments" class="delimiter">(</a>path     = <a href="#340391" title="org.specs2.main.Arguments">args</a>.<a href="../main/Arguments.scala.html#36560" title="=&gt; org.specs2.main.CommandLine">commandLine</a>.<a href="../main/Arguments.scala.html#159841" title="(name: String)Option[String]">value</a><span class="delimiter">(</span><span title="java.lang.String(&quot;filesrunner.path&quot;)" class="string">&quot;filesrunner.path&quot;</span><span class="delimiter">)</span>.<span title="(default: =&gt; String)String">getOrElse</span><a title="String" id="340469" class="delimiter">(</a><span title="java.lang.String(&quot;**/*.scala&quot;)" class="string">&quot;**/*.scala&quot;</span><span class="delimiter">)</span>,
                               pattern  = <a href="#340391" title="org.specs2.main.Arguments">args</a>.<a href="../main/Arguments.scala.html#36560" title="=&gt; org.specs2.main.CommandLine">commandLine</a>.<a href="../main/Arguments.scala.html#159841" title="(name: String)Option[String]">value</a><span class="delimiter">(</span><span title="java.lang.String(&quot;filesrunner.pattern&quot;)" class="string">&quot;filesrunner.pattern&quot;</span><span class="delimiter">)</span>.<span title="(default: =&gt; String)String">getOrElse</span><a title="String" id="340470" class="delimiter">(</a><span title="java.lang.String(&quot;.*Spec&quot;)" class="string">&quot;.*Spec&quot;</span><span class="delimiter">)</span>,
                               basePath = <a href="#340391" title="org.specs2.main.Arguments">args</a>.<a href="../main/Arguments.scala.html#36560" title="=&gt; org.specs2.main.CommandLine">commandLine</a>.<a href="../main/Arguments.scala.html#159841" title="(name: String)Option[String]">value</a><span class="delimiter">(</span><span title="java.lang.String(&quot;filesrunner.basepath&quot;)" class="string">&quot;filesrunner.basepath&quot;</span><span class="delimiter">)</span>.<span title="(default: =&gt; String)String">getOrElse</span><a title="String" id="340471" class="delimiter">(</a><a href="../io/FromSource.scala.html#10505" title="object org.specs2.io.FromSource">FromSource</a>.<a href="../io/FromSource.scala.html#34275" title="=&gt; String">srcTestDir</a><span class="delimiter">)</span>,
                               verbose  = <a href="#126593" title="Boolean" id="340472">isVerbose</a><span class="delimiter">)</span>

    <span class="keyword">val</span> <a title="List[org.specs2.specification.ExecutedSpecification]" id="340393">executed</a> = <a href="#340392" title="Seq[org.specs2.specification.SpecificationStructure]">specs</a>.<span title="=&gt; List[org.specs2.specification.SpecificationStructure]">toList</span>.<span title="(f: org.specs2.specification.SpecificationStructure =&gt; org.specs2.specification.ExecutedSpecification)(implicit bf: scala.collection.generic.CanBuildFrom[List[org.specs2.specification.SpecificationStructure],org.specs2.specification.ExecutedSpecification,List[org.specs2.specification.ExecutedSpecification]])List[org.specs2.specification.ExecutedSpecification]">map</span><span title="scala.collection.generic.CanBuildFrom[scala.collection.immutable.List.Coll,org.specs2.specification.ExecutedSpecification,List[org.specs2.specification.ExecutedSpecification]]" class="delimiter">(</span><a href="#126592" title="(implicit args: org.specs2.main.Arguments)java.lang.Object with org.specs2.reporter.DefaultReporter with org.specs2.reporter.AllExporting">reporter</a>.<a href="../reporter/AllExporting.scala.html#294344" title="(spec: org.specs2.specification.SpecificationStructure)(implicit arguments: org.specs2.main.Arguments)org.specs2.specification.ExecutedSpecification">report</a><span class="delimiter">)</span>
    <a href="#126595" title="(specs: Seq[org.specs2.specification.SpecificationStructure])(implicit args: org.specs2.main.Arguments)Unit">afterExecution</a><a href="#340391" title="org.specs2.main.Arguments" class="delimiter">(</a><a href="#340392" title="Seq[org.specs2.specification.SpecificationStructure]">specs</a><span class="delimiter">)</span>
    <a href="#340393" title="List[org.specs2.specification.ExecutedSpecification]">executed</a>
  <span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="(implicit args: org.specs2.main.Arguments)java.lang.Object with org.specs2.reporter.DefaultReporter with org.specs2.reporter.AllExporting" id="126592">reporter</a><span class="delimiter">(</span><span class="keyword">implicit</span> <a title="org.specs2.main.Arguments" id="340494">args</a>: <a href="../main/Arguments.scala.html#10577" title="org.specs2.main.Arguments">Arguments</a><span class="delimiter">)</span> = <a href="#340497" title="java.lang.Object with org.specs2.reporter.DefaultReporter with org.specs2.reporter.AllExporting" class="keyword">new</a> <a title="anonymous class $anon extends java.lang.Object with org.specs2.reporter.DefaultReporter with org.specs2.reporter.AllExporting" id="340497">DefaultReporter</a> <span class="keyword">with</span> <a href="../reporter/AllExporting.scala.html#11897" title="org.specs2.reporter.AllExporting">AllExporting</a> <span class="delimiter">{</span><span class="delimiter">}</span>

  <span class="keyword">def</span> <a title="(implicit args: org.specs2.main.Arguments)Boolean" id="126593">isVerbose</a><span class="delimiter">(</span><span class="keyword">implicit</span> <a title="org.specs2.main.Arguments" id="340466">args</a>: <a href="../main/Arguments.scala.html#10577" title="org.specs2.main.Arguments">Arguments</a><span class="delimiter">)</span> = <a href="#340466" title="org.specs2.main.Arguments">args</a>.<a href="../main/Arguments.scala.html#36560" title="=&gt; org.specs2.main.CommandLine">commandLine</a>.<a href="../main/Arguments.scala.html#159840" title="(a: String)Boolean">contains</a><span class="delimiter">(</span><span title="java.lang.String(&quot;filesrunner.verbose&quot;)" class="string">&quot;filesrunner.verbose&quot;</span><span class="delimiter">)</span>

  <span class="comment">/** print a message before the execution */</span>
  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="(implicit args: org.specs2.main.Arguments)Unit" id="126594">beforeExecution</a><span class="delimiter">(</span><span class="keyword">implicit</span> <a title="org.specs2.main.Arguments" id="340432">args</a>: <a href="../main/Arguments.scala.html#10577" title="org.specs2.main.Arguments">Arguments</a><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#126593" title="(implicit args: org.specs2.main.Arguments)Boolean">isVerbose</a><span class="delimiter">)</span> <span class="delimiter">{</span>
      <a href="../io/Output.scala.html#16415" title="(m: Any)Unit">println</a><span class="delimiter">(</span><span title="java.lang.String(&quot;\012Executing specifications matching &quot;)" class="string">&quot;\nExecuting specifications matching &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="#340432" title="org.specs2.main.Arguments">args</a>.<a href="../main/Arguments.scala.html#36571" title="=&gt; String">specName</a> <span title="(x$1: Any)java.lang.String">+</span> <span title="java.lang.String(&quot; in &quot;)" class="string">&quot; in &quot;</span> <span title="(x$1: Any)java.lang.String">+</span> <a href="../io/FromSource.scala.html#10505" title="object org.specs2.io.FromSource">FromSource</a>.<a href="../io/FromSource.scala.html#34275" title="=&gt; String">srcTestDir</a><span class="delimiter">)</span>
      <a href="../io/Output.scala.html#16415" title="(m: Any)Unit">println</a><span class="delimiter">(</span><span title="java.lang.String(&quot;exporters are &quot;)" class="string">&quot;exporters are &quot;</span><span title="(x$1: Any)java.lang.String">+</span><a href="#126592" title="(implicit args: org.specs2.main.Arguments)java.lang.Object with org.specs2.reporter.DefaultReporter with org.specs2.reporter.AllExporting">reporter</a><span class="delimiter">(</span><a href="#340432" title="org.specs2.main.Arguments">args</a><span class="delimiter">)</span>.<a href="../reporter/Exporters.scala.html#294357" title="(implicit arguments: org.specs2.main.Arguments)Seq[org.specs2.reporter.Exporting]">exporters</a><span class="delimiter">(</span><a href="#340432" title="org.specs2.main.Arguments">args</a><span class="delimiter">)</span>.<span title="(f: org.specs2.reporter.Exporting =&gt; java.lang.String)(implicit bf: scala.collection.generic.CanBuildFrom[Seq[org.specs2.reporter.Exporting],java.lang.String,Seq[java.lang.String]])Seq[java.lang.String]">map</span><span title="scala.collection.generic.CanBuildFrom[scala.collection.Seq.Coll,java.lang.String,Seq[java.lang.String]]" class="delimiter">(</span><a href="#340566" title="org.specs2.reporter.Exporting">_</a>.<span title="()java.lang.Class[_]">getClass</span>.<span title="()java.lang.String">getName</span><span class="delimiter">)</span>.<span title="(sep: String)String">mkString</span><span class="delimiter">(</span><span title="java.lang.String(&quot;,&quot;)" class="string">&quot;,&quot;</span><span class="delimiter">)</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="comment">/** print a message after the execution based on the number of specifications */</span>
  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="(specs: Seq[org.specs2.specification.SpecificationStructure])(implicit args: org.specs2.main.Arguments)Unit" id="126595">afterExecution</a><span class="delimiter">(</span><a title="Seq[org.specs2.specification.SpecificationStructure]" id="340539">specs</a>: <span title="Seq[org.specs2.specification.SpecificationStructure]">Seq</span><span class="delimiter">[</span>SpecificationStructure<span class="delimiter">]</span><span class="delimiter">)</span><span class="delimiter">(</span><span class="keyword">implicit</span> <a title="org.specs2.main.Arguments" id="340540">args</a>: <a href="../main/Arguments.scala.html#10577" title="org.specs2.main.Arguments">Arguments</a><span class="delimiter">)</span> <span class="delimiter">{</span>
    <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#126593" title="(implicit args: org.specs2.main.Arguments)Boolean">isVerbose</a><span class="delimiter">)</span> <span class="delimiter">{</span>
      <span title="Unit" class="keyword">if</span> <span class="delimiter">(</span><a href="#340539" title="Seq[org.specs2.specification.SpecificationStructure]">specs</a>.<span title="=&gt; Boolean">isEmpty</span><span class="delimiter">)</span> <a href="../io/Output.scala.html#16415" title="(m: Any)Unit">println</a><span class="delimiter">(</span><span title="java.lang.String(&quot;No specification found matching &quot;)" class="string">&quot;No specification found matching &quot;</span><span title="(x$1: Any)java.lang.String">+</span><a href="#340540" title="org.specs2.main.Arguments">args</a>.<a href="../main/Arguments.scala.html#36571" title="=&gt; String">specName</a><span title="(x$1: Any)java.lang.String">+</span><span title="java.lang.String(&quot; in &quot;)" class="string">&quot; in &quot;</span><span title="(x$1: Any)java.lang.String">+</span><a href="../io/FromSource.scala.html#10505" title="object org.specs2.io.FromSource">FromSource</a>.<a href="../io/FromSource.scala.html#34275" title="=&gt; String">srcTestDir</a><span title="(x$1: Any)java.lang.String">+</span><span title="java.lang.String(&quot;\012&quot;)" class="string">&quot;\n&quot;</span><span class="delimiter">)</span>
      <span class="keyword">else</span>               <a href="../io/Output.scala.html#16415" title="(m: Any)Unit">println</a><span class="delimiter">(</span><span title="java.lang.String(&quot;Finished the execution of &quot;)" class="string">&quot;Finished the execution of &quot;</span><span title="(x$1: Any)java.lang.String">+</span><a href="#340539" title="Seq[org.specs2.specification.SpecificationStructure]">specs</a>.<span title="=&gt; Int">size</span><span title="(x$1: Any)java.lang.String">+</span><span title="java.lang.String(&quot; specifications\012&quot;)" class="string">&quot; specifications\n&quot;</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="comment">/** @return the Arguments object depending on the command-line options */</span>
  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="(arguments: Array[String])org.specs2.main.Arguments" id="126596">createArguments</a><span class="delimiter">(</span><a title="Array[String]" id="340394">arguments</a>: <span title="Array[String]">Array</span><span class="delimiter">[</span>String<span class="delimiter">]</span><span class="delimiter">)</span> = <a href="../main/Arguments.scala.html#119528" title="(implicit arguments: String*)org.specs2.main.Arguments">Arguments</a><span class="delimiter">(</span><a href="#340394" title="Array[String]">arguments</a>:_*<span class="delimiter">)</span> <a href="../main/Arguments.scala.html#36593" title="(other: org.specs2.main.Arguments)org.specs2.main.Arguments">&lt;|</a> <a href="../main/ArgumentsArgs.scala.html#10604" title="object org.specs2.main.ArgumentsArgs">ArgumentsArgs</a>.<a href="../main/ArgumentsArgs.scala.html#51705" title="=&gt; org.specs2.main.ArgumentsArgs.ArgumentsNamespace">args</a>.<a href="../main/ArgumentsArgs.scala.html#168079" title="org.specs2.main.ArgProperty[Boolean]" id="340431">report</a><span class="delimiter">(</span>offset=<a href="../main/ArgumentsArgs.scala.html#51701" title="org.specs2.main.ArgProperty[Int]" id="340414" class="int">2</a><span class="delimiter">)</span>

  <span class="comment">/** @return the specifications to execute */</span>
  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="(implicit args: org.specs2.main.Arguments)Seq[org.specs2.specification.SpecificationStructure]" id="126597">specifications</a><span class="delimiter">(</span><span class="keyword">implicit</span> <a title="org.specs2.main.Arguments" id="340434">args</a>: <a href="../main/Arguments.scala.html#10577" title="org.specs2.main.Arguments">Arguments</a><span class="delimiter">)</span>: <span title="Seq[org.specs2.specification.SpecificationStructure]">Seq</span><span class="delimiter">[</span>SpecificationStructure<span class="delimiter">]</span> =
    <a href="#126598" title="(implicit args: org.specs2.main.Arguments)Seq[String]">specificationClassNames</a><span class="delimiter">(</span><a href="#340434" title="org.specs2.main.Arguments">args</a><span class="delimiter">)</span>.<span title="(f: String =&gt; scala.collection.GenTraversableOnce[org.specs2.specification.SpecificationStructure])(implicit bf: scala.collection.generic.CanBuildFrom[Seq[String],org.specs2.specification.SpecificationStructure,Seq[org.specs2.specification.SpecificationStructure]])Seq[org.specs2.specification.SpecificationStructure]">flatMap</span><span title="scala.collection.generic.CanBuildFrom[scala.collection.Seq.Coll,org.specs2.specification.SpecificationStructure,Seq[org.specs2.specification.SpecificationStructure]]" class="delimiter">(</span><a title="String" id="340636">name</a> =&gt; <a href="SpecificationsFinder.scala.html#126587" title="(className: String, verbose: Boolean)(implicit args: org.specs2.main.Arguments)Option[org.specs2.specification.SpecificationStructure]">createSpecification</a><a href="#340434" title="(xo: Option[org.specs2.specification.SpecificationStructure])Iterable[org.specs2.specification.SpecificationStructure]" class="delimiter">(</a><a href="#340636" title="String">name</a>, verbose = <a href="#340434" title="org.specs2.main.Arguments">args</a>.<a href="../main/Arguments.scala.html#36560" title="=&gt; org.specs2.main.CommandLine">commandLine</a>.<a href="../main/Arguments.scala.html#159840" title="(a: String)Boolean">contains</a><span class="delimiter">(</span><span title="java.lang.String(&quot;verbose&quot;)" class="string">&quot;verbose&quot;</span><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>

  <span class="comment">/** @return the specifications class names to execute */</span>
  <span class="keyword">protected</span> <span class="keyword">def</span> <a title="(implicit args: org.specs2.main.Arguments)Seq[String]" id="126598">specificationClassNames</a><span class="delimiter">(</span><span class="keyword">implicit</span> <a title="org.specs2.main.Arguments" id="340590">args</a>: <a href="../main/Arguments.scala.html#10577" title="org.specs2.main.Arguments">Arguments</a><span class="delimiter">)</span> = <a href="SpecificationsFinder.scala.html#340600" title="String" id="340607">specificationNames</a><span class="delimiter">(</span><a href="../io/FromSource.scala.html#10505" title="object org.specs2.io.FromSource">FromSource</a>.<a href="../io/FromSource.scala.html#34275" title="String" id="340604">srcTestDir</a>, <a href="#340590" title="org.specs2.main.Arguments">args</a>.<a href="../main/Arguments.scala.html#36571" title="String" id="340605">specName</a>, verbose = <a href="#340590" title="org.specs2.main.Arguments">args</a>.<a href="../main/Arguments.scala.html#36560" title="=&gt; org.specs2.main.CommandLine">commandLine</a>.<a href="../main/Arguments.scala.html#159840" title="(a: String)Boolean">contains</a><a title="Boolean" id="340606" class="delimiter">(</a><span title="java.lang.String(&quot;verbose&quot;)" class="string">&quot;verbose&quot;</span><span class="delimiter">)</span><span class="delimiter">)</span>

<span class="delimiter">}</span>

<span class="keyword">object</span> <a title="object org.specs2.runner.FilesRunner" id="12465">FilesRunner</a> <span title="ScalaObject" class="keyword">extends</span> <a href="#12464" title="org.specs2.runner.FilesRunner">FilesRunne</a>r
        </pre>
    </body>
</html>